import{u as c,D as p}from"./useFetchDatas-f7287a8d.js";import{r as a,a as m,u as w,b as F,j as e,aO as P,d,aP as h,aQ as s,aR as S,F as r,aS as _,T as x,c as E,p as O,e as b,B as D,aM as N}from"./vendor-0279cb68.js";import{T as R}from"./index.es-7421fa40.js";import{g as T}from"./getInitialParamFromUrl-141e6748.js";function l(){return{width:window.innerWidth,height:window.innerHeight}}function A(){const[o,t]=a.exports.useState(l);return a.exports.useEffect(()=>{const n=()=>t(l());return window.addEventListener("resize",n,!1),()=>window.removeEventListener("resize",n,!1)}),o}const z=()=>{const o=m(),[t,n]=w(),v=F(),i=c(p.FLOOR_PLAN_SERVER_PLUGIN_DATA);return a.exports.useEffect(()=>{if(!i||JSON.stringify(i)==="{}")return;o.plugins.topviewFloorplanPlugin.load(i)},[i]),v!=="Loaded"?null:e(P,{sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"transparent"},className:"topview-floorplan-plugin-use",children:d(h,{showLabels:!0,value:t.mode,onChange:(f,g)=>{n({mode:g})},children:[e(s,{label:"\u5168\u666F\u6F2B\u6E38",icon:e(S,{}),value:r.Mode.Panorama}),e(s,{label:"\u4FEF\u89C6\u6A21\u578B",icon:e(_,{}),value:r.Mode.Topview})]})})};Object.assign(window,{THREE:x});const L={hoverEnable:!0,northDesc:"N"},u=T(),y=JSON.stringify(u)!=="{}"?u:L,B=E({imageOptions:{size:512},textureOptions:{size:512},plugins:[[R,"topviewFloorplanPlugin",{selector:".plugin-full-screen-container",...y}]]}),M=()=>{const o=A(),t=c(p.WORK);return t&&d(B,{initialWork:O(t),ref:n=>Object.assign(window,{$five:n?.five}),children:[e(b,{...o}),e(D,{className:"plugin-full-screen-container",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}),e(z,{})]})};N.render(e(M,{}),document.querySelector("#app"));
