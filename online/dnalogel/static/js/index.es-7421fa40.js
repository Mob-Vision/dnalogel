import{g as dt,C as Ue,S as jt,P as Mi,O as bt,D as Vt,V as O,A as Di,G as Ze,h as zi,M as je,i as ve,k as Tt,l as Fe,m as Qt,n as Ci,o as Xe,q as Kn,s as ki,F as ke,t as Gt,v as Se,w as U,x as q,y as Kt,z as Lt,R as ze,E as Ei,H as Ti,I as vt,J as Gi,L as Je,K as $t,W as Ni,N as J,Q as Hi,U as Si,X as $n,Y as Nt,Z as me,_ as Fi,$ as Xi,a0 as Wi,a1 as Ri,a2 as Bi,a3 as oe,a4 as xe,a5 as ee,a6 as M,a7 as te,a8 as j,a9 as C,aa as D,ab as ne,ac as G,ad as y,ae as Ht,af as ei,ag as We,ah as ue,ai as St,aj as Z,ak as E,al as pe,am as ft,an as I,ao as Ft,ap as Yi,aq as _i,T as Zi,ar as le,as as Xt,at as X,au as Ui,av as qi,aw as ce,ax as ht,ay as ge,az as Ji,aA as Vi,aB as Qi,aC as Ki,aD as $i,aE as eo,aF as mt,aG as Wt,aH as en,aI as ae,aJ as ti,aK as tn,aL as Ot}from"./vendor-0279cb68.js";const il=n=>{let e=!0,t=null;const i=new jt,o=new Mi(60,1,.1,1e3);let r=new bt;{const h=new Vt(16777215,.5);h.position.copy(new O(1,1,1)),i.add(h)}{const h=new Vt(16777215,.3);i.add(h)}{const h=new Di(16777215,.3);i.add(h)}i.add(r);const a=()=>{if(!!n.renderer)return t||(t=new Ni({antialias:!1,alpha:!0}),t.setPixelRatio(n.renderer.getPixelRatio()),t.outputEncoding=Gt,t.setClearColor(1579548,0),t.autoClear=!0),t},s=()=>{r.traverse(h=>{h instanceof ve&&[].concat(h.material).forEach(b=>b.dispose())}),i.remove(r),r=new bt,i.add(r),d()},l=()=>{function h(b){return b=b.clone(),b.uniforms.modelAlpha.value=1,b.uniforms.map.value&&(b.uniforms.map.value.needsUpdate=!0),b}function f(b){if(b instanceof ve){const g=b.geometry,P=Array.isArray(b.material)?b.material.map(h):h(b.material);return new ve(g,P)}else if(b instanceof Ze){const g=new Ze;return b.children.forEach(P=>g.add(f(P))),g}else{const g=new bt;return b.children.forEach(P=>g.add(f(P))),g}}i.remove(r),r=f(n.model),i.add(r),d()},u=(h,f={})=>{const b=a();if(!b)return;h.appendChild(b.domElement),c(f);const g=window.getComputedStyle(h).position;g!=="relative"&&g!=="absolute"&&g!=="fixed"&&g!=="sticky"&&(h.style.position="relative")},c=(h={})=>{if(!t)return;const b=t.domElement.parentNode;if(b&&b.nodeName){const{width:g=b.offsetWidth,height:P=b.offsetHeight}=h;t.setSize(g,P),o.aspect=g/P,o.updateProjectionMatrix()}d()},v=()=>{const h=n.model.bounding,{fov:f,aspect:b}=o,g=Math.sqrt(Math.pow(h.max.x-h.min.x+2,2)+Math.pow(h.max.y-h.min.y+2,2)+Math.pow(h.max.z-h.min.z+2,2));let P=g/2/Math.tan(Math.PI*f/360);return b<1&&(P=P/b),isNaN(P)?g:P},d=()=>{const{longitude:h,latitude:f}=n.getPose(),b=v(),g=n.model.bounding.getCenter(new O),P=b*Math.cos(f),A=new O;A.x=Math.sin(h)*P+g.x,A.z=Math.cos(h)*P+g.z,A.y=Math.sin(f)*b+g.y,o.position.copy(A),o.lookAt(g),e=!0},m=()=>{e!==!0||!t||!t.domElement.parentNode||t.domElement.parentNode.offsetWidth===0||(t.render(i,o),e=!1)},p=()=>{t&&t.dispose(),t=null};return n.on("modelLoaded",l),n.on("modelWillLoad",s),n.on("cameraDirectionUpdate",d),n.on("dispose",p),n.on("renderFrame",m),{appendTo:u,refresh:c}};function Ve(n,e){const t=Math.round(n);return t%2===0?t:t+Number((e==null?void 0:e.smaller)?-1:1)}function to(n,e){return new O((n.x+e.x)/2,(n.y+e.y)/2,(n.z+e.z)/2)}const ni=({x:n,y:e,z:t})=>new O(n,e,t);function no(n,e){if(!e||typeof ResizeObserver>"u")return{observe:()=>window.addEventListener("resize",n),unobserve:()=>window.removeEventListener("resize",n)};{const t=new ResizeObserver(n);return{observe:()=>t.observe(e),unobserve:()=>t.unobserve(e)}}}const ii=n=>{const e={disposeCallbacks:[]},t=(...o)=>{var r,a,s;const l=o[0].map(S=>S instanceof O?S:ni(S)),u=o[1];if((l==null?void 0:l.length)<4)return console.error("points must be equal or greater than than 4");if(!((r=n==null?void 0:n.model)===null||r===void 0?void 0:r.loaded))return console.error("five.model.loaded is: ",(a=n==null?void 0:n.model)===null||a===void 0?void 0:a.loaded);const c=n.getElement();if(!c)return console.error("five.getElement() is "+c);const v=[],d=(u==null?void 0:u.ratio)||.00216;d<=.00215&&console.warn("if you need click css3DElement on safari, ratio must be greater than 0.00215");const m=(u==null?void 0:u.dpr)||1,p=(u==null?void 0:u.mode)||"front",h=(s=u==null?void 0:u.autoRender)!==null&&s!==void 0?s:!0,f=(u==null?void 0:u.behindFiveContainer)||c.parentElement||document.body,b=(u==null?void 0:u.container)||document.createElement("div");b.classList.add("__Dnalogel-plugin--CSS3DRenderPlugin");const{css3DObject:g,mesh:P}=i(l,{ratio:d,dpr:m,container:b,mode:p});let A;const w=p==="front"&&!e.frontMode,x=p==="behind"&&!e.behindMode,N=!(w||x);x&&(e.behindMode={scene:new jt,css3DRenderer:new Qt}),w&&(e.frontMode={scene:new jt,css3DRenderer:new Qt});const L=p==="behind"?e.behindMode:e.frontMode,{scene:T,css3DRenderer:k}=L,V=(()=>{if(N)return()=>{T.add(g)};{const S=()=>{const se=Ve(c.clientWidth,{smaller:!0}),Re=Ve(c.clientHeight,{smaller:!0});k.setSize(se,Re)};S(),A=no(S,c),k.domElement.style.position="absolute",k.domElement.style.top="0",k.domElement.style.userSelect="none",k.domElement.style.pointerEvents="none";const R=()=>{const se=requestAnimationFrame(R);L.requestAnimationFrameId=se,k.render(T,n.camera)};return()=>{var se;T.add(g),(se=A==null?void 0:A.observe)===null||se===void 0||se.call(A),R(),p==="behind"&&P&&(n.scene.add(P),v.push(()=>P&&n.scene.remove(P)))}}})();w&&(c.parentElement||document.body).appendChild(k.domElement),x&&f.appendChild(k.domElement);const W=()=>{var S;return v.forEach(R=>R==null?void 0:R()),T.remove(g),T.children.length===0&&(typeof L.requestAnimationFrameId=="number"&&cancelAnimationFrame(L.requestAnimationFrameId),k.domElement.remove(),p==="front"&&(e.frontMode=void 0),p==="behind"&&(e.behindMode=void 0),!e.behindMode&&!e.frontMode&&((S=A==null?void 0:A.unobserve)===null||S===void 0||S.call(A))),!0},Y=e.disposeCallbacks.findIndex(S=>S===W);return Y!==-1?e.disposeCallbacks.splice(Y,1):e.disposeCallbacks.push(W),h&&V(),{container:b,dispose:W,css3DObject:g,render:h?void 0:V}},i=(o,r)=>{const{ratio:a,dpr:s,container:l,mode:u}=r,c=o[0].distanceTo(o[1]),v=o[1].distanceTo(o[2]),d=Ve(c/a*s),m=Ve(v/a*s),p=new Ci(l);p.scale.set(a,a,a),l.style.width=d+"px",l.style.height=m+"px",l.style.pointerEvents="none";const h=to(o[0],o[2]),f=o[1].clone().sub(o[0]),b=o[2].clone().sub(o[1]),g=new O(0,1,0).angleTo(new O(0,b.y,b.z)),P=new O(1,0,0).angleTo(new O(f.x,0,f.z)),A=f.angleTo(new O(f.x,0,f.z)),w=(b.z>0?-1:1)*g,x=(f.z<0?1:-1)*P,N=(f.x>0&&f.y<0||f.x<0&&f.y>0?-1:1)*A;p.rotateOnWorldAxis(new O(1,0,0),w),p.rotateOnWorldAxis(new O(0,1,0),x),p.rotateOnWorldAxis(new O(0,0,1),N),p.position.set(h.x,h.y,h.z);let L;if(u==="behind"){const T=new je({opacity:0,transparent:!1,side:Xe}),k=new Tt(d,m);L=new ve(k,T),L.name="CSS3DRenderPlugin-mesh",L.position.copy(p.position),L.rotation.copy(p.rotation),L.scale.copy(p.scale)}return{css3DObject:p,mesh:L}};return{create3DDomContainer:t,disposeAll:()=>{e.disposeCallbacks.forEach(o=>o==null?void 0:o()),e.disposeCallbacks=[]}}},io="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAA8CAYAAACZ1L+0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAYKADAAQAAAABAAAAPAAAAABU0H2EAAARRElEQVR4Ad2czY9cRZbFq1yFoQGDNCzwuAENohl54dkgdrNh34tZ8GciFi31nwEsmAEhhAWD1GMJCZgx5sMfUHN+J+NE3XfrZWWVcVVLHVLmuXG/74148V5m2bm/N8bR0dH+Bx988Po333zzbz///PONg4ODa+I9I9y/cuXKgV77h4eH+1KH3hP/yv7+vuBAsG+5UCIpCkMzDQ962Eu80Q1P/KmHT82v8IocZFL4pslDvL3fNARHoPI2wtbrV1jBIf9N8SEZ0UUP2wFHv2ocSc/2ouEz8PVooJXQ0/j10aNHoH2Idj4PHz4k1n29/k+5/u3ll1/+r7fffvtLzfGzd8ibjK6+9957f5ajf1XzH9y7d+8Xjf9FRs1SdvNBBg2SDQ1xh9ALH4yN0M2BNZrKwtFc9Fmkquuma5HJBzvLiIONBnx40B7QIzTdxCcNwj3dYlEoUmabAU+UFZDpxah22Ng2NjQXH0LrwccGwyEzXfWhWQwSYQHYuFevXj14/vnn37h79+7Nr7766gup/FX5PnAj33///f/46aef3vj444/vfPbZZz9IYGMcnDbkhEYQL001Hfsu775i+7j6LID6cDQWYo8mabGMxOr+e/ye3y7989p3/9jfvHnz2q1bt25oMb549913/3Lwzjvv/Mu3337775988smdzz///AcVQ+IecsAOp8OOHRpkiJniWQnrBJmwc7EF8atxBA2ihx/obf7Qqa+un+aDI0f7k08nU+PLj3PBR+qpcvFdd3BNP7YgI7mnHqHzBRndv1hH33///QNtlAcvvfTSq999992dQzFu/vjjj/c//fTTu1z+unT2wDFoHN13QbVg5CQS3tBfQGwHoo+chltPto4FMsR3nKCZ7a3KyDM+UOOyHzV4xxAHOTjGqfVcVv23b9++++abb/4TvT+8f//+dS3ALzqj3MxgMq6IjAUC4as4CrbdmLtA8S2vttA0D5vSxNBnOvLwK1vO4K3+FSY+Z/Ol71RiC8JI7iBzcrus+nWfvf/iiy/+86Eux2u6JO6RQBoTFCvFOGEKkcyFRZ+kt+kP/pRHF9xiD3uOrs8OFW9eoaFBxorcsfGDvOdTeJCRTxQruT/x+rXxH6nvzx1qRx+I4FHJQZxJeat8CqCY0vCarG+AnK86++whdDlzeQrZKieWhmCTC3GgEy+x01DiKHfuK6vxYhfcYj/zKWVPMrnAwE98RCG+mZPHafVVOX71hPRUHkOpnMe9+SSBQ5wpgJF5mlGTgp+R5oHwhj/7Za7kzQMZ8RPsBaZYEH3k6KbotfySQ/Tjg7lsXQ/IQFc5Chb5zgUR/8LqJyi99QJA0CySFc4znUTFm3d2Cq8FuYryFhk42HLh3bz1zI4N+qGLvXkJMXKcDer6yE+7IuInuObvMusn/iHNz4DBqoMM0W4gyJxmsgijqSfkyNALdv3YRl51oXfFP4u+fCjd43xTQ/wLtx5Zu+L3euI78VJXsOvX+hXrijbL3qEIP1lEObuKhENnR+IgvDU5vD7wGx4Fyn4ucHzFfy8I2/Dio2JkIPyu3+XEp2iQ0ePvqm+X3E7b27b64ZPHYRrCE0R/jq68kfB80mBOQhWhTxu9YHTTfOi+QGLZf7Dbd/3UAjK6PDwL9dafmi6zfm0Ob8xDVkIJs7O5ErxDQQaFhMdctHVB5o8xfLXJzo0dC1wfKxefK1b8L+xHHuGhHjobgzzDO+Fu1Dw/V6RWkHGR9avv5LW5CRNs7Aaf8Qq82mAZUNh8CkEPXvRDDz3cLob4zB0YAjvF3Wrf/fcdK3nyxt2k0WNoR/MlopG54i820Iq/RT3Y1DHqemL1cxX4JkxiXAkECBK4N6Ams0ZjCz+Y8xZkcCSEx3xXPOTJAf3kFv/dfkWOja9i7ImvMW/ChXbe3V9igxjuGskrmFrX6lcsP+FwBPn40WJAsihGgvWEkIe3JpetiwUZTz31lBsOMihE9NzxZpY3GoTtaNSk40/ooyXY84UfHm57fHjKH/DoDYotiEJqBZnDD29NTp74Bxk9fq8f3XwOIHM7z6rbw+bNwcc8tDG6YNGvpNxu/xwwZPOKobj4xEnobf536cvOVwDI6PrJLXl0uY3U94FA6CdSvxbKR5C3DcFJJFiCTrLvmJ4w9hr2g5Fo72aQgX7Fy9ZX7Bw/Z9rh5FrHk6yfJnGlH1+PilQbVOkkUXnQNDAIjV4wNhUjA3nFFqx05B2zuGClo9fj4xNe/IcG18Yu/S6vNUDjM7jmPzJwvPb5HCB6NoTLnoRjn0e41UuOhKTvRsagouSLpw49lXAu8ue6qjbpWuBkniScC2zyrPn253hkqs06Q3+Rb3IH1/yJd6H1c0XxFDSPIAVMM50QSdXRG4St5EmSQk2D1S70sE8MGriwj942PK//7mclXnJPvsntwuvX8cPfyTdfRSRRGqQifckO3lkSig4moV1Ab3iX94aOZ/bFB7ORk/2tPLfPZ/+R7wJoeGIg6PmkVjDy8Mxo9QzehO5PgvPUzx/19w71xqOhX3jm0akOjqfM04wR2OxKR28bsuLckEGGbH1EgAwVf64PZvgh/23+5JIdjuvVI7Q/JqJ4WfVrM/km7A9iKtw3tVHQbBDNogCQwWJoLjheFAvGW2QgrNGYc/09IDGwD5143f9afuJJfZNfaDD5YJMFgy9acCxnVxb5hdVPUNWz+RxAQF7sQKFvVKMBvoGpIKa+hNFJg80sb5GBg51mbBwUXUj8xIZ56GLvRUDGGDnOBj2G/vSxzd8l1/+P9/cAdn92dF8gFrAeWdLzgoBZkPCY46f6g85VuCbPxgx2/diCel1Rfnv+KgLFKCdpAoQG1wJikySRrw10wt+1g+MLxGaX/136tWD8Sf/EkRIfyNFPzcxDX0T9o9/H34YmYMXxVMKNEbaPIyVpNGPc3ESvHjFDZ0IvCEGKg+4LJFb8Grt915d8+tjiD/YcXT+5BC+yfi28Nyb/LKV+DpjJQZBgbbjoxWMdH6hGkrYLnQVbONtM+nP3QgX/YkRnIRuTyLwgK/qnynu+sl/s+B7wIuvXFeAa+JOkdw1NY+WTVE+GueQuEGQuGy8IyBxbaJB5H6MgirZIeosFHXbTXnqLfEaO9XPCqZ8DkmdwJd+5yUiox1vJ/4nXf66/B+xqAOcaSQfzSAcy1OBFwbsajjxNwT40OPwt5OJl8SxHpw42m8b83FDo6Y/cR14n4j3J+hWDmJvvglTQiS+3yJREakKhwTU5x5ps5ueG0CADu3Hi2R59mgIyQo9GmR8ecvKpuCsfdOsgTnKq/NA9P+IlBjqhQeZd3v0nFsjATkOw+YM8vMXfAyIEEVK8du/8ICVWjhZj35HY1NH9VRl0CglSUHwiDw0y7+NJ6/d8L7p+5X/y7wFJgmI5OrjscoTsagCNrPaiafLc4bI/1wLSYGIG1/yfdoX0BcxCBvsCdv8XWb9iubbN8+XoLAkRNAWLnfMwRwZ2bjIm0OiCw8Xc1ZlXjG30Y5t48MOrdqGzuCC87q/L9b2O6wHR7wsi/XnsISf2ZdVP7nrtLz6IKUHvWDAJJWnmocE1Obw6uj4yAkeH3SsdN2Hw3CjUorOCUxZbkBHfQfiiHQM5DRYvm+pEPefV7/6IUUdigeEnt8z974LE5PFqPmKJtgEJ5c6PAToN0bMdfOlPH8z76AmPONO+P6cTOzx8df/JDVyTm1neejyJEjt1LR6LL7h+paMv47QL544Sgx0yG60Es1vmCpZ6TjSEAtOkoXeiwFL0CXv95wg3HGTI1+I/TKw0fLFBbFTeej7UJ3Fqwn+uCltdZv3qu8Jrg+vMIyG/uFxF+7JNHfWSGQnOAtDVoMlWt8PNBzrPdzVsRX6uvwcQRDHn5uj+JE5u3mTopgZsyZuck/9l1q+4zm3+PYDEuCmRDJgEw2POYqBXF8WK4y0yMPxK54kFHCMfihyw2/d4XR4nwa6v3J0riE6P3+WpFWQonnsBMrp/M8vbWn7wolLji08vl1/GESBJxagizrKLKj90ZCC8+AKjU7H76/boklNsKEA686b9GPq2xcfa+DvU73uAk6I4VoTkQIZon+Egc/FphnnMV+TRCy7uCV0fHywCyOhHyC79jdXxO75kM4/I0GD866a+9dtd6pbupdSvWJu/BygxN1Tz2SwlcaYGVpvjNiwpdJac41m3J254aIU+xUc2w8xXZuHhIrTlaS7I6P53xd8lt9P2ti13jhrJlkdQlINJMj7rGTZ4+Zpi7uLoriF+dZmnKVapsXb5J2nsQYy7Puzw1uQOWN66fnIJolrp+AbHeOz645cHaBdFYfG6DTHKLkCHT40kAzJCJ8EuT/O2xdrlv9uzEOERP3T8n9cfPk4bu/ydp/7kmK+js3MWBfVk0nwQmQJ6QUDm8MNjzpnOIoCMQfvjPvNe0C7/StpPJSCDHRwec9m7DnDMrYhf5skt+ca2+Lv0+t0ZdhJDiczHIBKuvFGAi1YBTCctPc9pKEQQvmjrDb5peAzioQsOuenYd3nPB3l4a/bw6hh559GXDWEaRK/7i28QOfaQT6J+Umdj5LsgYs9iErDySIDGYJQGhc4OQ+e0sWK/2LEUJl+zwNAgg3wqkmdyDD885n3gBxfFn+nhluae6m8lf/dC/pxXj9fn1Z5aefFJ2I2twjjk6NBjm/+bz3BGQMgEzCPf5hJoEfETv03kKTKIgviNT0Shz+Q/seIPB3X0fLp+l190/Sw494Bc9v57LkkosAvmi7B8P1MLCS3bxXP3SkE+guQzJosFFN8NBqNQEf/Mg12fBuEbHONU/+Q3/AUXC07d8ncp9XPlkotvwiN5ijEz2BOCnyaXQsyLjxSZecXYFp3YptE0JrxqGjqyVf2V/KIX7Efo/PBHgNQdvMj66YGOoH3+WYqLKk1JsTtvkr1gzjSONJCBT1a6+q40eoo/9WWyeK6OL5Ax/Edn2uKDEd9BM8tbzxe98IraJJM7CBP98JjHFmR+3vqxOXzmmWceaKU337CxGhqCTUVolIGMabAnhGgUb71iahI7fFf7FIFCb3j/18voiuemdd/Mu/+uE1sQWfeX3MBuyzx5B39P/fRcr4dcAT9p5bxl4zhIgNqgnlRkILKuf1654tIUCk2oLJYbQpr0ZqRrGt30C1tk4FnyQYccray31B3s9UQviG104IUGmZ8mH5v+3qF2w51nn332TzHCsI7KJzEVm6akEVuPhLWGhUeM0CAjvkHmxCM+uCYPD2R0f2Ilt7lB4tMGZ3i7qPqfe+65P6j3X1y5du3aZ3rSefrGjRsvkNxpI80AeTGC0NgGoakvuFYrtvDjD11okBF6m3yjdfze9eM7sbPQIC8sg8detlPdP7XCy8ASOh6IC534Qf126Au6Aq7S+0P9jOJ/f/jhh7dfeeWVN1C4c+cOv5zoxsQgKD7O/OgIT3OLgrrkLAMR9EuQYsXLlWO5ePNMJ25s7Fhv8EIraduDDOJI7kfh6FT98M6Ka/GrLbE0/131X79+/YVXX331+tNPP32b3nt1tGhXP/rooz/ruf9N/YzWQ/2e2c8Cfg7Wz8RC9WkeE8pj/rQltMRH/jXdsdreAEp04mg8u22zYhvZ9IPueLE4puMLfnjRKzKCbD4ZHv9oK/mwaPOlm/ukkbFwjKLj428j8t8DEEvN9xJoJuhsDI9lxOeHXr3zE8cGm7fpQMfNgR54ntXmYXzx1ltvbX64VUl4SH//66+/fl2/5ndLC/BHMV/Q6ypN06Bm3lgFaKMcEbj+bDHN88/curvewF4hjhNWasrwhy/0waIPjylyYjp49Ag++NhFhi7F+jeEFcc/H6w5TYbnxo2OoufXmNPcX+XWv4QLMo+taJkfeY4gvtRs/n8vzY/cssxB5CyKxi96/aB+/Y9+KfE/X3vttS8lI7e9/wfu514OAjYP0QAAAABJRU5ErkJggg==";function oo(n){oe(n,"svelte-1ak9fbs",".room-label-item.svelte-1ak9fbs{position:absolute;font-size:0.41667rem;z-index:0;transform:none;cursor:pointer;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.room-label-item__text.svelte-1ak9fbs{position:absolute;left:0;top:-3.33333rem;transform:translate(-50%, 0);display:flex;justify-content:center;align-items:center;height:1.04167rem;min-width:1.66667rem;padding:0 0.3125rem;pointer-events:all;background-size:100% 100%;background-repeat:no-repeat;white-space:nowrap}.room-label-item__bar.svelte-1ak9fbs{position:absolute;top:-2.29167rem;height:2.5rem;width:1px;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0))}.wide.svelte-1ak9fbs{font-size:0.52083rem}")}function ro(n){let e,t,i=n[0].name+"",o,r,a,s,l;return{c(){e=G("div"),t=G("span"),o=mt(i),r=Z(),a=G("div"),y(t,"class","room-label-item__text svelte-1ak9fbs"),I(t,"background-image","url("+io+")"),le(t,"wide",n[0].name.length>3),y(a,"class","room-label-item__bar svelte-1ak9fbs"),y(e,"class","room-label-item svelte-1ak9fbs"),I(e,"z-index",n[0].zIndex,!1),I(e,"transform",n[0].transform,!1),I(e,"opacity",n[0].visible?1:0,!1)},m(u,c){M(u,e,c),E(e,t),E(t,o),E(e,r),E(e,a),s||(l=Xt(t,"click",n[1]),s=!0)},p(u,[c]){c&1&&i!==(i=u[0].name+"")&&Wt(o,i),c&1&&le(t,"wide",u[0].name.length>3),c&1&&I(e,"z-index",u[0].zIndex,!1),c&1&&I(e,"transform",u[0].transform,!1),c&1&&I(e,"opacity",u[0].visible?1:0,!1)},i:X,o:X,d(u){u&&D(e),s=!1,l()}}}function ao(n,e,t){let{five:i}=e,{roomLabel:o}=e;function r(){i.setState({panoIndex:o.panoIndex,mode:"Panorama",longitude:o.longitude})}return n.$$set=a=>{"five"in a&&t(2,i=a.five),"roomLabel"in a&&t(0,o=a.roomLabel)},[o,r,i]}class so extends U{constructor(e){super();q(this,e,ao,ro,J,{five:2,roomLabel:0},oo)}}const{Map:lo}=qi;function uo(n){oe(n,"svelte-9eg4zi",".room-labels-container.svelte-9eg4zi{width:100%;height:100%;position:relative;color:#fff}")}function nn(n,e,t){const i=n.slice();return i[12]=e[t],i}function on(n,e){let t,i,o;return i=new so({props:{roomLabel:e[12],five:e[1]}}),{key:n,first:null,c(){t=xe(),ee(i.$$.fragment),this.first=t},m(r,a){M(r,t,a),te(i,r,a),o=!0},p(r,a){e=r;const s={};a&1&&(s.roomLabel=e[12]),a&2&&(s.five=e[1]),i.$set(s)},i(r){o||(j(i.$$.fragment,r),o=!0)},o(r){C(i.$$.fragment,r),o=!1},d(r){r&&D(t),ne(i,r)}}}function co(n){let e,t=[],i=new lo,o,r,a=n[0];const s=l=>l[12].id;for(let l=0;l<a.length;l+=1){let u=nn(n,a,l),c=s(u);i.set(c,t[l]=on(c,u))}return{c(){e=G("div");for(let l=0;l<t.length;l+=1)t[l].c();y(e,"class","room-labels-container svelte-9eg4zi"),Ht(()=>n[6].call(e))},m(l,u){M(l,e,u);for(let c=0;c<t.length;c+=1)t[c].m(e,null);o=ei(e,n[6].bind(e)),r=!0},p(l,[u]){u&3&&(a=l[0],ce(),t=We(t,u,s,1,l,a,i,e,ht,on,null,nn),ue())},i(l){if(!r){for(let u=0;u<a.length;u+=1)j(t[u]);r=!0}},o(l){for(let u=0;u<t.length;u+=1)C(t[u]);r=!1},d(l){l&&D(e);for(let u=0;u<t.length;u+=1)t[u].d();o()}}}function fo(n,e,t){let i,{five:o}=e,{roomLabels:r}=e,a,s,l=null;function u(h){const f=new ze,b=o.camera.position.clone(),g=new O(h.position.x,h.position.y,h.position.z),P=g.distanceTo(b);f.set(b.clone(),g.clone().sub(b).normalize());const[A]=o.model.intersectRaycaster(f);return!(A&&A.distance+1<P)}function c(h,f){const g=new O(h.position.x,h.position.y,h.position.z).clone().project(o.camera),P=Math.ceil((g.x+1)/2*f.x),A=Math.ceil((-g.y+1)/2*f.y);return`translate(${P}px, ${A}px)`}function v(h){const f=new Map;function b(P){const A=f.get(P.id);if(A)return A;const{x:w,y:x,z:N}=P.position,L=new O(w,x,N).clone().distanceTo(o.camera.position);return f.set(P.id,L),L}return r.map(P=>{const A=u(P),w=A?c(P,h):P.transform,x=b(P),L=r.filter(T=>T.visible&&b(T)<x).length*10;return Object.assign(Object.assign({},P),{visible:A,transform:w,zIndex:L})})}function d(){t(0,r=v(i))}function m(h){t(4,l=h)}o.on("cameraUpdate",d),o.on("modelShownFloorChange",m),St(()=>{o.off("cameraUpdate",d),o.off("modelShownFloorChange",m)});function p(){a=this.clientWidth,s=this.clientHeight,t(2,a),t(3,s)}return n.$$set=h=>{"five"in h&&t(1,o=h.five),"roomLabels"in h&&t(0,r=h.roomLabels)},n.$$.update=()=>{n.$$.dirty&12&&t(5,i={x:a,y:s}),n.$$.dirty&32&&t(0,r=v(i)),n.$$.dirty&17&&t(0,r=r.map(h=>{const b=l===null||h.floorIndex===l?h.visible:!1;return Object.assign(Object.assign({},h),{visible:b})}))},[r,o,a,s,l,i,p]}class ho extends U{constructor(e){super();q(this,e,fo,co,J,{five:1,roomLabels:0},uo)}}function mo(n){return n.model_room_labels.map(({id:e,pano_index:t,floor_index:i,name:o,position:r,longitude:a})=>({id:e,name:o,position:r,longitude:a,panoIndex:t,floorIndex:i,zIndex:0,visible:!1,transform:""}))}class po{constructor(e){Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"fiveModeEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"app",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"roomLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"onFiveModeChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{if(t!=="Floorplan"){this.fiveModeEnabled=!1,this.render();return}this.five.once("initAnimationEnded",()=>{this.fiveModeEnabled=this.five.currentMode==="Floorplan",this.render()})}}),this.five=e,this.fiveModeEnabled=this.five.currentMode==="Floorplan",this.container.classList.add("model-room-label-plugin-container"),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="absolute",this.container.style.pointerEvents="none",this.container.style.left="0",this.container.style.top="0",this.container.style.zIndex="5",this.five.once("dispose",()=>this.dispose()),this.five.on("modeChange",this.onFiveModeChange),this.render()}dispose(){this.five.off("modeChange",this.onFiveModeChange),this.container.remove()}load(e){this.roomLabels=mo(e),this.render()}appendTo(e){return this.wrapper=e,e.appendChild(this.container),this.render(),this}disable(){return this.enabled=!1,this.render(),this}enable(){return this.enabled=!0,this.render(),this}render(){var e;if(!!this.wrapper){if(!this.enabled||!this.fiveModeEnabled){(e=this.app)===null||e===void 0||e.$destroy(),this.app=void 0;return}this.app?this.app.$set({five:this.five,roomLabels:this.roomLabels}):this.app=new ho({target:this.container,props:{five:this.five,roomLabels:this.roomLabels}})}}}const ol=n=>new po(n);var _e;(function(n){n[n.FLOOR=1]="FLOOR",n[n.CEILING=2]="CEILING",n[n.BOUNDING_CENTER=3]="BOUNDING_CENTER"})(_e||(_e={}));const go={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:"10"},bo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAMAAAAADe2FZjAAAEF0lEQVRoBe2WzWskRRiHf13V092TxI2oEzYeVDwITtyDuCiihwiCePGgxIM3vYgHL4J4UIhBRA8i/gPqyUvWg7AiIuIeloDiYUHJLOK6BPwIk9nNODM9Xf1RVe1b3elJRjCZmQ6euqGmuqer33rq4e23GqiOykBloDJQGagMVAYqA5WBykBlYFYD1qwP/tdzaZqOx9zYOLxeX0+L5yzLGp0X/03a25MOnGRcBtx+6Rlo9SL08G4EooFnxa8Yiivox5/h5Ys/4cl7NVorNDRnngX+0MIkVMeMSf23zyKML8J7/Dy8hwF2Buh9CnS+AEQIdLspBuGb+M7/qLW4qJrNpsLapjYhpwVnx3BMfCtNNx3Etc9xywvnMf80wG8HmQainw0RxSGrnmeBp+8k5/j9S0HbvXb5io0Lz880/0wPHV1NlhLd316He+4xOCv5ragF7L9PrH1qBJyB0626x/lC+qrSvH5r/W+n1WpxUM5nMY4GPeH8lHJaPgfeAFQHCL+ntkXT+vnUc3W6pvTIwC0wy3rA4dwLmK2avZ7Eo9uKBuYJfgJscbs8dLCxDMt+EOEPBEZNEWyBYHqTz6bPXrzUnNrSShxHIsYiOL69zrCGLLcLqJP68tB+9w5wj+YhWDafQ2s61wNqxjZhmrQ2pvMFCEvXuCUZ7wqH794ZWs28LJqlTXSUyuksF2M/yOwqgkx2c1ADa4wLAQRk2sAGQQakhN6yFC2hltfz5kSY44NKQeeh+vtI/SSzWhg2CzCgmWISmKUGmaYFBDfCSymnfxJ6/+ospVcWOLLp5DGP/y0P/Rp66O99DQNq7Po3Ds0a0wY+My2QSv2N2mO/OyxR2o6UQk+Lv7yJ06JYSnnolZVU9cUn2O9SmaMWGFBqYXRwbqAJWIi94TX5biotpcGl1DXZ6LnqIbNDTnmUgi52Mv5l5ysMxIcZcGjy2DTK4ZHlcBC14zeSge4qphICjj3bS0A7o9nSp2TOkm7aZ8bGZy/jxhO87V91G0+dfY/Z7BWIIK9KYUi5qy/Hf8YfBG3sqJTHiQWhmTVkbip+wX3x6volVSx+LPAxF+VLXhZ8VQ+iP2Rta/iWe5v42Fngj0BbdnRTXh12ZIcKhTaGbcYjybRwXBU1lu9KlndXp04NM52poKWO0RZsviNaP9a6grkO972+st05pXhE5c1hTEluJy7XUejGUQNLMbAmTdWY1rKBLW3aTJqBZ7nZkb36DhYCreeYHbMUXHvaYi5XDK70EcgulmRjm77wNtenzuXCbmnTRaAx493rbGf3Jr/njMzj920CnKdUaFCjlDioy7NYNvOdGrQJNgI32/L2tkXfFPlxgToqjWVhD6KdLnQRdARf/HHQz2r2X2Gqy8pAZaAyUBmoDFQGKgP/q4F/AJYg9/s0ZoABAAAAAElFTkSuQmCC";function pt(n,e={}){let t="";const{needZ:i,needA:o}=e;return(i?n.slice().concat(n[0]):n.slice()).forEach((a,s)=>{const{x:l,y:u}=e.format?e.format(a):a,c=l+","+u;return s===0?(t+="M"+c,t):(o==null?void 0:o[s])?(t+="A"+o[s]+","+c,t):(t+="L"+c,t)}),t+(i?"Z":"")}function oi({x:n,y:e},t){const{max:i,min:o}=t;return{x:n-o.x,y:i.y-e}}function vo(n,e){const t=n.x*1e3+e.bounding.origin.x,i=-n.z*1e3+e.bounding.origin.y;return{x:t,y:i}}function yo(n,e){const t=e.bounding,i=t.max.x-t.min.x,o=t.max.y-t.min.y;return{x:(n.x-t.min.x)/i,y:(t.max.y-n.y)/o}}function Po(n,e){return Math.max(...e.work.observers.map(i=>n.z>=i.standingPosition.z?i.floorIndex:0))}async function wo(n){const e=new Headers({"Content-Type":"text/plain"}),t=async function(o){const r={index:o.index,url:o.url,svgUrl:o.svg_url};if(o.svg_url){const a=await fetch(o.svg_url,{headers:e}).then(s=>s.text());r.svgContent=a}return r};return await Promise.all(n.map(t))}function Ao(n){return{id:n.id,size:n.size,name:n.name,path:n.path,roomType:n.room_type,floorType:n.floor_type,roomLabel:{position:n.room_label.position,positionInImage:n.room_label.position_in_image},observerIndexs:n.observer_indexs}}function xo(n){return{floorName:n.floor_name,floorIndex:n.floor_index,rooms:n.rooms.map(Ao),rules:n.rules}}function Io(n){return{index:n.index,floorIndex:n.floor_index,position:n.position,positionInImage:n.position_in_image}}function jo(n){return{rad:n.rad,position:n.position,positionInImage:n.position_in_image,northRad:n.north_rad,roomId:n.room_id,floorIndex:n.floor_index}}async function Rt(n){const e=await wo(n.outlines),t=n.computed_data.bounding,i=n.computed_data.floor_datas.map(xo),o=n.computed_data.entrance?jo(n.computed_data.entrance):null;return{outlines:e,entrance:o,bounding:t,floorDatas:i,observers:n.computed_data.observers.map(Io)}}function Lo(n,e,t){return n.map(o=>{const r=o.position,a=o.icon?o.icon:{url:bo,width:45,height:48},s=Po(r,e),l=vo(r,t),u=yo(l,t);return{floorIndex:s,icon:a,id:o.id,position:l,positionInImage:u}})}function ri(n,e,t,i){const o=Math.max(...n.work.observers.map(m=>m.floorIndex));function r(m){return m>o?n.model.bounding.max.y:Math.max(...n.work.observers.filter(p=>p.floorIndex===m).map(p=>p.standingPosition.y))}function a(){const m=r(t),p=r(t+1),h=(i==null?void 0:i.attachedTo)||_e.BOUNDING_CENTER;return h===_e.BOUNDING_CENTER?(n.model.bounding.max.y+n.model.bounding.min.y)/2:h===_e.CEILING?p:m}const s=a(),l=new O(0,s,0),u=new O(1,s,0),c=l.clone().project(n.camera),v=u.clone().project(n.camera);return Math.abs((v.x-c.x)/1e3)*(e.getBoundingClientRect().width/2)}function Oo(n,e){return e(n),n}function ai(n,e){return Oo({},t=>{for(const i in n)e.indexOf(i)===-1&&(t[i]=n[i])})}const rt="data:image/png;base64,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";function Mo(n){return n*180/Math.PI}function Do(n){oe(n,"svelte-17cl35n",".floorplan__camera-position.svelte-17cl35n{position:absolute;width:0;height:0}.floorplan__camera-rotate.svelte-17cl35n{position:absolute;background-repeat:no-repeat;background-size:100%}")}function zo(n){let e,t;return{c(){e=G("div"),t=G("div"),y(t,"class","floorplan__camera-rotate svelte-17cl35n"),I(t,"background-image",`url(${n[0]||rt})`),I(t,"width",n[4],!1),I(t,"height",n[4],!1),I(t,"left","-"+n[4],!1),I(t,"top","-"+n[4],!1),I(t,"transform",`rotate(${n[3]}deg)`,!1),I(t,"transform-origin",`${n[4]} ${n[4]}`,!1),y(e,"class","floorplan__camera-position svelte-17cl35n"),I(e,"left",n[1],!1),I(e,"top",n[2],!1)},m(i,o){M(i,e,o),E(e,t)},p(i,[o]){o&1&&I(t,"background-image",`url(${i[0]||rt})`)},i:X,o:X,d(i){i&&D(e)}}}function Co(n,e,t){let{panoIndex:i}=e,{floorplanData:o}=e,{lastPanoramaLongitude:r}=e,{cameraImageUrl:a}=e;const{observers:s}=o,l=s[i],u=l.positionInImage.x,c=l.positionInImage.y,v=u*100+"%",d=c*100+"%",m=-Mo(r)+45,p=document.body.clientWidth,h=document.body.clientHeight,b=`${(p<500||h<500?17:37)/16}rem`;return n.$$set=g=>{"panoIndex"in g&&t(5,i=g.panoIndex),"floorplanData"in g&&t(6,o=g.floorplanData),"lastPanoramaLongitude"in g&&t(7,r=g.lastPanoramaLongitude),"cameraImageUrl"in g&&t(0,a=g.cameraImageUrl)},[a,v,d,m,b,i,o,r]}class ko extends U{constructor(e){super();q(this,e,Co,zo,J,{panoIndex:5,floorplanData:6,lastPanoramaLongitude:7,cameraImageUrl:0},Do)}}const Eo="data:image/png;base64,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";function To(n){oe(n,"svelte-1q44ru9",".floorplan-plugin__compass.svelte-1q44ru9{position:absolute;left:50%;top:-2.39583rem;width:12.03125rem;height:2.13542rem;will-change:opacity;transform-origin:center 9.58333rem}.floorplan-plugin__compass-image.svelte-1q44ru9{width:100%;height:100%;position:absolute;left:0;top:0;opacity:0.1;background-repeat:no-repeat;background-size:100% 100%}.floorplan-plugin__compass-text.svelte-1q44ru9{position:absolute;left:50%;top:0.78125rem;transform:translateX(-50%);opacity:0.2;font-weight:bold;font-size:0.52083rem;color:#fff}")}function Go(n){let e,t,i,o,r;return{c(){e=G("div"),t=G("div"),i=Z(),o=G("span"),r=mt(n[0]),y(t,"class","floorplan-plugin__compass-image svelte-1q44ru9"),I(t,"background-image",`url(${Eo})`),y(o,"class","floorplan-plugin__compass-text svelte-1q44ru9"),y(e,"class","floorplan-plugin__compass svelte-1q44ru9"),I(e,"transform",n[2],!1)},m(a,s){M(a,e,s),E(e,t),E(e,i),E(e,o),E(o,r)},p(a,s){s&1&&Wt(r,a[0])},d(a){a&&D(e)}}}function No(n){let e,t=n[1]&&Go(n);return{c(){t&&t.c(),e=xe()},m(i,o){t&&t.m(i,o),M(i,e,o)},p(i,[o]){i[1]&&t.p(i,o)},i:X,o:X,d(i){t&&t.d(i),i&&D(e)}}}function Ho(n){return n/Math.PI*180}function So(n,e,t){var i;let{floorplanData:o}=e,{northDesc:r}=e;const a=(i=o.entrance)===null||i===void 0?void 0:i.northRad,l=`translateX(-50%) translateZ(10px) rotate(${-(a?Ho(a):0)+90}deg)`;return n.$$set=u=>{"floorplanData"in u&&t(3,o=u.floorplanData),"northDesc"in u&&t(0,r=u.northDesc)},[r,a,l,o]}class Fo extends U{constructor(e){super();q(this,e,So,No,J,{floorplanData:3,northDesc:0},To)}}function Xo(n){oe(n,"svelte-1gfoniz","img.svelte-1gfoniz{width:100%;height:100%}")}function Wo(n){let e,t;return{c(){e=G("img"),tn(e.src,t=n[0])||y(e,"src",t),y(e,"alt","floorplan iamge"),y(e,"class","svelte-1gfoniz")},m(i,o){M(i,e,o)},p(i,[o]){o&1&&!tn(e.src,t=i[0])&&y(e,"src",t)},i:X,o:X,d(i){i&&D(e)}}}function Ro(n,e,t){let{url:i}=e;return n.$$set=o=>{"url"in o&&t(0,i=o.url)},[i]}class Bo extends U{constructor(e){super();q(this,e,Ro,Wo,J,{url:0},Xo)}}function Yo(n){oe(n,"svelte-ub47ya",".floorplan-plugin__base-image.svelte-ub47ya{width:100%;height:100%}")}function _o(n){let e,t,i,o;return{c(){e=G("div"),t=new Ot,i=Z(),o=new Ot,t.a=i,o.a=null,y(e,"class","floorplan-plugin__base-image svelte-ub47ya")},m(r,a){M(r,e,a),t.m(n[1],e),E(e,i),o.m(n[0],e)},p(r,[a]){a&1&&o.p(r[0])},i:X,o:X,d(r){r&&D(e)}}}function Zo(n,e,t){let{content:i}=e;const o=`
    <style>
      svg [type='lineGroup'] path {
        fill: #ffffff;
        stroke: #ffffff;
      }
      svg [type='lineItemGroup'] g g g g {
        stroke: #ffffff;
      }</style>
  `;return n.$$set=r=>{"content"in r&&t(0,i=r.content)},[i,o]}class Uo extends U{constructor(e){super();q(this,e,Zo,_o,J,{content:0},Yo)}}function qo(n){oe(n,"svelte-ozpg4a",".floorplan-plugin__base-image.svelte-ozpg4a{position:absolute;z-index:10;width:100%;height:100%;pointer-events:none}")}function Jo(n){let e,t;return e=new Bo({props:{url:n[1].url}}),{c(){ee(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const r={};o&2&&(r.url=i[1].url),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Vo(n){let e,t;return e=new Uo({props:{content:n[0]}}),{c(){ee(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const r={};o&1&&(r.content=i[0]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Qo(n){let e,t,i,o;const r=[Vo,Jo],a=[];function s(l,u){return l[0]?0:l[1]?1:-1}return~(t=s(n))&&(i=a[t]=r[t](n)),{c(){e=G("div"),i&&i.c(),y(e,"class","floorplan-plugin__base-image svelte-ozpg4a")},m(l,u){M(l,e,u),~t&&a[t].m(e,null),o=!0},p(l,[u]){let c=t;t=s(l),t===c?~t&&a[t].p(l,u):(i&&(ce(),C(a[c],1,1,()=>{a[c]=null}),ue()),~t?(i=a[t],i?i.p(l,u):(i=a[t]=r[t](l),i.c()),j(i,1),i.m(e,null)):i=null)},i(l){o||(j(i),o=!0)},o(l){C(i),o=!1},d(l){l&&D(e),~t&&a[t].d()}}}function Ko(n,e,t){let i,o;var r,a;let{floorIndex:s}=e,{floorplanData:l}=e;return n.$$set=u=>{"floorIndex"in u&&t(2,s=u.floorIndex),"floorplanData"in u&&t(3,l=u.floorplanData)},n.$$.update=()=>{n.$$.dirty&12&&t(1,i=l.outlines[s]),n.$$.dirty&60&&t(0,o=t(5,a=t(4,r=l.outlines)===null||r===void 0?void 0:r[s])===null||a===void 0?void 0:a.svgContent)},[o,i,s,l,r,a]}class si extends U{constructor(e){super();q(this,e,Ko,Qo,J,{floorIndex:2,floorplanData:3},qo)}}function $o(n){oe(n,"svelte-i2nwuk",".floorplan-plugin__room-label-item.svelte-i2nwuk{position:absolute;display:flex;flex-flow:column;align-items:center;line-height:0.78125rem;color:#fff;transform:translate(-50%, -50%);white-space:nowrap}.floorplan-plugin__room-size.svelte-i2nwuk{opacity:0.45}")}function er(n){let e,t=n[2].outerHTML+"",i;return{c(){e=new Ot,i=xe(),e.a=i},m(o,r){e.m(t,o,r),M(o,i,r)},p(o,r){r&4&&t!==(t=o[2].outerHTML+"")&&e.p(t)},d(o){o&&D(i),o&&e.d()}}}function tr(n){let e,t=n[0].name+"",i,o,r;return{c(){e=G("span"),i=mt(t),o=Z(),r=G("span"),r.textContent=`${n[3]}`,y(e,"class","floorplan-plugin__room-name"),y(r,"class","floorplan-plugin__room-size svelte-i2nwuk")},m(a,s){M(a,e,s),E(e,i),M(a,o,s),M(a,r,s)},p(a,s){s&1&&t!==(t=a[0].name+"")&&Wt(i,t)},d(a){a&&D(e),a&&D(o),a&&D(r)}}}function nr(n){let e;function t(r,a){if(r[1]===void 0)return tr;if(r[2])return er}let i=t(n),o=i&&i(n);return{c(){e=G("div"),o&&o.c(),y(e,"class","floorplan-plugin__room-label-item svelte-i2nwuk"),I(e,"left",n[4],!1),I(e,"top",n[5],!1),I(e,"font-size",n[6],!1)},m(r,a){M(r,e,a),o&&o.m(e,null)},p(r,[a]){i===(i=t(r))&&o?o.p(r,a):(o&&o.d(1),o=i&&i(r),o&&(o.c(),o.m(e,null)))},i:X,o:X,d(r){r&&D(e),o&&o.d()}}}function ir(n,e,t){let i,{room:o}=e,{getLabelElement:r}=e;const a=document.body.clientWidth,s=document.body.clientHeight,l=o.size?(o.size/1e6).toFixed(1)+"\u33A1":"",u=o.roomLabel,c=u.positionInImage.x*100+"%",v=u.positionInImage.y*100+"%",d=(a<500||s<500?10:14)/16+"rem";return n.$$set=m=>{"room"in m&&t(0,o=m.room),"getLabelElement"in m&&t(1,r=m.getLabelElement)},n.$$.update=()=>{n.$$.dirty&3&&t(2,i=r==null?void 0:r(o))},[o,r,i,l,c,v,d]}class or extends U{constructor(e){super();q(this,e,ir,nr,J,{room:0,getLabelElement:1},$o)}}function rr(n){oe(n,"svelte-13xux0b",".floorplan-plugin__room-labels.svelte-13xux0b{width:100%;height:100%;position:absolute;left:0;top:0;z-index:20;pointer-events:none}")}function rn(n,e,t){const i=n.slice();return i[4]=e[t],i}function an(n){let e,t=[],i=new Map,o,r=n[1];const a=s=>s[4].id;for(let s=0;s<r.length;s+=1){let l=rn(n,r,s),u=a(l);i.set(u,t[s]=sn(u,l))}return{c(){e=G("div");for(let s=0;s<t.length;s+=1)t[s].c();y(e,"class","floorplan-plugin__room-labels svelte-13xux0b")},m(s,l){M(s,e,l);for(let u=0;u<t.length;u+=1)t[u].m(e,null);o=!0},p(s,l){l&3&&(r=s[1],ce(),t=We(t,l,a,1,s,r,i,e,ht,sn,null,rn),ue())},i(s){if(!o){for(let l=0;l<r.length;l+=1)j(t[l]);o=!0}},o(s){for(let l=0;l<t.length;l+=1)C(t[l]);o=!1},d(s){s&&D(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function sn(n,e){let t,i,o;const r=[{room:e[4],getLabelElement:e[0]}];let a={};for(let s=0;s<r.length;s+=1)a=ge(a,r[s]);return i=new or({props:a}),{key:n,first:null,c(){t=xe(),ee(i.$$.fragment),this.first=t},m(s,l){M(s,t,l),te(i,s,l),o=!0},p(s,l){e=s;const u=l&3?pe(r,[{room:e[4],getLabelElement:e[0]}]):{};i.$set(u)},i(s){o||(j(i.$$.fragment,s),o=!0)},o(s){C(i.$$.fragment,s),o=!1},d(s){s&&D(t),ne(i,s)}}}function ar(n){let e,t,i=n[1]&&an(n);return{c(){i&&i.c(),e=xe()},m(o,r){i&&i.m(o,r),M(o,e,r),t=!0},p(o,[r]){o[1]?i?(i.p(o,r),r&2&&j(i,1)):(i=an(o),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(ce(),C(i,1,1,()=>{i=null}),ue())},i(o){t||(j(i),t=!0)},o(o){C(i),t=!1},d(o){i&&i.d(o),o&&D(e)}}}function sr(n,e,t){let i,{floorIndex:o}=e,{floorplanData:r}=e,{getLabelElement:a}=e;return n.$$set=s=>{"floorIndex"in s&&t(2,o=s.floorIndex),"floorplanData"in s&&t(3,r=s.floorplanData),"getLabelElement"in s&&t(0,a=s.getLabelElement)},n.$$.update=()=>{n.$$.dirty&12&&t(1,i=r.floorDatas[o].rooms)},[a,i,o,r]}class lr extends U{constructor(e){super();q(this,e,sr,ar,J,{floorIndex:2,floorplanData:3,getLabelElement:0},rr)}}function ur(n){oe(n,"svelte-xt7p1v",".floorplan-plugin__rule-labels.svelte-xt7p1v.svelte-xt7p1v{position:absolute;display:flex}.floorplan-plugin__rule-labels--top.svelte-xt7p1v.svelte-xt7p1v{left:0;top:-1.25rem}.floorplan-plugin__rule-labels--bottom.svelte-xt7p1v.svelte-xt7p1v{left:0;bottom:-1.25rem}.floorplan-plugin__rule-labels--left.svelte-xt7p1v.svelte-xt7p1v{top:0;left:-1.25rem}.floorplan-plugin__rule-labels--right.svelte-xt7p1v.svelte-xt7p1v{top:0;right:-1.25rem}.floorplan-plugin__rule-line.svelte-xt7p1v.svelte-xt7p1v{background:#fff;opacity:0.05;width:100%;height:100%}.floorplan-plugin__rule-scale-wrapper.svelte-xt7p1v.svelte-xt7p1v{position:absolute;width:0.3125rem;height:100%;left:50%;top:0;transform:translateX(-50%)}.floorplan-plugin__rule-labels.is-row.svelte-xt7p1v .floorplan-plugin__rule-scale-wrapper.svelte-xt7p1v{width:100%;height:0.3125rem;top:50%;left:0;transform:translateY(-50%)}.floorplan-plugin__rule-scale.svelte-xt7p1v.svelte-xt7p1v{position:absolute;background:#fff;opacity:0.05;width:100%;height:0.0625rem}.floorplan-plugin__rule-labels.is-row.svelte-xt7p1v .floorplan-plugin__rule-scale.svelte-xt7p1v{width:0.0625rem;height:100%}.floorplan-plugin__rule-text-wrapper.svelte-xt7p1v.svelte-xt7p1v{position:absolute}.floorplan-plugin__rule-labels--top.svelte-xt7p1v .floorplan-plugin__rule-text-wrapper.svelte-xt7p1v{width:100%;height:0;top:0.625rem}.floorplan-plugin__rule-labels--bottom.svelte-xt7p1v .floorplan-plugin__rule-text-wrapper.svelte-xt7p1v{width:100%;height:0;bottom:0.625rem}.floorplan-plugin__rule-labels--left.svelte-xt7p1v .floorplan-plugin__rule-text-wrapper.svelte-xt7p1v{width:0;height:100%;left:0.625rem}.floorplan-plugin__rule-labels--right.svelte-xt7p1v .floorplan-plugin__rule-text-wrapper.svelte-xt7p1v{width:0;height:100%;right:0.625rem}.floorplan-plugin__rule-text-item.svelte-xt7p1v.svelte-xt7p1v{width:0;height:0;position:absolute;transform:rotate(90deg)}.floorplan-plugin__rule-labels.is-row.svelte-xt7p1v .floorplan-plugin__rule-text-item.svelte-xt7p1v{transform:rotate(0)}.floorplan-plugin__rule-text.svelte-xt7p1v.svelte-xt7p1v{width:-webkit-max-content;width:-moz-max-content;width:max-content;transform:translate(-50%, -50%);font-size:0.625rem;color:#fff;opacity:0.2}")}function ln(n,e,t){const i=n.slice();return i[10]=e[t],i[12]=t,i}function un(n,e,t){const i=n.slice();return i[13]=e[t],i}function cn(n){let e;return{c(){e=G("div"),y(e,"class","floorplan-plugin__rule-scale svelte-xt7p1v"),I(e,"left",n[13].left*100+"%",!1),I(e,"bottom",n[13].bottom*100+"%",!1)},m(t,i){M(t,e,i)},p:X,d(t){t&&D(e)}}}function dn(n,e){let t,i,o=e[10].distance+"",r,a;return{key:n,first:null,c(){t=G("div"),i=G("div"),r=mt(o),a=Z(),y(i,"class","floorplan-plugin__rule-text svelte-xt7p1v"),le(i,"is-row",e[1]),y(t,"class","floorplan-plugin__rule-text-item svelte-xt7p1v"),I(t,"left",e[10].left*100+"%",!1),I(t,"bottom",e[10].bottom*100+"%",!1),this.first=t},m(s,l){M(s,t,l),E(t,i),E(i,r),E(t,a)},p(s,l){e=s},d(s){s&&D(t)}}}function cr(n){let e,t,i,o,r,a,s=[],l=new Map,u,c=n[2],v=[];for(let p=0;p<c.length;p+=1)v[p]=cn(un(n,c,p));let d=n[3];const m=p=>p[12];for(let p=0;p<d.length;p+=1){let h=ln(n,d,p),f=m(h);l.set(f,s[p]=dn(f,h))}return{c(){e=G("div"),t=G("div"),i=Z(),o=G("div");for(let p=0;p<v.length;p+=1)v[p].c();r=Z(),a=G("div");for(let p=0;p<s.length;p+=1)s[p].c();y(t,"class","floorplan-plugin__rule-line svelte-xt7p1v"),y(o,"class","floorplan-plugin__rule-scale-wrapper svelte-xt7p1v"),le(o,"is-row",n[1]),y(a,"class","floorplan-plugin__rule-text-wrapper svelte-xt7p1v"),y(e,"class",u="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+n[0]+" svelte-xt7p1v"),le(e,"is-row",n[1]),I(e,"width",n[1]?"100%":1/16+"rem",!1),I(e,"height",n[1]?1/16+"rem":"100%",!1)},m(p,h){M(p,e,h),E(e,t),E(e,i),E(e,o);for(let f=0;f<v.length;f+=1)v[f].m(o,null);E(e,r),E(e,a);for(let f=0;f<s.length;f+=1)s[f].m(a,null)},p(p,[h]){if(h&4){c=p[2];let f;for(f=0;f<c.length;f+=1){const b=un(p,c,f);v[f]?v[f].p(b,h):(v[f]=cn(b),v[f].c(),v[f].m(o,null))}for(;f<v.length;f+=1)v[f].d(1);v.length=c.length}h&10&&(d=p[3],s=We(s,h,m,1,p,d,l,a,ti,dn,null,ln)),h&1&&u!==(u="floorplan-plugin__rule-labels floorplan-plugin__rule-labels--"+p[0]+" svelte-xt7p1v")&&y(e,"class",u),h&3&&le(e,"is-row",p[1])},i:X,o:X,d(p){p&&D(e),ft(v,p);for(let h=0;h<s.length;h+=1)s[h].d()}}}const Ge=1e3,Ne=180;function dr(n,e,t){let{type:i}=e,{data:o}=e,{bounding:r}=e;const a=i==="top"||i==="bottom",s=r.max.x-r.min.x-(Ge-Ne)*2,l=r.max.y-r.min.y-(Ge-Ne)*2,u=o.map(([m,p])=>a?[m.x,p.x]:[m.y,p.y]).flat().sort().filter((m,p,h)=>p===0?!0:m!==h[p-1]),c=u.map(m=>{const p=a?(m-r.min.x-Ge+Ne)/s:0,h=a?0:(m-r.min.y-Ge+Ne)/l;return{left:p,bottom:h}});c.unshift({left:0,bottom:0}),c.push(a?{left:1,bottom:0}:{left:0,bottom:1});const v=u[u.length-1]-u[0],d=u.map((m,p,h)=>{const f=p===0?0:m-h[p-1],b=p===0?0:(m+h[p-1])/2,g=a?(b-r.min.x-Ge+Ne)/s:0,P=a?0:(b-r.min.y-Ge+Ne)/l;return{left:g,bottom:P,distance:f}}).filter(({distance:m})=>m/v>.1);return n.$$set=m=>{"type"in m&&t(0,i=m.type),"data"in m&&t(4,o=m.data),"bounding"in m&&t(5,r=m.bounding)},[i,a,c,d,o,r]}class fr extends U{constructor(e){super();q(this,e,dr,cr,J,{type:0,data:4,bounding:5},ur)}}function hr(n){oe(n,"svelte-1mzj9p3",".floorplan-plugin__rule-labels-wrapper.svelte-1mzj9p3{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none}")}function fn(n,e,t){const i=n.slice();return i[12]=e[t][0],i[13]=e[t][1],i}function hn(n,e){let t,i,o;const r=[{type:e[12],data:e[13],bounding:e[0]}];let a={};for(let s=0;s<r.length;s+=1)a=ge(a,r[s]);return i=new fr({props:a}),{key:n,first:null,c(){t=xe(),ee(i.$$.fragment),this.first=t},m(s,l){M(s,t,l),te(i,s,l),o=!0},p(s,l){e=s;const u=l&9?pe(r,[{type:e[12],data:e[13],bounding:e[0]}]):{};i.$set(u)},i(s){o||(j(i.$$.fragment,s),o=!0)},o(s){C(i.$$.fragment,s),o=!1},d(s){s&&D(t),ne(i,s)}}}function mr(n){let e,t=[],i=new Map,o,r=n[3];const a=s=>s[12];for(let s=0;s<r.length;s+=1){let l=fn(n,r,s),u=a(l);i.set(u,t[s]=hn(u,l))}return{c(){e=G("div");for(let s=0;s<t.length;s+=1)t[s].c();y(e,"class","floorplan-plugin__rule-labels-wrapper svelte-1mzj9p3"),I(e,"width",n[2],!1),I(e,"height",n[1],!1)},m(s,l){M(s,e,l);for(let u=0;u<t.length;u+=1)t[u].m(e,null);o=!0},p(s,[l]){l&9&&(r=s[3],ce(),t=We(t,l,a,1,s,r,i,e,ht,hn,null,fn),ue()),l&4&&I(e,"width",s[2],!1),l&2&&I(e,"height",s[1],!1)},i(s){if(!o){for(let l=0;l<r.length;l+=1)j(t[l]);o=!0}},o(s){for(let l=0;l<t.length;l+=1)C(t[l]);o=!1},d(s){s&&D(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}const mn=1e3,pn=180;function pr(n,e,t){let i,o,r,a,s,l,u,c,v,d,{floorIndex:m}=e,{floorplanData:p}=e;return n.$$set=h=>{"floorIndex"in h&&t(4,m=h.floorIndex),"floorplanData"in h&&t(5,p=h.floorplanData)},n.$$.update=()=>{n.$$.dirty&32&&t(0,i=p.bounding),n.$$.dirty&48&&t(10,o=p.floorDatas[m].rules),n.$$.dirty&1024&&t(11,r=Object.keys(o)),n.$$.dirty&3072&&t(3,a=r.map(h=>[h,o[h]])),n.$$.dirty&1&&t(8,s=i.max.x-i.min.x),n.$$.dirty&1&&t(6,l=i.max.y-i.min.y),n.$$.dirty&1&&t(9,u=i.max.x-i.min.x-(mn-pn)*2),n.$$.dirty&1&&t(7,c=i.max.y-i.min.y-(mn-pn)*2),n.$$.dirty&768&&t(2,v=u/s*100+"%"),n.$$.dirty&192&&t(1,d=c/l*100+"%")},[i,d,v,a,m,p,l,c,s,u,o,r]}class gr extends U{constructor(e){super();q(this,e,pr,mr,J,{floorIndex:4,floorplanData:5},hr)}}function br(n){let e;return{c(){e=ae("path"),y(e,"d",n[0]),y(e,"fill","#2F313A")},m(t,i){M(t,e,i)},p(t,[i]){i&1&&y(e,"d",t[0])},i:X,o:X,d(t){t&&D(e)}}}function vr(n,e,t){let i,{path:o}=e;return n.$$set=r=>{"path"in r&&t(1,o=r.path)},n.$$.update=()=>{n.$$.dirty&2&&t(0,i=pt(o,{needZ:!0}))},[i,o]}class yr extends U{constructor(e){super();q(this,e,vr,br,J,{path:1})}}function Pr(n){let e,t,i,o,r,a;return{c(){e=ae("defs"),t=ae("pattern"),i=ae("rect"),o=ae("path"),r=Z(),a=ae("path"),y(i,"x","0"),y(i,"y","0"),y(i,"width",n[1]),y(i,"height",n[1]),y(i,"fill","#323747"),y(o,"d",n[2]),y(o,"stroke","#ffffff"),y(o,"stroke-opacity","0.06"),y(o,"stroke-width","0.5"),y(o,"fill","none"),y(t,"id","fpm-room-pattern-0"),y(t,"x","0"),y(t,"y","0"),y(t,"width",n[1]),y(t,"height",n[1]),y(t,"patternUnits","userSpaceOnUse"),y(a,"d",n[0]),y(a,"fill","url(#fpm-room-pattern-0)")},m(s,l){M(s,e,l),E(e,t),E(t,i),E(t,o),M(s,r,l),M(s,a,l)},p(s,[l]){l&1&&y(a,"d",s[0])},i:X,o:X,d(s){s&&D(e),s&&D(r),s&&D(a)}}}const yt=6;function wr(n,e,t){let i,{path:o}=e;const r=yt*2,a=`M0 ${yt} h ${r} M${yt} 0 v ${r}`;return n.$$set=s=>{"path"in s&&t(3,o=s.path)},n.$$.update=()=>{n.$$.dirty&8&&t(0,i=pt(o,{needZ:!0}))},[i,r,a,o]}class Ar extends U{constructor(e){super();q(this,e,wr,Pr,J,{path:3})}}function xr(n){let e,t,i,o,r,a,s,l,u,c,v;return{c(){e=ae("defs"),t=ae("pattern"),i=ae("rect"),o=ae("pattern"),r=ae("rect"),a=Z(),s=ae("path"),l=Z(),u=ae("path"),c=Z(),v=ae("path"),y(i,"x","0.5"),y(i,"y","0.5"),y(i,"width","6"),y(i,"height","50"),y(i,"fill","none"),y(i,"stroke","#4B4B57"),y(i,"stroke-width","0.5"),y(t,"id","room-material-pattern-1"),y(t,"x","0"),y(t,"y","0"),y(t,"width","13"),y(t,"height","51"),y(t,"patternUnits","userSpaceOnUse"),y(r,"x","0.5"),y(r,"y","0.5"),y(r,"width","6"),y(r,"height","50"),y(r,"fill","none"),y(r,"stroke","#4B4B57"),y(r,"stroke-width","0.5"),y(o,"id","room-material-pattern-2"),y(o,"x","7"),y(o,"y","25"),y(o,"width","13"),y(o,"height","51"),y(o,"patternUnits","userSpaceOnUse"),y(s,"d",n[0]),y(s,"fill","#43434D"),y(u,"d",n[0]),y(u,"fill","url(#room-material-pattern-1)"),y(v,"d",n[0]),y(v,"fill","url(#room-material-pattern-2)")},m(d,m){M(d,e,m),E(e,t),E(t,i),E(e,o),E(o,r),M(d,a,m),M(d,s,m),M(d,l,m),M(d,u,m),M(d,c,m),M(d,v,m)},p(d,[m]){m&1&&y(s,"d",d[0]),m&1&&y(u,"d",d[0]),m&1&&y(v,"d",d[0])},i:X,o:X,d(d){d&&D(e),d&&D(a),d&&D(s),d&&D(l),d&&D(u),d&&D(c),d&&D(v)}}}function Ir(n,e,t){let i,{path:o}=e;return n.$$set=r=>{"path"in r&&t(1,o=r.path)},n.$$.update=()=>{n.$$.dirty&2&&t(0,i=pt(o,{needZ:!0}))},[i,o]}class jr extends U{constructor(e){super();q(this,e,Ir,xr,J,{path:1})}}function Lr(n){oe(n,"svelte-1dykexu",".floorplan-plugin__room-material.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%}svg.svelte-1dykexu{position:absolute;left:0;top:0;width:100%;height:100%;overflow:visible}")}function gn(n,e,t){const i=n.slice();return i[5]=e[t],i}function Or(n){let e,t;return e=new Ar({props:{path:n[5].path}}),{c(){ee(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const r={};o&1&&(r.path=i[5].path),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Mr(n){let e,t;return e=new jr({props:{path:n[5].path}}),{c(){ee(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const r={};o&1&&(r.path=i[5].path),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function Dr(n){let e,t;return e=new yr({props:{path:n[5].path}}),{c(){ee(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const r={};o&1&&(r.path=i[5].path),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function bn(n){let e,t,i,o,r;const a=[Dr,Mr,Or],s=[];function l(u,c){return u[5].floorType===1?0:u[5].floorType===0?1:2}return t=l(n),i=s[t]=a[t](n),{c(){e=ae("svg"),i.c(),y(e,"width","100%"),y(e,"height","100%"),y(e,"viewBox",o=`0 0 ${n[1]} ${n[2]}`),y(e,"class","svelte-1dykexu")},m(u,c){M(u,e,c),s[t].m(e,null),r=!0},p(u,c){let v=t;t=l(u),t===v?s[t].p(u,c):(ce(),C(s[v],1,1,()=>{s[v]=null}),ue(),i=s[t],i?i.p(u,c):(i=s[t]=a[t](u),i.c()),j(i,1),i.m(e,null))},i(u){r||(j(i),r=!0)},o(u){C(i),r=!1},d(u){u&&D(e),s[t].d()}}}function zr(n){let e,t,i=n[0],o=[];for(let a=0;a<i.length;a+=1)o[a]=bn(gn(n,i,a));const r=a=>C(o[a],1,1,()=>{o[a]=null});return{c(){e=G("div");for(let a=0;a<o.length;a+=1)o[a].c();y(e,"class","floorplan-plugin__room-material svelte-1dykexu")},m(a,s){M(a,e,s);for(let l=0;l<o.length;l+=1)o[l].m(e,null);t=!0},p(a,[s]){if(s&7){i=a[0];let l;for(l=0;l<i.length;l+=1){const u=gn(a,i,l);o[l]?(o[l].p(u,s),j(o[l],1)):(o[l]=bn(u),o[l].c(),j(o[l],1),o[l].m(e,null))}for(ce(),l=i.length;l<o.length;l+=1)r(l);ue()}},i(a){if(!t){for(let s=0;s<i.length;s+=1)j(o[s]);t=!0}},o(a){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)C(o[s]);t=!1},d(a){a&&D(e),ft(o,a)}}}function Cr(n,e,t){let i,{floorIndex:o}=e,{floorplanData:r}=e;const a=r.bounding.max.x-r.bounding.min.x,s=r.bounding.max.y-r.bounding.min.y;return n.$$set=l=>{"floorIndex"in l&&t(3,o=l.floorIndex),"floorplanData"in l&&t(4,r=l.floorplanData)},n.$$.update=()=>{n.$$.dirty&24&&t(0,i=r.floorDatas[o].rooms.map(l=>Object.assign(Object.assign({},l),{path:l.path.map(u=>oi(u,r.bounding))})))},[i,a,s,o,r]}class kr extends U{constructor(e){super();q(this,e,Cr,zr,J,{floorIndex:3,floorplanData:4},Lr)}}function Er(n){oe(n,"svelte-19uvvss","path.svelte-19uvvss{opacity:0}path.svelte-19uvvss:hover{opacity:0.1}")}function Tr(n){let e;return{c(){e=ae("path"),y(e,"d",n[0]),y(e,"fill","#fff"),y(e,"class","svelte-19uvvss")},m(t,i){M(t,e,i)},p:X,i:X,o:X,d(t){t&&D(e)}}}function Gr(n,e,t){let{room:i}=e,{floorplanData:o}=e;const{bounding:r}=o,a=pt(i.path,{needZ:!0,format:s=>oi(s,r)});return n.$$set=s=>{"room"in s&&t(1,i=s.room),"floorplanData"in s&&t(2,o=s.floorplanData)},[a,i,o]}class Nr extends U{constructor(e){super();q(this,e,Gr,Tr,J,{room:1,floorplanData:2},Er)}}function Hr(n){oe(n,"svelte-1kqo6e4",".floorplan-plugin__room-highlight.svelte-1kqo6e4{position:absolute;width:100%;height:100%}svg.svelte-1kqo6e4{width:100%;height:100%;overflow:visible}")}function vn(n,e,t){const i=n.slice();return i[4]=e[t],i}function yn(n,e){let t,i,o;const r=[{room:e[4],floorplanData:e[1]}];let a={};for(let s=0;s<r.length;s+=1)a=ge(a,r[s]);return i=new Nr({props:a}),{key:n,first:null,c(){t=xe(),ee(i.$$.fragment),this.first=t},m(s,l){M(s,t,l),te(i,s,l),o=!0},p(s,l){e=s;const u=l&3?pe(r,[{room:e[4],floorplanData:e[1]}]):{};i.$set(u)},i(s){o||(j(i.$$.fragment,s),o=!0)},o(s){C(i.$$.fragment,s),o=!1},d(s){s&&D(t),ne(i,s)}}}function Sr(n){let e,t,i=[],o=new Map,r,a=n[1].floorDatas[n[0]].rooms;const s=l=>l[4].id;for(let l=0;l<a.length;l+=1){let u=vn(n,a,l),c=s(u);o.set(c,i[l]=yn(c,u))}return{c(){e=G("div"),t=ae("svg");for(let l=0;l<i.length;l+=1)i[l].c();y(t,"width","100%"),y(t,"height","100%"),y(t,"viewBox",`0 0 ${n[2]} ${n[3]}`),y(t,"class","svelte-1kqo6e4"),y(e,"class","floorplan-plugin__room-highlight svelte-1kqo6e4")},m(l,u){M(l,e,u),E(e,t);for(let c=0;c<i.length;c+=1)i[c].m(t,null);r=!0},p(l,[u]){u&3&&(a=l[1].floorDatas[l[0]].rooms,ce(),i=We(i,u,s,1,l,a,o,t,ht,yn,null,vn),ue())},i(l){if(!r){for(let u=0;u<a.length;u+=1)j(i[u]);r=!0}},o(l){for(let u=0;u<i.length;u+=1)C(i[u]);r=!1},d(l){l&&D(e);for(let u=0;u<i.length;u+=1)i[u].d()}}}function Fr(n,e,t){let{floorIndex:i}=e,{floorplanData:o}=e;const r=o.bounding.max.x-o.bounding.min.x,a=o.bounding.max.y-o.bounding.min.y;return n.$$set=s=>{"floorIndex"in s&&t(0,i=s.floorIndex),"floorplanData"in s&&t(1,o=s.floorplanData)},[i,o,r,a]}class li extends U{constructor(e){super();q(this,e,Fr,Sr,J,{floorIndex:0,floorplanData:1},Hr)}}function Xr(n){oe(n,"svelte-bl8zrz",".floorplan-plugin__floor.svelte-bl8zrz{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;pointer-events:none}.floorplan-plugin__floor--is-current.svelte-bl8zrz{opacity:1;pointer-events:auto}")}function Pn(n){let e,t;const i=[{floorIndex:n[1],floorplanData:n[5]}];let o={};for(let r=0;r<i.length;r+=1)o=ge(o,i[r]);return e=new li({props:o}),{c(){ee(e.$$.fragment)},m(r,a){te(e,r,a),t=!0},p(r,a){const s=a&34?pe(i,[{floorIndex:r[1],floorplanData:r[5]}]):{};e.$set(s)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function wn(n){let e,t;const i=[{floorplanData:n[5],floorIndex:n[1],getLabelElement:n[6]}];let o={};for(let r=0;r<i.length;r+=1)o=ge(o,i[r]);return e=new lr({props:o}),{c(){ee(e.$$.fragment)},m(r,a){te(e,r,a),t=!0},p(r,a){const s=a&98?pe(i,[{floorplanData:r[5],floorIndex:r[1],getLabelElement:r[6]}]):{};e.$set(s)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function An(n){let e,t;const i=[{floorplanData:n[5],floorIndex:n[1]}];let o={};for(let r=0;r<i.length;r+=1)o=ge(o,i[r]);return e=new gr({props:o}),{c(){ee(e.$$.fragment)},m(r,a){te(e,r,a),t=!0},p(r,a){const s=a&34?pe(i,[{floorplanData:r[5],floorIndex:r[1]}]):{};e.$set(s)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function Wr(n){let e,t,i,o,r,a,s,l,u;const c=[{floorIndex:n[1],floorplanData:n[5]}];let v={};for(let b=0;b<c.length;b+=1)v=ge(v,c[b]);t=new kr({props:v});let d=n[2]&&Pn(n);const m=[{floorplanData:n[5],floorIndex:n[1]}];let p={};for(let b=0;b<m.length;b+=1)p=ge(p,m[b]);r=new si({props:p});let h=n[3]&&wn(n),f=n[4]&&An(n);return{c(){e=G("div"),ee(t.$$.fragment),i=Z(),d&&d.c(),o=Z(),ee(r.$$.fragment),a=Z(),h&&h.c(),s=Z(),f&&f.c(),y(e,"class",l=en(`floorplan-plugin__floor${n[0]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz")},m(b,g){M(b,e,g),te(t,e,null),E(e,i),d&&d.m(e,null),E(e,o),te(r,e,null),E(e,a),h&&h.m(e,null),E(e,s),f&&f.m(e,null),u=!0},p(b,[g]){const P=g&34?pe(c,[{floorIndex:b[1],floorplanData:b[5]}]):{};t.$set(P),b[2]?d?(d.p(b,g),g&4&&j(d,1)):(d=Pn(b),d.c(),j(d,1),d.m(e,o)):d&&(ce(),C(d,1,1,()=>{d=null}),ue());const A=g&34?pe(m,[{floorplanData:b[5],floorIndex:b[1]}]):{};r.$set(A),b[3]?h?(h.p(b,g),g&8&&j(h,1)):(h=wn(b),h.c(),j(h,1),h.m(e,s)):h&&(ce(),C(h,1,1,()=>{h=null}),ue()),b[4]?f?(f.p(b,g),g&16&&j(f,1)):(f=An(b),f.c(),j(f,1),f.m(e,null)):f&&(ce(),C(f,1,1,()=>{f=null}),ue()),(!u||g&1&&l!==(l=en(`floorplan-plugin__floor${b[0]?" floorplan-plugin__floor--is-current":""}`)+" svelte-bl8zrz"))&&y(e,"class",l)},i(b){u||(j(t.$$.fragment,b),j(d),j(r.$$.fragment,b),j(h),j(f),u=!0)},o(b){C(t.$$.fragment,b),C(d),C(r.$$.fragment,b),C(h),C(f),u=!1},d(b){b&&D(e),ne(t),d&&d.d(),ne(r),h&&h.d(),f&&f.d()}}}function Rr(n,e,t){let{isCurrent:i}=e,{floorIndex:o}=e,{hoverEnable:r}=e,{roomLabelsEnable:a}=e,{ruleLabelsEnable:s}=e,{floorplanData:l}=e,{getLabelElement:u}=e;return n.$$set=c=>{"isCurrent"in c&&t(0,i=c.isCurrent),"floorIndex"in c&&t(1,o=c.floorIndex),"hoverEnable"in c&&t(2,r=c.hoverEnable),"roomLabelsEnable"in c&&t(3,a=c.roomLabelsEnable),"ruleLabelsEnable"in c&&t(4,s=c.ruleLabelsEnable),"floorplanData"in c&&t(5,l=c.floorplanData),"getLabelElement"in c&&t(6,u=c.getLabelElement)},[i,o,r,a,s,l,u]}class Br extends U{constructor(e){super();q(this,e,Rr,Wr,J,{isCurrent:0,floorIndex:1,hoverEnable:2,roomLabelsEnable:3,ruleLabelsEnable:4,floorplanData:5,getLabelElement:6},Xr)}}function Yr(n){oe(n,"svelte-q5wdnn",".floorplan-main.svelte-q5wdnn{width:100%;height:100%}")}function xn(n,e,t){const i=n.slice();return i[13]=e[t],i}function In(n){let e,t,i,o,r,a,s=n[9].floorDatas,l=[];for(let m=0;m<s.length;m+=1)l[m]=jn(xn(n,s,m));const u=m=>C(l[m],1,1,()=>{l[m]=null}),c=[{panoIndex:n[3],floorplanData:n[9],lastPanoramaLongitude:n[10],cameraImageUrl:n[11]}];let v={};for(let m=0;m<c.length;m+=1)v=ge(v,c[m]);i=new ko({props:v});let d=n[6]&&Ln(n);return{c(){e=G("div");for(let m=0;m<l.length;m+=1)l[m].c();t=Z(),ee(i.$$.fragment),o=Z(),d&&d.c(),y(e,"class","floorplan-main svelte-q5wdnn")},m(m,p){M(m,e,p);for(let h=0;h<l.length;h+=1)l[h].m(e,null);E(e,t),te(i,e,null),E(e,o),d&&d.m(e,null),a=!0},p(m,p){if(n=m,p&5040){s=n[9].floorDatas;let f;for(f=0;f<s.length;f+=1){const b=xn(n,s,f);l[f]?(l[f].p(b,p),j(l[f],1)):(l[f]=jn(b),l[f].c(),j(l[f],1),l[f].m(e,t))}for(ce(),f=s.length;f<l.length;f+=1)u(f);ue()}const h=p&3592?pe(c,[{panoIndex:n[3],floorplanData:n[9],lastPanoramaLongitude:n[10],cameraImageUrl:n[11]}]):{};i.$set(h),n[6]?d?(d.p(n,p),p&64&&j(d,1)):(d=Ln(n),d.c(),j(d,1),d.m(e,null)):d&&(ce(),C(d,1,1,()=>{d=null}),ue())},i(m){if(!a){for(let p=0;p<s.length;p+=1)j(l[p]);j(i.$$.fragment,m),j(d),r||Ht(()=>{r=Ji(e,Qi,{duration:n[0],easing:Vi}),r.start()}),a=!0}},o(m){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)C(l[p]);C(i.$$.fragment,m),C(d),a=!1},d(m){m&&D(e),ft(l,m),ne(i),d&&d.d()}}}function jn(n){let e,t;const i=[{hoverEnable:n[5],floorplanData:n[9],getLabelElement:n[12],roomLabelsEnable:n[7],ruleLabelsEnable:n[8]},{floorIndex:n[13].floorIndex},{isCurrent:n[13].floorIndex===n[4]}];let o={};for(let r=0;r<i.length;r+=1)o=ge(o,i[r]);return e=new Br({props:o}),{c(){ee(e.$$.fragment)},m(r,a){te(e,r,a),t=!0},p(r,a){const s=a&5040?pe(i,[a&5024&&{hoverEnable:r[5],floorplanData:r[9],getLabelElement:r[12],roomLabelsEnable:r[7],ruleLabelsEnable:r[8]},a&512&&{floorIndex:r[13].floorIndex},a&528&&{isCurrent:r[13].floorIndex===r[4]}]):{};e.$set(s)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function Ln(n){let e,t;return e=new Fo({props:{floorplanData:n[9],northDesc:n[2]}}),{c(){ee(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const r={};o&512&&(r.floorplanData=i[9]),o&4&&(r.northDesc=i[2]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){ne(e,i)}}}function _r(n){let e,t,i=n[1]&&In(n);return{c(){i&&i.c(),e=xe()},m(o,r){i&&i.m(o,r),M(o,e,r),t=!0},p(o,[r]){o[1]?i?(i.p(o,r),r&2&&j(i,1)):(i=In(o),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(ce(),C(i,1,1,()=>{i=null}),ue())},i(o){t||(j(i),t=!0)},o(o){C(i),t=!1},d(o){i&&i.d(o),o&&D(e)}}}function Zr(n,e,t){let{duration:i=0}=e,{visible:o}=e,{northDesc:r}=e,{panoIndex:a}=e,{floorIndex:s}=e,{hoverEnable:l}=e,{compassEnable:u}=e,{roomLabelsEnable:c}=e,{ruleLabelsEnable:v}=e,{floorplanData:d}=e,{lastPanoramaLongitude:m}=e,{cameraImageUrl:p}=e,{getLabelElement:h}=e;return n.$$set=f=>{"duration"in f&&t(0,i=f.duration),"visible"in f&&t(1,o=f.visible),"northDesc"in f&&t(2,r=f.northDesc),"panoIndex"in f&&t(3,a=f.panoIndex),"floorIndex"in f&&t(4,s=f.floorIndex),"hoverEnable"in f&&t(5,l=f.hoverEnable),"compassEnable"in f&&t(6,u=f.compassEnable),"roomLabelsEnable"in f&&t(7,c=f.roomLabelsEnable),"ruleLabelsEnable"in f&&t(8,v=f.ruleLabelsEnable),"floorplanData"in f&&t(9,d=f.floorplanData),"lastPanoramaLongitude"in f&&t(10,m=f.lastPanoramaLongitude),"cameraImageUrl"in f&&t(11,p=f.cameraImageUrl),"getLabelElement"in f&&t(12,h=f.getLabelElement)},[i,o,r,a,s,l,u,c,v,d,m,p,h]}class ui extends U{constructor(e){super();q(this,e,Zr,_r,J,{duration:0,visible:1,northDesc:2,panoIndex:3,floorIndex:4,hoverEnable:5,compassEnable:6,roomLabelsEnable:7,ruleLabelsEnable:8,floorplanData:9,lastPanoramaLongitude:10,cameraImageUrl:11,getLabelElement:12},Yr)}}function at(n,e,t=300){const i=n.getElement();!i||(i.style.opacity=e+"",i.style.transition=t===0?"none":`opacity ${t}ms linear`,t!==0&&Promise.race([new Promise(o=>i.addEventListener("transitionend",o,{once:!0})),new Promise(o=>setTimeout(o,t))]).then(()=>{i.style.transition="none"}))}class Ur{constructor(e,t){Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0}}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pxmm",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"app",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"panoIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"floorIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"configs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"lastPanoramaLongitude",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"floorplanData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var i,o;this.hide(),(i=this.app)===null||i===void 0||i.$destroy(),(o=this.container)===null||o===void 0||o.remove(),this.five.off("modeChange",this.onFiveModeChange),this.five.off("panGesture",this.onFivePanGesture),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("modelLoaded",this.onFiveModelLoaded),this.five.off("pinchGesture",this.onFivePinchGesture),this.five.off("wantsGesture",this.onFiveWantsGesture),this.five.off("wantsMoveToPano",this.onFiveWantsMoveToPano),this.five.off("initAnimationEnded",this.onFiveInitAnimationEnded),this.five.off("modelShownFloorChange",this.onModelShownFloorChange)}}),Object.defineProperty(this,"onFiveWantsMoveToPano",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.visible&&this.configs.preventRoomClick)return!1}}),Object.defineProperty(this,"onFiveWantsGesture",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(!(i!=="pan"&&i!=="pinch"&&i!=="mouseWheel")&&this.visible&&!this.configs.gestureEnable)return!1}}),Object.defineProperty(this,"onModelShownFloorChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(this.floorIndex!==i){if(i===null){const o=this.five.getCurrentState().panoIndex;this.floorIndex=this.five.work.observers[o].floorIndex;return}this.floorIndex=i,this.updateSize(),this.render()}}}),Object.defineProperty(this,"onFivePanoArrived",{enumerable:!0,configurable:!0,writable:!0,value:i=>{var o;!((o=this.five)===null||o===void 0?void 0:o.work)||(this.panoIndex=i,this.floorIndex=this.five.work.observers[i].floorIndex)}}),Object.defineProperty(this,"onFivePanGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.visible||this.updatePosition()}}),Object.defineProperty(this,"onFivePinchGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.visible||(this.updatePosition(),this.updateSize())}}),Object.defineProperty(this,"onFiveModelLoaded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.wrapper||!this.selector)return;const i=this.selector instanceof Element?this.selector:document.querySelector(this.selector);if(!i)throw new Error("\u4E0D\u6B63\u786E\u7684\u7236\u5BB9\u5668\u9009\u62E9\u5668");this.wrapper=i,i.append(this.container)}}),Object.defineProperty(this,"onFiveModeChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(i!=="Topview")return this.hide()}}),Object.defineProperty(this,"onFiveInitAnimationEnded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{mode:i}=this.five.getCurrentState();i==="Topview"&&this.show()}}),Object.defineProperty(this,"updateSize",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(!this.floorplanData||!this.container||!this.wrapper||this.five.getCurrentState().mode!=="Topview")return;const{min:i,max:o}=this.floorplanData.bounding,r=o.x-i.x,a=o.y-i.y,s=this.configs.attachedTo?{attachedTo:this.configs.attachedTo}:void 0,l=ri(this.five,this.wrapper,this.floorIndex,s),u=Math.ceil(r*l),c=Math.ceil(a*l);this.pxmm=l,this.size={width:u,height:c},this.container.style.width=u+"px",this.container.style.height=c+"px"}}),this.five=e,this.selector=t.selector,this.configs=ai(t,["selector"]),this.five.addExtraElement(this.container),this.container.classList.add("floorplan-plugin"),Object.assign(this.container.style,go),this.five.model.loaded?this.onFiveModelLoaded():e.once("modelLoaded",this.onFiveModelLoaded),this.five.once("dispose",this.dispose),this.five.on("modeChange",this.onFiveModeChange),this.five.on("panGesture",this.onFivePanGesture),this.five.on("mouseWheel",this.onFivePinchGesture),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("pinchGesture",this.onFivePinchGesture),this.five.on("wantsGesture",this.onFiveWantsGesture),this.five.on("wantsMoveToPano",this.onFiveWantsMoveToPano),this.five.on("initAnimationEnded",this.onFiveInitAnimationEnded),this.five.on("modelShownFloorChange",this.onModelShownFloorChange)}async load(e){const t=JSON.parse(JSON.stringify(e));this.floorplanData=await Rt(t),this.render()}appendTo(e){return this.wrapper=e,e.appendChild(this.container),this}show(){this.visible=!0,this.five.model.show(this.floorIndex),this.updatePosition(),this.updateSize();const e=500,t=this.configs.modelOpacity;typeof t=="number"&&at(this.five,t,e),this.render(e)}hide(){this.visible=!1,at(this.five,1,0),this.render()}updatePosition(){var e;const t=(e=this.five.model)===null||e===void 0?void 0:e.bounding.getCenter(new O);if(!t)return;const i=t.clone().project(this.five.camera),o=(i.x+1)/2,r=-(i.y-1)/2;this.container.style.left=o*100+"%",this.container.style.top=r*100+"%"}render(e){if(!this.container||!this.floorplanData||this.size.width===0)return;const{northDesc:t,getLabelElement:i,cameraImageUrl:o,hoverEnable:r,compassEnable:a,roomLabelsEnable:s,ruleLabelsEnable:l}=this.configs,u={getLabelElement:i,northDesc:t??"\u5317",cameraImageUrl:o,visible:this.visible,duration:e??0,panoIndex:this.panoIndex,floorIndex:this.floorIndex,floorplanData:this.floorplanData,hoverEnable:r??!1,compassEnable:a??!0,ruleLabelsEnable:l??!0,roomLabelsEnable:s??!0,lastPanoramaLongitude:this.lastPanoramaLongitude};this.app?this.app.$set(u):this.app=new ui({target:this.container,intro:!0,props:u})}}const rl=(n,e)=>new Ur(n,e);function Bt(n,e=200){let t;return function(...i){t||(n(...i),t=setTimeout(function(){t=null},e))}}function qr(n){oe(n,"svelte-1ty3s4p",".plugin-radar__camera-wrapper.svelte-1ty3s4p{width:100%;height:100%;position:absolute;pointer-events:none}.plugin-radar__camera-position.svelte-1ty3s4p{position:absolute;left:0;top:0;width:0;height:0;transform:none;pointer-events:none;transition:transform 1s linear}.plugin-radar__camera-rotate.svelte-1ty3s4p{position:absolute;left:-0.78125rem;top:-0.78125rem;width:0.88542rem;height:0.88542rem;transform-origin:0.78125rem 0.78125rem;transform:rotate(45deg);background-repeat:no-repeat;background-size:100%}")}function Jr(n){let e,t,i;return{c(){e=G("div"),t=G("div"),i=G("div"),y(i,"class","plugin-radar__camera-rotate svelte-1ty3s4p"),I(i,"background-image","url("+(n[0]||rt)+")"),I(i,"transform",n[1],!1),y(t,"class","plugin-radar__camera-position svelte-1ty3s4p"),I(t,"transform",n[2],!1),y(e,"class","plugin-radar__camera-wrapper svelte-1ty3s4p")},m(o,r){M(o,e,r),E(e,t),E(t,i)},p(o,[r]){r&1&&I(i,"background-image","url("+(o[0]||rt)+")"),r&2&&I(i,"transform",o[1],!1),r&4&&I(t,"transform",o[2],!1)},i:X,o:X,d(o){o&&D(e)}}}function Vr(n){return`rotate(${Math.floor(n/Math.PI*180)*-1+45}deg)`}function Qr(n,e,t){let i,o,{five:r}=e,{pxmm:a}=e,{floorplanData:s}=e,{cameraImageUrl:l}=e,u=r.getCurrentState().panoIndex,c=r.getCurrentState().longitude;function v(p,h){const f=p.bounding,b=p.observers[h];if(!b)return"";const g=(f.max.x-f.min.x)*a,P=(f.max.y-f.min.y)*a,A=Math.floor(b.positionInImage.x*g),w=Math.floor(b.positionInImage.y*P);return`translate(${A}px, ${w}px)`}function d(p){t(6,u=p)}const m=Bt(p=>{t(7,c=p.longitude)},1e3/60);return Ft(()=>{r.on("panoWillArrive",d),r.on("cameraDirectionUpdate",m)}),St(()=>{r.off("panoWillArrive",d),r.off("cameraDirectionUpdate",m)}),n.$$set=p=>{"five"in p&&t(3,r=p.five),"pxmm"in p&&t(4,a=p.pxmm),"floorplanData"in p&&t(5,s=p.floorplanData),"cameraImageUrl"in p&&t(0,l=p.cameraImageUrl)},n.$$.update=()=>{n.$$.dirty&96&&t(2,i=v(s,u)),n.$$.dirty&128&&t(1,o=Vr(c))},[l,o,i,r,a,s,u,c]}class Kr extends U{constructor(e){super();q(this,e,Qr,Jr,J,{five:3,pxmm:4,floorplanData:5,cameraImageUrl:0},qr)}}function $r(n){oe(n,"svelte-1i87fz7",".plugin-pano-floorplan__extra-objects.svelte-1i87fz7{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.plugin-pano-floorplan__extra-object-item--position.svelte-1i87fz7{position:absolute;width:0;height:0}.plugin-pano-floorplan__extra-object-item.svelte-1i87fz7{transform:translate(-50%, -50%)}")}function On(n,e,t){const i=n.slice();return i[1]=e[t],i}function Mn(n,e){let t,i,o=`${e[1].icon.width/16}rem`,r=`${e[1].icon.height/16}rem`,a,s=`${e[1].positionInImage.y*100}%`,l=`${e[1].positionInImage.x*100}%`;return{key:n,first:null,c(){t=G("div"),i=G("div"),a=Z(),y(i,"class","plugin-pano-floorplan__extra-object-item svelte-1i87fz7"),I(i,"background-image",`url(${e[1].icon.url})`),I(i,"width",o,!1),I(i,"height",r,!1),y(t,"class","plugin-pano-floorplan__extra-object-item--position svelte-1i87fz7"),I(t,"top",s,!1),I(t,"left",l,!1),this.first=t},m(u,c){M(u,t,c),E(t,i),E(t,a)},p(u,c){e=u,c&1&&I(i,"background-image",`url(${e[1].icon.url})`),c&1&&o!==(o=`${e[1].icon.width/16}rem`)&&I(i,"width",o,!1),c&1&&r!==(r=`${e[1].icon.height/16}rem`)&&I(i,"height",r,!1),c&1&&s!==(s=`${e[1].positionInImage.y*100}%`)&&I(t,"top",s,!1),c&1&&l!==(l=`${e[1].positionInImage.x*100}%`)&&I(t,"left",l,!1)},d(u){u&&D(t)}}}function ea(n){let e,t=[],i=new Map,o=n[0];const r=a=>a[1].id;for(let a=0;a<o.length;a+=1){let s=On(n,o,a),l=r(s);i.set(l,t[a]=Mn(l,s))}return{c(){e=G("div");for(let a=0;a<t.length;a+=1)t[a].c();y(e,"class","plugin-pano-floorplan__extra-objects svelte-1i87fz7")},m(a,s){M(a,e,s);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(a,[s]){s&1&&(o=a[0],t=We(t,s,r,1,a,o,i,e,ti,Mn,null,On))},i:X,o:X,d(a){a&&D(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function ta(n,e,t){let{extraObjects:i=[]}=e;return n.$$set=o=>{"extraObjects"in o&&t(0,i=o.extraObjects)},[i]}class na extends U{constructor(e){super();q(this,e,ta,ea,J,{extraObjects:0},$r)}}function Dn(n){let e,t;const i=[{five:n[0],pxmm:n[1],floorIndex:n[2],floorplanData:n[4],onRoomHeightClick:n[6]}];let o={};for(let r=0;r<i.length;r+=1)o=ge(o,i[r]);return e=new li({props:o}),{c(){ee(e.$$.fragment)},m(r,a){te(e,r,a),t=!0},p(r,a){const s=a&87?pe(i,[{five:r[0],pxmm:r[1],floorIndex:r[2],floorplanData:r[4],onRoomHeightClick:r[6]}]):{};e.$set(s)},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){C(e.$$.fragment,r),t=!1},d(r){ne(e,r)}}}function ia(n){let e,t,i,o,r,a;const s=[{floorIndex:n[2],floorplanData:n[4]}];let l={};for(let c=0;c<s.length;c+=1)l=ge(l,s[c]);e=new si({props:l}),i=new na({props:{extraObjects:n[5]}});let u=n[3]&&Dn(n);return{c(){ee(e.$$.fragment),t=Z(),ee(i.$$.fragment),o=Z(),u&&u.c(),r=xe()},m(c,v){te(e,c,v),M(c,t,v),te(i,c,v),M(c,o,v),u&&u.m(c,v),M(c,r,v),a=!0},p(c,[v]){const d=v&20?pe(s,[{floorIndex:c[2],floorplanData:c[4]}]):{};e.$set(d);const m={};v&32&&(m.extraObjects=c[5]),i.$set(m),c[3]?u?(u.p(c,v),v&8&&j(u,1)):(u=Dn(c),u.c(),j(u,1),u.m(r.parentNode,r)):u&&(ce(),C(u,1,1,()=>{u=null}),ue())},i(c){a||(j(e.$$.fragment,c),j(i.$$.fragment,c),j(u),a=!0)},o(c){C(e.$$.fragment,c),C(i.$$.fragment,c),C(u),a=!1},d(c){ne(e,c),c&&D(t),ne(i,c),c&&D(o),u&&u.d(c),c&&D(r)}}}function oa(n,e,t){let i,{five:o}=e,{pxmm:r}=e,{floorIndex:a}=e,{hoverEnable:s}=e,{floorplanData:l}=e,{extraObjects:u=[]}=e;const c=void 0;return n.$$set=v=>{"five"in v&&t(0,o=v.five),"pxmm"in v&&t(1,r=v.pxmm),"floorIndex"in v&&t(2,a=v.floorIndex),"hoverEnable"in v&&t(3,s=v.hoverEnable),"floorplanData"in v&&t(4,l=v.floorplanData),"extraObjects"in v&&t(7,u=v.extraObjects)},n.$$.update=()=>{n.$$.dirty&132&&t(5,i=u==null?void 0:u.filter(v=>v.floorIndex===a))},[o,r,a,s,l,i,c,u]}class ra extends U{constructor(e){super();q(this,e,oa,ia,J,{five:0,pxmm:1,floorIndex:2,hoverEnable:3,floorplanData:4,extraObjects:7})}}function aa(n){oe(n,"svelte-1mvqyqq",".plugin-floorplan-radar.svelte-1mvqyqq{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.plugin-floorplan-radar-container.svelte-1mvqyqq{position:relative}")}function zn(n){let e,t,i,o,r=`${n[7]}px`,a=`${n[10]}px`,s;const l=[{five:n[0],pxmm:n[8],floorIndex:n[9],floorplanData:n[2],hoverEnable:n[1],extraObjects:n[4]}];let u={};for(let d=0;d<l.length;d+=1)u=ge(u,l[d]);t=new ra({props:u});const c=[{pxmm:n[8],five:n[0],floorplanData:n[2],cameraImageUrl:n[3]}];let v={};for(let d=0;d<c.length;d+=1)v=ge(v,c[d]);return o=new Kr({props:v}),{c(){e=G("div"),ee(t.$$.fragment),i=Z(),ee(o.$$.fragment),y(e,"class","plugin-floorplan-radar-container svelte-1mvqyqq"),I(e,"width",r,!1),I(e,"height",a,!1)},m(d,m){M(d,e,m),te(t,e,null),E(e,i),te(o,e,null),s=!0},p(d,m){const p=m&791?pe(l,[{five:d[0],pxmm:d[8],floorIndex:d[9],floorplanData:d[2],hoverEnable:d[1],extraObjects:d[4]}]):{};t.$set(p);const h=m&269?pe(c,[{pxmm:d[8],five:d[0],floorplanData:d[2],cameraImageUrl:d[3]}]):{};o.$set(h),m&128&&r!==(r=`${d[7]}px`)&&I(e,"width",r,!1),m&1024&&a!==(a=`${d[10]}px`)&&I(e,"height",a,!1)},i(d){s||(j(t.$$.fragment,d),j(o.$$.fragment,d),s=!0)},o(d){C(t.$$.fragment,d),C(o.$$.fragment,d),s=!1},d(d){d&&D(e),ne(t),ne(o)}}}function sa(n){let e,t,i,o=n[5]!==0&&zn(n);return{c(){e=G("div"),o&&o.c(),y(e,"class","plugin-floorplan-radar svelte-1mvqyqq"),Ht(()=>n[11].call(e))},m(r,a){M(r,e,a),o&&o.m(e,null),t=ei(e,n[11].bind(e)),i=!0},p(r,[a]){r[5]!==0?o?(o.p(r,a),a&32&&j(o,1)):(o=zn(r),o.c(),j(o,1),o.m(e,null)):o&&(ce(),C(o,1,1,()=>{o=null}),ue())},i(r){i||(j(o),i=!0)},o(r){C(o),i=!1},d(r){r&&D(e),o&&o.d(),t()}}}function la(n,e,t){let{five:i}=e,{hoverEnable:o}=e,{floorplanData:r}=e,{cameraImageUrl:a}=e,{extraObjects:s=[]}=e,l=0,u=0,c=0,v=0,d=0,m=0;function p(f){t(9,u=i.work.observers[f].floorIndex)}Ft(()=>(i.on("panoArrived",p),()=>{i.off("panoArrived",p)}));function h(){c=this.clientWidth,v=this.clientHeight,t(5,c),t(6,v)}return n.$$set=f=>{"five"in f&&t(0,i=f.five),"hoverEnable"in f&&t(1,o=f.hoverEnable),"floorplanData"in f&&t(2,r=f.floorplanData),"cameraImageUrl"in f&&t(3,a=f.cameraImageUrl),"extraObjects"in f&&t(4,s=f.extraObjects)},n.$$.update=()=>{if(n.$$.dirty&228){const f=Math.min(c,v),{max:b,min:g}=r.bounding,P=b.x-g.x,A=b.y-g.y,w=function(){return P>A?[f,f/P*A]:[f/A*P,f]}();t(7,d=w[0]),t(10,m=w[1]),t(8,l=d/P)}},[i,o,r,a,s,c,v,d,l,u,m,h]}class ua extends U{constructor(e){super();q(this,e,la,sa,J,{five:0,hoverEnable:1,floorplanData:2,cameraImageUrl:3,extraObjects:4},aa)}}class ca{constructor(e,t){Object.defineProperty(this,"app",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapperSelector",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"extraObjects",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"configs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var i;(i=this.app)===null||i===void 0||i.$destroy()}}),Object.defineProperty(this,"load",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{const o=JSON.parse(JSON.stringify(i)),r=await Rt(o);this.data=r,this.render()}}),this.five=e,(t==null?void 0:t.configs)&&Object.assign(this.configs,t.configs),typeof(t==null?void 0:t.wrapper)=="string"?this.wrapperSelector=t.wrapper:(t==null?void 0:t.wrapper)instanceof Element&&(this.wrapper=t.wrapper),e.once("dispose",this.dispose)}appendTo(e){this.wrapper=e,this.render()}changeConfigs(e){Object.assign(this.configs,e),this.render()}setExtraObjectsWith3DPositions(e){!this.data||(this.extraObjects=Lo(e,this.five,this.data),this.render())}render(){var e;if(!this.wrapper){const i=document.querySelector(this.wrapperSelector);this.wrapper=i}if(!this.data||!this.wrapper)return;const t={five:this.five,floorplanData:this.data,extraObjects:this.extraObjects,cameraImageUrl:this.configs.cameraImageUrl,hoverEnable:(e=this.configs.hoverEnable)!==null&&e!==void 0?e:!1};if(!this.app){this.app=new ua({target:this.wrapper,props:t});return}this.app.$set(t)}}const al=(n,e)=>new ca(n,e);var we;(function(n){n.UnknownError="UnknowError",n.DataNotLoaded="DataNotLoaded",n.BreakOffByHide="BreakOffByHide",n.ModelNotLoaded="ModelNotLoaded",n.ChangeModeError="ChangeModeError",n.UpdateCameraError="UpdateCameraError",n.DifferentShowParams="DifferentShowParams"})(we||(we={}));const da=500,Cn=80;async function st(n){try{const e=await n;return[null,e]}catch(e){return e instanceof Error?[e,null]:[new Error(""),null]}}function lt(n){return Object.prototype.toString.call(n)==="[object Object]"}function gt(n,e){return n===e?!0:typeof n!=typeof e?!1:!!(Number.isNaN(n)&&Number.isNaN(e))}function fa(n,e){const t=Object.getOwnPropertyNames(n),i=Object.getOwnPropertyNames(e);if(t.length!==i.length)return!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(!gt(n[a],e[a]))return!1}return!0}function ha(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(!gt(n[t],e[t]))return!1;return!0}function ma(n,e){return gt(n,e)?!0:lt(n)&&lt(e)?fa(n,e):Array.isArray(n)&&Array.isArray(e)?ha(n,e):!1}function Yt(n,e){return gt(n,e)?!0:lt(n)&&lt(e)?ga(n,e):Array.isArray(n)&&Array.isArray(e)?pa(n,e):!1}function pa(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(!Yt(n[t],e[t]))return!1;return!0}function ga(n,e){const t=Object.getOwnPropertyNames(n),i=Object.getOwnPropertyNames(e);if(t.length!==i.length)return!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(!Yt(n[a],e[a]))return!1}return!0}function ba(n,e,t={deep:!1}){return t.deep?Yt(n,e):ma(n,e)}async function va(n,...e){const[t]=await st(n.changeMode(...e));if(t)throw t;await new Promise((i,o)=>{n.once("initAnimationEnded",i);const r=a=>{a!==e[0]&&o("changeMode \u88AB\u4E2D\u65AD"),n.off("modeChange",r)};n.on("modeChange",r)})}function kn(n,e,t=4){return Math.floor(n*Math.pow(10,t))===Math.floor(e*Math.pow(10,t))}function Mt(n,e){if(n.currentMode!==ke.Mode.Floorplan)return!1;const{latitude:t,longitude:i,fov:o}=e,{latitude:r,longitude:a}=n.getCurrentState(),s=n.camera.fov;return!!(kn(t,r,1)&&kn(i,a,1)&&o===s)}async function ya(n,e,t=!0){if(Mt(n,e)===!0)return;if(n.currentMode!==ke.Mode.Floorplan){const[u]=await st(va(n,ke.Mode.Floorplan,e,void 0,t));if(u)throw u;if(Mt(n,e)===!1)throw new Error(we.ChangeModeError);return}const{latitude:o,longitude:r,fov:a}=n.getCurrentState(),s=Math.min(1e3,Math.max(200,Math.abs(o-Math.PI/2)*1e3,(r>Math.PI?2*Math.PI-r:r)*500,Math.abs(a-e.fov)*10)),[l]=await st(n.updateCamera(e,s,t));if(l)throw new Error(we.UpdateCameraError)}const Pa="modelFloorplanPlugin";class wa{constructor(e,t){var i;Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Pa}),Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0}}),Object.defineProperty(this,"app",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pxmm",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"panoIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"floorIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"configs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"lastPanoramaLongitude",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"floorplanData",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"showState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ModelFloorplanPluginsShowOpts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showRejection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var o,r;const a=this.five;this.hide(),(o=this.app)===null||o===void 0||o.$destroy(),(r=this.container)===null||r===void 0||r.remove(),a.off("modelLoaded",this.handleModelLoaded),a.off("modeChange",this.handleModeChange),a.off("panGesture",this.handlePanGesture),a.off("panoArrived",this.handlePanoArrived),a.off("wantsChangeMode",this.handleWantsChangeMode),a.off("wantsInteriaPan",this.handleWantsInteriaPan),a.off("wantsTapGesture",this.handleWantsTapGesture),a.off("modelShownFloorChange",this.onModelShownFloorChange)}}),Object.defineProperty(this,"updateSize",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(!this.floorplanData||!Mt(this.five,this.showState)||!this.container||!this.wrapper)return;const{min:o,max:r}=this.floorplanData.bounding,a=r.x-o.x,s=r.y-o.y,l=this.configs.attachedTo?{attachedTo:this.configs.attachedTo}:void 0,u=ri(this.five,this.wrapper,this.floorIndex,l),c=Math.ceil(a*u),v=Math.ceil(s*u);this.size.width===c&&this.size.height===v||(this.pxmm=u,this.size={width:c,height:v},this.container.style.width=c+"px",this.container.style.height=v+"px")}}),Object.defineProperty(this,"show",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{var r,a;if(!this.showPromise&&this.visible)return!0;if(!((r=this.five.model)===null||r===void 0?void 0:r.loaded))throw new Error(we.ModelNotLoaded);if(!this.floorplanData)throw new Error(we.DataNotLoaded);if(this.visible=!0,this.showPromise){const u=ba(o,this.ModelFloorplanPluginsShowOpts,{deep:!1});if(!!this.showPromise&&u)return this.showPromise;!!this.showPromise&&!u&&((a=this.showRejection)===null||a===void 0||a.call(this,we.DifferentShowParams))}this.ModelFloorplanPluginsShowOpts=o;const l=(async()=>{var u,c;let v=!1,d;this.showRejection=f=>{v=!0,d=f};const[m]=await st(ya(this.five,this.showState,o==null?void 0:o.userAction));if(m)throw m;if(v)throw d?new Error(d):new Error(we.UnknownError);if(!this.visible)throw new Error(we.UnknownError);this.visible=!0,this.updateSize(),(o==null?void 0:o.floorIndex)&&(this.floorIndex=o.floorIndex),this.five.model.show(this.floorIndex);const p=(c=(u=o==null?void 0:o.modelOpacity)!==null&&u!==void 0?u:this.configs.modelOpacity)!==null&&c!==void 0?c:1,h=(o==null?void 0:o.immediately)?0:da;return at(this.five,p,h),this.render(h),this.five.on("wantsGesture",this.handleWantsGesture),this.five.on("wantsTapGesture",this.handleWantsTapGesture),!0})().then(()=>{var u;return this.hooks.emit("showAnimationEnded",{auto:!!(o==null?void 0:o.isAutoShow),userAction:(u=o==null?void 0:o.userAction)!==null&&u!==void 0?u:!0}),!0}).catch(u=>{if((o==null?void 0:o.isAutoShow)||!(u instanceof Error))return!1;throw u}).finally(()=>{this.showPromise=void 0,this.showRejection=void 0});return this.showPromise=l,l}}),Object.defineProperty(this,"hide",{enumerable:!0,configurable:!0,writable:!0,value:o=>{var r,a;if(this.size.width===0||this.visible===!1)return!0;const s=!!(o==null?void 0:o.isAutoHide);return this.five.off("wantsGesture",this.handleWantsGesture),this.five.off("wantsTapGesture",this.handleWantsTapGesture),this.visible=!1,(r=this.showRejection)===null||r===void 0||r.call(this,we.BreakOffByHide),at(this.five,1,0),this.render(),this.hooks.emit("hide",{auto:s,userAction:(a=o==null?void 0:o.userAction)!==null&&a!==void 0?a:!0}),!0}}),Object.defineProperty(this,"onModelShownFloorChange",{enumerable:!0,configurable:!0,writable:!0,value:o=>{if(this.floorIndex!==o){if(o===null){const r=this.five.getCurrentState().panoIndex;this.floorIndex=this.five.work.observers[r].floorIndex;return}this.floorIndex=o,this.updateSize(),this.render()}}}),Object.defineProperty(this,"handleModelLoaded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.wrapper||!this.selector)return;const o=this.selector instanceof Element?this.selector:document.querySelector(this.selector);if(!o)throw new Error("\u4E0D\u6B63\u786E\u7684\u7236\u5BB9\u5668\u9009\u62E9\u5668");this.wrapper=o,o.append(this.container)}}),Object.defineProperty(this,"handleClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(!this.visible)return;if(this.hooks.emit("click"))return!1}}),Object.defineProperty(this,"handleWantsTapGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.handleClick()}),Object.defineProperty(this,"handleWantsChangeMode",{enumerable:!0,configurable:!0,writable:!0,value:o=>{o!=="Panorama"&&(this.lastPanoramaLongitude=this.five.getCurrentState().longitude),o!=="Floorplan"&&this.hide()}}),Object.defineProperty(this,"handleModeChange",{enumerable:!0,configurable:!0,writable:!0,value:o=>{o==="Floorplan"?this.five.on("panGesture",this.handlePanGesture):(this.hide(),this.five.off("panGesture",this.handlePanGesture))}}),Object.defineProperty(this,"handlePanoArrived",{enumerable:!0,configurable:!0,writable:!0,value:o=>{var r;!((r=this.five)===null||r===void 0?void 0:r.work)||(this.panoIndex=o,this.floorIndex=this.five.work.observers[o].floorIndex)}}),Object.defineProperty(this,"handleWantsInteriaPan",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.visible)return!1}}),Object.defineProperty(this,"handleWantsGesture",{enumerable:!0,configurable:!0,writable:!0,value:(o,r)=>{if(!!this.visible&&(r.length>1||o==="mouseWheel"))return!1}}),Object.defineProperty(this,"handlePanGesture",{enumerable:!0,configurable:!0,writable:!0,value:async({latitude:o,longitude:r},a)=>{if(this.five.getCurrentState().mode!=="Floorplan"||this.configs.autoShowEnable===!1)return;if(a&&this.visible)return this.five.setState(this.showState,!0);const s=Math.abs(o-Math.PI/2)>5*Math.PI/180,l=r>5*(Math.PI/180)&&r<355*(Math.PI/180),u=s||l;if(this.visible&&u)return this.hide({isAutoHide:!0});if(this.five.camera.fov/Cn<.8)return;const c=Math.abs(o-Math.PI/2)<10*Math.PI/180,v=r<30*(Math.PI/180)||r>330*(Math.PI/180);if(a&&!this.visible&&c&&v){const d=async(m,p)=>{!p||(this.five.off("interiaPan",d),await this.show({isAutoShow:!0}))};this.five.on("interiaPan",d);return}}}),this.five=e,this.hooks=new Fe,this.selector=t.selector,this.configs=ai(t,["selector"]),this.showState={longitude:0,latitude:Math.PI/2,fov:Cn/((i=t==null?void 0:t.scale)!==null&&i!==void 0?i:1)},this.container.classList.add("floorplan-plugin"),Object.assign(this.container.style,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:10}),this.five.addExtraElement(this.container),this.five.model.loaded?this.handleModelLoaded():e.once("modelLoaded",this.handleModelLoaded),e.once("dispose",this.dispose),e.on("modeChange",this.handleModeChange),e.on("panoArrived",this.handlePanoArrived),e.on("wantsChangeMode",this.handleWantsChangeMode),e.on("wantsInteriaPan",this.handleWantsInteriaPan),e.on("modelShownFloorChange",this.onModelShownFloorChange)}async load(e){const t=JSON.parse(JSON.stringify(e));this.floorplanData=await Rt(t),this.render()}appendTo(e){return this.wrapper=e,e.appendChild(this.container),this}changeFloor(e){this.five.model.show(e)}changeConfigs(e){Object.assign(this.configs,e),!!this.container&&this.render()}render(e){if(!this.container||!this.floorplanData||this.size.width===0)return;const{northDesc:t,hoverEnable:i,cameraImageUrl:o,getLabelElement:r,roomLabelsEnable:a,compassEnable:s,ruleLabelsEnable:l}=this.configs,u={cameraImageUrl:o,getLabelElement:r,northDesc:t??"\u5317",visible:this.visible,duration:e??0,panoIndex:this.panoIndex,floorIndex:this.floorIndex,floorplanData:this.floorplanData,hoverEnable:i??!1,compassEnable:s??!0,ruleLabelsEnable:l??!0,roomLabelsEnable:a??!0,lastPanoramaLongitude:this.lastPanoramaLongitude};this.app?this.app.$set(u):this.app=new ui({target:this.container,intro:!0,props:u})}}const sl=(n,e)=>new wa(n,e),Pt=(n,e,t)=>{const i=new Lt,o=new Yi(n,e,t,"YXZ");return i.makeRotationFromEuler(o),i},Aa=(n,{scale:e,rotation:t,position:i})=>{if(e&&n.scale.set(e,e,e),t){const[o,r,a]=t;o&&n.applyMatrix4(Pt(o,0,0)),r&&n.applyMatrix4(Pt(0,r,0)),a&&n.applyMatrix4(Pt(0,0,a))}return i&&n.position.set(i.x,i.y,i.z),n};function ci(n,e){n.traverse(t=>{var i;if(t.type==="Mesh"){const o=t,r=Object.assign({map:o.material.map||{}},e);o.material=new je(r),o.renderOrder=1,((i=t.parent)===null||i===void 0?void 0:i.type)==="Mesh"&&(t.renderOrder=t.parent.renderOrder+1)}})}const ll=(n,e)=>{const t=e.fbx_url||"//vrlab-static.ljcdn.com/release/web/v3/dipan3/dipan.FBX",i=e.north_rad||void 0,o={},r=async c=>{const v=(c==null?void 0:c.fbx_url)||t,d=(c==null?void 0:c.north_rad)||i;if(!d)throw new Error('"northRad"\u914D\u7F6E\u53C2\u6570\u7F3A\u5931\uFF1A\u672A\u914D\u7F6E\u6307\u5357\u9488\u6307\u5411\uFF01');const m=n.model.bounding,p=m.max.x-m.min.x,h=m.max.z-m.min.z,f=Math.max(p,h),g=await new Kn().loadAsync(v);ci(g,{transparent:!0,side:Xe,blending:Hi});const P=[0,d-Math.PI/2,0],{model:{bounding:{max:{x:A,z:w},min:{x,y:N,z:L}}}}=n;o.yBase=N;const T={x:(A+x)/2,y:N-1.6,z:(w+L)/2},k=.0045*f;return Aa(g,{position:T,rotation:P,scale:k}),o.object=g,!0},a=({latitude:c})=>{if(!o.object)return;const v=s(c);v&&(o.object.position.y=v)},s=c=>{if(o.yBase===void 0)return;const v=.6;if(c>=Math.PI/4)return o.yBase-(v+1.6);const d=c*(4/Math.PI);return o.yBase-(v*d+1.6)};return{load:r,disable:()=>{!o.object||(n.scene.remove(o.object),n.needsRender=!0,n.off("cameraDirectionUpdate",a))},enable:()=>{if(!o.object)return;const c=s(n.getPose().latitude);c&&(o.object.position.y=c),n.scene.add(o.object),n.needsRender=!0,n.on("cameraDirectionUpdate",a)}}};function xa(n,e){var t,i,o,r,a;const s=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:512,l=(i=e==null?void 0:e.fontSize)!==null&&i!==void 0?i:s*(35/256)*1.2,u=(o=e==null?void 0:e.backgroundColor)!==null&&o!==void 0?o:"rgba(0,0,0,0)",c=(r=e==null?void 0:e.fontColor)!==null&&r!==void 0?r:"#fff",v=(a=e==null?void 0:e.textAlign)!==null&&a!==void 0?a:"center",d=document.createElement("canvas");d.setAttribute("width",s+""),d.setAttribute("height",s+"");const m=d.getContext("2d");return m.fillStyle=u,m.fillRect(0,0,s,s),m.font=`${l}px "\u5FAE\u8F6F\u96C5\u9ED1"`,m.textAlign=v,m.fillStyle=c,m.fillText(n,s/2,s*.7),new ki(d)}const ul=(n,e)=>{var t,i,o;const r={},a=(t=e.animationEnabled)!==null&&t!==void 0?t:!0,s=(i=e.position)!==null&&i!==void 0?i:void 0,l=(o=e.rad)!==null&&o!==void 0?o:void 0,u=e.fbx_url||"//vrlab-image4.ljcdn.com/release/web/entryDoorMini/Anim_Door1.fbx",c=[],v=async g=>{var P,A,w,x,N,L,T;const k=(P=g==null?void 0:g.position)!==null&&P!==void 0?P:s;if(!k)return Promise.reject("ModelEntryDoorGuidePlugin.load(): position is undefined");const V=ni(k),W=(A=g==null?void 0:g.rad)!==null&&A!==void 0?A:l,Y=(w=g==null?void 0:g.fbx_url)!==null&&w!==void 0?w:u;if(r.rad=W,W===void 0)return Promise.reject(`ModelEntryDoorGuidePlugin.load(): rad is ${W}`);const S=await new Kn().loadAsync(Y);S.position.copy(V),S.rotation.z=W,S.scale.set(.8,.8,.8),ci(S,{transparent:!0,side:Xe});const R=(T=(L=(N=(x=S.children)===null||x===void 0?void 0:x[0])===null||N===void 0?void 0:N.children)===null||L===void 0?void 0:L[3])===null||T===void 0?void 0:T.clone();return R?(R.material=new je({transparent:!0,map:xa("\u5165\u6237\u95E8")}),R.renderOrder=3,S.children[0].add(R),r.object=S,!0):Promise.reject(`ModelEntryDoorGuidePlugin.load(): textMesh is ${R}`)},d=()=>{if(r.animation)return;if(!r.object)return console.error("ModelEntryDoorGuidePlugin.initAnimation(): state.object is ",r.object);const g=1,P=new _i(r.object);c.push(P);const A=P.clipAction(r.object.animations[0]);A.timeScale=g;let w;const x=()=>{let k=0,V=0;const W=1e3/30,Y=S=>{k=requestAnimationFrame(Y);const R=S-V;R<W||(V=S,c.forEach(se=>se.update(R/1e3)),n.needsRender=!0)};return k=requestAnimationFrame(Y),()=>{cancelAnimationFrame(k)}},T={play:()=>{w||(A.play(),w=x(),requestAnimationFrame(()=>{r.object&&r.object.rotation.z!==r.rad&&(r.object.rotation.z=r.rad)}))},stop:()=>{A.stop(),w==null||w(),w=void 0}};r.animation=T},m=g=>{var P;if(!r.object)return console.error("ModelEntryDoorGuidePlugin.enable(): object is ",r.object);((P=g==null?void 0:g.animationEnable)!==null&&P!==void 0?P:a)&&(r.animation||d(),r.animation.play()),n.scene.add(r.object),n.needsRender=!0},p=()=>{!r.object||(r.animation&&r.animation.stop(),n.scene.remove(r.object),n.needsRender=!0)},h=g=>g==="Floorplan"?m():p();return{load:v,enable:g=>(r.enabled||(r.enabled=!0,h(n.currentMode),n.on("modeChange",h),m(g)),!0),disable:()=>(r.enabled&&(r.enabled=!1,p(),n.off("modeChange",h)),!0)}},ut=window.requestAnimationFrame||(n=>setTimeout(n,16)),Ia=window.cancelAnimationFrame||clearTimeout;function di(n,e=0){e<=0?ut(n):ut(()=>di(n,e-1))}function _t(n,e=60){let t=-1,i=0,o=-1;const r=1e3/e;function a(s){o===-1&&(o=s),t=ut(a),!(s-i<r)&&(i=s,n&&n(s-o))}return t=ut(a),function(){Ia(t)}}const ja=$n;function La(n,e,t,i=ja.Linear.None){const o=new Si(n).to(e,t).easing(i);di(()=>o.start(0));const r=_t(s=>{o.update(s)===!1&&r()}),a=[];return o.onDestroy=s=>(a.push(s),o),o.destroy=function(){this.stop(),Object.assign(o,{_onStartCallback:null,_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallbackL:null});let s;for(;s=a.shift();)s();r()},o}function Oa(n,e){return La({progress:0},{progress:1},n,e)}var En;(function(n){n.Move="Move",n.Rotate="Rotate"})(En||(En={}));var Ae;(function(n){n.Clockwise="Clockwise",n.Anticlockwise="Anticlockwise",n.Loop="Loop"})(Ae||(Ae={}));const ot=Math.PI*2;function Tn(n){return(n%ot+ot)%ot}function Gn(n){return n%ot}function wt(n,e,t){return n+(e-n)*t}const Dt=(n,e,t)=>{const i=Math.PI,o=i*2;return n=Tn(n),e=Tn(e),t===Ae.Anticlockwise&&n<e&&(n+=o),t===Ae.Clockwise&&e<n&&(e+=o),t===Ae.Loop&&e-n>i?Dt(n,e,Ae.Anticlockwise):t===Ae.Loop&&n-e>i?Dt(n,e,Ae.Clockwise):{from:n,to:e}},cl=n=>{const e={},t=async(r,a,s={preload:!0})=>(e.interruptCallback&&e.interruptCallback(!1),s.asyncStartCallback&&await s.asyncStartCallback(),r.mode&&r.mode!==n.currentMode&&await n.changeMode(r.mode),s.preload&&r.panoIndex!==void 0&&r.panoIndex!==n.panoIndex&&await n.preloadPano(r.panoIndex),s.asyncEndCallback&&await s.asyncEndCallback(),r.panoIndex===void 0&&r.fov===void 0&&r.latitude===void 0&&r.longitude===void 0?!0:await new Promise((l,u)=>{const c=r.panoIndex!==void 0?r.panoIndex:n.panoIndex;c!==void 0?n.moveToPano(c,Object.assign({duration:a,moveEndCallback:()=>l(!0),moveCancelCallback:()=>u(!1)},r)):u(!1)})),i=r=>{const a=n.state,s=Gn(a.latitude),l=Gn(r.latitude),{from:u,to:c}=Dt(a.longitude,r.longitude,r.rotation||Ae.Loop),v=a.fov,d=r.fov;return{from:{latitude:s,longitude:u,fov:v},to:{latitude:l,longitude:c,fov:d}}};return{move:t,rotate:async(r,a,s={})=>{e.interruptCallback&&e.interruptCallback(!1),s.asyncStartCallback&&await s.asyncStartCallback(),n.currentMode!==ke.Mode.Panorama&&await n.changeMode(ke.Mode.Panorama),r.panoIndex!==void 0&&r.panoIndex!==n.panoIndex&&(s.preload&&await n.preloadPano(r.panoIndex),await new Promise((c,v)=>{if(!r.panoIndex){c(!0);return}n.moveToPano(r.panoIndex,{moveEndCallback:()=>c(!0),moveCancelCallback:()=>v(!1)})})),s.asyncEndCallback&&await s.asyncEndCallback();const{from:l,to:u}=i(r);return await new Promise(c=>{const v=({progress:f})=>{const b={};b.longitude=wt(l.longitude,u.longitude,f),b.latitude=wt(l.latitude,u.latitude,f),b.fov=wt(l.fov,u.fov,f),n.setState(b,!0)},d=()=>{c(!0)},m=()=>{c(!1)},p=r.rotateSpeed?Math.ceil(Math.abs(u.longitude-l.longitude)/r.rotateSpeed*1e3):a,h=Oa(p,$n.Linear.None).onUpdate(v).onComplete(d).onDestroy(m);r.rotation===Ae.Loop&&h.repeat(1/0).yoyo(!0),e.interruptCallback=(f=!0)=>{h.destroy(),e.interruptCallback=void 0,e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=void 0),c(f)},e.timeoutId=setTimeout(()=>{e.interruptCallback&&e.interruptCallback(!0)},a)})}}};function Nn(n,e){return n.x===e.x&&n.y===e.y}function fi(n,e){return Math.abs(n)===1/0&&Math.abs(e)===1/0?!0:Math.abs(n-e)<.001}function ct(n,e){return(e.y-n.y)/(e.x-n.x)}function Ma(n,e,t){const i=ct(n[1],n[0]),o=ct(e[1],e[0]);if(isNaN(i)||isNaN(o)||fi(i,o))return!1;if(Qe(n[0],e))return n[0];if(Qe(n[1],e))return n[1];if(Qe(e[0],n))return e[0];if(Qe(e[1],n))return e[1];if(t&&!Da(n,e))return!1;const r=n[0],a=e[0];if(Math.abs(i)===1/0)return{x:r.x,y:e[1].y-(e[1].x-r.x)*o};if(Math.abs(o)===1/0)return{x:a.x,y:n[1].y-(n[1].x-a.x)*i};const s=(a.y-r.y+i*r.x-o*a.x)/(i-o),l=i*s-i*r.x+r.y;return{x:s,y:l}}function Qe(n,e){return Nn(n,e[0])||Nn(n,e[1])?!0:(e[0].x-n.x)*(n.x-e[1].x)>=0&&(e[0].y-n.y)*(n.y-e[1].y)>=0&&fi(ct(e[0],n),ct(n,e[1]))}function Ke(n,e,t){return(n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y)}function Da(n,e){return Math.max(n[0].x,n[1].x)>=Math.min(e[0].x,e[1].x)&&Math.max(e[0].x,e[1].x)>=Math.min(n[0].x,n[1].x)&&Math.max(n[0].y,n[1].y)>=Math.min(e[0].y,e[1].y)&&Ke(e[0],n[1],n[0])*Ke(n[1],e[1],n[0])>0&&Ke(n[0],e[1],e[0])*Ke(e[1],n[1],e[0])>0?1:0}function hi(n,e=0){e<=0?requestAnimationFrame(n):requestAnimationFrame(()=>hi(n,e-1))}const za=`<style type="text/css">
.PanoRulerPlugin-rule-line {
  position: absolute;
  transform-origin: left center;
  width: 0;
  height: 0.0625rem;
}

.PanoRulerPlugin-rule-line::after {
  content: '';
  position: absolute;
  left: -0.125rem;
  top: -0.1rem;
  width: 0.25rem;
  height: 0.25rem;
  border-radius: 50%;
  background: #FFFFFF;
  z-index: 1;
  animation: viewport-rule-point 0.1s 1s;
  animation-fill-mode: both;
}

.PanoRulerPlugin-rule-line::before {
  content: '';
  position: absolute;
  right: -0.125rem;
  top: -0.1rem;
  width: 0.25rem;
  height: 0.25rem;
  border-radius: 50%;
  background: #FFFFFF;
  animation: viewport-rule-point 0.1s 1.5s;
  animation-fill-mode: both;
}

.PanoRulerPlugin-rule-line em {
  background: #fff;
  display: block;
  height: 100%;
  animation: viewport-rule-line 0.5s ease 1s;
  animation-fill-mode: both;
  box-shadow: 0 0 0.25rem rgb(0 0 0 / 40%);
}

.PanoRulerPlugin-rule-label {
  position: absolute;
  width: 0;
  height: 0;
  top: 0.0625rem;
}

.PanoRulerPlugin-rule-label-name {
  position: absolute;
  padding: 0.1875rem 0.375rem;
  background: rgba(195,195,195,0.30);
  backdrop-filter: blur(0.25rem);
  -webkit-backdrop-filter: blur(0.25rem);
  border-radius: 6.25rem;
  border: 0.0625rem solid rgba(255,255,255,0.6);
  white-space: nowrap;
  overflow: hidden;
  color: #FFFFFF;
  font-weight: 500;
  font-size: 0.75rem;
  line-height: 1;
  -webkit-animation: viewport-rule-label 0.25s ease 1s;
  animation: viewport-rule-label 0.25s ease 1s;
  animation-fill-mode: both;
  box-shadow: inset 0 0 0.625rem 0 rgba(255,255,255,0.30);
}

@keyframes viewport-rule-line {
  0% { width: 0% }
  100% { width: 100% }
}

@keyframes viewport-rule-label {
  0% { opacity: 0; transform: scaleX(0); }
  100% { opacity: 1; transform: translate(-50%, -50%) scaleX(1); }
}

@keyframes viewport-rule-point {
  0% { transform: scaleX(0); }
  100% { transform: scaleX(1); }
}
</style>
`,Ca=(n,e)=>Math.sqrt(Math.pow(n.z-e.z,2)+Math.pow(n.x-e.x,2)),ka=(n,e)=>{const t={},i=new ze,o=e.work;if(!o)return t;const r=n.observers;o.observers.forEach((a,s)=>{const{standingPosition:l}=a,u=new O(l.x,l.y,l.z);i.set(u,new O(0,1,0));const[c]=e.model.intersectRaycaster(i),v=c?c.point.y:2.7,d=r[s];if(!d)return t;const m=n.rooms[d].name;t[m]===void 0?t[m]={__roof:[v],__floor:[u.y]}:(t[m].__roof.push(v),t[m].__floor.push(u.y))});for(const a in t){const s=t[a];s.__roof.sort(),s.__floor.sort(),s.floor=s.__floor[~~(s.__floor.length/2)],s.roof=s.__roof[s.__roof.length-1]}return t},dl=(n,e)=>{const t={enable:!1,loaded:!1,options:e.options||{distanceText:h=>`${h.toFixed(1)}m`}},i=(h,f)=>{const b=`
      <div class="PanoRulerPlugin-rule-line">
        <em></em>
        <div class="PanoRulerPlugin-rule-label">
          <div class="PanoRulerPlugin-rule-label-name">${t.options.distanceText(f)}</div>
        </div>
      </div>
    `,g=document.createElement("div");return g.setAttribute("class","PanoRulerPlugin-rule"),g.setAttribute("data-name",h),g.setAttribute("style","display: none"),g.innerHTML=b,g},o=document.createElement("div");o.setAttribute("style","position: absolute;pointer-events: none;width: 100%;height: 100%;left: 0;top: 0;overflow: hidden;");const r=document.createElement("div");r.innerHTML=za,o.appendChild(r);const a={},s=(h,f)=>{const b=ka(h,n),g=n.work;if(!g)return!1;for(const P in f){const A=f[P],{standingPosition:w}=g.observers[0],x=A.map(({x:N,z:L,observers:T})=>{const k=T.length>0?h.rooms[h.observers[T[0]]].name:"",V=b[k]?b[k].floor:null;let W=1/0,Y={index:0,x:w.x,y:w.y,z:w.z};T.forEach(H=>{if(!g.observers[H])return;const{standingPosition:B}=g.observers[H],Q={index:H,x:B.x,y:B.y,z:B.z},z=Ca({x:N,z:L},Q);V?z<W&&Math.abs(Q.y-V)<.3&&(W=z,Y=Q):z<W&&(W=z,Y=Q)});const S=new O(N,Y.y,L);Object.assign(S,{observers:T});const R=b[k]?b[k].roof:null,se=R?new O(N,R,L):null;return se&&Object.assign(se,{observers:T}),{origin:S,vertical:se}});a[P]={origins:x.map(N=>N.origin),rules:[]};for(const{origin:N,vertical:L}of x){if(!L)continue;const T=i(P,N.distanceTo(L));o.append(T),a[P].rules.push({vertical:!0,rule:[N,L],$element:T})}for(let N=0;N<x.length;N++){let L=N+1;L>=x.length&&(L=0);const{origin:T}=x[N],{origin:k}=x[L],V=i(P,T.distanceTo(k));o.append(V),a[P].rules.push({vertical:!1,rule:[T,k],$element:V})}}return t.loaded=!0,c(),!0},l=async(h,f,b)=>{const g=h||e.roomInfo,P=f||e.roomRules;if(!g||!P)throw new Error("\u6807\u5C3A\u6570\u636E\u4F9D\u8D56\u4E0D\u9F50\u5168\uFF01");return t.loaded=!1,t.options=Object.assign({},t.options,b||{}),n.model.loaded?s(g,P):await new Promise(A=>n.once("modelLoaded",()=>A(s(g,P))))};e.roomInfo&&e.roomRules&&l(e.roomInfo,e.roomRules);const u=(h,f,b,g)=>{const P=[[{x:0,y:0},{x:b,y:0}],[{x:0,y:0},{x:0,y:g}],[{x:b,y:0},{x:b,y:g}],[{x:0,y:g},{x:b,y:g}]],A=[];for(let w=0;w<P.length;w++){const x=Ma([h,f],[P[w][0],P[w][1]],!0);x&&A.push(x)}return A.length===0?!1:A},c=()=>{var h;const f=(h=n.getElement())===null||h===void 0?void 0:h.parentElement;if(!f||!t.loaded||Object.keys(a).length<=0)return;const{panoIndex:b,camera:g,currentMode:P}=n;if(b===void 0)return;let A;for(const k in a)k.split(",").indexOf(b.toString())>=0&&(A=k);if(!A)return;const w=g.position,x=g.getWorldDirection(new O),N=f.clientWidth,L=f.clientHeight;if(P!==ke.Mode.Panorama){for(const k in a)for(const{$element:V}of a[k].rules)V.style.display="none";return}for(const k in a)for(const{$element:V}of a[k].rules)V.style.display=k===A?"block":"none";const[T]=a[A].origins.slice().filter(k=>k.observers.indexOf(b)>=0).sort((k,V)=>{const W=k.clone().setY(0).sub(w).normalize().angleTo(x.clone().setY(0)),Y=V.clone().setY(0).sub(w).normalize().angleTo(x.clone().setY(0));return W-Y});for(const{rule:k,vertical:V,$element:W}of a[A].rules){const[Y,S]=k,R=W.querySelector(".PanoRulerPlugin-rule-line");if(!R)return;if(!T){W.style.display="none";continue}if(Y!==T&&S!==T){W.style.display="none";continue}if(Y.distanceTo(S)<.5){W.style.display="none";continue}if(Y.observers.indexOf(b)===-1||S.observers.indexOf(b)===-1){W.style.display="none";continue}if(Y.clone().sub(w).normalize().angleTo(x)>Math.PI/2){W.style.display="none";continue}if(S.clone().sub(w).normalize().angleTo(x)>Math.PI/2){W.style.display="none";continue}const Be=Y.distanceTo(S);if(S.clone().sub(S.clone().sub(Y).divide(new O(2,2,2))).distanceTo(w)/Be>8){W.style.display="none";continue}const Q=Y.clone().project(g),z=(Q.x+1)/2*N,de=(-Q.y+1)/2*L,Le=S.clone().project(g),F=(Le.x+1)/2*N,Ie=(-Le.y+1)/2*L,he=Math.sqrt(Math.pow(F-z,2)+Math.pow(Ie-de,2));let $=he,ie=50;const K=u({x:~~z,y:~~de},{x:~~F,y:~~Ie},N,L);if(K&&K.length===1&&(T===Y?($=Math.sqrt(Math.pow(K[0].x-z,2)+Math.pow(K[0].y-de,2)),ie=$/he*50):T===S&&($=Math.sqrt(Math.pow(K[0].x-F,2)+Math.pow(K[0].y-Ie,2)),ie=100-$/he*50)),K&&K.length===2){const re={x:(K[0].x+K[1].x)/2,y:(K[0].y+K[1].y)/2};ie=Math.sqrt(Math.pow(re.x-z,2)+Math.pow(re.y-de,2))/he*100}const Ce=(Math.PI/2-Math.atan2(F-z,de-Ie))/Math.PI*180,ye=R.querySelector(".PanoRulerPlugin-rule-label"),_=ye.children[0].clientWidth;_>=he||_/2>=ie/100*he||_/2>=(1-ie/100)*he?R.style.display="none":(R.style.display="block",R.style.width=he+"px",R.style.left=z+"px",R.style.top=de+"px",R.style.transform=`rotate(${-Ce}deg)`,ye.style.left=`${ie}%`)}},v=()=>hi(c),d=Bt(c,80);return{enable:()=>{var h,f;return t.loaded?(t.enable||(o.setAttribute("class","PanoRulerPlugin"+(t.options.className?" "+t.options.className:"")),(f=(h=n.getElement())===null||h===void 0?void 0:h.parentElement)===null||f===void 0||f.append(o),c(),n.on("panoArrived",c),n.on("modeChange",c),n.on("cameraDirectionUpdate",v),n.on("movingToPano",v),n.on("mouseWheel",d),n.on("pinchGesture",d),t.enable=!0),!0):!1},disable:()=>(t.enable&&(n.off("panoArrived",c),n.off("modeChange",c),n.off("cameraDirectionUpdate",v),n.off("movingToPano",v),n.off("mouseWheel",d),n.off("pinchGesture",d),o&&o.remove(),t.enable=!1),!0),load:l,state:t}},Ea="data:image/png;base64,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";function Ta(){const n=document.createElement("div"),e=document.createElement("i"),t=document.createElement("span");return n.appendChild(e),n.appendChild(t),n.style.position="relative",n.style.width="100%",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="center",n.style.marginTop=`${150/16}rem`,n.style.opacity="0",n.style.transition="opacity 1000ms linear",e.style.display="block",e.style.width=`${134/16}rem`,e.style.height=`${22/16}rem`,e.style.backgroundSize="100%",e.style.backgroundRepeat="no-repeat",e.style.backgroundImage=`url(${Ea})`,t.style.marginTop=`${10/16}rem`,t.style.fontSize=`${16/16}rem`,t.style.color="#fff",t.style.opacity="0.7",t.style.textShadow="0 2px 16px rgb(22 34 83 / 24%)",t.style.fontWeight="bold",{appendTo(i){i.appendChild(n)},dispose(){n.remove()},setRoom(i){t.innerHTML=i.name+" "+Math.floor(i.size/1e6)+"\u33A1"},show(){n.style.opacity="1"},hide(){n.style.opacity="0"}}}const Ga=new dt;async function Hn(n){return new Promise((e,t)=>{Ga.load(n,e,void 0,t)}).then(e=>(e.encoding=Gt,e))}class Na extends Se.Tween{constructor(){super(...arguments);Object.defineProperty(this,"disposeMethods",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"animationFrameDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onDispose",{enumerable:!0,configurable:!0,writable:!0,value:e=>(this.disposeMethods.push(e),this)}),Object.defineProperty(this,"play",{enumerable:!0,configurable:!0,writable:!0,value:()=>(this.start(0),this.animationFrameDisposer=_t(e=>this.update(e)),this)}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var e;this.stop(),(e=this.animationFrameDisposer)===null||e===void 0||e.call(this),this.disposeMethods.forEach(t=>t()),this.disposeMethods=[],Se.remove(this)}})}}function mi(n,e=Se.Easing.Linear.None){const t=new Na({progress:0}).to({progress:1});return n!==void 0&&t.duration(n),e!==void 0&&t.easing(e),t}const fl=function(n,e){return new Ha(n,e)};class Ha{constructor(e,t){Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:new Ze}),Object.defineProperty(this,"modelLoaded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"roomInfoInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"roomInfoWrapperInstance",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compassMeshTween",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compassMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"entryDoorMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dispose",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var i,o,r,a;this.five.scene.remove(this.group),this.group.remove(...this.group.children),(o=(i=this.compassMesh)===null||i===void 0?void 0:i.material.map)===null||o===void 0||o.dispose(),(a=(r=this.entryDoorMesh)===null||r===void 0?void 0:r.material.map)===null||a===void 0||a.dispose(),this.five.off("panoArrived",this.onFivePanoArrived),this.five.off("panoWillArrive",this.onFivePanoWillArrive)}}),Object.defineProperty(this,"onFiveFistPanoLoaded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.modelLoaded=!0,this.data&&this.init()}}),Object.defineProperty(this,"onFivePanoWillArrive",{enumerable:!0,configurable:!0,writable:!0,value:i=>{var o,r;i!==this.five.panoIndex&&((o=this.compassMeshTween)===null||o===void 0||o.dispose(),(r=this.compassMesh)===null||r===void 0||r.material.setValues({opacity:0}))}}),Object.defineProperty(this,"onFivePanoArrived",{enumerable:!0,configurable:!0,writable:!0,value:i=>{var o,r,a,s;const l=this.five.work.observers[i].standingPosition;if(this.compassMesh){if(this.compassMesh.position.copy(l.clone().setY(l.y+.01)),this.compassMesh.material.opacity!==0)return;(o=this.compassMeshTween)===null||o===void 0||o.dispose(),this.compassMeshTween=mi(1e3).onUpdate(({progress:u})=>{var c;(c=this.compassMesh)===null||c===void 0||c.material.setValues({opacity:u}),this.five.needsRender=!0}).play()}if(this.entryDoorMesh){const c=new O(this.data.entrance.position.x,this.data.entrance.position.y,this.data.entrance.position.z).clone().setY(l.y).sub(l).normalize(),v=l.clone().add(c.clone().multiplyScalar(.7)).setY(l.y+.01);this.entryDoorMesh.rotation.z=new O(0,0,-1).angleTo(c),this.entryDoorMesh.position.copy(v),((r=this.data)===null||r===void 0?void 0:r.room_observers[i].room.type)===1?(a=this.entryDoorMesh)===null||a===void 0||a.material.setValues({opacity:1}):(s=this.entryDoorMesh)===null||s===void 0||s.material.setValues({opacity:0})}this.roomInfoInstance&&this.roomInfoWrapperInstance&&(this.roomInfoWrapperInstance.css3DObject.position.copy(l.clone().setY(l.y+.01)),this.roomInfoInstance.setRoom(this.data.room_observers[i].room)),this.five.needsRender=!0}}),Object.defineProperty(this,"onFiveCameraDirectionUpdate",{enumerable:!0,configurable:!0,writable:!0,value:({longitude:i,latitude:o})=>{var r,a;!this.roomInfoWrapperInstance||(this.roomInfoWrapperInstance.css3DObject.rotation.z=i,o>.66&&this.five.getCurrentState().mode==="Panorama"?(r=this.roomInfoInstance)===null||r===void 0||r.show():(a=this.roomInfoInstance)===null||a===void 0||a.hide())}}),this.five=e,this.config=t,this.five.scene.add(this.group),e.once("dispose",this.dispose),e.once("modelLoaded",this.onFiveFistPanoLoaded),this.five.on("panoArrived",this.onFivePanoArrived),this.five.on("panoWillArrive",this.onFivePanoWillArrive),this.five.on("cameraDirectionUpdate",this.onFiveCameraDirectionUpdate)}load(e){this.data=e,this.modelLoaded&&this.init()}async init(){if(!this.data||!this.modelLoaded)return;const e=this.data.north_rad;e!=null&&(this.compassMesh=await this.loadCompassMesh(),this.compassMesh.rotateX(-Math.PI/2),this.compassMesh.rotateZ(e-Math.PI/2),this.group.add(this.compassMesh)),this.data.entrance!=null&&(this.entryDoorMesh=await this.loadEntryDoorMesh(),this.roomInfoWrapperInstance=this.loadRoomInfo(),this.roomInfoInstance=Ta(),this.entryDoorMesh.rotateX(-Math.PI/2),this.roomInfoWrapperInstance&&this.roomInfoInstance.appendTo(this.roomInfoWrapperInstance.container),this.group.add(this.entryDoorMesh)),this.onFivePanoArrived(this.five.panoIndex||0),this.five.needsRender=!0}async loadCompassMesh(){var e;const t=((e=this.config)===null||e===void 0?void 0:e.compassImageUrl)||"//vrlab-image4.ljcdn.com/release/web/v3/north-point-circle.96498e69.png",i=await Hn(t),o=new zi(.7,32),r=new je({map:i,transparent:!0,opacity:0,depthTest:!1}),a=new ve(o,r);return a.name="pano-compass-mesh",a}async loadEntryDoorMesh(){var e;const t=((e=this.config)===null||e===void 0?void 0:e.entryDoorImageUrl)||"//vrlab-image4.ljcdn.com/release/web/enterDoor.831b8208.png",i=await Hn(t),o=new Tt(.2,.16),r=new je({map:i,transparent:!0,opacity:.8,depthTest:!1}),a=new ve(o,r);return a.name="pano-compass-entry-door",a}loadRoomInfo(){const e=[new O(-.7,0,-.7),new O(.7,0,-.7),new O(.7,0,.7),new O(-.7,0,.7)];return ii(this.five).create3DDomContainer(e)}}function $e(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function Sa(n,e,t){const i=t/2;for(let o=1;o<=i;o++){const r=t-(o-1);for(let a=1;a<=e;a++){const s=(o-1)*e+a-1,l=(r-1)*e+a-1;$e(n,s*4+0,l*4+0),$e(n,s*4+1,l*4+1),$e(n,s*4+2,l*4+2),$e(n,s*4+3,l*4+3)}}}class Fa{constructor(e,t){var i,o,r;if(Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:new Fe}),Object.defineProperty(this,"contentDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"wrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:this.contentDom}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderCenter",{enumerable:!0,configurable:!0,writable:!0,value:new O}),Object.defineProperty(this,"lastPanEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hammer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onPan",{enumerable:!0,configurable:!0,writable:!0,value:s=>{var l,u,c,v;if(!this.wrapper)return;const d=(u=(l=this.lastPanEvent)===null||l===void 0?void 0:l.deltaX)!==null&&u!==void 0?u:0,m=(v=(c=this.lastPanEvent)===null||c===void 0?void 0:c.deltaY)!==null&&v!==void 0?v:0,p=s.deltaX-d,h=s.deltaY-m;if(this.lastPanEvent=s,this.hooks.emit("wantsPanGesture",{srcEvent:s,deltaX:p,deltaY:h}))return;const b=this.offset.x+p,g=this.offset.y+h;this.contentDom.style.boxShadow="0 2px 30px 0 rgba(0,0,0,0.20)",this.canvas.style.transform=`translate3d(${b}px, ${g}px, 100px)`,this.offset={x:b,y:g}}}),Object.defineProperty(this,"onPanEnd",{enumerable:!0,configurable:!0,writable:!0,value:s=>{this.lastPanEvent=void 0,this.contentDom.style.boxShadow="none"}}),!e.renderer)throw new Error("Five Render \u672A\u521D\u59CB\u5316");this.five=e,this.scale=(i=t==null?void 0:t.scale)!==null&&i!==void 0?i:2,this.width=(o=t==null?void 0:t.width)!==null&&o!==void 0?o:190,this.height=(r=t==null?void 0:t.height)!==null&&r!==void 0?r:190,this.config={dragEnabled:(t==null?void 0:t.dragEnabled)||!1,autoFixPCPosition:(t==null?void 0:t.autoFixPCPosition)||!1,initialPosition:(t==null?void 0:t.initialPosition)||{left:"0",top:"0"}};const a=this.canvas.getContext("2d");if(!a)throw new Error("CANNOT CREATE CONTEXT2D");this.context=a,this.config.dragEnabled&&(this.hammer=new Nt(this.canvas),this.hammer.on("pan",this.onPan),this.hammer.on("panend",this.onPanEnd))}dispose(){var e;this.clear(),this.remove(),(e=this.hammer)===null||e===void 0||e.destroy()}remove(){this.canvas.remove(),this.visible=!1}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}appendTo(e){this.wrapper=e,this.initStyle(),e.append(this.canvas),this.visible=!0}renderWithPoint(e){!this.wrapper||(this.renderCenter=e,this.render(),this.config.autoFixPCPosition&&this.autoFixPCPosition())}autoFixPCPosition(){if(!this.wrapper)return;const{width:e,height:t}=this,i=this.renderCenter.clone().project(this.five.camera),o=(i.x+1)/2*this.wrapper.clientWidth,r=-(i.x-1)/2*this.wrapper.clientWidth,a=-(i.y-1)/2*this.wrapper.clientHeight;o<183?(this.canvas.style.top=-t/2+"px",this.canvas.style.left=90+"px"):a<183?(this.canvas.style.top=90+"px",this.canvas.style.left=-e/2+"px"):r<183?(this.canvas.style.top=-t/2+"px",this.canvas.style.left=-e-90+"px"):(this.canvas.style.left=-e/2+"px",this.canvas.style.top=-t-90+"px"),this.canvas.style.transform=`translate3d(${o}px, ${a}px, 10px)`,this.offset={x:o,y:a}}render(){if(!this.five.renderer||!this.wrapper)return;const{scale:e,context:t,width:i,height:o}=this,r=this.renderCenter.clone().project(this.five.camera),a=this.five.renderer.getSize(new me),s=1,l=i/e,u=o/e,c=s*e,v=(r.x+1)/2*a.x,d=(r.y+1)/2*a.y,m=this.five.getPixels(v-l/2,d-l/2,l,u,c),p=Math.floor(i*s),h=Math.floor(o*s);Sa(m,p,h);const f=new ImageData(p,h);f.data.set(m),t.putImageData(f,0,0)}initStyle(){const e=this.canvas;e.classList.add("five-plugin__magnifier"),e.style.position="absolute",e.style.pointerEvents="all",e.style.borderRadius="50%",e.style.zIndex="99";const t=1;e.setAttribute("width",(this.width*t).toString()),e.setAttribute("height",(this.height*t).toString()),e.style.border="2px solid rgba(255,255,255,0.20)",e.style.width=this.width+"px",e.style.height=this.height+"px",e.style.top=this.config.initialPosition.top,e.style.left=this.config.initialPosition.left,e.style.transform="translate(0,0,100px)",this.config.dragEnabled&&(this.canvas.style.cursor="pointer")}}class Xa{constructor(e){Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onModelLoaded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.five.model||(this.edges=this.five.model.getEdges())}}),this.five=e,this.five.model.loaded?this.onModelLoaded():this.five.on("modelLoaded",this.onModelLoaded)}dispose(){}getAdsorbentPoint(e){if(this.edges.length===0)return null;let t=1/0,i;return this.edges.forEach(o=>{const r=o.closestPointToPoint(e.point,!0,new O),a=r.distanceTo(e.point);a<t&&(i=r,t=a)}),t>.1?null:i||null}}function Me(){return((1+Math.random())*65536|0).toString(16).substring(1)}function Zt(){return(Me()+Me()+"-"+Me()+"-4"+Me().substr(0,3)+"-"+Me()+"-"+Me()+Me()+Me()).toLowerCase()}class zt{constructor(){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:Zt()}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:[]})}push(e){const t=this.getNext(e);if(!t)throw new Error("\u5F53\u524D\u7EBF\u6BB5\u4E8E\u4E0A\u4E00\u6761\u7EBF\u6BB5\u65E0\u6CD5\u6784\u6210\u6298\u7EBF");return this.lines.push(t.line),this.points.push(...t.points),this.lines.length}pop(){const e=this.lines.pop();return this.lines.length===0?this.points.slice(0,this.points.length):this.points.pop(),e}getNext(e){const t=this.points.slice(-1)[0];if(!t)return{line:e,points:e.points};if(!e.points.includes(t))return null;const i=e.points.find(o=>o!==t);return i?{line:e,points:[i]}:null}toJson(){return{id:this.id,lines:this.lines.map(e=>e.id),points:this.points.map(e=>e.id)}}toCompletelyJson(){return{id:this.id,points:this.points.map(e=>e.toJson()),lines:this.lines.map(e=>e.toCompletelyJson())}}}const Wa=1,Ra=3,Ba=new Ue(16777215),Ya=new Ue(6522623),_a=new Ue(16777215),Za=new Ue(6522623),Ua=6,qa=8,Ja="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMAG/Py2baba05un7UgfgAAAHJJREFUKM9joBpgLHVSCRdA4metAoJlCJHmVWBgAeNzroKCCVCBLpjACqgJVjCBxRBT2FbBQQJYQAohsBAsUIUQWA4WiEIILAULeCEEloAFtBACizAEMLRgGIphLabDMJ2O6TlM72MGECIIMQIZIxqoBQCPvpJ/e9FaAAAAAABJRU5ErkJggg==",pi=new dt().load(Ja),gi={pointTexture:pi,pointSize:Ua,lineWidth:Wa,lineColor:Ba,pointColor:_a,lineRenderOrder:20,pointsRenderOrder:20};Object.assign(Object.assign({},gi),{dashed:!0});const Va={pointTexture:pi,pointSize:qa,lineWidth:Ra,lineColor:Ya,pointColor:Za,lineRenderOrder:10,pointsRenderOrder:10};function Qa(n,e,t){var i,o,r,a,s;const l=(i=t==null?void 0:t.lineWidth)!==null&&i!==void 0?i:2,u=(o=t==null?void 0:t.lineColor)!==null&&o!==void 0?o:new Ue(16777215),c=(r=t==null?void 0:t.pointSize)!==null&&r!==void 0?r:5,v=(a=t==null?void 0:t.lineRenderOrder)!==null&&a!==void 0?a:10,d=(s=t==null?void 0:t.lineRenderOrder)!==null&&s!==void 0?s:20,m=new eo(n,e);m.setMaterial({linewidth:l,color:u}),m.line.material.depthTest=!1,m.line.material.transparent=!0,m.line.renderOrder=v,m.points.renderOrder=d;const p=m.points.material;return p.depthTest=!1,p.size=c,(t==null?void 0:t.pointColor)&&p.color.set(t.pointColor).convertSRGBToLinear(),(t==null?void 0:t.pointTexture)&&(p.map=t.pointTexture),m}function Sn(n,e){const[t,i]=n.points,o=e==="light"?Va:gi,r=Qa(t.position,i.position,o);return r.name="normalLine_"+n.id,r}function De(n){const{x:e,y:t,z:i}=n;return!(Math.abs(e)>1||Math.abs(t)>1||Math.abs(i)>1)}function Ka(){const n=document.createElement("div");return n.setAttribute("style","backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px);"),n.style.padding="3px 6px",n.style.lineHeight="1",n.style.textAlign="center",n.style.transform="translate(-50%, -50%)",n.style.borderRadius="100px",n.style.fontSize="14px",n.style.color="#fff",n.style.background="rgba(195,195,195,0.70)",n.style.border="0.5px solid rgba(255,255,255,0.6)",n.style.pointerEvents="all",n.style.cursor="pointer",n}function $a(n){const e=document.createElement("div");return e.id="distance_"+n.id,e.classList.add("five-plugin-measure__distance"),e.style.opacity="0",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.transform="translate3d(0, 0, 0)",e.style.transformOrigin="left top",e}function es(n){function e(){var p;(p=n.clickCallback)===null||p===void 0||p.call(n,m)}function t(){if(v)return v.highlight();u.style.border="0.5px solid #95AEFF",u.style.background="linear-gradient(90deg, #95AEFF 0%, #6386FF 100%)"}function i(){if(v)return v.unHighlight();u.style.border="0.5px solid rgba(255,255,255,0.6)",u.style.background="rgba(195,195,195,0.70)"}function o(p){const h=p.getElement();if(!h)return;const f=h.clientWidth,b=h.clientHeight;if(s.points.length<2)return;const[g,P]=s.points,A=g.position.clone().project(p.camera),w=P.position.clone().project(p.camera),x=A.clone().lerp(w,.5),N=new me(A.x*f,A.y*b),L=new me(w.x*f,w.y*b);if((()=>!(Math.abs(A.z)>1||Math.abs(w.z)>1||!De(A)&&!De(w)||!De(x)||N.distanceTo(L)<20))()===!1){c.style.opacity="0",c.style.pointerEvents="none";return}const k=(x.x+1)/2*f,V=-(x.y-1)/2*b,Y=-(Math.atan((N.y-L.y)/(N.x-L.x))*180)/Math.PI;c.style.transform=`translate(${k}px, ${V}px) rotate(${Y}deg)`,c.style.opacity="1",c.style.pointerEvents="all",v&&v.update({line:s.toCompletelyJson(),polyline:s.getPolyline().toCompletelyJson()});const S=g.position.clone().distanceTo(P.position).toFixed(2)+"m";u.innerText!==S&&(u.innerText=S)}function r(p){p.appendChild(c),c.addEventListener("click",e)}function a(){u.removeEventListener("click",e),c.remove()}const{line:s}=n,l=s.id,u=Ka(),c=$a(s),v=n.userDistanceItem,d=new O(0,0,0),m={lineID:l,ndcPosition:d,update:o,appendTo:r,remove:a,highlight:t,unHighlight:i};return(v==null?void 0:v.element)?c.appendChild(v.element):c.appendChild(u),m}class Ee{constructor(e,t,i){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selected",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"line"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lightMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distanceItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"polyline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=Zt(),this.model=i,e.id===t.id)throw new Error("\u65E0\u6548\u7684\u7EBF\u6BB5, \u4E00\u4E2A\u70B9\u65E0\u6CD5\u6784\u6210\u7EBF\u6BB5");this.hook=new Fe,this.points=[e,t],this.mesh=Sn(this,"normal"),this.lightMesh=Sn(this,"light"),this.distanceItem=es({line:this,clickCallback:()=>this.hook.emit("selected",this),userDistanceItem:this.model.params.userDistanceItemCreator?this.model.params.userDistanceItemCreator():void 0}),e.lines.push(this),t.lines.push(this)}clear(){this.selected=!1,this.polyline=void 0}getPolyline(){if(this.polyline)return this.polyline;const e=this.model.polylines.find(i=>i.lines.includes(this));if(this.polyline=e,e)return e;const t=new zt;return t.push(this),t}findAnotherPoint(e){return this.points.find(({id:t})=>t!==e.id)}toJson(){return{id:this.id,points:this.points.map(({id:e})=>e)}}toCompletelyJson(){return{id:this.id,points:this.points.map(e=>e.toJson())}}clone(){return new Ee(this.points[0].clone(),this.points[1].clone(),this.model)}}function Ye(n,e){for(let t=0,i=e.length;t<i;t++)if(n===e[t])return e.splice(t,1)[0]}class be{constructor(e){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"position",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"point"}),this.id=Zt(),this.lines=[],this.position=new O,e instanceof O?this.position.copy(e):this.position.fromArray(e)}toJson(){return{id:this.id,lines:this.lines.map(({id:e})=>e),position:this.position.toArray()}}addLine(e){this.lines.push(e)}removeLine(e){Ye(e,this.lines)}clone(){return new be(this.position)}}class Ut{constructor(e){Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"polylines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:new Fe}),this.params=e}addLine(e){const[t,i]=e.points;if(!t||!i)return this;this.includes(t)||this.points.push(t),this.includes(i)||this.points.push(i),this.lines.push(e);const o=this.polylines.find(r=>!!r.getNext(e));if(o)o.push(e);else{const r=new zt;r.push(e),this.polylines.push(r)}this.hook.emit("lineAdded",e)}removeLineByID(e){const t=this.getLineByID(e);t&&this.removeLine(t)}removeLine(e){const t=this.polylines.find(r=>r.lines.includes(e));if(t){if(t.lines.slice(-1)[0]!==e)throw new Error("\u4E0D\u80FD\u4ECE\u4E2D\u95F4\u5220\u9664\u7EBF\u6BB5");t.pop(),t.lines.length===0&&Ye(t,this.polylines)}const[i,o]=e.points;return i.lines.length===0&&Ye(i,this.points),o.lines.length===0&&Ye(o,this.points),Ye(e,this.lines),e.clear(),this.hook.emit("lineRemoved",e),this}mergeModel(e){e.lines.forEach(t=>this.addLine(t))}includes(e){if(e.type==="point")return this.points.find(({id:t})=>t===e.id)!==void 0;if(e.type==="line")return this.lines.find(({id:t})=>t===e.id)!==void 0}getPointByID(e){return this.points.find(({id:t})=>t===e)}getLineByID(e){return this.lines.find(({id:t})=>t===e)}getClosestPoint(){}parse(e){const t=e.points.map(({id:r,position:a})=>{const s=new be(a);return s.id=r,s}),i=e.lines.map(r=>{const[a,s]=r.points,l=this.getPointByID.call({points:t},a),u=this.getPointByID.call({points:t},s);if(!l||!u)throw new Error("\u7EBF\u4E0A\u7684\u70B9\u4E0D\u5B58\u5728");const c=new Ee(l,u,this);return c.id=r.id,c}),o=e.polylines.map(r=>{const a=new zt;return r.lines.forEach(s=>{const l=i.find(({id:u})=>u===s);l&&a.push(l)}),a});return this.points.splice(0,this.points.length,...t),this.lines.splice(0,this.lines.length,...i),this.polylines.splice(0,this.polylines.length,...o),this}toJson(){return{points:this.points.map(e=>e.toJson()),lines:this.lines.map(e=>e.toJson()),polylines:this.polylines.map(e=>e.toJson()).filter(e=>e.lines.length>0)}}}const et=n=>n.preventDefault();class qt{constructor(e){var t,i;Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMobile",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mouseGroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fiveHelper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"magnifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"userDistanceItemCreator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"updateDistanceUI",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.model.lines.forEach(r=>r.distanceItem.update(this.five))}}),this.five=e.five,this.hook=e.hook,this.model=e.model,this.magnifier=e.magnifier,this.container=e.container,this.fiveHelper=e.fiveHelper,this.isMobile=(i=(t=e.openParams)===null||t===void 0?void 0:t.isMobile)!==null&&i!==void 0?i:!1,this.userDistanceItemCreator=e.userDistanceItemCreator,this.group=e.group,this.mouseGroup=e.mouseGroup;const o=this.five.getElement();o&&(o.addEventListener("touchstart",et),o.addEventListener("contextmenu",et))}removeLine(e){this.group.remove(e.mesh,e.lightMesh),e.distanceItem.remove(),this.five.needsRender=!0}updateMouseGroup(e,t){if(!e)return this.mouseGroup;const i=this.fiveHelper.getAdsorbentPoint(e),o=i||e.point;if(this.mouseGroup.position.copy(o),t)this.mouseGroup.quaternion.copy(t.quaternion);else if(e.face){const a=e.face.normal.clone().multiplyScalar(.05),l=e.point.clone().add(a).clone().add(a);this.mouseGroup.lookAt(l)}return this.mouseGroup}dispose(){this.disposed=!0,this.magnifier.remove(),this.model.lines.forEach(t=>this.removeLine(t));const e=this.five.getElement();e&&(e.removeEventListener("touchstart",et),e.removeEventListener("contextmenu",et))}}function Ct(n){const{x:e,y:t}=n.center,{clientWidth:i,clientHeight:o}=n.target,r=n.target.getBoundingClientRect(),a=new me(e,t).sub(new me(r.left,r.top)),s=new me(a.x/i*2-1,-(a.y/o)*2+1);return{point:a,ndcPoint:s}}function At(n,e){const t=Ct(e).ndcPoint,i=new ze;return i.setFromCamera(t,n.camera),n.model.intersectRaycaster(i)}class tt extends qt{constructor(e){var t;super(e);Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"edit"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:new Ut({userDistanceItemCreator:this.userDistanceItemCreator})}),Object.defineProperty(this,"pressPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasAppendDashed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hasAppendMouseGroup",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"fiveElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"dashed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hammer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onIntersectionUpdate",{enumerable:!0,configurable:!0,writable:!0,value:Bt((o,r)=>{var a;this.hasAppendMouseGroup===!1&&(this.group.add(this.mouseGroup),this.magnifier.appendTo(this.container),this.hasAppendMouseGroup=!0);const s=this.updateMouseGroup(o,r).position;(a=this.pressPoint)===null||a===void 0||a.position.copy(s),this.updateDashed(),requestAnimationFrame(()=>this.magnifier.renderWithPoint(this.mouseGroup.position)),this.five.needsRender=!0},20)}),Object.defineProperty(this,"revoke",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.model.lines.length===0&&this.lastPoint){this.lastPoint=null,this.hasAppendDashed=!1,this.dashed.distanceItem.remove(),this.group.remove(this.dashed.mesh),this.hook.emit("anchorChange",null),this.five.needsRender=!0;return}if(this.model.lines.length===0&&!this.lastPoint||!this.lastPoint)return;const o=this.model.lines[this.model.lines.length-1],r=o.findAnotherPoint(this.lastPoint);!r||(this.lastPoint=r,this.hook.emit("anchorChange",r.position),this.group.remove(o.mesh),this.model.removeLine(o),this.hasAppendMouseGroup=!1,this.mouseGroup.position.copy(this.lastPoint.position),this.group.remove(this.mouseGroup),o.distanceItem.remove(),this.updateDashed(),this.magnifier.remove(),this.five.needsRender=!0)}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.magnifier.remove(),this.group.remove(this.mouseGroup),this.hasAppendMouseGroup=!1,this.lastPoint&&(this.mouseGroup.position.copy(this.lastPoint.position),this.updateDashed())}}),Object.defineProperty(this,"onLineChanged",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.hook.emit("editedLineChange",this.model.lines.map(o=>o.toCompletelyJson()))}}),Object.defineProperty(this,"onPress",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const[r]=At(this.five,o);if(!r||!r.face)return;const a=new be(r.point);this.pressPoint=a,this.onIntersectionUpdate(r)}}),Object.defineProperty(this,"onPan",{enumerable:!0,configurable:!0,writable:!0,value:o=>{if(!this.pressPoint)return;const[r]=At(this.five,o);!r||!r.face||this.onIntersectionUpdate(r)}}),Object.defineProperty(this,"onPanEnd",{enumerable:!0,configurable:!0,writable:!0,value:o=>{!this.pressPoint||this.onTap(o)}}),Object.defineProperty(this,"onTap",{enumerable:!0,configurable:!0,writable:!0,value:o=>{this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh)),this.hasAppendDashed=!0;const[r]=At(this.five,o);this.updateMouseGroup(r);const a=new be(this.mouseGroup.position),s=this.lastPoint;if(a&&(this.lastPoint=a),a&&s){const l=new Ee(s,a,this.model);l.distanceItem.appendTo(this.container),this.model.addLine(l),this.group.add(l.mesh),l.distanceItem.update(this.five)}this.pressPoint=void 0,this.hasAppendMouseGroup=!1,this.magnifier.remove(),this.group.remove(this.mouseGroup),this.updateDashed(),this.five.needsRender=!0,this.hook.emit("anchorChange",a.position)}}),Object.defineProperty(this,"onWantsTapGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>!1}),Object.defineProperty(this,"onWantsToMoveToPano",{enumerable:!0,configurable:!0,writable:!0,value:()=>!1}),Object.defineProperty(this,"onWantsPanGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.pressPoint?!1:void 0}),Object.defineProperty(this,"onCameraUpdate",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.updateDistanceUI(),this.dashed.distanceItem.update(this.five)}}),Object.defineProperty(this,"updateDashed",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.lastPoint||(this.dashed.points[0].position.copy(this.lastPoint.position),this.dashed.points[1].position.copy(this.mouseGroup.position),this.dashed.mesh.setPoints(this.lastPoint.position,this.mouseGroup.position),this.dashed.distanceItem.update(this.five))}}),this.dashed=new Ee(new be([0,0,0]),new be([0,0,0]),this.model),this.dashed.mesh.setMaterial({dashed:!0,dashScale:100}),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsPanGesture",this.onWantsPanGesture),this.five.on("wantsTapGesture",this.onWantsTapGesture),this.five.on("wantsToMoveToPano",this.onWantsToMoveToPano),this.five.on("intersectionOnModelUpdate",this.onIntersectionUpdate),this.model.hook.on("lineAdded",this.onLineChanged),this.model.hook.on("lineRemoved",this.onLineChanged);const i=this.five.getElement();if(i){this.fiveElement=i;const o=new Nt(i);this.hammer=o,o.on("tap",this.onTap),o.on("pan",this.onPan),o.on("press",this.onPress),o.on("panend",this.onPanEnd)}(t=this.fiveElement)===null||t===void 0||t.addEventListener("mouseleave",this.onMouseLeave),this.hook.emit("anchorChange",null),this.five.refresh()}dispose(){var e,t;super.dispose(),this.group.remove(this.mouseGroup,this.dashed.mesh),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsPanGesture",this.onWantsPanGesture),this.five.off("wantsTapGesture",this.onWantsTapGesture),this.five.off("wantsToMoveToPano",this.onWantsToMoveToPano),this.five.off("intersectionOnModelUpdate",this.onIntersectionUpdate),this.model.hook.off("lineAdded",this.onLineChanged),this.model.hook.off("lineRemoved",this.onLineChanged),(e=this.hammer)===null||e===void 0||e.destroy(),(t=this.fiveElement)===null||t===void 0||t.removeEventListener("mouseleave",this.onMouseLeave),this.magnifier.dispose(),this.dashed.distanceItem.remove(),this.five.needsRender=!0}getEditingLines(){return this.model.lines}}const ts=`
<svg class="fpm__delete-icon" width="16px" height="17px" viewBox="0 0 16 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <linearGradient x1="22.185491%" y1="100%" x2="66.8316686%" y2="6.67239121%" id="linearGradient-1">
            <stop stop-color="#FFFCFC" stop-opacity="0.6" offset="0%"></stop>
            <stop stop-color="#FFFFFF" offset="100%"></stop>
        </linearGradient>
    </defs>   
     <path fill="url(#linearGradient-1)" fill-rule="nonzero" transform="translate(2.16 2.16)" d="M11.2979686,2.71818182 C11.611378,2.71818182 11.8654465,2.97561809 11.8654465,3.29318182 C11.8654465,3.58428191 11.6519584,3.82485822 11.374972,3.86293275 L11.2979686,3.86818182 L10.464,3.868 L9.7236795,10.6246222 C9.64153248,11.3737453 9.04854423,11.9512142 8.32013277,12.0165596 L8.18206028,12.0227273 L3.68338622,12.0227273 C2.89302127,12.0227273 2.22904821,11.4205655 2.141767,10.6246222 L2.141767,10.6246222 L1.4,3.868 L0.567477876,3.86818182 C0.254068499,3.86818182 0,3.61074555 0,3.29318182 C0,3.00208173 0.213488114,2.76150541 0.49047449,2.72343089 L0.567477876,2.71818182 L11.2979686,2.71818182 Z M9.322,3.868 L2.542,3.868 L3.26978106,10.4976259 C3.28762252,10.6603274 3.39528004,10.7928487 3.53932022,10.8467307 L3.61412483,10.866894 L3.68338622,10.8727273 L8.18206028,10.8727273 C8.39410941,10.8727273 8.57224853,10.7111717 8.59566544,10.4976259 L8.59566544,10.4976259 L9.322,3.868 Z M8.16824216,0 C8.48165153,0 8.73572003,0.257436269 8.73572003,0.575 C8.73572003,0.866100087 8.52223192,1.1066764 8.24524554,1.14475093 L8.16824216,1.15 L3.69720434,1.15 C3.38379497,1.15 3.12972647,0.892563731 3.12972647,0.575 C3.12972647,0.283899913 3.34321458,0.0433235966 3.62020096,0.00524907226 L3.69720434,0 L8.16824216,0 Z"></path>                 
</svg>
`,Fn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTciIGhlaWdodD0iMjUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxMC43MDYlIiB5MT0iNDIuNzQ0JSIgeDI9Ijg5LjA2NCUiIHkyPSI1Ny4yMDglIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii4zMDgiIG9mZnNldD0iNDkuNTY5JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iLS4yNSIgeT0iLS4yNSIgd2lkdGg9IjU3LjUiIGhlaWdodD0iMjMuNSIgcng9IjExLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEpIiBmaWxsPSIjMkMyQzJDIiBzdHJva2U9InVybCgjcHJlZml4X19hKSIgc3Ryb2tlLXdpZHRoPSIuNSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsLW9wYWNpdHk9Ii4zMDMiLz48L3N2Zz4=",ns="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAABACAYAAADBAT+LAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAiKADAAQAAAABAAAAQAAAAABHi6MyAAAWC0lEQVR4Ae1dfaxl1VVf9955M8www8wwFQpYSpAEEMow0WpBpFGDbUxTjCY2RauJjR2skFbU1PiRQLRa/aM0YrEoTbF/FFsTSWppUyXYELW0FNQAQpWPwkAp4wDDMMMwH+9ef7+192+ffde59513eY+veezHOWudtddee62111p7v3PvPMxeb697YAEP9BboW5au0WjEOfrVtSrjNZ14fZFfz8TZaljjkkPIVo+t+2p5NW/NX4+v6ZJT90d5kjkCk65hhZNWPxNnm8SrPkJe87gO4zqI64V87Qfc1+v12PeSNS7WsrccFAMI7tstf7bWbv3kObZ/z+k2PHSyHT70ZhsNN6PvaMB1cA91oHPpqOzkEfAecEK20N0izMgfxWnmPFuad8H5k1rNfWGJPRgwwg8hm3DC1ML4yp7+AIHRf95Wze23VWuesaM3P24bjv+enbz1EXvnRx6Gr5+DCF67ESwMoGVtSeFlEJmDgvL6dtWPHWtP/ddFduiFtyMIzoZbVtkQvujn6YQTspEuGp+TK5Mb+dy4Nw0Q77TxHFM35iDrgfJSOCFbV3+nPpAhmS6QatLWKfZ16d85H+TSZyNUlXWb77cTT/+G/dQf3GnbfmYnJt2N6zkES54cT0toecWWIAFDc3D07Yrv22b7d19io/m3gcwKkpp8pdmC/5IjxcQhwjUgy5kGIntbPih1RYiC1Ec4qbUFgkuzEgWurJ8wXpyS3iWuiNaACTJrUpI/bxvecKdt/bmb7Zc+dT+6n8a15EBZpAa1Nm18dNm6H0a1+DU46Zx2r1OSCcmpIMiZhGwtBwcXhsdO/g4Px4oUMzYpNcs9KhjHvrz2H3XMvbbtZ79gv3LDvVBkF6rJgajQYp+XFCCjD9gbbNC/HNvDRU0VwNTde+7C+nWPDw73Wi4aZMf1Utc0czv5g4BWgFdzvors33jc1+zij37Ozn//49CKZxQaOlOb5rFOIaPtq86z3vxVYDy6nB+mnQm69tx4BuhaYO335QwBu3WOoebCCSe1ON+S5XXM/0ra3+/vszN/+mq77MvfgiueQpDoJDbJMy3aFA+2+MYIo+2D9yI4ft1GPS3RWH/3QysDoYdo3aNn55BsQrbWlpbIU+9LHR8FL7e8KD8893AMP+6Mv7Wr/vtL6GGQ8FfmRbWZAmR0pa2279pvI0PfObae7T2cC0HZaUGEabbxXioaOLoc2OrPU2mCIK915oACihHOHtjjY7GV0zo75pEKfH6t2L9hyy32oVuut+/fuuhzSfGoG77AbfThTZvshT1/Asec1WaLKx7Wu7UC8m7xuHs5sbn0KCBO0FZhjBLZFQ2E3iLD2Gg8zDh/FBeHR3mvoP1za++z917953b+B3agknS+N5HDooPGnnPl+ASIP+gdnXs8HCYeDhCuM0HnnhzGxwoAyxCoyNu84F3yXOnq1sUf+6uhjkZ7Yn8cH/ln7V9u+/tr7rffue1KO+WtrCQLbjeLC5BL+7+LBXlH5YfOlKl4ib7C/DNnbFC/9fgK2zOrPhPsX7fxVvv4M5+EpGcRJFMPrp0BMrp08At48bUdVRe8nIhNeM5gp4vm/bjJh3xuNc5bMQQDJKqIB7dGuCgNnaZO4NdYQrbWmSHM320fJGmMC4QiUprPcULSxlpgkCxCNIl6qe3feNJn7GM7vogZp75Qk8tcr3gbXTr3I/iM6KPu0PHOYGBZ7Lxi48ztJ7JJRLu36VtQvUkDMy3Kjx6fVd/WVFJeCsYJWwPGCV3sUfz46O6nKH+K/fzt5sRz/9j+8K5voorww79Wk4GtjtFvbNhi83s/jY6jW51xD4175AgK9ZANhGzCCf0Z9PoM4cTqFt9TdI2XLMJJ8meVV6kyET2i7O89bxd+8EN2yV8+Puk8Mv09xqF927GIa3ENkW+4BIHzjRxphP52DnEgyMrAgBGsca8a6Odo4oTph3PwJ82VAg7yQUnjG4hoc05BPgknrPHEmcYSL/Ikl2NxuYwM/cltBUYouwWPNPuxxrd/5n3wwxrkFxZlvE0MkNH2ua3w84VNACAzPQCYoZ6lFaST4Tw62qHjeBaEQwtO2qSLSjl/1k64eCWbsMZLf8d48QkykIjngPLPc4lT1xwAgrJb8Ei0/+D+C+yqs/n6ovX1jxYBTPDdofd5QLCUsnGnIJ53DFD4wB4xZLwOwEl4TeOQ0oI8p2fZhadCJCdDZjnqo2c7uYQTTm0LdMnWlWT///3Pe+Cqu1FFDsNtxfetCjK6zN4CD+N9R5VhdZlXma4heZ2HYyZcXsJB9/KdK4Bo5BeufirIH8IaV389hri/X8mQOPkEibMaCHplyDTZQBlj+tNBoKnCeB91wbhJV2s8x1aXz41nwhoXT00jXttc42l00k1jKGM57J8/fKb90Zl8zzUWE+0Kcrj/8/ALncPPVAHRuKswGX134TMuJiAhGzN1iDFNxo5zeLK6gxM/Byenp+cyH+dF41boa+QDyUtuLo4IxNHIhOZ34EWfTMvc0JtOB58McGllJORAfraZVLcbtJVm/5MPvRvW34OrfI1xLEDS6/Rnt9FH7py8DHkh4OG8IHK8IJeIC5CXKgFfYdIwjIuH1SNkS3iCfNbiJRnt/iTQR/I2gT8EAHXhVFnBFLjjAZyCLenj4QdeD1ofmoJjpdk/f+hcu/6STcijndpmxgLEDuy+0GsG36wNPeuyh+G0ZpG4gFwQZl12cMZLBdGwDJ0LeOKGKOGL7Pfpq1unvC79XFbRpthKm9lox8q03+zeL50HD/BTX38FP7bf2Kh/3th+Nm2P1P5OWO9/4vdM5JbDysKwyPjUfv7m4OHDLQaXbzUZEg9XLbPGxVfrRJw8govhpxzJIK79npA/7BMUnyD56zlqXPrVNMdfRfYf3P+jWIPSSgUZXX7aGjv04GkwHAvCipAhWbvOCJFfYx26gHF5Oq8Q5u6csf7o83MJKDc1ZjbxlOF+57aVe7n1iUaSP+VF9Gd0UlQuEMDHz0xd+q4k+4fzp9lfb1+NzWEebho1FWT+gTPhQHzR2L3IrKXLuYC8hBO2r3SYY7Vg9qSxgkVOJa/OGuLxqrPQs45zejDluYUT1njRDWo6Tsjg4LgEHccYQR9P3VwWIXmTDSvRfsbAfZ8/w/2FW6kgNhz8APyRHOm9Sl4+CBesacC1Xy+4h1djmeE8BjY1QHhmAnBNqjFFh3ruKf3M+PS6n8ENWagYojlB4wSdGG51n3BBslb4kWb/wf2nwsD/oJVNgNj8CXBkCpD42Qc568YSrYMq6SzfXNIEmYTcw8lTLxDCITM04ZDm4100Spp1fumiQ7O/MUYl0JvjFGxVOHofgybPD70054uZP5l15Ng/PPxGuoGtCpD+CcVhvT4ch/8cJsbxOyqNfx1VFYc7FWOh7FiIGP+OQUqzPnDWDEJv7PYJ9MjJMo0k4Wk4Ag0LyHOGVlyyszyPa9xyfPtcKeAkAPNyFXPAUveRbOB8shWQbaXbb3YCzx90RRMgPdtYMp4LhAdfKHIlZ8LlJSDAQNyP7mBQcOT1p8dTciaPx4x28RhGyNYpH8q6pBwBrgfmnqoP53fhaf6Y4Zxz7PvWsjVXlJVuf6+3kS5iawJkaEdhwZNDh55dOGbmgOhhMYZDHOwUEFwurxaJv1SOUkGS9LF71Rflk68sNvAUQKw5k1uqDuRL8/MuGkfEgKPeonk/b2hZe7fF8axj1G+l2T8arkkOqgPEQBzlAGGJdafrmezAtWBydr2okuiQjlZVIUF4rjDanpTF2EAwH+WnGfhrZ5+L6gPb44fo6yFgCdmEE7L5WOCEbKOME05qI5cHDSRvhdtvfRSL5KqmgqQFSjmVAqDJamUnIVtc4ElOL1WFnaoegjWNuFesBPnYkq9xgs6TdEn80ks0BJvzik4u0TAdjO+jX/HCMEr2ky/ZzfFKgJVof/JEtcX08ScGRrbe6XJugnIY3KQtJ2Y8HJ4cmsW2ABcqLUPqEp4yXGOnzednHc6dM5wB5a9wsj4egN6fpPMsKpmZMjZ/3HIYHmnuyQGVEmbl2M9YqCsIfjvs2aUDficxfb2w5RAsDMtzcwZhCnJxAdkcrxYwUcM9OT8RhSfod2ZsHsFsZhNM4cQtKDevDsAznHxm4KKXES5Nw30mH6sZmx5iK93+4RABklqzxZg9g/U+1smeTchIZbS7uTqDMCz6WL4cHq0zQBbeAC5GGpRowiUg9Ov8Uc4QGCyaCwjjo74MgLoilLmnzBf7o7yVZz/+xkjylQIE7ygG34NbT03+R2e9RyuTBckkXxOnQ1PW8WlKYxCoCc+wdSbgIRET6D1MqgNNBeHcHCod4iE3nRkSlVNG/jIwC5CthM4Pumh8lt2CzsNbbkea/TZ8QqYpQJhxT9hwPpVcNxgshItpXXv+pDNEofk8aX/XltAlr3WG0PaXT53+2whw/VbCxaZlCgDiDDptMP6ceUBOAZ8hn7tal77FVm15fl6CBvkMFe3pkhf5edp23y2X/QMESPrOkALE7KiNj9renUopuERpBzRm6OQ9mkGWcj05VO7n+LRY/gFeEV1tUaAxO8toBWaGqSJQTpKZFrTJ5/hrOc8kqQI0/NRJGlFPnVuc7ttpClI+l/JU5k8a0A9sR7r9vdXfUYBoJczO/eUH4NR5d2wvO5iQF6NFkHjKxAQdR+QKMpp96TIkTocWSHmYljRfCFeBNZ2uZ1Ti8kzIkHLIm6Hj4BEkv3BCx4N836pAI3QcsgQpV7oT8lrZ9s/b3MH/5WKweQXhe3e0A/b1TzwIB58G57GPziRM60XHwZfeuNhsgqkvZa3oaZtKfMIlj4voNC48mnD1p2BBx5T5SaYquRsvzBJOyOYHaKcl+dS7j+CQ/rKFMDXZ2uizcu1/oHeNlT9Z1WwxdNS6Y/7T9j59KryJUsrFy1tGU2CTA2M/qb7IyduegXo7SZJwnQmiPCyPbx+E3jR3CaBU/rWFpQBLNPJzlOvgg3GD3l7xpH8OBAVgHK9hBa5g+/t2V3EDPVk9zNtZF9+FTGNuMjjYRbdXOGm4/PSQIXG+IynQ0xU8GRY5lbxUeXhPP35GAU7o5xTwCk6aj9sD5ytbBvlB87mA83Mj4oSOk5s0QF78EXQcvIKT9B2jOW+S7zYfQfZz7Vcd+034prRSQfI2s8fu/Nw9NjxwdnI2fTqheSYiu5WRzGw6uMlw7uvM8CwAToUfk0yAVCdKvfDlUhXw6SC7flPa4oc8ftJfvhAX+X2+Rj8uf9KVgdGe3/u9J/UXXVeY/UO7u3fN03vcE/lWAiQ/z9vxZ3zNHrv7LE+aZk8fW19kI9Yai6D194wGzbMYkrQYCqDIr7HNGQCDuKi5cV18jfPzzPwYJxkUEbcUhia3IIWo5pIK7TPNuLxoz5Fif2/un605frjzU246Cj+mL+SstcvXfdAO7T8Fq5T74cxy7iBz2KPLeYV8k1pcAa8h5F0u+ZAjHX1+yZY+nEe0CQpqrPTvsq+rP07xmrD/od51w49P0rzQ8reIDtmbz/knuBM/SBW/uOcTJ+Rez74MiafKkaDjcIggSwE3IEHfjCBL0OVqLkLyVtAXlg4mnRCX82RIPJ5hvGL42QC9vugN5Gg/32RYj6Us/6Gt/FlB9q+Z+0c6ObacwQ05V5Gj7YpN77Hnn9va9NSY6jchWnj0dRQtcYQ7F3pBhsAvXkK2OH7G/hY75CEWfNtME3Tcg4Dw2FKvJS3q32IIhK4JZuyP7IPBXb1Pzd8QJvVHajrWchV5wS74za+igx/7soogezNM+zmzq6kYrBYzXchO5yf0TG2gy61o3i8+0iucfd7P+dkDyEu4+stcWc8+opM0QscxVpBjaKug7BaU3YIz2Z3nd72ynsRrm2vc+diPH+cLeOnPsl6c/c/b8JibxoKgemhVEPWhkqy1q3/iLPv2bb8Ih4GsfZccwgnZGECiJcpsd43N8pLzYb5vD+nQq88nXHBMgTC+U5+YwbPKm3W+Lm8EeS+X/Z4kq/6md+3B+6ZpuFCAsG+9/f7pF9jTD1zEBColWDgh28TfMlKX3xn/KQPSfCkjEsXH46Y14vOs8iN/rPHN7JPtlW6Ei5k/zvdatX/Q/2Lv2sP/4jZPuU12WGZGFWGqbbLfOv5dtm/XlPMImbW6OWCiw+Ob1FaGlPDJ+nRleFawgOXmj/LKRFOQ16T93+pdZzdOMaiQ6YmpDecRWr7HPnL7V23N+kdTajN9wsVSRZr2Y44iTug4MlOQwcOMEyROLkHirDCCXm0gS9DnAo8g+VLmJ0jc9RCkboHf9QdNdrisSn/Zov4uGMe7ra9i+3vDh+0E+3s6vqstWEE0GJVkjd3+dyfYjdsvtgN7TxK9gfQIF5pwUgt7bOuM0NHPJaamhGz+5tYPyVn/eAaSLh58PgI3SQHa4occ0cjeahorDQLDa8j+nj1i/eENvWttbzBi4uOiAoQjPUh27dhiV5//k7brsbeUc4eLDQsS93zP/ryNOH906IzjA7vHpWgT5TuxuomZkC3qk6jlHs8YLKCiOVOQ92q1v2932hvtH3pXpr/9UexbAFl0gFAGgoSv5rfYn77th+zRO36cRdxl+2trVAH/BJWMGdent60zB/pFcwFhgWJARYeXapUXWLII2VoVxqnVLcy3VHmvdvu57Y76X+ldd/i2ygmLQmcKEErMB9ct9tn3n2Zf/+w7bHR4dWtBuhYs9seACglZgmlaAHTJiwsYA6gjXlrzR9dGeVGfrv6X1v4DNhje2Psr+3ZUezHPMwcIhSJIOG6z3XPz8faFy99qOx85I28gkytKzNBY0qOD4oLG8bHEtwIqVDDPIGhIyNY13pmqWyuAMKFkkC3+Gt+l/8tlvw3utrmNX46f0FaWdaIvKkAkFYGCf6KH/2/dTb/3Jvu3T2+z53aemPrCioXH4lw6eVLT/p5+s2kWo/AHgeGxJX+p8qKOCo6iT2QICoXHln6t4RigOdgnvMwXBIZH7LGP2Nz6W3vXPPtgFD3r85IChJPlarIB6LF281Un4s86n2m7drwJWTWo3oSOnzm6SnDMwJjBXSU79kevLPf8s8pf7vkpb8BXAYMHbG7zv9tfPPkwlyZ/bBK1m+l5yQGi2apA2WzfuWOzfeVjJ9mOb5xszzxxHAKlX84pHBAXMB5KYwmO/K2AgYO0TU2Uj37JkMI1VB8hW1xAySZkiwEct8B4qI7yWvNVm5RPEAyM/E33vA0Gj9vq9ffbKW+/xz58E3919X+vsBzB4aa6Pst8Q7CshshNuDbYvp3r7V+vP9YeumOj7X5sg+357gZ7Yd86fGttzg7igMvgiQ6MW0IMmMZBSfMu/riA0d5YwuOCdOkXx7dKfpgwBtzC8vkvDQ4hKnHYHOy1Af737KvXPmXrtjxp267YYe/+VX7BmB7xPzoXZlry47JVkGmaIFj4f+DmPwpfi4tnFl4MIP7KzIs68KJbBYEWXDTx1VBjah4eROkwQuFACx7p5OXFVvdFnP01r8bUtHpM3U86W81b9wufNl79rA68JGe4XJWCyr3eXvfAzB74f1jZ3oK55MvlAAAAAElFTkSuQmCC";class bi{constructor(e,t){Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"points",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cancelDelete",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"masking",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"onMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.content.style.backgroundImage=`url(${ns})`}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.content.style.backgroundImage=`url(${Fn})`}}),this.five=e,this.onClick=(t==null?void 0:t.onClick)||(()=>{}),this.cancelDelete=(t==null?void 0:t.cancelDelete)||(()=>{}),this.container.classList.add("fpm__delete"),this.container.style.opacity="0",this.container.style.position="absolute",this.container.style.left="0",this.container.style.top="10px",this.container.style.transform="translate3d(0, 0, 10px)",this.container.style.pointerEvents="none",this.container.style.transition="top 200ms ease, opacity 200ms ease",this.container.style.zIndex="99",this.content.classList.add("fpm__delete-content"),this.content.style.width="62px",this.content.style.height="26px",this.content.style.display="flex",this.content.style.alignItems="center",this.content.style.justifyContent="center",this.content.style.transform="translate(-50%, -50%)",this.content.style.color="#fff",this.content.style.fontSize="12px",this.content.style.lineHeight="17px",this.content.style.borderRadius="11px",this.content.style.backgroundSize="100% 100%",this.content.style.cursor="pointer",this.content.style.userSelect="none",this.content.style.backgroundImage=`url(${Fn})`,this.content.innerHTML=`
      ${ts}
      <span>\u5220\u9664</span>
    `,this.container.append(this.content);const i=this.content.querySelector(".fpm__delete-icon");i&&(i.style.width="16px",i.style.height="17px",i.style.marginRight="1px"),this.content.addEventListener("click",this.onClick),this.content.addEventListener("mouseenter",this.onMouseEnter),this.content.addEventListener("mouseleave",this.onMouseLeave),this.masking.setAttribute("style","position: absolute;top: 0;left: 0;bottom: 0;right: 0;pointer-events: none;"),this.masking.addEventListener("click",this.cancelDelete),this.masking.addEventListener("touchstart",this.cancelDelete)}dispose(){this.content.removeEventListener("click",this.onClick),this.content.removeEventListener("mouseenter",this.onMouseEnter),this.content.removeEventListener("mouseleave",this.onMouseLeave),this.container.remove(),this.masking.removeEventListener("click",this.cancelDelete),this.masking.removeEventListener("touchstart",this.cancelDelete),this.masking.remove()}appendTo(e){return e.append(this.container),e.append(this.masking),this}setLines(e){return this.lines=e,this.points=Array.from(new Set(this.lines.map(t=>[t.points[0],t.points[1]]).flat(1))),this}updatePosition(){if(this.lines.length===0)return this;const e=this.points.map(d=>d.position),t=e.map(d=>d.clone().project(this.five.camera));if(t.some(d=>Math.abs(d.z)>1))return this.hide();const i=t.map(d=>d.x),o=t.map(d=>d.y),r=(Math.min(...i)+Math.max(...i))/2,a=Math.max(...o),s=this.container.parentElement;if(!s)return this;const l=(r+1)/2*s.clientWidth,u=-(a-1)/2*s.clientHeight;let c=l,v=u-34;if(this.lines.length===1&&e.length===2){const d=(o[1]-o[0])/(i[1]-i[0]),p=-((o[1]+o[0])/2-1)/2*s.clientHeight;Math.abs(d)>.4&&(c=l+57,v=p)}return this.container.style.transform=`translate3d(${c}px, ${v}px, 10px)`,this.show()}hide(){return this.visible=!1,this.masking.style.pointerEvents="none",this.container.style.opacity="0",this.container.style.top="10px",this.container.style.pointerEvents="none",this}show(){return this.visible=!0,this.masking.style.pointerEvents="auto",this.container.style.opacity="1",this.container.style.top="0",this.container.style.pointerEvents="auto",this}}function vi(n,e){const t=n.x-e[0].x,i=n.y-e[0].y,o=e[1].x-e[0].x,r=e[1].y-e[0].y,a=t*o+i*r,s=o*o+r*r,l=a/s;let u,c;return l<0||is(e[0],e[1])?(u=e[0].x,c=e[0].y):l>1?(u=e[1].x,c=e[1].y):(u=e[0].x+l*o,c=e[0].y+l*r),new me(u,c)}function is(n,e){return n.x===e.x&&n.y===e.y}function os(n,e){const t=(n.x+1)/2*e.width,i=-(n.y-1)/2*e.height;return new me(t,i)}function rs(n,e,t,i){const o=n.getElement();if(!o||e.length===0)return null;const r={width:o.clientWidth,height:o.clientHeight},a=e.map(s=>{const l=s.position.clone().project(n.camera);return De(l)?{distance:os(l,r).distanceTo(t),point:s}:{distance:1/0,point:s}}).sort((s,l)=>s.distance-l.distance);return typeof i=="number"&&a[0].distance>i?null:a[0]}function kt(n){const e=(r,a,s)=>{const l=r.lines.find(c=>c.points.findIndex(({id:d})=>d===r.id)!==a);if(!l)return s;const u=l.points[a];return u?e(u,a,s.concat(l)):s},t=e(n.points[0],1,[]),i=e(n.points[0],0,[]);return t.concat(i)}class xt extends qt{constructor(e){super(e);Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"watch"}),Object.defineProperty(this,"deleteDom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"highlightedLines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fiveElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editPointState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hammer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onPanStart",{enumerable:!0,configurable:!0,writable:!0,value:i=>{var o;if(this.model.points.length===0||!this.fiveElement)return;const r=Ct(i).point,a=(o=rs(this.five,this.model.points,r,20))===null||o===void 0?void 0:o.point;if(!a){this.editPointState=void 0;return}const s={point:a,associatedLines:kt(a.lines[0])};this.hook.emit("wantsDragLine",{point:a.id,lines:s.associatedLines.map(({id:u})=>u)})||(this.editPointState=s,this.magnifier.appendTo(this.container),this.group.add(this.mouseGroup))}}),Object.defineProperty(this,"onPanEnd",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.editPointState||(this.editPointState.point.lines.forEach(i=>i.mesh.setMaterial({dashed:!1})),this.highlightLines(this.editPointState.associatedLines),this.editPointState=void 0,this.magnifier.remove(),this.group.remove(this.mouseGroup))}}),Object.defineProperty(this,"onPan",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(!this.editPointState||!this.fiveElement)return;const o=Ct(i).ndcPoint,r=new ze;r.setFromCamera(o,this.five.camera);const[a]=this.five.model.intersectRaycaster(r);!a||this.onIntersectionUpdate(a)}}),Object.defineProperty(this,"onIntersectionUpdate",{enumerable:!0,configurable:!0,writable:!0,value:(i,o)=>{if(!!this.editPointState){if(this.clearHighlightLines(),this.editPointState.point.position.copy(i.point),this.editPointState.point.lines.forEach(r=>{r.mesh.setPoints(r.points[0].position.clone(),r.points[1].position.clone()),r.lightMesh.setPoints(r.points[0].position.clone(),r.points[1].position.clone()),r.mesh.setMaterial({dashed:!0})}),this.updateDistanceUI(),this.magnifier.renderWithPoint(i.point),this.mouseGroup.position.copy(i.point),o)this.mouseGroup.quaternion.copy(o.quaternion);else if(i.face){const a=i.face.normal.clone().multiplyScalar(.05),l=i.point.clone().add(a).clone().add(a);this.mouseGroup.lookAt(l)}this.five.needsRender=!0,this.hook.emit("selectedChange",this.editPointState.associatedLines.map(r=>r.toCompletelyJson()))}}}),Object.defineProperty(this,"wantsPanGesture",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.editPointState)return!1}}),Object.defineProperty(this,"wantsTapGesture",{enumerable:!0,configurable:!0,writable:!0,value:i=>{const[o]=this.five.model.intersectRaycaster(i);if(!o)return;const r=this.five.camera,a=o.point.clone().project(r),s=this.container.clientWidth,l=this.container.clientHeight,u=new me(a.x*s,a.y*l),c=this.model.lines.map(p=>{const[h,f]=p.points,b=h.position.clone().project(r),g=f.position.clone().project(r);if(!De(b)&&!De(g))return null;const P=new me(b.x*s,b.y*l),A=new me(g.x*s,g.y*l);return{id:p.id,points:[P,A]}}).filter(p=>!!p);if(c.length===0)return;const d=c.map(p=>{const h=vi(u,p.points);return{id:p.id,distance:h.distanceTo(u)}}).sort((p,h)=>p.distance-h.distance)[0];if(d.distance>20)return;const m=this.model.lines.find(({id:p})=>p===d.id);if(!!m)return this.chooseLine(m),!1}}),Object.defineProperty(this,"chooseLine",{enumerable:!0,configurable:!0,writable:!0,value:i=>{const o=kt(i);this.highlightLines(o),this.five.needsRender=!0,this.hook.emit("selectedChange",o.map(r=>r.toCompletelyJson()))}}),Object.defineProperty(this,"lineRemoved",{enumerable:!0,configurable:!0,writable:!0,value:i=>{this.removeLine(i),this.hook.emit("selectedChange",this.model.lines.filter(o=>o.selected).map(o=>o.toCompletelyJson()))}}),Object.defineProperty(this,"onCameraUpdate",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.updateDistanceUI(),this.highlightedLines.length>0&&this.deleteDom.updatePosition()}}),Object.defineProperty(this,"deleteDomClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.highlightedLines[0].getPolyline().lines.slice().reverse().forEach(o=>this.model.removeLine(o)),this.highlightedLines=[],this.deleteDom.setLines([]).hide()}}),Object.defineProperty(this,"cancelDeleteClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.clearHighlightLines()}}),this.deleteDom=new bi(this.five,{onClick:this.deleteDomClickCallback,cancelDelete:this.cancelDeleteClickCallback}).appendTo(this.container),this.model.lines.forEach(i=>{i.distanceItem.appendTo(this.container),i.distanceItem.update(this.five),i.hook.on("selected",this.chooseLine),this.group.add(i.mesh)});const t=this.five.getElement();if(t){this.fiveElement=t;const i=new Nt(t);this.hammer=i,i.on("pan",this.onPan),i.on("panstart",this.onPanStart),i.on("panend",this.onPanEnd)}this.model.hook.on("lineRemoved",this.lineRemoved),this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.wantsTapGesture),this.five.on("wantsPanGesture",this.wantsPanGesture),this.five.needsRender=!0}dispose(){var e;super.dispose(),this.deleteDom.dispose(),this.model.hook.off("lineRemoved",this.lineRemoved),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsPanGesture",this.wantsPanGesture),this.five.off("wantsTapGesture",this.wantsTapGesture),this.five.needsRender=!0,this.hook.emit("selectedChange",[]),(e=this.hammer)===null||e===void 0||e.destroy()}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.deleteDom.setLines([]).hide(),this.model.lines.forEach(e=>{e.selected=!1,e.distanceItem.unHighlight(),this.group.remove(e.lightMesh)}),this.highlightedLines=[],this.five.needsRender=!0)}highlightLines(e){this.clearHighlightLines(),this.highlightedLines=e,this.deleteDom.setLines(e).updatePosition().show(),e.forEach(t=>this.highlightLine(t))}}class Xn extends qt{constructor(e){super(e);Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:"watching"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:new Ut({userDistanceItemCreator:this.userDistanceItemCreator})}),Object.defineProperty(this,"hasAppendDashed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"fiveElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mobileStartPoint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"mobileNowPoint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"highlightedLines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"deleteDom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dashed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onLineChanged",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.hook.emit("editedLineChange",this.model.lines.map(t=>t.toCompletelyJson()))}}),Object.defineProperty(this,"onWantsTapGesture",{enumerable:!0,configurable:!0,writable:!0,value:t=>{if(this.state==="editing")return!1;const[i]=this.five.model.intersectRaycaster(t);if(!i)return;const o=this.five.camera,r=i.point.clone().project(o),a=this.container.clientWidth,s=this.container.clientHeight,l=new me(r.x*a,r.y*s),u=this.model.lines.map(m=>{const[p,h]=m.points,f=p.position.clone().project(o),b=h.position.clone().project(o);if(!De(f)&&!De(b))return null;const g=new me(f.x*a,f.y*s),P=new me(b.x*a,b.y*s);return{id:m.id,points:[g,P]}}).filter(m=>!!m);if(u.length===0)return;const v=u.map(m=>{const p=vi(l,m.points);return{id:m.id,distance:p.distanceTo(l)}}).sort((m,p)=>m.distance-p.distance)[0];if(v.distance>20)return;const d=this.model.lines.find(({id:m})=>m===v.id);if(!!d)return this.chooseLine(d),!1}}),Object.defineProperty(this,"onWantsToMoveToPano",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state==="watching"}),Object.defineProperty(this,"onCameraUpdate",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.updateDistanceUI(),this.dashed.distanceItem.update(this.five)}}),Object.defineProperty(this,"updateMobileDashed",{enumerable:!0,configurable:!0,writable:!0,value:()=>{!this.mobileStartPoint||!this.mobileNowPoint||(this.dashed.points[0].position.copy(this.mobileStartPoint.position),this.dashed.points[1].position.copy(this.mobileNowPoint.position),this.dashed.mesh.setPoints(this.mobileStartPoint.position,this.mobileNowPoint.position),this.dashed.distanceItem.update(this.five))}}),Object.defineProperty(this,"updateMagnifier",{enumerable:!0,configurable:!0,writable:!0,value:t=>{this.magnifier.visible===!1&&this.magnifier.appendTo(this.container),requestAnimationFrame(()=>this.magnifier.renderWithPoint(t.position)),this.five.needsRender=!0}}),Object.defineProperty(this,"onGetStartPoint",{enumerable:!0,configurable:!0,writable:!0,value:t=>{this.mobileStartPoint=t}}),Object.defineProperty(this,"onGetEndPoint",{enumerable:!0,configurable:!0,writable:!0,value:t=>{const i=this.mobileNowPoint;if(this.removeLine(this.dashed),this.hasAppendDashed=!1,this.mobileStartPoint&&i){const o=new Ee(this.mobileStartPoint,i,this.model);o.distanceItem.appendTo(this.container),o.distanceItem.update(this.five),o.hook.on("selected",this.chooseLine),this.group.add(o.mesh),this.model.addLine(o)}this.mobileStartPoint=null,this.mobileNowPoint=null,this.five.needsRender=!0}}),Object.defineProperty(this,"onNowPointChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{if(this.state==="watching"){this.mobileNowPoint=t,this.updateMagnifier(t);return}this.hasAppendDashed||(this.dashed.distanceItem.appendTo(this.container),this.group.add(this.dashed.mesh),this.hasAppendDashed=!0),this.five.needsRender=!0,this.mobileNowPoint=t,this.updateMobileDashed(),this.updateMagnifier(t),this.five.needsRender=!0}}),Object.defineProperty(this,"onWillChangeState",{enumerable:!0,configurable:!0,writable:!0,value:(t,i)=>{this.state=i,this.state==="watching"?this.five.helperVisible=!0:this.five.helperVisible=!1}}),Object.defineProperty(this,"chooseLine",{enumerable:!0,configurable:!0,writable:!0,value:t=>{const i=kt(t);this.highlightLines(i),this.five.needsRender=!0,this.hook.emit("selectedChange",i.map(o=>o.toCompletelyJson()))}}),Object.defineProperty(this,"deleteDomClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.highlightedLines.forEach(t=>{this.removeLine(t),this.model.removeLine(t)}),this.highlightedLines=[],this.deleteDom.setLines([]).hide()}}),Object.defineProperty(this,"cancelDeleteClickCallback",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.clearHighlightLines()}}),this.deleteDom=new bi(this.five,{onClick:this.deleteDomClickCallback,cancelDelete:this.cancelDeleteClickCallback}).appendTo(this.container),this.dashed=new Ee(new be([0,0,0]),new be([0,0,0]),this.model),this.dashed.mesh.setMaterial({dashed:!0,dashScale:100}),this.dashed.mesh.name="dashLine",this.five.on("cameraUpdate",this.onCameraUpdate),this.five.on("wantsTapGesture",this.onWantsTapGesture),this.five.on("wantsToMoveToPano",this.onWantsToMoveToPano),this.model.hook.on("lineAdded",this.onLineChanged),this.model.hook.on("lineRemoved",this.onLineChanged),this.hook.on("getStartPoint",this.onGetStartPoint),this.hook.on("getEndPoint",this.onGetEndPoint),this.hook.on("nowPointChange",this.onNowPointChange),this.hook.on("willChangeState",this.onWillChangeState),this.five.refresh()}dispose(){super.dispose(),this.group.remove(this.mouseGroup,this.dashed.mesh),this.five.off("cameraUpdate",this.onCameraUpdate),this.five.off("wantsTapGesture",this.onWantsTapGesture),this.five.off("wantsToMoveToPano",this.onWantsToMoveToPano),this.model.hook.off("lineAdded",this.onLineChanged),this.model.hook.off("lineRemoved",this.onLineChanged),this.hook.off("getStartPoint",this.onGetStartPoint),this.hook.off("getEndPoint",this.onGetEndPoint),this.hook.off("nowPointChange",this.onNowPointChange),this.hook.off("willChangeState",this.onWillChangeState),this.hook.emit("selectedChange",[]),this.dashed.distanceItem.remove(),this.five.needsRender=!0}highlightLine(e){e.selected||(e.selected=!0,this.group.add(e.lightMesh),e.distanceItem.highlight(),this.five.needsRender=!0)}clearHighlightLines(){this.group.children.length!==0&&(this.deleteDom.setLines([]).hide(),this.model.lines.forEach(e=>{e.selected=!1,e.distanceItem.unHighlight(),this.group.remove(e.lightMesh)}),this.highlightedLines=[],this.five.needsRender=!0)}getEditingLines(){return this.model.lines}highlightLines(e){this.clearHighlightLines(),this.highlightedLines=e,this.deleteDom.setLines(e).updatePosition().show(),e.forEach(t=>this.highlightLine(t))}}const as="data:image/png;base64,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";function yi(){const n=new Ze,e=new Tt(.3,.3),t=new dt().load(as);t.encoding=Gt;const i=new je({map:t,transparent:!0,depthTest:!1}),o=new ve(e,i),r=new Fi;r.add(new Xi(new O(0,0,0),new O(0,0,.1)));const a=new Wi(r,8,.004),s=new je({color:3404271,depthTest:!1,transparent:!0,side:Xe});new ve(a,s);const l=new Ri(.01,20,20);return new ve(l,s).position.set(0,0,.1),n.name="mouse-current",n.add(o),n}const Et="M31.379 15.466a1.045 1.045 0 0 1-.92 1.076l-11.276.607a1.6 1.6 0 0 0-1.512 1.511l-.599 11.113a1.045 1.045 0 0 1-.92 1.075l-.164.008a1.183 1.183 0 0 1-1.123-.975l-.016-.164-.221-10.768a1.6 1.6 0 0 0-1.567-1.567l-11.3-.231-.165-.016a1.187 1.187 0 0 1-.964-.996l-.01-.127.007-.164c.061-.496.455-.876.958-.917l.118-.003 11.112-.599a1.6 1.6 0 0 0 1.498-1.37l.014-.142.607-11.276a1.045 1.045 0 0 1 1.076-.92c.573.015 1.055.46 1.13 1.019l.009.121.221 10.766a1.6 1.6 0 0 0 1.567 1.566l11.3.234a1.181 1.181 0 0 1 1.14 1.139z",ss="M27.1772552,8.15828895 C27.8664561,7.48070421 28.5574369,7.81156875 28.8336646,8.04968716 C29.1098924,8.28780557 29.3990219,9.110014 28.8256559,9.79263351 L28.7110903,9.9165024 L13.9697229,25.1399531 C13.3288458,25.7700285 12.3239388,25.8070917 11.6402346,25.2511429 L11.5159715,25.1399531 L3.7056151,18.0063788 C3.01641417,17.3287941 3.00699739,16.2207954 3.68458213,15.5315945 C4.32230894,14.8829348 5.3413021,14.8364368 6.03356826,15.3981178 L6.15936649,15.5105615 L12.6856594,21.9049888 L27.1772552,8.15828895 Z",ls="url(#fpm__main-b)",Pi="url(#fpm__main-c)",us=`
  <svg class="fpm__revoke-icon" width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="47.631%" y1="55.183%" x2="2.967%" y2="86.323%" id="fpm__revoke-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="5.297%" y1="43.016%" x2="38.238%" y2="79.932%" id="fpm__revoke-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M13.388 7.108c.552 0 1.005.42 1.06.957l.006.11v1.224c0 .921.745 1.667 1.666 1.667h7.184c5.804 0 10.509 4.616 10.509 10.309 0 5.595-4.544 10.15-10.21 10.305l-.3.004H8.924c-.917 0-1.66-.729-1.66-1.628 0-.846.658-1.541 1.5-1.62l.16-.008h14.38c3.972 0 7.191-3.158 7.191-7.053 0-3.81-3.08-6.916-6.933-7.049l-.257-.004H10.029l-.109-.005H8.212c-.245 0-.482-.085-.67-.237l-.09-.082a1.066 1.066 0 0 1-.065-1.422l.079-.086 5.175-5.077c.2-.195.468-.305.747-.305z"
      fill="url(#fpm__revoke-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__revoke-b)"
      stroke-width=".5"
    />
  </svg>
`,cs=`
  <svg class="fpm__exit-icon width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient x1="36.288%" y1="73.736%" x2="54.242%" y2="97.166%" id="fpm__exit-a">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".5" offset="100%" />
      </linearGradient>
      <linearGradient x1="100%" y1="47.234%" x2="24.047%" y2="47.234%" id="fpm__exit-b">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".005" offset="99.535%" />
        <stop stop-color="#FFF" stop-opacity="0" offset="100%" />
      </linearGradient>
    </defs>
    <path
      d="M22 7a1.5 1.5 0 0 1 .144 2.993L22 10h-9a1.5 1.5 0 0 0-1.493 1.356l-.007.144v17a1.5 1.5 0 0 0 1.356 1.493L13 30h9a1.5 1.5 0 0 1 .144 2.993L22 33h-9a4.5 4.5 0 0 1-4.495-4.288L8.5 28.5v-17a4.5 4.5 0 0 1 4.288-4.495L13 7h9zm6.317 7.755a1 1 0 0 1 .7.286l4.856 4.764a1 1 0 0 1-.7 1.713h-5.856V21.5h-8.032a1.5 1.5 0 1 1 0-3h6.365c.92 0 1.666-.746 1.667-1.667v-1.078a1 1 0 0 1 1-1z"
      fill="url(#fpm__exit-a)"
      fill-rule="nonzero"
      stroke="url(#fpm__exit-b)"
      stroke-width=".5"
    />
  </svg>
`,ds=`
  <svg class="fpm__main-icon" width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <mask id="fpm__main-icon-mask">
        <rect id="fpm__main-icon-mask-black" x="0" y="0" width="30" height="30" fill="black"></rect>
        <rect id="fpm__main-icon-mask-white" x="0" y="0" width="0" height="30" fill="white"></rect>
      </mask>
      <linearGradient id="fpm__main-a" x1="25.371%" y1="0%" x2="109.587%" y2="172.268%">
        <stop stop-color="#FFF" offset="0%" />
        <stop stop-color="#FFF" stop-opacity=".77" offset="44.051%" />
        <stop stop-color="#FFF" stop-opacity=".201" offset="100%" />
      </linearGradient>
      <radialGradient id="fpm__main-b" fx="50%" fy="50%" r="50.864%" gradientTransform="matrix(-.98302 0 0 -1 .992 1)">
        <stop stop-color="#2D7CFF" offset="0%" />
        <stop stop-color="#2D7CFF" stop-opacity=".3" offset="100%" />
      </radialGradient>
      <radialGradient id="fpm__main-c" fx="50%" fy="50%" r="50.864%" gradientTransform="matrix(-.98302 0 0 -1 .992 1)">
        <stop stop-opacity=".4" offset="0%" />
        <stop stop-opacity=".12" offset="100%" />
      </radialGradient>
    </defs>
    <g fill="none" fill-rule="evenodd">
      <circle fill="url(#fpm__main-a)" cx="30" cy="30" r="30" />
      <path
        class="fpm__main-icon-path"
        d="${Et}"
        fill="${Pi}"
        fill-rule="nonzero"
        transform="translate(14 14)"
      />
    </g>
  </svg>
`;var fs=`
  <style>
    .fpm__revoke {
      opacity: 0.3;
    }
    
    .fpm__revoke.enabled {
      opacity: 0.7;
    }
    
    .fpm__revoke.enabled:hover {
      opacity: 1;
    }
    
    .fpm__revoke-icon {
      width: 40px;
      height: 40px;
      margin-top: 10px;
      cursor: pointer;
    }  
  </style>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space">
    <div class="fpm__ui-item fpm__revoke">
      ${us}
      <span class="fpm__text fpm__revoke-text">\u64A4\u9500</span>
    </div>
    <div class="fpm__ui-item fpm__main">
      ${ds}
      <span class="fpm__text fpm__main-text">\u6DFB\u52A0</span>
    </div>
    <div class="fpm__ui-item fpm__exit">
      ${cs}
      <span class="fpm__text fpm__exit-text">\u9000\u51FA</span>
    </div>
  </div>
`;const hs="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxmaWx0ZXIgeD0iLTUuMyUiIHk9Ii01LjMlIiB3aWR0aD0iMTEwLjUlIiBoZWlnaHQ9IjExMC41JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19hIj48ZmVPZmZzZXQgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIi8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDEgMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwLjUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiLz48L2ZpbHRlcj48ZmlsdGVyIHg9Ii0xMS40JSIgeT0iLTExLjQlIiB3aWR0aD0iMTIyLjklIiBoZWlnaHQ9IjEyMi45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0icHJlZml4X19jIj48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI0LjUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dCbHVySW5uZXIxIi8+PGZlT2Zmc2V0IGluPSJzaGFkb3dCbHVySW5uZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldElubmVyMSIvPjxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93T2Zmc2V0SW5uZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0iYXJpdGhtZXRpYyIgazI9Ii0xIiBrMz0iMSIgcmVzdWx0PSJzaGFkb3dJbm5lcklubmVyMSIvPjxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAxIDAgMCAwIDAgMSAwIDAgMCAwIDEgMCAwIDAgMC4zIDAiIGluPSJzaGFkb3dJbm5lcklubmVyMSIvPjwvZmlsdGVyPjxmaWx0ZXIgeD0iLTEyNi42JSIgeT0iLTMzNy41JSIgd2lkdGg9IjM1My4xJSIgaGVpZ2h0PSI3NzUlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJwcmVmaXhfX2UiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjE2IiBpbj0iU291cmNlR3JhcGhpYyIvPjwvZmlsdGVyPjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19kIj48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9Ii43IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2YiPjxzdG9wIHN0b3AtY29sb3I9IiNGRkYiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48Y2lyY2xlIGlkPSJwcmVmaXhfX2IiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC40NDQiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48dXNlIGZpbGw9IiMwMDAiIGZpbHRlcj0idXJsKCNwcmVmaXhfX2EpIiB4bGluazpocmVmPSIjcHJlZml4X19iIi8+PHVzZSBmaWxsPSIjMDAwIiBmaWx0ZXI9InVybCgjcHJlZml4X19jKSIgeGxpbms6aHJlZj0iI3ByZWZpeF9fYiIvPjxjaXJjbGUgc3Ryb2tlPSJ1cmwoI3ByZWZpeF9fZCkiIHN0cm9rZS13aWR0aD0iLjQiIGZpbGwtb3BhY2l0eT0iLjI0MSIgZmlsbD0iI0ZGRiIgc3Ryb2tlLWxpbmVqb2luPSJzcXVhcmUiIGN4PSIzNiIgY3k9IjM2IiByPSIyOC4yNDQiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBvcGFjaXR5PSIuNTk2IiBmaWx0ZXI9InVybCgjcHJlZml4X19lKSIgY3g9IjM2IiBjeT0iMzYiIHJ4PSIxOC45NjMiIHJ5PSI3LjExMSIvPjxwYXRoIGQ9Ik0zNiAwQzE2LjExOCAwIDAgMTYuMTE4IDAgMzZzMTYuMTE4IDM2IDM2IDM2IDM2LTE2LjExOCAzNi0zNlM1NS44ODIgMCAzNiAwem0wIDQuNDQ0YzE3LjQyOCAwIDMxLjU1NiAxNC4xMjggMzEuNTU2IDMxLjU1NlM1My40MjggNjcuNTU2IDM2IDY3LjU1NiA0LjQ0NCA1My40MjggNC40NDQgMzYgMTguNTcyIDQuNDQ0IDM2IDQuNDQ0eiIgZmlsbD0idXJsKCNwcmVmaXhfX2YpIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+",ms="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSIxNS41MSUiIHkxPSIxMi40OTclIiB4Mj0iODUuMjY1JSIgeTI9Ijg2LjE0MyUiIGlkPSJwcmVmaXhfX2IiPjxzdG9wIHN0b3AtY29sb3I9IiM5NUFFRkYiIG9mZnNldD0iMCUiLz48c3RvcCBzdG9wLWNvbG9yPSIjNjM4NkZGIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMTAwJSIgeDI9IjUwJSIgeTI9IjAlIiBpZD0icHJlZml4X19hIj48c3RvcCBzdG9wLWNvbG9yPSIjOTlBRUZGIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0ZGRiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjI2LjQzMiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iODIuMzA1JSIvPjxzdG9wIHN0b3AtY29sb3I9IiM5OUFFRkYiIHN0b3Atb3BhY2l0eT0iLjQiIG9mZnNldD0iMTAwJSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJwcmVmaXhfX2QiPjxzdG9wIHN0b3AtY29sb3I9IiM4Nzk3RDIiIHN0b3Atb3BhY2l0eT0iLjA1IiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iIzYyNzdDNyIgc3RvcC1vcGFjaXR5PSIuMiIgb2Zmc2V0PSIxMDAlIi8+PC9saW5lYXJHcmFkaWVudD48ZmlsdGVyIHg9Ii02My4zJSIgeT0iLTE2OC44JSIgd2lkdGg9IjIyNi42JSIgaGVpZ2h0PSI0MzcuNSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9InByZWZpeF9fYyI+PGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iOCIgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZpbHRlcj48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIHN0cm9rZT0idXJsKCNwcmVmaXhfX2EpIiBzdHJva2Utd2lkdGg9Ii40IiBmaWxsPSJ1cmwoI3ByZWZpeF9fYikiIG9wYWNpdHk9Ii43IiBjeD0iMzYiIGN5PSIzNiIgcj0iMjguMjQ0Ii8+PGVsbGlwc2UgZmlsbD0iIzdDOTBEQSIgb3BhY2l0eT0iLjU5NiIgZmlsdGVyPSJ1cmwoI3ByZWZpeF9fYykiIGN4PSIzNiIgY3k9IjM2IiByeD0iMTguOTYzIiByeT0iNy4xMTEiLz48cGF0aCBkPSJNMzYgMEMxNi4xMTggMCAwIDE2LjExOCAwIDM2czE2LjExOCAzNiAzNiAzNiAzNi0xNi4xMTggMzYtMzZTNTUuODgyIDAgMzYgMHptMCA0LjQ0NGMxNy40MjggMCAzMS41NTYgMTQuMTI4IDMxLjU1NiAzMS41NTZTNTMuNDI4IDY3LjU1NiAzNiA2Ny41NTYgNC40NDQgNTMuNDI4IDQuNDQ0IDM2IDE4LjU3MiA0LjQ0NCAzNiA0LjQ0NHoiIGZpbGw9InVybCgjcHJlZml4X19kKSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPg==",ps=`
  <svg class="fpm__exit-icon width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="86.3016741%" id="radialGradient-1">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0.3" offset="100%"></stop>
      </radialGradient>
      <radialGradient cx="50%" cy="50%" fx="50%" fy="50%" r="70.7106781%" id="radialGradient-2">
        <stop stop-color="#FFFFFF" offset="0%"></stop>
        <stop stop-color="#FFFFFF" stop-opacity="0" offset="100%"></stop>
      </radialGradient>
    </defs>
      <g fill="url(#radialGradient-1)" fill-rule="nonzero" stroke="url(#radialGradient-2)" stroke-width="0.2">
        <path d="M19.1859205,4.10000004 C19.3691554,4.09993923 19.5526088,4.16602323 19.6925352,4.29904206 C19.8171021,4.41745965 19.8858582,4.56899486 19.8980316,4.7239943 C19.9103475,4.88080848 19.8647874,5.04088037 19.7661957,5.16777131 L19.7661957,5.16777131 L14.3769795,11.1697063 C14.1649599,11.4058657 14.0589501,11.7029328 14.0589501,12 C14.0589501,12.2970672 14.1649599,12.5941343 14.3769795,12.8302937 L14.3769795,12.8302937 L19.6928862,18.7509889 C19.8173649,18.8694879 19.8860087,19.0210672 19.8980683,19.1760728 C19.9102693,19.3328965 19.8645908,19.4929392 19.7701664,19.6153111 C19.6099275,19.772809 19.4324896,19.8610254 19.2586274,19.8856752 C19.0810547,19.910851 18.9081905,19.8692156 18.765363,19.7704965 L18.765363,19.7704965 L11.9999322,13.2904645 L5.32508998,19.6962598 C5.16077108,19.8156635 4.99335965,19.8785989 4.83451361,19.8898888 C4.67442082,19.9012674 4.52389835,19.8596921 4.3968979,19.7731206 C4.23619359,19.588506 4.14871527,19.4164558 4.12392544,19.2589757 C4.09801173,19.094356 4.14341261,18.9485987 4.23380428,18.8322287 L4.23380428,18.8322287 L9.62302046,12.8302937 C9.81773049,12.6134147 9.92302682,12.3451662 9.93892926,12.0727274 C9.95499717,11.7974536 9.87975312,11.5179151 9.70614397,11.2737767 L9.70614397,11.2737767 L4.31595492,5.25860214 C4.17860663,5.08857057 4.11166276,4.9104714 4.11172409,4.7432513 C4.11178577,4.57506821 4.18051603,4.41972395 4.30746483,4.29904206 C4.43371817,4.17902131 4.59543385,4.11349344 4.76041858,4.10187732 L4.76041858,4.10187732 L12.0000677,10.7085251 L18.6794563,4.29937602 C18.8192839,4.16626546 19.0026873,4.10006086 19.1859205,4.10000004 Z" id="\u5F62\u72B6\u7ED3\u5408"></path>
      </g>
  </svg>
`;var gs=`
  <style>
  .mobile .fpm__exit {
    position: absolute;
    top: 53px;
    left: 16px;
    width: 24px;
    height: 24px;
    z-index: 10;
    pointer-events: all;
  }
  .mobile .fpm__exit-icon {
    width: 100%;
    height: 100%;
    cursor: pointer;
  }
  .fpm_operating--mobile {
    padding-bottom: 23px;
  }
  .fpm__main-btn {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }
  .fpm__main-btn-text {
    position: absolute;
    font-weight: 500;
    font-size: 14px;
    color: #FFFFFF;
    text-align: center;
    text-shadow: 0 2px 8px rgba(0,0,0,0.50);
    transition: all 200ms ease-in-out;
  }
  .fpm__main-text__hide {
    transform: scale(0.8) translateY(4px);
    opacity: 0;
  }
  .fpm__main-text__show {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
  .fpm__main__start {
    background-image: url(${hs});
  }
  .fpm__main__end {
    background-image: url(${ms});
  }

  </style>
  <div class="fpm__exit">
    ${ps}
  </div>
  <div class="fpm_ui-bg"></div>
  <div class="fpm_operating-space fpm_operating--mobile">
    <div class="fpm__main fpm__main-btn">
      <div class="fpm__main-icon fpm__main__start"></div>
      <div class="fpm__main-text fpm__main-btn-text">\u5F00\u59CB</div>
    </div>
  </div>
`;const bs={display:"none",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0",transform:"translate(0, 10px)",transition:"opacity 500ms ease-in-out, transform 500ms ease-in-out"},vs={position:"absolute",left:"50%",bottom:"32px",transform:"translateX(-50%)",height:"89px",display:"flex",justifyContent:"space-between",fontSize:"16px",pointerEvents:"all",color:"#fff",zIndex:"10"},ys={height:"100%",width:"max-content",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},Ps={position:"absolute",bottom:"0",left:"0",opacity:"0.5",width:"100%",height:"184px",background:"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, #000000 100%)",zIndex:"0"},ws={margin:"0 80px",opacity:"0.7"},As={margin:"0 80px"},xs={opacity:"0.7"},Is={width:"60px",height:"60px",backgroundSize:"100%",cursor:"pointer"},js={width:"72px",height:"72px",backgroundSize:"100%",cursor:"pointer",transition:"all 200ms ease-in-out"},Ls={width:"40px",height:"40px",marginTop:"10px",backgroundSize:"100%",cursor:"pointer"},Os={cursor:"default",userSelect:"none"};class Ms{constructor(e,t){Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainIconMaskTween",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{mainItem:i,pathDom:o}=this.mainElement;i.style.opacity="1",o.setAttribute("fill",ls)}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const{mainItem:i,pathDom:o}=this.mainElement;i.style.opacity="0.7",o.setAttribute("fill",Pi)}}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.measureController.getCurrentMode()==="Watch"?this.measureController.changeMode("Edit"):this.measureController.save().changeMode("Watch")}}),Object.defineProperty(this,"editedLineChangeHandler",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(!(i.length>1)){if(i.length===0)return this.change2Cancel(!1);this.change2Done()}}}),Object.defineProperty(this,"modeChangeHandler",{enumerable:!0,configurable:!0,writable:!0,value:i=>{i==="Watch"?this.change2Add():this.change2Cancel()}}),this.measureController=e,this.container=t,this.mainElement=this.getMainElement(),Object.assign(this.mainElement.mainIcon.style,Is),Object.assign(this.mainElement.mainItem.style,ws),this.change2Add(),this.measureController.hook.on("modeChange",this.modeChangeHandler),this.mainElement.mainIcon.addEventListener("click",this.onClick),this.mainElement.mainIcon.addEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainIcon.addEventListener("mouseleave",this.onMouseLeave)}dispose(){this.measureController.hook.off("modeChange",this.modeChangeHandler),this.measureController.hook.off("editedLineChange",this.editedLineChangeHandler),this.mainElement.mainIcon.removeEventListener("click",this.onClick),this.mainElement.mainIcon.removeEventListener("mouseenter",this.onMouseEnter),this.mainElement.mainIcon.removeEventListener("mouseleave",this.onMouseLeave)}getMainElement(){const e=this.container.querySelector(".fpm__main-text"),t=this.container.querySelector(".fpm__main"),i=this.container.querySelector(".fpm__main-icon"),o=t==null?void 0:t.querySelector(".fpm__main-icon-path"),r=i==null?void 0:i.querySelector("#fpm__main-icon-mask-white");if(!t||!e||!i||!o||!r)throw new Error("cannot find dom");return{mainTextDom:e,mainItem:t,mainIcon:i,pathDom:o,maskWhiteRect:r}}change2Add(){this.measureController.hook.off("editedLineChange",this.editedLineChangeHandler);const{mainIcon:e,mainTextDom:t,pathDom:i}=this.mainElement;e.style.transition=t.innerText==="\u5B8C\u6210"?"none":"transform 300ms ease-in-out",e.style.transform="rotate(0deg)",t.innerText="\u6DFB\u52A0",i==null||i.setAttribute("d",Et)}change2Cancel(e=!0){const{mainIcon:t,mainTextDom:i,pathDom:o}=this.mainElement;o.setAttribute("d",Et),o.setAttribute("mask",""),t.style.transition=e?"transform 300ms ease-in-out":"none",t.style.transform="rotate(45deg)",i&&(i.innerText="\u53D6\u6D88"),this.measureController.hook.on("editedLineChange",this.editedLineChangeHandler)}change2Done(){var e;const{mainTextDom:t,mainIcon:i,pathDom:o,maskWhiteRect:r}=this.getMainElement();t.innerText!=="\u5B8C\u6210"&&(i.style.transition="none",i.style.transform="rotate(0deg)",t.innerText="\u5B8C\u6210",o.setAttribute("d",ss),o.setAttribute("mask","url(#fpm__main-icon-mask)"),(e=this.mainIconMaskTween)===null||e===void 0||e.dispose(),this.mainIconMaskTween=mi().easing(Se.Easing.Quartic.InOut).onUpdate(({progress:a})=>{r.setAttribute("width",(a*30).toString())}).onComplete(()=>{var a;return(a=this.mainIconMaskTween)===null||a===void 0?void 0:a.dispose()}).play())}}class Ds{constructor(e,t){Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.mainElement.mainTextDom.innerText==="\u5F00\u59CB"?(this.measureController.hook.emit("willChangeState","watching","editing"),this.change2Done()):(this.measureController.hook.emit("willChangeState","editing","watching"),this.change2Add())}}),this.measureController=e,this.container=t,this.mainElement=this.getMainElement(),Object.assign(this.mainElement.mainIcon.style,js),Object.assign(this.mainElement.mainItem.style,As),this.change2Add(),this.mainElement.mainItem.addEventListener("click",this.onClick)}dispose(){this.mainElement.mainItem.removeEventListener("click",this.onClick)}getMainElement(){const e=this.container.querySelector(".fpm__main-text"),t=this.container.querySelector(".fpm__main"),i=this.container.querySelector(".fpm__main-icon");if(!t||!e||!i)throw new Error("cannot find dom");return{mainTextDom:e,mainItem:t,mainIcon:i}}change2Add(){const{mainIcon:e,mainTextDom:t}=this.mainElement;e.className.includes("fpm__main__start")||e.className.includes("fpm__main__end")&&(e.style.transform="scale(0.8)",t.className.includes("fpm__main-text__show")?t.classList.replace("fpm__main-text__show","fpm__main-text__hide"):t.classList.add("fpm__main-text__hide"),setTimeout(()=>{e.classList.replace("fpm__main__end","fpm__main__start"),e.style.transform="scale(1)",t.innerText="\u5F00\u59CB",t.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200))}change2Done(){const{mainTextDom:e,mainIcon:t}=this.mainElement;e.innerText!=="\u7ED3\u675F"&&(t.className.includes("fpm__main__end")||t.className.includes("fpm__main__start")&&(t.style.transform="scale(0.8)",e.className.includes("fpm__main-text__show")?e.classList.replace("fpm__main-text__show","fpm__main-text__hide"):e.classList.add("fpm__main-text__hide"),setTimeout(()=>{t.classList.replace("fpm__main__start","fpm__main__end"),t.style.transform="scale(1)",e.innerText="\u7ED3\u675F",e.classList.replace("fpm__main-text__hide","fpm__main-text__show")},200)))}}class zs{constructor(e,t){Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"revokeIcon",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"revokeItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onClick",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.measureController.revoke()}}),Object.defineProperty(this,"onModeChange",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(r!=="Edit"){this.revokeItem.classList.remove("enabled");return}this.revokeItem.classList.add("enabled")}}),Object.defineProperty(this,"handleRevoke",{enumerable:!0,configurable:!0,writable:!0,value:()=>()=>{}}),this.measureController=e,this.container=t;const i=this.container.querySelector(".fpm__revoke-icon"),o=this.container.querySelector(".fpm__revoke");if(!i||!o)throw new Error("\u4E0D\u6B63\u786E\u7684\u9009\u62E9\u5668");this.revokeIcon=i,this.revokeItem=o,this.revokeIcon.addEventListener("click",this.onClick),e.hook.on("modeChange",this.onModeChange)}dispose(){this.revokeIcon.removeEventListener("click",this.onClick),this.measureController.hook.off("modeChange",this.onModeChange)}}class Wn{constructor(e,t){var i,o;Object.defineProperty(this,"revoke",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleExit",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const u=this.container.querySelector(".fpm__exit-icon"),c=this.container.querySelector(".fpm__exit");if(!c||!u)throw new Error("cannot find dom");this.mode==="pc"&&(Object.assign(c.style,xs),Object.assign(u==null?void 0:u.style,Ls));const v=()=>c.style.opacity="1",d=()=>c.style.opacity="0.7",m=()=>{this.measureController.disable()};return u.addEventListener("click",m),u.addEventListener("mouseenter",v),u.addEventListener("mouseleave",d),()=>{u.removeEventListener("click",m),u.removeEventListener("mouseenter",v),u.removeEventListener("mouseleave",d)}}}),this.measureController=e,this.mode=((i=t.openParams)===null||i===void 0?void 0:i.isMobile)?"mobile":"pc",this.container=document.createElement("div"),this.container.innerHTML=((o=t.openParams)===null||o===void 0?void 0:o.isMobile)?gs:fs,this.container.classList.add("fpm__ui-controller",this.mode),t.container.appendChild(this.container);const r=this.container.querySelectorAll(".fpm__text"),a=this.container.querySelectorAll(".fpm__ui-item"),s=this.container.querySelector(".fpm_ui-bg"),l=this.container.querySelector(".fpm_operating-space");Object.assign(s==null?void 0:s.style,Ps),Object.assign(l==null?void 0:l.style,vs),Object.assign(this.container.style,bs),a.forEach(u=>Object.assign(u.style,ys)),r.forEach(u=>Object.assign(u.style,Os))}dispose(){this.hide(),this.container.remove()}show(){return this.container.style.display="block",this.container.style.opacity="1",this.container.style.transform="translate(0, 0)",this.mode==="pc"?(this.revoke=new zs(this.measureController,this.container),this.mainController=new Ms(this.measureController,this.container)):this.mainController=new Ds(this.measureController,this.container),this.disposers.push(this.handleExit()),this}hide(){var e,t;return this.container.style.display="none",this.container.style.opacity="0",this.container.style.transform="translate(0, 10px)",this.mode==="pc"&&((e=this.revoke)===null||e===void 0||e.dispose()),(t=this.mainController)===null||t===void 0||t.dispose(),this.disposers.forEach(i=>i()),this.disposers=[],this}}class Cs{constructor(e,t){Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("span")}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"hasAnchor",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"onModelChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(i==="Watch"){this.textDom.innerText="";return}this.textDom.innerText="\u8BF7\u9009\u62E9\u7B2C\u4E00\u4E2A\u6D4B\u91CF\u70B9\uFF0CEsc\u6216\u5355\u51FB\u9F20\u6807\u53F3\u952E\u53EF\u53D6\u6D88\u9009\u62E9"}}),Object.defineProperty(this,"anchorChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{!this.hasAnchor&&!!i?(this.hasAnchor=!0,this.textDom.innerText="\u9009\u62E9\u4E0B\u4E00\u4E2A\u6D4B\u91CF\u70B9\uFF0CEsc\u6216\u5355\u51FB\u9F20\u6807\u53F3\u952E\u53D6\u6D88\u9009\u62E9"):i||(this.hasAnchor=!1,this.textDom.innerText="\u8BF7\u9009\u62E9\u7B2C\u4E00\u4E2A\u6D4B\u91CF\u70B9\uFF0CEsc\u6216\u5355\u51FB\u9F20\u6807\u53F3\u952E\u53EF\u53D6\u6D88\u9009\u62E9")}}),Object.defineProperty(this,"onEditedLineChange",{enumerable:!0,configurable:!0,writable:!0,value:i=>{i.length===1&&(this.textDom.innerText="\u53EF\u4EE5\u8FDE\u7EED\u9009\u62E9\u6D4B\u91CF\u70B9\uFF0C\u6216\u70B9\u51FB\u4E0B\u65B9\u201C\u5B8C\u6210\u201D\u7ED3\u675F\u6D4B\u91CF\uFF08Esc\u53D6\u6D88\uFF0CCommand+S\u4FDD\u5B58\uFF09")}}),this.initDom(),t.container.append(this.container),this.measureController=e,e.hook.on("modeChange",this.onModelChange),e.hook.on("anchorChange",this.anchorChange),e.hook.on("editedLineChange",this.onEditedLineChange)}dispose(){this.hide(),this.container.remove()}show(){return this.container.style.opacity="1",this.container.style.transform="translate(0, 0)",this}hide(){return this.container.style.opacity="0",this.container.style.transform="translate(0, -10px)",this.measureController.hook.off("modeChange",this.onModelChange),this.measureController.hook.off("anchorChange",this.anchorChange),this.measureController.hook.off("editedLineChange",this.onEditedLineChange),this}initDom(){const e=this.container,t=this.textDom;e.classList.add("fpm__guide-container"),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height="110px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.transform="translate(0, -10px)",e.style.background="linear-gradient(180deg, rgba(0,0,0,0.40) 0%, rgba(0,0,0,0.00) 100%)",e.style.transition="opacity 500ms ease-in-out, transform 500ms ease-in-out",e.style.opacity="0",t.classList.add("fpm__guide-text"),t.style.color="#fff",t.style.fontSize="20px",t.innerText="\u70B9\u51FB\u4E0B\u65B9\u201C\u6DFB\u52A0\u201D\u5F00\u59CB\u6D4B\u8DDD",e.appendChild(t)}}class ks{constructor(e,t){Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"measureController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:o=>{if(o.metaKey&&o.code==="KeyS"){this.measureController.save().changeMode("Watch"),o.preventDefault();return}if(o.code==="Escape")return this.escape()}}),Object.defineProperty(this,"onMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:o=>{o.button===2&&(o.preventDefault(),this.escape())}}),this.five=t,this.measureController=e;const i=this.five.getElement();!i||(document.body.addEventListener("keydown",this.onKeyDown),i.addEventListener("mousedown",this.onMouseDown))}dispose(){const e=this.five.getElement();!e||(document.body.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("mousedown",this.onMouseDown))}escape(){return this.measureController.getCurrentMode()==="Watch"?this.measureController.disable():this.measureController.changeMode("Watch")}}const Es="data:image/png;base64,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",Ts="data:image/png;base64,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";var Gs=`
  <style>
  .range-piece__container {
    position: absolute;
    top: 39%;
    left: 50%;
    margin-left: -54px;
    width: 108px;
    height: 108px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pieceContainer 0.3s ease-in-out;
    animation-fill-mode: forwards;
  }
  .range-piece__content {
    width: 100%;
    height: 100%;
    background-image: url(${Es});
    opacity: 0.4;
    background-size: 100%;
    background-repeat: no-repeat;
    transition: linear transform 0.1s;
  }
  .range-piece__content--active {
    animation: dotting ease-in-out 0.5s;
  }
  .range-piece__aim {
    width: 100%;
    height: 100%;
    opacity: 1;
    position: absolute;
    background: url(${Ts}) center / contain no-repeat;
  }
  @keyframes dotting {
    0% {
      opacity: 0.4;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(0.8);
    }
    100% {
      opacity: 0.4;
      transform: scale(1);
    }
  }
  @keyframes pieceContainer {
    from {
      top: 49%;
    }
    to {
      top: 39%;
    }
  }
  </style>
  <div class="range-piece__container">
    <div class='range-piece__content'></div>
    <div class="range-piece__aim"></div>
  </div>
`;function Ns(){}const{Vector2:Hs}=Zi;function Ss(n,e){const{offsetWidth:t,offsetHeight:i}=e,{top:o,left:r}=e.getBoundingClientRect();return Object.assign(new Hs,{x:(n.x-r)/t*2-1,y:-(n.y-o)/i*2+1})}class Fs{constructor(e){Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mouseGroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hasAppendMouseGroup",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"fiveHelper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"intersectMesh",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"centerMouseXY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raycaster",{enumerable:!0,configurable:!0,writable:!0,value:new ze}),Object.defineProperty(this,"pieceStyl",{enumerable:!0,configurable:!0,writable:!0,value:{matrix3d:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],scale:1,opacity:.4}}),Object.defineProperty(this,"onCameraDirectionUpdate",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const t=this.getIntersection();if(t){this.pieceChange(t),this.updateMouseGroup(t);const i=new be(this.mouseGroup.position);this.hook.emit("nowPointChange",i)}}}),Object.defineProperty(this,"onWillChangeState",{enumerable:!0,configurable:!0,writable:!0,value:(t,i)=>{var o;this.dotAnimation();const r=(o=this.getIntersection())===null||o===void 0?void 0:o.point;!r||(i==="editing"?this.hook.emit("getStartPoint",new be(r)):this.hook.emit("getEndPoint",new be(r)))}}),Object.defineProperty(this,"computedCenterMouseXY",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const t=this.container.querySelector(".range-piece__aim");if(!t)return null;const{left:i,top:o,width:r,height:a}=t.getBoundingClientRect(),s=Math.round(i+r/2),l=Math.round(o+a/2),c=Ss({x:s,y:l},this.five.getElement());this.centerMouseXY=c}}),Object.defineProperty(this,"getIntersection",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(!this.centerMouseXY)return null;this.raycaster.setFromCamera(this.centerMouseXY,this.five.camera);const t=this.five.model.intersectRaycaster(this.raycaster)[0];return t||null}}),this.five=e.five,this.hook=e.hook,this.group=e.group,this.mouseGroup=yi(),this.fiveHelper=e.fiveHelper,this.container.innerHTML=Gs,this.container.classList.add("range-piece-controller"),this.content=this.container.querySelector(".range-piece__content"),this.content&&(this.content.style.transform=`matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`,this.content.style.opacity=`${this.pieceStyl.opacity}`),e.container.append(this.container),this.intersectMesh=new ve(new Bi(.04,.08,32),new je({color:1245179,opacity:0,side:Xe,transparent:!0})),this.container.addEventListener("animationend",this.computedCenterMouseXY),this.five.on("cameraUpdate",this.onCameraDirectionUpdate),this.hook.on("willChangeState",this.onWillChangeState)}dispose(){this.container.removeEventListener("animationend",this.computedCenterMouseXY),this.five.off("cameraUpdate",this.onCameraDirectionUpdate),this.hook.off("willChangeState",this.onWillChangeState),this.container.remove(),this.group.remove(this.mouseGroup),this.mouseGroup.remove(),this.hasAppendMouseGroup=!1,this.five.scene.remove(this.intersectMesh)}pieceChange(e){const t=e.face,i=e.point;if(t&&i){const r=t.normal.clone().clone().multiplyScalar(.05),a=i.clone().add(r);this.intersectMesh.position.copy(a);const s=a.clone().add(r);this.intersectMesh.lookAt(s),this.five.scene.add(this.intersectMesh);const l=this.intersectMesh.modelViewMatrix.clone().toArray();this.changePieceStyl("matrix3d",l);const u=this.calculateSize(i);this.changePieceStyl("scale",u)}}calculateSize(e){if(!e)return;const t=this.five.camera.position;let i=e.distanceTo(t);const o=4,r=1;return i>o&&(i=o),i<r&&(i=r),-.51/(o-r)*i+1}dotAnimation(){const e=Se.Easing.Quadratic.InOut,t={opacity:.4,scale:this.pieceStyl.scale},i={opacity:[1,.4],scale:[this.pieceStyl.scale*.8,this.pieceStyl.scale]};let o=Ns;const r=new Se.Tween(t).to(i,500).easing(e).start(0).onUpdate(({opacity:a,scale:s})=>{this.changePieceStyl("scale",s),this.changePieceStyl("opacity",a)}).onComplete(()=>{o()});o=_t(a=>{r.update(a)})}changePieceStyl(e,t){!this.content||(this.pieceStyl[e]=t,this.content.style.transform=`matrix3d(${this.pieceStyl.matrix3d.toString()}) scale(${this.pieceStyl.scale})`,this.content.style.opacity=`${this.pieceStyl.opacity}`)}updateMouseGroup(e,t){if(!this.hasAppendMouseGroup){this.group.add(this.mouseGroup),this.hasAppendMouseGroup=!0;const i=this.container.querySelector(".range-piece__aim");i&&(i.style.opacity="0")}if(!e)return this.mouseGroup;if(this.mouseGroup.position.copy(e.point),t)this.mouseGroup.quaternion.copy(t.quaternion);else if(e.face){const o=e.face.normal.clone().multiplyScalar(.05),a=e.point.clone().add(o).clone().add(o);this.mouseGroup.lookAt(a)}return this.mouseGroup}}class Xs{constructor(e,t){var i,o;Object.defineProperty(this,"hasOpen",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hook",{enumerable:!0,configurable:!0,writable:!0,value:new Fe}),Object.defineProperty(this,"magnifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"five",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fiveHelper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useUIController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useGuideController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rangePieceController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"shortcutKeyController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"controllerParams",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getCurrentMode",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.controller instanceof tt?"Edit":this.controller instanceof xt?"Watch":this.controller instanceof Xn?"Mixed":null}),Object.defineProperty(this,"changeMode",{enumerable:!0,configurable:!0,writable:!0,value:a=>{var s;if(!this.hasOpen||this.getCurrentMode()===a)return;if(this.getCurrentMode()==="Mixed"||a==="Mixed")return new Error("\u4E0D\u652F\u6301\u5207\u6362\u7684Mode");(s=this.controller)===null||s===void 0||s.dispose();const l={Watch:xt,Edit:tt};if(!l[a])throw new Error("\u4E0D\u5B58\u5728\u7684 Mode");this.controller=new l[a](this.controllerParams),this.hook.emit("modeChange",a)}}),this.five=e,this.params=t,this.model=new Ut({userDistanceItemCreator:this.params.userDistanceItemCreator}),this.fiveHelper=new Xa(e),this.magnifier=new Fa(e,(i=t.magnifierParams)!==null&&i!==void 0?i:{width:190,height:190,scale:2}),this.group=new Ze,this.group.name="plugin-measure-group",this.container.classList.add("five-plugin-measure-container"),this.container.style.position="relative",this.container.style.pointerEvents="none",this.container.style.width="100%",this.container.style.height="100%",this.container.style.opacity="0",this.container.style.background="rgba(0, 0, 0, 0.15)";const r=(o=this.params.openParams)!==null&&o!==void 0?o:{};this.controllerParams={five:this.five,hook:this.hook,group:this.group,model:this.model,magnifier:this.magnifier,container:this.container,fiveHelper:this.fiveHelper,openParams:r,mouseGroup:yi(),userDistanceItemCreator:this.params.userDistanceItemCreator},this.params.useUIController!==!1&&(this.useUIController=new Wn(this,this.controllerParams)),this.params.useGuideController!==!1&&(this.useGuideController=new Cs(this,this.controllerParams))}appendTo(e){e.append(this.container)}dispose(){var e,t;this.disable(),(e=this.useUIController)===null||e===void 0||e.dispose(),(t=this.magnifier)===null||t===void 0||t.dispose(),this.five.needsRender=!0}load(e){this.model.parse(e),this.save()}enable(){var e,t,i;this.hasOpen||(this.hasOpen=!0,this.five.scene.add(this.group),this.container.style.opacity="1",((e=this.params.openParams)===null||e===void 0?void 0:e.isMobile)?(this.controller=new Xn(this.controllerParams),this.rangePieceController=new Fs(this.controllerParams)):(this.five.helperVisible=!1,this.controller=new xt(this.controllerParams)),(t=this.useUIController)===null||t===void 0||t.show(),(i=this.useGuideController)===null||i===void 0||i.show(),this.shortcutKeyController=new ks(this,this.five),this.hook.emit("enable",!0))}disable(){var e,t,i,o,r;this.hasOpen=!1,this.container.style.opacity="0",(e=this.controller)===null||e===void 0||e.dispose(),(t=this.rangePieceController)===null||t===void 0||t.dispose(),(i=this.useUIController)===null||i===void 0||i.hide(),(o=this.useGuideController)===null||o===void 0||o.hide(),(r=this.shortcutKeyController)===null||r===void 0||r.dispose(),this.controller=null,this.five.helperVisible=!0,this.five.scene.remove(this.group),this.five.needsRender=!0,this.hook.emit("disable",!0)}revoke(){this.controller instanceof tt&&this.controller.revoke()}removeLineByID(e){this.model.removeLineByID(e)}highlightLine(e){if(this.getCurrentMode()!=="Watch")return!1;const t=this.model.getLineByID(e);return t?(this.controller.highlightLine(t),!0):!1}clearHighlightLines(){return this.getCurrentMode()!=="Watch"?!1:(this.controller.clearHighlightLines(),!0)}save(){return this.controller instanceof tt?(this.model.mergeModel(this.controller.model),this):this}toJson(){return this.model.toJson()}changeIsMobile(e){var t,i;((t=this.controllerParams.openParams)===null||t===void 0?void 0:t.isMobile)===void 0&&(this.controllerParams.openParams.isMobile=e),this.controllerParams.openParams.isMobile!==e&&(this.controllerParams.openParams.isMobile=e,this.params.useUIController!==!1&&((i=this.useUIController)===null||i===void 0||i.dispose()),this.useUIController=new Wn(this,this.controllerParams))}}const hl=function(e,t){return new Xs(e,t)},wi=Ki(null);function Ws(n){oe(n,"svelte-1kuu68s",".PanoSpatialTagPlugin__tag-origin.svelte-1kuu68s{position:absolute;width:0.5rem;height:0.5rem;border-radius:50%;background:#fff;box-shadow:0 0 .6rem #fff;transform:translate(-50%, -50%) scale(1);transform-origin:center center;-webkit-animation:svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin 1.2s forwards;animation:svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin 1.2s forwards;pointer-events:auto}.PanoSpatialTagPlugin__tag-origin.svelte-1kuu68s:after{content:'';position:absolute;top:50%;height:50%;width:2rem;height:2rem;transform:translate(-50%, -50%)}.PanoSpatialTagPlugin__tag-origin-destroy.svelte-1kuu68s{transform:translate(-50%, -50%) scale(0.6);-webkit-animation:svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin-destroy 1.2s forwards .7s;animation:svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin-destroy 1.2s forwards .7s}@-webkit-keyframes svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin{0%{transform:translate(-50%, -50%) scale(1);opacity:0}100%{transform:translate(-50%, -50%) scale(0.6);opacity:1 }}@keyframes svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin{0%{transform:translate(-50%, -50%) scale(1);opacity:0}100%{transform:translate(-50%, -50%) scale(0.6);opacity:1 }}@-webkit-keyframes svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin-destroy{0%{transform:translate(-50%, -50%) scale(0.6);opacity:1}10%{transform:translate(-50%, -50%) scale(1);opacity:0.9}100%{transform:translate(-50%, -50%) scale(1);opacity:0}}@keyframes svelte-1kuu68s-PanoSpatialTagPlugin__tag-origin-destroy{0%{transform:translate(-50%, -50%) scale(0.6);opacity:1}10%{transform:translate(-50%, -50%) scale(1);opacity:0.9}100%{transform:translate(-50%, -50%) scale(1);opacity:0}}")}function Rn(n,e,t){const i=n.slice();return i[3]=e[t],i}function Bn(n){let e,t=`${n[3].top}%`,i=`${n[3].left}%`,o,r;function a(){return n[2](n[3])}return{c(){e=G("i"),y(e,"class","svelte-1kuu68s"),le(e,"PanoSpatialTagPlugin__tag-origin",!0),le(e,"PanoSpatialTagPlugin__tag-origin-destroy",n[3].destroying),I(e,"top",t,!1),I(e,"left",i,!1),I(e,"visibility",n[3].front?"visible":"hidden",!1)},m(s,l){M(s,e,l),o||(r=Xt(e,"click",a),o=!0)},p(s,l){n=s,l&1&&le(e,"PanoSpatialTagPlugin__tag-origin-destroy",n[3].destroying),l&1&&t!==(t=`${n[3].top}%`)&&I(e,"top",t,!1),l&1&&i!==(i=`${n[3].left}%`)&&I(e,"left",i,!1),l&1&&I(e,"visibility",n[3].front?"visible":"hidden",!1)},d(s){s&&D(e),o=!1,r()}}}function Rs(n){let e,t=n[0],i=[];for(let o=0;o<t.length;o+=1)i[o]=Bn(Rn(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=xe()},m(o,r){for(let a=0;a<i.length;a+=1)i[a].m(o,r);M(o,e,r)},p(o,[r]){if(r&3){t=o[0];let a;for(a=0;a<t.length;a+=1){const s=Rn(o,t,a);i[a]?i[a].p(s,r):(i[a]=Bn(s),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},i:X,o:X,d(o){ft(i,o),o&&D(e)}}}function Bs(n,e,t){let{origins:i}=e;const o=a=>{wi.update(()=>`${a}-PanoSpatialTagPlugin-${Date.now()}`)},r=a=>o(a.id);return n.$$set=a=>{"origins"in a&&t(0,i=a.origins)},[i,o,r]}class Ys extends U{constructor(e){super();q(this,e,Bs,Rs,J,{origins:0},Ws)}}function _s(n){oe(n,"svelte-1wukaol",".PanoSpatialTagPlugin__tag-x.svelte-1wukaol.svelte-1wukaol{position:relative;display:block;white-space:nowrap;box-sizing:border-box;width:25rem;height:14rem;color:#FFF;transform:translate(0, -100%);transition:height .5s linear}.PanoSpatialTagPlugin__tag-shadow.svelte-1wukaol.svelte-1wukaol{content:'';position:absolute;width:30rem;height:30rem;top:-15rem;left:-15rem;z-index:-1;opacity:0;transition:opacity .8s .6s;background:url('https://vrlab-image4.ljcdn.com/release/web/PanoSpatialTagPlugin__blur.png');background-size:30rem 30rem}.PanoSpatialTagPlugin__tag-line.svelte-1wukaol.svelte-1wukaol{position:absolute;left:-1rem;width:2rem;height:100%;overflow:hidden}.PanoSpatialTagPlugin__tag-flagpole.svelte-1wukaol.svelte-1wukaol{position:absolute;top:0;left:1rem;height:calc(100% - 1.5rem);width:.15rem;background:linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, .1));box-shadow:0 .1rem .5rem rgba(0, 0, 0, .2);opacity:0;transform:translate(-50%, 60%) scaleY(0);transition:transform .4s cubic-bezier(.44,.44,.74,.98) , opacity .4s cubic-bezier(.44,.44,.74,.98), width .5s linear, height .5s linear ;transform-origin:center bottom}.PanoSpatialTagPlugin__tag-line1.svelte-1wukaol.svelte-1wukaol{position:absolute;top:0;left:0.3rem;height:1.8rem;width:.1rem;background:#fff;opacity:0;transform:translate(-50%, 200%) scaleY(0);transform-origin:center top}.PanoSpatialTagPlugin__tag-line2.svelte-1wukaol.svelte-1wukaol{position:absolute;top:0;left:0.5rem;height:1.8rem;width:.1rem;background:#fff;opacity:0;transform:translate(-50%, 200%) scaleY(0);transform-origin:center top}.PanoSpatialTagPlugin__tag-show.svelte-1wukaol .PanoSpatialTagPlugin__tag-line1.svelte-1wukaol{-webkit-animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line1 linear .5s forwards .45s;animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line1 linear .5s forwards .45s}.PanoSpatialTagPlugin__tag-show.svelte-1wukaol .PanoSpatialTagPlugin__tag-line2.svelte-1wukaol{-webkit-animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line2 linear .5s forwards .65s;animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line2 linear .5s forwards .65s}.PanoSpatialTagPlugin__tag-x.PanoSpatialTagPlugin__tag-upside-down.svelte-1wukaol.svelte-1wukaol{transform:translate(0, 0)}.PanoSpatialTagPlugin__tag-upside-down.svelte-1wukaol .PanoSpatialTagPlugin__tag-line.svelte-1wukaol{transform:scaleY(-1)}.PanoSpatialTagPlugin__tag-animate.svelte-1wukaol.svelte-1wukaol{position:relative;height:100%;overflow:hidden;transform-origin:left top;transition:transform .5s linear}.PanoSpatialTagPlugin__tag-upside-down.svelte-1wukaol .PanoSpatialTagPlugin__tag-animate.svelte-1wukaol{transform-origin:left bottom}.PanoSpatialTagPlugin__tag-content.svelte-1wukaol.svelte-1wukaol{position:absolute;display:inline-block;transform:translate(-100%, 0);transition:transform .9s cubic-bezier(0,.65,.16,1.08) .6s;padding-left:.5rem;font-size:1rem}.PanoSpatialTagPlugin__tag-upside-down.svelte-1wukaol .PanoSpatialTagPlugin__tag-content.svelte-1wukaol{bottom:0}.PanoSpatialTagPlugin__tag-show.svelte-1wukaol .PanoSpatialTagPlugin__tag-flagpole.svelte-1wukaol{opacity:1;transform:translate(-50%, 0) scaleY(1)}.PanoSpatialTagPlugin__tag-upside-down.svelte-1wukaol .PanoSpatialTagPlugin__tag-shadow.svelte-1wukaol{top:unset;bottom:-15rem}.PanoSpatialTagPlugin__tag-show.svelte-1wukaol .PanoSpatialTagPlugin__tag-shadow.svelte-1wukaol{opacity:.32}.PanoSpatialTagPlugin__tag-show.svelte-1wukaol .PanoSpatialTagPlugin__tag-content.svelte-1wukaol{transform:translate(0, 0)}.PanoSpatialTagPlugin__tag-hide.svelte-1wukaol .PanoSpatialTagPlugin__tag-flagpole.svelte-1wukaol{opacity:0;transform:translate(-50%, 60%) scaleY(0);transition:transform .5s .55s, opacity .4s .55s}.PanoSpatialTagPlugin__tag-hide.svelte-1wukaol .PanoSpatialTagPlugin__tag-shadow.svelte-1wukaol{opacity:0;transition:opacity .8s}.PanoSpatialTagPlugin__tag-hide.svelte-1wukaol .PanoSpatialTagPlugin__tag-content.svelte-1wukaol{transform:translate(-100%, 0);transition:transform .6s cubic-bezier(.53,.06,.88,.59)}.PanoSpatialTagPlugin__tag-hide.svelte-1wukaol .PanoSpatialTagPlugin__tag-content .svelte-1wukaol{pointer-events:none}.PanoSpatialTagPlugin__tag-hide.svelte-1wukaol .PanoSpatialTagPlugin__tag-line1.svelte-1wukaol{opacity:0.5;transform:translate(-50%, 10%) scaleY(0);-webkit-animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line1-hide linear .28s forwards .3s;animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line1-hide linear .28s forwards .3s}.PanoSpatialTagPlugin__tag-hide.svelte-1wukaol .PanoSpatialTagPlugin__tag-line2.svelte-1wukaol{opacity:0.5;transform:translate(-50%, 0) scaleY(0);-webkit-animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line2-hide linear .28s forwards .45s;animation:svelte-1wukaol-PanoSpatialTagPlugin__tag-line2-hide linear .28s forwards .45s}@-webkit-keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line1{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 135%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 20%) scaleY(0)}}@keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line1{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 135%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 20%) scaleY(0)}}@-webkit-keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line2{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 125%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}}@keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line2{0%{opacity:0;transform:translate(-50%, 250%) scaleY(1)}50%{opacity:0.5;transform:translate(-50%, 125%) scaleY(1)}100%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}}@-webkit-keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line1-hide{0%{opacity:0.5;transform:translate(-50%, 10%) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 105%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}@keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line1-hide{0%{opacity:0.5;transform:translate(-50%, 10%) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 105%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}@-webkit-keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line2-hide{0%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 100%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}@keyframes svelte-1wukaol-PanoSpatialTagPlugin__tag-line2-hide{0%{opacity:0.5;transform:translate(-50%, 0) scaleY(0)}50%{opacity:0.2;transform:translate(-50%, 100%) scaleY(1)}100%{opacity:0;transform:translate(-50%, 200%) scaleY(0)}}")}function Zs(n){let e,t,i,o,r,a,s,l,u,c,v,d,m,p,h;return{c(){e=G("div"),t=G("div"),i=Z(),o=G("div"),r=G("i"),a=Z(),s=G("i"),l=Z(),u=G("i"),c=Z(),v=G("div"),d=G("div"),y(t,"class","PanoSpatialTagPlugin__tag-shadow svelte-1wukaol"),I(t,"transform","translate("+n[7]/2*n[3]*3+"px, "+n[8]/2*(n[1]?-1:1)*n[3]*3+"px)"),y(r,"class","PanoSpatialTagPlugin__tag-flagpole svelte-1wukaol"),I(r,"width",n[4]+"rem"),y(s,"class","PanoSpatialTagPlugin__tag-line1 svelte-1wukaol"),y(u,"class","PanoSpatialTagPlugin__tag-line2 svelte-1wukaol"),y(o,"class","PanoSpatialTagPlugin__tag-line svelte-1wukaol"),y(d,"class","PanoSpatialTagPlugin__tag-content svelte-1wukaol"),y(v,"class","PanoSpatialTagPlugin__tag-animate svelte-1wukaol"),I(v,"transform","scale("+n[3]*3+")"),y(e,"id",m="PanoSpatialTagPlugin__"+n[0]),I(e,"height",20*n[5]+"rem"),y(e,"class","svelte-1wukaol"),le(e,"PanoSpatialTagPlugin__tag-x",!0),le(e,"PanoSpatialTagPlugin__tag-upside-down",n[1]),le(e,"PanoSpatialTagPlugin__tag-show",n[10]),le(e,"PanoSpatialTagPlugin__tag-hide",n[10]===!1||n[6])},m(f,b){M(f,e,b),E(e,t),E(e,i),E(e,o),E(o,r),E(o,a),E(o,s),E(o,l),E(o,u),E(e,c),E(e,v),E(v,d),d.innerHTML=n[2],n[16](d),p||(h=Xt(d,"click",n[11]),p=!0)},p(f,[b]){b&394&&I(t,"transform","translate("+f[7]/2*f[3]*3+"px, "+f[8]/2*(f[1]?-1:1)*f[3]*3+"px)"),b&16&&I(r,"width",f[4]+"rem"),b&4&&(d.innerHTML=f[2]),b&8&&I(v,"transform","scale("+f[3]*3+")"),b&1&&m!==(m="PanoSpatialTagPlugin__"+f[0])&&y(e,"id",m),b&32&&I(e,"height",20*f[5]+"rem"),b&2&&le(e,"PanoSpatialTagPlugin__tag-upside-down",f[1]),b&1024&&le(e,"PanoSpatialTagPlugin__tag-show",f[10]),b&1088&&le(e,"PanoSpatialTagPlugin__tag-hide",f[10]===!1||f[6])},i:X,o:X,d(f){f&&D(e),n[16](null),p=!1,h()}}}function Us(n,e,t){let{id:i}=e,{upsideDown:o}=e,{content:r}=e,{contentZoom:a}=e,{lineWidthZoom:s}=e,{lineHeightZoom:l}=e,{destroying:u=!1}=e,{folded:c}=e,{dispose:v}=e,{events:d}=e,{hooks:m}=e,p=0,h=0,f,b,g=setTimeout(()=>{c||t(10,b=!0),g=void 0},100);const P=x=>{const N=Object.keys(d);let L=x.target;for(;L;){const T=L.getAttribute("class");if(!T){L=L.parentNode;continue}if(T.includes("PanoSpatialTagPlugin__tag-content")){L=null;break}N.forEach(k=>{T.includes(k)&&d[k](i)}),L=L.parentNode}};Ft(()=>{m.emit("initTag",{id:i})});const A=wi.subscribe(x=>{if(x===null)return;const[N,L]=x.split("-PanoSpatialTagPlugin-");i===N&&(m.emit("clickOrigin",{id:i,show:b}),g||(t(10,b=c),t(12,c=!c),g=setTimeout(()=>{g=void 0},1500)))});Ui(()=>{t(7,p=f.offsetWidth),t(8,h=f.offsetHeight),!g&&t(10,b=!c)}),St(()=>{m.emit("destroyTag",{id:i}),A(),v()});function w(x){$i[x?"unshift":"push"](()=>{f=x,t(9,f)})}return n.$$set=x=>{"id"in x&&t(0,i=x.id),"upsideDown"in x&&t(1,o=x.upsideDown),"content"in x&&t(2,r=x.content),"contentZoom"in x&&t(3,a=x.contentZoom),"lineWidthZoom"in x&&t(4,s=x.lineWidthZoom),"lineHeightZoom"in x&&t(5,l=x.lineHeightZoom),"destroying"in x&&t(6,u=x.destroying),"folded"in x&&t(12,c=x.folded),"dispose"in x&&t(13,v=x.dispose),"events"in x&&t(14,d=x.events),"hooks"in x&&t(15,m=x.hooks)},[i,o,r,a,s,l,u,p,h,f,b,P,c,v,d,m,w]}class qs extends U{constructor(e){super();q(this,e,Us,Zs,J,{id:0,upsideDown:1,content:2,contentZoom:3,lineWidthZoom:4,lineHeightZoom:5,destroying:6,folded:12,dispose:13,events:14,hooks:15},_s)}}const Js={position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",pointerEvents:"none"},Yn="<",_n=">",Zn="%",Un="locals",Vs="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",Qs={"&":"&amp","<":"&lt",">":"&gt",'"':"&#34","'":"&#39"},fe={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"};function qn(n){return n.replace(/;(\s*$)/,"$1")}function Ks(n,e){return new $s(n).compileFunction()(e)}class $s{constructor(e){Object.defineProperty(this,"templateText",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"truncate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"currentLine",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"source",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"regex",{enumerable:!0,configurable:!0,writable:!0,value:new RegExp(Vs)}),this.templateText=e}compileFunction(){let e;const t=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
  with (`+Un+` || {}) {
`,i=`  }
  return __output;
`,o=function(r){return r==null?"":String(r).replace(/[&<>'"]/g,function(a){return Qs[a]||a})};return this._generateSource(),this.source=t+this.source+i,e=this.source,e="escapeFn = escapeFn || "+o.toString()+`;
`+e,new Function(Un+", escapeFn",e)}_generateSource(){this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");const e=this._parseTemplateText(),t=Zn,i=Yn,o=_n;e&&e.length&&e.forEach((r,a)=>{let s;if(r.indexOf(i+t)===0&&r.indexOf(i+t+t)!==0&&(s=e[a+2],!(s==t+o||s=="-"+t+o||s=="_"+t+o)))throw new Error('Could not find matching close tag for "'+r+'".');this._scanLine(r)})}_parseTemplateText(){let e=this.templateText;const t=this.regex;let i=t.exec(e);const o=[];let r;for(;i;)r=i.index,r!==0&&(o.push(e.substring(0,r)),e=e.slice(r)),o.push(i[0]),e=e.slice(i[0].length),i=t.exec(e);return e&&o.push(e),o}_addOutput(e){if(this.truncate&&(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!e)return e;e=e.replace(/\\/g,"\\\\"),e=e.replace(/\n/g,"\\n"),e=e.replace(/\r/g,"\\r"),e=e.replace(/"/g,'\\"'),this.source+='    ; __append("'+e+`")
`}_scanLine(e){const t=Zn,i=Yn,o=_n;switch(e.split(`
`).length-1,e){case i+t:case i+t+"_":this.mode=fe.EVAL;break;case i+t+"=":this.mode=fe.ESCAPED;break;case i+t+"-":this.mode=fe.RAW;break;case i+t+"#":this.mode=fe.COMMENT;break;case i+t+t:this.mode=fe.LITERAL,this.source+='    ; __append("'+e.replace(i+t+t,i+t)+`")
`;break;case t+t+o:this.mode=fe.LITERAL,this.source+='    ; __append("'+e.replace(t+t+o,t+o)+`")
`;break;case t+o:case"-"+t+o:case"_"+t+o:this.mode==fe.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=e.indexOf("-")===0||e.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case fe.EVAL:case fe.ESCAPED:case fe.RAW:e.lastIndexOf("//")>e.lastIndexOf(`
`)&&(e+=`
`)}switch(this.mode){case fe.EVAL:this.source+="    ; "+e+`
`;break;case fe.ESCAPED:this.source+="    ; __append(escapeFn("+qn(e)+`))
`;break;case fe.RAW:this.source+="    ; __append("+qn(e)+`)
`;break;case fe.COMMENT:break;case fe.LITERAL:this._addOutput(e);break}}else this._addOutput(e)}}}const It=.001,nt=1.4,Jn=.01,el="https://vrlab-image4.ljcdn.com/release/web/PanoSpatialTagPlugin__blur.png",it=1.2,Pe=3.5,ml=(n,e)=>{var t,i,o,r,a,s;let l=e==null?void 0:e.container;const u=(t=e==null?void 0:e.wait)!==null&&t!==void 0?t:200,c=(i=e==null?void 0:e.maxNumberOnScreen)!==null&&i!==void 0?i:3,v=(o=e==null?void 0:e.minRad)!==null&&o!==void 0?o:Math.PI/4,d=(r=e==null?void 0:e.nearTolerance)!==null&&r!==void 0?r:100,m=(a=e==null?void 0:e.upsideHeight)!==null&&a!==void 0?a:1.6,p=ii(n),h=document.createElement("div");h.classList.add("PanoSpatialTagPlugin"),Object.assign(h.style,Js);const f=new Fe;let b=new Image;b.src=el;const g={points:[],origins:[],tags:[],template:"",events:{},render:Ks,folded:!1,enabled:!0,forbidden:!0},P=new Ys({target:h,props:{origins:g.origins}}),A=(H,B)=>{L(),B&&T()},w=()=>{g.forbidden&&(g.forbidden=!1,T())},x=(H,B)=>{if(g.tags.length===0)return;const Q=B.longitude-n.state.longitude,z=n.camera.clone();z.position.copy(B.offset),z.rotateOnWorldAxis(new O(0,1,0),Q),z.updateProjectionMatrix(),z.updateMatrixWorld(!0);const de=new Kt,Le=new Lt;Le.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse),de.setFromProjectionMatrix(Le),g.tags.forEach(F=>{const Ie=z.position.clone().setY(nt).distanceTo(F.position);if(Ie<it||Ie>Pe||!de.containsPoint(F.position))return F.destroying=!0;const he=F.position.clone().sub(z.position).setY(0);if(he.angleTo(F.normal)>Math.PI/2-v&&he.angleTo(F.normal)<Math.PI/2+v)return F.destroying=!0}),g.tags.forEach(F=>{F.destroying?F.app.$set({contentZoom:.1+z.position.distanceTo(F.position)/Pe,lineWidthZoom:.38*(.01+z.position.distanceTo(F.position)/Pe),destroying:F.destroying}):F.app.$set({lineWidthZoom:.38*(.01+z.position.distanceTo(F.position)/Pe),lineHeightZoom:.4+(z.position.distanceTo(F.position)-it)/Pe*.6,contentZoom:.1+z.position.distanceTo(F.position)/Pe})}),setTimeout(()=>{g.tags.forEach(F=>{F.destroying&&(F.app.$destroy(),F=null)}),g.tags=g.tags.filter(F=>!F.destroying),L()},1900)},N=H=>{H!==ke.Mode.Panorama&&!g.forbidden&&(P.$set({origins:[]}),g.tags.forEach(B=>{B.app.$destroy(),B=null}),g.origins=[],g.tags=[],g.forbidden=!0)},L=()=>{if(g.forbidden||!g.enabled)return;const H=n.camera,B=H.getWorldDirection(new O);g.origins=g.tags.map(Q=>{const z=Q.position.clone().project(H),de=Q.position.clone().sub(H.position).setY(0).angleTo(B.setY(0))<Math.PI/2;return{id:Q.id,front:de,left:(z.x+1)/2*100,top:(-z.y+1)/2*100,destroying:Q.destroying}}),P.$set({origins:g.origins})},T=()=>{g.forbidden||!g.enabled||(g.timeoutId&&clearTimeout(g.timeoutId),g.timeoutId=setTimeout(()=>{g.timeoutId=void 0;const H=k();H.length&&(g.tags=g.tags.concat(H),L())},u))},k=()=>{const{clientWidth:H,clientHeight:B}=n.getElement(),Q=[],z=n.camera,de=new Kt,Le=new Lt,F=z.getWorldDirection(new O);Le.multiplyMatrices(z.projectionMatrix,z.matrixWorldInverse),de.setFromProjectionMatrix(Le);const Ie=g.tags.filter($=>de.containsPoint($.position)&&!$.destroying).length,he=g.points.reduce(($,ie)=>{if(g.tags.find(re=>ie.id===re.id&&!re.destroying))return $;const K=z.position.clone().setY(nt).distanceTo(ie.position);if(K<it||K>Pe||!de.containsPoint(ie.position))return $;const Te=ie.position.clone().sub(z.position).setY(0);if(Te.angleTo(ie.normal)>Math.PI/2-v&&Te.angleTo(ie.normal)<Math.PI/2+v)return $;const Ce=ie.position.clone().project(z);if(!g.tags.every(re=>{if(re.position.clone().sub(z.position).setY(0).angleTo(F.setY(0))>Math.PI/2)return!0;const Oe=re.position.clone().project(z);return Math.sqrt(Math.pow((Ce.x-Oe.x)/2*H,2)+Math.pow((Ce.y-Oe.y)/2*B,2))>d}))return $;const ye={id:ie.id,position:ie.position,normal:ie.normal,replacement:ie.replacement,weight:ie.weight,distance:K};let _;for(let re=0,Oe=$.length;re<Oe;re++){const qe=$[re];if(ye.weight>qe.weight){_=re;break}if(ye.distance<qe.distance){_=re;break}}return _!==void 0?$.splice(_,0,ye):$.push(ye),$},[]);for(let $=0,ie=he.length;$<ie&&!(Ie+Q.length>=c);$++){const K=he[$];if(Q.find(_=>K.id===_.id))continue;const Te=K.position.clone().project(z);if(!g.tags.concat(Q).every(_=>{if(_.position.clone().sub(z.position).setY(0).angleTo(F.setY(0))>Math.PI/2)return!0;const re=_.position.clone().project(z);return Math.sqrt(Math.pow((Te.x-re.x)/2*H,2)+Math.pow((Te.y-re.y)/2*B,2))>d}))continue;const Ce=new ze(z.position.clone().setY(nt),K.position.clone().sub(z.position.clone().setY(nt)).normalize(),0,K.distance+Jn),[ye]=n.model.bvhs.loaded?n.model.intersectRaycaster(Ce):Ce.intersectObjects(n.model.children,!0);if(!!ye&&K.distance-ye.distance<Jn){const{position:_,normal:re,id:Oe,replacement:qe}=K,Ai=new Ei().setFromNormalAndCoplanarPoint(re,_),Jt=_.clone().sub(z.position).cross(new O(0,1,0)).setLength(It),xi=[_.clone(),_.clone().add(Jt),_.clone().add(new O(0,It,0)).add(Jt),_.clone().add(new O(0,It,0))].map(Oi=>Ai.projectPoint(Oi,new O)),{container:Ii,dispose:ji}=p.create3DDomContainer(xi)||{},Li=new qs({target:Ii,props:{id:Oe,content:g.render(g.template,qe),lineWidthZoom:.38*(.01+z.position.distanceTo(_)/Pe),lineHeightZoom:.4+(z.position.distanceTo(_)-it)/Pe*.6,contentZoom:.1+z.position.distanceTo(_)/Pe,upsideDown:_.y>m,folded:g.folded,events:g.events,hooks:f,dispose:ji}});Q.push({position:_,normal:re,id:Oe,app:Li})}}return Q},V=H=>{g.points=H.points.map(B=>{var Q,z;return{id:B.id,position:new O().fromArray(B.position),normal:new O().fromArray(B.normal),replacement:(Q=B.replacement)!==null&&Q!==void 0?Q:{},weight:(z=B.weight)!==null&&z!==void 0?z:-1}}),H.render&&(g.render=H.render),H.template&&(g.template=H.template),H.events&&(g.events=H.events),H.enabled===!1&&(g.enabled=H.enabled),H.folded===!0&&(g.folded=H.folded)},W=()=>{g.enabled=!0,T()},Y=()=>{g.enabled=!1,P.$set({origins:[]}),g.tags.forEach(H=>{H.app.$destroy(),H=null}),g.origins=[],g.tags=[]},S=()=>{g.folded=!1,g.tags.forEach(H=>{H.app.$set({folded:g.folded})})},R=()=>{g.folded=!0,g.tags.forEach(H=>{H.app.$set({folded:g.folded})})},se=H=>{g.tags.forEach(B=>{B.id===H&&B.app.$set({folded:!1})})},Re=H=>{g.tags.forEach(B=>{B.id===H&&B.app.$set({folded:!0})})},Be=()=>{b=null,p.disposeAll(),P.$destroy(),g.tags.forEach(H=>{H.app.$destroy(),H=null}),g.origins=[],g.tags=[],n.off("panoWillArrive",x),n.off("panoArrived",w),n.off("modeChange",N),n.off("cameraUpdate",A)};return((s=n==null?void 0:n.model)===null||s===void 0?void 0:s.loaded)?(l||(l=n.getElement().parentElement),l.appendChild(h),g.forbidden=!1,T(),n.on("panoWillArrive",x),n.on("panoArrived",w),n.on("modeChange",N),n.on("cameraUpdate",A)):n.once("modelLoaded",()=>{l||(l=n.getElement().parentElement),l.appendChild(h),g.forbidden=!1,T(),n.on("panoWillArrive",x),n.on("panoArrived",w),n.on("modeChange",N),n.on("cameraUpdate",A)}),n.on("dispose",Be),{load:V,unfoldAll:S,foldAll:R,unfold:se,fold:Re,enable:W,disable:Y,hooks:f,dispose:Be}};var Vn;(function(n){n.SMALL="small",n.MIDLLE="middle",n.LARGE="large",n.EXTRA_LARGE="x-large"})(Vn||(Vn={}));var He;(function(n){n.TOP_LEFT="topLeft",n.TOP_RIGHT="topRight",n.BOTTOM_LEFT="bottomLeft",n.BOTTOM_RIGHT="bottomRight"})(He||(He={}));function tl(n){if(n.length===0)return[];if(Array.isArray(n[0]))return n;let e=[];return n.map(t=>{const i=[t[He.TOP_LEFT],t[He.BOTTOM_LEFT],t[He.BOTTOM_RIGHT],t[He.TOP_RIGHT]];e.push(i)}),e}const pl=(n,{videoElement:e})=>{const t={videoMeshes:[],videoTextureEnabled:!1,videoSource:"",rectPoints:[],enabled:!1,videoElement:e},i=d=>{t.videoTexture&&(t.videoTexture.image.muted=d,t.videoTexture.image.play())},o=()=>t.videoTexture?t.videoTexture.image.muted:!0,r=()=>{if(t.enabled||!t.videoTexture)return;t.enabled=!0,t.videoMeshes=s(),console.log("state.videoMeshes",t.videoMeshes),t.videoMeshes.forEach(m=>n.scene.add(m));const d=()=>{if(console.log("play",t.videoTexture),!t.videoTexture)return;const m=()=>{var p;!t.videoTexture||((p=t.videoTexture)===null||p===void 0||p.image.removeEventListener("timeupdate",m),t.videoTextureEnabled=!0,t.videoMeshes.forEach(h=>{h.material.map!==t.videoTexture&&(h.material.map=t.videoTexture)}),n.needsRender=!0)};t.videoTexture.image.addEventListener("timeupdate",m),t.videoTexture&&t.videoMeshes.length&&t.videoTexture.image.play()};if(n.model.loaded)d();else return n.once("modelLoaded",()=>d())},a=()=>{!t.enabled||(t.enabled=!1,t.videoMeshes.forEach(d=>{d.geometry.dispose(),d.material.dispose(),n.scene.remove(d),t.videoTexture&&t.videoTexture.image.pause()}),t.videoMeshes=[],n.needsRender=!0)},s=()=>t.rectPoints.map((d,m)=>{const p=new Ti,h=128,f=[];f.push(d[0].x,d[0].y,d[0].z);for(let w=1;w<h;w++)f.push(d[0].x+(d[1].x-d[0].x)*w/h,d[0].y+(d[1].y-d[0].y)*w/h,d[0].z+(d[1].z-d[0].z)*w/h);f.push(d[1].x,d[1].y,d[1].z),f.push(d[2].x,d[2].y,d[2].z);for(let w=1;w<h;w++)f.push(d[2].x+(d[3].x-d[2].x)*w/h,d[2].y+(d[3].y-d[2].y)*w/h,d[2].z+(d[3].z-d[2].z)*w/h);f.push(d[3].x,d[3].y,d[3].z);const b=[];b.push(0,1);for(let w=1;w<h;w++)b.push(0,1-w/h);b.push(0,0),b.push(1,0);for(let w=1;w<h;w++)b.push(1,w/h);b.push(1,1);const g=[];for(let w=0;w<h;w++)g.push(w,w+1,h*2-w,w,h*2-w,h*2+1-w);p.setAttribute("position",new vt(new Float32Array(f),3)),p.setAttribute("uv",new vt(new Float32Array(b),2)),p.setIndex(new vt(new Uint32Array(g),1));const P=new je({map:t.videoTextureEnabled?t.videoTexture:t.imageTexture,side:Xe}),A=new ve(p,P);return A.renderOrder=1,A.name=`ModelTVVideoPlugin-${m}-${performance.now()}`,A}),l=d=>{const m=new dt().load(d);return m.minFilter=Je,m.magFilter=Je,m.format=$t,m},u=(d,m)=>new Promise((p,h)=>{const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(f.readyState==4)if(f.status==200){const b=window.URL||window.webkitURL;m=m||document.createElement("video"),m.crossOrigin="anonymous",m.autoplay=!0,m.muted=!0,m.loop=!0,m.playsInline=!0,m.src=b.createObjectURL(f.response);const g=new Gi(m);g.minFilter=Je,g.magFilter=Je,g.format=$t,p(Object.assign(g,{videoSource:d}))}else h(new Error("Video download Error: "+f.status))},f.onerror=b=>h(b),f.open("GET",d),f.responseType="blob",f.send()}),c=async(d,m)=>{const{video_src:p,video_poster_src:h,points:f}=d;t.videoSource=p,t.rectPoints=tl(f).map(b=>b.map(({x:g,y:P,z:A})=>new O(g,P,A))),t.imageTexture=l(h),m&&(t.videoElement=m),t.videoTexture=await u(t.videoSource,t.videoElement),t.enabled=!!d.enable,t.enabled&&r()},v=()=>{a(),t.videoTexture=void 0,n.off("modeChange",()=>i(!0)),n.off("wantsTapGesture",d=>{if(!t.enabled)return;const[m]=d.intersectObjects(n.scene.children,!0);if(!!m&&/^video/.test(m.object.name))return t.videoTexture&&i(!t.videoTexture.image.muted),!1}),n.off("panoArrived",()=>{if(!t.enabled||o())return;const d=n.camera.position;t.rectPoints.find(p=>{const h=p.reduce((f,b)=>new O(f.x+b.x/p.length,f.y+b.y/p.length,f.z+b.z/p.length),new O);return p.map(f=>new O((f.x+h.x)/2,(f.y+h.y)/2,(f.z+h.z)/2)).filter(f=>{f=f.clone().sub(d).normalize();const b=new ze(d,f),[g]=b.intersectObjects(n.scene.children,!0);return!!g&&/^video/.test(g.object.name)}).length>=2})||i(!0)}),n.off("renderFrame",()=>{t.videoMeshes.forEach(d=>{d&&(d.needsRender=!0)})})};return n.on("modeChange",()=>i(!0)),n.on("wantsTapGesture",d=>{if(!t.enabled)return;const m=n.scene.children.find(h=>/^ModelTVVideoPlugin/.test(h.name));if(!(!m||d.intersectObjects([m]).length===0))return t.videoTexture&&i(!t.videoTexture.image.muted),!1}),n.on("panoArrived",()=>{if(!t.enabled||o())return;const d=n.camera.position;t.rectPoints.find(p=>{const h=p.reduce((f,b)=>new O(f.x+b.x/p.length,f.y+b.y/p.length,f.z+b.z/p.length),new O);return p.map(f=>new O((f.x+h.x)/2,(f.y+h.y)/2,(f.z+h.z)/2)).filter(f=>{f=f.clone().sub(d).normalize();const b=new ze(d,f),[g]=b.intersectObjects(n.scene.children,!0);return!!g&&/^video/.test(g.object.name)}).length>=2})||i(!0)}),n.on("renderFrame",()=>{t.videoMeshes.forEach(d=>{d&&(d.needsRender=!0)})}),Object.assign(window,{$state:t}),{enable:r,disable:a,load:c,dispose:v}};var Qn;(function(n){n.SMALL="small",n.MIDLLE="middle",n.LARGE="large",n.EXTRA_LARGE="x-large"})(Qn||(Qn={}));export{ii as C,_e as F,il as M,al as P,Ae as R,rl as T,ol as a,ll as b,ul as c,cl as d,sl as e,fl as f,dl as g,hl as h,ml as i,pl as j};
