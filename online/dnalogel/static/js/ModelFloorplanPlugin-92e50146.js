import{u as p,D as c}from"./useFetchDatas-f7287a8d.js";import{r as t,a as v,u as h,b as P,aN as l,F as s,j as o,aO as w,d as m,aP as _,aQ as r,aR as A,aS as E,c as S,p as x,e as O,B as L,aM as M}from"./vendor-0279cb68.js";import{F as N,e as b}from"./index.es-7421fa40.js";import{g as D}from"./getInitialParamFromUrl-141e6748.js";function u(){return{width:window.innerWidth,height:window.innerHeight}}function R(){const[i,e]=t.exports.useState(u);return t.exports.useEffect(()=>{const n=()=>e(u());return window.addEventListener("resize",n,!1),()=>window.removeEventListener("resize",n,!1)}),i}const k=i=>{const e=v(),[n,g]=h(),f=P(),a=p(c.FLOOR_PLAN_SERVER_PLUGIN_DATA);return t.exports.useEffect(()=>{e.plugins.modelFloorplanPlugin.hooks.on("showAnimationEnded",()=>{console.log("\u{1F436}-- ModelFloorplanPlugin -- show")}),e.plugins.modelFloorplanPlugin.hooks.on("hide",()=>{console.log("\u{1F436}-- ModelFloorplanPlugin -- hide")})},[e]),l("modelLoaded",()=>{!a||JSON.stringify(a)==="{}"||Promise.resolve(e.plugins.modelFloorplanPlugin.load(a)).then(()=>{e.plugins.modelFloorplanPlugin.show()})},[a]),l("initAnimationEnded",()=>{n.mode===s.Mode.Floorplan&&e.plugins.modelFloorplanPlugin.show()},[n.mode]),f!=="Loaded"?null:o(w,{sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"transparent"},className:"topview-floorplan-plugin-use",children:m(_,{showLabels:!0,value:n.mode,onChange:(B,F)=>{g({mode:F})},children:[o(r,{label:"\u5168\u666F\u6F2B\u6E38",icon:o(A,{}),value:s.Mode.Panorama}),o(r,{label:"\u7A7A\u95F4\u603B\u89C8",icon:o(E,{}),value:s.Mode.Floorplan})]})})},z={attachedTo:N.CEILING},d=D(),C=JSON.stringify(d)!=="{}"?d:z,T=S({imageOptions:{size:512},textureOptions:{size:512},plugins:[[b,"modelFloorplanPlugin",{selector:".plugin-full-screen-container",...C}]]}),y=()=>{const i=R(),e=p(c.WORK);return e&&m(T,{initialWork:x(e),ref:n=>Object.assign(window,{$five:n?.five}),children:[o(O,{...i}),o(L,{className:"plugin-full-screen-container",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}),o(k,{})]})};M.render(o(y,{}),document.querySelector("#app"));
