import{g as b,w as v}from"./mockData-985af735.js";import{r,a as C,u as R,b as y,t as B,d as c,B as m,j as e,v as f,I as E,J as _,F as l,w as A,x as g,y as T,z as k,c as z,H as O,p as L,e as M,R as N}from"./vendor-74dbed36.js";function h(){return{width:window.innerWidth,height:window.innerHeight}}function W(){const[o,s]=r.exports.useState(h);return r.exports.useEffect(()=>{const t=()=>s(h());return window.addEventListener("resize",t,!1),()=>window.removeEventListener("resize",t,!1)}),o}const w={STOP:"\u505C\u6B62\u9009\u70B9",START:"\u8FDB\u5165\u9009\u70B9",CLEAR:"\u6E05\u7406"},j=o=>{const t=C().plugins.panoCursorRaycasterPlugin,[d,P]=R(),u=y(),[a,x]=r.exports.useState(!1),[p,S]=r.exports.useState(),F=()=>{x(!a)};return B("wantsTapGesture",()=>{if(u!=="Loaded"){console.warn("five model not ready!");return}if(!a){console.warn("not allow to select point");return}const n=t.intersection();if(!n)return;console.log(n),t.pointAxesHelper(n.point);const i=p||[];return i.push(n.point),S(i),!1},[a,u]),c(m,{children:[e(f,{sx:{position:"fixed",top:"10px",right:"10px",backgroundColor:"transparent"},children:e(E,{size:"large","aria-label":"large button group",orientation:"vertical",children:e(_,{onClick:F,disabled:u!=="Loaded"||d.mode!==l.Mode.Panorama,children:a?w.STOP:w.START})})}),e(f,{sx:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"transparent"},children:c(A,{showLabels:!0,value:d.mode,onChange:(n,i)=>{P({mode:i})},children:[e(g,{label:"\u5168\u666F\u6F2B\u6E38",icon:e(T,{}),value:l.Mode.Panorama}),e(g,{label:"\u7A7A\u95F4\u603B\u89C8",icon:e(k,{}),value:l.Mode.Floorplan})]})})]})},D=z({onlyRenderIfNeeds:!0,plugins:[[b,"panoCursorRaycasterPlugin"]]}),I=()=>{const o=W(),s=O.memo(()=>e(m,{className:"plugin-full-screen-container",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}),()=>!0);return v&&c(D,{initialWork:L(v),ref:t=>Object.assign(window,{$five:t?.five}),children:[e(M,{...o}),e(s,{}),e(j,{})]})};N.render(e(I,{}),document.querySelector("#app"));
