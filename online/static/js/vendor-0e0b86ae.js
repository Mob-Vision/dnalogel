function _mergeNamespaces(eo,to){return to.forEach(function(ro){ro&&typeof ro!="string"&&!Array.isArray(ro)&&Object.keys(ro).forEach(function(no){if(no!=="default"&&!(no in eo)){var io=Object.getOwnPropertyDescriptor(ro,no);Object.defineProperty(eo,no,io.get?io:{enumerable:!0,get:function(){return ro[no]}})}})}),Object.freeze(eo)}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(eo){if(eo.__esModule)return eo;var to=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(eo).forEach(function(ro){var no=Object.getOwnPropertyDescriptor(eo,ro);Object.defineProperty(to,ro,no.get?no:{enumerable:!0,get:function(){return eo[ro]}})}),to}var reactDom={exports:{}},reactDom_production_min={},react$1={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(eo){if(eo==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(eo)}function shouldUseNative(){try{if(!Object.assign)return!1;var eo=new String("abc");if(eo[5]="de",Object.getOwnPropertyNames(eo)[0]==="5")return!1;for(var to={},ro=0;ro<10;ro++)to["_"+String.fromCharCode(ro)]=ro;var no=Object.getOwnPropertyNames(to).map(function(oo){return to[oo]});if(no.join("")!=="0123456789")return!1;var io={};return"abcdefghijklmnopqrst".split("").forEach(function(oo){io[oo]=oo}),Object.keys(Object.assign({},io)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(eo,to){for(var ro,no=toObject(eo),io,oo=1;oo<arguments.length;oo++){ro=Object(arguments[oo]);for(var ao in ro)hasOwnProperty.call(ro,ao)&&(no[ao]=ro[ao]);if(getOwnPropertySymbols){io=getOwnPropertySymbols(ro);for(var so=0;so<io.length;so++)propIsEnumerable.call(ro,io[so])&&(no[io[so]]=ro[io[so]])}}return no};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$5=objectAssign,n$6=60103,p$5=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$4=60109,r$6=60110,t$4=60112;react_production_min.Suspense=60113;var u$4=60115,v$4=60116;if(typeof Symbol=="function"&&Symbol.for){var w$4=Symbol.for;n$6=w$4("react.element"),p$5=w$4("react.portal"),react_production_min.Fragment=w$4("react.fragment"),react_production_min.StrictMode=w$4("react.strict_mode"),react_production_min.Profiler=w$4("react.profiler"),q$4=w$4("react.provider"),r$6=w$4("react.context"),t$4=w$4("react.forward_ref"),react_production_min.Suspense=w$4("react.suspense"),u$4=w$4("react.memo"),v$4=w$4("react.lazy")}var x$4=typeof Symbol=="function"&&Symbol.iterator;function y$5(eo){return eo===null||typeof eo!="object"?null:(eo=x$4&&eo[x$4]||eo["@@iterator"],typeof eo=="function"?eo:null)}function z$3(eo){for(var to="https://reactjs.org/docs/error-decoder.html?invariant="+eo,ro=1;ro<arguments.length;ro++)to+="&args[]="+encodeURIComponent(arguments[ro]);return"Minified React error #"+eo+"; visit "+to+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$3={};function C$3(eo,to,ro){this.props=eo,this.context=to,this.refs=B$3,this.updater=ro||A$4}C$3.prototype.isReactComponent={};C$3.prototype.setState=function(eo,to){if(typeof eo!="object"&&typeof eo!="function"&&eo!=null)throw Error(z$3(85));this.updater.enqueueSetState(this,eo,to,"setState")};C$3.prototype.forceUpdate=function(eo){this.updater.enqueueForceUpdate(this,eo,"forceUpdate")};function D$3(){}D$3.prototype=C$3.prototype;function E$4(eo,to,ro){this.props=eo,this.context=to,this.refs=B$3,this.updater=ro||A$4}var F$4=E$4.prototype=new D$3;F$4.constructor=E$4;l$5(F$4,C$3.prototype);F$4.isPureReactComponent=!0;var G$3={current:null},H$3=Object.prototype.hasOwnProperty,I$3={key:!0,ref:!0,__self:!0,__source:!0};function J$1(eo,to,ro){var no,io={},oo=null,ao=null;if(to!=null)for(no in to.ref!==void 0&&(ao=to.ref),to.key!==void 0&&(oo=""+to.key),to)H$3.call(to,no)&&!I$3.hasOwnProperty(no)&&(io[no]=to[no]);var so=arguments.length-2;if(so===1)io.children=ro;else if(1<so){for(var uo=Array(so),lo=0;lo<so;lo++)uo[lo]=arguments[lo+2];io.children=uo}if(eo&&eo.defaultProps)for(no in so=eo.defaultProps,so)io[no]===void 0&&(io[no]=so[no]);return{$$typeof:n$6,type:eo,key:oo,ref:ao,props:io,_owner:G$3.current}}function K$1(eo,to){return{$$typeof:n$6,type:eo.type,key:to,ref:eo.ref,props:eo.props,_owner:eo._owner}}function L$2(eo){return typeof eo=="object"&&eo!==null&&eo.$$typeof===n$6}function escape$1(eo){var to={"=":"=0",":":"=2"};return"$"+eo.replace(/[=:]/g,function(ro){return to[ro]})}var M$3=/\/+/g;function N$3(eo,to){return typeof eo=="object"&&eo!==null&&eo.key!=null?escape$1(""+eo.key):to.toString(36)}function O$3(eo,to,ro,no,io){var oo=typeof eo;(oo==="undefined"||oo==="boolean")&&(eo=null);var ao=!1;if(eo===null)ao=!0;else switch(oo){case"string":case"number":ao=!0;break;case"object":switch(eo.$$typeof){case n$6:case p$5:ao=!0}}if(ao)return ao=eo,io=io(ao),eo=no===""?"."+N$3(ao,0):no,Array.isArray(io)?(ro="",eo!=null&&(ro=eo.replace(M$3,"$&/")+"/"),O$3(io,to,ro,"",function(lo){return lo})):io!=null&&(L$2(io)&&(io=K$1(io,ro+(!io.key||ao&&ao.key===io.key?"":(""+io.key).replace(M$3,"$&/")+"/")+eo)),to.push(io)),1;if(ao=0,no=no===""?".":no+":",Array.isArray(eo))for(var so=0;so<eo.length;so++){oo=eo[so];var uo=no+N$3(oo,so);ao+=O$3(oo,to,ro,uo,io)}else if(uo=y$5(eo),typeof uo=="function")for(eo=uo.call(eo),so=0;!(oo=eo.next()).done;)oo=oo.value,uo=no+N$3(oo,so++),ao+=O$3(oo,to,ro,uo,io);else if(oo==="object")throw to=""+eo,Error(z$3(31,to==="[object Object]"?"object with keys {"+Object.keys(eo).join(", ")+"}":to));return ao}function P$3(eo,to,ro){if(eo==null)return eo;var no=[],io=0;return O$3(eo,no,"","",function(oo){return to.call(ro,oo,io++)}),no}function Q$1(eo){if(eo._status===-1){var to=eo._result;to=to(),eo._status=0,eo._result=to,to.then(function(ro){eo._status===0&&(ro=ro.default,eo._status=1,eo._result=ro)},function(ro){eo._status===0&&(eo._status=2,eo._result=ro)})}if(eo._status===1)return eo._result;throw eo._result}var R$3={current:null};function S$3(){var eo=R$3.current;if(eo===null)throw Error(z$3(321));return eo}var T$2={ReactCurrentDispatcher:R$3,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$3,IsSomeRendererActing:{current:!1},assign:l$5};react_production_min.Children={map:P$3,forEach:function(eo,to,ro){P$3(eo,function(){to.apply(this,arguments)},ro)},count:function(eo){var to=0;return P$3(eo,function(){to++}),to},toArray:function(eo){return P$3(eo,function(to){return to})||[]},only:function(eo){if(!L$2(eo))throw Error(z$3(143));return eo}};react_production_min.Component=C$3;react_production_min.PureComponent=E$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$2;react_production_min.cloneElement=function(eo,to,ro){if(eo==null)throw Error(z$3(267,eo));var no=l$5({},eo.props),io=eo.key,oo=eo.ref,ao=eo._owner;if(to!=null){if(to.ref!==void 0&&(oo=to.ref,ao=G$3.current),to.key!==void 0&&(io=""+to.key),eo.type&&eo.type.defaultProps)var so=eo.type.defaultProps;for(uo in to)H$3.call(to,uo)&&!I$3.hasOwnProperty(uo)&&(no[uo]=to[uo]===void 0&&so!==void 0?so[uo]:to[uo])}var uo=arguments.length-2;if(uo===1)no.children=ro;else if(1<uo){so=Array(uo);for(var lo=0;lo<uo;lo++)so[lo]=arguments[lo+2];no.children=so}return{$$typeof:n$6,type:eo.type,key:io,ref:oo,props:no,_owner:ao}};react_production_min.createContext=function(eo,to){return to===void 0&&(to=null),eo={$$typeof:r$6,_calculateChangedBits:to,_currentValue:eo,_currentValue2:eo,_threadCount:0,Provider:null,Consumer:null},eo.Provider={$$typeof:q$4,_context:eo},eo.Consumer=eo};react_production_min.createElement=J$1;react_production_min.createFactory=function(eo){var to=J$1.bind(null,eo);return to.type=eo,to};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(eo){return{$$typeof:t$4,render:eo}};react_production_min.isValidElement=L$2;react_production_min.lazy=function(eo){return{$$typeof:v$4,_payload:{_status:-1,_result:eo},_init:Q$1}};react_production_min.memo=function(eo,to){return{$$typeof:u$4,type:eo,compare:to===void 0?null:to}};react_production_min.useCallback=function(eo,to){return S$3().useCallback(eo,to)};react_production_min.useContext=function(eo,to){return S$3().useContext(eo,to)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(eo,to){return S$3().useEffect(eo,to)};react_production_min.useImperativeHandle=function(eo,to,ro){return S$3().useImperativeHandle(eo,to,ro)};react_production_min.useLayoutEffect=function(eo,to){return S$3().useLayoutEffect(eo,to)};react_production_min.useMemo=function(eo,to){return S$3().useMemo(eo,to)};react_production_min.useReducer=function(eo,to,ro){return S$3().useReducer(eo,to,ro)};react_production_min.useRef=function(eo){return S$3().useRef(eo)};react_production_min.useState=function(eo){return S$3().useState(eo)};react_production_min.version="17.0.2";react$1.exports=react_production_min;var React=react$1.exports,React$1=Object.freeze(_mergeNamespaces({__proto__:null,[Symbol.toStringTag]:"Module",default:React},[react$1.exports])),scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(eo){var to,ro,no,io;if(typeof performance=="object"&&typeof performance.now=="function"){var oo=performance;eo.unstable_now=function(){return oo.now()}}else{var ao=Date,so=ao.now();eo.unstable_now=function(){return ao.now()-so}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var uo=null,lo=null,co=function(){if(uo!==null)try{var Go=eo.unstable_now();uo(!0,Go),uo=null}catch(Xo){throw setTimeout(co,0),Xo}};to=function(Go){uo!==null?setTimeout(to,0,Go):(uo=Go,setTimeout(co,0))},ro=function(Go,Xo){lo=setTimeout(Go,Xo)},no=function(){clearTimeout(lo)},eo.unstable_shouldYield=function(){return!1},io=eo.unstable_forceFrameRate=function(){}}else{var fo=window.setTimeout,mo=window.clearTimeout;if(typeof console!="undefined"){var go=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof go!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var yo=!1,vo=null,Ao=-1,ho=5,po=0;eo.unstable_shouldYield=function(){return eo.unstable_now()>=po},io=function(){},eo.unstable_forceFrameRate=function(Go){0>Go||125<Go?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ho=0<Go?Math.floor(1e3/Go):5};var Mo=new MessageChannel,xo=Mo.port2;Mo.port1.onmessage=function(){if(vo!==null){var Go=eo.unstable_now();po=Go+ho;try{vo(!0,Go)?xo.postMessage(null):(yo=!1,vo=null)}catch(Xo){throw xo.postMessage(null),Xo}}else yo=!1},to=function(Go){vo=Go,yo||(yo=!0,xo.postMessage(null))},ro=function(Go,Xo){Ao=fo(function(){Go(eo.unstable_now())},Xo)},no=function(){mo(Ao),Ao=-1}}function wo(Go,Xo){var va=Go.length;Go.push(Xo);e:for(;;){var tu=va-1>>>1,Zs=Go[tu];if(Zs!==void 0&&0<To(Zs,Xo))Go[tu]=Xo,Go[va]=Zs,va=tu;else break e}}function bo(Go){return Go=Go[0],Go===void 0?null:Go}function _o(Go){var Xo=Go[0];if(Xo!==void 0){var va=Go.pop();if(va!==Xo){Go[0]=va;e:for(var tu=0,Zs=Go.length;tu<Zs;){var ga=2*(tu+1)-1,qs=Go[ga],su=ga+1,uu=Go[su];if(qs!==void 0&&0>To(qs,va))uu!==void 0&&0>To(uu,qs)?(Go[tu]=uu,Go[su]=va,tu=su):(Go[tu]=qs,Go[ga]=va,tu=ga);else if(uu!==void 0&&0>To(uu,va))Go[tu]=uu,Go[su]=va,tu=su;else break e}}return Xo}return null}function To(Go,Xo){var va=Go.sortIndex-Xo.sortIndex;return va!==0?va:Go.id-Xo.id}var No=[],Po=[],Co=1,Do=null,zo=3,Ro=!1,Lo=!1,$o=!1;function jo(Go){for(var Xo=bo(Po);Xo!==null;){if(Xo.callback===null)_o(Po);else if(Xo.startTime<=Go)_o(Po),Xo.sortIndex=Xo.expirationTime,wo(No,Xo);else break;Xo=bo(Po)}}function Wo(Go){if($o=!1,jo(Go),!Lo)if(bo(No)!==null)Lo=!0,to(Ko);else{var Xo=bo(Po);Xo!==null&&ro(Wo,Xo.startTime-Go)}}function Ko(Go,Xo){Lo=!1,$o&&($o=!1,no()),Ro=!0;var va=zo;try{for(jo(Xo),Do=bo(No);Do!==null&&(!(Do.expirationTime>Xo)||Go&&!eo.unstable_shouldYield());){var tu=Do.callback;if(typeof tu=="function"){Do.callback=null,zo=Do.priorityLevel;var Zs=tu(Do.expirationTime<=Xo);Xo=eo.unstable_now(),typeof Zs=="function"?Do.callback=Zs:Do===bo(No)&&_o(No),jo(Xo)}else _o(No);Do=bo(No)}if(Do!==null)var ga=!0;else{var qs=bo(Po);qs!==null&&ro(Wo,qs.startTime-Xo),ga=!1}return ga}finally{Do=null,zo=va,Ro=!1}}var Jo=io;eo.unstable_IdlePriority=5,eo.unstable_ImmediatePriority=1,eo.unstable_LowPriority=4,eo.unstable_NormalPriority=3,eo.unstable_Profiling=null,eo.unstable_UserBlockingPriority=2,eo.unstable_cancelCallback=function(Go){Go.callback=null},eo.unstable_continueExecution=function(){Lo||Ro||(Lo=!0,to(Ko))},eo.unstable_getCurrentPriorityLevel=function(){return zo},eo.unstable_getFirstCallbackNode=function(){return bo(No)},eo.unstable_next=function(Go){switch(zo){case 1:case 2:case 3:var Xo=3;break;default:Xo=zo}var va=zo;zo=Xo;try{return Go()}finally{zo=va}},eo.unstable_pauseExecution=function(){},eo.unstable_requestPaint=Jo,eo.unstable_runWithPriority=function(Go,Xo){switch(Go){case 1:case 2:case 3:case 4:case 5:break;default:Go=3}var va=zo;zo=Go;try{return Xo()}finally{zo=va}},eo.unstable_scheduleCallback=function(Go,Xo,va){var tu=eo.unstable_now();switch(typeof va=="object"&&va!==null?(va=va.delay,va=typeof va=="number"&&0<va?tu+va:tu):va=tu,Go){case 1:var Zs=-1;break;case 2:Zs=250;break;case 5:Zs=1073741823;break;case 4:Zs=1e4;break;default:Zs=5e3}return Zs=va+Zs,Go={id:Co++,callback:Xo,priorityLevel:Go,startTime:va,expirationTime:Zs,sortIndex:-1},va>tu?(Go.sortIndex=va,wo(Po,Go),bo(No)===null&&Go===bo(Po)&&($o?no():$o=!0,ro(Wo,va-tu))):(Go.sortIndex=Zs,wo(No,Go),Lo||Ro||(Lo=!0,to(Ko))),Go},eo.unstable_wrapCallback=function(Go){var Xo=zo;return function(){var va=zo;zo=Xo;try{return Go.apply(this,arguments)}finally{zo=va}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react$1.exports,m$5=objectAssign,r$5=scheduler.exports;function y$4(eo){for(var to="https://reactjs.org/docs/error-decoder.html?invariant="+eo,ro=1;ro<arguments.length;ro++)to+="&args[]="+encodeURIComponent(arguments[ro]);return"Minified React error #"+eo+"; visit "+to+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y$4(227));var ba=new Set,ca={};function da(eo,to){ea(eo,to),ea(eo+"Capture",to)}function ea(eo,to){for(ca[eo]=to,eo=0;eo<to.length;eo++)ba.add(to[eo])}var fa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(eo){return ia.call(ka,eo)?!0:ia.call(ja,eo)?!1:ha.test(eo)?ka[eo]=!0:(ja[eo]=!0,!1)}function ma(eo,to,ro,no){if(ro!==null&&ro.type===0)return!1;switch(typeof to){case"function":case"symbol":return!0;case"boolean":return no?!1:ro!==null?!ro.acceptsBooleans:(eo=eo.toLowerCase().slice(0,5),eo!=="data-"&&eo!=="aria-");default:return!1}}function na(eo,to,ro,no){if(to===null||typeof to=="undefined"||ma(eo,to,ro,no))return!0;if(no)return!1;if(ro!==null)switch(ro.type){case 3:return!to;case 4:return to===!1;case 5:return isNaN(to);case 6:return isNaN(to)||1>to}return!1}function B$2(eo,to,ro,no,io,oo,ao){this.acceptsBooleans=to===2||to===3||to===4,this.attributeName=no,this.attributeNamespace=io,this.mustUseProperty=ro,this.propertyName=eo,this.type=to,this.sanitizeURL=oo,this.removeEmptyString=ao}var D$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(eo){D$2[eo]=new B$2(eo,0,!1,eo,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(eo){var to=eo[0];D$2[to]=new B$2(to,1,!1,eo[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(eo){D$2[eo]=new B$2(eo,2,!1,eo.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(eo){D$2[eo]=new B$2(eo,2,!1,eo,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(eo){D$2[eo]=new B$2(eo,3,!1,eo.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(eo){D$2[eo]=new B$2(eo,3,!0,eo,null,!1,!1)});["capture","download"].forEach(function(eo){D$2[eo]=new B$2(eo,4,!1,eo,null,!1,!1)});["cols","rows","size","span"].forEach(function(eo){D$2[eo]=new B$2(eo,6,!1,eo,null,!1,!1)});["rowSpan","start"].forEach(function(eo){D$2[eo]=new B$2(eo,5,!1,eo.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(eo){return eo[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(eo){var to=eo.replace(oa,pa);D$2[to]=new B$2(to,1,!1,eo,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(eo){var to=eo.replace(oa,pa);D$2[to]=new B$2(to,1,!1,eo,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(eo){var to=eo.replace(oa,pa);D$2[to]=new B$2(to,1,!1,eo,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(eo){D$2[eo]=new B$2(eo,1,!1,eo.toLowerCase(),null,!1,!1)});D$2.xlinkHref=new B$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(eo){D$2[eo]=new B$2(eo,1,!1,eo.toLowerCase(),null,!0,!0)});function qa(eo,to,ro,no){var io=D$2.hasOwnProperty(to)?D$2[to]:null,oo=io!==null?io.type===0:no?!1:!(!(2<to.length)||to[0]!=="o"&&to[0]!=="O"||to[1]!=="n"&&to[1]!=="N");oo||(na(to,ro,io,no)&&(ro=null),no||io===null?la(to)&&(ro===null?eo.removeAttribute(to):eo.setAttribute(to,""+ro)):io.mustUseProperty?eo[io.propertyName]=ro===null?io.type===3?!1:"":ro:(to=io.attributeName,no=io.attributeNamespace,ro===null?eo.removeAttribute(to):(io=io.type,ro=io===3||io===4&&ro===!0?"":""+ro,no?eo.setAttributeNS(no,to,ro):eo.setAttribute(to,ro))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E$3=Symbol.for;sa=E$3("react.element"),ta=E$3("react.portal"),ua=E$3("react.fragment"),wa=E$3("react.strict_mode"),xa=E$3("react.profiler"),ya=E$3("react.provider"),za=E$3("react.context"),Aa=E$3("react.forward_ref"),Ba=E$3("react.suspense"),Ca=E$3("react.suspense_list"),Da=E$3("react.memo"),Ea=E$3("react.lazy"),Fa=E$3("react.block"),E$3("react.scope"),Ga=E$3("react.opaque.id"),Ha=E$3("react.debug_trace_mode"),Ia=E$3("react.offscreen"),Ja=E$3("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(eo){return eo===null||typeof eo!="object"?null:(eo=Ka&&eo[Ka]||eo["@@iterator"],typeof eo=="function"?eo:null)}var Ma;function Na(eo){if(Ma===void 0)try{throw Error()}catch(ro){var to=ro.stack.trim().match(/\n( *(at )?)/);Ma=to&&to[1]||""}return`
`+Ma+eo}var Oa=!1;function Pa(eo,to){if(!eo||Oa)return"";Oa=!0;var ro=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(to)if(to=function(){throw Error()},Object.defineProperty(to.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(to,[])}catch(uo){var no=uo}Reflect.construct(eo,[],to)}else{try{to.call()}catch(uo){no=uo}eo.call(to.prototype)}else{try{throw Error()}catch(uo){no=uo}eo()}}catch(uo){if(uo&&no&&typeof uo.stack=="string"){for(var io=uo.stack.split(`
`),oo=no.stack.split(`
`),ao=io.length-1,so=oo.length-1;1<=ao&&0<=so&&io[ao]!==oo[so];)so--;for(;1<=ao&&0<=so;ao--,so--)if(io[ao]!==oo[so]){if(ao!==1||so!==1)do if(ao--,so--,0>so||io[ao]!==oo[so])return`
`+io[ao].replace(" at new "," at ");while(1<=ao&&0<=so);break}}}finally{Oa=!1,Error.prepareStackTrace=ro}return(eo=eo?eo.displayName||eo.name:"")?Na(eo):""}function Qa(eo){switch(eo.tag){case 5:return Na(eo.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return eo=Pa(eo.type,!1),eo;case 11:return eo=Pa(eo.type.render,!1),eo;case 22:return eo=Pa(eo.type._render,!1),eo;case 1:return eo=Pa(eo.type,!0),eo;default:return""}}function Ra(eo){if(eo==null)return null;if(typeof eo=="function")return eo.displayName||eo.name||null;if(typeof eo=="string")return eo;switch(eo){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof eo=="object")switch(eo.$$typeof){case za:return(eo.displayName||"Context")+".Consumer";case ya:return(eo._context.displayName||"Context")+".Provider";case Aa:var to=eo.render;return to=to.displayName||to.name||"",eo.displayName||(to!==""?"ForwardRef("+to+")":"ForwardRef");case Da:return Ra(eo.type);case Fa:return Ra(eo._render);case Ea:to=eo._payload,eo=eo._init;try{return Ra(eo(to))}catch{}}return null}function Sa(eo){switch(typeof eo){case"boolean":case"number":case"object":case"string":case"undefined":return eo;default:return""}}function Ta(eo){var to=eo.type;return(eo=eo.nodeName)&&eo.toLowerCase()==="input"&&(to==="checkbox"||to==="radio")}function Ua(eo){var to=Ta(eo)?"checked":"value",ro=Object.getOwnPropertyDescriptor(eo.constructor.prototype,to),no=""+eo[to];if(!eo.hasOwnProperty(to)&&typeof ro!="undefined"&&typeof ro.get=="function"&&typeof ro.set=="function"){var io=ro.get,oo=ro.set;return Object.defineProperty(eo,to,{configurable:!0,get:function(){return io.call(this)},set:function(ao){no=""+ao,oo.call(this,ao)}}),Object.defineProperty(eo,to,{enumerable:ro.enumerable}),{getValue:function(){return no},setValue:function(ao){no=""+ao},stopTracking:function(){eo._valueTracker=null,delete eo[to]}}}}function Va(eo){eo._valueTracker||(eo._valueTracker=Ua(eo))}function Wa(eo){if(!eo)return!1;var to=eo._valueTracker;if(!to)return!0;var ro=to.getValue(),no="";return eo&&(no=Ta(eo)?eo.checked?"true":"false":eo.value),eo=no,eo!==ro?(to.setValue(eo),!0):!1}function Xa(eo){if(eo=eo||(typeof document!="undefined"?document:void 0),typeof eo=="undefined")return null;try{return eo.activeElement||eo.body}catch{return eo.body}}function Ya(eo,to){var ro=to.checked;return m$5({},to,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ro!=null?ro:eo._wrapperState.initialChecked})}function Za(eo,to){var ro=to.defaultValue==null?"":to.defaultValue,no=to.checked!=null?to.checked:to.defaultChecked;ro=Sa(to.value!=null?to.value:ro),eo._wrapperState={initialChecked:no,initialValue:ro,controlled:to.type==="checkbox"||to.type==="radio"?to.checked!=null:to.value!=null}}function $a(eo,to){to=to.checked,to!=null&&qa(eo,"checked",to,!1)}function ab(eo,to){$a(eo,to);var ro=Sa(to.value),no=to.type;if(ro!=null)no==="number"?(ro===0&&eo.value===""||eo.value!=ro)&&(eo.value=""+ro):eo.value!==""+ro&&(eo.value=""+ro);else if(no==="submit"||no==="reset"){eo.removeAttribute("value");return}to.hasOwnProperty("value")?bb(eo,to.type,ro):to.hasOwnProperty("defaultValue")&&bb(eo,to.type,Sa(to.defaultValue)),to.checked==null&&to.defaultChecked!=null&&(eo.defaultChecked=!!to.defaultChecked)}function cb(eo,to,ro){if(to.hasOwnProperty("value")||to.hasOwnProperty("defaultValue")){var no=to.type;if(!(no!=="submit"&&no!=="reset"||to.value!==void 0&&to.value!==null))return;to=""+eo._wrapperState.initialValue,ro||to===eo.value||(eo.value=to),eo.defaultValue=to}ro=eo.name,ro!==""&&(eo.name=""),eo.defaultChecked=!!eo._wrapperState.initialChecked,ro!==""&&(eo.name=ro)}function bb(eo,to,ro){(to!=="number"||Xa(eo.ownerDocument)!==eo)&&(ro==null?eo.defaultValue=""+eo._wrapperState.initialValue:eo.defaultValue!==""+ro&&(eo.defaultValue=""+ro))}function db(eo){var to="";return aa.Children.forEach(eo,function(ro){ro!=null&&(to+=ro)}),to}function eb(eo,to){return eo=m$5({children:void 0},to),(to=db(to.children))&&(eo.children=to),eo}function fb(eo,to,ro,no){if(eo=eo.options,to){to={};for(var io=0;io<ro.length;io++)to["$"+ro[io]]=!0;for(ro=0;ro<eo.length;ro++)io=to.hasOwnProperty("$"+eo[ro].value),eo[ro].selected!==io&&(eo[ro].selected=io),io&&no&&(eo[ro].defaultSelected=!0)}else{for(ro=""+Sa(ro),to=null,io=0;io<eo.length;io++){if(eo[io].value===ro){eo[io].selected=!0,no&&(eo[io].defaultSelected=!0);return}to!==null||eo[io].disabled||(to=eo[io])}to!==null&&(to.selected=!0)}}function gb(eo,to){if(to.dangerouslySetInnerHTML!=null)throw Error(y$4(91));return m$5({},to,{value:void 0,defaultValue:void 0,children:""+eo._wrapperState.initialValue})}function hb(eo,to){var ro=to.value;if(ro==null){if(ro=to.children,to=to.defaultValue,ro!=null){if(to!=null)throw Error(y$4(92));if(Array.isArray(ro)){if(!(1>=ro.length))throw Error(y$4(93));ro=ro[0]}to=ro}to==null&&(to=""),ro=to}eo._wrapperState={initialValue:Sa(ro)}}function ib(eo,to){var ro=Sa(to.value),no=Sa(to.defaultValue);ro!=null&&(ro=""+ro,ro!==eo.value&&(eo.value=ro),to.defaultValue==null&&eo.defaultValue!==ro&&(eo.defaultValue=ro)),no!=null&&(eo.defaultValue=""+no)}function jb(eo){var to=eo.textContent;to===eo._wrapperState.initialValue&&to!==""&&to!==null&&(eo.value=to)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(eo){switch(eo){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(eo,to){return eo==null||eo==="http://www.w3.org/1999/xhtml"?lb(to):eo==="http://www.w3.org/2000/svg"&&to==="foreignObject"?"http://www.w3.org/1999/xhtml":eo}var nb,ob=function(eo){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(to,ro,no,io){MSApp.execUnsafeLocalFunction(function(){return eo(to,ro,no,io)})}:eo}(function(eo,to){if(eo.namespaceURI!==kb.svg||"innerHTML"in eo)eo.innerHTML=to;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+to.valueOf().toString()+"</svg>",to=nb.firstChild;eo.firstChild;)eo.removeChild(eo.firstChild);for(;to.firstChild;)eo.appendChild(to.firstChild)}});function pb(eo,to){if(to){var ro=eo.firstChild;if(ro&&ro===eo.lastChild&&ro.nodeType===3){ro.nodeValue=to;return}}eo.textContent=to}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(eo){rb.forEach(function(to){to=to+eo.charAt(0).toUpperCase()+eo.substring(1),qb[to]=qb[eo]})});function sb(eo,to,ro){return to==null||typeof to=="boolean"||to===""?"":ro||typeof to!="number"||to===0||qb.hasOwnProperty(eo)&&qb[eo]?(""+to).trim():to+"px"}function tb(eo,to){eo=eo.style;for(var ro in to)if(to.hasOwnProperty(ro)){var no=ro.indexOf("--")===0,io=sb(ro,to[ro],no);ro==="float"&&(ro="cssFloat"),no?eo.setProperty(ro,io):eo[ro]=io}}var ub=m$5({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(eo,to){if(to){if(ub[eo]&&(to.children!=null||to.dangerouslySetInnerHTML!=null))throw Error(y$4(137,eo));if(to.dangerouslySetInnerHTML!=null){if(to.children!=null)throw Error(y$4(60));if(!(typeof to.dangerouslySetInnerHTML=="object"&&"__html"in to.dangerouslySetInnerHTML))throw Error(y$4(61))}if(to.style!=null&&typeof to.style!="object")throw Error(y$4(62))}}function wb(eo,to){if(eo.indexOf("-")===-1)return typeof to.is=="string";switch(eo){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(eo){return eo=eo.target||eo.srcElement||window,eo.correspondingUseElement&&(eo=eo.correspondingUseElement),eo.nodeType===3?eo.parentNode:eo}var yb=null,zb=null,Ab=null;function Bb(eo){if(eo=Cb(eo)){if(typeof yb!="function")throw Error(y$4(280));var to=eo.stateNode;to&&(to=Db(to),yb(eo.stateNode,eo.type,to))}}function Eb(eo){zb?Ab?Ab.push(eo):Ab=[eo]:zb=eo}function Fb(){if(zb){var eo=zb,to=Ab;if(Ab=zb=null,Bb(eo),to)for(eo=0;eo<to.length;eo++)Bb(to[eo])}}function Gb(eo,to){return eo(to)}function Hb(eo,to,ro,no,io){return eo(to,ro,no,io)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(eo,to,ro){if(Lb)return eo(to,ro);Lb=!0;try{return Jb(eo,to,ro)}finally{Lb=!1,Mb()}}function Ob(eo,to){var ro=eo.stateNode;if(ro===null)return null;var no=Db(ro);if(no===null)return null;ro=no[to];e:switch(to){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(no=!no.disabled)||(eo=eo.type,no=!(eo==="button"||eo==="input"||eo==="select"||eo==="textarea")),eo=!no;break e;default:eo=!1}if(eo)return null;if(ro&&typeof ro!="function")throw Error(y$4(231,to,typeof ro));return ro}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(eo,to,ro,no,io,oo,ao,so,uo){var lo=Array.prototype.slice.call(arguments,3);try{to.apply(ro,lo)}catch(co){this.onError(co)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(eo){Sb=!0,Tb=eo}};function Xb(eo,to,ro,no,io,oo,ao,so,uo){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(eo,to,ro,no,io,oo,ao,so,uo){if(Xb.apply(this,arguments),Sb){if(Sb){var lo=Tb;Sb=!1,Tb=null}else throw Error(y$4(198));Ub||(Ub=!0,Vb=lo)}}function Zb(eo){var to=eo,ro=eo;if(eo.alternate)for(;to.return;)to=to.return;else{eo=to;do to=eo,(to.flags&1026)!==0&&(ro=to.return),eo=to.return;while(eo)}return to.tag===3?ro:null}function $b(eo){if(eo.tag===13){var to=eo.memoizedState;if(to===null&&(eo=eo.alternate,eo!==null&&(to=eo.memoizedState)),to!==null)return to.dehydrated}return null}function ac(eo){if(Zb(eo)!==eo)throw Error(y$4(188))}function bc(eo){var to=eo.alternate;if(!to){if(to=Zb(eo),to===null)throw Error(y$4(188));return to!==eo?null:eo}for(var ro=eo,no=to;;){var io=ro.return;if(io===null)break;var oo=io.alternate;if(oo===null){if(no=io.return,no!==null){ro=no;continue}break}if(io.child===oo.child){for(oo=io.child;oo;){if(oo===ro)return ac(io),eo;if(oo===no)return ac(io),to;oo=oo.sibling}throw Error(y$4(188))}if(ro.return!==no.return)ro=io,no=oo;else{for(var ao=!1,so=io.child;so;){if(so===ro){ao=!0,ro=io,no=oo;break}if(so===no){ao=!0,no=io,ro=oo;break}so=so.sibling}if(!ao){for(so=oo.child;so;){if(so===ro){ao=!0,ro=oo,no=io;break}if(so===no){ao=!0,no=oo,ro=io;break}so=so.sibling}if(!ao)throw Error(y$4(189))}}if(ro.alternate!==no)throw Error(y$4(190))}if(ro.tag!==3)throw Error(y$4(188));return ro.stateNode.current===ro?eo:to}function cc(eo){if(eo=bc(eo),!eo)return null;for(var to=eo;;){if(to.tag===5||to.tag===6)return to;if(to.child)to.child.return=to,to=to.child;else{if(to===eo)break;for(;!to.sibling;){if(!to.return||to.return===eo)return null;to=to.return}to.sibling.return=to.return,to=to.sibling}}return null}function dc(eo,to){for(var ro=eo.alternate;to!==null;){if(to===eo||to===ro)return!0;to=to.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(eo,to,ro,no,io){return{blockedOn:eo,domEventName:to,eventSystemFlags:ro|16,nativeEvent:io,targetContainers:[no]}}function sc(eo,to){switch(eo){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(to.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(to.pointerId)}}function tc(eo,to,ro,no,io,oo){return eo===null||eo.nativeEvent!==oo?(eo=rc(to,ro,no,io,oo),to!==null&&(to=Cb(to),to!==null&&fc(to)),eo):(eo.eventSystemFlags|=no,to=eo.targetContainers,io!==null&&to.indexOf(io)===-1&&to.push(io),eo)}function uc(eo,to,ro,no,io){switch(to){case"focusin":return kc=tc(kc,eo,to,ro,no,io),!0;case"dragenter":return lc=tc(lc,eo,to,ro,no,io),!0;case"mouseover":return mc=tc(mc,eo,to,ro,no,io),!0;case"pointerover":var oo=io.pointerId;return nc.set(oo,tc(nc.get(oo)||null,eo,to,ro,no,io)),!0;case"gotpointercapture":return oo=io.pointerId,oc.set(oo,tc(oc.get(oo)||null,eo,to,ro,no,io)),!0}return!1}function vc(eo){var to=wc(eo.target);if(to!==null){var ro=Zb(to);if(ro!==null){if(to=ro.tag,to===13){if(to=$b(ro),to!==null){eo.blockedOn=to,hc(eo.lanePriority,function(){r$5.unstable_runWithPriority(eo.priority,function(){gc(ro)})});return}}else if(to===3&&ro.stateNode.hydrate){eo.blockedOn=ro.tag===3?ro.stateNode.containerInfo:null;return}}}eo.blockedOn=null}function xc(eo){if(eo.blockedOn!==null)return!1;for(var to=eo.targetContainers;0<to.length;){var ro=yc(eo.domEventName,eo.eventSystemFlags,to[0],eo.nativeEvent);if(ro!==null)return to=Cb(ro),to!==null&&fc(to),eo.blockedOn=ro,!1;to.shift()}return!0}function zc(eo,to,ro){xc(eo)&&ro.delete(to)}function Ac(){for(ic=!1;0<jc.length;){var eo=jc[0];if(eo.blockedOn!==null){eo=Cb(eo.blockedOn),eo!==null&&ec(eo);break}for(var to=eo.targetContainers;0<to.length;){var ro=yc(eo.domEventName,eo.eventSystemFlags,to[0],eo.nativeEvent);if(ro!==null){eo.blockedOn=ro;break}to.shift()}eo.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(eo,to){eo.blockedOn===to&&(eo.blockedOn=null,ic||(ic=!0,r$5.unstable_scheduleCallback(r$5.unstable_NormalPriority,Ac)))}function Cc(eo){function to(io){return Bc(io,eo)}if(0<jc.length){Bc(jc[0],eo);for(var ro=1;ro<jc.length;ro++){var no=jc[ro];no.blockedOn===eo&&(no.blockedOn=null)}}for(kc!==null&&Bc(kc,eo),lc!==null&&Bc(lc,eo),mc!==null&&Bc(mc,eo),nc.forEach(to),oc.forEach(to),ro=0;ro<pc.length;ro++)no=pc[ro],no.blockedOn===eo&&(no.blockedOn=null);for(;0<pc.length&&(ro=pc[0],ro.blockedOn===null);)vc(ro),ro.blockedOn===null&&pc.shift()}function Dc(eo,to){var ro={};return ro[eo.toLowerCase()]=to.toLowerCase(),ro["Webkit"+eo]="webkit"+to,ro["Moz"+eo]="moz"+to,ro}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(eo){if(Fc[eo])return Fc[eo];if(!Ec[eo])return eo;var to=Ec[eo],ro;for(ro in to)if(to.hasOwnProperty(ro)&&ro in Gc)return Fc[eo]=to[ro];return eo}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(eo,to){for(var ro=0;ro<eo.length;ro+=2){var no=eo[ro],io=eo[ro+1];io="on"+(io[0].toUpperCase()+io.slice(1)),Nc.set(no,to),Mc.set(no,io),da(io,[no])}}var Qc=r$5.unstable_now;Qc();var F$3=8;function Rc(eo){if((1&eo)!==0)return F$3=15,1;if((2&eo)!==0)return F$3=14,2;if((4&eo)!==0)return F$3=13,4;var to=24&eo;return to!==0?(F$3=12,to):(eo&32)!==0?(F$3=11,32):(to=192&eo,to!==0?(F$3=10,to):(eo&256)!==0?(F$3=9,256):(to=3584&eo,to!==0?(F$3=8,to):(eo&4096)!==0?(F$3=7,4096):(to=4186112&eo,to!==0?(F$3=6,to):(to=62914560&eo,to!==0?(F$3=5,to):eo&67108864?(F$3=4,67108864):(eo&134217728)!==0?(F$3=3,134217728):(to=805306368&eo,to!==0?(F$3=2,to):(1073741824&eo)!==0?(F$3=1,1073741824):(F$3=8,eo))))))}function Sc(eo){switch(eo){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(eo){switch(eo){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$4(358,eo))}}function Uc(eo,to){var ro=eo.pendingLanes;if(ro===0)return F$3=0;var no=0,io=0,oo=eo.expiredLanes,ao=eo.suspendedLanes,so=eo.pingedLanes;if(oo!==0)no=oo,io=F$3=15;else if(oo=ro&134217727,oo!==0){var uo=oo&~ao;uo!==0?(no=Rc(uo),io=F$3):(so&=oo,so!==0&&(no=Rc(so),io=F$3))}else oo=ro&~ao,oo!==0?(no=Rc(oo),io=F$3):so!==0&&(no=Rc(so),io=F$3);if(no===0)return 0;if(no=31-Vc(no),no=ro&((0>no?0:1<<no)<<1)-1,to!==0&&to!==no&&(to&ao)===0){if(Rc(to),io<=F$3)return to;F$3=io}if(to=eo.entangledLanes,to!==0)for(eo=eo.entanglements,to&=no;0<to;)ro=31-Vc(to),io=1<<ro,no|=eo[ro],to&=~io;return no}function Wc(eo){return eo=eo.pendingLanes&-1073741825,eo!==0?eo:eo&1073741824?1073741824:0}function Xc(eo,to){switch(eo){case 15:return 1;case 14:return 2;case 12:return eo=Yc(24&~to),eo===0?Xc(10,to):eo;case 10:return eo=Yc(192&~to),eo===0?Xc(8,to):eo;case 8:return eo=Yc(3584&~to),eo===0&&(eo=Yc(4186112&~to),eo===0&&(eo=512)),eo;case 2:return to=Yc(805306368&~to),to===0&&(to=268435456),to}throw Error(y$4(358,eo))}function Yc(eo){return eo&-eo}function Zc(eo){for(var to=[],ro=0;31>ro;ro++)to.push(eo);return to}function $c(eo,to,ro){eo.pendingLanes|=to;var no=to-1;eo.suspendedLanes&=no,eo.pingedLanes&=no,eo=eo.eventTimes,to=31-Vc(to),eo[to]=ro}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(eo){return eo===0?32:31-(bd(eo)/cd|0)|0}var dd=r$5.unstable_UserBlockingPriority,ed=r$5.unstable_runWithPriority,fd=!0;function gd(eo,to,ro,no){Kb||Ib();var io=hd,oo=Kb;Kb=!0;try{Hb(io,eo,to,ro,no)}finally{(Kb=oo)||Mb()}}function id(eo,to,ro,no){ed(dd,hd.bind(null,eo,to,ro,no))}function hd(eo,to,ro,no){if(fd){var io;if((io=(to&4)===0)&&0<jc.length&&-1<qc.indexOf(eo))eo=rc(null,eo,to,ro,no),jc.push(eo);else{var oo=yc(eo,to,ro,no);if(oo===null)io&&sc(eo,no);else{if(io){if(-1<qc.indexOf(eo)){eo=rc(oo,eo,to,ro,no),jc.push(eo);return}if(uc(oo,eo,to,ro,no))return;sc(eo,no)}jd(eo,to,no,null,ro)}}}}function yc(eo,to,ro,no){var io=xb(no);if(io=wc(io),io!==null){var oo=Zb(io);if(oo===null)io=null;else{var ao=oo.tag;if(ao===13){if(io=$b(oo),io!==null)return io;io=null}else if(ao===3){if(oo.stateNode.hydrate)return oo.tag===3?oo.stateNode.containerInfo:null;io=null}else oo!==io&&(io=null)}}return jd(eo,to,no,io,ro),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var eo,to=ld,ro=to.length,no,io="value"in kd?kd.value:kd.textContent,oo=io.length;for(eo=0;eo<ro&&to[eo]===io[eo];eo++);var ao=ro-eo;for(no=1;no<=ao&&to[ro-no]===io[oo-no];no++);return md=io.slice(eo,1<no?1-no:void 0)}function od(eo){var to=eo.keyCode;return"charCode"in eo?(eo=eo.charCode,eo===0&&to===13&&(eo=13)):eo=to,eo===10&&(eo=13),32<=eo||eo===13?eo:0}function pd(){return!0}function qd(){return!1}function rd(eo){function to(ro,no,io,oo,ao){this._reactName=ro,this._targetInst=io,this.type=no,this.nativeEvent=oo,this.target=ao,this.currentTarget=null;for(var so in eo)eo.hasOwnProperty(so)&&(ro=eo[so],this[so]=ro?ro(oo):oo[so]);return this.isDefaultPrevented=(oo.defaultPrevented!=null?oo.defaultPrevented:oo.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$5(to.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ro=this.nativeEvent;ro&&(ro.preventDefault?ro.preventDefault():typeof ro.returnValue!="unknown"&&(ro.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var ro=this.nativeEvent;ro&&(ro.stopPropagation?ro.stopPropagation():typeof ro.cancelBubble!="unknown"&&(ro.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),to}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(eo){return eo.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$5({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$5({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(eo){return eo.relatedTarget===void 0?eo.fromElement===eo.srcElement?eo.toElement:eo.fromElement:eo.relatedTarget},movementX:function(eo){return"movementX"in eo?eo.movementX:(eo!==yd&&(yd&&eo.type==="mousemove"?(wd=eo.screenX-yd.screenX,xd=eo.screenY-yd.screenY):xd=wd=0,yd=eo),wd)},movementY:function(eo){return"movementY"in eo?eo.movementY:xd}}),Bd=rd(Ad),Cd=m$5({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$5({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$5({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$5({},sd,{clipboardData:function(eo){return"clipboardData"in eo?eo.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$5({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(eo){var to=this.nativeEvent;return to.getModifierState?to.getModifierState(eo):(eo=Od[eo])?!!to[eo]:!1}function zd(){return Pd}var Qd=m$5({},ud,{key:function(eo){if(eo.key){var to=Md[eo.key]||eo.key;if(to!=="Unidentified")return to}return eo.type==="keypress"?(eo=od(eo),eo===13?"Enter":String.fromCharCode(eo)):eo.type==="keydown"||eo.type==="keyup"?Nd[eo.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(eo){return eo.type==="keypress"?od(eo):0},keyCode:function(eo){return eo.type==="keydown"||eo.type==="keyup"?eo.keyCode:0},which:function(eo){return eo.type==="keypress"?od(eo):eo.type==="keydown"||eo.type==="keyup"?eo.keyCode:0}}),Rd=rd(Qd),Sd=m$5({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$5({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$5({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$5({},Ad,{deltaX:function(eo){return"deltaX"in eo?eo.deltaX:"wheelDeltaX"in eo?-eo.wheelDeltaX:0},deltaY:function(eo){return"deltaY"in eo?eo.deltaY:"wheelDeltaY"in eo?-eo.wheelDeltaY:"wheelDelta"in eo?-eo.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=fa&&"CompositionEvent"in window,be$1=null;fa&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=fa&&"TextEvent"in window&&!be$1,de$1=fa&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(eo,to){switch(eo){case"keyup":return $d.indexOf(to.keyCode)!==-1;case"keydown":return to.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(eo){return eo=eo.detail,typeof eo=="object"&&"data"in eo?eo.data:null}var ie$1=!1;function je$1(eo,to){switch(eo){case"compositionend":return he$1(to);case"keypress":return to.which!==32?null:(fe$1=!0,ee$1);case"textInput":return eo=to.data,eo===ee$1&&fe$1?null:eo;default:return null}}function ke$1(eo,to){if(ie$1)return eo==="compositionend"||!ae$1&&ge$1(eo,to)?(eo=nd(),md=ld=kd=null,ie$1=!1,eo):null;switch(eo){case"paste":return null;case"keypress":if(!(to.ctrlKey||to.altKey||to.metaKey)||to.ctrlKey&&to.altKey){if(to.char&&1<to.char.length)return to.char;if(to.which)return String.fromCharCode(to.which)}return null;case"compositionend":return de$1&&to.locale!=="ko"?null:to.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(eo){var to=eo&&eo.nodeName&&eo.nodeName.toLowerCase();return to==="input"?!!le$1[eo.type]:to==="textarea"}function ne$1(eo,to,ro,no){Eb(no),to=oe$1(to,"onChange"),0<to.length&&(ro=new td("onChange","change",null,ro,no),eo.push({event:ro,listeners:to}))}var pe$1=null,qe$1=null;function re$1(eo){se$1(eo,0)}function te$1(eo){var to=ue$1(eo);if(Wa(to))return eo}function ve$1(eo,to){if(eo==="change")return to}var we$1=!1;if(fa){var xe$1;if(fa){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(eo){if(eo.propertyName==="value"&&te$1(qe$1)){var to=[];if(ne$1(to,qe$1,eo,xb(eo)),eo=re$1,Kb)eo(to);else{Kb=!0;try{Gb(eo,to)}finally{Kb=!1,Mb()}}}}function Ce$1(eo,to,ro){eo==="focusin"?(Ae$1(),pe$1=to,qe$1=ro,pe$1.attachEvent("onpropertychange",Be$1)):eo==="focusout"&&Ae$1()}function De$1(eo){if(eo==="selectionchange"||eo==="keyup"||eo==="keydown")return te$1(qe$1)}function Ee$1(eo,to){if(eo==="click")return te$1(to)}function Fe$1(eo,to){if(eo==="input"||eo==="change")return te$1(to)}function Ge$1(eo,to){return eo===to&&(eo!==0||1/eo===1/to)||eo!==eo&&to!==to}var He$1=typeof Object.is=="function"?Object.is:Ge$1,Ie$1=Object.prototype.hasOwnProperty;function Je$1(eo,to){if(He$1(eo,to))return!0;if(typeof eo!="object"||eo===null||typeof to!="object"||to===null)return!1;var ro=Object.keys(eo),no=Object.keys(to);if(ro.length!==no.length)return!1;for(no=0;no<ro.length;no++)if(!Ie$1.call(to,ro[no])||!He$1(eo[ro[no]],to[ro[no]]))return!1;return!0}function Ke$1(eo){for(;eo&&eo.firstChild;)eo=eo.firstChild;return eo}function Le$1(eo,to){var ro=Ke$1(eo);eo=0;for(var no;ro;){if(ro.nodeType===3){if(no=eo+ro.textContent.length,eo<=to&&no>=to)return{node:ro,offset:to-eo};eo=no}e:{for(;ro;){if(ro.nextSibling){ro=ro.nextSibling;break e}ro=ro.parentNode}ro=void 0}ro=Ke$1(ro)}}function Me$1(eo,to){return eo&&to?eo===to?!0:eo&&eo.nodeType===3?!1:to&&to.nodeType===3?Me$1(eo,to.parentNode):"contains"in eo?eo.contains(to):eo.compareDocumentPosition?!!(eo.compareDocumentPosition(to)&16):!1:!1}function Ne$1(){for(var eo=window,to=Xa();to instanceof eo.HTMLIFrameElement;){try{var ro=typeof to.contentWindow.location.href=="string"}catch{ro=!1}if(ro)eo=to.contentWindow;else break;to=Xa(eo.document)}return to}function Oe$1(eo){var to=eo&&eo.nodeName&&eo.nodeName.toLowerCase();return to&&(to==="input"&&(eo.type==="text"||eo.type==="search"||eo.type==="tel"||eo.type==="url"||eo.type==="password")||to==="textarea"||eo.contentEditable==="true")}var Pe$1=fa&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$1=null,Te$1=!1;function Ue$1(eo,to,ro){var no=ro.window===ro?ro.document:ro.nodeType===9?ro:ro.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(no)||(no=Qe$1,"selectionStart"in no&&Oe$1(no)?no={start:no.selectionStart,end:no.selectionEnd}:(no=(no.ownerDocument&&no.ownerDocument.defaultView||window).getSelection(),no={anchorNode:no.anchorNode,anchorOffset:no.anchorOffset,focusNode:no.focusNode,focusOffset:no.focusOffset}),Se$1&&Je$1(Se$1,no)||(Se$1=no,no=oe$1(Re$1,"onSelect"),0<no.length&&(to=new td("onSelect","select",null,to,ro),eo.push({event:to,listeners:no}),to.target=Qe$1)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$1=0;We$1<Ve$1.length;We$1++)Nc.set(Ve$1[We$1],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe$1));function Ze$1(eo,to,ro){var no=eo.type||"unknown-event";eo.currentTarget=ro,Yb(no,to,void 0,eo),eo.currentTarget=null}function se$1(eo,to){to=(to&4)!==0;for(var ro=0;ro<eo.length;ro++){var no=eo[ro],io=no.event;no=no.listeners;e:{var oo=void 0;if(to)for(var ao=no.length-1;0<=ao;ao--){var so=no[ao],uo=so.instance,lo=so.currentTarget;if(so=so.listener,uo!==oo&&io.isPropagationStopped())break e;Ze$1(io,so,lo),oo=uo}else for(ao=0;ao<no.length;ao++){if(so=no[ao],uo=so.instance,lo=so.currentTarget,so=so.listener,uo!==oo&&io.isPropagationStopped())break e;Ze$1(io,so,lo),oo=uo}}}if(Ub)throw eo=Vb,Ub=!1,Vb=null,eo}function G$2(eo,to){var ro=$e$1(to),no=eo+"__bubble";ro.has(no)||(af(to,eo,2,!1),ro.add(no))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(eo){eo[bf]||(eo[bf]=!0,ba.forEach(function(to){Ye$1.has(to)||df(to,!1,eo,null),df(to,!0,eo,null)}))}function df(eo,to,ro,no){var io=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,oo=ro;if(eo==="selectionchange"&&ro.nodeType!==9&&(oo=ro.ownerDocument),no!==null&&!to&&Ye$1.has(eo)){if(eo!=="scroll")return;io|=2,oo=no}var ao=$e$1(oo),so=eo+"__"+(to?"capture":"bubble");ao.has(so)||(to&&(io|=4),af(oo,eo,io,to),ao.add(so))}function af(eo,to,ro,no){var io=Nc.get(to);switch(io===void 0?2:io){case 0:io=gd;break;case 1:io=id;break;default:io=hd}ro=io.bind(null,to,ro,eo),io=void 0,!Pb||to!=="touchstart"&&to!=="touchmove"&&to!=="wheel"||(io=!0),no?io!==void 0?eo.addEventListener(to,ro,{capture:!0,passive:io}):eo.addEventListener(to,ro,!0):io!==void 0?eo.addEventListener(to,ro,{passive:io}):eo.addEventListener(to,ro,!1)}function jd(eo,to,ro,no,io){var oo=no;if((to&1)===0&&(to&2)===0&&no!==null)e:for(;;){if(no===null)return;var ao=no.tag;if(ao===3||ao===4){var so=no.stateNode.containerInfo;if(so===io||so.nodeType===8&&so.parentNode===io)break;if(ao===4)for(ao=no.return;ao!==null;){var uo=ao.tag;if((uo===3||uo===4)&&(uo=ao.stateNode.containerInfo,uo===io||uo.nodeType===8&&uo.parentNode===io))return;ao=ao.return}for(;so!==null;){if(ao=wc(so),ao===null)return;if(uo=ao.tag,uo===5||uo===6){no=oo=ao;continue e}so=so.parentNode}}no=no.return}Nb(function(){var lo=oo,co=xb(ro),fo=[];e:{var mo=Mc.get(eo);if(mo!==void 0){var go=td,yo=eo;switch(eo){case"keypress":if(od(ro)===0)break e;case"keydown":case"keyup":go=Rd;break;case"focusin":yo="focus",go=Fd;break;case"focusout":yo="blur",go=Fd;break;case"beforeblur":case"afterblur":go=Fd;break;case"click":if(ro.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":go=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":go=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":go=Vd;break;case Ic:case Jc:case Kc:go=Hd;break;case Lc:go=Xd;break;case"scroll":go=vd;break;case"wheel":go=Zd;break;case"copy":case"cut":case"paste":go=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":go=Td}var vo=(to&4)!==0,Ao=!vo&&eo==="scroll",ho=vo?mo!==null?mo+"Capture":null:mo;vo=[];for(var po=lo,Mo;po!==null;){Mo=po;var xo=Mo.stateNode;if(Mo.tag===5&&xo!==null&&(Mo=xo,ho!==null&&(xo=Ob(po,ho),xo!=null&&vo.push(ef(po,xo,Mo)))),Ao)break;po=po.return}0<vo.length&&(mo=new go(mo,yo,null,ro,co),fo.push({event:mo,listeners:vo}))}}if((to&7)===0){e:{if(mo=eo==="mouseover"||eo==="pointerover",go=eo==="mouseout"||eo==="pointerout",mo&&(to&16)===0&&(yo=ro.relatedTarget||ro.fromElement)&&(wc(yo)||yo[ff]))break e;if((go||mo)&&(mo=co.window===co?co:(mo=co.ownerDocument)?mo.defaultView||mo.parentWindow:window,go?(yo=ro.relatedTarget||ro.toElement,go=lo,yo=yo?wc(yo):null,yo!==null&&(Ao=Zb(yo),yo!==Ao||yo.tag!==5&&yo.tag!==6)&&(yo=null)):(go=null,yo=lo),go!==yo)){if(vo=Bd,xo="onMouseLeave",ho="onMouseEnter",po="mouse",(eo==="pointerout"||eo==="pointerover")&&(vo=Td,xo="onPointerLeave",ho="onPointerEnter",po="pointer"),Ao=go==null?mo:ue$1(go),Mo=yo==null?mo:ue$1(yo),mo=new vo(xo,po+"leave",go,ro,co),mo.target=Ao,mo.relatedTarget=Mo,xo=null,wc(co)===lo&&(vo=new vo(ho,po+"enter",yo,ro,co),vo.target=Mo,vo.relatedTarget=Ao,xo=vo),Ao=xo,go&&yo)t:{for(vo=go,ho=yo,po=0,Mo=vo;Mo;Mo=gf(Mo))po++;for(Mo=0,xo=ho;xo;xo=gf(xo))Mo++;for(;0<po-Mo;)vo=gf(vo),po--;for(;0<Mo-po;)ho=gf(ho),Mo--;for(;po--;){if(vo===ho||ho!==null&&vo===ho.alternate)break t;vo=gf(vo),ho=gf(ho)}vo=null}else vo=null;go!==null&&hf(fo,mo,go,vo,!1),yo!==null&&Ao!==null&&hf(fo,Ao,yo,vo,!0)}}e:{if(mo=lo?ue$1(lo):window,go=mo.nodeName&&mo.nodeName.toLowerCase(),go==="select"||go==="input"&&mo.type==="file")var wo=ve$1;else if(me$1(mo))if(we$1)wo=Fe$1;else{wo=De$1;var bo=Ce$1}else(go=mo.nodeName)&&go.toLowerCase()==="input"&&(mo.type==="checkbox"||mo.type==="radio")&&(wo=Ee$1);if(wo&&(wo=wo(eo,lo))){ne$1(fo,wo,ro,co);break e}bo&&bo(eo,mo,lo),eo==="focusout"&&(bo=mo._wrapperState)&&bo.controlled&&mo.type==="number"&&bb(mo,"number",mo.value)}switch(bo=lo?ue$1(lo):window,eo){case"focusin":(me$1(bo)||bo.contentEditable==="true")&&(Qe$1=bo,Re$1=lo,Se$1=null);break;case"focusout":Se$1=Re$1=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(fo,ro,co);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(fo,ro,co)}var _o;if(ae$1)e:{switch(eo){case"compositionstart":var To="onCompositionStart";break e;case"compositionend":To="onCompositionEnd";break e;case"compositionupdate":To="onCompositionUpdate";break e}To=void 0}else ie$1?ge$1(eo,ro)&&(To="onCompositionEnd"):eo==="keydown"&&ro.keyCode===229&&(To="onCompositionStart");To&&(de$1&&ro.locale!=="ko"&&(ie$1||To!=="onCompositionStart"?To==="onCompositionEnd"&&ie$1&&(_o=nd()):(kd=co,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),bo=oe$1(lo,To),0<bo.length&&(To=new Ld(To,eo,null,ro,co),fo.push({event:To,listeners:bo}),_o?To.data=_o:(_o=he$1(ro),_o!==null&&(To.data=_o)))),(_o=ce$1?je$1(eo,ro):ke$1(eo,ro))&&(lo=oe$1(lo,"onBeforeInput"),0<lo.length&&(co=new Ld("onBeforeInput","beforeinput",null,ro,co),fo.push({event:co,listeners:lo}),co.data=_o))}se$1(fo,to)})}function ef(eo,to,ro){return{instance:eo,listener:to,currentTarget:ro}}function oe$1(eo,to){for(var ro=to+"Capture",no=[];eo!==null;){var io=eo,oo=io.stateNode;io.tag===5&&oo!==null&&(io=oo,oo=Ob(eo,ro),oo!=null&&no.unshift(ef(eo,oo,io)),oo=Ob(eo,to),oo!=null&&no.push(ef(eo,oo,io))),eo=eo.return}return no}function gf(eo){if(eo===null)return null;do eo=eo.return;while(eo&&eo.tag!==5);return eo||null}function hf(eo,to,ro,no,io){for(var oo=to._reactName,ao=[];ro!==null&&ro!==no;){var so=ro,uo=so.alternate,lo=so.stateNode;if(uo!==null&&uo===no)break;so.tag===5&&lo!==null&&(so=lo,io?(uo=Ob(ro,oo),uo!=null&&ao.unshift(ef(ro,uo,so))):io||(uo=Ob(ro,oo),uo!=null&&ao.push(ef(ro,uo,so)))),ro=ro.return}ao.length!==0&&eo.push({event:to,listeners:ao})}function jf(){}var kf=null,lf=null;function mf(eo,to){switch(eo){case"button":case"input":case"select":case"textarea":return!!to.autoFocus}return!1}function nf(eo,to){return eo==="textarea"||eo==="option"||eo==="noscript"||typeof to.children=="string"||typeof to.children=="number"||typeof to.dangerouslySetInnerHTML=="object"&&to.dangerouslySetInnerHTML!==null&&to.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(eo){eo.nodeType===1?eo.textContent="":eo.nodeType===9&&(eo=eo.body,eo!=null&&(eo.textContent=""))}function rf(eo){for(;eo!=null;eo=eo.nextSibling){var to=eo.nodeType;if(to===1||to===3)break}return eo}function sf(eo){eo=eo.previousSibling;for(var to=0;eo;){if(eo.nodeType===8){var ro=eo.data;if(ro==="$"||ro==="$!"||ro==="$?"){if(to===0)return eo;to--}else ro==="/$"&&to++}eo=eo.previousSibling}return null}var tf=0;function uf(eo){return{$$typeof:Ga,toString:eo,valueOf:eo}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(eo){var to=eo[wf];if(to)return to;for(var ro=eo.parentNode;ro;){if(to=ro[ff]||ro[wf]){if(ro=to.alternate,to.child!==null||ro!==null&&ro.child!==null)for(eo=sf(eo);eo!==null;){if(ro=eo[wf])return ro;eo=sf(eo)}return to}eo=ro,ro=eo.parentNode}return null}function Cb(eo){return eo=eo[wf]||eo[ff],!eo||eo.tag!==5&&eo.tag!==6&&eo.tag!==13&&eo.tag!==3?null:eo}function ue$1(eo){if(eo.tag===5||eo.tag===6)return eo.stateNode;throw Error(y$4(33))}function Db(eo){return eo[xf]||null}function $e$1(eo){var to=eo[yf];return to===void 0&&(to=eo[yf]=new Set),to}var zf=[],Af=-1;function Bf(eo){return{current:eo}}function H$2(eo){0>Af||(eo.current=zf[Af],zf[Af]=null,Af--)}function I$2(eo,to){Af++,zf[Af]=eo.current,eo.current=to}var Cf={},M$2=Bf(Cf),N$2=Bf(!1),Df=Cf;function Ef(eo,to){var ro=eo.type.contextTypes;if(!ro)return Cf;var no=eo.stateNode;if(no&&no.__reactInternalMemoizedUnmaskedChildContext===to)return no.__reactInternalMemoizedMaskedChildContext;var io={},oo;for(oo in ro)io[oo]=to[oo];return no&&(eo=eo.stateNode,eo.__reactInternalMemoizedUnmaskedChildContext=to,eo.__reactInternalMemoizedMaskedChildContext=io),io}function Ff(eo){return eo=eo.childContextTypes,eo!=null}function Gf(){H$2(N$2),H$2(M$2)}function Hf(eo,to,ro){if(M$2.current!==Cf)throw Error(y$4(168));I$2(M$2,to),I$2(N$2,ro)}function If(eo,to,ro){var no=eo.stateNode;if(eo=to.childContextTypes,typeof no.getChildContext!="function")return ro;no=no.getChildContext();for(var io in no)if(!(io in eo))throw Error(y$4(108,Ra(to)||"Unknown",io));return m$5({},ro,no)}function Jf(eo){return eo=(eo=eo.stateNode)&&eo.__reactInternalMemoizedMergedChildContext||Cf,Df=M$2.current,I$2(M$2,eo),I$2(N$2,N$2.current),!0}function Kf(eo,to,ro){var no=eo.stateNode;if(!no)throw Error(y$4(169));ro?(eo=If(eo,to,Df),no.__reactInternalMemoizedMergedChildContext=eo,H$2(N$2),H$2(M$2),I$2(M$2,eo)):H$2(N$2),I$2(N$2,ro)}var Lf=null,Mf=null,Nf=r$5.unstable_runWithPriority,Of=r$5.unstable_scheduleCallback,Pf=r$5.unstable_cancelCallback,Qf=r$5.unstable_shouldYield,Rf=r$5.unstable_requestPaint,Sf=r$5.unstable_now,Tf=r$5.unstable_getCurrentPriorityLevel,Uf=r$5.unstable_ImmediatePriority,Vf=r$5.unstable_UserBlockingPriority,Wf=r$5.unstable_NormalPriority,Xf=r$5.unstable_LowPriority,Yf=r$5.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O$2=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y$4(332))}}function fg(eo){switch(eo){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y$4(332))}}function gg(eo,to){return eo=fg(eo),Nf(eo,to)}function hg(eo,to,ro){return eo=fg(eo),Of(eo,to,ro)}function ig(){if(bg!==null){var eo=bg;bg=null,Pf(eo)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var eo=0;try{var to=ag;gg(99,function(){for(;eo<to.length;eo++){var ro=to[eo];do ro=ro(!0);while(ro!==null)}}),ag=null}catch(ro){throw ag!==null&&(ag=ag.slice(eo+1)),Of(Uf,ig),ro}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(eo,to){if(eo&&eo.defaultProps){to=m$5({},to),eo=eo.defaultProps;for(var ro in eo)to[ro]===void 0&&(to[ro]=eo[ro]);return to}return to}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(eo){var to=mg.current;H$2(mg),eo.type._context._currentValue=to}function sg(eo,to){for(;eo!==null;){var ro=eo.alternate;if((eo.childLanes&to)===to){if(ro===null||(ro.childLanes&to)===to)break;ro.childLanes|=to}else eo.childLanes|=to,ro!==null&&(ro.childLanes|=to);eo=eo.return}}function tg(eo,to){ng=eo,pg=og=null,eo=eo.dependencies,eo!==null&&eo.firstContext!==null&&((eo.lanes&to)!==0&&(ug=!0),eo.firstContext=null)}function vg(eo,to){if(pg!==eo&&to!==!1&&to!==0)if((typeof to!="number"||to===1073741823)&&(pg=eo,to=1073741823),to={context:eo,observedBits:to,next:null},og===null){if(ng===null)throw Error(y$4(308));og=to,ng.dependencies={lanes:0,firstContext:to,responders:null}}else og=og.next=to;return eo._currentValue}var wg=!1;function xg(eo){eo.updateQueue={baseState:eo.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(eo,to){eo=eo.updateQueue,to.updateQueue===eo&&(to.updateQueue={baseState:eo.baseState,firstBaseUpdate:eo.firstBaseUpdate,lastBaseUpdate:eo.lastBaseUpdate,shared:eo.shared,effects:eo.effects})}function zg(eo,to){return{eventTime:eo,lane:to,tag:0,payload:null,callback:null,next:null}}function Ag(eo,to){if(eo=eo.updateQueue,eo!==null){eo=eo.shared;var ro=eo.pending;ro===null?to.next=to:(to.next=ro.next,ro.next=to),eo.pending=to}}function Bg(eo,to){var ro=eo.updateQueue,no=eo.alternate;if(no!==null&&(no=no.updateQueue,ro===no)){var io=null,oo=null;if(ro=ro.firstBaseUpdate,ro!==null){do{var ao={eventTime:ro.eventTime,lane:ro.lane,tag:ro.tag,payload:ro.payload,callback:ro.callback,next:null};oo===null?io=oo=ao:oo=oo.next=ao,ro=ro.next}while(ro!==null);oo===null?io=oo=to:oo=oo.next=to}else io=oo=to;ro={baseState:no.baseState,firstBaseUpdate:io,lastBaseUpdate:oo,shared:no.shared,effects:no.effects},eo.updateQueue=ro;return}eo=ro.lastBaseUpdate,eo===null?ro.firstBaseUpdate=to:eo.next=to,ro.lastBaseUpdate=to}function Cg(eo,to,ro,no){var io=eo.updateQueue;wg=!1;var oo=io.firstBaseUpdate,ao=io.lastBaseUpdate,so=io.shared.pending;if(so!==null){io.shared.pending=null;var uo=so,lo=uo.next;uo.next=null,ao===null?oo=lo:ao.next=lo,ao=uo;var co=eo.alternate;if(co!==null){co=co.updateQueue;var fo=co.lastBaseUpdate;fo!==ao&&(fo===null?co.firstBaseUpdate=lo:fo.next=lo,co.lastBaseUpdate=uo)}}if(oo!==null){fo=io.baseState,ao=0,co=lo=uo=null;do{so=oo.lane;var mo=oo.eventTime;if((no&so)===so){co!==null&&(co=co.next={eventTime:mo,lane:0,tag:oo.tag,payload:oo.payload,callback:oo.callback,next:null});e:{var go=eo,yo=oo;switch(so=to,mo=ro,yo.tag){case 1:if(go=yo.payload,typeof go=="function"){fo=go.call(mo,fo,so);break e}fo=go;break e;case 3:go.flags=go.flags&-4097|64;case 0:if(go=yo.payload,so=typeof go=="function"?go.call(mo,fo,so):go,so==null)break e;fo=m$5({},fo,so);break e;case 2:wg=!0}}oo.callback!==null&&(eo.flags|=32,so=io.effects,so===null?io.effects=[oo]:so.push(oo))}else mo={eventTime:mo,lane:so,tag:oo.tag,payload:oo.payload,callback:oo.callback,next:null},co===null?(lo=co=mo,uo=fo):co=co.next=mo,ao|=so;if(oo=oo.next,oo===null){if(so=io.shared.pending,so===null)break;oo=so.next,so.next=null,io.lastBaseUpdate=so,io.shared.pending=null}}while(1);co===null&&(uo=fo),io.baseState=uo,io.firstBaseUpdate=lo,io.lastBaseUpdate=co,Dg|=ao,eo.lanes=ao,eo.memoizedState=fo}}function Eg(eo,to,ro){if(eo=to.effects,to.effects=null,eo!==null)for(to=0;to<eo.length;to++){var no=eo[to],io=no.callback;if(io!==null){if(no.callback=null,no=ro,typeof io!="function")throw Error(y$4(191,io));io.call(no)}}}var Fg=new aa.Component().refs;function Gg(eo,to,ro,no){to=eo.memoizedState,ro=ro(no,to),ro=ro==null?to:m$5({},to,ro),eo.memoizedState=ro,eo.lanes===0&&(eo.updateQueue.baseState=ro)}var Kg={isMounted:function(eo){return(eo=eo._reactInternals)?Zb(eo)===eo:!1},enqueueSetState:function(eo,to,ro){eo=eo._reactInternals;var no=Hg(),io=Ig(eo),oo=zg(no,io);oo.payload=to,ro!=null&&(oo.callback=ro),Ag(eo,oo),Jg(eo,io,no)},enqueueReplaceState:function(eo,to,ro){eo=eo._reactInternals;var no=Hg(),io=Ig(eo),oo=zg(no,io);oo.tag=1,oo.payload=to,ro!=null&&(oo.callback=ro),Ag(eo,oo),Jg(eo,io,no)},enqueueForceUpdate:function(eo,to){eo=eo._reactInternals;var ro=Hg(),no=Ig(eo),io=zg(ro,no);io.tag=2,to!=null&&(io.callback=to),Ag(eo,io),Jg(eo,no,ro)}};function Lg(eo,to,ro,no,io,oo,ao){return eo=eo.stateNode,typeof eo.shouldComponentUpdate=="function"?eo.shouldComponentUpdate(no,oo,ao):to.prototype&&to.prototype.isPureReactComponent?!Je$1(ro,no)||!Je$1(io,oo):!0}function Mg(eo,to,ro){var no=!1,io=Cf,oo=to.contextType;return typeof oo=="object"&&oo!==null?oo=vg(oo):(io=Ff(to)?Df:M$2.current,no=to.contextTypes,oo=(no=no!=null)?Ef(eo,io):Cf),to=new to(ro,oo),eo.memoizedState=to.state!==null&&to.state!==void 0?to.state:null,to.updater=Kg,eo.stateNode=to,to._reactInternals=eo,no&&(eo=eo.stateNode,eo.__reactInternalMemoizedUnmaskedChildContext=io,eo.__reactInternalMemoizedMaskedChildContext=oo),to}function Ng(eo,to,ro,no){eo=to.state,typeof to.componentWillReceiveProps=="function"&&to.componentWillReceiveProps(ro,no),typeof to.UNSAFE_componentWillReceiveProps=="function"&&to.UNSAFE_componentWillReceiveProps(ro,no),to.state!==eo&&Kg.enqueueReplaceState(to,to.state,null)}function Og(eo,to,ro,no){var io=eo.stateNode;io.props=ro,io.state=eo.memoizedState,io.refs=Fg,xg(eo);var oo=to.contextType;typeof oo=="object"&&oo!==null?io.context=vg(oo):(oo=Ff(to)?Df:M$2.current,io.context=Ef(eo,oo)),Cg(eo,ro,io,no),io.state=eo.memoizedState,oo=to.getDerivedStateFromProps,typeof oo=="function"&&(Gg(eo,to,oo,ro),io.state=eo.memoizedState),typeof to.getDerivedStateFromProps=="function"||typeof io.getSnapshotBeforeUpdate=="function"||typeof io.UNSAFE_componentWillMount!="function"&&typeof io.componentWillMount!="function"||(to=io.state,typeof io.componentWillMount=="function"&&io.componentWillMount(),typeof io.UNSAFE_componentWillMount=="function"&&io.UNSAFE_componentWillMount(),to!==io.state&&Kg.enqueueReplaceState(io,io.state,null),Cg(eo,ro,io,no),io.state=eo.memoizedState),typeof io.componentDidMount=="function"&&(eo.flags|=4)}var Pg=Array.isArray;function Qg(eo,to,ro){if(eo=ro.ref,eo!==null&&typeof eo!="function"&&typeof eo!="object"){if(ro._owner){if(ro=ro._owner,ro){if(ro.tag!==1)throw Error(y$4(309));var no=ro.stateNode}if(!no)throw Error(y$4(147,eo));var io=""+eo;return to!==null&&to.ref!==null&&typeof to.ref=="function"&&to.ref._stringRef===io?to.ref:(to=function(oo){var ao=no.refs;ao===Fg&&(ao=no.refs={}),oo===null?delete ao[io]:ao[io]=oo},to._stringRef=io,to)}if(typeof eo!="string")throw Error(y$4(284));if(!ro._owner)throw Error(y$4(290,eo))}return eo}function Rg(eo,to){if(eo.type!=="textarea")throw Error(y$4(31,Object.prototype.toString.call(to)==="[object Object]"?"object with keys {"+Object.keys(to).join(", ")+"}":to))}function Sg(eo){function to(Ao,ho){if(eo){var po=Ao.lastEffect;po!==null?(po.nextEffect=ho,Ao.lastEffect=ho):Ao.firstEffect=Ao.lastEffect=ho,ho.nextEffect=null,ho.flags=8}}function ro(Ao,ho){if(!eo)return null;for(;ho!==null;)to(Ao,ho),ho=ho.sibling;return null}function no(Ao,ho){for(Ao=new Map;ho!==null;)ho.key!==null?Ao.set(ho.key,ho):Ao.set(ho.index,ho),ho=ho.sibling;return Ao}function io(Ao,ho){return Ao=Tg(Ao,ho),Ao.index=0,Ao.sibling=null,Ao}function oo(Ao,ho,po){return Ao.index=po,eo?(po=Ao.alternate,po!==null?(po=po.index,po<ho?(Ao.flags=2,ho):po):(Ao.flags=2,ho)):ho}function ao(Ao){return eo&&Ao.alternate===null&&(Ao.flags=2),Ao}function so(Ao,ho,po,Mo){return ho===null||ho.tag!==6?(ho=Ug(po,Ao.mode,Mo),ho.return=Ao,ho):(ho=io(ho,po),ho.return=Ao,ho)}function uo(Ao,ho,po,Mo){return ho!==null&&ho.elementType===po.type?(Mo=io(ho,po.props),Mo.ref=Qg(Ao,ho,po),Mo.return=Ao,Mo):(Mo=Vg(po.type,po.key,po.props,null,Ao.mode,Mo),Mo.ref=Qg(Ao,ho,po),Mo.return=Ao,Mo)}function lo(Ao,ho,po,Mo){return ho===null||ho.tag!==4||ho.stateNode.containerInfo!==po.containerInfo||ho.stateNode.implementation!==po.implementation?(ho=Wg(po,Ao.mode,Mo),ho.return=Ao,ho):(ho=io(ho,po.children||[]),ho.return=Ao,ho)}function co(Ao,ho,po,Mo,xo){return ho===null||ho.tag!==7?(ho=Xg(po,Ao.mode,Mo,xo),ho.return=Ao,ho):(ho=io(ho,po),ho.return=Ao,ho)}function fo(Ao,ho,po){if(typeof ho=="string"||typeof ho=="number")return ho=Ug(""+ho,Ao.mode,po),ho.return=Ao,ho;if(typeof ho=="object"&&ho!==null){switch(ho.$$typeof){case sa:return po=Vg(ho.type,ho.key,ho.props,null,Ao.mode,po),po.ref=Qg(Ao,null,ho),po.return=Ao,po;case ta:return ho=Wg(ho,Ao.mode,po),ho.return=Ao,ho}if(Pg(ho)||La(ho))return ho=Xg(ho,Ao.mode,po,null),ho.return=Ao,ho;Rg(Ao,ho)}return null}function mo(Ao,ho,po,Mo){var xo=ho!==null?ho.key:null;if(typeof po=="string"||typeof po=="number")return xo!==null?null:so(Ao,ho,""+po,Mo);if(typeof po=="object"&&po!==null){switch(po.$$typeof){case sa:return po.key===xo?po.type===ua?co(Ao,ho,po.props.children,Mo,xo):uo(Ao,ho,po,Mo):null;case ta:return po.key===xo?lo(Ao,ho,po,Mo):null}if(Pg(po)||La(po))return xo!==null?null:co(Ao,ho,po,Mo,null);Rg(Ao,po)}return null}function go(Ao,ho,po,Mo,xo){if(typeof Mo=="string"||typeof Mo=="number")return Ao=Ao.get(po)||null,so(ho,Ao,""+Mo,xo);if(typeof Mo=="object"&&Mo!==null){switch(Mo.$$typeof){case sa:return Ao=Ao.get(Mo.key===null?po:Mo.key)||null,Mo.type===ua?co(ho,Ao,Mo.props.children,xo,Mo.key):uo(ho,Ao,Mo,xo);case ta:return Ao=Ao.get(Mo.key===null?po:Mo.key)||null,lo(ho,Ao,Mo,xo)}if(Pg(Mo)||La(Mo))return Ao=Ao.get(po)||null,co(ho,Ao,Mo,xo,null);Rg(ho,Mo)}return null}function yo(Ao,ho,po,Mo){for(var xo=null,wo=null,bo=ho,_o=ho=0,To=null;bo!==null&&_o<po.length;_o++){bo.index>_o?(To=bo,bo=null):To=bo.sibling;var No=mo(Ao,bo,po[_o],Mo);if(No===null){bo===null&&(bo=To);break}eo&&bo&&No.alternate===null&&to(Ao,bo),ho=oo(No,ho,_o),wo===null?xo=No:wo.sibling=No,wo=No,bo=To}if(_o===po.length)return ro(Ao,bo),xo;if(bo===null){for(;_o<po.length;_o++)bo=fo(Ao,po[_o],Mo),bo!==null&&(ho=oo(bo,ho,_o),wo===null?xo=bo:wo.sibling=bo,wo=bo);return xo}for(bo=no(Ao,bo);_o<po.length;_o++)To=go(bo,Ao,_o,po[_o],Mo),To!==null&&(eo&&To.alternate!==null&&bo.delete(To.key===null?_o:To.key),ho=oo(To,ho,_o),wo===null?xo=To:wo.sibling=To,wo=To);return eo&&bo.forEach(function(Po){return to(Ao,Po)}),xo}function vo(Ao,ho,po,Mo){var xo=La(po);if(typeof xo!="function")throw Error(y$4(150));if(po=xo.call(po),po==null)throw Error(y$4(151));for(var wo=xo=null,bo=ho,_o=ho=0,To=null,No=po.next();bo!==null&&!No.done;_o++,No=po.next()){bo.index>_o?(To=bo,bo=null):To=bo.sibling;var Po=mo(Ao,bo,No.value,Mo);if(Po===null){bo===null&&(bo=To);break}eo&&bo&&Po.alternate===null&&to(Ao,bo),ho=oo(Po,ho,_o),wo===null?xo=Po:wo.sibling=Po,wo=Po,bo=To}if(No.done)return ro(Ao,bo),xo;if(bo===null){for(;!No.done;_o++,No=po.next())No=fo(Ao,No.value,Mo),No!==null&&(ho=oo(No,ho,_o),wo===null?xo=No:wo.sibling=No,wo=No);return xo}for(bo=no(Ao,bo);!No.done;_o++,No=po.next())No=go(bo,Ao,_o,No.value,Mo),No!==null&&(eo&&No.alternate!==null&&bo.delete(No.key===null?_o:No.key),ho=oo(No,ho,_o),wo===null?xo=No:wo.sibling=No,wo=No);return eo&&bo.forEach(function(Co){return to(Ao,Co)}),xo}return function(Ao,ho,po,Mo){var xo=typeof po=="object"&&po!==null&&po.type===ua&&po.key===null;xo&&(po=po.props.children);var wo=typeof po=="object"&&po!==null;if(wo)switch(po.$$typeof){case sa:e:{for(wo=po.key,xo=ho;xo!==null;){if(xo.key===wo){switch(xo.tag){case 7:if(po.type===ua){ro(Ao,xo.sibling),ho=io(xo,po.props.children),ho.return=Ao,Ao=ho;break e}break;default:if(xo.elementType===po.type){ro(Ao,xo.sibling),ho=io(xo,po.props),ho.ref=Qg(Ao,xo,po),ho.return=Ao,Ao=ho;break e}}ro(Ao,xo);break}else to(Ao,xo);xo=xo.sibling}po.type===ua?(ho=Xg(po.props.children,Ao.mode,Mo,po.key),ho.return=Ao,Ao=ho):(Mo=Vg(po.type,po.key,po.props,null,Ao.mode,Mo),Mo.ref=Qg(Ao,ho,po),Mo.return=Ao,Ao=Mo)}return ao(Ao);case ta:e:{for(xo=po.key;ho!==null;){if(ho.key===xo)if(ho.tag===4&&ho.stateNode.containerInfo===po.containerInfo&&ho.stateNode.implementation===po.implementation){ro(Ao,ho.sibling),ho=io(ho,po.children||[]),ho.return=Ao,Ao=ho;break e}else{ro(Ao,ho);break}else to(Ao,ho);ho=ho.sibling}ho=Wg(po,Ao.mode,Mo),ho.return=Ao,Ao=ho}return ao(Ao)}if(typeof po=="string"||typeof po=="number")return po=""+po,ho!==null&&ho.tag===6?(ro(Ao,ho.sibling),ho=io(ho,po),ho.return=Ao,Ao=ho):(ro(Ao,ho),ho=Ug(po,Ao.mode,Mo),ho.return=Ao,Ao=ho),ao(Ao);if(Pg(po))return yo(Ao,ho,po,Mo);if(La(po))return vo(Ao,ho,po,Mo);if(wo&&Rg(Ao,po),typeof po=="undefined"&&!xo)switch(Ao.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$4(152,Ra(Ao.type)||"Component"))}return ro(Ao,ho)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(eo){if(eo===$g)throw Error(y$4(174));return eo}function eh(eo,to){switch(I$2(ch,to),I$2(bh,eo),I$2(ah,$g),eo=to.nodeType,eo){case 9:case 11:to=(to=to.documentElement)?to.namespaceURI:mb(null,"");break;default:eo=eo===8?to.parentNode:to,to=eo.namespaceURI||null,eo=eo.tagName,to=mb(to,eo)}H$2(ah),I$2(ah,to)}function fh(){H$2(ah),H$2(bh),H$2(ch)}function gh(eo){dh(ch.current);var to=dh(ah.current),ro=mb(to,eo.type);to!==ro&&(I$2(bh,eo),I$2(ah,ro))}function hh(eo){bh.current===eo&&(H$2(ah),H$2(bh))}var P$2=Bf(0);function ih(eo){for(var to=eo;to!==null;){if(to.tag===13){var ro=to.memoizedState;if(ro!==null&&(ro=ro.dehydrated,ro===null||ro.data==="$?"||ro.data==="$!"))return to}else if(to.tag===19&&to.memoizedProps.revealOrder!==void 0){if((to.flags&64)!==0)return to}else if(to.child!==null){to.child.return=to,to=to.child;continue}if(to===eo)break;for(;to.sibling===null;){if(to.return===null||to.return===eo)return null;to=to.return}to.sibling.return=to.return,to=to.sibling}return null}var jh=null,kh=null,lh=!1;function mh(eo,to){var ro=nh(5,null,null,0);ro.elementType="DELETED",ro.type="DELETED",ro.stateNode=to,ro.return=eo,ro.flags=8,eo.lastEffect!==null?(eo.lastEffect.nextEffect=ro,eo.lastEffect=ro):eo.firstEffect=eo.lastEffect=ro}function oh(eo,to){switch(eo.tag){case 5:var ro=eo.type;return to=to.nodeType!==1||ro.toLowerCase()!==to.nodeName.toLowerCase()?null:to,to!==null?(eo.stateNode=to,!0):!1;case 6:return to=eo.pendingProps===""||to.nodeType!==3?null:to,to!==null?(eo.stateNode=to,!0):!1;case 13:return!1;default:return!1}}function ph(eo){if(lh){var to=kh;if(to){var ro=to;if(!oh(eo,to)){if(to=rf(ro.nextSibling),!to||!oh(eo,to)){eo.flags=eo.flags&-1025|2,lh=!1,jh=eo;return}mh(jh,ro)}jh=eo,kh=rf(to.firstChild)}else eo.flags=eo.flags&-1025|2,lh=!1,jh=eo}}function qh(eo){for(eo=eo.return;eo!==null&&eo.tag!==5&&eo.tag!==3&&eo.tag!==13;)eo=eo.return;jh=eo}function rh(eo){if(eo!==jh)return!1;if(!lh)return qh(eo),lh=!0,!1;var to=eo.type;if(eo.tag!==5||to!=="head"&&to!=="body"&&!nf(to,eo.memoizedProps))for(to=kh;to;)mh(eo,to),to=rf(to.nextSibling);if(qh(eo),eo.tag===13){if(eo=eo.memoizedState,eo=eo!==null?eo.dehydrated:null,!eo)throw Error(y$4(317));e:{for(eo=eo.nextSibling,to=0;eo;){if(eo.nodeType===8){var ro=eo.data;if(ro==="/$"){if(to===0){kh=rf(eo.nextSibling);break e}to--}else ro!=="$"&&ro!=="$!"&&ro!=="$?"||to++}eo=eo.nextSibling}kh=null}}else kh=jh?rf(eo.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var eo=0;eo<th.length;eo++)th[eo]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R$2=null,S$2=null,T$1=null,yh=!1,zh=!1;function Ah(){throw Error(y$4(321))}function Bh(eo,to){if(to===null)return!1;for(var ro=0;ro<to.length&&ro<eo.length;ro++)if(!He$1(eo[ro],to[ro]))return!1;return!0}function Ch(eo,to,ro,no,io,oo){if(xh=oo,R$2=to,to.memoizedState=null,to.updateQueue=null,to.lanes=0,vh.current=eo===null||eo.memoizedState===null?Dh:Eh,eo=ro(no,io),zh){oo=0;do{if(zh=!1,!(25>oo))throw Error(y$4(301));oo+=1,T$1=S$2=null,to.updateQueue=null,vh.current=Fh,eo=ro(no,io)}while(zh)}if(vh.current=Gh,to=S$2!==null&&S$2.next!==null,xh=0,T$1=S$2=R$2=null,yh=!1,to)throw Error(y$4(300));return eo}function Hh(){var eo={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T$1===null?R$2.memoizedState=T$1=eo:T$1=T$1.next=eo,T$1}function Ih(){if(S$2===null){var eo=R$2.alternate;eo=eo!==null?eo.memoizedState:null}else eo=S$2.next;var to=T$1===null?R$2.memoizedState:T$1.next;if(to!==null)T$1=to,S$2=eo;else{if(eo===null)throw Error(y$4(310));S$2=eo,eo={memoizedState:S$2.memoizedState,baseState:S$2.baseState,baseQueue:S$2.baseQueue,queue:S$2.queue,next:null},T$1===null?R$2.memoizedState=T$1=eo:T$1=T$1.next=eo}return T$1}function Jh(eo,to){return typeof to=="function"?to(eo):to}function Kh(eo){var to=Ih(),ro=to.queue;if(ro===null)throw Error(y$4(311));ro.lastRenderedReducer=eo;var no=S$2,io=no.baseQueue,oo=ro.pending;if(oo!==null){if(io!==null){var ao=io.next;io.next=oo.next,oo.next=ao}no.baseQueue=io=oo,ro.pending=null}if(io!==null){io=io.next,no=no.baseState;var so=ao=oo=null,uo=io;do{var lo=uo.lane;if((xh&lo)===lo)so!==null&&(so=so.next={lane:0,action:uo.action,eagerReducer:uo.eagerReducer,eagerState:uo.eagerState,next:null}),no=uo.eagerReducer===eo?uo.eagerState:eo(no,uo.action);else{var co={lane:lo,action:uo.action,eagerReducer:uo.eagerReducer,eagerState:uo.eagerState,next:null};so===null?(ao=so=co,oo=no):so=so.next=co,R$2.lanes|=lo,Dg|=lo}uo=uo.next}while(uo!==null&&uo!==io);so===null?oo=no:so.next=ao,He$1(no,to.memoizedState)||(ug=!0),to.memoizedState=no,to.baseState=oo,to.baseQueue=so,ro.lastRenderedState=no}return[to.memoizedState,ro.dispatch]}function Lh(eo){var to=Ih(),ro=to.queue;if(ro===null)throw Error(y$4(311));ro.lastRenderedReducer=eo;var no=ro.dispatch,io=ro.pending,oo=to.memoizedState;if(io!==null){ro.pending=null;var ao=io=io.next;do oo=eo(oo,ao.action),ao=ao.next;while(ao!==io);He$1(oo,to.memoizedState)||(ug=!0),to.memoizedState=oo,to.baseQueue===null&&(to.baseState=oo),ro.lastRenderedState=oo}return[oo,no]}function Mh(eo,to,ro){var no=to._getVersion;no=no(to._source);var io=to._workInProgressVersionPrimary;if(io!==null?eo=io===no:(eo=eo.mutableReadLanes,(eo=(xh&eo)===eo)&&(to._workInProgressVersionPrimary=no,th.push(to))),eo)return ro(to._source);throw th.push(to),Error(y$4(350))}function Nh(eo,to,ro,no){var io=U$1;if(io===null)throw Error(y$4(349));var oo=to._getVersion,ao=oo(to._source),so=vh.current,uo=so.useState(function(){return Mh(io,to,ro)}),lo=uo[1],co=uo[0];uo=T$1;var fo=eo.memoizedState,mo=fo.refs,go=mo.getSnapshot,yo=fo.source;fo=fo.subscribe;var vo=R$2;return eo.memoizedState={refs:mo,source:to,subscribe:no},so.useEffect(function(){mo.getSnapshot=ro,mo.setSnapshot=lo;var Ao=oo(to._source);if(!He$1(ao,Ao)){Ao=ro(to._source),He$1(co,Ao)||(lo(Ao),Ao=Ig(vo),io.mutableReadLanes|=Ao&io.pendingLanes),Ao=io.mutableReadLanes,io.entangledLanes|=Ao;for(var ho=io.entanglements,po=Ao;0<po;){var Mo=31-Vc(po),xo=1<<Mo;ho[Mo]|=Ao,po&=~xo}}},[ro,to,no]),so.useEffect(function(){return no(to._source,function(){var Ao=mo.getSnapshot,ho=mo.setSnapshot;try{ho(Ao(to._source));var po=Ig(vo);io.mutableReadLanes|=po&io.pendingLanes}catch(Mo){ho(function(){throw Mo})}})},[to,no]),He$1(go,ro)&&He$1(yo,to)&&He$1(fo,no)||(eo={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:co},eo.dispatch=lo=Oh.bind(null,R$2,eo),uo.queue=eo,uo.baseQueue=null,co=Mh(io,to,ro),uo.memoizedState=uo.baseState=co),co}function Ph(eo,to,ro){var no=Ih();return Nh(no,eo,to,ro)}function Qh(eo){var to=Hh();return typeof eo=="function"&&(eo=eo()),to.memoizedState=to.baseState=eo,eo=to.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:eo},eo=eo.dispatch=Oh.bind(null,R$2,eo),[to.memoizedState,eo]}function Rh(eo,to,ro,no){return eo={tag:eo,create:to,destroy:ro,deps:no,next:null},to=R$2.updateQueue,to===null?(to={lastEffect:null},R$2.updateQueue=to,to.lastEffect=eo.next=eo):(ro=to.lastEffect,ro===null?to.lastEffect=eo.next=eo:(no=ro.next,ro.next=eo,eo.next=no,to.lastEffect=eo)),eo}function Sh(eo){var to=Hh();return eo={current:eo},to.memoizedState=eo}function Th(){return Ih().memoizedState}function Uh(eo,to,ro,no){var io=Hh();R$2.flags|=eo,io.memoizedState=Rh(1|to,ro,void 0,no===void 0?null:no)}function Vh(eo,to,ro,no){var io=Ih();no=no===void 0?null:no;var oo=void 0;if(S$2!==null){var ao=S$2.memoizedState;if(oo=ao.destroy,no!==null&&Bh(no,ao.deps)){Rh(to,ro,oo,no);return}}R$2.flags|=eo,io.memoizedState=Rh(1|to,ro,oo,no)}function Wh(eo,to){return Uh(516,4,eo,to)}function Xh(eo,to){return Vh(516,4,eo,to)}function Yh(eo,to){return Vh(4,2,eo,to)}function Zh(eo,to){if(typeof to=="function")return eo=eo(),to(eo),function(){to(null)};if(to!=null)return eo=eo(),to.current=eo,function(){to.current=null}}function $h(eo,to,ro){return ro=ro!=null?ro.concat([eo]):null,Vh(4,2,Zh.bind(null,to,eo),ro)}function ai$1(){}function bi$1(eo,to){var ro=Ih();to=to===void 0?null:to;var no=ro.memoizedState;return no!==null&&to!==null&&Bh(to,no[1])?no[0]:(ro.memoizedState=[eo,to],eo)}function ci$1(eo,to){var ro=Ih();to=to===void 0?null:to;var no=ro.memoizedState;return no!==null&&to!==null&&Bh(to,no[1])?no[0]:(eo=eo(),ro.memoizedState=[eo,to],eo)}function di$1(eo,to){var ro=eg();gg(98>ro?98:ro,function(){eo(!0)}),gg(97<ro?97:ro,function(){var no=wh.transition;wh.transition=1;try{eo(!1),to()}finally{wh.transition=no}})}function Oh(eo,to,ro){var no=Hg(),io=Ig(eo),oo={lane:io,action:ro,eagerReducer:null,eagerState:null,next:null},ao=to.pending;if(ao===null?oo.next=oo:(oo.next=ao.next,ao.next=oo),to.pending=oo,ao=eo.alternate,eo===R$2||ao!==null&&ao===R$2)zh=yh=!0;else{if(eo.lanes===0&&(ao===null||ao.lanes===0)&&(ao=to.lastRenderedReducer,ao!==null))try{var so=to.lastRenderedState,uo=ao(so,ro);if(oo.eagerReducer=ao,oo.eagerState=uo,He$1(uo,so))return}catch{}finally{}Jg(eo,io,no)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(eo,to){return Hh().memoizedState=[eo,to===void 0?null:to],eo},useContext:vg,useEffect:Wh,useImperativeHandle:function(eo,to,ro){return ro=ro!=null?ro.concat([eo]):null,Uh(4,2,Zh.bind(null,to,eo),ro)},useLayoutEffect:function(eo,to){return Uh(4,2,eo,to)},useMemo:function(eo,to){var ro=Hh();return to=to===void 0?null:to,eo=eo(),ro.memoizedState=[eo,to],eo},useReducer:function(eo,to,ro){var no=Hh();return to=ro!==void 0?ro(to):to,no.memoizedState=no.baseState=to,eo=no.queue={pending:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:to},eo=eo.dispatch=Oh.bind(null,R$2,eo),[no.memoizedState,eo]},useRef:Sh,useState:Qh,useDebugValue:ai$1,useDeferredValue:function(eo){var to=Qh(eo),ro=to[0],no=to[1];return Wh(function(){var io=wh.transition;wh.transition=1;try{no(eo)}finally{wh.transition=io}},[eo]),ro},useTransition:function(){var eo=Qh(!1),to=eo[0];return eo=di$1.bind(null,eo[1]),Sh(eo),[eo,to]},useMutableSource:function(eo,to,ro){var no=Hh();return no.memoizedState={refs:{getSnapshot:to,setSnapshot:null},source:eo,subscribe:ro},Nh(no,eo,to,ro)},useOpaqueIdentifier:function(){if(lh){var eo=!1,to=uf(function(){throw eo||(eo=!0,ro("r:"+(tf++).toString(36))),Error(y$4(355))}),ro=Qh(to)[1];return(R$2.mode&2)===0&&(R$2.flags|=516,Rh(5,function(){ro("r:"+(tf++).toString(36))},void 0,null)),to}return to="r:"+(tf++).toString(36),Qh(to),to},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai$1,useDeferredValue:function(eo){var to=Kh(Jh),ro=to[0],no=to[1];return Xh(function(){var io=wh.transition;wh.transition=1;try{no(eo)}finally{wh.transition=io}},[eo]),ro},useTransition:function(){var eo=Kh(Jh)[0];return[Th().current,eo]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi$1,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci$1,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai$1,useDeferredValue:function(eo){var to=Lh(Jh),ro=to[0],no=to[1];return Xh(function(){var io=wh.transition;wh.transition=1;try{no(eo)}finally{wh.transition=io}},[eo]),ro},useTransition:function(){var eo=Lh(Jh)[0];return[Th().current,eo]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei$1=ra.ReactCurrentOwner,ug=!1;function fi$1(eo,to,ro,no){to.child=eo===null?Zg(to,null,ro,no):Yg(to,eo.child,ro,no)}function gi$1(eo,to,ro,no,io){ro=ro.render;var oo=to.ref;return tg(to,io),no=Ch(eo,to,ro,no,oo,io),eo!==null&&!ug?(to.updateQueue=eo.updateQueue,to.flags&=-517,eo.lanes&=~io,hi$1(eo,to,io)):(to.flags|=1,fi$1(eo,to,no,io),to.child)}function ii$1(eo,to,ro,no,io,oo){if(eo===null){var ao=ro.type;return typeof ao=="function"&&!ji$1(ao)&&ao.defaultProps===void 0&&ro.compare===null&&ro.defaultProps===void 0?(to.tag=15,to.type=ao,ki$1(eo,to,ao,no,io,oo)):(eo=Vg(ro.type,null,no,to,to.mode,oo),eo.ref=to.ref,eo.return=to,to.child=eo)}return ao=eo.child,(io&oo)===0&&(io=ao.memoizedProps,ro=ro.compare,ro=ro!==null?ro:Je$1,ro(io,no)&&eo.ref===to.ref)?hi$1(eo,to,oo):(to.flags|=1,eo=Tg(ao,no),eo.ref=to.ref,eo.return=to,to.child=eo)}function ki$1(eo,to,ro,no,io,oo){if(eo!==null&&Je$1(eo.memoizedProps,no)&&eo.ref===to.ref)if(ug=!1,(oo&io)!==0)(eo.flags&16384)!==0&&(ug=!0);else return to.lanes=eo.lanes,hi$1(eo,to,oo);return li$1(eo,to,ro,no,oo)}function mi$1(eo,to,ro){var no=to.pendingProps,io=no.children,oo=eo!==null?eo.memoizedState:null;if(no.mode==="hidden"||no.mode==="unstable-defer-without-hiding")if((to.mode&4)===0)to.memoizedState={baseLanes:0},ni$1(to,ro);else if((ro&1073741824)!==0)to.memoizedState={baseLanes:0},ni$1(to,oo!==null?oo.baseLanes:ro);else return eo=oo!==null?oo.baseLanes|ro:ro,to.lanes=to.childLanes=1073741824,to.memoizedState={baseLanes:eo},ni$1(to,eo),null;else oo!==null?(no=oo.baseLanes|ro,to.memoizedState=null):no=ro,ni$1(to,no);return fi$1(eo,to,io,ro),to.child}function oi$1(eo,to){var ro=to.ref;(eo===null&&ro!==null||eo!==null&&eo.ref!==ro)&&(to.flags|=128)}function li$1(eo,to,ro,no,io){var oo=Ff(ro)?Df:M$2.current;return oo=Ef(to,oo),tg(to,io),ro=Ch(eo,to,ro,no,oo,io),eo!==null&&!ug?(to.updateQueue=eo.updateQueue,to.flags&=-517,eo.lanes&=~io,hi$1(eo,to,io)):(to.flags|=1,fi$1(eo,to,ro,io),to.child)}function pi$1(eo,to,ro,no,io){if(Ff(ro)){var oo=!0;Jf(to)}else oo=!1;if(tg(to,io),to.stateNode===null)eo!==null&&(eo.alternate=null,to.alternate=null,to.flags|=2),Mg(to,ro,no),Og(to,ro,no,io),no=!0;else if(eo===null){var ao=to.stateNode,so=to.memoizedProps;ao.props=so;var uo=ao.context,lo=ro.contextType;typeof lo=="object"&&lo!==null?lo=vg(lo):(lo=Ff(ro)?Df:M$2.current,lo=Ef(to,lo));var co=ro.getDerivedStateFromProps,fo=typeof co=="function"||typeof ao.getSnapshotBeforeUpdate=="function";fo||typeof ao.UNSAFE_componentWillReceiveProps!="function"&&typeof ao.componentWillReceiveProps!="function"||(so!==no||uo!==lo)&&Ng(to,ao,no,lo),wg=!1;var mo=to.memoizedState;ao.state=mo,Cg(to,no,ao,io),uo=to.memoizedState,so!==no||mo!==uo||N$2.current||wg?(typeof co=="function"&&(Gg(to,ro,co,no),uo=to.memoizedState),(so=wg||Lg(to,ro,so,no,mo,uo,lo))?(fo||typeof ao.UNSAFE_componentWillMount!="function"&&typeof ao.componentWillMount!="function"||(typeof ao.componentWillMount=="function"&&ao.componentWillMount(),typeof ao.UNSAFE_componentWillMount=="function"&&ao.UNSAFE_componentWillMount()),typeof ao.componentDidMount=="function"&&(to.flags|=4)):(typeof ao.componentDidMount=="function"&&(to.flags|=4),to.memoizedProps=no,to.memoizedState=uo),ao.props=no,ao.state=uo,ao.context=lo,no=so):(typeof ao.componentDidMount=="function"&&(to.flags|=4),no=!1)}else{ao=to.stateNode,yg(eo,to),so=to.memoizedProps,lo=to.type===to.elementType?so:lg(to.type,so),ao.props=lo,fo=to.pendingProps,mo=ao.context,uo=ro.contextType,typeof uo=="object"&&uo!==null?uo=vg(uo):(uo=Ff(ro)?Df:M$2.current,uo=Ef(to,uo));var go=ro.getDerivedStateFromProps;(co=typeof go=="function"||typeof ao.getSnapshotBeforeUpdate=="function")||typeof ao.UNSAFE_componentWillReceiveProps!="function"&&typeof ao.componentWillReceiveProps!="function"||(so!==fo||mo!==uo)&&Ng(to,ao,no,uo),wg=!1,mo=to.memoizedState,ao.state=mo,Cg(to,no,ao,io);var yo=to.memoizedState;so!==fo||mo!==yo||N$2.current||wg?(typeof go=="function"&&(Gg(to,ro,go,no),yo=to.memoizedState),(lo=wg||Lg(to,ro,lo,no,mo,yo,uo))?(co||typeof ao.UNSAFE_componentWillUpdate!="function"&&typeof ao.componentWillUpdate!="function"||(typeof ao.componentWillUpdate=="function"&&ao.componentWillUpdate(no,yo,uo),typeof ao.UNSAFE_componentWillUpdate=="function"&&ao.UNSAFE_componentWillUpdate(no,yo,uo)),typeof ao.componentDidUpdate=="function"&&(to.flags|=4),typeof ao.getSnapshotBeforeUpdate=="function"&&(to.flags|=256)):(typeof ao.componentDidUpdate!="function"||so===eo.memoizedProps&&mo===eo.memoizedState||(to.flags|=4),typeof ao.getSnapshotBeforeUpdate!="function"||so===eo.memoizedProps&&mo===eo.memoizedState||(to.flags|=256),to.memoizedProps=no,to.memoizedState=yo),ao.props=no,ao.state=yo,ao.context=uo,no=lo):(typeof ao.componentDidUpdate!="function"||so===eo.memoizedProps&&mo===eo.memoizedState||(to.flags|=4),typeof ao.getSnapshotBeforeUpdate!="function"||so===eo.memoizedProps&&mo===eo.memoizedState||(to.flags|=256),no=!1)}return qi$1(eo,to,ro,no,oo,io)}function qi$1(eo,to,ro,no,io,oo){oi$1(eo,to);var ao=(to.flags&64)!==0;if(!no&&!ao)return io&&Kf(to,ro,!1),hi$1(eo,to,oo);no=to.stateNode,ei$1.current=to;var so=ao&&typeof ro.getDerivedStateFromError!="function"?null:no.render();return to.flags|=1,eo!==null&&ao?(to.child=Yg(to,eo.child,null,oo),to.child=Yg(to,null,so,oo)):fi$1(eo,to,so,oo),to.memoizedState=no.state,io&&Kf(to,ro,!0),to.child}function ri$1(eo){var to=eo.stateNode;to.pendingContext?Hf(eo,to.pendingContext,to.pendingContext!==to.context):to.context&&Hf(eo,to.context,!1),eh(eo,to.containerInfo)}var si$1={dehydrated:null,retryLane:0};function ti$1(eo,to,ro){var no=to.pendingProps,io=P$2.current,oo=!1,ao;return(ao=(to.flags&64)!==0)||(ao=eo!==null&&eo.memoizedState===null?!1:(io&2)!==0),ao?(oo=!0,to.flags&=-65):eo!==null&&eo.memoizedState===null||no.fallback===void 0||no.unstable_avoidThisFallback===!0||(io|=1),I$2(P$2,io&1),eo===null?(no.fallback!==void 0&&ph(to),eo=no.children,io=no.fallback,oo?(eo=ui$1(to,eo,io,ro),to.child.memoizedState={baseLanes:ro},to.memoizedState=si$1,eo):typeof no.unstable_expectedLoadTime=="number"?(eo=ui$1(to,eo,io,ro),to.child.memoizedState={baseLanes:ro},to.memoizedState=si$1,to.lanes=33554432,eo):(ro=vi$1({mode:"visible",children:eo},to.mode,ro,null),ro.return=to,to.child=ro)):eo.memoizedState!==null?oo?(no=wi$1(eo,to,no.children,no.fallback,ro),oo=to.child,io=eo.child.memoizedState,oo.memoizedState=io===null?{baseLanes:ro}:{baseLanes:io.baseLanes|ro},oo.childLanes=eo.childLanes&~ro,to.memoizedState=si$1,no):(ro=xi$1(eo,to,no.children,ro),to.memoizedState=null,ro):oo?(no=wi$1(eo,to,no.children,no.fallback,ro),oo=to.child,io=eo.child.memoizedState,oo.memoizedState=io===null?{baseLanes:ro}:{baseLanes:io.baseLanes|ro},oo.childLanes=eo.childLanes&~ro,to.memoizedState=si$1,no):(ro=xi$1(eo,to,no.children,ro),to.memoizedState=null,ro)}function ui$1(eo,to,ro,no){var io=eo.mode,oo=eo.child;return to={mode:"hidden",children:to},(io&2)===0&&oo!==null?(oo.childLanes=0,oo.pendingProps=to):oo=vi$1(to,io,0,null),ro=Xg(ro,io,no,null),oo.return=eo,ro.return=eo,oo.sibling=ro,eo.child=oo,ro}function xi$1(eo,to,ro,no){var io=eo.child;return eo=io.sibling,ro=Tg(io,{mode:"visible",children:ro}),(to.mode&2)===0&&(ro.lanes=no),ro.return=to,ro.sibling=null,eo!==null&&(eo.nextEffect=null,eo.flags=8,to.firstEffect=to.lastEffect=eo),to.child=ro}function wi$1(eo,to,ro,no,io){var oo=to.mode,ao=eo.child;eo=ao.sibling;var so={mode:"hidden",children:ro};return(oo&2)===0&&to.child!==ao?(ro=to.child,ro.childLanes=0,ro.pendingProps=so,ao=ro.lastEffect,ao!==null?(to.firstEffect=ro.firstEffect,to.lastEffect=ao,ao.nextEffect=null):to.firstEffect=to.lastEffect=null):ro=Tg(ao,so),eo!==null?no=Tg(eo,no):(no=Xg(no,oo,io,null),no.flags|=2),no.return=to,ro.return=to,ro.sibling=no,to.child=ro,no}function yi$1(eo,to){eo.lanes|=to;var ro=eo.alternate;ro!==null&&(ro.lanes|=to),sg(eo.return,to)}function zi$1(eo,to,ro,no,io,oo){var ao=eo.memoizedState;ao===null?eo.memoizedState={isBackwards:to,rendering:null,renderingStartTime:0,last:no,tail:ro,tailMode:io,lastEffect:oo}:(ao.isBackwards=to,ao.rendering=null,ao.renderingStartTime=0,ao.last=no,ao.tail=ro,ao.tailMode=io,ao.lastEffect=oo)}function Ai$1(eo,to,ro){var no=to.pendingProps,io=no.revealOrder,oo=no.tail;if(fi$1(eo,to,no.children,ro),no=P$2.current,(no&2)!==0)no=no&1|2,to.flags|=64;else{if(eo!==null&&(eo.flags&64)!==0)e:for(eo=to.child;eo!==null;){if(eo.tag===13)eo.memoizedState!==null&&yi$1(eo,ro);else if(eo.tag===19)yi$1(eo,ro);else if(eo.child!==null){eo.child.return=eo,eo=eo.child;continue}if(eo===to)break e;for(;eo.sibling===null;){if(eo.return===null||eo.return===to)break e;eo=eo.return}eo.sibling.return=eo.return,eo=eo.sibling}no&=1}if(I$2(P$2,no),(to.mode&2)===0)to.memoizedState=null;else switch(io){case"forwards":for(ro=to.child,io=null;ro!==null;)eo=ro.alternate,eo!==null&&ih(eo)===null&&(io=ro),ro=ro.sibling;ro=io,ro===null?(io=to.child,to.child=null):(io=ro.sibling,ro.sibling=null),zi$1(to,!1,io,ro,oo,to.lastEffect);break;case"backwards":for(ro=null,io=to.child,to.child=null;io!==null;){if(eo=io.alternate,eo!==null&&ih(eo)===null){to.child=io;break}eo=io.sibling,io.sibling=ro,ro=io,io=eo}zi$1(to,!0,ro,null,oo,to.lastEffect);break;case"together":zi$1(to,!1,null,null,void 0,to.lastEffect);break;default:to.memoizedState=null}return to.child}function hi$1(eo,to,ro){if(eo!==null&&(to.dependencies=eo.dependencies),Dg|=to.lanes,(ro&to.childLanes)!==0){if(eo!==null&&to.child!==eo.child)throw Error(y$4(153));if(to.child!==null){for(eo=to.child,ro=Tg(eo,eo.pendingProps),to.child=ro,ro.return=to;eo.sibling!==null;)eo=eo.sibling,ro=ro.sibling=Tg(eo,eo.pendingProps),ro.return=to;ro.sibling=null}return to.child}return null}var Bi$1,Ci$1,Di$1,Ei$1;Bi$1=function(eo,to){for(var ro=to.child;ro!==null;){if(ro.tag===5||ro.tag===6)eo.appendChild(ro.stateNode);else if(ro.tag!==4&&ro.child!==null){ro.child.return=ro,ro=ro.child;continue}if(ro===to)break;for(;ro.sibling===null;){if(ro.return===null||ro.return===to)return;ro=ro.return}ro.sibling.return=ro.return,ro=ro.sibling}};Ci$1=function(){};Di$1=function(eo,to,ro,no){var io=eo.memoizedProps;if(io!==no){eo=to.stateNode,dh(ah.current);var oo=null;switch(ro){case"input":io=Ya(eo,io),no=Ya(eo,no),oo=[];break;case"option":io=eb(eo,io),no=eb(eo,no),oo=[];break;case"select":io=m$5({},io,{value:void 0}),no=m$5({},no,{value:void 0}),oo=[];break;case"textarea":io=gb(eo,io),no=gb(eo,no),oo=[];break;default:typeof io.onClick!="function"&&typeof no.onClick=="function"&&(eo.onclick=jf)}vb(ro,no);var ao;ro=null;for(lo in io)if(!no.hasOwnProperty(lo)&&io.hasOwnProperty(lo)&&io[lo]!=null)if(lo==="style"){var so=io[lo];for(ao in so)so.hasOwnProperty(ao)&&(ro||(ro={}),ro[ao]="")}else lo!=="dangerouslySetInnerHTML"&&lo!=="children"&&lo!=="suppressContentEditableWarning"&&lo!=="suppressHydrationWarning"&&lo!=="autoFocus"&&(ca.hasOwnProperty(lo)?oo||(oo=[]):(oo=oo||[]).push(lo,null));for(lo in no){var uo=no[lo];if(so=io!=null?io[lo]:void 0,no.hasOwnProperty(lo)&&uo!==so&&(uo!=null||so!=null))if(lo==="style")if(so){for(ao in so)!so.hasOwnProperty(ao)||uo&&uo.hasOwnProperty(ao)||(ro||(ro={}),ro[ao]="");for(ao in uo)uo.hasOwnProperty(ao)&&so[ao]!==uo[ao]&&(ro||(ro={}),ro[ao]=uo[ao])}else ro||(oo||(oo=[]),oo.push(lo,ro)),ro=uo;else lo==="dangerouslySetInnerHTML"?(uo=uo?uo.__html:void 0,so=so?so.__html:void 0,uo!=null&&so!==uo&&(oo=oo||[]).push(lo,uo)):lo==="children"?typeof uo!="string"&&typeof uo!="number"||(oo=oo||[]).push(lo,""+uo):lo!=="suppressContentEditableWarning"&&lo!=="suppressHydrationWarning"&&(ca.hasOwnProperty(lo)?(uo!=null&&lo==="onScroll"&&G$2("scroll",eo),oo||so===uo||(oo=[])):typeof uo=="object"&&uo!==null&&uo.$$typeof===Ga?uo.toString():(oo=oo||[]).push(lo,uo))}ro&&(oo=oo||[]).push("style",ro);var lo=oo;(to.updateQueue=lo)&&(to.flags|=4)}};Ei$1=function(eo,to,ro,no){ro!==no&&(to.flags|=4)};function Fi$1(eo,to){if(!lh)switch(eo.tailMode){case"hidden":to=eo.tail;for(var ro=null;to!==null;)to.alternate!==null&&(ro=to),to=to.sibling;ro===null?eo.tail=null:ro.sibling=null;break;case"collapsed":ro=eo.tail;for(var no=null;ro!==null;)ro.alternate!==null&&(no=ro),ro=ro.sibling;no===null?to||eo.tail===null?eo.tail=null:eo.tail.sibling=null:no.sibling=null}}function Gi$1(eo,to,ro){var no=to.pendingProps;switch(to.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(to.type)&&Gf(),null;case 3:return fh(),H$2(N$2),H$2(M$2),uh(),no=to.stateNode,no.pendingContext&&(no.context=no.pendingContext,no.pendingContext=null),(eo===null||eo.child===null)&&(rh(to)?to.flags|=4:no.hydrate||(to.flags|=256)),Ci$1(to),null;case 5:hh(to);var io=dh(ch.current);if(ro=to.type,eo!==null&&to.stateNode!=null)Di$1(eo,to,ro,no,io),eo.ref!==to.ref&&(to.flags|=128);else{if(!no){if(to.stateNode===null)throw Error(y$4(166));return null}if(eo=dh(ah.current),rh(to)){no=to.stateNode,ro=to.type;var oo=to.memoizedProps;switch(no[wf]=to,no[xf]=oo,ro){case"dialog":G$2("cancel",no),G$2("close",no);break;case"iframe":case"object":case"embed":G$2("load",no);break;case"video":case"audio":for(eo=0;eo<Xe$1.length;eo++)G$2(Xe$1[eo],no);break;case"source":G$2("error",no);break;case"img":case"image":case"link":G$2("error",no),G$2("load",no);break;case"details":G$2("toggle",no);break;case"input":Za(no,oo),G$2("invalid",no);break;case"select":no._wrapperState={wasMultiple:!!oo.multiple},G$2("invalid",no);break;case"textarea":hb(no,oo),G$2("invalid",no)}vb(ro,oo),eo=null;for(var ao in oo)oo.hasOwnProperty(ao)&&(io=oo[ao],ao==="children"?typeof io=="string"?no.textContent!==io&&(eo=["children",io]):typeof io=="number"&&no.textContent!==""+io&&(eo=["children",""+io]):ca.hasOwnProperty(ao)&&io!=null&&ao==="onScroll"&&G$2("scroll",no));switch(ro){case"input":Va(no),cb(no,oo,!0);break;case"textarea":Va(no),jb(no);break;case"select":case"option":break;default:typeof oo.onClick=="function"&&(no.onclick=jf)}no=eo,to.updateQueue=no,no!==null&&(to.flags|=4)}else{switch(ao=io.nodeType===9?io:io.ownerDocument,eo===kb.html&&(eo=lb(ro)),eo===kb.html?ro==="script"?(eo=ao.createElement("div"),eo.innerHTML="<script><\/script>",eo=eo.removeChild(eo.firstChild)):typeof no.is=="string"?eo=ao.createElement(ro,{is:no.is}):(eo=ao.createElement(ro),ro==="select"&&(ao=eo,no.multiple?ao.multiple=!0:no.size&&(ao.size=no.size))):eo=ao.createElementNS(eo,ro),eo[wf]=to,eo[xf]=no,Bi$1(eo,to,!1,!1),to.stateNode=eo,ao=wb(ro,no),ro){case"dialog":G$2("cancel",eo),G$2("close",eo),io=no;break;case"iframe":case"object":case"embed":G$2("load",eo),io=no;break;case"video":case"audio":for(io=0;io<Xe$1.length;io++)G$2(Xe$1[io],eo);io=no;break;case"source":G$2("error",eo),io=no;break;case"img":case"image":case"link":G$2("error",eo),G$2("load",eo),io=no;break;case"details":G$2("toggle",eo),io=no;break;case"input":Za(eo,no),io=Ya(eo,no),G$2("invalid",eo);break;case"option":io=eb(eo,no);break;case"select":eo._wrapperState={wasMultiple:!!no.multiple},io=m$5({},no,{value:void 0}),G$2("invalid",eo);break;case"textarea":hb(eo,no),io=gb(eo,no),G$2("invalid",eo);break;default:io=no}vb(ro,io);var so=io;for(oo in so)if(so.hasOwnProperty(oo)){var uo=so[oo];oo==="style"?tb(eo,uo):oo==="dangerouslySetInnerHTML"?(uo=uo?uo.__html:void 0,uo!=null&&ob(eo,uo)):oo==="children"?typeof uo=="string"?(ro!=="textarea"||uo!=="")&&pb(eo,uo):typeof uo=="number"&&pb(eo,""+uo):oo!=="suppressContentEditableWarning"&&oo!=="suppressHydrationWarning"&&oo!=="autoFocus"&&(ca.hasOwnProperty(oo)?uo!=null&&oo==="onScroll"&&G$2("scroll",eo):uo!=null&&qa(eo,oo,uo,ao))}switch(ro){case"input":Va(eo),cb(eo,no,!1);break;case"textarea":Va(eo),jb(eo);break;case"option":no.value!=null&&eo.setAttribute("value",""+Sa(no.value));break;case"select":eo.multiple=!!no.multiple,oo=no.value,oo!=null?fb(eo,!!no.multiple,oo,!1):no.defaultValue!=null&&fb(eo,!!no.multiple,no.defaultValue,!0);break;default:typeof io.onClick=="function"&&(eo.onclick=jf)}mf(ro,no)&&(to.flags|=4)}to.ref!==null&&(to.flags|=128)}return null;case 6:if(eo&&to.stateNode!=null)Ei$1(eo,to,eo.memoizedProps,no);else{if(typeof no!="string"&&to.stateNode===null)throw Error(y$4(166));ro=dh(ch.current),dh(ah.current),rh(to)?(no=to.stateNode,ro=to.memoizedProps,no[wf]=to,no.nodeValue!==ro&&(to.flags|=4)):(no=(ro.nodeType===9?ro:ro.ownerDocument).createTextNode(no),no[wf]=to,to.stateNode=no)}return null;case 13:return H$2(P$2),no=to.memoizedState,(to.flags&64)!==0?(to.lanes=ro,to):(no=no!==null,ro=!1,eo===null?to.memoizedProps.fallback!==void 0&&rh(to):ro=eo.memoizedState!==null,no&&!ro&&(to.mode&2)!==0&&(eo===null&&to.memoizedProps.unstable_avoidThisFallback!==!0||(P$2.current&1)!==0?V$2===0&&(V$2=3):((V$2===0||V$2===3)&&(V$2=4),U$1===null||(Dg&134217727)===0&&(Hi$1&134217727)===0||Ii$1(U$1,W$2))),(no||ro)&&(to.flags|=4),null);case 4:return fh(),Ci$1(to),eo===null&&cf(to.stateNode.containerInfo),null;case 10:return rg(to),null;case 17:return Ff(to.type)&&Gf(),null;case 19:if(H$2(P$2),no=to.memoizedState,no===null)return null;if(oo=(to.flags&64)!==0,ao=no.rendering,ao===null)if(oo)Fi$1(no,!1);else{if(V$2!==0||eo!==null&&(eo.flags&64)!==0)for(eo=to.child;eo!==null;){if(ao=ih(eo),ao!==null){for(to.flags|=64,Fi$1(no,!1),oo=ao.updateQueue,oo!==null&&(to.updateQueue=oo,to.flags|=4),no.lastEffect===null&&(to.firstEffect=null),to.lastEffect=no.lastEffect,no=ro,ro=to.child;ro!==null;)oo=ro,eo=no,oo.flags&=2,oo.nextEffect=null,oo.firstEffect=null,oo.lastEffect=null,ao=oo.alternate,ao===null?(oo.childLanes=0,oo.lanes=eo,oo.child=null,oo.memoizedProps=null,oo.memoizedState=null,oo.updateQueue=null,oo.dependencies=null,oo.stateNode=null):(oo.childLanes=ao.childLanes,oo.lanes=ao.lanes,oo.child=ao.child,oo.memoizedProps=ao.memoizedProps,oo.memoizedState=ao.memoizedState,oo.updateQueue=ao.updateQueue,oo.type=ao.type,eo=ao.dependencies,oo.dependencies=eo===null?null:{lanes:eo.lanes,firstContext:eo.firstContext}),ro=ro.sibling;return I$2(P$2,P$2.current&1|2),to.child}eo=eo.sibling}no.tail!==null&&O$2()>Ji$1&&(to.flags|=64,oo=!0,Fi$1(no,!1),to.lanes=33554432)}else{if(!oo)if(eo=ih(ao),eo!==null){if(to.flags|=64,oo=!0,ro=eo.updateQueue,ro!==null&&(to.updateQueue=ro,to.flags|=4),Fi$1(no,!0),no.tail===null&&no.tailMode==="hidden"&&!ao.alternate&&!lh)return to=to.lastEffect=no.lastEffect,to!==null&&(to.nextEffect=null),null}else 2*O$2()-no.renderingStartTime>Ji$1&&ro!==1073741824&&(to.flags|=64,oo=!0,Fi$1(no,!1),to.lanes=33554432);no.isBackwards?(ao.sibling=to.child,to.child=ao):(ro=no.last,ro!==null?ro.sibling=ao:to.child=ao,no.last=ao)}return no.tail!==null?(ro=no.tail,no.rendering=ro,no.tail=ro.sibling,no.lastEffect=to.lastEffect,no.renderingStartTime=O$2(),ro.sibling=null,to=P$2.current,I$2(P$2,oo?to&1|2:to&1),ro):null;case 23:case 24:return Ki$1(),eo!==null&&eo.memoizedState!==null!=(to.memoizedState!==null)&&no.mode!=="unstable-defer-without-hiding"&&(to.flags|=4),null}throw Error(y$4(156,to.tag))}function Li$1(eo){switch(eo.tag){case 1:Ff(eo.type)&&Gf();var to=eo.flags;return to&4096?(eo.flags=to&-4097|64,eo):null;case 3:if(fh(),H$2(N$2),H$2(M$2),uh(),to=eo.flags,(to&64)!==0)throw Error(y$4(285));return eo.flags=to&-4097|64,eo;case 5:return hh(eo),null;case 13:return H$2(P$2),to=eo.flags,to&4096?(eo.flags=to&-4097|64,eo):null;case 19:return H$2(P$2),null;case 4:return fh(),null;case 10:return rg(eo),null;case 23:case 24:return Ki$1(),null;default:return null}}function Mi$1(eo,to){try{var ro="",no=to;do ro+=Qa(no),no=no.return;while(no);var io=ro}catch(oo){io=`
Error generating stack: `+oo.message+`
`+oo.stack}return{value:eo,source:to,stack:io}}function Ni$1(eo,to){try{console.error(to.value)}catch(ro){setTimeout(function(){throw ro})}}var Oi$1=typeof WeakMap=="function"?WeakMap:Map;function Pi$1(eo,to,ro){ro=zg(-1,ro),ro.tag=3,ro.payload={element:null};var no=to.value;return ro.callback=function(){Qi$1||(Qi$1=!0,Ri$1=no),Ni$1(eo,to)},ro}function Si$1(eo,to,ro){ro=zg(-1,ro),ro.tag=3;var no=eo.type.getDerivedStateFromError;if(typeof no=="function"){var io=to.value;ro.payload=function(){return Ni$1(eo,to),no(io)}}var oo=eo.stateNode;return oo!==null&&typeof oo.componentDidCatch=="function"&&(ro.callback=function(){typeof no!="function"&&(Ti$1===null?Ti$1=new Set([this]):Ti$1.add(this),Ni$1(eo,to));var ao=to.stack;this.componentDidCatch(to.value,{componentStack:ao!==null?ao:""})}),ro}var Ui$1=typeof WeakSet=="function"?WeakSet:Set;function Vi$1(eo){var to=eo.ref;if(to!==null)if(typeof to=="function")try{to(null)}catch(ro){Wi$1(eo,ro)}else to.current=null}function Xi$1(eo,to){switch(to.tag){case 0:case 11:case 15:case 22:return;case 1:if(to.flags&256&&eo!==null){var ro=eo.memoizedProps,no=eo.memoizedState;eo=to.stateNode,to=eo.getSnapshotBeforeUpdate(to.elementType===to.type?ro:lg(to.type,ro),no),eo.__reactInternalSnapshotBeforeUpdate=to}return;case 3:to.flags&256&&qf(to.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y$4(163))}function Yi$1(eo,to,ro){switch(ro.tag){case 0:case 11:case 15:case 22:if(to=ro.updateQueue,to=to!==null?to.lastEffect:null,to!==null){eo=to=to.next;do{if((eo.tag&3)===3){var no=eo.create;eo.destroy=no()}eo=eo.next}while(eo!==to)}if(to=ro.updateQueue,to=to!==null?to.lastEffect:null,to!==null){eo=to=to.next;do{var io=eo;no=io.next,io=io.tag,(io&4)!==0&&(io&1)!==0&&(Zi$1(ro,eo),$i$1(ro,eo)),eo=no}while(eo!==to)}return;case 1:eo=ro.stateNode,ro.flags&4&&(to===null?eo.componentDidMount():(no=ro.elementType===ro.type?to.memoizedProps:lg(ro.type,to.memoizedProps),eo.componentDidUpdate(no,to.memoizedState,eo.__reactInternalSnapshotBeforeUpdate))),to=ro.updateQueue,to!==null&&Eg(ro,to,eo);return;case 3:if(to=ro.updateQueue,to!==null){if(eo=null,ro.child!==null)switch(ro.child.tag){case 5:eo=ro.child.stateNode;break;case 1:eo=ro.child.stateNode}Eg(ro,to,eo)}return;case 5:eo=ro.stateNode,to===null&&ro.flags&4&&mf(ro.type,ro.memoizedProps)&&eo.focus();return;case 6:return;case 4:return;case 12:return;case 13:ro.memoizedState===null&&(ro=ro.alternate,ro!==null&&(ro=ro.memoizedState,ro!==null&&(ro=ro.dehydrated,ro!==null&&Cc(ro))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y$4(163))}function aj(eo,to){for(var ro=eo;;){if(ro.tag===5){var no=ro.stateNode;if(to)no=no.style,typeof no.setProperty=="function"?no.setProperty("display","none","important"):no.display="none";else{no=ro.stateNode;var io=ro.memoizedProps.style;io=io!=null&&io.hasOwnProperty("display")?io.display:null,no.style.display=sb("display",io)}}else if(ro.tag===6)ro.stateNode.nodeValue=to?"":ro.memoizedProps;else if((ro.tag!==23&&ro.tag!==24||ro.memoizedState===null||ro===eo)&&ro.child!==null){ro.child.return=ro,ro=ro.child;continue}if(ro===eo)break;for(;ro.sibling===null;){if(ro.return===null||ro.return===eo)return;ro=ro.return}ro.sibling.return=ro.return,ro=ro.sibling}}function bj(eo,to){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,to)}catch{}switch(to.tag){case 0:case 11:case 14:case 15:case 22:if(eo=to.updateQueue,eo!==null&&(eo=eo.lastEffect,eo!==null)){var ro=eo=eo.next;do{var no=ro,io=no.destroy;if(no=no.tag,io!==void 0)if((no&4)!==0)Zi$1(to,ro);else{no=to;try{io()}catch(oo){Wi$1(no,oo)}}ro=ro.next}while(ro!==eo)}break;case 1:if(Vi$1(to),eo=to.stateNode,typeof eo.componentWillUnmount=="function")try{eo.props=to.memoizedProps,eo.state=to.memoizedState,eo.componentWillUnmount()}catch(oo){Wi$1(to,oo)}break;case 5:Vi$1(to);break;case 4:cj(eo,to)}}function dj(eo){eo.alternate=null,eo.child=null,eo.dependencies=null,eo.firstEffect=null,eo.lastEffect=null,eo.memoizedProps=null,eo.memoizedState=null,eo.pendingProps=null,eo.return=null,eo.updateQueue=null}function ej(eo){return eo.tag===5||eo.tag===3||eo.tag===4}function fj(eo){e:{for(var to=eo.return;to!==null;){if(ej(to))break e;to=to.return}throw Error(y$4(160))}var ro=to;switch(to=ro.stateNode,ro.tag){case 5:var no=!1;break;case 3:to=to.containerInfo,no=!0;break;case 4:to=to.containerInfo,no=!0;break;default:throw Error(y$4(161))}ro.flags&16&&(pb(to,""),ro.flags&=-17);e:t:for(ro=eo;;){for(;ro.sibling===null;){if(ro.return===null||ej(ro.return)){ro=null;break e}ro=ro.return}for(ro.sibling.return=ro.return,ro=ro.sibling;ro.tag!==5&&ro.tag!==6&&ro.tag!==18;){if(ro.flags&2||ro.child===null||ro.tag===4)continue t;ro.child.return=ro,ro=ro.child}if(!(ro.flags&2)){ro=ro.stateNode;break e}}no?gj(eo,ro,to):hj(eo,ro,to)}function gj(eo,to,ro){var no=eo.tag,io=no===5||no===6;if(io)eo=io?eo.stateNode:eo.stateNode.instance,to?ro.nodeType===8?ro.parentNode.insertBefore(eo,to):ro.insertBefore(eo,to):(ro.nodeType===8?(to=ro.parentNode,to.insertBefore(eo,ro)):(to=ro,to.appendChild(eo)),ro=ro._reactRootContainer,ro!=null||to.onclick!==null||(to.onclick=jf));else if(no!==4&&(eo=eo.child,eo!==null))for(gj(eo,to,ro),eo=eo.sibling;eo!==null;)gj(eo,to,ro),eo=eo.sibling}function hj(eo,to,ro){var no=eo.tag,io=no===5||no===6;if(io)eo=io?eo.stateNode:eo.stateNode.instance,to?ro.insertBefore(eo,to):ro.appendChild(eo);else if(no!==4&&(eo=eo.child,eo!==null))for(hj(eo,to,ro),eo=eo.sibling;eo!==null;)hj(eo,to,ro),eo=eo.sibling}function cj(eo,to){for(var ro=to,no=!1,io,oo;;){if(!no){no=ro.return;e:for(;;){if(no===null)throw Error(y$4(160));switch(io=no.stateNode,no.tag){case 5:oo=!1;break e;case 3:io=io.containerInfo,oo=!0;break e;case 4:io=io.containerInfo,oo=!0;break e}no=no.return}no=!0}if(ro.tag===5||ro.tag===6){e:for(var ao=eo,so=ro,uo=so;;)if(bj(ao,uo),uo.child!==null&&uo.tag!==4)uo.child.return=uo,uo=uo.child;else{if(uo===so)break e;for(;uo.sibling===null;){if(uo.return===null||uo.return===so)break e;uo=uo.return}uo.sibling.return=uo.return,uo=uo.sibling}oo?(ao=io,so=ro.stateNode,ao.nodeType===8?ao.parentNode.removeChild(so):ao.removeChild(so)):io.removeChild(ro.stateNode)}else if(ro.tag===4){if(ro.child!==null){io=ro.stateNode.containerInfo,oo=!0,ro.child.return=ro,ro=ro.child;continue}}else if(bj(eo,ro),ro.child!==null){ro.child.return=ro,ro=ro.child;continue}if(ro===to)break;for(;ro.sibling===null;){if(ro.return===null||ro.return===to)return;ro=ro.return,ro.tag===4&&(no=!1)}ro.sibling.return=ro.return,ro=ro.sibling}}function ij(eo,to){switch(to.tag){case 0:case 11:case 14:case 15:case 22:var ro=to.updateQueue;if(ro=ro!==null?ro.lastEffect:null,ro!==null){var no=ro=ro.next;do(no.tag&3)===3&&(eo=no.destroy,no.destroy=void 0,eo!==void 0&&eo()),no=no.next;while(no!==ro)}return;case 1:return;case 5:if(ro=to.stateNode,ro!=null){no=to.memoizedProps;var io=eo!==null?eo.memoizedProps:no;eo=to.type;var oo=to.updateQueue;if(to.updateQueue=null,oo!==null){for(ro[xf]=no,eo==="input"&&no.type==="radio"&&no.name!=null&&$a(ro,no),wb(eo,io),to=wb(eo,no),io=0;io<oo.length;io+=2){var ao=oo[io],so=oo[io+1];ao==="style"?tb(ro,so):ao==="dangerouslySetInnerHTML"?ob(ro,so):ao==="children"?pb(ro,so):qa(ro,ao,so,to)}switch(eo){case"input":ab(ro,no);break;case"textarea":ib(ro,no);break;case"select":eo=ro._wrapperState.wasMultiple,ro._wrapperState.wasMultiple=!!no.multiple,oo=no.value,oo!=null?fb(ro,!!no.multiple,oo,!1):eo!==!!no.multiple&&(no.defaultValue!=null?fb(ro,!!no.multiple,no.defaultValue,!0):fb(ro,!!no.multiple,no.multiple?[]:"",!1))}}}return;case 6:if(to.stateNode===null)throw Error(y$4(162));to.stateNode.nodeValue=to.memoizedProps;return;case 3:ro=to.stateNode,ro.hydrate&&(ro.hydrate=!1,Cc(ro.containerInfo));return;case 12:return;case 13:to.memoizedState!==null&&(jj=O$2(),aj(to.child,!0)),kj(to);return;case 19:kj(to);return;case 17:return;case 23:case 24:aj(to,to.memoizedState!==null);return}throw Error(y$4(163))}function kj(eo){var to=eo.updateQueue;if(to!==null){eo.updateQueue=null;var ro=eo.stateNode;ro===null&&(ro=eo.stateNode=new Ui$1),to.forEach(function(no){var io=lj.bind(null,eo,no);ro.has(no)||(ro.add(no),no.then(io,io))})}}function mj(eo,to){return eo!==null&&(eo=eo.memoizedState,eo===null||eo.dehydrated!==null)?(to=to.memoizedState,to!==null&&to.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X$1=0,U$1=null,Y$1=null,W$2=0,qj=0,rj=Bf(0),V$2=0,sj=null,tj=0,Dg=0,Hi$1=0,uj=0,vj=null,jj=0,Ji$1=1/0;function wj(){Ji$1=O$2()+500}var Z$1=null,Qi$1=!1,Ri$1=null,Ti$1=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X$1&48)!==0?O$2():Fj!==-1?Fj:Fj=O$2()}function Ig(eo){if(eo=eo.mode,(eo&2)===0)return 1;if((eo&4)===0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),eo=Gj;var to=4186112&~Hj;return to&=-to,to===0&&(eo=4186112&~eo,to=eo&-eo,to===0&&(to=8192)),to}return eo=eg(),(X$1&4)!==0&&eo===98?eo=Xc(12,Gj):(eo=Sc(eo),eo=Xc(eo,Gj)),eo}function Jg(eo,to,ro){if(50<Dj)throw Dj=0,Ej=null,Error(y$4(185));if(eo=Kj(eo,to),eo===null)return null;$c(eo,to,ro),eo===U$1&&(Hi$1|=to,V$2===4&&Ii$1(eo,W$2));var no=eg();to===1?(X$1&8)!==0&&(X$1&48)===0?Lj(eo):(Mj(eo,ro),X$1===0&&(wj(),ig())):((X$1&4)===0||no!==98&&no!==99||(Cj===null?Cj=new Set([eo]):Cj.add(eo)),Mj(eo,ro)),vj=eo}function Kj(eo,to){eo.lanes|=to;var ro=eo.alternate;for(ro!==null&&(ro.lanes|=to),ro=eo,eo=eo.return;eo!==null;)eo.childLanes|=to,ro=eo.alternate,ro!==null&&(ro.childLanes|=to),ro=eo,eo=eo.return;return ro.tag===3?ro.stateNode:null}function Mj(eo,to){for(var ro=eo.callbackNode,no=eo.suspendedLanes,io=eo.pingedLanes,oo=eo.expirationTimes,ao=eo.pendingLanes;0<ao;){var so=31-Vc(ao),uo=1<<so,lo=oo[so];if(lo===-1){if((uo&no)===0||(uo&io)!==0){lo=to,Rc(uo);var co=F$3;oo[so]=10<=co?lo+250:6<=co?lo+5e3:-1}}else lo<=to&&(eo.expiredLanes|=uo);ao&=~uo}if(no=Uc(eo,eo===U$1?W$2:0),to=F$3,no===0)ro!==null&&(ro!==Zf&&Pf(ro),eo.callbackNode=null,eo.callbackPriority=0);else{if(ro!==null){if(eo.callbackPriority===to)return;ro!==Zf&&Pf(ro)}to===15?(ro=Lj.bind(null,eo),ag===null?(ag=[ro],bg=Of(Uf,jg)):ag.push(ro),ro=Zf):to===14?ro=hg(99,Lj.bind(null,eo)):(ro=Tc(to),ro=hg(ro,Nj.bind(null,eo))),eo.callbackPriority=to,eo.callbackNode=ro}}function Nj(eo){if(Fj=-1,Hj=Gj=0,(X$1&48)!==0)throw Error(y$4(327));var to=eo.callbackNode;if(Oj()&&eo.callbackNode!==to)return null;var ro=Uc(eo,eo===U$1?W$2:0);if(ro===0)return null;var no=ro,io=X$1;X$1|=16;var oo=Pj();(U$1!==eo||W$2!==no)&&(wj(),Qj(eo,no));do try{Rj();break}catch(so){Sj(eo,so)}while(1);if(qg(),oj.current=oo,X$1=io,Y$1!==null?no=0:(U$1=null,W$2=0,no=V$2),(tj&Hi$1)!==0)Qj(eo,0);else if(no!==0){if(no===2&&(X$1|=64,eo.hydrate&&(eo.hydrate=!1,qf(eo.containerInfo)),ro=Wc(eo),ro!==0&&(no=Tj(eo,ro))),no===1)throw to=sj,Qj(eo,0),Ii$1(eo,ro),Mj(eo,O$2()),to;switch(eo.finishedWork=eo.current.alternate,eo.finishedLanes=ro,no){case 0:case 1:throw Error(y$4(345));case 2:Uj(eo);break;case 3:if(Ii$1(eo,ro),(ro&62914560)===ro&&(no=jj+500-O$2(),10<no)){if(Uc(eo,0)!==0)break;if(io=eo.suspendedLanes,(io&ro)!==ro){Hg(),eo.pingedLanes|=eo.suspendedLanes&io;break}eo.timeoutHandle=of(Uj.bind(null,eo),no);break}Uj(eo);break;case 4:if(Ii$1(eo,ro),(ro&4186112)===ro)break;for(no=eo.eventTimes,io=-1;0<ro;){var ao=31-Vc(ro);oo=1<<ao,ao=no[ao],ao>io&&(io=ao),ro&=~oo}if(ro=io,ro=O$2()-ro,ro=(120>ro?120:480>ro?480:1080>ro?1080:1920>ro?1920:3e3>ro?3e3:4320>ro?4320:1960*nj(ro/1960))-ro,10<ro){eo.timeoutHandle=of(Uj.bind(null,eo),ro);break}Uj(eo);break;case 5:Uj(eo);break;default:throw Error(y$4(329))}}return Mj(eo,O$2()),eo.callbackNode===to?Nj.bind(null,eo):null}function Ii$1(eo,to){for(to&=~uj,to&=~Hi$1,eo.suspendedLanes|=to,eo.pingedLanes&=~to,eo=eo.expirationTimes;0<to;){var ro=31-Vc(to),no=1<<ro;eo[ro]=-1,to&=~no}}function Lj(eo){if((X$1&48)!==0)throw Error(y$4(327));if(Oj(),eo===U$1&&(eo.expiredLanes&W$2)!==0){var to=W$2,ro=Tj(eo,to);(tj&Hi$1)!==0&&(to=Uc(eo,to),ro=Tj(eo,to))}else to=Uc(eo,0),ro=Tj(eo,to);if(eo.tag!==0&&ro===2&&(X$1|=64,eo.hydrate&&(eo.hydrate=!1,qf(eo.containerInfo)),to=Wc(eo),to!==0&&(ro=Tj(eo,to))),ro===1)throw ro=sj,Qj(eo,0),Ii$1(eo,to),Mj(eo,O$2()),ro;return eo.finishedWork=eo.current.alternate,eo.finishedLanes=to,Uj(eo),Mj(eo,O$2()),null}function Vj(){if(Cj!==null){var eo=Cj;Cj=null,eo.forEach(function(to){to.expiredLanes|=24&to.pendingLanes,Mj(to,O$2())})}ig()}function Wj(eo,to){var ro=X$1;X$1|=1;try{return eo(to)}finally{X$1=ro,X$1===0&&(wj(),ig())}}function Xj(eo,to){var ro=X$1;X$1&=-2,X$1|=8;try{return eo(to)}finally{X$1=ro,X$1===0&&(wj(),ig())}}function ni$1(eo,to){I$2(rj,qj),qj|=to,tj|=to}function Ki$1(){qj=rj.current,H$2(rj)}function Qj(eo,to){eo.finishedWork=null,eo.finishedLanes=0;var ro=eo.timeoutHandle;if(ro!==-1&&(eo.timeoutHandle=-1,pf(ro)),Y$1!==null)for(ro=Y$1.return;ro!==null;){var no=ro;switch(no.tag){case 1:no=no.type.childContextTypes,no!=null&&Gf();break;case 3:fh(),H$2(N$2),H$2(M$2),uh();break;case 5:hh(no);break;case 4:fh();break;case 13:H$2(P$2);break;case 19:H$2(P$2);break;case 10:rg(no);break;case 23:case 24:Ki$1()}ro=ro.return}U$1=eo,Y$1=Tg(eo.current,null),W$2=qj=tj=to,V$2=0,sj=null,uj=Hi$1=Dg=0}function Sj(eo,to){do{var ro=Y$1;try{if(qg(),vh.current=Gh,yh){for(var no=R$2.memoizedState;no!==null;){var io=no.queue;io!==null&&(io.pending=null),no=no.next}yh=!1}if(xh=0,T$1=S$2=R$2=null,zh=!1,pj.current=null,ro===null||ro.return===null){V$2=1,sj=to,Y$1=null;break}e:{var oo=eo,ao=ro.return,so=ro,uo=to;if(to=W$2,so.flags|=2048,so.firstEffect=so.lastEffect=null,uo!==null&&typeof uo=="object"&&typeof uo.then=="function"){var lo=uo;if((so.mode&2)===0){var co=so.alternate;co?(so.updateQueue=co.updateQueue,so.memoizedState=co.memoizedState,so.lanes=co.lanes):(so.updateQueue=null,so.memoizedState=null)}var fo=(P$2.current&1)!==0,mo=ao;do{var go;if(go=mo.tag===13){var yo=mo.memoizedState;if(yo!==null)go=yo.dehydrated!==null;else{var vo=mo.memoizedProps;go=vo.fallback===void 0?!1:vo.unstable_avoidThisFallback!==!0?!0:!fo}}if(go){var Ao=mo.updateQueue;if(Ao===null){var ho=new Set;ho.add(lo),mo.updateQueue=ho}else Ao.add(lo);if((mo.mode&2)===0){if(mo.flags|=64,so.flags|=16384,so.flags&=-2981,so.tag===1)if(so.alternate===null)so.tag=17;else{var po=zg(-1,1);po.tag=2,Ag(so,po)}so.lanes|=1;break e}uo=void 0,so=to;var Mo=oo.pingCache;if(Mo===null?(Mo=oo.pingCache=new Oi$1,uo=new Set,Mo.set(lo,uo)):(uo=Mo.get(lo),uo===void 0&&(uo=new Set,Mo.set(lo,uo))),!uo.has(so)){uo.add(so);var xo=Yj.bind(null,oo,lo,so);lo.then(xo,xo)}mo.flags|=4096,mo.lanes=to;break e}mo=mo.return}while(mo!==null);uo=Error((Ra(so.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V$2!==5&&(V$2=2),uo=Mi$1(uo,so),mo=ao;do{switch(mo.tag){case 3:oo=uo,mo.flags|=4096,to&=-to,mo.lanes|=to;var wo=Pi$1(mo,oo,to);Bg(mo,wo);break e;case 1:oo=uo;var bo=mo.type,_o=mo.stateNode;if((mo.flags&64)===0&&(typeof bo.getDerivedStateFromError=="function"||_o!==null&&typeof _o.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(_o)))){mo.flags|=4096,to&=-to,mo.lanes|=to;var To=Si$1(mo,oo,to);Bg(mo,To);break e}}mo=mo.return}while(mo!==null)}Zj(ro)}catch(No){to=No,Y$1===ro&&ro!==null&&(Y$1=ro=ro.return);continue}break}while(1)}function Pj(){var eo=oj.current;return oj.current=Gh,eo===null?Gh:eo}function Tj(eo,to){var ro=X$1;X$1|=16;var no=Pj();U$1===eo&&W$2===to||Qj(eo,to);do try{ak();break}catch(io){Sj(eo,io)}while(1);if(qg(),X$1=ro,oj.current=no,Y$1!==null)throw Error(y$4(261));return U$1=null,W$2=0,V$2}function ak(){for(;Y$1!==null;)bk(Y$1)}function Rj(){for(;Y$1!==null&&!Qf();)bk(Y$1)}function bk(eo){var to=ck(eo.alternate,eo,qj);eo.memoizedProps=eo.pendingProps,to===null?Zj(eo):Y$1=to,pj.current=null}function Zj(eo){var to=eo;do{var ro=to.alternate;if(eo=to.return,(to.flags&2048)===0){if(ro=Gi$1(ro,to,qj),ro!==null){Y$1=ro;return}if(ro=to,ro.tag!==24&&ro.tag!==23||ro.memoizedState===null||(qj&1073741824)!==0||(ro.mode&4)===0){for(var no=0,io=ro.child;io!==null;)no|=io.lanes|io.childLanes,io=io.sibling;ro.childLanes=no}eo!==null&&(eo.flags&2048)===0&&(eo.firstEffect===null&&(eo.firstEffect=to.firstEffect),to.lastEffect!==null&&(eo.lastEffect!==null&&(eo.lastEffect.nextEffect=to.firstEffect),eo.lastEffect=to.lastEffect),1<to.flags&&(eo.lastEffect!==null?eo.lastEffect.nextEffect=to:eo.firstEffect=to,eo.lastEffect=to))}else{if(ro=Li$1(to),ro!==null){ro.flags&=2047,Y$1=ro;return}eo!==null&&(eo.firstEffect=eo.lastEffect=null,eo.flags|=2048)}if(to=to.sibling,to!==null){Y$1=to;return}Y$1=to=eo}while(to!==null);V$2===0&&(V$2=5)}function Uj(eo){var to=eg();return gg(99,dk.bind(null,eo,to)),null}function dk(eo,to){do Oj();while(yj!==null);if((X$1&48)!==0)throw Error(y$4(327));var ro=eo.finishedWork;if(ro===null)return null;if(eo.finishedWork=null,eo.finishedLanes=0,ro===eo.current)throw Error(y$4(177));eo.callbackNode=null;var no=ro.lanes|ro.childLanes,io=no,oo=eo.pendingLanes&~io;eo.pendingLanes=io,eo.suspendedLanes=0,eo.pingedLanes=0,eo.expiredLanes&=io,eo.mutableReadLanes&=io,eo.entangledLanes&=io,io=eo.entanglements;for(var ao=eo.eventTimes,so=eo.expirationTimes;0<oo;){var uo=31-Vc(oo),lo=1<<uo;io[uo]=0,ao[uo]=-1,so[uo]=-1,oo&=~lo}if(Cj!==null&&(no&24)===0&&Cj.has(eo)&&Cj.delete(eo),eo===U$1&&(Y$1=U$1=null,W$2=0),1<ro.flags?ro.lastEffect!==null?(ro.lastEffect.nextEffect=ro,no=ro.firstEffect):no=ro:no=ro.firstEffect,no!==null){if(io=X$1,X$1|=32,pj.current=null,kf=fd,ao=Ne$1(),Oe$1(ao)){if("selectionStart"in ao)so={start:ao.selectionStart,end:ao.selectionEnd};else e:if(so=(so=ao.ownerDocument)&&so.defaultView||window,(lo=so.getSelection&&so.getSelection())&&lo.rangeCount!==0){so=lo.anchorNode,oo=lo.anchorOffset,uo=lo.focusNode,lo=lo.focusOffset;try{so.nodeType,uo.nodeType}catch{so=null;break e}var co=0,fo=-1,mo=-1,go=0,yo=0,vo=ao,Ao=null;t:for(;;){for(var ho;vo!==so||oo!==0&&vo.nodeType!==3||(fo=co+oo),vo!==uo||lo!==0&&vo.nodeType!==3||(mo=co+lo),vo.nodeType===3&&(co+=vo.nodeValue.length),(ho=vo.firstChild)!==null;)Ao=vo,vo=ho;for(;;){if(vo===ao)break t;if(Ao===so&&++go===oo&&(fo=co),Ao===uo&&++yo===lo&&(mo=co),(ho=vo.nextSibling)!==null)break;vo=Ao,Ao=vo.parentNode}vo=ho}so=fo===-1||mo===-1?null:{start:fo,end:mo}}else so=null;so=so||{start:0,end:0}}else so=null;lf={focusedElem:ao,selectionRange:so},fd=!1,Ij=null,Jj=!1,Z$1=no;do try{ek()}catch(No){if(Z$1===null)throw Error(y$4(330));Wi$1(Z$1,No),Z$1=Z$1.nextEffect}while(Z$1!==null);Ij=null,Z$1=no;do try{for(ao=eo;Z$1!==null;){var po=Z$1.flags;if(po&16&&pb(Z$1.stateNode,""),po&128){var Mo=Z$1.alternate;if(Mo!==null){var xo=Mo.ref;xo!==null&&(typeof xo=="function"?xo(null):xo.current=null)}}switch(po&1038){case 2:fj(Z$1),Z$1.flags&=-3;break;case 6:fj(Z$1),Z$1.flags&=-3,ij(Z$1.alternate,Z$1);break;case 1024:Z$1.flags&=-1025;break;case 1028:Z$1.flags&=-1025,ij(Z$1.alternate,Z$1);break;case 4:ij(Z$1.alternate,Z$1);break;case 8:so=Z$1,cj(ao,so);var wo=so.alternate;dj(so),wo!==null&&dj(wo)}Z$1=Z$1.nextEffect}}catch(No){if(Z$1===null)throw Error(y$4(330));Wi$1(Z$1,No),Z$1=Z$1.nextEffect}while(Z$1!==null);if(xo=lf,Mo=Ne$1(),po=xo.focusedElem,ao=xo.selectionRange,Mo!==po&&po&&po.ownerDocument&&Me$1(po.ownerDocument.documentElement,po)){for(ao!==null&&Oe$1(po)&&(Mo=ao.start,xo=ao.end,xo===void 0&&(xo=Mo),"selectionStart"in po?(po.selectionStart=Mo,po.selectionEnd=Math.min(xo,po.value.length)):(xo=(Mo=po.ownerDocument||document)&&Mo.defaultView||window,xo.getSelection&&(xo=xo.getSelection(),so=po.textContent.length,wo=Math.min(ao.start,so),ao=ao.end===void 0?wo:Math.min(ao.end,so),!xo.extend&&wo>ao&&(so=ao,ao=wo,wo=so),so=Le$1(po,wo),oo=Le$1(po,ao),so&&oo&&(xo.rangeCount!==1||xo.anchorNode!==so.node||xo.anchorOffset!==so.offset||xo.focusNode!==oo.node||xo.focusOffset!==oo.offset)&&(Mo=Mo.createRange(),Mo.setStart(so.node,so.offset),xo.removeAllRanges(),wo>ao?(xo.addRange(Mo),xo.extend(oo.node,oo.offset)):(Mo.setEnd(oo.node,oo.offset),xo.addRange(Mo)))))),Mo=[],xo=po;xo=xo.parentNode;)xo.nodeType===1&&Mo.push({element:xo,left:xo.scrollLeft,top:xo.scrollTop});for(typeof po.focus=="function"&&po.focus(),po=0;po<Mo.length;po++)xo=Mo[po],xo.element.scrollLeft=xo.left,xo.element.scrollTop=xo.top}fd=!!kf,lf=kf=null,eo.current=ro,Z$1=no;do try{for(po=eo;Z$1!==null;){var bo=Z$1.flags;if(bo&36&&Yi$1(po,Z$1.alternate,Z$1),bo&128){Mo=void 0;var _o=Z$1.ref;if(_o!==null){var To=Z$1.stateNode;switch(Z$1.tag){case 5:Mo=To;break;default:Mo=To}typeof _o=="function"?_o(Mo):_o.current=Mo}}Z$1=Z$1.nextEffect}}catch(No){if(Z$1===null)throw Error(y$4(330));Wi$1(Z$1,No),Z$1=Z$1.nextEffect}while(Z$1!==null);Z$1=null,$f(),X$1=io}else eo.current=ro;if(xj)xj=!1,yj=eo,zj=to;else for(Z$1=no;Z$1!==null;)to=Z$1.nextEffect,Z$1.nextEffect=null,Z$1.flags&8&&(bo=Z$1,bo.sibling=null,bo.stateNode=null),Z$1=to;if(no=eo.pendingLanes,no===0&&(Ti$1=null),no===1?eo===Ej?Dj++:(Dj=0,Ej=eo):Dj=0,ro=ro.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,ro,void 0,(ro.current.flags&64)===64)}catch{}if(Mj(eo,O$2()),Qi$1)throw Qi$1=!1,eo=Ri$1,Ri$1=null,eo;return(X$1&8)!==0||ig(),null}function ek(){for(;Z$1!==null;){var eo=Z$1.alternate;Jj||Ij===null||((Z$1.flags&8)!==0?dc(Z$1,Ij)&&(Jj=!0):Z$1.tag===13&&mj(eo,Z$1)&&dc(Z$1,Ij)&&(Jj=!0));var to=Z$1.flags;(to&256)!==0&&Xi$1(eo,Z$1),(to&512)===0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z$1=Z$1.nextEffect}}function Oj(){if(zj!==90){var eo=97<zj?97:zj;return zj=90,gg(eo,fk)}return!1}function $i$1(eo,to){Aj.push(to,eo),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi$1(eo,to){Bj.push(to,eo),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var eo=yj;if(yj=null,(X$1&48)!==0)throw Error(y$4(331));var to=X$1;X$1|=32;var ro=Bj;Bj=[];for(var no=0;no<ro.length;no+=2){var io=ro[no],oo=ro[no+1],ao=io.destroy;if(io.destroy=void 0,typeof ao=="function")try{ao()}catch(uo){if(oo===null)throw Error(y$4(330));Wi$1(oo,uo)}}for(ro=Aj,Aj=[],no=0;no<ro.length;no+=2){io=ro[no],oo=ro[no+1];try{var so=io.create;io.destroy=so()}catch(uo){if(oo===null)throw Error(y$4(330));Wi$1(oo,uo)}}for(so=eo.current.firstEffect;so!==null;)eo=so.nextEffect,so.nextEffect=null,so.flags&8&&(so.sibling=null,so.stateNode=null),so=eo;return X$1=to,ig(),!0}function gk(eo,to,ro){to=Mi$1(ro,to),to=Pi$1(eo,to,1),Ag(eo,to),to=Hg(),eo=Kj(eo,1),eo!==null&&($c(eo,1,to),Mj(eo,to))}function Wi$1(eo,to){if(eo.tag===3)gk(eo,eo,to);else for(var ro=eo.return;ro!==null;){if(ro.tag===3){gk(ro,eo,to);break}else if(ro.tag===1){var no=ro.stateNode;if(typeof ro.type.getDerivedStateFromError=="function"||typeof no.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(no))){eo=Mi$1(to,eo);var io=Si$1(ro,eo,1);if(Ag(ro,io),io=Hg(),ro=Kj(ro,1),ro!==null)$c(ro,1,io),Mj(ro,io);else if(typeof no.componentDidCatch=="function"&&(Ti$1===null||!Ti$1.has(no)))try{no.componentDidCatch(to,eo)}catch{}break}}ro=ro.return}}function Yj(eo,to,ro){var no=eo.pingCache;no!==null&&no.delete(to),to=Hg(),eo.pingedLanes|=eo.suspendedLanes&ro,U$1===eo&&(W$2&ro)===ro&&(V$2===4||V$2===3&&(W$2&62914560)===W$2&&500>O$2()-jj?Qj(eo,0):uj|=ro),Mj(eo,to)}function lj(eo,to){var ro=eo.stateNode;ro!==null&&ro.delete(to),to=0,to===0&&(to=eo.mode,(to&2)===0?to=1:(to&4)===0?to=eg()===99?1:2:(Gj===0&&(Gj=tj),to=Yc(62914560&~Gj),to===0&&(to=4194304))),ro=Hg(),eo=Kj(eo,to),eo!==null&&($c(eo,to,ro),Mj(eo,ro))}var ck;ck=function(eo,to,ro){var no=to.lanes;if(eo!==null)if(eo.memoizedProps!==to.pendingProps||N$2.current)ug=!0;else if((ro&no)!==0)ug=(eo.flags&16384)!==0;else{switch(ug=!1,to.tag){case 3:ri$1(to),sh();break;case 5:gh(to);break;case 1:Ff(to.type)&&Jf(to);break;case 4:eh(to,to.stateNode.containerInfo);break;case 10:no=to.memoizedProps.value;var io=to.type._context;I$2(mg,io._currentValue),io._currentValue=no;break;case 13:if(to.memoizedState!==null)return(ro&to.child.childLanes)!==0?ti$1(eo,to,ro):(I$2(P$2,P$2.current&1),to=hi$1(eo,to,ro),to!==null?to.sibling:null);I$2(P$2,P$2.current&1);break;case 19:if(no=(ro&to.childLanes)!==0,(eo.flags&64)!==0){if(no)return Ai$1(eo,to,ro);to.flags|=64}if(io=to.memoizedState,io!==null&&(io.rendering=null,io.tail=null,io.lastEffect=null),I$2(P$2,P$2.current),no)break;return null;case 23:case 24:return to.lanes=0,mi$1(eo,to,ro)}return hi$1(eo,to,ro)}else ug=!1;switch(to.lanes=0,to.tag){case 2:if(no=to.type,eo!==null&&(eo.alternate=null,to.alternate=null,to.flags|=2),eo=to.pendingProps,io=Ef(to,M$2.current),tg(to,ro),io=Ch(null,to,no,eo,io,ro),to.flags|=1,typeof io=="object"&&io!==null&&typeof io.render=="function"&&io.$$typeof===void 0){if(to.tag=1,to.memoizedState=null,to.updateQueue=null,Ff(no)){var oo=!0;Jf(to)}else oo=!1;to.memoizedState=io.state!==null&&io.state!==void 0?io.state:null,xg(to);var ao=no.getDerivedStateFromProps;typeof ao=="function"&&Gg(to,no,ao,eo),io.updater=Kg,to.stateNode=io,io._reactInternals=to,Og(to,no,eo,ro),to=qi$1(null,to,no,!0,oo,ro)}else to.tag=0,fi$1(null,to,io,ro),to=to.child;return to;case 16:io=to.elementType;e:{switch(eo!==null&&(eo.alternate=null,to.alternate=null,to.flags|=2),eo=to.pendingProps,oo=io._init,io=oo(io._payload),to.type=io,oo=to.tag=hk(io),eo=lg(io,eo),oo){case 0:to=li$1(null,to,io,eo,ro);break e;case 1:to=pi$1(null,to,io,eo,ro);break e;case 11:to=gi$1(null,to,io,eo,ro);break e;case 14:to=ii$1(null,to,io,lg(io.type,eo),no,ro);break e}throw Error(y$4(306,io,""))}return to;case 0:return no=to.type,io=to.pendingProps,io=to.elementType===no?io:lg(no,io),li$1(eo,to,no,io,ro);case 1:return no=to.type,io=to.pendingProps,io=to.elementType===no?io:lg(no,io),pi$1(eo,to,no,io,ro);case 3:if(ri$1(to),no=to.updateQueue,eo===null||no===null)throw Error(y$4(282));if(no=to.pendingProps,io=to.memoizedState,io=io!==null?io.element:null,yg(eo,to),Cg(to,no,null,ro),no=to.memoizedState.element,no===io)sh(),to=hi$1(eo,to,ro);else{if(io=to.stateNode,(oo=io.hydrate)&&(kh=rf(to.stateNode.containerInfo.firstChild),jh=to,oo=lh=!0),oo){if(eo=io.mutableSourceEagerHydrationData,eo!=null)for(io=0;io<eo.length;io+=2)oo=eo[io],oo._workInProgressVersionPrimary=eo[io+1],th.push(oo);for(ro=Zg(to,null,no,ro),to.child=ro;ro;)ro.flags=ro.flags&-3|1024,ro=ro.sibling}else fi$1(eo,to,no,ro),sh();to=to.child}return to;case 5:return gh(to),eo===null&&ph(to),no=to.type,io=to.pendingProps,oo=eo!==null?eo.memoizedProps:null,ao=io.children,nf(no,io)?ao=null:oo!==null&&nf(no,oo)&&(to.flags|=16),oi$1(eo,to),fi$1(eo,to,ao,ro),to.child;case 6:return eo===null&&ph(to),null;case 13:return ti$1(eo,to,ro);case 4:return eh(to,to.stateNode.containerInfo),no=to.pendingProps,eo===null?to.child=Yg(to,null,no,ro):fi$1(eo,to,no,ro),to.child;case 11:return no=to.type,io=to.pendingProps,io=to.elementType===no?io:lg(no,io),gi$1(eo,to,no,io,ro);case 7:return fi$1(eo,to,to.pendingProps,ro),to.child;case 8:return fi$1(eo,to,to.pendingProps.children,ro),to.child;case 12:return fi$1(eo,to,to.pendingProps.children,ro),to.child;case 10:e:{no=to.type._context,io=to.pendingProps,ao=to.memoizedProps,oo=io.value;var so=to.type._context;if(I$2(mg,so._currentValue),so._currentValue=oo,ao!==null)if(so=ao.value,oo=He$1(so,oo)?0:(typeof no._calculateChangedBits=="function"?no._calculateChangedBits(so,oo):1073741823)|0,oo===0){if(ao.children===io.children&&!N$2.current){to=hi$1(eo,to,ro);break e}}else for(so=to.child,so!==null&&(so.return=to);so!==null;){var uo=so.dependencies;if(uo!==null){ao=so.child;for(var lo=uo.firstContext;lo!==null;){if(lo.context===no&&(lo.observedBits&oo)!==0){so.tag===1&&(lo=zg(-1,ro&-ro),lo.tag=2,Ag(so,lo)),so.lanes|=ro,lo=so.alternate,lo!==null&&(lo.lanes|=ro),sg(so.return,ro),uo.lanes|=ro;break}lo=lo.next}}else ao=so.tag===10&&so.type===to.type?null:so.child;if(ao!==null)ao.return=so;else for(ao=so;ao!==null;){if(ao===to){ao=null;break}if(so=ao.sibling,so!==null){so.return=ao.return,ao=so;break}ao=ao.return}so=ao}fi$1(eo,to,io.children,ro),to=to.child}return to;case 9:return io=to.type,oo=to.pendingProps,no=oo.children,tg(to,ro),io=vg(io,oo.unstable_observedBits),no=no(io),to.flags|=1,fi$1(eo,to,no,ro),to.child;case 14:return io=to.type,oo=lg(io,to.pendingProps),oo=lg(io.type,oo),ii$1(eo,to,io,oo,no,ro);case 15:return ki$1(eo,to,to.type,to.pendingProps,no,ro);case 17:return no=to.type,io=to.pendingProps,io=to.elementType===no?io:lg(no,io),eo!==null&&(eo.alternate=null,to.alternate=null,to.flags|=2),to.tag=1,Ff(no)?(eo=!0,Jf(to)):eo=!1,tg(to,ro),Mg(to,no,io),Og(to,no,io,ro),qi$1(null,to,no,!0,eo,ro);case 19:return Ai$1(eo,to,ro);case 23:return mi$1(eo,to,ro);case 24:return mi$1(eo,to,ro)}throw Error(y$4(156,to.tag))};function ik(eo,to,ro,no){this.tag=eo,this.key=ro,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=to,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=no,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(eo,to,ro,no){return new ik(eo,to,ro,no)}function ji$1(eo){return eo=eo.prototype,!(!eo||!eo.isReactComponent)}function hk(eo){if(typeof eo=="function")return ji$1(eo)?1:0;if(eo!=null){if(eo=eo.$$typeof,eo===Aa)return 11;if(eo===Da)return 14}return 2}function Tg(eo,to){var ro=eo.alternate;return ro===null?(ro=nh(eo.tag,to,eo.key,eo.mode),ro.elementType=eo.elementType,ro.type=eo.type,ro.stateNode=eo.stateNode,ro.alternate=eo,eo.alternate=ro):(ro.pendingProps=to,ro.type=eo.type,ro.flags=0,ro.nextEffect=null,ro.firstEffect=null,ro.lastEffect=null),ro.childLanes=eo.childLanes,ro.lanes=eo.lanes,ro.child=eo.child,ro.memoizedProps=eo.memoizedProps,ro.memoizedState=eo.memoizedState,ro.updateQueue=eo.updateQueue,to=eo.dependencies,ro.dependencies=to===null?null:{lanes:to.lanes,firstContext:to.firstContext},ro.sibling=eo.sibling,ro.index=eo.index,ro.ref=eo.ref,ro}function Vg(eo,to,ro,no,io,oo){var ao=2;if(no=eo,typeof eo=="function")ji$1(eo)&&(ao=1);else if(typeof eo=="string")ao=5;else e:switch(eo){case ua:return Xg(ro.children,io,oo,to);case Ha:ao=8,io|=16;break;case wa:ao=8,io|=1;break;case xa:return eo=nh(12,ro,to,io|8),eo.elementType=xa,eo.type=xa,eo.lanes=oo,eo;case Ba:return eo=nh(13,ro,to,io),eo.type=Ba,eo.elementType=Ba,eo.lanes=oo,eo;case Ca:return eo=nh(19,ro,to,io),eo.elementType=Ca,eo.lanes=oo,eo;case Ia:return vi$1(ro,io,oo,to);case Ja:return eo=nh(24,ro,to,io),eo.elementType=Ja,eo.lanes=oo,eo;default:if(typeof eo=="object"&&eo!==null)switch(eo.$$typeof){case ya:ao=10;break e;case za:ao=9;break e;case Aa:ao=11;break e;case Da:ao=14;break e;case Ea:ao=16,no=null;break e;case Fa:ao=22;break e}throw Error(y$4(130,eo==null?eo:typeof eo,""))}return to=nh(ao,ro,to,io),to.elementType=eo,to.type=no,to.lanes=oo,to}function Xg(eo,to,ro,no){return eo=nh(7,eo,no,to),eo.lanes=ro,eo}function vi$1(eo,to,ro,no){return eo=nh(23,eo,no,to),eo.elementType=Ia,eo.lanes=ro,eo}function Ug(eo,to,ro){return eo=nh(6,eo,null,to),eo.lanes=ro,eo}function Wg(eo,to,ro){return to=nh(4,eo.children!==null?eo.children:[],eo.key,to),to.lanes=ro,to.stateNode={containerInfo:eo.containerInfo,pendingChildren:null,implementation:eo.implementation},to}function jk(eo,to,ro){this.tag=to,this.containerInfo=eo,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=ro,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(eo,to,ro){var no=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:no==null?null:""+no,children:eo,containerInfo:to,implementation:ro}}function lk(eo,to,ro,no){var io=to.current,oo=Hg(),ao=Ig(io);e:if(ro){ro=ro._reactInternals;t:{if(Zb(ro)!==ro||ro.tag!==1)throw Error(y$4(170));var so=ro;do{switch(so.tag){case 3:so=so.stateNode.context;break t;case 1:if(Ff(so.type)){so=so.stateNode.__reactInternalMemoizedMergedChildContext;break t}}so=so.return}while(so!==null);throw Error(y$4(171))}if(ro.tag===1){var uo=ro.type;if(Ff(uo)){ro=If(ro,uo,so);break e}}ro=so}else ro=Cf;return to.context===null?to.context=ro:to.pendingContext=ro,to=zg(oo,ao),to.payload={element:eo},no=no===void 0?null:no,no!==null&&(to.callback=no),Ag(io,to),Jg(io,ao,oo),ao}function mk(eo){if(eo=eo.current,!eo.child)return null;switch(eo.child.tag){case 5:return eo.child.stateNode;default:return eo.child.stateNode}}function nk(eo,to){if(eo=eo.memoizedState,eo!==null&&eo.dehydrated!==null){var ro=eo.retryLane;eo.retryLane=ro!==0&&ro<to?ro:to}}function ok(eo,to){nk(eo,to),(eo=eo.alternate)&&nk(eo,to)}function pk(){return null}function qk(eo,to,ro){var no=ro!=null&&ro.hydrationOptions!=null&&ro.hydrationOptions.mutableSources||null;if(ro=new jk(eo,to,ro!=null&&ro.hydrate===!0),to=nh(3,null,null,to===2?7:to===1?3:0),ro.current=to,to.stateNode=ro,xg(to),eo[ff]=ro.current,cf(eo.nodeType===8?eo.parentNode:eo),no)for(eo=0;eo<no.length;eo++){to=no[eo];var io=to._getVersion;io=io(to._source),ro.mutableSourceEagerHydrationData==null?ro.mutableSourceEagerHydrationData=[to,io]:ro.mutableSourceEagerHydrationData.push(to,io)}this._internalRoot=ro}qk.prototype.render=function(eo){lk(eo,this._internalRoot,null,null)};qk.prototype.unmount=function(){var eo=this._internalRoot,to=eo.containerInfo;lk(null,eo,null,function(){to[ff]=null})};function rk(eo){return!(!eo||eo.nodeType!==1&&eo.nodeType!==9&&eo.nodeType!==11&&(eo.nodeType!==8||eo.nodeValue!==" react-mount-point-unstable "))}function sk(eo,to){if(to||(to=eo?eo.nodeType===9?eo.documentElement:eo.firstChild:null,to=!(!to||to.nodeType!==1||!to.hasAttribute("data-reactroot"))),!to)for(var ro;ro=eo.lastChild;)eo.removeChild(ro);return new qk(eo,0,to?{hydrate:!0}:void 0)}function tk(eo,to,ro,no,io){var oo=ro._reactRootContainer;if(oo){var ao=oo._internalRoot;if(typeof io=="function"){var so=io;io=function(){var lo=mk(ao);so.call(lo)}}lk(to,ao,eo,io)}else{if(oo=ro._reactRootContainer=sk(ro,no),ao=oo._internalRoot,typeof io=="function"){var uo=io;io=function(){var lo=mk(ao);uo.call(lo)}}Xj(function(){lk(to,ao,eo,io)})}return mk(ao)}ec=function(eo){if(eo.tag===13){var to=Hg();Jg(eo,4,to),ok(eo,4)}};fc=function(eo){if(eo.tag===13){var to=Hg();Jg(eo,67108864,to),ok(eo,67108864)}};gc=function(eo){if(eo.tag===13){var to=Hg(),ro=Ig(eo);Jg(eo,ro,to),ok(eo,ro)}};hc=function(eo,to){return to()};yb=function(eo,to,ro){switch(to){case"input":if(ab(eo,ro),to=ro.name,ro.type==="radio"&&to!=null){for(ro=eo;ro.parentNode;)ro=ro.parentNode;for(ro=ro.querySelectorAll("input[name="+JSON.stringify(""+to)+'][type="radio"]'),to=0;to<ro.length;to++){var no=ro[to];if(no!==eo&&no.form===eo.form){var io=Db(no);if(!io)throw Error(y$4(90));Wa(no),ab(no,io)}}}break;case"textarea":ib(eo,ro);break;case"select":to=ro.value,to!=null&&fb(eo,!!ro.multiple,to,!1)}};Gb=Wj;Hb=function(eo,to,ro,no,io){var oo=X$1;X$1|=4;try{return gg(98,eo.bind(null,to,ro,no,io))}finally{X$1=oo,X$1===0&&(wj(),ig())}};Ib=function(){(X$1&49)===0&&(Vj(),Oj())};Jb=function(eo,to){var ro=X$1;X$1|=2;try{return eo(to)}finally{X$1=ro,X$1===0&&(wj(),ig())}};function uk(eo,to){var ro=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(to))throw Error(y$4(200));return kk(eo,to,null,ro)}var vk={Events:[Cb,ue$1,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(eo){return eo=cc(eo),eo===null?null:eo.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(eo){if(eo==null)return null;if(eo.nodeType===1)return eo;var to=eo._reactInternals;if(to===void 0)throw typeof eo.render=="function"?Error(y$4(188)):Error(y$4(268,Object.keys(eo)));return eo=cc(to),eo=eo===null?null:eo.stateNode,eo};reactDom_production_min.flushSync=function(eo,to){var ro=X$1;if((ro&48)!==0)return eo(to);X$1|=1;try{if(eo)return gg(99,eo.bind(null,to))}finally{X$1=ro,ig()}};reactDom_production_min.hydrate=function(eo,to,ro){if(!rk(to))throw Error(y$4(200));return tk(null,eo,to,!0,ro)};reactDom_production_min.render=function(eo,to,ro){if(!rk(to))throw Error(y$4(200));return tk(null,eo,to,!1,ro)};reactDom_production_min.unmountComponentAtNode=function(eo){if(!rk(eo))throw Error(y$4(40));return eo._reactRootContainer?(Xj(function(){tk(null,null,eo,!1,function(){eo._reactRootContainer=null,eo[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(eo,to){return uk(eo,to,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(eo,to,ro,no){if(!rk(ro))throw Error(y$4(200));if(eo==null||eo._reactInternals===void 0)throw Error(y$4(38));return tk(eo,to,ro,!1,no)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(eo){console.error(eo)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(eo){return typeof eo=="number"&&isFinite(eo)&&Math.floor(eo)===eo});Math.sign===void 0&&(Math.sign=function(eo){return eo<0?-1:eo>0?1:+eo});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(eo){if(eo==null)throw new TypeError("Cannot convert undefined or null to object");const to=Object(eo);for(let ro=1;ro<arguments.length;ro++){const no=arguments[ro];if(no!=null)for(const io in no)Object.prototype.hasOwnProperty.call(no,io)&&(to[io]=no[io])}return to});const REVISION="117",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,FrontFaceDirectionCW=0,FrontFaceDirectionCCW=1,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,ACESFilmicToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,RGBEFormat=RGBAFormat,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,SRGB8_ALPHA8_ASTC_4x4_Format=37840,SRGB8_ALPHA8_ASTC_5x4_Format=37841,SRGB8_ALPHA8_ASTC_5x5_Format=37842,SRGB8_ALPHA8_ASTC_6x5_Format=37843,SRGB8_ALPHA8_ASTC_6x6_Format=37844,SRGB8_ALPHA8_ASTC_8x5_Format=37845,SRGB8_ALPHA8_ASTC_8x6_Format=37846,SRGB8_ALPHA8_ASTC_8x8_Format=37847,SRGB8_ALPHA8_ASTC_10x5_Format=37848,SRGB8_ALPHA8_ASTC_10x6_Format=37849,SRGB8_ALPHA8_ASTC_10x8_Format=37850,SRGB8_ALPHA8_ASTC_10x10_Format=37851,SRGB8_ALPHA8_ASTC_12x10_Format=37852,SRGB8_ALPHA8_ASTC_12x12_Format=37853,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,LogLuvEncoding=3003,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042;function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(eo,to){this._listeners===void 0&&(this._listeners={});var ro=this._listeners;ro[eo]===void 0&&(ro[eo]=[]),ro[eo].indexOf(to)===-1&&ro[eo].push(to)},hasEventListener:function(eo,to){if(this._listeners===void 0)return!1;var ro=this._listeners;return ro[eo]!==void 0&&ro[eo].indexOf(to)!==-1},removeEventListener:function(eo,to){if(this._listeners!==void 0){var ro=this._listeners,no=ro[eo];if(no!==void 0){var io=no.indexOf(to);io!==-1&&no.splice(io,1)}}},dispatchEvent:function(eo){if(this._listeners!==void 0){var to=this._listeners,ro=to[eo.type];if(ro!==void 0){eo.target=this;for(var no=ro.slice(0),io=0,oo=no.length;io<oo;io++)no[io].call(this,eo)}}}});var _lut=[];for(var i$3=0;i$3<256;i$3++)_lut[i$3]=(i$3<16?"0":"")+i$3.toString(16);var MathUtils={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var eo=Math.random()*4294967295|0,to=Math.random()*4294967295|0,ro=Math.random()*4294967295|0,no=Math.random()*4294967295|0,io=_lut[eo&255]+_lut[eo>>8&255]+_lut[eo>>16&255]+_lut[eo>>24&255]+"-"+_lut[to&255]+_lut[to>>8&255]+"-"+_lut[to>>16&15|64]+_lut[to>>24&255]+"-"+_lut[ro&63|128]+_lut[ro>>8&255]+"-"+_lut[ro>>16&255]+_lut[ro>>24&255]+_lut[no&255]+_lut[no>>8&255]+_lut[no>>16&255]+_lut[no>>24&255];return io.toUpperCase()},clamp:function(eo,to,ro){return Math.max(to,Math.min(ro,eo))},euclideanModulo:function(eo,to){return(eo%to+to)%to},mapLinear:function(eo,to,ro,no,io){return no+(eo-to)*(io-no)/(ro-to)},lerp:function(eo,to,ro){return(1-ro)*eo+ro*to},smoothstep:function(eo,to,ro){return eo<=to?0:eo>=ro?1:(eo=(eo-to)/(ro-to),eo*eo*(3-2*eo))},smootherstep:function(eo,to,ro){return eo<=to?0:eo>=ro?1:(eo=(eo-to)/(ro-to),eo*eo*eo*(eo*(eo*6-15)+10))},randInt:function(eo,to){return eo+Math.floor(Math.random()*(to-eo+1))},randFloat:function(eo,to){return eo+Math.random()*(to-eo)},randFloatSpread:function(eo){return eo*(.5-Math.random())},degToRad:function(eo){return eo*MathUtils.DEG2RAD},radToDeg:function(eo){return eo*MathUtils.RAD2DEG},isPowerOfTwo:function(eo){return(eo&eo-1)===0&&eo!==0},ceilPowerOfTwo:function(eo){return Math.pow(2,Math.ceil(Math.log(eo)/Math.LN2))},floorPowerOfTwo:function(eo){return Math.pow(2,Math.floor(Math.log(eo)/Math.LN2))},setQuaternionFromProperEuler:function(eo,to,ro,no,io){var oo=Math.cos,ao=Math.sin,so=oo(ro/2),uo=ao(ro/2),lo=oo((to+no)/2),co=ao((to+no)/2),fo=oo((to-no)/2),mo=ao((to-no)/2),go=oo((no-to)/2),yo=ao((no-to)/2);switch(io){case"XYX":eo.set(so*co,uo*fo,uo*mo,so*lo);break;case"YZY":eo.set(uo*mo,so*co,uo*fo,so*lo);break;case"ZXZ":eo.set(uo*fo,uo*mo,so*co,so*lo);break;case"XZX":eo.set(so*co,uo*yo,uo*go,so*lo);break;case"YXY":eo.set(uo*go,so*co,uo*yo,so*lo);break;case"ZYZ":eo.set(uo*yo,uo*go,so*co,so*lo);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+io)}}};function Vector2(eo,to){this.x=eo||0,this.y=to||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(eo){this.x=eo}},height:{get:function(){return this.y},set:function(eo){this.y=eo}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(eo,to){return this.x=eo,this.y=to,this},setScalar:function(eo){return this.x=eo,this.y=eo,this},setX:function(eo){return this.x=eo,this},setY:function(eo){return this.y=eo,this},setComponent:function(eo,to){switch(eo){case 0:this.x=to;break;case 1:this.y=to;break;default:throw new Error("index is out of range: "+eo)}return this},getComponent:function(eo){switch(eo){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+eo)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(eo){return this.x=eo.x,this.y=eo.y,this},add:function(eo,to){return to!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(eo,to)):(this.x+=eo.x,this.y+=eo.y,this)},addScalar:function(eo){return this.x+=eo,this.y+=eo,this},addVectors:function(eo,to){return this.x=eo.x+to.x,this.y=eo.y+to.y,this},addScaledVector:function(eo,to){return this.x+=eo.x*to,this.y+=eo.y*to,this},sub:function(eo,to){return to!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(eo,to)):(this.x-=eo.x,this.y-=eo.y,this)},subScalar:function(eo){return this.x-=eo,this.y-=eo,this},subVectors:function(eo,to){return this.x=eo.x-to.x,this.y=eo.y-to.y,this},multiply:function(eo){return this.x*=eo.x,this.y*=eo.y,this},multiplyScalar:function(eo){return this.x*=eo,this.y*=eo,this},divide:function(eo){return this.x/=eo.x,this.y/=eo.y,this},divideScalar:function(eo){return this.multiplyScalar(1/eo)},applyMatrix3:function(eo){var to=this.x,ro=this.y,no=eo.elements;return this.x=no[0]*to+no[3]*ro+no[6],this.y=no[1]*to+no[4]*ro+no[7],this},min:function(eo){return this.x=Math.min(this.x,eo.x),this.y=Math.min(this.y,eo.y),this},max:function(eo){return this.x=Math.max(this.x,eo.x),this.y=Math.max(this.y,eo.y),this},clamp:function(eo,to){return this.x=Math.max(eo.x,Math.min(to.x,this.x)),this.y=Math.max(eo.y,Math.min(to.y,this.y)),this},clampScalar:function(eo,to){return this.x=Math.max(eo,Math.min(to,this.x)),this.y=Math.max(eo,Math.min(to,this.y)),this},clampLength:function(eo,to){var ro=this.length();return this.divideScalar(ro||1).multiplyScalar(Math.max(eo,Math.min(to,ro)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(eo){return this.x*eo.x+this.y*eo.y},cross:function(eo){return this.x*eo.y-this.y*eo.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var eo=Math.atan2(-this.y,-this.x)+Math.PI;return eo},distanceTo:function(eo){return Math.sqrt(this.distanceToSquared(eo))},distanceToSquared:function(eo){var to=this.x-eo.x,ro=this.y-eo.y;return to*to+ro*ro},manhattanDistanceTo:function(eo){return Math.abs(this.x-eo.x)+Math.abs(this.y-eo.y)},setLength:function(eo){return this.normalize().multiplyScalar(eo)},lerp:function(eo,to){return this.x+=(eo.x-this.x)*to,this.y+=(eo.y-this.y)*to,this},lerpVectors:function(eo,to,ro){return this.x=eo.x+(to.x-eo.x)*ro,this.y=eo.y+(to.y-eo.y)*ro,this},equals:function(eo){return eo.x===this.x&&eo.y===this.y},fromArray:function(eo,to){return to===void 0&&(to=0),this.x=eo[to],this.y=eo[to+1],this},toArray:function(eo,to){return eo===void 0&&(eo=[]),to===void 0&&(to=0),eo[to]=this.x,eo[to+1]=this.y,eo},fromBufferAttribute:function(eo,to,ro){return ro!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=eo.getX(to),this.y=eo.getY(to),this},rotateAround:function(eo,to){var ro=Math.cos(to),no=Math.sin(to),io=this.x-eo.x,oo=this.y-eo.y;return this.x=io*ro-oo*no+eo.x,this.y=io*no+oo*ro+eo.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(eo,to,ro,no,io,oo,ao,so,uo){var lo=this.elements;return lo[0]=eo,lo[1]=no,lo[2]=ao,lo[3]=to,lo[4]=io,lo[5]=so,lo[6]=ro,lo[7]=oo,lo[8]=uo,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(eo){var to=this.elements,ro=eo.elements;return to[0]=ro[0],to[1]=ro[1],to[2]=ro[2],to[3]=ro[3],to[4]=ro[4],to[5]=ro[5],to[6]=ro[6],to[7]=ro[7],to[8]=ro[8],this},extractBasis:function(eo,to,ro){return eo.setFromMatrix3Column(this,0),to.setFromMatrix3Column(this,1),ro.setFromMatrix3Column(this,2),this},setFromMatrix4:function(eo){var to=eo.elements;return this.set(to[0],to[4],to[8],to[1],to[5],to[9],to[2],to[6],to[10]),this},multiply:function(eo){return this.multiplyMatrices(this,eo)},premultiply:function(eo){return this.multiplyMatrices(eo,this)},multiplyMatrices:function(eo,to){var ro=eo.elements,no=to.elements,io=this.elements,oo=ro[0],ao=ro[3],so=ro[6],uo=ro[1],lo=ro[4],co=ro[7],fo=ro[2],mo=ro[5],go=ro[8],yo=no[0],vo=no[3],Ao=no[6],ho=no[1],po=no[4],Mo=no[7],xo=no[2],wo=no[5],bo=no[8];return io[0]=oo*yo+ao*ho+so*xo,io[3]=oo*vo+ao*po+so*wo,io[6]=oo*Ao+ao*Mo+so*bo,io[1]=uo*yo+lo*ho+co*xo,io[4]=uo*vo+lo*po+co*wo,io[7]=uo*Ao+lo*Mo+co*bo,io[2]=fo*yo+mo*ho+go*xo,io[5]=fo*vo+mo*po+go*wo,io[8]=fo*Ao+mo*Mo+go*bo,this},multiplyScalar:function(eo){var to=this.elements;return to[0]*=eo,to[3]*=eo,to[6]*=eo,to[1]*=eo,to[4]*=eo,to[7]*=eo,to[2]*=eo,to[5]*=eo,to[8]*=eo,this},determinant:function(){var eo=this.elements,to=eo[0],ro=eo[1],no=eo[2],io=eo[3],oo=eo[4],ao=eo[5],so=eo[6],uo=eo[7],lo=eo[8];return to*oo*lo-to*ao*uo-ro*io*lo+ro*ao*so+no*io*uo-no*oo*so},getInverse:function(eo,to){to!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var ro=eo.elements,no=this.elements,io=ro[0],oo=ro[1],ao=ro[2],so=ro[3],uo=ro[4],lo=ro[5],co=ro[6],fo=ro[7],mo=ro[8],go=mo*uo-lo*fo,yo=lo*co-mo*so,vo=fo*so-uo*co,Ao=io*go+oo*yo+ao*vo;if(Ao===0)return this.set(0,0,0,0,0,0,0,0,0);var ho=1/Ao;return no[0]=go*ho,no[1]=(ao*fo-mo*oo)*ho,no[2]=(lo*oo-ao*uo)*ho,no[3]=yo*ho,no[4]=(mo*io-ao*co)*ho,no[5]=(ao*so-lo*io)*ho,no[6]=vo*ho,no[7]=(oo*co-fo*io)*ho,no[8]=(uo*io-oo*so)*ho,this},transpose:function(){var eo,to=this.elements;return eo=to[1],to[1]=to[3],to[3]=eo,eo=to[2],to[2]=to[6],to[6]=eo,eo=to[5],to[5]=to[7],to[7]=eo,this},getNormalMatrix:function(eo){return this.setFromMatrix4(eo).getInverse(this).transpose()},transposeIntoArray:function(eo){var to=this.elements;return eo[0]=to[0],eo[1]=to[3],eo[2]=to[6],eo[3]=to[1],eo[4]=to[4],eo[5]=to[7],eo[6]=to[2],eo[7]=to[5],eo[8]=to[8],this},setUvTransform:function(eo,to,ro,no,io,oo,ao){var so=Math.cos(io),uo=Math.sin(io);this.set(ro*so,ro*uo,-ro*(so*oo+uo*ao)+oo+eo,-no*uo,no*so,-no*(-uo*oo+so*ao)+ao+to,0,0,1)},scale:function(eo,to){var ro=this.elements;return ro[0]*=eo,ro[3]*=eo,ro[6]*=eo,ro[1]*=to,ro[4]*=to,ro[7]*=to,this},rotate:function(eo){var to=Math.cos(eo),ro=Math.sin(eo),no=this.elements,io=no[0],oo=no[3],ao=no[6],so=no[1],uo=no[4],lo=no[7];return no[0]=to*io+ro*so,no[3]=to*oo+ro*uo,no[6]=to*ao+ro*lo,no[1]=-ro*io+to*so,no[4]=-ro*oo+to*uo,no[7]=-ro*ao+to*lo,this},translate:function(eo,to){var ro=this.elements;return ro[0]+=eo*ro[2],ro[3]+=eo*ro[5],ro[6]+=eo*ro[8],ro[1]+=to*ro[2],ro[4]+=to*ro[5],ro[7]+=to*ro[8],this},equals:function(eo){for(var to=this.elements,ro=eo.elements,no=0;no<9;no++)if(to[no]!==ro[no])return!1;return!0},fromArray:function(eo,to){to===void 0&&(to=0);for(var ro=0;ro<9;ro++)this.elements[ro]=eo[ro+to];return this},toArray:function(eo,to){eo===void 0&&(eo=[]),to===void 0&&(to=0);var ro=this.elements;return eo[to]=ro[0],eo[to+1]=ro[1],eo[to+2]=ro[2],eo[to+3]=ro[3],eo[to+4]=ro[4],eo[to+5]=ro[5],eo[to+6]=ro[6],eo[to+7]=ro[7],eo[to+8]=ro[8],eo}});var _canvas,ImageUtils={getDataURL:function(eo){var to;if(typeof HTMLCanvasElement=="undefined")return eo.src;if(eo instanceof HTMLCanvasElement)to=eo;else{_canvas===void 0&&(_canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_canvas.width=eo.width,_canvas.height=eo.height;var ro=_canvas.getContext("2d");eo instanceof ImageData?ro.putImageData(eo,0,0):ro.drawImage(eo,0,0,eo.width,eo.height),to=_canvas}return to.width>2048||to.height>2048?to.toDataURL("image/jpeg",.6):to.toDataURL("image/png")}},textureId=0;function Texture(eo,to,ro,no,io,oo,ao,so,uo,lo){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.image=eo!==void 0?eo:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=to!==void 0?to:Texture.DEFAULT_MAPPING,this.wrapS=ro!==void 0?ro:ClampToEdgeWrapping,this.wrapT=no!==void 0?no:ClampToEdgeWrapping,this.magFilter=io!==void 0?io:LinearFilter,this.minFilter=oo!==void 0?oo:LinearMipmapLinearFilter,this.anisotropy=uo!==void 0?uo:1,this.format=ao!==void 0?ao:RGBAFormat,this.internalFormat=null,this.type=so!==void 0?so:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=lo!==void 0?lo:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Texture.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.name=eo.name,this.image=eo.image,this.mipmaps=eo.mipmaps.slice(0),this.mapping=eo.mapping,this.wrapS=eo.wrapS,this.wrapT=eo.wrapT,this.magFilter=eo.magFilter,this.minFilter=eo.minFilter,this.anisotropy=eo.anisotropy,this.format=eo.format,this.internalFormat=eo.internalFormat,this.type=eo.type,this.offset.copy(eo.offset),this.repeat.copy(eo.repeat),this.center.copy(eo.center),this.rotation=eo.rotation,this.matrixAutoUpdate=eo.matrixAutoUpdate,this.matrix.copy(eo.matrix),this.generateMipmaps=eo.generateMipmaps,this.premultiplyAlpha=eo.premultiplyAlpha,this.flipY=eo.flipY,this.unpackAlignment=eo.unpackAlignment,this.encoding=eo.encoding,this},toJSON:function(eo){var to=eo===void 0||typeof eo=="string";if(!to&&eo.textures[this.uuid]!==void 0)return eo.textures[this.uuid];var ro={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var no=this.image;if(no.uuid===void 0&&(no.uuid=MathUtils.generateUUID()),!to&&eo.images[no.uuid]===void 0){var io;if(Array.isArray(no)){io=[];for(var oo=0,ao=no.length;oo<ao;oo++)io.push(ImageUtils.getDataURL(no[oo]))}else io=ImageUtils.getDataURL(no);eo.images[no.uuid]={uuid:no.uuid,url:io}}ro.image=no.uuid}return to||(eo.textures[this.uuid]=ro),ro},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(eo){if(this.mapping!==UVMapping)return eo;if(eo.applyMatrix3(this.matrix),eo.x<0||eo.x>1)switch(this.wrapS){case RepeatWrapping:eo.x=eo.x-Math.floor(eo.x);break;case ClampToEdgeWrapping:eo.x=eo.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(eo.x)%2)===1?eo.x=Math.ceil(eo.x)-eo.x:eo.x=eo.x-Math.floor(eo.x);break}if(eo.y<0||eo.y>1)switch(this.wrapT){case RepeatWrapping:eo.y=eo.y-Math.floor(eo.y);break;case ClampToEdgeWrapping:eo.y=eo.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(eo.y)%2)===1?eo.y=Math.ceil(eo.y)-eo.y:eo.y=eo.y-Math.floor(eo.y);break}return this.flipY&&(eo.y=1-eo.y),eo}});Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(eo){eo===!0&&this.version++}});function Vector4(eo,to,ro,no){this.x=eo||0,this.y=to||0,this.z=ro||0,this.w=no!==void 0?no:1}Object.defineProperties(Vector4.prototype,{width:{get:function(){return this.z},set:function(eo){this.z=eo}},height:{get:function(){return this.w},set:function(eo){this.w=eo}}});Object.assign(Vector4.prototype,{isVector4:!0,set:function(eo,to,ro,no){return this.x=eo,this.y=to,this.z=ro,this.w=no,this},setScalar:function(eo){return this.x=eo,this.y=eo,this.z=eo,this.w=eo,this},setX:function(eo){return this.x=eo,this},setY:function(eo){return this.y=eo,this},setZ:function(eo){return this.z=eo,this},setW:function(eo){return this.w=eo,this},setComponent:function(eo,to){switch(eo){case 0:this.x=to;break;case 1:this.y=to;break;case 2:this.z=to;break;case 3:this.w=to;break;default:throw new Error("index is out of range: "+eo)}return this},getComponent:function(eo){switch(eo){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+eo)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(eo){return this.x=eo.x,this.y=eo.y,this.z=eo.z,this.w=eo.w!==void 0?eo.w:1,this},add:function(eo,to){return to!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(eo,to)):(this.x+=eo.x,this.y+=eo.y,this.z+=eo.z,this.w+=eo.w,this)},addScalar:function(eo){return this.x+=eo,this.y+=eo,this.z+=eo,this.w+=eo,this},addVectors:function(eo,to){return this.x=eo.x+to.x,this.y=eo.y+to.y,this.z=eo.z+to.z,this.w=eo.w+to.w,this},addScaledVector:function(eo,to){return this.x+=eo.x*to,this.y+=eo.y*to,this.z+=eo.z*to,this.w+=eo.w*to,this},sub:function(eo,to){return to!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(eo,to)):(this.x-=eo.x,this.y-=eo.y,this.z-=eo.z,this.w-=eo.w,this)},subScalar:function(eo){return this.x-=eo,this.y-=eo,this.z-=eo,this.w-=eo,this},subVectors:function(eo,to){return this.x=eo.x-to.x,this.y=eo.y-to.y,this.z=eo.z-to.z,this.w=eo.w-to.w,this},multiplyScalar:function(eo){return this.x*=eo,this.y*=eo,this.z*=eo,this.w*=eo,this},applyMatrix4:function(eo){var to=this.x,ro=this.y,no=this.z,io=this.w,oo=eo.elements;return this.x=oo[0]*to+oo[4]*ro+oo[8]*no+oo[12]*io,this.y=oo[1]*to+oo[5]*ro+oo[9]*no+oo[13]*io,this.z=oo[2]*to+oo[6]*ro+oo[10]*no+oo[14]*io,this.w=oo[3]*to+oo[7]*ro+oo[11]*no+oo[15]*io,this},divideScalar:function(eo){return this.multiplyScalar(1/eo)},setAxisAngleFromQuaternion:function(eo){this.w=2*Math.acos(eo.w);var to=Math.sqrt(1-eo.w*eo.w);return to<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=eo.x/to,this.y=eo.y/to,this.z=eo.z/to),this},setAxisAngleFromRotationMatrix:function(eo){var to,ro,no,io,oo=.01,ao=.1,so=eo.elements,uo=so[0],lo=so[4],co=so[8],fo=so[1],mo=so[5],go=so[9],yo=so[2],vo=so[6],Ao=so[10];if(Math.abs(lo-fo)<oo&&Math.abs(co-yo)<oo&&Math.abs(go-vo)<oo){if(Math.abs(lo+fo)<ao&&Math.abs(co+yo)<ao&&Math.abs(go+vo)<ao&&Math.abs(uo+mo+Ao-3)<ao)return this.set(1,0,0,0),this;to=Math.PI;var ho=(uo+1)/2,po=(mo+1)/2,Mo=(Ao+1)/2,xo=(lo+fo)/4,wo=(co+yo)/4,bo=(go+vo)/4;return ho>po&&ho>Mo?ho<oo?(ro=0,no=.707106781,io=.707106781):(ro=Math.sqrt(ho),no=xo/ro,io=wo/ro):po>Mo?po<oo?(ro=.707106781,no=0,io=.707106781):(no=Math.sqrt(po),ro=xo/no,io=bo/no):Mo<oo?(ro=.707106781,no=.707106781,io=0):(io=Math.sqrt(Mo),ro=wo/io,no=bo/io),this.set(ro,no,io,to),this}var _o=Math.sqrt((vo-go)*(vo-go)+(co-yo)*(co-yo)+(fo-lo)*(fo-lo));return Math.abs(_o)<.001&&(_o=1),this.x=(vo-go)/_o,this.y=(co-yo)/_o,this.z=(fo-lo)/_o,this.w=Math.acos((uo+mo+Ao-1)/2),this},min:function(eo){return this.x=Math.min(this.x,eo.x),this.y=Math.min(this.y,eo.y),this.z=Math.min(this.z,eo.z),this.w=Math.min(this.w,eo.w),this},max:function(eo){return this.x=Math.max(this.x,eo.x),this.y=Math.max(this.y,eo.y),this.z=Math.max(this.z,eo.z),this.w=Math.max(this.w,eo.w),this},clamp:function(eo,to){return this.x=Math.max(eo.x,Math.min(to.x,this.x)),this.y=Math.max(eo.y,Math.min(to.y,this.y)),this.z=Math.max(eo.z,Math.min(to.z,this.z)),this.w=Math.max(eo.w,Math.min(to.w,this.w)),this},clampScalar:function(eo,to){return this.x=Math.max(eo,Math.min(to,this.x)),this.y=Math.max(eo,Math.min(to,this.y)),this.z=Math.max(eo,Math.min(to,this.z)),this.w=Math.max(eo,Math.min(to,this.w)),this},clampLength:function(eo,to){var ro=this.length();return this.divideScalar(ro||1).multiplyScalar(Math.max(eo,Math.min(to,ro)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(eo){return this.x*eo.x+this.y*eo.y+this.z*eo.z+this.w*eo.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(eo){return this.normalize().multiplyScalar(eo)},lerp:function(eo,to){return this.x+=(eo.x-this.x)*to,this.y+=(eo.y-this.y)*to,this.z+=(eo.z-this.z)*to,this.w+=(eo.w-this.w)*to,this},lerpVectors:function(eo,to,ro){return this.x=eo.x+(to.x-eo.x)*ro,this.y=eo.y+(to.y-eo.y)*ro,this.z=eo.z+(to.z-eo.z)*ro,this.w=eo.w+(to.w-eo.w)*ro,this},equals:function(eo){return eo.x===this.x&&eo.y===this.y&&eo.z===this.z&&eo.w===this.w},fromArray:function(eo,to){return to===void 0&&(to=0),this.x=eo[to],this.y=eo[to+1],this.z=eo[to+2],this.w=eo[to+3],this},toArray:function(eo,to){return eo===void 0&&(eo=[]),to===void 0&&(to=0),eo[to]=this.x,eo[to+1]=this.y,eo[to+2]=this.z,eo[to+3]=this.w,eo},fromBufferAttribute:function(eo,to,ro){return ro!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=eo.getX(to),this.y=eo.getY(to),this.z=eo.getZ(to),this.w=eo.getW(to),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function WebGLRenderTarget(eo,to,ro){this.width=eo,this.height=to,this.scissor=new Vector4(0,0,eo,to),this.scissorTest=!1,this.viewport=new Vector4(0,0,eo,to),ro=ro||{},this.texture=new Texture(void 0,ro.mapping,ro.wrapS,ro.wrapT,ro.magFilter,ro.minFilter,ro.format,ro.type,ro.anisotropy,ro.encoding),this.texture.image={},this.texture.image.width=eo,this.texture.image.height=to,this.texture.generateMipmaps=ro.generateMipmaps!==void 0?ro.generateMipmaps:!1,this.texture.minFilter=ro.minFilter!==void 0?ro.minFilter:LinearFilter,this.depthBuffer=ro.depthBuffer!==void 0?ro.depthBuffer:!0,this.stencilBuffer=ro.stencilBuffer!==void 0?ro.stencilBuffer:!0,this.depthTexture=ro.depthTexture!==void 0?ro.depthTexture:null}WebGLRenderTarget.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:WebGLRenderTarget,isWebGLRenderTarget:!0,setSize:function(eo,to){(this.width!==eo||this.height!==to)&&(this.width=eo,this.height=to,this.texture.image.width=eo,this.texture.image.height=to,this.dispose()),this.viewport.set(0,0,eo,to),this.scissor.set(0,0,eo,to)},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.width=eo.width,this.height=eo.height,this.viewport.copy(eo.viewport),this.texture=eo.texture.clone(),this.depthBuffer=eo.depthBuffer,this.stencilBuffer=eo.stencilBuffer,this.depthTexture=eo.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLMultisampleRenderTarget(eo,to,ro){WebGLRenderTarget.call(this,eo,to,ro),this.samples=4}WebGLMultisampleRenderTarget.prototype=Object.assign(Object.create(WebGLRenderTarget.prototype),{constructor:WebGLMultisampleRenderTarget,isWebGLMultisampleRenderTarget:!0,copy:function(eo){return WebGLRenderTarget.prototype.copy.call(this,eo),this.samples=eo.samples,this}});function Quaternion(eo,to,ro,no){this._x=eo||0,this._y=to||0,this._z=ro||0,this._w=no!==void 0?no:1}Object.assign(Quaternion,{slerp:function(eo,to,ro,no){return ro.copy(eo).slerp(to,no)},slerpFlat:function(eo,to,ro,no,io,oo,ao){var so=ro[no+0],uo=ro[no+1],lo=ro[no+2],co=ro[no+3],fo=io[oo+0],mo=io[oo+1],go=io[oo+2],yo=io[oo+3];if(co!==yo||so!==fo||uo!==mo||lo!==go){var vo=1-ao,Ao=so*fo+uo*mo+lo*go+co*yo,ho=Ao>=0?1:-1,po=1-Ao*Ao;if(po>Number.EPSILON){var Mo=Math.sqrt(po),xo=Math.atan2(Mo,Ao*ho);vo=Math.sin(vo*xo)/Mo,ao=Math.sin(ao*xo)/Mo}var wo=ao*ho;if(so=so*vo+fo*wo,uo=uo*vo+mo*wo,lo=lo*vo+go*wo,co=co*vo+yo*wo,vo===1-ao){var bo=1/Math.sqrt(so*so+uo*uo+lo*lo+co*co);so*=bo,uo*=bo,lo*=bo,co*=bo}}eo[to]=so,eo[to+1]=uo,eo[to+2]=lo,eo[to+3]=co},multiplyQuaternionsFlat:function(eo,to,ro,no,io,oo){var ao=ro[no],so=ro[no+1],uo=ro[no+2],lo=ro[no+3],co=io[oo],fo=io[oo+1],mo=io[oo+2],go=io[oo+3];return eo[to]=ao*go+lo*co+so*mo-uo*fo,eo[to+1]=so*go+lo*fo+uo*co-ao*mo,eo[to+2]=uo*go+lo*mo+ao*fo-so*co,eo[to+3]=lo*go-ao*co-so*fo-uo*mo,eo}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(eo){this._x=eo,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(eo){this._y=eo,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(eo){this._z=eo,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(eo){this._w=eo,this._onChangeCallback()}}});Object.assign(Quaternion.prototype,{isQuaternion:!0,set:function(eo,to,ro,no){return this._x=eo,this._y=to,this._z=ro,this._w=no,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(eo){return this._x=eo.x,this._y=eo.y,this._z=eo.z,this._w=eo.w,this._onChangeCallback(),this},setFromEuler:function(eo,to){if(!(eo&&eo.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var ro=eo._x,no=eo._y,io=eo._z,oo=eo.order,ao=Math.cos,so=Math.sin,uo=ao(ro/2),lo=ao(no/2),co=ao(io/2),fo=so(ro/2),mo=so(no/2),go=so(io/2);switch(oo){case"XYZ":this._x=fo*lo*co+uo*mo*go,this._y=uo*mo*co-fo*lo*go,this._z=uo*lo*go+fo*mo*co,this._w=uo*lo*co-fo*mo*go;break;case"YXZ":this._x=fo*lo*co+uo*mo*go,this._y=uo*mo*co-fo*lo*go,this._z=uo*lo*go-fo*mo*co,this._w=uo*lo*co+fo*mo*go;break;case"ZXY":this._x=fo*lo*co-uo*mo*go,this._y=uo*mo*co+fo*lo*go,this._z=uo*lo*go+fo*mo*co,this._w=uo*lo*co-fo*mo*go;break;case"ZYX":this._x=fo*lo*co-uo*mo*go,this._y=uo*mo*co+fo*lo*go,this._z=uo*lo*go-fo*mo*co,this._w=uo*lo*co+fo*mo*go;break;case"YZX":this._x=fo*lo*co+uo*mo*go,this._y=uo*mo*co+fo*lo*go,this._z=uo*lo*go-fo*mo*co,this._w=uo*lo*co-fo*mo*go;break;case"XZY":this._x=fo*lo*co-uo*mo*go,this._y=uo*mo*co-fo*lo*go,this._z=uo*lo*go+fo*mo*co,this._w=uo*lo*co+fo*mo*go;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+oo)}return to!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(eo,to){var ro=to/2,no=Math.sin(ro);return this._x=eo.x*no,this._y=eo.y*no,this._z=eo.z*no,this._w=Math.cos(ro),this._onChangeCallback(),this},setFromRotationMatrix:function(eo){var to=eo.elements,ro=to[0],no=to[4],io=to[8],oo=to[1],ao=to[5],so=to[9],uo=to[2],lo=to[6],co=to[10],fo=ro+ao+co,mo;return fo>0?(mo=.5/Math.sqrt(fo+1),this._w=.25/mo,this._x=(lo-so)*mo,this._y=(io-uo)*mo,this._z=(oo-no)*mo):ro>ao&&ro>co?(mo=2*Math.sqrt(1+ro-ao-co),this._w=(lo-so)/mo,this._x=.25*mo,this._y=(no+oo)/mo,this._z=(io+uo)/mo):ao>co?(mo=2*Math.sqrt(1+ao-ro-co),this._w=(io-uo)/mo,this._x=(no+oo)/mo,this._y=.25*mo,this._z=(so+lo)/mo):(mo=2*Math.sqrt(1+co-ro-ao),this._w=(oo-no)/mo,this._x=(io+uo)/mo,this._y=(so+lo)/mo,this._z=.25*mo),this._onChangeCallback(),this},setFromUnitVectors:function(eo,to){var ro=1e-6,no=eo.dot(to)+1;return no<ro?(no=0,Math.abs(eo.x)>Math.abs(eo.z)?(this._x=-eo.y,this._y=eo.x,this._z=0,this._w=no):(this._x=0,this._y=-eo.z,this._z=eo.y,this._w=no)):(this._x=eo.y*to.z-eo.z*to.y,this._y=eo.z*to.x-eo.x*to.z,this._z=eo.x*to.y-eo.y*to.x,this._w=no),this.normalize()},angleTo:function(eo){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(eo),-1,1)))},rotateTowards:function(eo,to){var ro=this.angleTo(eo);if(ro===0)return this;var no=Math.min(1,to/ro);return this.slerp(eo,no),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(eo){return this._x*eo._x+this._y*eo._y+this._z*eo._z+this._w*eo._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var eo=this.length();return eo===0?(this._x=0,this._y=0,this._z=0,this._w=1):(eo=1/eo,this._x=this._x*eo,this._y=this._y*eo,this._z=this._z*eo,this._w=this._w*eo),this._onChangeCallback(),this},multiply:function(eo,to){return to!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(eo,to)):this.multiplyQuaternions(this,eo)},premultiply:function(eo){return this.multiplyQuaternions(eo,this)},multiplyQuaternions:function(eo,to){var ro=eo._x,no=eo._y,io=eo._z,oo=eo._w,ao=to._x,so=to._y,uo=to._z,lo=to._w;return this._x=ro*lo+oo*ao+no*uo-io*so,this._y=no*lo+oo*so+io*ao-ro*uo,this._z=io*lo+oo*uo+ro*so-no*ao,this._w=oo*lo-ro*ao-no*so-io*uo,this._onChangeCallback(),this},slerp:function(eo,to){if(to===0)return this;if(to===1)return this.copy(eo);var ro=this._x,no=this._y,io=this._z,oo=this._w,ao=oo*eo._w+ro*eo._x+no*eo._y+io*eo._z;if(ao<0?(this._w=-eo._w,this._x=-eo._x,this._y=-eo._y,this._z=-eo._z,ao=-ao):this.copy(eo),ao>=1)return this._w=oo,this._x=ro,this._y=no,this._z=io,this;var so=1-ao*ao;if(so<=Number.EPSILON){var uo=1-to;return this._w=uo*oo+to*this._w,this._x=uo*ro+to*this._x,this._y=uo*no+to*this._y,this._z=uo*io+to*this._z,this.normalize(),this._onChangeCallback(),this}var lo=Math.sqrt(so),co=Math.atan2(lo,ao),fo=Math.sin((1-to)*co)/lo,mo=Math.sin(to*co)/lo;return this._w=oo*fo+this._w*mo,this._x=ro*fo+this._x*mo,this._y=no*fo+this._y*mo,this._z=io*fo+this._z*mo,this._onChangeCallback(),this},equals:function(eo){return eo._x===this._x&&eo._y===this._y&&eo._z===this._z&&eo._w===this._w},fromArray:function(eo,to){return to===void 0&&(to=0),this._x=eo[to],this._y=eo[to+1],this._z=eo[to+2],this._w=eo[to+3],this._onChangeCallback(),this},toArray:function(eo,to){return eo===void 0&&(eo=[]),to===void 0&&(to=0),eo[to]=this._x,eo[to+1]=this._y,eo[to+2]=this._z,eo[to+3]=this._w,eo},fromBufferAttribute:function(eo,to){return this._x=eo.getX(to),this._y=eo.getY(to),this._z=eo.getZ(to),this._w=eo.getW(to),this},_onChange:function(eo){return this._onChangeCallback=eo,this},_onChangeCallback:function(){}});var _vector=new Vector3,_quaternion=new Quaternion;function Vector3(eo,to,ro){this.x=eo||0,this.y=to||0,this.z=ro||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(eo,to,ro){return this.x=eo,this.y=to,this.z=ro,this},setScalar:function(eo){return this.x=eo,this.y=eo,this.z=eo,this},setX:function(eo){return this.x=eo,this},setY:function(eo){return this.y=eo,this},setZ:function(eo){return this.z=eo,this},setComponent:function(eo,to){switch(eo){case 0:this.x=to;break;case 1:this.y=to;break;case 2:this.z=to;break;default:throw new Error("index is out of range: "+eo)}return this},getComponent:function(eo){switch(eo){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+eo)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(eo){return this.x=eo.x,this.y=eo.y,this.z=eo.z,this},add:function(eo,to){return to!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(eo,to)):(this.x+=eo.x,this.y+=eo.y,this.z+=eo.z,this)},addScalar:function(eo){return this.x+=eo,this.y+=eo,this.z+=eo,this},addVectors:function(eo,to){return this.x=eo.x+to.x,this.y=eo.y+to.y,this.z=eo.z+to.z,this},addScaledVector:function(eo,to){return this.x+=eo.x*to,this.y+=eo.y*to,this.z+=eo.z*to,this},sub:function(eo,to){return to!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(eo,to)):(this.x-=eo.x,this.y-=eo.y,this.z-=eo.z,this)},subScalar:function(eo){return this.x-=eo,this.y-=eo,this.z-=eo,this},subVectors:function(eo,to){return this.x=eo.x-to.x,this.y=eo.y-to.y,this.z=eo.z-to.z,this},multiply:function(eo,to){return to!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(eo,to)):(this.x*=eo.x,this.y*=eo.y,this.z*=eo.z,this)},multiplyScalar:function(eo){return this.x*=eo,this.y*=eo,this.z*=eo,this},multiplyVectors:function(eo,to){return this.x=eo.x*to.x,this.y=eo.y*to.y,this.z=eo.z*to.z,this},applyEuler:function(eo){return eo&&eo.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_quaternion.setFromEuler(eo))},applyAxisAngle:function(eo,to){return this.applyQuaternion(_quaternion.setFromAxisAngle(eo,to))},applyMatrix3:function(eo){var to=this.x,ro=this.y,no=this.z,io=eo.elements;return this.x=io[0]*to+io[3]*ro+io[6]*no,this.y=io[1]*to+io[4]*ro+io[7]*no,this.z=io[2]*to+io[5]*ro+io[8]*no,this},applyNormalMatrix:function(eo){return this.applyMatrix3(eo).normalize()},applyMatrix4:function(eo){var to=this.x,ro=this.y,no=this.z,io=eo.elements,oo=1/(io[3]*to+io[7]*ro+io[11]*no+io[15]);return this.x=(io[0]*to+io[4]*ro+io[8]*no+io[12])*oo,this.y=(io[1]*to+io[5]*ro+io[9]*no+io[13])*oo,this.z=(io[2]*to+io[6]*ro+io[10]*no+io[14])*oo,this},applyQuaternion:function(eo){var to=this.x,ro=this.y,no=this.z,io=eo.x,oo=eo.y,ao=eo.z,so=eo.w,uo=so*to+oo*no-ao*ro,lo=so*ro+ao*to-io*no,co=so*no+io*ro-oo*to,fo=-io*to-oo*ro-ao*no;return this.x=uo*so+fo*-io+lo*-ao-co*-oo,this.y=lo*so+fo*-oo+co*-io-uo*-ao,this.z=co*so+fo*-ao+uo*-oo-lo*-io,this},project:function(eo){return this.applyMatrix4(eo.matrixWorldInverse).applyMatrix4(eo.projectionMatrix)},unproject:function(eo){return this.applyMatrix4(eo.projectionMatrixInverse).applyMatrix4(eo.matrixWorld)},transformDirection:function(eo){var to=this.x,ro=this.y,no=this.z,io=eo.elements;return this.x=io[0]*to+io[4]*ro+io[8]*no,this.y=io[1]*to+io[5]*ro+io[9]*no,this.z=io[2]*to+io[6]*ro+io[10]*no,this.normalize()},divide:function(eo){return this.x/=eo.x,this.y/=eo.y,this.z/=eo.z,this},divideScalar:function(eo){return this.multiplyScalar(1/eo)},min:function(eo){return this.x=Math.min(this.x,eo.x),this.y=Math.min(this.y,eo.y),this.z=Math.min(this.z,eo.z),this},max:function(eo){return this.x=Math.max(this.x,eo.x),this.y=Math.max(this.y,eo.y),this.z=Math.max(this.z,eo.z),this},clamp:function(eo,to){return this.x=Math.max(eo.x,Math.min(to.x,this.x)),this.y=Math.max(eo.y,Math.min(to.y,this.y)),this.z=Math.max(eo.z,Math.min(to.z,this.z)),this},clampScalar:function(eo,to){return this.x=Math.max(eo,Math.min(to,this.x)),this.y=Math.max(eo,Math.min(to,this.y)),this.z=Math.max(eo,Math.min(to,this.z)),this},clampLength:function(eo,to){var ro=this.length();return this.divideScalar(ro||1).multiplyScalar(Math.max(eo,Math.min(to,ro)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(eo){return this.x*eo.x+this.y*eo.y+this.z*eo.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(eo){return this.normalize().multiplyScalar(eo)},lerp:function(eo,to){return this.x+=(eo.x-this.x)*to,this.y+=(eo.y-this.y)*to,this.z+=(eo.z-this.z)*to,this},lerpVectors:function(eo,to,ro){return this.x=eo.x+(to.x-eo.x)*ro,this.y=eo.y+(to.y-eo.y)*ro,this.z=eo.z+(to.z-eo.z)*ro,this},cross:function(eo,to){return to!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(eo,to)):this.crossVectors(this,eo)},crossVectors:function(eo,to){var ro=eo.x,no=eo.y,io=eo.z,oo=to.x,ao=to.y,so=to.z;return this.x=no*so-io*ao,this.y=io*oo-ro*so,this.z=ro*ao-no*oo,this},projectOnVector:function(eo){var to=eo.lengthSq();if(to===0)return this.set(0,0,0);var ro=eo.dot(this)/to;return this.copy(eo).multiplyScalar(ro)},projectOnPlane:function(eo){return _vector.copy(this).projectOnVector(eo),this.sub(_vector)},reflect:function(eo){return this.sub(_vector.copy(eo).multiplyScalar(2*this.dot(eo)))},angleTo:function(eo){var to=Math.sqrt(this.lengthSq()*eo.lengthSq());if(to===0)return Math.PI/2;var ro=this.dot(eo)/to;return Math.acos(MathUtils.clamp(ro,-1,1))},distanceTo:function(eo){return Math.sqrt(this.distanceToSquared(eo))},distanceToSquared:function(eo){var to=this.x-eo.x,ro=this.y-eo.y,no=this.z-eo.z;return to*to+ro*ro+no*no},manhattanDistanceTo:function(eo){return Math.abs(this.x-eo.x)+Math.abs(this.y-eo.y)+Math.abs(this.z-eo.z)},setFromSpherical:function(eo){return this.setFromSphericalCoords(eo.radius,eo.phi,eo.theta)},setFromSphericalCoords:function(eo,to,ro){var no=Math.sin(to)*eo;return this.x=no*Math.sin(ro),this.y=Math.cos(to)*eo,this.z=no*Math.cos(ro),this},setFromCylindrical:function(eo){return this.setFromCylindricalCoords(eo.radius,eo.theta,eo.y)},setFromCylindricalCoords:function(eo,to,ro){return this.x=eo*Math.sin(to),this.y=ro,this.z=eo*Math.cos(to),this},setFromMatrixPosition:function(eo){var to=eo.elements;return this.x=to[12],this.y=to[13],this.z=to[14],this},setFromMatrixScale:function(eo){var to=this.setFromMatrixColumn(eo,0).length(),ro=this.setFromMatrixColumn(eo,1).length(),no=this.setFromMatrixColumn(eo,2).length();return this.x=to,this.y=ro,this.z=no,this},setFromMatrixColumn:function(eo,to){return this.fromArray(eo.elements,to*4)},setFromMatrix3Column:function(eo,to){return this.fromArray(eo.elements,to*3)},equals:function(eo){return eo.x===this.x&&eo.y===this.y&&eo.z===this.z},fromArray:function(eo,to){return to===void 0&&(to=0),this.x=eo[to],this.y=eo[to+1],this.z=eo[to+2],this},toArray:function(eo,to){return eo===void 0&&(eo=[]),to===void 0&&(to=0),eo[to]=this.x,eo[to+1]=this.y,eo[to+2]=this.z,eo},fromBufferAttribute:function(eo,to,ro){return ro!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=eo.getX(to),this.y=eo.getY(to),this.z=eo.getZ(to),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(eo,to,ro,no,io,oo,ao,so,uo,lo,co,fo,mo,go,yo,vo){var Ao=this.elements;return Ao[0]=eo,Ao[4]=to,Ao[8]=ro,Ao[12]=no,Ao[1]=io,Ao[5]=oo,Ao[9]=ao,Ao[13]=so,Ao[2]=uo,Ao[6]=lo,Ao[10]=co,Ao[14]=fo,Ao[3]=mo,Ao[7]=go,Ao[11]=yo,Ao[15]=vo,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(eo){var to=this.elements,ro=eo.elements;return to[0]=ro[0],to[1]=ro[1],to[2]=ro[2],to[3]=ro[3],to[4]=ro[4],to[5]=ro[5],to[6]=ro[6],to[7]=ro[7],to[8]=ro[8],to[9]=ro[9],to[10]=ro[10],to[11]=ro[11],to[12]=ro[12],to[13]=ro[13],to[14]=ro[14],to[15]=ro[15],this},copyPosition:function(eo){var to=this.elements,ro=eo.elements;return to[12]=ro[12],to[13]=ro[13],to[14]=ro[14],this},extractBasis:function(eo,to,ro){return eo.setFromMatrixColumn(this,0),to.setFromMatrixColumn(this,1),ro.setFromMatrixColumn(this,2),this},makeBasis:function(eo,to,ro){return this.set(eo.x,to.x,ro.x,0,eo.y,to.y,ro.y,0,eo.z,to.z,ro.z,0,0,0,0,1),this},extractRotation:function(eo){var to=this.elements,ro=eo.elements,no=1/_v1.setFromMatrixColumn(eo,0).length(),io=1/_v1.setFromMatrixColumn(eo,1).length(),oo=1/_v1.setFromMatrixColumn(eo,2).length();return to[0]=ro[0]*no,to[1]=ro[1]*no,to[2]=ro[2]*no,to[3]=0,to[4]=ro[4]*io,to[5]=ro[5]*io,to[6]=ro[6]*io,to[7]=0,to[8]=ro[8]*oo,to[9]=ro[9]*oo,to[10]=ro[10]*oo,to[11]=0,to[12]=0,to[13]=0,to[14]=0,to[15]=1,this},makeRotationFromEuler:function(eo){eo&&eo.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var to=this.elements,ro=eo.x,no=eo.y,io=eo.z,oo=Math.cos(ro),ao=Math.sin(ro),so=Math.cos(no),uo=Math.sin(no),lo=Math.cos(io),co=Math.sin(io);if(eo.order==="XYZ"){var fo=oo*lo,mo=oo*co,go=ao*lo,yo=ao*co;to[0]=so*lo,to[4]=-so*co,to[8]=uo,to[1]=mo+go*uo,to[5]=fo-yo*uo,to[9]=-ao*so,to[2]=yo-fo*uo,to[6]=go+mo*uo,to[10]=oo*so}else if(eo.order==="YXZ"){var vo=so*lo,Ao=so*co,ho=uo*lo,po=uo*co;to[0]=vo+po*ao,to[4]=ho*ao-Ao,to[8]=oo*uo,to[1]=oo*co,to[5]=oo*lo,to[9]=-ao,to[2]=Ao*ao-ho,to[6]=po+vo*ao,to[10]=oo*so}else if(eo.order==="ZXY"){var vo=so*lo,Ao=so*co,ho=uo*lo,po=uo*co;to[0]=vo-po*ao,to[4]=-oo*co,to[8]=ho+Ao*ao,to[1]=Ao+ho*ao,to[5]=oo*lo,to[9]=po-vo*ao,to[2]=-oo*uo,to[6]=ao,to[10]=oo*so}else if(eo.order==="ZYX"){var fo=oo*lo,mo=oo*co,go=ao*lo,yo=ao*co;to[0]=so*lo,to[4]=go*uo-mo,to[8]=fo*uo+yo,to[1]=so*co,to[5]=yo*uo+fo,to[9]=mo*uo-go,to[2]=-uo,to[6]=ao*so,to[10]=oo*so}else if(eo.order==="YZX"){var Mo=oo*so,xo=oo*uo,wo=ao*so,bo=ao*uo;to[0]=so*lo,to[4]=bo-Mo*co,to[8]=wo*co+xo,to[1]=co,to[5]=oo*lo,to[9]=-ao*lo,to[2]=-uo*lo,to[6]=xo*co+wo,to[10]=Mo-bo*co}else if(eo.order==="XZY"){var Mo=oo*so,xo=oo*uo,wo=ao*so,bo=ao*uo;to[0]=so*lo,to[4]=-co,to[8]=uo*lo,to[1]=Mo*co+bo,to[5]=oo*lo,to[9]=xo*co-wo,to[2]=wo*co-xo,to[6]=ao*lo,to[10]=bo*co+Mo}return to[3]=0,to[7]=0,to[11]=0,to[12]=0,to[13]=0,to[14]=0,to[15]=1,this},makeRotationFromQuaternion:function(eo){return this.compose(_zero,eo,_one)},lookAt:function(eo,to,ro){var no=this.elements;return _z.subVectors(eo,to),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(ro,_z),_x.lengthSq()===0&&(Math.abs(ro.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(ro,_z)),_x.normalize(),_y.crossVectors(_z,_x),no[0]=_x.x,no[4]=_y.x,no[8]=_z.x,no[1]=_x.y,no[5]=_y.y,no[9]=_z.y,no[2]=_x.z,no[6]=_y.z,no[10]=_z.z,this},multiply:function(eo,to){return to!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(eo,to)):this.multiplyMatrices(this,eo)},premultiply:function(eo){return this.multiplyMatrices(eo,this)},multiplyMatrices:function(eo,to){var ro=eo.elements,no=to.elements,io=this.elements,oo=ro[0],ao=ro[4],so=ro[8],uo=ro[12],lo=ro[1],co=ro[5],fo=ro[9],mo=ro[13],go=ro[2],yo=ro[6],vo=ro[10],Ao=ro[14],ho=ro[3],po=ro[7],Mo=ro[11],xo=ro[15],wo=no[0],bo=no[4],_o=no[8],To=no[12],No=no[1],Po=no[5],Co=no[9],Do=no[13],zo=no[2],Ro=no[6],Lo=no[10],$o=no[14],jo=no[3],Wo=no[7],Ko=no[11],Jo=no[15];return io[0]=oo*wo+ao*No+so*zo+uo*jo,io[4]=oo*bo+ao*Po+so*Ro+uo*Wo,io[8]=oo*_o+ao*Co+so*Lo+uo*Ko,io[12]=oo*To+ao*Do+so*$o+uo*Jo,io[1]=lo*wo+co*No+fo*zo+mo*jo,io[5]=lo*bo+co*Po+fo*Ro+mo*Wo,io[9]=lo*_o+co*Co+fo*Lo+mo*Ko,io[13]=lo*To+co*Do+fo*$o+mo*Jo,io[2]=go*wo+yo*No+vo*zo+Ao*jo,io[6]=go*bo+yo*Po+vo*Ro+Ao*Wo,io[10]=go*_o+yo*Co+vo*Lo+Ao*Ko,io[14]=go*To+yo*Do+vo*$o+Ao*Jo,io[3]=ho*wo+po*No+Mo*zo+xo*jo,io[7]=ho*bo+po*Po+Mo*Ro+xo*Wo,io[11]=ho*_o+po*Co+Mo*Lo+xo*Ko,io[15]=ho*To+po*Do+Mo*$o+xo*Jo,this},multiplyScalar:function(eo){var to=this.elements;return to[0]*=eo,to[4]*=eo,to[8]*=eo,to[12]*=eo,to[1]*=eo,to[5]*=eo,to[9]*=eo,to[13]*=eo,to[2]*=eo,to[6]*=eo,to[10]*=eo,to[14]*=eo,to[3]*=eo,to[7]*=eo,to[11]*=eo,to[15]*=eo,this},determinant:function(){var eo=this.elements,to=eo[0],ro=eo[4],no=eo[8],io=eo[12],oo=eo[1],ao=eo[5],so=eo[9],uo=eo[13],lo=eo[2],co=eo[6],fo=eo[10],mo=eo[14],go=eo[3],yo=eo[7],vo=eo[11],Ao=eo[15];return go*(+io*so*co-no*uo*co-io*ao*fo+ro*uo*fo+no*ao*mo-ro*so*mo)+yo*(+to*so*mo-to*uo*fo+io*oo*fo-no*oo*mo+no*uo*lo-io*so*lo)+vo*(+to*uo*co-to*ao*mo-io*oo*co+ro*oo*mo+io*ao*lo-ro*uo*lo)+Ao*(-no*ao*lo-to*so*co+to*ao*fo+no*oo*co-ro*oo*fo+ro*so*lo)},transpose:function(){var eo=this.elements,to;return to=eo[1],eo[1]=eo[4],eo[4]=to,to=eo[2],eo[2]=eo[8],eo[8]=to,to=eo[6],eo[6]=eo[9],eo[9]=to,to=eo[3],eo[3]=eo[12],eo[12]=to,to=eo[7],eo[7]=eo[13],eo[13]=to,to=eo[11],eo[11]=eo[14],eo[14]=to,this},setPosition:function(eo,to,ro){var no=this.elements;return eo.isVector3?(no[12]=eo.x,no[13]=eo.y,no[14]=eo.z):(no[12]=eo,no[13]=to,no[14]=ro),this},getInverse:function(eo,to){to!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var ro=this.elements,no=eo.elements,io=no[0],oo=no[1],ao=no[2],so=no[3],uo=no[4],lo=no[5],co=no[6],fo=no[7],mo=no[8],go=no[9],yo=no[10],vo=no[11],Ao=no[12],ho=no[13],po=no[14],Mo=no[15],xo=go*po*fo-ho*yo*fo+ho*co*vo-lo*po*vo-go*co*Mo+lo*yo*Mo,wo=Ao*yo*fo-mo*po*fo-Ao*co*vo+uo*po*vo+mo*co*Mo-uo*yo*Mo,bo=mo*ho*fo-Ao*go*fo+Ao*lo*vo-uo*ho*vo-mo*lo*Mo+uo*go*Mo,_o=Ao*go*co-mo*ho*co-Ao*lo*yo+uo*ho*yo+mo*lo*po-uo*go*po,To=io*xo+oo*wo+ao*bo+so*_o;if(To===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var No=1/To;return ro[0]=xo*No,ro[1]=(ho*yo*so-go*po*so-ho*ao*vo+oo*po*vo+go*ao*Mo-oo*yo*Mo)*No,ro[2]=(lo*po*so-ho*co*so+ho*ao*fo-oo*po*fo-lo*ao*Mo+oo*co*Mo)*No,ro[3]=(go*co*so-lo*yo*so-go*ao*fo+oo*yo*fo+lo*ao*vo-oo*co*vo)*No,ro[4]=wo*No,ro[5]=(mo*po*so-Ao*yo*so+Ao*ao*vo-io*po*vo-mo*ao*Mo+io*yo*Mo)*No,ro[6]=(Ao*co*so-uo*po*so-Ao*ao*fo+io*po*fo+uo*ao*Mo-io*co*Mo)*No,ro[7]=(uo*yo*so-mo*co*so+mo*ao*fo-io*yo*fo-uo*ao*vo+io*co*vo)*No,ro[8]=bo*No,ro[9]=(Ao*go*so-mo*ho*so-Ao*oo*vo+io*ho*vo+mo*oo*Mo-io*go*Mo)*No,ro[10]=(uo*ho*so-Ao*lo*so+Ao*oo*fo-io*ho*fo-uo*oo*Mo+io*lo*Mo)*No,ro[11]=(mo*lo*so-uo*go*so-mo*oo*fo+io*go*fo+uo*oo*vo-io*lo*vo)*No,ro[12]=_o*No,ro[13]=(mo*ho*ao-Ao*go*ao+Ao*oo*yo-io*ho*yo-mo*oo*po+io*go*po)*No,ro[14]=(Ao*lo*ao-uo*ho*ao-Ao*oo*co+io*ho*co+uo*oo*po-io*lo*po)*No,ro[15]=(uo*go*ao-mo*lo*ao+mo*oo*co-io*go*co-uo*oo*yo+io*lo*yo)*No,this},scale:function(eo){var to=this.elements,ro=eo.x,no=eo.y,io=eo.z;return to[0]*=ro,to[4]*=no,to[8]*=io,to[1]*=ro,to[5]*=no,to[9]*=io,to[2]*=ro,to[6]*=no,to[10]*=io,to[3]*=ro,to[7]*=no,to[11]*=io,this},getMaxScaleOnAxis:function(){var eo=this.elements,to=eo[0]*eo[0]+eo[1]*eo[1]+eo[2]*eo[2],ro=eo[4]*eo[4]+eo[5]*eo[5]+eo[6]*eo[6],no=eo[8]*eo[8]+eo[9]*eo[9]+eo[10]*eo[10];return Math.sqrt(Math.max(to,ro,no))},makeTranslation:function(eo,to,ro){return this.set(1,0,0,eo,0,1,0,to,0,0,1,ro,0,0,0,1),this},makeRotationX:function(eo){var to=Math.cos(eo),ro=Math.sin(eo);return this.set(1,0,0,0,0,to,-ro,0,0,ro,to,0,0,0,0,1),this},makeRotationY:function(eo){var to=Math.cos(eo),ro=Math.sin(eo);return this.set(to,0,ro,0,0,1,0,0,-ro,0,to,0,0,0,0,1),this},makeRotationZ:function(eo){var to=Math.cos(eo),ro=Math.sin(eo);return this.set(to,-ro,0,0,ro,to,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(eo,to){var ro=Math.cos(to),no=Math.sin(to),io=1-ro,oo=eo.x,ao=eo.y,so=eo.z,uo=io*oo,lo=io*ao;return this.set(uo*oo+ro,uo*ao-no*so,uo*so+no*ao,0,uo*ao+no*so,lo*ao+ro,lo*so-no*oo,0,uo*so-no*ao,lo*so+no*oo,io*so*so+ro,0,0,0,0,1),this},makeScale:function(eo,to,ro){return this.set(eo,0,0,0,0,to,0,0,0,0,ro,0,0,0,0,1),this},makeShear:function(eo,to,ro){return this.set(1,to,ro,0,eo,1,ro,0,eo,to,1,0,0,0,0,1),this},compose:function(eo,to,ro){var no=this.elements,io=to._x,oo=to._y,ao=to._z,so=to._w,uo=io+io,lo=oo+oo,co=ao+ao,fo=io*uo,mo=io*lo,go=io*co,yo=oo*lo,vo=oo*co,Ao=ao*co,ho=so*uo,po=so*lo,Mo=so*co,xo=ro.x,wo=ro.y,bo=ro.z;return no[0]=(1-(yo+Ao))*xo,no[1]=(mo+Mo)*xo,no[2]=(go-po)*xo,no[3]=0,no[4]=(mo-Mo)*wo,no[5]=(1-(fo+Ao))*wo,no[6]=(vo+ho)*wo,no[7]=0,no[8]=(go+po)*bo,no[9]=(vo-ho)*bo,no[10]=(1-(fo+yo))*bo,no[11]=0,no[12]=eo.x,no[13]=eo.y,no[14]=eo.z,no[15]=1,this},decompose:function(eo,to,ro){var no=this.elements,io=_v1.set(no[0],no[1],no[2]).length(),oo=_v1.set(no[4],no[5],no[6]).length(),ao=_v1.set(no[8],no[9],no[10]).length(),so=this.determinant();so<0&&(io=-io),eo.x=no[12],eo.y=no[13],eo.z=no[14],_m1.copy(this);var uo=1/io,lo=1/oo,co=1/ao;return _m1.elements[0]*=uo,_m1.elements[1]*=uo,_m1.elements[2]*=uo,_m1.elements[4]*=lo,_m1.elements[5]*=lo,_m1.elements[6]*=lo,_m1.elements[8]*=co,_m1.elements[9]*=co,_m1.elements[10]*=co,to.setFromRotationMatrix(_m1),ro.x=io,ro.y=oo,ro.z=ao,this},makePerspective:function(eo,to,ro,no,io,oo){oo===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var ao=this.elements,so=2*io/(to-eo),uo=2*io/(ro-no),lo=(to+eo)/(to-eo),co=(ro+no)/(ro-no),fo=-(oo+io)/(oo-io),mo=-2*oo*io/(oo-io);return ao[0]=so,ao[4]=0,ao[8]=lo,ao[12]=0,ao[1]=0,ao[5]=uo,ao[9]=co,ao[13]=0,ao[2]=0,ao[6]=0,ao[10]=fo,ao[14]=mo,ao[3]=0,ao[7]=0,ao[11]=-1,ao[15]=0,this},makeOrthographic:function(eo,to,ro,no,io,oo){var ao=this.elements,so=1/(to-eo),uo=1/(ro-no),lo=1/(oo-io),co=(to+eo)*so,fo=(ro+no)*uo,mo=(oo+io)*lo;return ao[0]=2*so,ao[4]=0,ao[8]=0,ao[12]=-co,ao[1]=0,ao[5]=2*uo,ao[9]=0,ao[13]=-fo,ao[2]=0,ao[6]=0,ao[10]=-2*lo,ao[14]=-mo,ao[3]=0,ao[7]=0,ao[11]=0,ao[15]=1,this},equals:function(eo){for(var to=this.elements,ro=eo.elements,no=0;no<16;no++)if(to[no]!==ro[no])return!1;return!0},fromArray:function(eo,to){to===void 0&&(to=0);for(var ro=0;ro<16;ro++)this.elements[ro]=eo[ro+to];return this},toArray:function(eo,to){eo===void 0&&(eo=[]),to===void 0&&(to=0);var ro=this.elements;return eo[to]=ro[0],eo[to+1]=ro[1],eo[to+2]=ro[2],eo[to+3]=ro[3],eo[to+4]=ro[4],eo[to+5]=ro[5],eo[to+6]=ro[6],eo[to+7]=ro[7],eo[to+8]=ro[8],eo[to+9]=ro[9],eo[to+10]=ro[10],eo[to+11]=ro[11],eo[to+12]=ro[12],eo[to+13]=ro[13],eo[to+14]=ro[14],eo[to+15]=ro[15],eo}});var _matrix=new Matrix4,_quaternion$1=new Quaternion;function Euler(eo,to,ro,no){this._x=eo||0,this._y=to||0,this._z=ro||0,this._order=no||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(eo){this._x=eo,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(eo){this._y=eo,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(eo){this._z=eo,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(eo){this._order=eo,this._onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(eo,to,ro,no){return this._x=eo,this._y=to,this._z=ro,this._order=no||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(eo){return this._x=eo._x,this._y=eo._y,this._z=eo._z,this._order=eo._order,this._onChangeCallback(),this},setFromRotationMatrix:function(eo,to,ro){var no=MathUtils.clamp,io=eo.elements,oo=io[0],ao=io[4],so=io[8],uo=io[1],lo=io[5],co=io[9],fo=io[2],mo=io[6],go=io[10];switch(to=to||this._order,to){case"XYZ":this._y=Math.asin(no(so,-1,1)),Math.abs(so)<.9999999?(this._x=Math.atan2(-co,go),this._z=Math.atan2(-ao,oo)):(this._x=Math.atan2(mo,lo),this._z=0);break;case"YXZ":this._x=Math.asin(-no(co,-1,1)),Math.abs(co)<.9999999?(this._y=Math.atan2(so,go),this._z=Math.atan2(uo,lo)):(this._y=Math.atan2(-fo,oo),this._z=0);break;case"ZXY":this._x=Math.asin(no(mo,-1,1)),Math.abs(mo)<.9999999?(this._y=Math.atan2(-fo,go),this._z=Math.atan2(-ao,lo)):(this._y=0,this._z=Math.atan2(uo,oo));break;case"ZYX":this._y=Math.asin(-no(fo,-1,1)),Math.abs(fo)<.9999999?(this._x=Math.atan2(mo,go),this._z=Math.atan2(uo,oo)):(this._x=0,this._z=Math.atan2(-ao,lo));break;case"YZX":this._z=Math.asin(no(uo,-1,1)),Math.abs(uo)<.9999999?(this._x=Math.atan2(-co,lo),this._y=Math.atan2(-fo,oo)):(this._x=0,this._y=Math.atan2(so,go));break;case"XZY":this._z=Math.asin(-no(ao,-1,1)),Math.abs(ao)<.9999999?(this._x=Math.atan2(mo,lo),this._y=Math.atan2(so,oo)):(this._x=Math.atan2(-co,go),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+to)}return this._order=to,ro!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(eo,to,ro){return _matrix.makeRotationFromQuaternion(eo),this.setFromRotationMatrix(_matrix,to,ro)},setFromVector3:function(eo,to){return this.set(eo.x,eo.y,eo.z,to||this._order)},reorder:function(eo){return _quaternion$1.setFromEuler(this),this.setFromQuaternion(_quaternion$1,eo)},equals:function(eo){return eo._x===this._x&&eo._y===this._y&&eo._z===this._z&&eo._order===this._order},fromArray:function(eo){return this._x=eo[0],this._y=eo[1],this._z=eo[2],eo[3]!==void 0&&(this._order=eo[3]),this._onChangeCallback(),this},toArray:function(eo,to){return eo===void 0&&(eo=[]),to===void 0&&(to=0),eo[to]=this._x,eo[to+1]=this._y,eo[to+2]=this._z,eo[to+3]=this._order,eo},toVector3:function(eo){return eo?eo.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},_onChange:function(eo){return this._onChangeCallback=eo,this},_onChangeCallback:function(){}});function Layers(){this.mask=1}Object.assign(Layers.prototype,{set:function(eo){this.mask=1<<eo|0},enable:function(eo){this.mask|=1<<eo|0},enableAll:function(){this.mask=-1},toggle:function(eo){this.mask^=1<<eo|0},disable:function(eo){this.mask&=~(1<<eo|0)},disableAll:function(){this.mask=0},test:function(eo){return(this.mask&eo.mask)!==0}});let _object3DId=0;const _v1$1=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var eo=new Vector3,to=new Euler,ro=new Quaternion,no=new Vector3(1,1,1);function io(){ro.setFromEuler(to,!1)}function oo(){to.setFromQuaternion(ro,void 0,!1)}to._onChange(io),ro._onChange(oo),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:eo},rotation:{configurable:!0,enumerable:!0,value:to},quaternion:{configurable:!0,enumerable:!0,value:ro},scale:{configurable:!0,enumerable:!0,value:no},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(eo){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(eo),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(eo){return this.quaternion.premultiply(eo),this},setRotationFromAxisAngle:function(eo,to){this.quaternion.setFromAxisAngle(eo,to)},setRotationFromEuler:function(eo){this.quaternion.setFromEuler(eo,!0)},setRotationFromMatrix:function(eo){this.quaternion.setFromRotationMatrix(eo)},setRotationFromQuaternion:function(eo){this.quaternion.copy(eo)},rotateOnAxis:function(eo,to){return _q1.setFromAxisAngle(eo,to),this.quaternion.multiply(_q1),this},rotateOnWorldAxis:function(eo,to){return _q1.setFromAxisAngle(eo,to),this.quaternion.premultiply(_q1),this},rotateX:function(eo){return this.rotateOnAxis(_xAxis,eo)},rotateY:function(eo){return this.rotateOnAxis(_yAxis,eo)},rotateZ:function(eo){return this.rotateOnAxis(_zAxis,eo)},translateOnAxis:function(eo,to){return _v1$1.copy(eo).applyQuaternion(this.quaternion),this.position.add(_v1$1.multiplyScalar(to)),this},translateX:function(eo){return this.translateOnAxis(_xAxis,eo)},translateY:function(eo){return this.translateOnAxis(_yAxis,eo)},translateZ:function(eo){return this.translateOnAxis(_zAxis,eo)},localToWorld:function(eo){return eo.applyMatrix4(this.matrixWorld)},worldToLocal:function(eo){return eo.applyMatrix4(_m1$1.getInverse(this.matrixWorld))},lookAt:function(eo,to,ro){eo.isVector3?_target.copy(eo):_target.set(eo,to,ro);var no=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position,_target,this.up):_m1$1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1$1),no&&(_m1$1.extractRotation(no.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.inverse()))},add:function(eo){if(arguments.length>1){for(var to=0;to<arguments.length;to++)this.add(arguments[to]);return this}return eo===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",eo),this):(eo&&eo.isObject3D?(eo.parent!==null&&eo.parent.remove(eo),eo.parent=this,this.children.push(eo),eo.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",eo),this)},remove:function(eo){if(arguments.length>1){for(var to=0;to<arguments.length;to++)this.remove(arguments[to]);return this}var ro=this.children.indexOf(eo);return ro!==-1&&(eo.parent=null,this.children.splice(ro,1),eo.dispatchEvent(_removedEvent)),this},attach:function(eo){return this.updateWorldMatrix(!0,!1),_m1$1.getInverse(this.matrixWorld),eo.parent!==null&&(eo.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(eo.parent.matrixWorld)),eo.applyMatrix4(_m1$1),eo.updateWorldMatrix(!1,!1),this.add(eo),this},getObjectById:function(eo){return this.getObjectByProperty("id",eo)},getObjectByName:function(eo){return this.getObjectByProperty("name",eo)},getObjectByProperty:function(eo,to){if(this[eo]===to)return this;for(var ro=0,no=this.children.length;ro<no;ro++){var io=this.children[ro],oo=io.getObjectByProperty(eo,to);if(oo!==void 0)return oo}},getWorldPosition:function(eo){return eo===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),eo=new Vector3),this.updateMatrixWorld(!0),eo.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(eo){return eo===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),eo=new Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,eo,_scale),eo},getWorldScale:function(eo){return eo===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),eo=new Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(_position,_quaternion$2,eo),eo},getWorldDirection:function(eo){eo===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),eo=new Vector3),this.updateMatrixWorld(!0);var to=this.matrixWorld.elements;return eo.set(to[8],to[9],to[10]).normalize()},raycast:function(){},traverse:function(eo){eo(this);for(var to=this.children,ro=0,no=to.length;ro<no;ro++)to[ro].traverse(eo)},traverseVisible:function(eo){if(this.visible!==!1){eo(this);for(var to=this.children,ro=0,no=to.length;ro<no;ro++)to[ro].traverseVisible(eo)}},traverseAncestors:function(eo){var to=this.parent;to!==null&&(eo(to),to.traverseAncestors(eo))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(eo){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||eo)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,eo=!0);for(var to=this.children,ro=0,no=to.length;ro<no;ro++)to[ro].updateMatrixWorld(eo)},updateWorldMatrix:function(eo,to){var ro=this.parent;if(eo===!0&&ro!==null&&ro.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),to===!0)for(var no=this.children,io=0,oo=no.length;io<oo;io++)no[io].updateWorldMatrix(!1,!0)},toJSON:function(eo){var to=eo===void 0||typeof eo=="string",ro={};to&&(eo={geometries:{},materials:{},textures:{},images:{},shapes:{}},ro.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var no={};no.uuid=this.uuid,no.type=this.type,this.name!==""&&(no.name=this.name),this.castShadow===!0&&(no.castShadow=!0),this.receiveShadow===!0&&(no.receiveShadow=!0),this.visible===!1&&(no.visible=!1),this.frustumCulled===!1&&(no.frustumCulled=!1),this.renderOrder!==0&&(no.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(no.userData=this.userData),no.layers=this.layers.mask,no.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(no.matrixAutoUpdate=!1),this.isInstancedMesh&&(no.type="InstancedMesh",no.count=this.count,no.instanceMatrix=this.instanceMatrix.toJSON());function io(Ao,ho){return Ao[ho.uuid]===void 0&&(Ao[ho.uuid]=ho.toJSON(eo)),ho.uuid}if(this.isMesh||this.isLine||this.isPoints){no.geometry=io(eo.geometries,this.geometry);var oo=this.geometry.parameters;if(oo!==void 0&&oo.shapes!==void 0){var ao=oo.shapes;if(Array.isArray(ao))for(var so=0,uo=ao.length;so<uo;so++){var lo=ao[so];io(eo.shapes,lo)}else io(eo.shapes,ao)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var co=[],so=0,uo=this.material.length;so<uo;so++)co.push(io(eo.materials,this.material[so]));no.material=co}else no.material=io(eo.materials,this.material);if(this.children.length>0){no.children=[];for(var so=0;so<this.children.length;so++)no.children.push(this.children[so].toJSON(eo).object)}if(to){var fo=vo(eo.geometries),mo=vo(eo.materials),go=vo(eo.textures),yo=vo(eo.images),ao=vo(eo.shapes);fo.length>0&&(ro.geometries=fo),mo.length>0&&(ro.materials=mo),go.length>0&&(ro.textures=go),yo.length>0&&(ro.images=yo),ao.length>0&&(ro.shapes=ao)}return ro.object=no,ro;function vo(Ao){var ho=[];for(var po in Ao){var Mo=Ao[po];delete Mo.metadata,ho.push(Mo)}return ho}},clone:function(eo){return new this.constructor().copy(this,eo)},copy:function(eo,to){if(to===void 0&&(to=!0),this.name=eo.name,this.up.copy(eo.up),this.position.copy(eo.position),this.quaternion.copy(eo.quaternion),this.scale.copy(eo.scale),this.matrix.copy(eo.matrix),this.matrixWorld.copy(eo.matrixWorld),this.matrixAutoUpdate=eo.matrixAutoUpdate,this.matrixWorldNeedsUpdate=eo.matrixWorldNeedsUpdate,this.layers.mask=eo.layers.mask,this.visible=eo.visible,this.castShadow=eo.castShadow,this.receiveShadow=eo.receiveShadow,this.frustumCulled=eo.frustumCulled,this.renderOrder=eo.renderOrder,this.userData=JSON.parse(JSON.stringify(eo.userData)),to===!0)for(var ro=0;ro<eo.children.length;ro++){var no=eo.children[ro];this.add(no.clone())}return this}});function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,isScene:!0,copy:function(eo,to){return Object3D.prototype.copy.call(this,eo,to),eo.background!==null&&(this.background=eo.background.clone()),eo.environment!==null&&(this.environment=eo.environment.clone()),eo.fog!==null&&(this.fog=eo.fog.clone()),eo.overrideMaterial!==null&&(this.overrideMaterial=eo.overrideMaterial.clone()),this.autoUpdate=eo.autoUpdate,this.matrixAutoUpdate=eo.matrixAutoUpdate,this},toJSON:function(eo){var to=Object3D.prototype.toJSON.call(this,eo);return this.background!==null&&(to.object.background=this.background.toJSON(eo)),this.environment!==null&&(to.object.environment=this.environment.toJSON(eo)),this.fog!==null&&(to.object.fog=this.fog.toJSON()),to},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$1=new Vector3,_box=new Box3,_v0=new Vector3,_v1$2=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function Box3(eo,to){this.min=eo!==void 0?eo:new Vector3(1/0,1/0,1/0),this.max=to!==void 0?to:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(eo,to){return this.min.copy(eo),this.max.copy(to),this},setFromArray:function(eo){for(var to=1/0,ro=1/0,no=1/0,io=-1/0,oo=-1/0,ao=-1/0,so=0,uo=eo.length;so<uo;so+=3){var lo=eo[so],co=eo[so+1],fo=eo[so+2];lo<to&&(to=lo),co<ro&&(ro=co),fo<no&&(no=fo),lo>io&&(io=lo),co>oo&&(oo=co),fo>ao&&(ao=fo)}return this.min.set(to,ro,no),this.max.set(io,oo,ao),this},setFromBufferAttribute:function(eo){for(var to=1/0,ro=1/0,no=1/0,io=-1/0,oo=-1/0,ao=-1/0,so=0,uo=eo.count;so<uo;so++){var lo=eo.getX(so),co=eo.getY(so),fo=eo.getZ(so);lo<to&&(to=lo),co<ro&&(ro=co),fo<no&&(no=fo),lo>io&&(io=lo),co>oo&&(oo=co),fo>ao&&(ao=fo)}return this.min.set(to,ro,no),this.max.set(io,oo,ao),this},setFromPoints:function(eo){this.makeEmpty();for(var to=0,ro=eo.length;to<ro;to++)this.expandByPoint(eo[to]);return this},setFromCenterAndSize:function(eo,to){var ro=_vector$1.copy(to).multiplyScalar(.5);return this.min.copy(eo).sub(ro),this.max.copy(eo).add(ro),this},setFromObject:function(eo){return this.makeEmpty(),this.expandByObject(eo)},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.min.copy(eo.min),this.max.copy(eo.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(eo){return eo===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),eo=new Vector3),this.isEmpty()?eo.set(0,0,0):eo.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(eo){return eo===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),eo=new Vector3),this.isEmpty()?eo.set(0,0,0):eo.subVectors(this.max,this.min)},expandByPoint:function(eo){return this.min.min(eo),this.max.max(eo),this},expandByVector:function(eo){return this.min.sub(eo),this.max.add(eo),this},expandByScalar:function(eo){return this.min.addScalar(-eo),this.max.addScalar(eo),this},expandByObject:function(eo){eo.updateWorldMatrix(!1,!1);var to=eo.geometry;to!==void 0&&(to.boundingBox===null&&to.computeBoundingBox(),_box.copy(to.boundingBox),_box.applyMatrix4(eo.matrixWorld),this.union(_box));for(var ro=eo.children,no=0,io=ro.length;no<io;no++)this.expandByObject(ro[no]);return this},containsPoint:function(eo){return!(eo.x<this.min.x||eo.x>this.max.x||eo.y<this.min.y||eo.y>this.max.y||eo.z<this.min.z||eo.z>this.max.z)},containsBox:function(eo){return this.min.x<=eo.min.x&&eo.max.x<=this.max.x&&this.min.y<=eo.min.y&&eo.max.y<=this.max.y&&this.min.z<=eo.min.z&&eo.max.z<=this.max.z},getParameter:function(eo,to){return to===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),to=new Vector3),to.set((eo.x-this.min.x)/(this.max.x-this.min.x),(eo.y-this.min.y)/(this.max.y-this.min.y),(eo.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(eo){return!(eo.max.x<this.min.x||eo.min.x>this.max.x||eo.max.y<this.min.y||eo.min.y>this.max.y||eo.max.z<this.min.z||eo.min.z>this.max.z)},intersectsSphere:function(eo){return this.clampPoint(eo.center,_vector$1),_vector$1.distanceToSquared(eo.center)<=eo.radius*eo.radius},intersectsPlane:function(eo){var to,ro;return eo.normal.x>0?(to=eo.normal.x*this.min.x,ro=eo.normal.x*this.max.x):(to=eo.normal.x*this.max.x,ro=eo.normal.x*this.min.x),eo.normal.y>0?(to+=eo.normal.y*this.min.y,ro+=eo.normal.y*this.max.y):(to+=eo.normal.y*this.max.y,ro+=eo.normal.y*this.min.y),eo.normal.z>0?(to+=eo.normal.z*this.min.z,ro+=eo.normal.z*this.max.z):(to+=eo.normal.z*this.max.z,ro+=eo.normal.z*this.min.z),to<=-eo.constant&&ro>=-eo.constant},intersectsTriangle:function(eo){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(eo.a,_center),_v1$2.subVectors(eo.b,_center),_v2.subVectors(eo.c,_center),_f0.subVectors(_v1$2,_v0),_f1.subVectors(_v2,_v1$2),_f2.subVectors(_v0,_v2);var to=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(to,_v0,_v1$2,_v2,_extents)||(to=[1,0,0,0,1,0,0,0,1],!satForAxes(to,_v0,_v1$2,_v2,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),to=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(to,_v0,_v1$2,_v2,_extents))},clampPoint:function(eo,to){return to===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),to=new Vector3),to.copy(eo).clamp(this.min,this.max)},distanceToPoint:function(eo){var to=_vector$1.copy(eo).clamp(this.min,this.max);return to.sub(eo).length()},getBoundingSphere:function(eo){return eo===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(eo.center),eo.radius=this.getSize(_vector$1).length()*.5,eo},intersect:function(eo){return this.min.max(eo.min),this.max.min(eo.max),this.isEmpty()&&this.makeEmpty(),this},union:function(eo){return this.min.min(eo.min),this.max.max(eo.max),this},applyMatrix4:function(eo){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(eo),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(eo),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(eo),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(eo),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(eo),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(eo),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(eo),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(eo),this.setFromPoints(_points),this)},translate:function(eo){return this.min.add(eo),this.max.add(eo),this},equals:function(eo){return eo.min.equals(this.min)&&eo.max.equals(this.max)}});function satForAxes(eo,to,ro,no,io){var oo,ao;for(oo=0,ao=eo.length-3;oo<=ao;oo+=3){_testAxis.fromArray(eo,oo);var so=io.x*Math.abs(_testAxis.x)+io.y*Math.abs(_testAxis.y)+io.z*Math.abs(_testAxis.z),uo=to.dot(_testAxis),lo=ro.dot(_testAxis),co=no.dot(_testAxis);if(Math.max(-Math.max(uo,lo,co),Math.min(uo,lo,co))>so)return!1}return!0}var _box$1=new Box3;function Sphere(eo,to){this.center=eo!==void 0?eo:new Vector3,this.radius=to!==void 0?to:-1}Object.assign(Sphere.prototype,{set:function(eo,to){return this.center.copy(eo),this.radius=to,this},setFromPoints:function(eo,to){var ro=this.center;to!==void 0?ro.copy(to):_box$1.setFromPoints(eo).getCenter(ro);for(var no=0,io=0,oo=eo.length;io<oo;io++)no=Math.max(no,ro.distanceToSquared(eo[io]));return this.radius=Math.sqrt(no),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.center.copy(eo.center),this.radius=eo.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(eo){return eo.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(eo){return eo.distanceTo(this.center)-this.radius},intersectsSphere:function(eo){var to=this.radius+eo.radius;return eo.center.distanceToSquared(this.center)<=to*to},intersectsBox:function(eo){return eo.intersectsSphere(this)},intersectsPlane:function(eo){return Math.abs(eo.distanceToPoint(this.center))<=this.radius},clampPoint:function(eo,to){var ro=this.center.distanceToSquared(eo);return to===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),to=new Vector3),to.copy(eo),ro>this.radius*this.radius&&(to.sub(this.center).normalize(),to.multiplyScalar(this.radius).add(this.center)),to},getBoundingBox:function(eo){return eo===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),eo=new Box3),this.isEmpty()?(eo.makeEmpty(),eo):(eo.set(this.center,this.center),eo.expandByScalar(this.radius),eo)},applyMatrix4:function(eo){return this.center.applyMatrix4(eo),this.radius=this.radius*eo.getMaxScaleOnAxis(),this},translate:function(eo){return this.center.add(eo),this},equals:function(eo){return eo.center.equals(this.center)&&eo.radius===this.radius}});var _vector$2=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal=new Vector3;function Ray(eo,to){this.origin=eo!==void 0?eo:new Vector3,this.direction=to!==void 0?to:new Vector3(0,0,-1)}Object.assign(Ray.prototype,{set:function(eo,to){return this.origin.copy(eo),this.direction.copy(to),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.origin.copy(eo.origin),this.direction.copy(eo.direction),this},at:function(eo,to){return to===void 0&&(console.warn("THREE.Ray: .at() target is now required"),to=new Vector3),to.copy(this.direction).multiplyScalar(eo).add(this.origin)},lookAt:function(eo){return this.direction.copy(eo).sub(this.origin).normalize(),this},recast:function(eo){return this.origin.copy(this.at(eo,_vector$2)),this},closestPointToPoint:function(eo,to){to===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),to=new Vector3),to.subVectors(eo,this.origin);var ro=to.dot(this.direction);return ro<0?to.copy(this.origin):to.copy(this.direction).multiplyScalar(ro).add(this.origin)},distanceToPoint:function(eo){return Math.sqrt(this.distanceSqToPoint(eo))},distanceSqToPoint:function(eo){var to=_vector$2.subVectors(eo,this.origin).dot(this.direction);return to<0?this.origin.distanceToSquared(eo):(_vector$2.copy(this.direction).multiplyScalar(to).add(this.origin),_vector$2.distanceToSquared(eo))},distanceSqToSegment:function(eo,to,ro,no){_segCenter.copy(eo).add(to).multiplyScalar(.5),_segDir.copy(to).sub(eo).normalize(),_diff.copy(this.origin).sub(_segCenter);var io=eo.distanceTo(to)*.5,oo=-this.direction.dot(_segDir),ao=_diff.dot(this.direction),so=-_diff.dot(_segDir),uo=_diff.lengthSq(),lo=Math.abs(1-oo*oo),co,fo,mo,go;if(lo>0)if(co=oo*so-ao,fo=oo*ao-so,go=io*lo,co>=0)if(fo>=-go)if(fo<=go){var yo=1/lo;co*=yo,fo*=yo,mo=co*(co+oo*fo+2*ao)+fo*(oo*co+fo+2*so)+uo}else fo=io,co=Math.max(0,-(oo*fo+ao)),mo=-co*co+fo*(fo+2*so)+uo;else fo=-io,co=Math.max(0,-(oo*fo+ao)),mo=-co*co+fo*(fo+2*so)+uo;else fo<=-go?(co=Math.max(0,-(-oo*io+ao)),fo=co>0?-io:Math.min(Math.max(-io,-so),io),mo=-co*co+fo*(fo+2*so)+uo):fo<=go?(co=0,fo=Math.min(Math.max(-io,-so),io),mo=fo*(fo+2*so)+uo):(co=Math.max(0,-(oo*io+ao)),fo=co>0?io:Math.min(Math.max(-io,-so),io),mo=-co*co+fo*(fo+2*so)+uo);else fo=oo>0?-io:io,co=Math.max(0,-(oo*fo+ao)),mo=-co*co+fo*(fo+2*so)+uo;return ro&&ro.copy(this.direction).multiplyScalar(co).add(this.origin),no&&no.copy(_segDir).multiplyScalar(fo).add(_segCenter),mo},intersectSphere:function(eo,to){_vector$2.subVectors(eo.center,this.origin);var ro=_vector$2.dot(this.direction),no=_vector$2.dot(_vector$2)-ro*ro,io=eo.radius*eo.radius;if(no>io)return null;var oo=Math.sqrt(io-no),ao=ro-oo,so=ro+oo;return ao<0&&so<0?null:ao<0?this.at(so,to):this.at(ao,to)},intersectsSphere:function(eo){return this.distanceSqToPoint(eo.center)<=eo.radius*eo.radius},distanceToPlane:function(eo){var to=eo.normal.dot(this.direction);if(to===0)return eo.distanceToPoint(this.origin)===0?0:null;var ro=-(this.origin.dot(eo.normal)+eo.constant)/to;return ro>=0?ro:null},intersectPlane:function(eo,to){var ro=this.distanceToPlane(eo);return ro===null?null:this.at(ro,to)},intersectsPlane:function(eo){var to=eo.distanceToPoint(this.origin);if(to===0)return!0;var ro=eo.normal.dot(this.direction);return ro*to<0},intersectBox:function(eo,to){var ro,no,io,oo,ao,so,uo=1/this.direction.x,lo=1/this.direction.y,co=1/this.direction.z,fo=this.origin;return uo>=0?(ro=(eo.min.x-fo.x)*uo,no=(eo.max.x-fo.x)*uo):(ro=(eo.max.x-fo.x)*uo,no=(eo.min.x-fo.x)*uo),lo>=0?(io=(eo.min.y-fo.y)*lo,oo=(eo.max.y-fo.y)*lo):(io=(eo.max.y-fo.y)*lo,oo=(eo.min.y-fo.y)*lo),ro>oo||io>no||((io>ro||ro!==ro)&&(ro=io),(oo<no||no!==no)&&(no=oo),co>=0?(ao=(eo.min.z-fo.z)*co,so=(eo.max.z-fo.z)*co):(ao=(eo.max.z-fo.z)*co,so=(eo.min.z-fo.z)*co),ro>so||ao>no)||((ao>ro||ro!==ro)&&(ro=ao),(so<no||no!==no)&&(no=so),no<0)?null:this.at(ro>=0?ro:no,to)},intersectsBox:function(eo){return this.intersectBox(eo,_vector$2)!==null},intersectTriangle:function(eo,to,ro,no,io){_edge1.subVectors(to,eo),_edge2.subVectors(ro,eo),_normal.crossVectors(_edge1,_edge2);var oo=this.direction.dot(_normal),ao;if(oo>0){if(no)return null;ao=1}else if(oo<0)ao=-1,oo=-oo;else return null;_diff.subVectors(this.origin,eo);var so=ao*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(so<0)return null;var uo=ao*this.direction.dot(_edge1.cross(_diff));if(uo<0||so+uo>oo)return null;var lo=-ao*_diff.dot(_normal);return lo<0?null:this.at(lo/oo,io)},applyMatrix4:function(eo){return this.origin.applyMatrix4(eo),this.direction.transformDirection(eo),this},equals:function(eo){return eo.origin.equals(this.origin)&&eo.direction.equals(this.direction)}});var _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;function Plane(eo,to){this.normal=eo!==void 0?eo:new Vector3(1,0,0),this.constant=to!==void 0?to:0}Object.assign(Plane.prototype,{isPlane:!0,set:function(eo,to){return this.normal.copy(eo),this.constant=to,this},setComponents:function(eo,to,ro,no){return this.normal.set(eo,to,ro),this.constant=no,this},setFromNormalAndCoplanarPoint:function(eo,to){return this.normal.copy(eo),this.constant=-to.dot(this.normal),this},setFromCoplanarPoints:function(eo,to,ro){var no=_vector1.subVectors(ro,to).cross(_vector2.subVectors(eo,to)).normalize();return this.setFromNormalAndCoplanarPoint(no,eo),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.normal.copy(eo.normal),this.constant=eo.constant,this},normalize:function(){var eo=1/this.normal.length();return this.normal.multiplyScalar(eo),this.constant*=eo,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(eo){return this.normal.dot(eo)+this.constant},distanceToSphere:function(eo){return this.distanceToPoint(eo.center)-eo.radius},projectPoint:function(eo,to){return to===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),to=new Vector3),to.copy(this.normal).multiplyScalar(-this.distanceToPoint(eo)).add(eo)},intersectLine:function(eo,to){to===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),to=new Vector3);var ro=eo.delta(_vector1),no=this.normal.dot(ro);if(no===0)return this.distanceToPoint(eo.start)===0?to.copy(eo.start):void 0;var io=-(eo.start.dot(this.normal)+this.constant)/no;if(!(io<0||io>1))return to.copy(ro).multiplyScalar(io).add(eo.start)},intersectsLine:function(eo){var to=this.distanceToPoint(eo.start),ro=this.distanceToPoint(eo.end);return to<0&&ro>0||ro<0&&to>0},intersectsBox:function(eo){return eo.intersectsPlane(this)},intersectsSphere:function(eo){return eo.intersectsPlane(this)},coplanarPoint:function(eo){return eo===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),eo=new Vector3),eo.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(eo,to){var ro=to||_normalMatrix.getNormalMatrix(eo),no=this.coplanarPoint(_vector1).applyMatrix4(eo),io=this.normal.applyMatrix3(ro).normalize();return this.constant=-no.dot(io),this},translate:function(eo){return this.constant-=eo.dot(this.normal),this},equals:function(eo){return eo.normal.equals(this.normal)&&eo.constant===this.constant}});var _v0$1=new Vector3,_v1$3=new Vector3,_v2$1=new Vector3,_v3=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;function Triangle(eo,to,ro){this.a=eo!==void 0?eo:new Vector3,this.b=to!==void 0?to:new Vector3,this.c=ro!==void 0?ro:new Vector3}Object.assign(Triangle,{getNormal:function(eo,to,ro,no){no===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),no=new Vector3),no.subVectors(ro,to),_v0$1.subVectors(eo,to),no.cross(_v0$1);var io=no.lengthSq();return io>0?no.multiplyScalar(1/Math.sqrt(io)):no.set(0,0,0)},getBarycoord:function(eo,to,ro,no,io){_v0$1.subVectors(no,to),_v1$3.subVectors(ro,to),_v2$1.subVectors(eo,to);var oo=_v0$1.dot(_v0$1),ao=_v0$1.dot(_v1$3),so=_v0$1.dot(_v2$1),uo=_v1$3.dot(_v1$3),lo=_v1$3.dot(_v2$1),co=oo*uo-ao*ao;if(io===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),io=new Vector3),co===0)return io.set(-2,-1,-1);var fo=1/co,mo=(uo*so-ao*lo)*fo,go=(oo*lo-ao*so)*fo;return io.set(1-mo-go,go,mo)},containsPoint:function(eo,to,ro,no){return Triangle.getBarycoord(eo,to,ro,no,_v3),_v3.x>=0&&_v3.y>=0&&_v3.x+_v3.y<=1},getUV:function(eo,to,ro,no,io,oo,ao,so){return this.getBarycoord(eo,to,ro,no,_v3),so.set(0,0),so.addScaledVector(io,_v3.x),so.addScaledVector(oo,_v3.y),so.addScaledVector(ao,_v3.z),so},isFrontFacing:function(eo,to,ro,no){return _v0$1.subVectors(ro,to),_v1$3.subVectors(eo,to),_v0$1.cross(_v1$3).dot(no)<0}});Object.assign(Triangle.prototype,{set:function(eo,to,ro){return this.a.copy(eo),this.b.copy(to),this.c.copy(ro),this},setFromPointsAndIndices:function(eo,to,ro,no){return this.a.copy(eo[to]),this.b.copy(eo[ro]),this.c.copy(eo[no]),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.a.copy(eo.a),this.b.copy(eo.b),this.c.copy(eo.c),this},getArea:function(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5},getMidpoint:function(eo){return eo===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),eo=new Vector3),eo.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(eo){return Triangle.getNormal(this.a,this.b,this.c,eo)},getPlane:function(eo){return eo===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),eo=new Plane),eo.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(eo,to){return Triangle.getBarycoord(eo,this.a,this.b,this.c,to)},getUV:function(eo,to,ro,no,io){return Triangle.getUV(eo,this.a,this.b,this.c,to,ro,no,io)},containsPoint:function(eo){return Triangle.containsPoint(eo,this.a,this.b,this.c)},isFrontFacing:function(eo){return Triangle.isFrontFacing(this.a,this.b,this.c,eo)},intersectsBox:function(eo){return eo.intersectsTriangle(this)},closestPointToPoint:function(eo,to){to===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),to=new Vector3);var ro=this.a,no=this.b,io=this.c,oo,ao;_vab.subVectors(no,ro),_vac.subVectors(io,ro),_vap.subVectors(eo,ro);var so=_vab.dot(_vap),uo=_vac.dot(_vap);if(so<=0&&uo<=0)return to.copy(ro);_vbp.subVectors(eo,no);var lo=_vab.dot(_vbp),co=_vac.dot(_vbp);if(lo>=0&&co<=lo)return to.copy(no);var fo=so*co-lo*uo;if(fo<=0&&so>=0&&lo<=0)return oo=so/(so-lo),to.copy(ro).addScaledVector(_vab,oo);_vcp.subVectors(eo,io);var mo=_vab.dot(_vcp),go=_vac.dot(_vcp);if(go>=0&&mo<=go)return to.copy(io);var yo=mo*uo-so*go;if(yo<=0&&uo>=0&&go<=0)return ao=uo/(uo-go),to.copy(ro).addScaledVector(_vac,ao);var vo=lo*go-mo*co;if(vo<=0&&co-lo>=0&&mo-go>=0)return _vbc.subVectors(io,no),ao=(co-lo)/(co-lo+(mo-go)),to.copy(no).addScaledVector(_vbc,ao);var Ao=1/(vo+yo+fo);return oo=yo*Ao,ao=fo*Ao,to.copy(ro).addScaledVector(_vab,oo).addScaledVector(_vac,ao)},equals:function(eo){return eo.a.equals(this.a)&&eo.b.equals(this.b)&&eo.c.equals(this.c)}});var _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function Color(eo,to,ro){return to===void 0&&ro===void 0?this.set(eo):this.setRGB(eo,to,ro)}function hue2rgb(eo,to,ro){return ro<0&&(ro+=1),ro>1&&(ro-=1),ro<1/6?eo+(to-eo)*6*ro:ro<1/2?to:ro<2/3?eo+(to-eo)*6*(2/3-ro):eo}function SRGBToLinear(eo){return eo<.04045?eo*.0773993808:Math.pow(eo*.9478672986+.0521327014,2.4)}function LinearToSRGB(eo){return eo<.0031308?eo*12.92:1.055*Math.pow(eo,.41666)-.055}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(eo){return eo&&eo.isColor?this.copy(eo):typeof eo=="number"?this.setHex(eo):typeof eo=="string"&&this.setStyle(eo),this},setScalar:function(eo){return this.r=eo,this.g=eo,this.b=eo,this},setHex:function(eo){return eo=Math.floor(eo),this.r=(eo>>16&255)/255,this.g=(eo>>8&255)/255,this.b=(eo&255)/255,this},setRGB:function(eo,to,ro){return this.r=eo,this.g=to,this.b=ro,this},setHSL:function(eo,to,ro){if(eo=MathUtils.euclideanModulo(eo,1),to=MathUtils.clamp(to,0,1),ro=MathUtils.clamp(ro,0,1),to===0)this.r=this.g=this.b=ro;else{var no=ro<=.5?ro*(1+to):ro+to-ro*to,io=2*ro-no;this.r=hue2rgb(io,no,eo+1/3),this.g=hue2rgb(io,no,eo),this.b=hue2rgb(io,no,eo-1/3)}return this},setStyle:function(eo){function to(fo){fo!==void 0&&parseFloat(fo)<1&&console.warn("THREE.Color: Alpha component of "+eo+" will be ignored.")}var ro;if(ro=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(eo)){var no,io=ro[1],oo=ro[2];switch(io){case"rgb":case"rgba":if(no=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(oo))return this.r=Math.min(255,parseInt(no[1],10))/255,this.g=Math.min(255,parseInt(no[2],10))/255,this.b=Math.min(255,parseInt(no[3],10))/255,to(no[5]),this;if(no=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(oo))return this.r=Math.min(100,parseInt(no[1],10))/100,this.g=Math.min(100,parseInt(no[2],10))/100,this.b=Math.min(100,parseInt(no[3],10))/100,to(no[5]),this;break;case"hsl":case"hsla":if(no=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(oo)){var ao=parseFloat(no[1])/360,so=parseInt(no[2],10)/100,uo=parseInt(no[3],10)/100;return to(no[5]),this.setHSL(ao,so,uo)}break}}else if(ro=/^\#([A-Fa-f0-9]+)$/.exec(eo)){var lo=ro[1],co=lo.length;if(co===3)return this.r=parseInt(lo.charAt(0)+lo.charAt(0),16)/255,this.g=parseInt(lo.charAt(1)+lo.charAt(1),16)/255,this.b=parseInt(lo.charAt(2)+lo.charAt(2),16)/255,this;if(co===6)return this.r=parseInt(lo.charAt(0)+lo.charAt(1),16)/255,this.g=parseInt(lo.charAt(2)+lo.charAt(3),16)/255,this.b=parseInt(lo.charAt(4)+lo.charAt(5),16)/255,this}return eo&&eo.length>0?this.setColorName(eo):this},setColorName:function(eo){var to=_colorKeywords[eo];return to!==void 0?this.setHex(to):console.warn("THREE.Color: Unknown color "+eo),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(eo){return this.r=eo.r,this.g=eo.g,this.b=eo.b,this},copyGammaToLinear:function(eo,to){return to===void 0&&(to=2),this.r=Math.pow(eo.r,to),this.g=Math.pow(eo.g,to),this.b=Math.pow(eo.b,to),this},copyLinearToGamma:function(eo,to){to===void 0&&(to=2);var ro=to>0?1/to:1;return this.r=Math.pow(eo.r,ro),this.g=Math.pow(eo.g,ro),this.b=Math.pow(eo.b,ro),this},convertGammaToLinear:function(eo){return this.copyGammaToLinear(this,eo),this},convertLinearToGamma:function(eo){return this.copyLinearToGamma(this,eo),this},copySRGBToLinear:function(eo){return this.r=SRGBToLinear(eo.r),this.g=SRGBToLinear(eo.g),this.b=SRGBToLinear(eo.b),this},copyLinearToSRGB:function(eo){return this.r=LinearToSRGB(eo.r),this.g=LinearToSRGB(eo.g),this.b=LinearToSRGB(eo.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(eo){eo===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),eo={h:0,s:0,l:0});var to=this.r,ro=this.g,no=this.b,io=Math.max(to,ro,no),oo=Math.min(to,ro,no),ao,so,uo=(oo+io)/2;if(oo===io)ao=0,so=0;else{var lo=io-oo;switch(so=uo<=.5?lo/(io+oo):lo/(2-io-oo),io){case to:ao=(ro-no)/lo+(ro<no?6:0);break;case ro:ao=(no-to)/lo+2;break;case no:ao=(to-ro)/lo+4;break}ao/=6}return eo.h=ao,eo.s=so,eo.l=uo,eo},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(eo,to,ro){return this.getHSL(_hslA),_hslA.h+=eo,_hslA.s+=to,_hslA.l+=ro,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this},add:function(eo){return this.r+=eo.r,this.g+=eo.g,this.b+=eo.b,this},addColors:function(eo,to){return this.r=eo.r+to.r,this.g=eo.g+to.g,this.b=eo.b+to.b,this},addScalar:function(eo){return this.r+=eo,this.g+=eo,this.b+=eo,this},sub:function(eo){return this.r=Math.max(0,this.r-eo.r),this.g=Math.max(0,this.g-eo.g),this.b=Math.max(0,this.b-eo.b),this},multiply:function(eo){return this.r*=eo.r,this.g*=eo.g,this.b*=eo.b,this},multiplyScalar:function(eo){return this.r*=eo,this.g*=eo,this.b*=eo,this},lerp:function(eo,to){return this.r+=(eo.r-this.r)*to,this.g+=(eo.g-this.g)*to,this.b+=(eo.b-this.b)*to,this},lerpHSL:function(eo,to){this.getHSL(_hslA),eo.getHSL(_hslB);var ro=MathUtils.lerp(_hslA.h,_hslB.h,to),no=MathUtils.lerp(_hslA.s,_hslB.s,to),io=MathUtils.lerp(_hslA.l,_hslB.l,to);return this.setHSL(ro,no,io),this},equals:function(eo){return eo.r===this.r&&eo.g===this.g&&eo.b===this.b},fromArray:function(eo,to){return to===void 0&&(to=0),this.r=eo[to],this.g=eo[to+1],this.b=eo[to+2],this},toArray:function(eo,to){return eo===void 0&&(eo=[]),to===void 0&&(to=0),eo[to]=this.r,eo[to+1]=this.g,eo[to+2]=this.b,eo},toJSON:function(){return this.getHex()}});Color.NAMES=_colorKeywords;function Face3(eo,to,ro,no,io,oo){this.a=eo,this.b=to,this.c=ro,this.normal=no&&no.isVector3?no:new Vector3,this.vertexNormals=Array.isArray(no)?no:[],this.color=io&&io.isColor?io:new Color,this.vertexColors=Array.isArray(io)?io:[],this.materialIndex=oo!==void 0?oo:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(eo){this.a=eo.a,this.b=eo.b,this.c=eo.c,this.normal.copy(eo.normal),this.color.copy(eo.color),this.materialIndex=eo.materialIndex;for(var to=0,ro=eo.vertexNormals.length;to<ro;to++)this.vertexNormals[to]=eo.vertexNormals[to].clone();for(var to=0,ro=eo.vertexColors.length;to<ro;to++)this.vertexColors[to]=eo.vertexColors[to].clone();return this}});var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=NormalBlending,this.side=FrontSide,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Material.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:function(){},setValues:function(eo){if(eo!==void 0)for(var to in eo){var ro=eo[to];if(ro===void 0){console.warn("THREE.Material: '"+to+"' parameter is undefined.");continue}if(to==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=ro===FlatShading;continue}var no=this[to];if(no===void 0){console.warn("THREE."+this.type+": '"+to+"' is not a property of this material.");continue}no&&no.isColor?no.set(ro):no&&no.isVector3&&ro&&ro.isVector3?no.copy(ro):this[to]=ro}},toJSON:function(eo){var to=eo===void 0||typeof eo=="string";to&&(eo={textures:{},images:{}});var ro={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};ro.uuid=this.uuid,ro.type=this.type,this.name!==""&&(ro.name=this.name),this.color&&this.color.isColor&&(ro.color=this.color.getHex()),this.roughness!==void 0&&(ro.roughness=this.roughness),this.metalness!==void 0&&(ro.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(ro.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(ro.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(ro.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ro.specular=this.specular.getHex()),this.shininess!==void 0&&(ro.shininess=this.shininess),this.clearcoat!==void 0&&(ro.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(ro.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ro.clearcoatMap=this.clearcoatMap.toJSON(eo).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ro.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(eo).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ro.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(eo).uuid,ro.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(ro.map=this.map.toJSON(eo).uuid),this.matcap&&this.matcap.isTexture&&(ro.matcap=this.matcap.toJSON(eo).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ro.alphaMap=this.alphaMap.toJSON(eo).uuid),this.lightMap&&this.lightMap.isTexture&&(ro.lightMap=this.lightMap.toJSON(eo).uuid),this.aoMap&&this.aoMap.isTexture&&(ro.aoMap=this.aoMap.toJSON(eo).uuid,ro.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ro.bumpMap=this.bumpMap.toJSON(eo).uuid,ro.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ro.normalMap=this.normalMap.toJSON(eo).uuid,ro.normalMapType=this.normalMapType,ro.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ro.displacementMap=this.displacementMap.toJSON(eo).uuid,ro.displacementScale=this.displacementScale,ro.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ro.roughnessMap=this.roughnessMap.toJSON(eo).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ro.metalnessMap=this.metalnessMap.toJSON(eo).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ro.emissiveMap=this.emissiveMap.toJSON(eo).uuid),this.specularMap&&this.specularMap.isTexture&&(ro.specularMap=this.specularMap.toJSON(eo).uuid),this.envMap&&this.envMap.isTexture&&(ro.envMap=this.envMap.toJSON(eo).uuid,ro.reflectivity=this.reflectivity,ro.refractionRatio=this.refractionRatio,this.combine!==void 0&&(ro.combine=this.combine),this.envMapIntensity!==void 0&&(ro.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(ro.gradientMap=this.gradientMap.toJSON(eo).uuid),this.size!==void 0&&(ro.size=this.size),this.sizeAttenuation!==void 0&&(ro.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(ro.blending=this.blending),this.flatShading===!0&&(ro.flatShading=this.flatShading),this.side!==FrontSide&&(ro.side=this.side),this.vertexColors&&(ro.vertexColors=!0),this.opacity<1&&(ro.opacity=this.opacity),this.transparent===!0&&(ro.transparent=this.transparent),ro.depthFunc=this.depthFunc,ro.depthTest=this.depthTest,ro.depthWrite=this.depthWrite,ro.stencilWrite=this.stencilWrite,ro.stencilWriteMask=this.stencilWriteMask,ro.stencilFunc=this.stencilFunc,ro.stencilRef=this.stencilRef,ro.stencilFuncMask=this.stencilFuncMask,ro.stencilFail=this.stencilFail,ro.stencilZFail=this.stencilZFail,ro.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(ro.rotation=this.rotation),this.polygonOffset===!0&&(ro.polygonOffset=!0),this.polygonOffsetFactor!==0&&(ro.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(ro.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(ro.linewidth=this.linewidth),this.dashSize!==void 0&&(ro.dashSize=this.dashSize),this.gapSize!==void 0&&(ro.gapSize=this.gapSize),this.scale!==void 0&&(ro.scale=this.scale),this.dithering===!0&&(ro.dithering=!0),this.alphaTest>0&&(ro.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(ro.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(ro.wireframe=this.wireframe),this.wireframeLinewidth>1&&(ro.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(ro.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(ro.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(ro.morphTargets=!0),this.morphNormals===!0&&(ro.morphNormals=!0),this.skinning===!0&&(ro.skinning=!0),this.visible===!1&&(ro.visible=!1),this.toneMapped===!1&&(ro.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(ro.userData=this.userData);function no(ao){var so=[];for(var uo in ao){var lo=ao[uo];delete lo.metadata,so.push(lo)}return so}if(to){var io=no(eo.textures),oo=no(eo.images);io.length>0&&(ro.textures=io),oo.length>0&&(ro.images=oo)}return ro},clone:function(){return new this.constructor().copy(this)},copy:function(eo){this.name=eo.name,this.fog=eo.fog,this.blending=eo.blending,this.side=eo.side,this.flatShading=eo.flatShading,this.vertexColors=eo.vertexColors,this.opacity=eo.opacity,this.transparent=eo.transparent,this.blendSrc=eo.blendSrc,this.blendDst=eo.blendDst,this.blendEquation=eo.blendEquation,this.blendSrcAlpha=eo.blendSrcAlpha,this.blendDstAlpha=eo.blendDstAlpha,this.blendEquationAlpha=eo.blendEquationAlpha,this.depthFunc=eo.depthFunc,this.depthTest=eo.depthTest,this.depthWrite=eo.depthWrite,this.stencilWriteMask=eo.stencilWriteMask,this.stencilFunc=eo.stencilFunc,this.stencilRef=eo.stencilRef,this.stencilFuncMask=eo.stencilFuncMask,this.stencilFail=eo.stencilFail,this.stencilZFail=eo.stencilZFail,this.stencilZPass=eo.stencilZPass,this.stencilWrite=eo.stencilWrite;var to=eo.clippingPlanes,ro=null;if(to!==null){var no=to.length;ro=new Array(no);for(var io=0;io!==no;++io)ro[io]=to[io].clone()}return this.clippingPlanes=ro,this.clipIntersection=eo.clipIntersection,this.clipShadows=eo.clipShadows,this.shadowSide=eo.shadowSide,this.colorWrite=eo.colorWrite,this.precision=eo.precision,this.polygonOffset=eo.polygonOffset,this.polygonOffsetFactor=eo.polygonOffsetFactor,this.polygonOffsetUnits=eo.polygonOffsetUnits,this.dithering=eo.dithering,this.alphaTest=eo.alphaTest,this.premultipliedAlpha=eo.premultipliedAlpha,this.visible=eo.visible,this.toneMapped=eo.toneMapped,this.userData=JSON.parse(JSON.stringify(eo.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Material.prototype,"needsUpdate",{set:function(eo){eo===!0&&this.version++}});function MeshBasicMaterial(eo){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(eo)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.map=eo.map,this.lightMap=eo.lightMap,this.lightMapIntensity=eo.lightMapIntensity,this.aoMap=eo.aoMap,this.aoMapIntensity=eo.aoMapIntensity,this.specularMap=eo.specularMap,this.alphaMap=eo.alphaMap,this.envMap=eo.envMap,this.combine=eo.combine,this.reflectivity=eo.reflectivity,this.refractionRatio=eo.refractionRatio,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.wireframeLinecap=eo.wireframeLinecap,this.wireframeLinejoin=eo.wireframeLinejoin,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this};var _vector$3=new Vector3;function BufferAttribute(eo,to,ro){if(Array.isArray(eo))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=eo,this.itemSize=to,this.count=eo!==void 0?eo.length/to:0,this.normalized=ro===!0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(eo){eo===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(eo){return this.usage=eo,this},copy:function(eo){return this.name=eo.name,this.array=new eo.array.constructor(eo.array),this.itemSize=eo.itemSize,this.count=eo.count,this.normalized=eo.normalized,this.usage=eo.usage,this},copyAt:function(eo,to,ro){eo*=this.itemSize,ro*=to.itemSize;for(var no=0,io=this.itemSize;no<io;no++)this.array[eo+no]=to.array[ro+no];return this},copyArray:function(eo){return this.array.set(eo),this},copyColorsArray:function(eo){for(var to=this.array,ro=0,no=0,io=eo.length;no<io;no++){var oo=eo[no];oo===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",no),oo=new Color),to[ro++]=oo.r,to[ro++]=oo.g,to[ro++]=oo.b}return this},copyVector2sArray:function(eo){for(var to=this.array,ro=0,no=0,io=eo.length;no<io;no++){var oo=eo[no];oo===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",no),oo=new Vector2),to[ro++]=oo.x,to[ro++]=oo.y}return this},copyVector3sArray:function(eo){for(var to=this.array,ro=0,no=0,io=eo.length;no<io;no++){var oo=eo[no];oo===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",no),oo=new Vector3),to[ro++]=oo.x,to[ro++]=oo.y,to[ro++]=oo.z}return this},copyVector4sArray:function(eo){for(var to=this.array,ro=0,no=0,io=eo.length;no<io;no++){var oo=eo[no];oo===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",no),oo=new Vector4),to[ro++]=oo.x,to[ro++]=oo.y,to[ro++]=oo.z,to[ro++]=oo.w}return this},applyMatrix3:function(eo){for(var to=0,ro=this.count;to<ro;to++)_vector$3.x=this.getX(to),_vector$3.y=this.getY(to),_vector$3.z=this.getZ(to),_vector$3.applyMatrix3(eo),this.setXYZ(to,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyMatrix4:function(eo){for(var to=0,ro=this.count;to<ro;to++)_vector$3.x=this.getX(to),_vector$3.y=this.getY(to),_vector$3.z=this.getZ(to),_vector$3.applyMatrix4(eo),this.setXYZ(to,_vector$3.x,_vector$3.y,_vector$3.z);return this},applyNormalMatrix:function(eo){for(var to=0,ro=this.count;to<ro;to++)_vector$3.x=this.getX(to),_vector$3.y=this.getY(to),_vector$3.z=this.getZ(to),_vector$3.applyNormalMatrix(eo),this.setXYZ(to,_vector$3.x,_vector$3.y,_vector$3.z);return this},transformDirection:function(eo){for(var to=0,ro=this.count;to<ro;to++)_vector$3.x=this.getX(to),_vector$3.y=this.getY(to),_vector$3.z=this.getZ(to),_vector$3.transformDirection(eo),this.setXYZ(to,_vector$3.x,_vector$3.y,_vector$3.z);return this},set:function(eo,to){return to===void 0&&(to=0),this.array.set(eo,to),this},getX:function(eo){return this.array[eo*this.itemSize]},setX:function(eo,to){return this.array[eo*this.itemSize]=to,this},getY:function(eo){return this.array[eo*this.itemSize+1]},setY:function(eo,to){return this.array[eo*this.itemSize+1]=to,this},getZ:function(eo){return this.array[eo*this.itemSize+2]},setZ:function(eo,to){return this.array[eo*this.itemSize+2]=to,this},getW:function(eo){return this.array[eo*this.itemSize+3]},setW:function(eo,to){return this.array[eo*this.itemSize+3]=to,this},setXY:function(eo,to,ro){return eo*=this.itemSize,this.array[eo+0]=to,this.array[eo+1]=ro,this},setXYZ:function(eo,to,ro,no){return eo*=this.itemSize,this.array[eo+0]=to,this.array[eo+1]=ro,this.array[eo+2]=no,this},setXYZW:function(eo,to,ro,no,io){return eo*=this.itemSize,this.array[eo+0]=to,this.array[eo+1]=ro,this.array[eo+2]=no,this.array[eo+3]=io,this},onUpload:function(eo){return this.onUploadCallback=eo,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Int8BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Int8Array(eo),to,ro)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Uint8Array(eo),to,ro)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(eo,to,ro){BufferAttribute.call(this,new Uint8ClampedArray(eo),to,ro)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Int16Array(eo),to,ro)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Uint16Array(eo),to,ro)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Int32Array(eo),to,ro)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Uint32Array(eo),to,ro)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Float32Array(eo),to,ro)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(eo,to,ro){BufferAttribute.call(this,new Float64Array(eo),to,ro)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(eo){for(var to,ro=[],no=void 0,io=eo.faces,oo=0;oo<io.length;oo++){var ao=io[oo];ao.materialIndex!==no&&(no=ao.materialIndex,to!==void 0&&(to.count=oo*3-to.start,ro.push(to)),to={start:oo*3,materialIndex:no})}to!==void 0&&(to.count=oo*3-to.start,ro.push(to)),this.groups=ro},fromGeometry:function(eo){var to=eo.faces,ro=eo.vertices,no=eo.faceVertexUvs,io=no[0]&&no[0].length>0,oo=no[1]&&no[1].length>0,ao=eo.morphTargets,so=ao.length,uo;if(so>0){uo=[];for(var lo=0;lo<so;lo++)uo[lo]={name:ao[lo].name,data:[]};this.morphTargets.position=uo}var co=eo.morphNormals,fo=co.length,mo;if(fo>0){mo=[];for(var lo=0;lo<fo;lo++)mo[lo]={name:co[lo].name,data:[]};this.morphTargets.normal=mo}var go=eo.skinIndices,yo=eo.skinWeights,vo=go.length===ro.length,Ao=yo.length===ro.length;ro.length>0&&to.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var lo=0;lo<to.length;lo++){var ho=to[lo];this.vertices.push(ro[ho.a],ro[ho.b],ro[ho.c]);var po=ho.vertexNormals;if(po.length===3)this.normals.push(po[0],po[1],po[2]);else{var Mo=ho.normal;this.normals.push(Mo,Mo,Mo)}var xo=ho.vertexColors;if(xo.length===3)this.colors.push(xo[0],xo[1],xo[2]);else{var wo=ho.color;this.colors.push(wo,wo,wo)}if(io===!0){var bo=no[0][lo];bo!==void 0?this.uvs.push(bo[0],bo[1],bo[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",lo),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(oo===!0){var bo=no[1][lo];bo!==void 0?this.uvs2.push(bo[0],bo[1],bo[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",lo),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var _o=0;_o<so;_o++){var To=ao[_o].vertices;uo[_o].data.push(To[ho.a],To[ho.b],To[ho.c])}for(var _o=0;_o<fo;_o++){var No=co[_o].vertexNormals[lo];mo[_o].data.push(No.a,No.b,No.c)}vo&&this.skinIndices.push(go[ho.a],go[ho.b],go[ho.c]),Ao&&this.skinWeights.push(yo[ho.a],yo[ho.b],yo[ho.c])}return this.computeGroups(eo),this.verticesNeedUpdate=eo.verticesNeedUpdate,this.normalsNeedUpdate=eo.normalsNeedUpdate,this.colorsNeedUpdate=eo.colorsNeedUpdate,this.uvsNeedUpdate=eo.uvsNeedUpdate,this.groupsNeedUpdate=eo.groupsNeedUpdate,eo.boundingSphere!==null&&(this.boundingSphere=eo.boundingSphere.clone()),eo.boundingBox!==null&&(this.boundingBox=eo.boundingBox.clone()),this}});function arrayMax(eo){if(eo.length===0)return-1/0;let to=eo[0];for(let ro=1,no=eo.length;ro<no;++ro)eo[ro]>to&&(to=eo[ro]);return to}var _bufferGeometryId=1,_m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$4=new Vector3;function BufferGeometry(){Object.defineProperty(this,"id",{value:_bufferGeometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}BufferGeometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(eo){Array.isArray(eo)?this.index=new(arrayMax(eo)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(eo,1):this.index=eo},getAttribute:function(eo){return this.attributes[eo]},setAttribute:function(eo,to){return this.attributes[eo]=to,this},deleteAttribute:function(eo){return delete this.attributes[eo],this},addGroup:function(eo,to,ro){this.groups.push({start:eo,count:to,materialIndex:ro!==void 0?ro:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(eo,to){this.drawRange.start=eo,this.drawRange.count=to},applyMatrix4:function(eo){var to=this.attributes.position;to!==void 0&&(to.applyMatrix4(eo),to.needsUpdate=!0);var ro=this.attributes.normal;if(ro!==void 0){var no=new Matrix3().getNormalMatrix(eo);ro.applyNormalMatrix(no),ro.needsUpdate=!0}var io=this.attributes.tangent;return io!==void 0&&(io.transformDirection(eo),io.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(eo){return _m1$2.makeRotationX(eo),this.applyMatrix4(_m1$2),this},rotateY:function(eo){return _m1$2.makeRotationY(eo),this.applyMatrix4(_m1$2),this},rotateZ:function(eo){return _m1$2.makeRotationZ(eo),this.applyMatrix4(_m1$2),this},translate:function(eo,to,ro){return _m1$2.makeTranslation(eo,to,ro),this.applyMatrix4(_m1$2),this},scale:function(eo,to,ro){return _m1$2.makeScale(eo,to,ro),this.applyMatrix4(_m1$2),this},lookAt:function(eo){return _obj.lookAt(eo),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this},setFromObject:function(eo){var to=eo.geometry;if(eo.isPoints||eo.isLine){var ro=new Float32BufferAttribute(to.vertices.length*3,3),no=new Float32BufferAttribute(to.colors.length*3,3);if(this.setAttribute("position",ro.copyVector3sArray(to.vertices)),this.setAttribute("color",no.copyColorsArray(to.colors)),to.lineDistances&&to.lineDistances.length===to.vertices.length){var io=new Float32BufferAttribute(to.lineDistances.length,1);this.setAttribute("lineDistance",io.copyArray(to.lineDistances))}to.boundingSphere!==null&&(this.boundingSphere=to.boundingSphere.clone()),to.boundingBox!==null&&(this.boundingBox=to.boundingBox.clone())}else eo.isMesh&&to&&to.isGeometry&&this.fromGeometry(to);return this},setFromPoints:function(eo){for(var to=[],ro=0,no=eo.length;ro<no;ro++){var io=eo[ro];to.push(io.x,io.y,io.z||0)}return this.setAttribute("position",new Float32BufferAttribute(to,3)),this},updateFromObject:function(eo){var to=eo.geometry;if(eo.isMesh){var ro=to.__directGeometry;if(to.elementsNeedUpdate===!0&&(ro=void 0,to.elementsNeedUpdate=!1),ro===void 0)return this.fromGeometry(to);ro.verticesNeedUpdate=to.verticesNeedUpdate,ro.normalsNeedUpdate=to.normalsNeedUpdate,ro.colorsNeedUpdate=to.colorsNeedUpdate,ro.uvsNeedUpdate=to.uvsNeedUpdate,ro.groupsNeedUpdate=to.groupsNeedUpdate,to.verticesNeedUpdate=!1,to.normalsNeedUpdate=!1,to.colorsNeedUpdate=!1,to.uvsNeedUpdate=!1,to.groupsNeedUpdate=!1,to=ro}var no;return to.verticesNeedUpdate===!0&&(no=this.attributes.position,no!==void 0&&(no.copyVector3sArray(to.vertices),no.needsUpdate=!0),to.verticesNeedUpdate=!1),to.normalsNeedUpdate===!0&&(no=this.attributes.normal,no!==void 0&&(no.copyVector3sArray(to.normals),no.needsUpdate=!0),to.normalsNeedUpdate=!1),to.colorsNeedUpdate===!0&&(no=this.attributes.color,no!==void 0&&(no.copyColorsArray(to.colors),no.needsUpdate=!0),to.colorsNeedUpdate=!1),to.uvsNeedUpdate&&(no=this.attributes.uv,no!==void 0&&(no.copyVector2sArray(to.uvs),no.needsUpdate=!0),to.uvsNeedUpdate=!1),to.lineDistancesNeedUpdate&&(no=this.attributes.lineDistance,no!==void 0&&(no.copyArray(to.lineDistances),no.needsUpdate=!0),to.lineDistancesNeedUpdate=!1),to.groupsNeedUpdate&&(to.computeGroups(eo.geometry),this.groups=to.groups,to.groupsNeedUpdate=!1),this},fromGeometry:function(eo){return eo.__directGeometry=new DirectGeometry().fromGeometry(eo),this.fromDirectGeometry(eo.__directGeometry)},fromDirectGeometry:function(eo){var to=new Float32Array(eo.vertices.length*3);if(this.setAttribute("position",new BufferAttribute(to,3).copyVector3sArray(eo.vertices)),eo.normals.length>0){var ro=new Float32Array(eo.normals.length*3);this.setAttribute("normal",new BufferAttribute(ro,3).copyVector3sArray(eo.normals))}if(eo.colors.length>0){var no=new Float32Array(eo.colors.length*3);this.setAttribute("color",new BufferAttribute(no,3).copyColorsArray(eo.colors))}if(eo.uvs.length>0){var io=new Float32Array(eo.uvs.length*2);this.setAttribute("uv",new BufferAttribute(io,2).copyVector2sArray(eo.uvs))}if(eo.uvs2.length>0){var oo=new Float32Array(eo.uvs2.length*2);this.setAttribute("uv2",new BufferAttribute(oo,2).copyVector2sArray(eo.uvs2))}this.groups=eo.groups;for(var ao in eo.morphTargets){for(var so=[],uo=eo.morphTargets[ao],lo=0,co=uo.length;lo<co;lo++){var fo=uo[lo],mo=new Float32BufferAttribute(fo.data.length*3,3);mo.name=fo.name,so.push(mo.copyVector3sArray(fo.data))}this.morphAttributes[ao]=so}if(eo.skinIndices.length>0){var go=new Float32BufferAttribute(eo.skinIndices.length*4,4);this.setAttribute("skinIndex",go.copyVector4sArray(eo.skinIndices))}if(eo.skinWeights.length>0){var yo=new Float32BufferAttribute(eo.skinWeights.length*4,4);this.setAttribute("skinWeight",yo.copyVector4sArray(eo.skinWeights))}return eo.boundingSphere!==null&&(this.boundingSphere=eo.boundingSphere.clone()),eo.boundingBox!==null&&(this.boundingBox=eo.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var eo=this.attributes.position,to=this.morphAttributes.position;if(eo!==void 0){if(this.boundingBox.setFromBufferAttribute(eo),to)for(var ro=0,no=to.length;ro<no;ro++){var io=to[ro];_box$2.setFromBufferAttribute(io),this.morphTargetsRelative?(_vector$4.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$4),_vector$4.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$4)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var eo=this.attributes.position,to=this.morphAttributes.position;if(eo){var ro=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(eo),to)for(var no=0,io=to.length;no<io;no++){var oo=to[no];_boxMorphTargets.setFromBufferAttribute(oo),this.morphTargetsRelative?(_vector$4.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$4),_vector$4.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$4)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(ro);for(var ao=0,no=0,io=eo.count;no<io;no++)_vector$4.fromBufferAttribute(eo,no),ao=Math.max(ao,ro.distanceToSquared(_vector$4));if(to)for(var no=0,io=to.length;no<io;no++)for(var oo=to[no],so=this.morphTargetsRelative,uo=0,lo=oo.count;uo<lo;uo++)_vector$4.fromBufferAttribute(oo,uo),so&&(_offset.fromBufferAttribute(eo,uo),_vector$4.add(_offset)),ao=Math.max(ao,ro.distanceToSquared(_vector$4));this.boundingSphere.radius=Math.sqrt(ao),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var eo=this.index,to=this.attributes;if(to.position){var ro=to.position.array;if(to.normal===void 0)this.setAttribute("normal",new BufferAttribute(new Float32Array(ro.length),3));else for(var no=to.normal.array,io=0,oo=no.length;io<oo;io++)no[io]=0;var ao=to.normal.array,so,uo,lo,co=new Vector3,fo=new Vector3,mo=new Vector3,go=new Vector3,yo=new Vector3;if(eo)for(var vo=eo.array,io=0,oo=eo.count;io<oo;io+=3)so=vo[io+0]*3,uo=vo[io+1]*3,lo=vo[io+2]*3,co.fromArray(ro,so),fo.fromArray(ro,uo),mo.fromArray(ro,lo),go.subVectors(mo,fo),yo.subVectors(co,fo),go.cross(yo),ao[so]+=go.x,ao[so+1]+=go.y,ao[so+2]+=go.z,ao[uo]+=go.x,ao[uo+1]+=go.y,ao[uo+2]+=go.z,ao[lo]+=go.x,ao[lo+1]+=go.y,ao[lo+2]+=go.z;else for(var io=0,oo=ro.length;io<oo;io+=9)co.fromArray(ro,io),fo.fromArray(ro,io+3),mo.fromArray(ro,io+6),go.subVectors(mo,fo),yo.subVectors(co,fo),go.cross(yo),ao[io]=go.x,ao[io+1]=go.y,ao[io+2]=go.z,ao[io+3]=go.x,ao[io+4]=go.y,ao[io+5]=go.z,ao[io+6]=go.x,ao[io+7]=go.y,ao[io+8]=go.z;this.normalizeNormals(),to.normal.needsUpdate=!0}},merge:function(eo,to){if(!(eo&&eo.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",eo);return}to===void 0&&(to=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var ro=this.attributes;for(var no in ro)if(eo.attributes[no]!==void 0)for(var io=ro[no],oo=io.array,ao=eo.attributes[no],so=ao.array,uo=ao.itemSize*to,lo=Math.min(so.length,oo.length-uo),co=0,fo=uo;co<lo;co++,fo++)oo[fo]=so[co];return this},normalizeNormals:function(){for(var eo=this.attributes.normal,to=0,ro=eo.count;to<ro;to++)_vector$4.x=eo.getX(to),_vector$4.y=eo.getY(to),_vector$4.z=eo.getZ(to),_vector$4.normalize(),eo.setXYZ(to,_vector$4.x,_vector$4.y,_vector$4.z)},toNonIndexed:function(){function eo(vo,Ao){for(var ho=vo.array,po=vo.itemSize,Mo=vo.normalized,xo=new ho.constructor(Ao.length*po),wo=0,bo=0,_o=0,To=Ao.length;_o<To;_o++){wo=Ao[_o]*po;for(var No=0;No<po;No++)xo[bo++]=ho[wo++]}return new BufferAttribute(xo,po,Mo)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var to=new BufferGeometry,ro=this.index.array,no=this.attributes;for(var io in no){var oo=no[io],ao=eo(oo,ro);to.setAttribute(io,ao)}var so=this.morphAttributes;for(io in so){for(var uo=[],lo=so[io],co=0,fo=lo.length;co<fo;co++){var oo=lo[co],ao=eo(oo,ro);uo.push(ao)}to.morphAttributes[io]=uo}to.morphTargetsRelative=this.morphTargetsRelative;for(var mo=this.groups,co=0,go=mo.length;co<go;co++){var yo=mo[co];to.addGroup(yo.start,yo.count,yo.materialIndex)}return to},toJSON:function(){var eo={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(eo.uuid=this.uuid,eo.type=this.type,this.name!==""&&(eo.name=this.name),Object.keys(this.userData).length>0&&(eo.userData=this.userData),this.parameters!==void 0){var to=this.parameters;for(var ro in to)to[ro]!==void 0&&(eo[ro]=to[ro]);return eo}eo.data={attributes:{}};var no=this.index;no!==null&&(eo.data.index={type:no.array.constructor.name,array:Array.prototype.slice.call(no.array)});var io=this.attributes;for(var ro in io){var oo=io[ro],ao=oo.toJSON();oo.name!==""&&(ao.name=oo.name),eo.data.attributes[ro]=ao}var so={},uo=!1;for(var ro in this.morphAttributes){for(var lo=this.morphAttributes[ro],co=[],fo=0,mo=lo.length;fo<mo;fo++){var oo=lo[fo],ao=oo.toJSON();oo.name!==""&&(ao.name=oo.name),co.push(ao)}co.length>0&&(so[ro]=co,uo=!0)}uo&&(eo.data.morphAttributes=so,eo.data.morphTargetsRelative=this.morphTargetsRelative);var go=this.groups;go.length>0&&(eo.data.groups=JSON.parse(JSON.stringify(go)));var yo=this.boundingSphere;return yo!==null&&(eo.data.boundingSphere={center:yo.center.toArray(),radius:yo.radius}),eo},clone:function(){return new BufferGeometry().copy(this)},copy:function(eo){var to,ro,no;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=eo.name;var io=eo.index;io!==null&&this.setIndex(io.clone());var oo=eo.attributes;for(to in oo){var ao=oo[to];this.setAttribute(to,ao.clone())}var so=eo.morphAttributes;for(to in so){var uo=[],lo=so[to];for(ro=0,no=lo.length;ro<no;ro++)uo.push(lo[ro].clone());this.morphAttributes[to]=uo}this.morphTargetsRelative=eo.morphTargetsRelative;var co=eo.groups;for(ro=0,no=co.length;ro<no;ro++){var fo=co[ro];this.addGroup(fo.start,fo.count,fo.materialIndex)}var mo=eo.boundingBox;mo!==null&&(this.boundingBox=mo.clone());var go=eo.boundingSphere;return go!==null&&(this.boundingSphere=go.clone()),this.drawRange.start=eo.drawRange.start,this.drawRange.count=eo.drawRange.count,this.userData=eo.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_tempA=new Vector3,_tempB=new Vector3,_tempC=new Vector3,_morphA=new Vector3,_morphB=new Vector3,_morphC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;function Mesh(eo,to){Object3D.call(this),this.type="Mesh",this.geometry=eo!==void 0?eo:new BufferGeometry,this.material=to!==void 0?to:new MeshBasicMaterial,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:function(eo){return Object3D.prototype.copy.call(this,eo),eo.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=eo.morphTargetInfluences.slice()),eo.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},eo.morphTargetDictionary)),this},updateMorphTargets:function(){var eo=this.geometry,to,ro,no;if(eo.isBufferGeometry){var io=eo.morphAttributes,oo=Object.keys(io);if(oo.length>0){var ao=io[oo[0]];if(ao!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},to=0,ro=ao.length;to<ro;to++)no=ao[to].name||String(to),this.morphTargetInfluences.push(0),this.morphTargetDictionary[no]=to}}else{var so=eo.morphTargets;so!==void 0&&so.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(eo,to){var ro=this.geometry,no=this.material,io=this.matrixWorld;if(no!==void 0&&(ro.boundingSphere===null&&ro.computeBoundingSphere(),_sphere.copy(ro.boundingSphere),_sphere.applyMatrix4(io),eo.ray.intersectsSphere(_sphere)!==!1&&(_inverseMatrix.getInverse(io),_ray.copy(eo.ray).applyMatrix4(_inverseMatrix),!(ro.boundingBox!==null&&_ray.intersectsBox(ro.boundingBox)===!1)))){var oo;if(ro.isBufferGeometry){var ao,so,uo,lo=ro.index,co=ro.attributes.position,fo=ro.morphAttributes.position,mo=ro.morphTargetsRelative,go=ro.attributes.uv,yo=ro.attributes.uv2,vo=ro.groups,Ao=ro.drawRange,ho,po,Mo,xo,wo,bo,_o,To;if(lo!==null)if(Array.isArray(no))for(ho=0,Mo=vo.length;ho<Mo;ho++)for(wo=vo[ho],bo=no[wo.materialIndex],_o=Math.max(wo.start,Ao.start),To=Math.min(wo.start+wo.count,Ao.start+Ao.count),po=_o,xo=To;po<xo;po+=3)ao=lo.getX(po),so=lo.getX(po+1),uo=lo.getX(po+2),oo=checkBufferGeometryIntersection(this,bo,eo,_ray,co,fo,mo,go,yo,ao,so,uo),oo&&(oo.faceIndex=Math.floor(po/3),oo.face.materialIndex=wo.materialIndex,to.push(oo));else for(_o=Math.max(0,Ao.start),To=Math.min(lo.count,Ao.start+Ao.count),ho=_o,Mo=To;ho<Mo;ho+=3)ao=lo.getX(ho),so=lo.getX(ho+1),uo=lo.getX(ho+2),oo=checkBufferGeometryIntersection(this,no,eo,_ray,co,fo,mo,go,yo,ao,so,uo),oo&&(oo.faceIndex=Math.floor(ho/3),to.push(oo));else if(co!==void 0)if(Array.isArray(no))for(ho=0,Mo=vo.length;ho<Mo;ho++)for(wo=vo[ho],bo=no[wo.materialIndex],_o=Math.max(wo.start,Ao.start),To=Math.min(wo.start+wo.count,Ao.start+Ao.count),po=_o,xo=To;po<xo;po+=3)ao=po,so=po+1,uo=po+2,oo=checkBufferGeometryIntersection(this,bo,eo,_ray,co,fo,mo,go,yo,ao,so,uo),oo&&(oo.faceIndex=Math.floor(po/3),oo.face.materialIndex=wo.materialIndex,to.push(oo));else for(_o=Math.max(0,Ao.start),To=Math.min(co.count,Ao.start+Ao.count),ho=_o,Mo=To;ho<Mo;ho+=3)ao=ho,so=ho+1,uo=ho+2,oo=checkBufferGeometryIntersection(this,no,eo,_ray,co,fo,mo,go,yo,ao,so,uo),oo&&(oo.faceIndex=Math.floor(ho/3),to.push(oo))}else if(ro.isGeometry){var No,Po,Co,Do=Array.isArray(no),zo=ro.vertices,Ro=ro.faces,Lo,$o=ro.faceVertexUvs[0];$o.length>0&&(Lo=$o);for(var jo=0,Wo=Ro.length;jo<Wo;jo++){var Ko=Ro[jo],Jo=Do?no[Ko.materialIndex]:no;if(Jo!==void 0&&(No=zo[Ko.a],Po=zo[Ko.b],Co=zo[Ko.c],oo=checkIntersection(this,Jo,eo,_ray,No,Po,Co,_intersectionPoint),oo)){if(Lo&&Lo[jo]){var Go=Lo[jo];_uvA.copy(Go[0]),_uvB.copy(Go[1]),_uvC.copy(Go[2]),oo.uv=Triangle.getUV(_intersectionPoint,No,Po,Co,_uvA,_uvB,_uvC,new Vector2)}oo.face=Ko,oo.faceIndex=jo,to.push(oo)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function checkIntersection(eo,to,ro,no,io,oo,ao,so){var uo;if(to.side===BackSide?uo=no.intersectTriangle(ao,oo,io,!0,so):uo=no.intersectTriangle(io,oo,ao,to.side!==DoubleSide,so),uo===null)return null;_intersectionPointWorld.copy(so),_intersectionPointWorld.applyMatrix4(eo.matrixWorld);var lo=ro.ray.origin.distanceTo(_intersectionPointWorld);return lo<ro.near||lo>ro.far?null:{distance:lo,point:_intersectionPointWorld.clone(),object:eo}}function checkBufferGeometryIntersection(eo,to,ro,no,io,oo,ao,so,uo,lo,co,fo){_vA.fromBufferAttribute(io,lo),_vB.fromBufferAttribute(io,co),_vC.fromBufferAttribute(io,fo);var mo=eo.morphTargetInfluences;if(to.morphTargets&&oo&&mo){_morphA.set(0,0,0),_morphB.set(0,0,0),_morphC.set(0,0,0);for(var go=0,yo=oo.length;go<yo;go++){var vo=mo[go],Ao=oo[go];vo!==0&&(_tempA.fromBufferAttribute(Ao,lo),_tempB.fromBufferAttribute(Ao,co),_tempC.fromBufferAttribute(Ao,fo),ao?(_morphA.addScaledVector(_tempA,vo),_morphB.addScaledVector(_tempB,vo),_morphC.addScaledVector(_tempC,vo)):(_morphA.addScaledVector(_tempA.sub(_vA),vo),_morphB.addScaledVector(_tempB.sub(_vB),vo),_morphC.addScaledVector(_tempC.sub(_vC),vo)))}_vA.add(_morphA),_vB.add(_morphB),_vC.add(_morphC)}eo.isSkinnedMesh&&(eo.boneTransform(lo,_vA),eo.boneTransform(co,_vB),eo.boneTransform(fo,_vC));var ho=checkIntersection(eo,to,ro,no,_vA,_vB,_vC,_intersectionPoint);if(ho){so&&(_uvA.fromBufferAttribute(so,lo),_uvB.fromBufferAttribute(so,co),_uvC.fromBufferAttribute(so,fo),ho.uv=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),uo&&(_uvA.fromBufferAttribute(uo,lo),_uvB.fromBufferAttribute(uo,co),_uvC.fromBufferAttribute(uo,fo),ho.uv2=Triangle.getUV(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2));var po=new Face3(lo,co,fo);Triangle.getNormal(_vA,_vB,_vC,po.normal),ho.face=po}return ho}var _geometryId=0,_m1$3=new Matrix4,_obj$1=new Object3D,_offset$1=new Vector3;function Geometry(){Object.defineProperty(this,"id",{value:_geometryId+=2}),this.uuid=MathUtils.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Geometry.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:Geometry,isGeometry:!0,applyMatrix4:function(eo){for(var to=new Matrix3().getNormalMatrix(eo),ro=0,no=this.vertices.length;ro<no;ro++){var io=this.vertices[ro];io.applyMatrix4(eo)}for(var ro=0,no=this.faces.length;ro<no;ro++){var oo=this.faces[ro];oo.normal.applyMatrix3(to).normalize();for(var ao=0,so=oo.vertexNormals.length;ao<so;ao++)oo.vertexNormals[ao].applyMatrix3(to).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(eo){return _m1$3.makeRotationX(eo),this.applyMatrix4(_m1$3),this},rotateY:function(eo){return _m1$3.makeRotationY(eo),this.applyMatrix4(_m1$3),this},rotateZ:function(eo){return _m1$3.makeRotationZ(eo),this.applyMatrix4(_m1$3),this},translate:function(eo,to,ro){return _m1$3.makeTranslation(eo,to,ro),this.applyMatrix4(_m1$3),this},scale:function(eo,to,ro){return _m1$3.makeScale(eo,to,ro),this.applyMatrix4(_m1$3),this},lookAt:function(eo){return _obj$1.lookAt(eo),_obj$1.updateMatrix(),this.applyMatrix4(_obj$1.matrix),this},fromBufferGeometry:function(eo){var to=this,ro=eo.index!==null?eo.index.array:void 0,no=eo.attributes;if(no.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var io=no.position.array,oo=no.normal!==void 0?no.normal.array:void 0,ao=no.color!==void 0?no.color.array:void 0,so=no.uv!==void 0?no.uv.array:void 0,uo=no.uv2!==void 0?no.uv2.array:void 0;uo!==void 0&&(this.faceVertexUvs[1]=[]);for(var lo=0;lo<io.length;lo+=3)to.vertices.push(new Vector3().fromArray(io,lo)),ao!==void 0&&to.colors.push(new Color().fromArray(ao,lo));function co(ho,po,Mo,xo){var wo=ao===void 0?[]:[to.colors[ho].clone(),to.colors[po].clone(),to.colors[Mo].clone()],bo=oo===void 0?[]:[new Vector3().fromArray(oo,ho*3),new Vector3().fromArray(oo,po*3),new Vector3().fromArray(oo,Mo*3)],_o=new Face3(ho,po,Mo,bo,wo,xo);to.faces.push(_o),so!==void 0&&to.faceVertexUvs[0].push([new Vector2().fromArray(so,ho*2),new Vector2().fromArray(so,po*2),new Vector2().fromArray(so,Mo*2)]),uo!==void 0&&to.faceVertexUvs[1].push([new Vector2().fromArray(uo,ho*2),new Vector2().fromArray(uo,po*2),new Vector2().fromArray(uo,Mo*2)])}var fo=eo.groups;if(fo.length>0)for(var lo=0;lo<fo.length;lo++)for(var mo=fo[lo],go=mo.start,yo=mo.count,vo=go,Ao=go+yo;vo<Ao;vo+=3)ro!==void 0?co(ro[vo],ro[vo+1],ro[vo+2],mo.materialIndex):co(vo,vo+1,vo+2,mo.materialIndex);else if(ro!==void 0)for(var lo=0;lo<ro.length;lo+=3)co(ro[lo],ro[lo+1],ro[lo+2]);else for(var lo=0;lo<io.length/3;lo+=3)co(lo,lo+1,lo+2);return this.computeFaceNormals(),eo.boundingBox!==null&&(this.boundingBox=eo.boundingBox.clone()),eo.boundingSphere!==null&&(this.boundingSphere=eo.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset$1).negate(),this.translate(_offset$1.x,_offset$1.y,_offset$1.z),this},normalize:function(){this.computeBoundingSphere();var eo=this.boundingSphere.center,to=this.boundingSphere.radius,ro=to===0?1:1/to,no=new Matrix4;return no.set(ro,0,0,-ro*eo.x,0,ro,0,-ro*eo.y,0,0,ro,-ro*eo.z,0,0,0,1),this.applyMatrix4(no),this},computeFaceNormals:function(){for(var eo=new Vector3,to=new Vector3,ro=0,no=this.faces.length;ro<no;ro++){var io=this.faces[ro],oo=this.vertices[io.a],ao=this.vertices[io.b],so=this.vertices[io.c];eo.subVectors(so,ao),to.subVectors(oo,ao),eo.cross(to),eo.normalize(),io.normal.copy(eo)}},computeVertexNormals:function(eo){eo===void 0&&(eo=!0);var to,ro,no,io,oo,ao;for(ao=new Array(this.vertices.length),to=0,ro=this.vertices.length;to<ro;to++)ao[to]=new Vector3;if(eo){var so,uo,lo,co=new Vector3,fo=new Vector3;for(no=0,io=this.faces.length;no<io;no++)oo=this.faces[no],so=this.vertices[oo.a],uo=this.vertices[oo.b],lo=this.vertices[oo.c],co.subVectors(lo,uo),fo.subVectors(so,uo),co.cross(fo),ao[oo.a].add(co),ao[oo.b].add(co),ao[oo.c].add(co)}else for(this.computeFaceNormals(),no=0,io=this.faces.length;no<io;no++)oo=this.faces[no],ao[oo.a].add(oo.normal),ao[oo.b].add(oo.normal),ao[oo.c].add(oo.normal);for(to=0,ro=this.vertices.length;to<ro;to++)ao[to].normalize();for(no=0,io=this.faces.length;no<io;no++){oo=this.faces[no];var mo=oo.vertexNormals;mo.length===3?(mo[0].copy(ao[oo.a]),mo[1].copy(ao[oo.b]),mo[2].copy(ao[oo.c])):(mo[0]=ao[oo.a].clone(),mo[1]=ao[oo.b].clone(),mo[2]=ao[oo.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var eo,to,ro;for(this.computeFaceNormals(),eo=0,to=this.faces.length;eo<to;eo++){ro=this.faces[eo];var no=ro.vertexNormals;no.length===3?(no[0].copy(ro.normal),no[1].copy(ro.normal),no[2].copy(ro.normal)):(no[0]=ro.normal.clone(),no[1]=ro.normal.clone(),no[2]=ro.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var eo,to,ro,no,io;for(ro=0,no=this.faces.length;ro<no;ro++)for(io=this.faces[ro],io.__originalFaceNormal?io.__originalFaceNormal.copy(io.normal):io.__originalFaceNormal=io.normal.clone(),io.__originalVertexNormals||(io.__originalVertexNormals=[]),eo=0,to=io.vertexNormals.length;eo<to;eo++)io.__originalVertexNormals[eo]?io.__originalVertexNormals[eo].copy(io.vertexNormals[eo]):io.__originalVertexNormals[eo]=io.vertexNormals[eo].clone();var oo=new Geometry;for(oo.faces=this.faces,eo=0,to=this.morphTargets.length;eo<to;eo++){if(!this.morphNormals[eo]){this.morphNormals[eo]={},this.morphNormals[eo].faceNormals=[],this.morphNormals[eo].vertexNormals=[];var ao=this.morphNormals[eo].faceNormals,so=this.morphNormals[eo].vertexNormals,lo,co;for(ro=0,no=this.faces.length;ro<no;ro++)lo=new Vector3,co={a:new Vector3,b:new Vector3,c:new Vector3},ao.push(lo),so.push(co)}var uo=this.morphNormals[eo];oo.vertices=this.morphTargets[eo].vertices,oo.computeFaceNormals(),oo.computeVertexNormals();var lo,co;for(ro=0,no=this.faces.length;ro<no;ro++)io=this.faces[ro],lo=uo.faceNormals[ro],co=uo.vertexNormals[ro],lo.copy(io.normal),co.a.copy(io.vertexNormals[0]),co.b.copy(io.vertexNormals[1]),co.c.copy(io.vertexNormals[2])}for(ro=0,no=this.faces.length;ro<no;ro++)io=this.faces[ro],io.normal=io.__originalFaceNormal,io.vertexNormals=io.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(eo,to,ro){if(!(eo&&eo.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",eo);return}var no,io=this.vertices.length,oo=this.vertices,ao=eo.vertices,so=this.faces,uo=eo.faces,lo=this.colors,co=eo.colors;ro===void 0&&(ro=0),to!==void 0&&(no=new Matrix3().getNormalMatrix(to));for(var fo=0,mo=ao.length;fo<mo;fo++){var go=ao[fo],yo=go.clone();to!==void 0&&yo.applyMatrix4(to),oo.push(yo)}for(var fo=0,mo=co.length;fo<mo;fo++)lo.push(co[fo].clone());for(fo=0,mo=uo.length;fo<mo;fo++){var vo=uo[fo],Ao,ho,po,Mo=vo.vertexNormals,xo=vo.vertexColors;Ao=new Face3(vo.a+io,vo.b+io,vo.c+io),Ao.normal.copy(vo.normal),no!==void 0&&Ao.normal.applyMatrix3(no).normalize();for(var wo=0,bo=Mo.length;wo<bo;wo++)ho=Mo[wo].clone(),no!==void 0&&ho.applyMatrix3(no).normalize(),Ao.vertexNormals.push(ho);Ao.color.copy(vo.color);for(var wo=0,bo=xo.length;wo<bo;wo++)po=xo[wo],Ao.vertexColors.push(po.clone());Ao.materialIndex=vo.materialIndex+ro,so.push(Ao)}for(var fo=0,mo=eo.faceVertexUvs.length;fo<mo;fo++){var _o=eo.faceVertexUvs[fo];this.faceVertexUvs[fo]===void 0&&(this.faceVertexUvs[fo]=[]);for(var wo=0,bo=_o.length;wo<bo;wo++){for(var To=_o[wo],No=[],Po=0,Co=To.length;Po<Co;Po++)No.push(To[Po].clone());this.faceVertexUvs[fo].push(No)}}},mergeMesh:function(eo){if(!(eo&&eo.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",eo);return}eo.matrixAutoUpdate&&eo.updateMatrix(),this.merge(eo.geometry,eo.matrix)},mergeVertices:function(){var eo={},to=[],ro=[],no,io,oo=4,ao=Math.pow(10,oo),so,uo,lo,co,fo,mo;for(so=0,uo=this.vertices.length;so<uo;so++)no=this.vertices[so],io=Math.round(no.x*ao)+"_"+Math.round(no.y*ao)+"_"+Math.round(no.z*ao),eo[io]===void 0?(eo[io]=so,to.push(this.vertices[so]),ro[so]=to.length-1):ro[so]=ro[eo[io]];var go=[];for(so=0,uo=this.faces.length;so<uo;so++){lo=this.faces[so],lo.a=ro[lo.a],lo.b=ro[lo.b],lo.c=ro[lo.c],co=[lo.a,lo.b,lo.c];for(var yo=0;yo<3;yo++)if(co[yo]===co[(yo+1)%3]){go.push(so);break}}for(so=go.length-1;so>=0;so--){var vo=go[so];for(this.faces.splice(vo,1),fo=0,mo=this.faceVertexUvs.length;fo<mo;fo++)this.faceVertexUvs[fo].splice(vo,1)}var Ao=this.vertices.length-to.length;return this.vertices=to,Ao},setFromPoints:function(eo){this.vertices=[];for(var to=0,ro=eo.length;to<ro;to++){var no=eo[to];this.vertices.push(new Vector3(no.x,no.y,no.z||0))}return this},sortFacesByMaterialIndex:function(){for(var eo=this.faces,to=eo.length,ro=0;ro<to;ro++)eo[ro]._id=ro;function no(lo,co){return lo.materialIndex-co.materialIndex}eo.sort(no);var io=this.faceVertexUvs[0],oo=this.faceVertexUvs[1],ao,so;io&&io.length===to&&(ao=[]),oo&&oo.length===to&&(so=[]);for(var ro=0;ro<to;ro++){var uo=eo[ro]._id;ao&&ao.push(io[uo]),so&&so.push(oo[uo])}ao&&(this.faceVertexUvs[0]=ao),so&&(this.faceVertexUvs[1]=so)},toJSON:function(){var eo={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(eo.uuid=this.uuid,eo.type=this.type,this.name!==""&&(eo.name=this.name),this.parameters!==void 0){var to=this.parameters;for(var ro in to)to[ro]!==void 0&&(eo[ro]=to[ro]);return eo}for(var no=[],io=0;io<this.vertices.length;io++){var oo=this.vertices[io];no.push(oo.x,oo.y,oo.z)}for(var ao=[],so=[],uo={},lo=[],co={},fo=[],mo={},io=0;io<this.faces.length;io++){var go=this.faces[io],yo=!0,vo=!1,Ao=this.faceVertexUvs[0][io]!==void 0,ho=go.normal.length()>0,po=go.vertexNormals.length>0,Mo=go.color.r!==1||go.color.g!==1||go.color.b!==1,xo=go.vertexColors.length>0,wo=0;if(wo=No(wo,0,0),wo=No(wo,1,yo),wo=No(wo,2,vo),wo=No(wo,3,Ao),wo=No(wo,4,ho),wo=No(wo,5,po),wo=No(wo,6,Mo),wo=No(wo,7,xo),ao.push(wo),ao.push(go.a,go.b,go.c),ao.push(go.materialIndex),Ao){var bo=this.faceVertexUvs[0][io];ao.push(Do(bo[0]),Do(bo[1]),Do(bo[2]))}if(ho&&ao.push(Po(go.normal)),po){var _o=go.vertexNormals;ao.push(Po(_o[0]),Po(_o[1]),Po(_o[2]))}if(Mo&&ao.push(Co(go.color)),xo){var To=go.vertexColors;ao.push(Co(To[0]),Co(To[1]),Co(To[2]))}}function No(zo,Ro,Lo){return Lo?zo|1<<Ro:zo&~(1<<Ro)}function Po(zo){var Ro=zo.x.toString()+zo.y.toString()+zo.z.toString();return uo[Ro]!==void 0||(uo[Ro]=so.length/3,so.push(zo.x,zo.y,zo.z)),uo[Ro]}function Co(zo){var Ro=zo.r.toString()+zo.g.toString()+zo.b.toString();return co[Ro]!==void 0||(co[Ro]=lo.length,lo.push(zo.getHex())),co[Ro]}function Do(zo){var Ro=zo.x.toString()+zo.y.toString();return mo[Ro]!==void 0||(mo[Ro]=fo.length/2,fo.push(zo.x,zo.y)),mo[Ro]}return eo.data={},eo.data.vertices=no,eo.data.normals=so,lo.length>0&&(eo.data.colors=lo),fo.length>0&&(eo.data.uvs=[fo]),eo.data.faces=ao,eo},clone:function(){return new Geometry().copy(this)},copy:function(eo){var to,ro,no,io,oo,ao;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=eo.name;var so=eo.vertices;for(to=0,ro=so.length;to<ro;to++)this.vertices.push(so[to].clone());var uo=eo.colors;for(to=0,ro=uo.length;to<ro;to++)this.colors.push(uo[to].clone());var lo=eo.faces;for(to=0,ro=lo.length;to<ro;to++)this.faces.push(lo[to].clone());for(to=0,ro=eo.faceVertexUvs.length;to<ro;to++){var co=eo.faceVertexUvs[to];for(this.faceVertexUvs[to]===void 0&&(this.faceVertexUvs[to]=[]),no=0,io=co.length;no<io;no++){var fo=co[no],mo=[];for(oo=0,ao=fo.length;oo<ao;oo++){var go=fo[oo];mo.push(go.clone())}this.faceVertexUvs[to].push(mo)}}var yo=eo.morphTargets;for(to=0,ro=yo.length;to<ro;to++){var vo={};if(vo.name=yo[to].name,yo[to].vertices!==void 0)for(vo.vertices=[],no=0,io=yo[to].vertices.length;no<io;no++)vo.vertices.push(yo[to].vertices[no].clone());if(yo[to].normals!==void 0)for(vo.normals=[],no=0,io=yo[to].normals.length;no<io;no++)vo.normals.push(yo[to].normals[no].clone());this.morphTargets.push(vo)}var Ao=eo.morphNormals;for(to=0,ro=Ao.length;to<ro;to++){var ho={};if(Ao[to].vertexNormals!==void 0)for(ho.vertexNormals=[],no=0,io=Ao[to].vertexNormals.length;no<io;no++){var po=Ao[to].vertexNormals[no],Mo={};Mo.a=po.a.clone(),Mo.b=po.b.clone(),Mo.c=po.c.clone(),ho.vertexNormals.push(Mo)}if(Ao[to].faceNormals!==void 0)for(ho.faceNormals=[],no=0,io=Ao[to].faceNormals.length;no<io;no++)ho.faceNormals.push(Ao[to].faceNormals[no].clone());this.morphNormals.push(ho)}var xo=eo.skinWeights;for(to=0,ro=xo.length;to<ro;to++)this.skinWeights.push(xo[to].clone());var wo=eo.skinIndices;for(to=0,ro=wo.length;to<ro;to++)this.skinIndices.push(wo[to].clone());var bo=eo.lineDistances;for(to=0,ro=bo.length;to<ro;to++)this.lineDistances.push(bo[to]);var _o=eo.boundingBox;_o!==null&&(this.boundingBox=_o.clone());var To=eo.boundingSphere;return To!==null&&(this.boundingSphere=To.clone()),this.elementsNeedUpdate=eo.elementsNeedUpdate,this.verticesNeedUpdate=eo.verticesNeedUpdate,this.uvsNeedUpdate=eo.uvsNeedUpdate,this.normalsNeedUpdate=eo.normalsNeedUpdate,this.colorsNeedUpdate=eo.colorsNeedUpdate,this.lineDistancesNeedUpdate=eo.lineDistancesNeedUpdate,this.groupsNeedUpdate=eo.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class BoxGeometry extends Geometry{constructor(to,ro,no,io,oo,ao){super();this.type="BoxGeometry",this.parameters={width:to,height:ro,depth:no,widthSegments:io,heightSegments:oo,depthSegments:ao},this.fromBufferGeometry(new BoxBufferGeometry(to,ro,no,io,oo,ao)),this.mergeVertices()}}class BoxBufferGeometry extends BufferGeometry{constructor(to,ro,no,io,oo,ao){super();this.type="BoxBufferGeometry",this.parameters={width:to,height:ro,depth:no,widthSegments:io,heightSegments:oo,depthSegments:ao};const so=this;to=to||1,ro=ro||1,no=no||1,io=Math.floor(io)||1,oo=Math.floor(oo)||1,ao=Math.floor(ao)||1;const uo=[],lo=[],co=[],fo=[];let mo=0,go=0;yo("z","y","x",-1,-1,no,ro,to,ao,oo,0),yo("z","y","x",1,-1,no,ro,-to,ao,oo,1),yo("x","z","y",1,1,to,no,ro,io,ao,2),yo("x","z","y",1,-1,to,no,-ro,io,ao,3),yo("x","y","z",1,-1,to,ro,no,io,oo,4),yo("x","y","z",-1,-1,to,ro,-no,io,oo,5),this.setIndex(uo),this.setAttribute("position",new Float32BufferAttribute(lo,3)),this.setAttribute("normal",new Float32BufferAttribute(co,3)),this.setAttribute("uv",new Float32BufferAttribute(fo,2));function yo(vo,Ao,ho,po,Mo,xo,wo,bo,_o,To,No){const Po=xo/_o,Co=wo/To,Do=xo/2,zo=wo/2,Ro=bo/2,Lo=_o+1,$o=To+1;let jo=0,Wo=0;const Ko=new Vector3;for(let Jo=0;Jo<$o;Jo++){const Go=Jo*Co-zo;for(let Xo=0;Xo<Lo;Xo++){const va=Xo*Po-Do;Ko[vo]=va*po,Ko[Ao]=Go*Mo,Ko[ho]=Ro,lo.push(Ko.x,Ko.y,Ko.z),Ko[vo]=0,Ko[Ao]=0,Ko[ho]=bo>0?1:-1,co.push(Ko.x,Ko.y,Ko.z),fo.push(Xo/_o),fo.push(1-Jo/To),jo+=1}}for(let Jo=0;Jo<To;Jo++)for(let Go=0;Go<_o;Go++){const Xo=mo+Go+Lo*Jo,va=mo+Go+Lo*(Jo+1),tu=mo+(Go+1)+Lo*(Jo+1),Zs=mo+(Go+1)+Lo*Jo;uo.push(Xo,va,Zs),uo.push(va,tu,Zs),Wo+=6}so.addGroup(go,Wo,No),go+=Wo,mo+=jo}}}function cloneUniforms(eo){var to={};for(var ro in eo){to[ro]={};for(var no in eo[ro]){var io=eo[ro][no];io&&(io.isColor||io.isMatrix3||io.isMatrix4||io.isVector2||io.isVector3||io.isVector4||io.isTexture)?to[ro][no]=io.clone():Array.isArray(io)?to[ro][no]=io.slice():to[ro][no]=io}}return to}function mergeUniforms(eo){for(var to={},ro=0;ro<eo.length;ro++){var no=cloneUniforms(eo[ro]);for(var io in no)to[io]=no[io]}return to}var UniformsUtils={clone:cloneUniforms,merge:mergeUniforms},default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ShaderMaterial(eo){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,eo!==void 0&&(eo.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(eo))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.fragmentShader=eo.fragmentShader,this.vertexShader=eo.vertexShader,this.uniforms=cloneUniforms(eo.uniforms),this.defines=Object.assign({},eo.defines),this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.lights=eo.lights,this.clipping=eo.clipping,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this.extensions=Object.assign({},eo.extensions),this};ShaderMaterial.prototype.toJSON=function(eo){var to=Material.prototype.toJSON.call(this,eo);to.uniforms={};for(var ro in this.uniforms){var no=this.uniforms[ro],io=no.value;io&&io.isTexture?to.uniforms[ro]={type:"t",value:io.toJSON(eo).uuid}:io&&io.isColor?to.uniforms[ro]={type:"c",value:io.getHex()}:io&&io.isVector2?to.uniforms[ro]={type:"v2",value:io.toArray()}:io&&io.isVector3?to.uniforms[ro]={type:"v3",value:io.toArray()}:io&&io.isVector4?to.uniforms[ro]={type:"v4",value:io.toArray()}:io&&io.isMatrix3?to.uniforms[ro]={type:"m3",value:io.toArray()}:io&&io.isMatrix4?to.uniforms[ro]={type:"m4",value:io.toArray()}:to.uniforms[ro]={value:io}}Object.keys(this.defines).length>0&&(to.defines=this.defines),to.vertexShader=this.vertexShader,to.fragmentShader=this.fragmentShader;var oo={};for(var ao in this.extensions)this.extensions[ao]===!0&&(oo[ao]=!0);return Object.keys(oo).length>0&&(to.extensions=oo),to};function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(eo,to){return Object3D.prototype.copy.call(this,eo,to),this.matrixWorldInverse.copy(eo.matrixWorldInverse),this.projectionMatrix.copy(eo.projectionMatrix),this.projectionMatrixInverse.copy(eo.projectionMatrixInverse),this},getWorldDirection:function(eo){eo===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),eo=new Vector3),this.updateMatrixWorld(!0);var to=this.matrixWorld.elements;return eo.set(-to[8],-to[9],-to[10]).normalize()},updateMatrixWorld:function(eo){Object3D.prototype.updateMatrixWorld.call(this,eo),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(eo,to){Object3D.prototype.updateWorldMatrix.call(this,eo,to),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(eo,to,ro,no){Camera.call(this),this.type="PerspectiveCamera",this.fov=eo!==void 0?eo:50,this.zoom=1,this.near=ro!==void 0?ro:.1,this.far=no!==void 0?no:2e3,this.focus=10,this.aspect=to!==void 0?to:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(eo,to){return Camera.prototype.copy.call(this,eo,to),this.fov=eo.fov,this.zoom=eo.zoom,this.near=eo.near,this.far=eo.far,this.focus=eo.focus,this.aspect=eo.aspect,this.view=eo.view===null?null:Object.assign({},eo.view),this.filmGauge=eo.filmGauge,this.filmOffset=eo.filmOffset,this},setFocalLength:function(eo){var to=.5*this.getFilmHeight()/eo;this.fov=MathUtils.RAD2DEG*2*Math.atan(to),this.updateProjectionMatrix()},getFocalLength:function(){var eo=Math.tan(MathUtils.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/eo},getEffectiveFOV:function(){return MathUtils.RAD2DEG*2*Math.atan(Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(eo,to,ro,no,io,oo){this.aspect=eo/to,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=eo,this.view.fullHeight=to,this.view.offsetX=ro,this.view.offsetY=no,this.view.width=io,this.view.height=oo,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var eo=this.near,to=eo*Math.tan(MathUtils.DEG2RAD*.5*this.fov)/this.zoom,ro=2*to,no=this.aspect*ro,io=-.5*no,oo=this.view;if(this.view!==null&&this.view.enabled){var ao=oo.fullWidth,so=oo.fullHeight;io+=oo.offsetX*no/ao,to-=oo.offsetY*ro/so,no*=oo.width/ao,ro*=oo.height/so}var uo=this.filmOffset;uo!==0&&(io+=eo*uo/this.getFilmWidth()),this.projectionMatrix.makePerspective(io,io+no,to,to-ro,eo,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(eo){var to=Object3D.prototype.toJSON.call(this,eo);return to.object.fov=this.fov,to.object.zoom=this.zoom,to.object.near=this.near,to.object.far=this.far,to.object.focus=this.focus,to.object.aspect=this.aspect,this.view!==null&&(to.object.view=Object.assign({},this.view)),to.object.filmGauge=this.filmGauge,to.object.filmOffset=this.filmOffset,to}});var fov=90,aspect=1;function CubeCamera(eo,to,ro){if(Object3D.call(this),this.type="CubeCamera",ro.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=ro;var no=new PerspectiveCamera(fov,aspect,eo,to);no.layers=this.layers,no.up.set(0,-1,0),no.lookAt(new Vector3(1,0,0)),this.add(no);var io=new PerspectiveCamera(fov,aspect,eo,to);io.layers=this.layers,io.up.set(0,-1,0),io.lookAt(new Vector3(-1,0,0)),this.add(io);var oo=new PerspectiveCamera(fov,aspect,eo,to);oo.layers=this.layers,oo.up.set(0,0,1),oo.lookAt(new Vector3(0,1,0)),this.add(oo);var ao=new PerspectiveCamera(fov,aspect,eo,to);ao.layers=this.layers,ao.up.set(0,0,-1),ao.lookAt(new Vector3(0,-1,0)),this.add(ao);var so=new PerspectiveCamera(fov,aspect,eo,to);so.layers=this.layers,so.up.set(0,-1,0),so.lookAt(new Vector3(0,0,1)),this.add(so);var uo=new PerspectiveCamera(fov,aspect,eo,to);uo.layers=this.layers,uo.up.set(0,-1,0),uo.lookAt(new Vector3(0,0,-1)),this.add(uo),this.update=function(lo,co){this.parent===null&&this.updateMatrixWorld();var fo=lo.xr.enabled,mo=lo.getRenderTarget();lo.xr.enabled=!1;var go=ro.texture.generateMipmaps;ro.texture.generateMipmaps=!1,lo.setRenderTarget(ro,0),lo.render(co,no),lo.setRenderTarget(ro,1),lo.render(co,io),lo.setRenderTarget(ro,2),lo.render(co,oo),lo.setRenderTarget(ro,3),lo.render(co,ao),lo.setRenderTarget(ro,4),lo.render(co,so),ro.texture.generateMipmaps=go,lo.setRenderTarget(ro,5),lo.render(co,uo),lo.setRenderTarget(mo),lo.xr.enabled=fo},this.clear=function(lo,co,fo,mo){for(var go=lo.getRenderTarget(),yo=0;yo<6;yo++)lo.setRenderTarget(ro,yo),lo.clear(co,fo,mo);lo.setRenderTarget(go)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function WebGLCubeRenderTarget(eo,to,ro){Number.isInteger(to)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),to=ro),WebGLRenderTarget.call(this,eo,eo,to)}WebGLCubeRenderTarget.prototype=Object.create(WebGLRenderTarget.prototype);WebGLCubeRenderTarget.prototype.constructor=WebGLCubeRenderTarget;WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;WebGLCubeRenderTarget.prototype.fromEquirectangularTexture=function(eo,to){this.texture.type=to.type,this.texture.format=to.format,this.texture.encoding=to.encoding;var ro=new Scene,no={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},io=new ShaderMaterial({type:"CubemapFromEquirect",uniforms:cloneUniforms(no.uniforms),vertexShader:no.vertexShader,fragmentShader:no.fragmentShader,side:BackSide,blending:NoBlending});io.uniforms.tEquirect.value=to;var oo=new Mesh(new BoxBufferGeometry(5,5,5),io);ro.add(oo);var ao=new CubeCamera(1,10,this);return ao.update(eo,ro),oo.geometry.dispose(),oo.material.dispose(),this};function DataTexture(eo,to,ro,no,io,oo,ao,so,uo,lo,co,fo){Texture.call(this,null,oo,ao,so,uo,lo,no,io,co,fo),this.image={data:eo||null,width:to||1,height:ro||1},this.magFilter=uo!==void 0?uo:NearestFilter,this.minFilter=lo!==void 0?lo:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;var _sphere$1=new Sphere,_vector$5=new Vector3;function Frustum(eo,to,ro,no,io,oo){this.planes=[eo!==void 0?eo:new Plane,to!==void 0?to:new Plane,ro!==void 0?ro:new Plane,no!==void 0?no:new Plane,io!==void 0?io:new Plane,oo!==void 0?oo:new Plane]}Object.assign(Frustum.prototype,{set:function(eo,to,ro,no,io,oo){var ao=this.planes;return ao[0].copy(eo),ao[1].copy(to),ao[2].copy(ro),ao[3].copy(no),ao[4].copy(io),ao[5].copy(oo),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){for(var to=this.planes,ro=0;ro<6;ro++)to[ro].copy(eo.planes[ro]);return this},setFromProjectionMatrix:function(eo){var to=this.planes,ro=eo.elements,no=ro[0],io=ro[1],oo=ro[2],ao=ro[3],so=ro[4],uo=ro[5],lo=ro[6],co=ro[7],fo=ro[8],mo=ro[9],go=ro[10],yo=ro[11],vo=ro[12],Ao=ro[13],ho=ro[14],po=ro[15];return to[0].setComponents(ao-no,co-so,yo-fo,po-vo).normalize(),to[1].setComponents(ao+no,co+so,yo+fo,po+vo).normalize(),to[2].setComponents(ao+io,co+uo,yo+mo,po+Ao).normalize(),to[3].setComponents(ao-io,co-uo,yo-mo,po-Ao).normalize(),to[4].setComponents(ao-oo,co-lo,yo-go,po-ho).normalize(),to[5].setComponents(ao+oo,co+lo,yo+go,po+ho).normalize(),this},intersectsObject:function(eo){var to=eo.geometry;return to.boundingSphere===null&&to.computeBoundingSphere(),_sphere$1.copy(to.boundingSphere).applyMatrix4(eo.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSprite:function(eo){return _sphere$1.center.set(0,0,0),_sphere$1.radius=.7071067811865476,_sphere$1.applyMatrix4(eo.matrixWorld),this.intersectsSphere(_sphere$1)},intersectsSphere:function(eo){for(var to=this.planes,ro=eo.center,no=-eo.radius,io=0;io<6;io++){var oo=to[io].distanceToPoint(ro);if(oo<no)return!1}return!0},intersectsBox:function(eo){for(var to=this.planes,ro=0;ro<6;ro++){var no=to[ro];if(_vector$5.x=no.normal.x>0?eo.max.x:eo.min.x,_vector$5.y=no.normal.y>0?eo.max.y:eo.min.y,_vector$5.z=no.normal.z>0?eo.max.z:eo.min.z,no.distanceToPoint(_vector$5)<0)return!1}return!0},containsPoint:function(eo){for(var to=this.planes,ro=0;ro<6;ro++)if(to[ro].distanceToPoint(eo)<0)return!1;return!0}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(15658734)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}};function WebGLAnimation(){var eo=null,to=!1,ro=null;function no(io,oo){to!==!1&&(ro(io,oo),eo.requestAnimationFrame(no))}return{start:function(){to!==!0&&ro!==null&&(eo.requestAnimationFrame(no),to=!0)},stop:function(){to=!1},setAnimationLoop:function(io){ro=io},setContext:function(io){eo=io}}}function WebGLAttributes(eo,to){var ro=to.isWebGL2,no=new WeakMap;function io(lo,co){var fo=lo.array,mo=lo.usage,go=eo.createBuffer();eo.bindBuffer(co,go),eo.bufferData(co,fo,mo),lo.onUploadCallback();var yo=5126;return fo instanceof Float32Array?yo=5126:fo instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):fo instanceof Uint16Array?yo=5123:fo instanceof Int16Array?yo=5122:fo instanceof Uint32Array?yo=5125:fo instanceof Int32Array?yo=5124:fo instanceof Int8Array?yo=5120:fo instanceof Uint8Array&&(yo=5121),{buffer:go,type:yo,bytesPerElement:fo.BYTES_PER_ELEMENT,version:lo.version}}function oo(lo,co,fo){var mo=co.array,go=co.updateRange;eo.bindBuffer(fo,lo),go.count===-1?eo.bufferSubData(fo,0,mo):(ro?eo.bufferSubData(fo,go.offset*mo.BYTES_PER_ELEMENT,mo,go.offset,go.count):eo.bufferSubData(fo,go.offset*mo.BYTES_PER_ELEMENT,mo.subarray(go.offset,go.offset+go.count)),go.count=-1)}function ao(lo){return lo.isInterleavedBufferAttribute&&(lo=lo.data),no.get(lo)}function so(lo){lo.isInterleavedBufferAttribute&&(lo=lo.data);var co=no.get(lo);co&&(eo.deleteBuffer(co.buffer),no.delete(lo))}function uo(lo,co){lo.isInterleavedBufferAttribute&&(lo=lo.data);var fo=no.get(lo);fo===void 0?no.set(lo,io(lo,co)):fo.version<lo.version&&(oo(fo.buffer,lo,co),fo.version=lo.version)}return{get:ao,remove:so,update:uo}}function PlaneGeometry(eo,to,ro,no){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:eo,height:to,widthSegments:ro,heightSegments:no},this.fromBufferGeometry(new PlaneBufferGeometry(eo,to,ro,no)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(eo,to,ro,no){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:eo,height:to,widthSegments:ro,heightSegments:no},eo=eo||1,to=to||1;var io=eo/2,oo=to/2,ao=Math.floor(ro)||1,so=Math.floor(no)||1,uo=ao+1,lo=so+1,co=eo/ao,fo=to/so,mo,go,yo=[],vo=[],Ao=[],ho=[];for(go=0;go<lo;go++){var po=go*fo-oo;for(mo=0;mo<uo;mo++){var Mo=mo*co-io;vo.push(Mo,-po,0),Ao.push(0,0,1),ho.push(mo/ao),ho.push(1-go/so)}}for(go=0;go<so;go++)for(mo=0;mo<ao;mo++){var xo=mo+uo*go,wo=mo+uo*(go+1),bo=mo+1+uo*(go+1),_o=mo+1+uo*go;yo.push(xo,wo,_o),yo.push(wo,bo,_o)}this.setIndex(yo),this.setAttribute("position",new Float32BufferAttribute(vo,3)),this.setAttribute("normal",new Float32BufferAttribute(Ao,3)),this.setAttribute("uv",new Float32BufferAttribute(ho,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common$2=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
		struct PointLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common:common$2,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_frag,background_vert,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshmatcap_frag,meshmatcap_vert,meshtoon_frag,meshtoon_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert,sprite_frag,sprite_vert},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},cube:{uniforms:mergeUniforms([UniformsLib.envmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transparency:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function WebGLBackground(eo,to,ro,no){var io=new Color(0),oo=0,ao,so,uo=null,lo=0,co=null;function fo(go,yo,vo,Ao){var ho=yo.background,po=eo.xr,Mo=po.getSession&&po.getSession();if(Mo&&Mo.environmentBlendMode==="additive"&&(ho=null),ho===null?mo(io,oo):ho&&ho.isColor&&(mo(ho,1),Ao=!0),(eo.autoClear||Ao)&&eo.clear(eo.autoClearColor,eo.autoClearDepth,eo.autoClearStencil),ho&&(ho.isCubeTexture||ho.isWebGLCubeRenderTarget||ho.mapping===CubeUVReflectionMapping)){so===void 0&&(so=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({type:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.cube.uniforms),vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),so.geometry.deleteAttribute("normal"),so.geometry.deleteAttribute("uv"),so.onBeforeRender=function(wo,bo,_o){this.matrixWorld.copyPosition(_o.matrixWorld)},Object.defineProperty(so.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),ro.update(so));var xo=ho.isWebGLCubeRenderTarget?ho.texture:ho;so.material.uniforms.envMap.value=xo,so.material.uniforms.flipEnvMap.value=xo.isCubeTexture?-1:1,(uo!==ho||lo!==xo.version||co!==eo.toneMapping)&&(so.material.needsUpdate=!0,uo=ho,lo=xo.version,co=eo.toneMapping),go.unshift(so,so.geometry,so.material,0,0,null)}else ho&&ho.isTexture&&(ao===void 0&&(ao=new Mesh(new PlaneBufferGeometry(2,2),new ShaderMaterial({type:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),ao.geometry.deleteAttribute("normal"),Object.defineProperty(ao.material,"map",{get:function(){return this.uniforms.t2D.value}}),ro.update(ao)),ao.material.uniforms.t2D.value=ho,ho.matrixAutoUpdate===!0&&ho.updateMatrix(),ao.material.uniforms.uvTransform.value.copy(ho.matrix),(uo!==ho||lo!==ho.version||co!==eo.toneMapping)&&(ao.material.needsUpdate=!0,uo=ho,lo=ho.version,co=eo.toneMapping),go.unshift(ao,ao.geometry,ao.material,0,0,null))}function mo(go,yo){to.buffers.color.setClear(go.r,go.g,go.b,yo,no)}return{getClearColor:function(){return io},setClearColor:function(go,yo){io.set(go),oo=yo!==void 0?yo:1,mo(io,oo)},getClearAlpha:function(){return oo},setClearAlpha:function(go){oo=go,mo(io,oo)},render:fo}}function WebGLBufferRenderer(eo,to,ro,no){var io=no.isWebGL2,oo;function ao(lo){oo=lo}function so(lo,co){eo.drawArrays(oo,lo,co),ro.update(co,oo)}function uo(lo,co,fo,mo){if(mo!==0){var go,yo;if(io)go=eo,yo="drawArraysInstanced";else if(go=to.get("ANGLE_instanced_arrays"),yo="drawArraysInstancedANGLE",go===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}go[yo](oo,co,fo,mo),ro.update(fo,oo,mo)}}this.setMode=ao,this.render=so,this.renderInstances=uo}function WebGLCapabilities(eo,to,ro){var no;function io(){if(no!==void 0)return no;var bo=to.get("EXT_texture_filter_anisotropic");return bo!==null?no=eo.getParameter(bo.MAX_TEXTURE_MAX_ANISOTROPY_EXT):no=0,no}function oo(bo){if(bo==="highp"){if(eo.getShaderPrecisionFormat(35633,36338).precision>0&&eo.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";bo="mediump"}return bo==="mediump"&&eo.getShaderPrecisionFormat(35633,36337).precision>0&&eo.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var ao=typeof WebGL2RenderingContext!="undefined"&&eo instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&eo instanceof WebGL2ComputeRenderingContext,so=ro.precision!==void 0?ro.precision:"highp",uo=oo(so);uo!==so&&(console.warn("THREE.WebGLRenderer:",so,"not supported, using",uo,"instead."),so=uo);var lo=ro.logarithmicDepthBuffer===!0,co=eo.getParameter(34930),fo=eo.getParameter(35660),mo=eo.getParameter(3379),go=eo.getParameter(34076),yo=eo.getParameter(34921),vo=eo.getParameter(36347),Ao=eo.getParameter(36348),ho=eo.getParameter(36349),po=fo>0,Mo=ao||!!to.get("OES_texture_float"),xo=po&&Mo,wo=ao?eo.getParameter(36183):0;return{isWebGL2:ao,getMaxAnisotropy:io,getMaxPrecision:oo,precision:so,logarithmicDepthBuffer:lo,maxTextures:co,maxVertexTextures:fo,maxTextureSize:mo,maxCubemapSize:go,maxAttributes:yo,maxVertexUniforms:vo,maxVaryings:Ao,maxFragmentUniforms:ho,vertexTextures:po,floatFragmentTextures:Mo,floatVertexTextures:xo,maxSamples:wo}}function WebGLClipping(){var eo=this,to=null,ro=0,no=!1,io=!1,oo=new Plane,ao=new Matrix3,so={value:null,needsUpdate:!1};this.uniform=so,this.numPlanes=0,this.numIntersection=0,this.init=function(co,fo,mo){var go=co.length!==0||fo||ro!==0||no;return no=fo,to=lo(co,mo,0),ro=co.length,go},this.beginShadows=function(){io=!0,lo(null)},this.endShadows=function(){io=!1,uo()},this.setState=function(co,fo,mo,go,yo,vo){if(!no||co===null||co.length===0||io&&!mo)io?lo(null):uo();else{var Ao=io?0:ro,ho=Ao*4,po=yo.clippingState||null;so.value=po,po=lo(co,go,ho,vo);for(var Mo=0;Mo!==ho;++Mo)po[Mo]=to[Mo];yo.clippingState=po,this.numIntersection=fo?this.numPlanes:0,this.numPlanes+=Ao}};function uo(){so.value!==to&&(so.value=to,so.needsUpdate=ro>0),eo.numPlanes=ro,eo.numIntersection=0}function lo(co,fo,mo,go){var yo=co!==null?co.length:0,vo=null;if(yo!==0){if(vo=so.value,go!==!0||vo===null){var Ao=mo+yo*4,ho=fo.matrixWorldInverse;ao.getNormalMatrix(ho),(vo===null||vo.length<Ao)&&(vo=new Float32Array(Ao));for(var po=0,Mo=mo;po!==yo;++po,Mo+=4)oo.copy(co[po]).applyMatrix4(ho,ao),oo.normal.toArray(vo,Mo),vo[Mo+3]=oo.constant}so.value=vo,so.needsUpdate=!0}return eo.numPlanes=yo,eo.numIntersection=0,vo}}function WebGLExtensions(eo){var to={};return{get:function(ro){if(to[ro]!==void 0)return to[ro];var no;switch(ro){case"WEBGL_depth_texture":no=eo.getExtension("WEBGL_depth_texture")||eo.getExtension("MOZ_WEBGL_depth_texture")||eo.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":no=eo.getExtension("EXT_texture_filter_anisotropic")||eo.getExtension("MOZ_EXT_texture_filter_anisotropic")||eo.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":no=eo.getExtension("WEBGL_compressed_texture_s3tc")||eo.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||eo.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":no=eo.getExtension("WEBGL_compressed_texture_pvrtc")||eo.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:no=eo.getExtension(ro)}return no===null&&console.warn("THREE.WebGLRenderer: "+ro+" extension not supported."),to[ro]=no,no}}}function WebGLGeometries(eo,to,ro){var no=new WeakMap,io=new WeakMap;function oo(co){var fo=co.target,mo=no.get(fo);mo.index!==null&&to.remove(mo.index);for(var go in mo.attributes)to.remove(mo.attributes[go]);fo.removeEventListener("dispose",oo),no.delete(fo);var yo=io.get(mo);yo&&(to.remove(yo),io.delete(mo)),ro.memory.geometries--}function ao(co,fo){var mo=no.get(fo);return mo||(fo.addEventListener("dispose",oo),fo.isBufferGeometry?mo=fo:fo.isGeometry&&(fo._bufferGeometry===void 0&&(fo._bufferGeometry=new BufferGeometry().setFromObject(co)),mo=fo._bufferGeometry),no.set(fo,mo),ro.memory.geometries++,mo)}function so(co){var fo=co.index,mo=co.attributes;fo!==null&&to.update(fo,34963);for(var go in mo)to.update(mo[go],34962);var yo=co.morphAttributes;for(var go in yo)for(var vo=yo[go],Ao=0,ho=vo.length;Ao<ho;Ao++)to.update(vo[Ao],34962)}function uo(co){var fo=[],mo=co.index,go=co.attributes.position,yo=0;if(mo!==null){var vo=mo.array;yo=mo.version;for(var Ao=0,ho=vo.length;Ao<ho;Ao+=3){var po=vo[Ao+0],Mo=vo[Ao+1],xo=vo[Ao+2];fo.push(po,Mo,Mo,xo,xo,po)}}else{var vo=go.array;yo=go.version;for(var Ao=0,ho=vo.length/3-1;Ao<ho;Ao+=3){var po=Ao+0,Mo=Ao+1,xo=Ao+2;fo.push(po,Mo,Mo,xo,xo,po)}}var wo=new(arrayMax(fo)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(fo,1);wo.version=yo,to.update(wo,34963);var bo=io.get(co);bo&&to.remove(bo),io.set(co,wo)}function lo(co){var fo=io.get(co);if(fo){var mo=co.index;mo!==null&&fo.version<mo.version&&uo(co)}else uo(co);return io.get(co)}return{get:ao,update:so,getWireframeAttribute:lo}}function WebGLIndexedBufferRenderer(eo,to,ro,no){var io=no.isWebGL2,oo;function ao(mo){oo=mo}var so,uo;function lo(mo){so=mo.type,uo=mo.bytesPerElement}function co(mo,go){eo.drawElements(oo,go,so,mo*uo),ro.update(go,oo)}function fo(mo,go,yo,vo){if(vo!==0){var Ao,ho;if(io)Ao=eo,ho="drawElementsInstanced";else if(Ao=to.get("ANGLE_instanced_arrays"),ho="drawElementsInstancedANGLE",Ao===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}Ao[ho](oo,yo,so,go*uo,vo),ro.update(yo,oo,vo)}}this.setMode=ao,this.setIndex=lo,this.render=co,this.renderInstances=fo}function WebGLInfo(eo){var to={geometries:0,textures:0},ro={frame:0,calls:0,triangles:0,points:0,lines:0};function no(oo,ao,so){switch(so=so||1,ro.calls++,ao){case 4:ro.triangles+=so*(oo/3);break;case 1:ro.lines+=so*(oo/2);break;case 3:ro.lines+=so*(oo-1);break;case 2:ro.lines+=so*oo;break;case 0:ro.points+=so*oo;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ao);break}}function io(){ro.frame++,ro.calls=0,ro.triangles=0,ro.points=0,ro.lines=0}return{memory:to,render:ro,programs:null,autoReset:!0,reset:io,update:no}}function absNumericalSort(eo,to){return Math.abs(to[1])-Math.abs(eo[1])}function WebGLMorphtargets(eo){var to={},ro=new Float32Array(8);function no(io,oo,ao,so){var uo=io.morphTargetInfluences,lo=uo===void 0?0:uo.length,co=to[oo.id];if(co===void 0){co=[];for(var fo=0;fo<lo;fo++)co[fo]=[fo,0];to[oo.id]=co}for(var mo=ao.morphTargets&&oo.morphAttributes.position,go=ao.morphNormals&&oo.morphAttributes.normal,fo=0;fo<lo;fo++){var yo=co[fo];yo[1]!==0&&(mo&&oo.deleteAttribute("morphTarget"+fo),go&&oo.deleteAttribute("morphNormal"+fo))}for(var fo=0;fo<lo;fo++){var yo=co[fo];yo[0]=fo,yo[1]=uo[fo]}co.sort(absNumericalSort);for(var vo=0,fo=0;fo<8;fo++){var yo=co[fo];if(yo){var Ao=yo[0],ho=yo[1];if(ho){mo&&oo.setAttribute("morphTarget"+fo,mo[Ao]),go&&oo.setAttribute("morphNormal"+fo,go[Ao]),ro[fo]=ho,vo+=ho;continue}}ro[fo]=0}var po=oo.morphTargetsRelative?1:1-vo;so.getUniforms().setValue(eo,"morphTargetBaseInfluence",po),so.getUniforms().setValue(eo,"morphTargetInfluences",ro)}return{update:no}}function WebGLObjects(eo,to,ro,no){var io=new WeakMap;function oo(so){var uo=no.render.frame,lo=so.geometry,co=to.get(so,lo);return io.get(co)!==uo&&(lo.isGeometry&&co.updateFromObject(so),to.update(co),io.set(co,uo)),so.isInstancedMesh&&ro.update(so.instanceMatrix,34962),co}function ao(){io=new WeakMap}return{update:oo,dispose:ao}}function CubeTexture(eo,to,ro,no,io,oo,ao,so,uo,lo){eo=eo!==void 0?eo:[],to=to!==void 0?to:CubeReflectionMapping,ao=ao!==void 0?ao:RGBFormat,Texture.call(this,eo,to,ro,no,io,oo,ao,so,uo,lo),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(eo){this.image=eo}});function DataTexture2DArray(eo,to,ro,no){Texture.call(this,null),this.image={data:eo||null,width:to||1,height:ro||1,depth:no||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture2DArray.prototype=Object.create(Texture.prototype);DataTexture2DArray.prototype.constructor=DataTexture2DArray;DataTexture2DArray.prototype.isDataTexture2DArray=!0;function DataTexture3D(eo,to,ro,no){Texture.call(this,null),this.image={data:eo||null,width:to||1,height:ro||1,depth:no||1},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}DataTexture3D.prototype=Object.create(Texture.prototype);DataTexture3D.prototype.constructor=DataTexture3D;DataTexture3D.prototype.isDataTexture3D=!0;var emptyTexture=new Texture,emptyTexture2dArray=new DataTexture2DArray,emptyTexture3d=new DataTexture3D,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(eo,to,ro){var no=eo[0];if(no<=0||no>0)return eo;var io=to*ro,oo=arrayCacheF32[io];if(oo===void 0&&(oo=new Float32Array(io),arrayCacheF32[io]=oo),to!==0){no.toArray(oo,0);for(var ao=1,so=0;ao!==to;++ao)so+=ro,eo[ao].toArray(oo,so)}return oo}function arraysEqual(eo,to){if(eo.length!==to.length)return!1;for(var ro=0,no=eo.length;ro<no;ro++)if(eo[ro]!==to[ro])return!1;return!0}function copyArray(eo,to){for(var ro=0,no=to.length;ro<no;ro++)eo[ro]=to[ro]}function allocTexUnits(eo,to){var ro=arrayCacheI32[to];ro===void 0&&(ro=new Int32Array(to),arrayCacheI32[to]=ro);for(var no=0;no!==to;++no)ro[no]=eo.allocateTextureUnit();return ro}function setValueV1f(eo,to){var ro=this.cache;ro[0]!==to&&(eo.uniform1f(this.addr,to),ro[0]=to)}function setValueV2f(eo,to){var ro=this.cache;if(to.x!==void 0)(ro[0]!==to.x||ro[1]!==to.y)&&(eo.uniform2f(this.addr,to.x,to.y),ro[0]=to.x,ro[1]=to.y);else{if(arraysEqual(ro,to))return;eo.uniform2fv(this.addr,to),copyArray(ro,to)}}function setValueV3f(eo,to){var ro=this.cache;if(to.x!==void 0)(ro[0]!==to.x||ro[1]!==to.y||ro[2]!==to.z)&&(eo.uniform3f(this.addr,to.x,to.y,to.z),ro[0]=to.x,ro[1]=to.y,ro[2]=to.z);else if(to.r!==void 0)(ro[0]!==to.r||ro[1]!==to.g||ro[2]!==to.b)&&(eo.uniform3f(this.addr,to.r,to.g,to.b),ro[0]=to.r,ro[1]=to.g,ro[2]=to.b);else{if(arraysEqual(ro,to))return;eo.uniform3fv(this.addr,to),copyArray(ro,to)}}function setValueV4f(eo,to){var ro=this.cache;if(to.x!==void 0)(ro[0]!==to.x||ro[1]!==to.y||ro[2]!==to.z||ro[3]!==to.w)&&(eo.uniform4f(this.addr,to.x,to.y,to.z,to.w),ro[0]=to.x,ro[1]=to.y,ro[2]=to.z,ro[3]=to.w);else{if(arraysEqual(ro,to))return;eo.uniform4fv(this.addr,to),copyArray(ro,to)}}function setValueM2(eo,to){var ro=this.cache,no=to.elements;if(no===void 0){if(arraysEqual(ro,to))return;eo.uniformMatrix2fv(this.addr,!1,to),copyArray(ro,to)}else{if(arraysEqual(ro,no))return;mat2array.set(no),eo.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(ro,no)}}function setValueM3(eo,to){var ro=this.cache,no=to.elements;if(no===void 0){if(arraysEqual(ro,to))return;eo.uniformMatrix3fv(this.addr,!1,to),copyArray(ro,to)}else{if(arraysEqual(ro,no))return;mat3array.set(no),eo.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(ro,no)}}function setValueM4(eo,to){var ro=this.cache,no=to.elements;if(no===void 0){if(arraysEqual(ro,to))return;eo.uniformMatrix4fv(this.addr,!1,to),copyArray(ro,to)}else{if(arraysEqual(ro,no))return;mat4array.set(no),eo.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(ro,no)}}function setValueT1(eo,to,ro){var no=this.cache,io=ro.allocateTextureUnit();no[0]!==io&&(eo.uniform1i(this.addr,io),no[0]=io),ro.safeSetTexture2D(to||emptyTexture,io)}function setValueT2DArray1(eo,to,ro){var no=this.cache,io=ro.allocateTextureUnit();no[0]!==io&&(eo.uniform1i(this.addr,io),no[0]=io),ro.setTexture2DArray(to||emptyTexture2dArray,io)}function setValueT3D1(eo,to,ro){var no=this.cache,io=ro.allocateTextureUnit();no[0]!==io&&(eo.uniform1i(this.addr,io),no[0]=io),ro.setTexture3D(to||emptyTexture3d,io)}function setValueT6(eo,to,ro){var no=this.cache,io=ro.allocateTextureUnit();no[0]!==io&&(eo.uniform1i(this.addr,io),no[0]=io),ro.safeSetTextureCube(to||emptyCubeTexture,io)}function setValueV1i(eo,to){var ro=this.cache;ro[0]!==to&&(eo.uniform1i(this.addr,to),ro[0]=to)}function setValueV2i(eo,to){var ro=this.cache;arraysEqual(ro,to)||(eo.uniform2iv(this.addr,to),copyArray(ro,to))}function setValueV3i(eo,to){var ro=this.cache;arraysEqual(ro,to)||(eo.uniform3iv(this.addr,to),copyArray(ro,to))}function setValueV4i(eo,to){var ro=this.cache;arraysEqual(ro,to)||(eo.uniform4iv(this.addr,to),copyArray(ro,to))}function setValueV1ui(eo,to){var ro=this.cache;ro[0]!==to&&(eo.uniform1ui(this.addr,to),ro[0]=to)}function getSingularSetter(eo){switch(eo){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(eo,to){eo.uniform1fv(this.addr,to)}function setValueV1iArray(eo,to){eo.uniform1iv(this.addr,to)}function setValueV2iArray(eo,to){eo.uniform2iv(this.addr,to)}function setValueV3iArray(eo,to){eo.uniform3iv(this.addr,to)}function setValueV4iArray(eo,to){eo.uniform4iv(this.addr,to)}function setValueV2fArray(eo,to){var ro=flatten(to,this.size,2);eo.uniform2fv(this.addr,ro)}function setValueV3fArray(eo,to){var ro=flatten(to,this.size,3);eo.uniform3fv(this.addr,ro)}function setValueV4fArray(eo,to){var ro=flatten(to,this.size,4);eo.uniform4fv(this.addr,ro)}function setValueM2Array(eo,to){var ro=flatten(to,this.size,4);eo.uniformMatrix2fv(this.addr,!1,ro)}function setValueM3Array(eo,to){var ro=flatten(to,this.size,9);eo.uniformMatrix3fv(this.addr,!1,ro)}function setValueM4Array(eo,to){var ro=flatten(to,this.size,16);eo.uniformMatrix4fv(this.addr,!1,ro)}function setValueT1Array(eo,to,ro){var no=to.length,io=allocTexUnits(ro,no);eo.uniform1iv(this.addr,io);for(var oo=0;oo!==no;++oo)ro.safeSetTexture2D(to[oo]||emptyTexture,io[oo])}function setValueT6Array(eo,to,ro){var no=to.length,io=allocTexUnits(ro,no);eo.uniform1iv(this.addr,io);for(var oo=0;oo!==no;++oo)ro.safeSetTextureCube(to[oo]||emptyCubeTexture,io[oo])}function getPureArraySetter(eo){switch(eo){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(eo,to,ro){this.id=eo,this.addr=ro,this.cache=[],this.setValue=getSingularSetter(to.type)}function PureArrayUniform(eo,to,ro){this.id=eo,this.addr=ro,this.cache=[],this.size=to.size,this.setValue=getPureArraySetter(to.type)}PureArrayUniform.prototype.updateCache=function(eo){var to=this.cache;eo instanceof Float32Array&&to.length!==eo.length&&(this.cache=new Float32Array(eo.length)),copyArray(to,eo)};function StructuredUniform(eo){this.id=eo,this.seq=[],this.map={}}StructuredUniform.prototype.setValue=function(eo,to,ro){for(var no=this.seq,io=0,oo=no.length;io!==oo;++io){var ao=no[io];ao.setValue(eo,to[ao.id],ro)}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(eo,to){eo.seq.push(to),eo.map[to.id]=to}function parseUniform(eo,to,ro){var no=eo.name,io=no.length;for(RePathPart.lastIndex=0;;){var oo=RePathPart.exec(no),ao=RePathPart.lastIndex,so=oo[1],uo=oo[2]==="]",lo=oo[3];if(uo&&(so=so|0),lo===void 0||lo==="["&&ao+2===io){addUniform(ro,lo===void 0?new SingleUniform(so,eo,to):new PureArrayUniform(so,eo,to));break}else{var co=ro.map,fo=co[so];fo===void 0&&(fo=new StructuredUniform(so),addUniform(ro,fo)),ro=fo}}}function WebGLUniforms(eo,to){this.seq=[],this.map={};for(var ro=eo.getProgramParameter(to,35718),no=0;no<ro;++no){var io=eo.getActiveUniform(to,no),oo=eo.getUniformLocation(to,io.name);parseUniform(io,oo,this)}}WebGLUniforms.prototype.setValue=function(eo,to,ro,no){var io=this.map[to];io!==void 0&&io.setValue(eo,ro,no)};WebGLUniforms.prototype.setOptional=function(eo,to,ro){var no=to[ro];no!==void 0&&this.setValue(eo,ro,no)};WebGLUniforms.upload=function(eo,to,ro,no){for(var io=0,oo=to.length;io!==oo;++io){var ao=to[io],so=ro[ao.id];so.needsUpdate!==!1&&ao.setValue(eo,so.value,no)}};WebGLUniforms.seqWithValue=function(eo,to){for(var ro=[],no=0,io=eo.length;no!==io;++no){var oo=eo[no];oo.id in to&&ro.push(oo)}return ro};function WebGLShader(eo,to,ro){var no=eo.createShader(to);return eo.shaderSource(no,ro),eo.compileShader(no),no}var programIdCount=0;function addLineNumbers(eo){for(var to=eo.split(`
`),ro=0;ro<to.length;ro++)to[ro]=ro+1+": "+to[ro];return to.join(`
`)}function getEncodingComponents(eo){switch(eo){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case LogLuvEncoding:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+eo)}}function getShaderErrors(eo,to,ro){var no=eo.getShaderParameter(to,35713),io=eo.getShaderInfoLog(to).trim();if(no&&io==="")return"";var oo=eo.getShaderSource(to);return"THREE.WebGLShader: gl.getShaderInfoLog() "+ro+`
`+io+addLineNumbers(oo)}function getTexelDecodingFunction(eo,to){var ro=getEncodingComponents(to);return"vec4 "+eo+"( vec4 value ) { return "+ro[0]+"ToLinear"+ro[1]+"; }"}function getTexelEncodingFunction(eo,to){var ro=getEncodingComponents(to);return"vec4 "+eo+"( vec4 value ) { return LinearTo"+ro[0]+ro[1]+"; }"}function getToneMappingFunction(eo,to){var ro;switch(to){case LinearToneMapping:ro="Linear";break;case ReinhardToneMapping:ro="Reinhard";break;case Uncharted2ToneMapping:ro="Uncharted2";break;case CineonToneMapping:ro="OptimizedCineon";break;case ACESFilmicToneMapping:ro="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+to)}return"vec3 "+eo+"( vec3 color ) { return "+ro+"ToneMapping( color ); }"}function generateExtensions(eo){var to=[eo.extensionDerivatives||eo.envMapCubeUV||eo.bumpMap||eo.tangentSpaceNormalMap||eo.clearcoatNormalMap||eo.flatShading||eo.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(eo.extensionFragDepth||eo.logarithmicDepthBuffer)&&eo.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",eo.extensionDrawBuffers&&eo.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(eo.extensionShaderTextureLOD||eo.envMap)&&eo.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return to.filter(filterEmptyLine).join(`
`)}function generateDefines(eo){var to=[];for(var ro in eo){var no=eo[ro];no!==!1&&to.push("#define "+ro+" "+no)}return to.join(`
`)}function fetchAttributeLocations(eo,to){for(var ro={},no=eo.getProgramParameter(to,35721),io=0;io<no;io++){var oo=eo.getActiveAttrib(to,io),ao=oo.name;ro[ao]=eo.getAttribLocation(to,ao)}return ro}function filterEmptyLine(eo){return eo!==""}function replaceLightNums(eo,to){return eo.replace(/NUM_DIR_LIGHTS/g,to.numDirLights).replace(/NUM_SPOT_LIGHTS/g,to.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,to.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,to.numPointLights).replace(/NUM_HEMI_LIGHTS/g,to.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,to.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,to.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,to.numPointLightShadows)}function replaceClippingPlaneNums(eo,to){return eo.replace(/NUM_CLIPPING_PLANES/g,to.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,to.numClippingPlanes-to.numClipIntersection)}var includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(eo){return eo.replace(includePattern,includeReplacer)}function includeReplacer(eo,to){var ro=ShaderChunk[to];if(ro===void 0)throw new Error("Can not resolve #include <"+to+">");return resolveIncludes(ro)}var deprecatedUnrollLoopPattern=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,unrollLoopPattern=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function unrollLoops(eo){return eo.replace(unrollLoopPattern,loopReplacer).replace(deprecatedUnrollLoopPattern,deprecatedLoopReplacer)}function deprecatedLoopReplacer(eo,to,ro,no){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(eo,to,ro,no)}function loopReplacer(eo,to,ro,no){for(var io="",oo=parseInt(to);oo<parseInt(ro);oo++)io+=no.replace(/\[ i \]/g,"[ "+oo+" ]").replace(/UNROLLED_LOOP_INDEX/g,oo);return io}function generatePrecision(eo){var to="precision "+eo.precision+` float;
precision `+eo.precision+" int;";return eo.precision==="highp"?to+=`
#define HIGH_PRECISION`:eo.precision==="mediump"?to+=`
#define MEDIUM_PRECISION`:eo.precision==="lowp"&&(to+=`
#define LOW_PRECISION`),to}function generateShadowMapTypeDefine(eo){var to="SHADOWMAP_TYPE_BASIC";return eo.shadowMapType===PCFShadowMap?to="SHADOWMAP_TYPE_PCF":eo.shadowMapType===PCFSoftShadowMap?to="SHADOWMAP_TYPE_PCF_SOFT":eo.shadowMapType===VSMShadowMap&&(to="SHADOWMAP_TYPE_VSM"),to}function generateEnvMapTypeDefine(eo){var to="ENVMAP_TYPE_CUBE";if(eo.envMap)switch(eo.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:to="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:to="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:to="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:to="ENVMAP_TYPE_SPHERE";break}return to}function generateEnvMapModeDefine(eo){var to="ENVMAP_MODE_REFLECTION";if(eo.envMap)switch(eo.envMapMode){case CubeRefractionMapping:case EquirectangularRefractionMapping:to="ENVMAP_MODE_REFRACTION";break}return to}function generateEnvMapBlendingDefine(eo){var to="ENVMAP_BLENDING_NONE";if(eo.envMap)switch(eo.combine){case MultiplyOperation:to="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:to="ENVMAP_BLENDING_MIX";break;case AddOperation:to="ENVMAP_BLENDING_ADD";break}return to}function WebGLProgram(eo,to,ro){var no=eo.getContext(),io=ro.defines,oo=ro.vertexShader,ao=ro.fragmentShader,so=generateShadowMapTypeDefine(ro),uo=generateEnvMapTypeDefine(ro),lo=generateEnvMapModeDefine(ro),co=generateEnvMapBlendingDefine(ro),fo=eo.gammaFactor>0?eo.gammaFactor:1,mo=ro.isWebGL2?"":generateExtensions(ro),go=generateDefines(io),yo=no.createProgram(),vo,Ao;if(ro.isRawShaderMaterial?(vo=[go].filter(filterEmptyLine).join(`
`),vo.length>0&&(vo+=`
`),Ao=[mo,go].filter(filterEmptyLine).join(`
`),Ao.length>0&&(Ao+=`
`)):(vo=[generatePrecision(ro),"#define SHADER_NAME "+ro.shaderName,go,ro.instancing?"#define USE_INSTANCING":"",ro.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+fo,"#define MAX_BONES "+ro.maxBones,ro.useFog&&ro.fog?"#define USE_FOG":"",ro.useFog&&ro.fogExp2?"#define FOG_EXP2":"",ro.map?"#define USE_MAP":"",ro.envMap?"#define USE_ENVMAP":"",ro.envMap?"#define "+lo:"",ro.lightMap?"#define USE_LIGHTMAP":"",ro.aoMap?"#define USE_AOMAP":"",ro.emissiveMap?"#define USE_EMISSIVEMAP":"",ro.bumpMap?"#define USE_BUMPMAP":"",ro.normalMap?"#define USE_NORMALMAP":"",ro.normalMap&&ro.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",ro.normalMap&&ro.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",ro.clearcoatMap?"#define USE_CLEARCOATMAP":"",ro.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ro.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ro.displacementMap&&ro.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",ro.specularMap?"#define USE_SPECULARMAP":"",ro.roughnessMap?"#define USE_ROUGHNESSMAP":"",ro.metalnessMap?"#define USE_METALNESSMAP":"",ro.alphaMap?"#define USE_ALPHAMAP":"",ro.vertexTangents?"#define USE_TANGENT":"",ro.vertexColors?"#define USE_COLOR":"",ro.vertexUvs?"#define USE_UV":"",ro.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",ro.flatShading?"#define FLAT_SHADED":"",ro.skinning?"#define USE_SKINNING":"",ro.useVertexTexture?"#define BONE_TEXTURE":"",ro.morphTargets?"#define USE_MORPHTARGETS":"",ro.morphNormals&&ro.flatShading===!1?"#define USE_MORPHNORMALS":"",ro.doubleSided?"#define DOUBLE_SIDED":"",ro.flipSided?"#define FLIP_SIDED":"",ro.shadowMapEnabled?"#define USE_SHADOWMAP":"",ro.shadowMapEnabled?"#define "+so:"",ro.sizeAttenuation?"#define USE_SIZEATTENUATION":"",ro.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ro.logarithmicDepthBuffer&&ro.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ao=[mo,generatePrecision(ro),"#define SHADER_NAME "+ro.shaderName,go,ro.alphaTest?"#define ALPHATEST "+ro.alphaTest+(ro.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+fo,ro.useFog&&ro.fog?"#define USE_FOG":"",ro.useFog&&ro.fogExp2?"#define FOG_EXP2":"",ro.map?"#define USE_MAP":"",ro.matcap?"#define USE_MATCAP":"",ro.envMap?"#define USE_ENVMAP":"",ro.envMap?"#define "+uo:"",ro.envMap?"#define "+lo:"",ro.envMap?"#define "+co:"",ro.lightMap?"#define USE_LIGHTMAP":"",ro.aoMap?"#define USE_AOMAP":"",ro.emissiveMap?"#define USE_EMISSIVEMAP":"",ro.bumpMap?"#define USE_BUMPMAP":"",ro.normalMap?"#define USE_NORMALMAP":"",ro.normalMap&&ro.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",ro.normalMap&&ro.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",ro.clearcoatMap?"#define USE_CLEARCOATMAP":"",ro.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ro.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ro.specularMap?"#define USE_SPECULARMAP":"",ro.roughnessMap?"#define USE_ROUGHNESSMAP":"",ro.metalnessMap?"#define USE_METALNESSMAP":"",ro.alphaMap?"#define USE_ALPHAMAP":"",ro.sheen?"#define USE_SHEEN":"",ro.vertexTangents?"#define USE_TANGENT":"",ro.vertexColors?"#define USE_COLOR":"",ro.vertexUvs?"#define USE_UV":"",ro.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",ro.gradientMap?"#define USE_GRADIENTMAP":"",ro.flatShading?"#define FLAT_SHADED":"",ro.doubleSided?"#define DOUBLE_SIDED":"",ro.flipSided?"#define FLIP_SIDED":"",ro.shadowMapEnabled?"#define USE_SHADOWMAP":"",ro.shadowMapEnabled?"#define "+so:"",ro.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",ro.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",ro.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ro.logarithmicDepthBuffer&&ro.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(ro.extensionShaderTextureLOD||ro.envMap)&&ro.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",ro.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",ro.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",ro.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",ro.toneMapping):"",ro.dithering?"#define DITHERING":"",ro.outputEncoding||ro.mapEncoding||ro.matcapEncoding||ro.envMapEncoding||ro.emissiveMapEncoding||ro.lightMapEncoding?ShaderChunk.encodings_pars_fragment:"",ro.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",ro.mapEncoding):"",ro.matcapEncoding?getTexelDecodingFunction("matcapTexelToLinear",ro.matcapEncoding):"",ro.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",ro.envMapEncoding):"",ro.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",ro.emissiveMapEncoding):"",ro.lightMapEncoding?getTexelDecodingFunction("lightMapTexelToLinear",ro.lightMapEncoding):"",ro.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",ro.outputEncoding):"",ro.depthPacking?"#define DEPTH_PACKING "+ro.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),oo=resolveIncludes(oo),oo=replaceLightNums(oo,ro),oo=replaceClippingPlaneNums(oo,ro),ao=resolveIncludes(ao),ao=replaceLightNums(ao,ro),ao=replaceClippingPlaneNums(ao,ro),oo=unrollLoops(oo),ao=unrollLoops(ao),ro.isWebGL2&&!ro.isRawShaderMaterial){var ho=!1,po=/^\s*#version\s+300\s+es\s*\n/;ro.isShaderMaterial&&oo.match(po)!==null&&ao.match(po)!==null&&(ho=!0,oo=oo.replace(po,""),ao=ao.replace(po,"")),vo=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+vo,Ao=[`#version 300 es
`,"#define varying in",ho?"":"out highp vec4 pc_fragColor;",ho?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ao}var Mo=vo+oo,xo=Ao+ao,wo=WebGLShader(no,35633,Mo),bo=WebGLShader(no,35632,xo);if(no.attachShader(yo,wo),no.attachShader(yo,bo),ro.index0AttributeName!==void 0?no.bindAttribLocation(yo,0,ro.index0AttributeName):ro.morphTargets===!0&&no.bindAttribLocation(yo,0,"position"),no.linkProgram(yo),eo.debug.checkShaderErrors){var _o=no.getProgramInfoLog(yo).trim(),To=no.getShaderInfoLog(wo).trim(),No=no.getShaderInfoLog(bo).trim(),Po=!0,Co=!0;if(no.getProgramParameter(yo,35714)===!1){Po=!1;var Do=getShaderErrors(no,wo,"vertex"),zo=getShaderErrors(no,bo,"fragment");console.error("THREE.WebGLProgram: shader error: ",no.getError(),"35715",no.getProgramParameter(yo,35715),"gl.getProgramInfoLog",_o,Do,zo)}else _o!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",_o):(To===""||No==="")&&(Co=!1);Co&&(this.diagnostics={runnable:Po,programLog:_o,vertexShader:{log:To,prefix:vo},fragmentShader:{log:No,prefix:Ao}})}no.deleteShader(wo),no.deleteShader(bo);var Ro;this.getUniforms=function(){return Ro===void 0&&(Ro=new WebGLUniforms(no,yo)),Ro};var Lo;return this.getAttributes=function(){return Lo===void 0&&(Lo=fetchAttributeLocations(no,yo)),Lo},this.destroy=function(){no.deleteProgram(yo),this.program=void 0},this.name=ro.shaderName,this.id=programIdCount++,this.cacheKey=to,this.usedTimes=1,this.program=yo,this.vertexShader=wo,this.fragmentShader=bo,this}function WebGLPrograms(eo,to,ro){var no=[],io=ro.isWebGL2,oo=ro.logarithmicDepthBuffer,ao=ro.floatVertexTextures,so=ro.precision,uo=ro.maxVertexUniforms,lo=ro.vertexTextures,co={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},fo=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function mo(vo,Ao){var ho;if(Ao){var po=ShaderLib[Ao];ho={name:vo.type,uniforms:UniformsUtils.clone(po.uniforms),vertexShader:po.vertexShader,fragmentShader:po.fragmentShader}}else ho={name:vo.type,uniforms:vo.uniforms,vertexShader:vo.vertexShader,fragmentShader:vo.fragmentShader};return ho}function go(vo){var Ao=vo.skeleton,ho=Ao.bones;if(ao)return 1024;var po=uo,Mo=Math.floor((po-20)/4),xo=Math.min(Mo,ho.length);return xo<ho.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ho.length+" bones. This GPU supports "+xo+"."),0):xo}function yo(vo){var Ao;return vo?vo.isTexture?Ao=vo.encoding:vo.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Ao=vo.texture.encoding):Ao=LinearEncoding,Ao}this.getParameters=function(vo,Ao,ho,po,Mo,xo,wo){var bo=po.fog,_o=vo.isMeshStandardMaterial?po.environment:null,To=vo.envMap||_o,No=co[vo.type],Po=wo.isSkinnedMesh?go(wo):0;vo.precision!==null&&(so=ro.getMaxPrecision(vo.precision),so!==vo.precision&&console.warn("THREE.WebGLProgram.getParameters:",vo.precision,"not supported, using",so,"instead."));var Co=mo(vo,No);vo.onBeforeCompile(Co,eo);var Do=eo.getRenderTarget(),zo={isWebGL2:io,shaderID:No,shaderName:Co.name,uniforms:Co.uniforms,vertexShader:Co.vertexShader,fragmentShader:Co.fragmentShader,defines:vo.defines,isRawShaderMaterial:vo.isRawShaderMaterial,isShaderMaterial:vo.isShaderMaterial,precision:so,instancing:wo.isInstancedMesh===!0,supportsVertexTextures:lo,outputEncoding:Do!==null?yo(Do.texture):eo.outputEncoding,map:!!vo.map,mapEncoding:yo(vo.map),matcap:!!vo.matcap,matcapEncoding:yo(vo.matcap),envMap:!!To,envMapMode:To&&To.mapping,envMapEncoding:yo(To),envMapCubeUV:!!To&&(To.mapping===CubeUVReflectionMapping||To.mapping===CubeUVRefractionMapping),lightMap:!!vo.lightMap,lightMapEncoding:yo(vo.lightMap),aoMap:!!vo.aoMap,emissiveMap:!!vo.emissiveMap,emissiveMapEncoding:yo(vo.emissiveMap),bumpMap:!!vo.bumpMap,normalMap:!!vo.normalMap,objectSpaceNormalMap:vo.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:vo.normalMapType===TangentSpaceNormalMap,clearcoatMap:!!vo.clearcoatMap,clearcoatRoughnessMap:!!vo.clearcoatRoughnessMap,clearcoatNormalMap:!!vo.clearcoatNormalMap,displacementMap:!!vo.displacementMap,roughnessMap:!!vo.roughnessMap,metalnessMap:!!vo.metalnessMap,specularMap:!!vo.specularMap,alphaMap:!!vo.alphaMap,gradientMap:!!vo.gradientMap,sheen:!!vo.sheen,combine:vo.combine,vertexTangents:vo.normalMap&&vo.vertexTangents,vertexColors:vo.vertexColors,vertexUvs:!!vo.map||!!vo.bumpMap||!!vo.normalMap||!!vo.specularMap||!!vo.alphaMap||!!vo.emissiveMap||!!vo.roughnessMap||!!vo.metalnessMap||!!vo.clearcoatMap||!!vo.clearcoatRoughnessMap||!!vo.clearcoatNormalMap||!!vo.displacementMap,uvsVertexOnly:!(!!vo.map||!!vo.bumpMap||!!vo.normalMap||!!vo.specularMap||!!vo.alphaMap||!!vo.emissiveMap||!!vo.roughnessMap||!!vo.metalnessMap||!!vo.clearcoatNormalMap)&&!!vo.displacementMap,fog:!!bo,useFog:vo.fog,fogExp2:bo&&bo.isFogExp2,flatShading:vo.flatShading,sizeAttenuation:vo.sizeAttenuation,logarithmicDepthBuffer:oo,skinning:vo.skinning&&Po>0,maxBones:Po,useVertexTexture:ao,morphTargets:vo.morphTargets,morphNormals:vo.morphNormals,maxMorphTargets:eo.maxMorphTargets,maxMorphNormals:eo.maxMorphNormals,numDirLights:Ao.directional.length,numPointLights:Ao.point.length,numSpotLights:Ao.spot.length,numRectAreaLights:Ao.rectArea.length,numHemiLights:Ao.hemi.length,numDirLightShadows:Ao.directionalShadowMap.length,numPointLightShadows:Ao.pointShadowMap.length,numSpotLightShadows:Ao.spotShadowMap.length,numClippingPlanes:Mo,numClipIntersection:xo,dithering:vo.dithering,shadowMapEnabled:eo.shadowMap.enabled&&ho.length>0,shadowMapType:eo.shadowMap.type,toneMapping:vo.toneMapped?eo.toneMapping:NoToneMapping,physicallyCorrectLights:eo.physicallyCorrectLights,premultipliedAlpha:vo.premultipliedAlpha,alphaTest:vo.alphaTest,doubleSided:vo.side===DoubleSide,flipSided:vo.side===BackSide,depthPacking:vo.depthPacking!==void 0?vo.depthPacking:!1,index0AttributeName:vo.index0AttributeName,extensionDerivatives:vo.extensions&&vo.extensions.derivatives,extensionFragDepth:vo.extensions&&vo.extensions.fragDepth,extensionDrawBuffers:vo.extensions&&vo.extensions.drawBuffers,extensionShaderTextureLOD:vo.extensions&&vo.extensions.shaderTextureLOD,rendererExtensionFragDepth:io||to.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:io||to.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:io||to.get("EXT_shader_texture_lod")!==null,onBeforeCompile:vo.onBeforeCompile};return zo},this.getProgramCacheKey=function(vo){var Ao=[];if(vo.shaderID?Ao.push(vo.shaderID):(Ao.push(vo.fragmentShader),Ao.push(vo.vertexShader)),vo.defines!==void 0)for(var ho in vo.defines)Ao.push(ho),Ao.push(vo.defines[ho]);if(vo.isRawShaderMaterial===void 0){for(var po=0;po<fo.length;po++)Ao.push(vo[fo[po]]);Ao.push(eo.outputEncoding),Ao.push(eo.gammaFactor)}return Ao.push(vo.onBeforeCompile.toString()),Ao.join()},this.acquireProgram=function(vo,Ao){for(var ho,po=0,Mo=no.length;po<Mo;po++){var xo=no[po];if(xo.cacheKey===Ao){ho=xo,++ho.usedTimes;break}}return ho===void 0&&(ho=new WebGLProgram(eo,Ao,vo),no.push(ho)),ho},this.releaseProgram=function(vo){if(--vo.usedTimes===0){var Ao=no.indexOf(vo);no[Ao]=no[no.length-1],no.pop(),vo.destroy()}},this.programs=no}function WebGLProperties(){var eo=new WeakMap;function to(oo){var ao=eo.get(oo);return ao===void 0&&(ao={},eo.set(oo,ao)),ao}function ro(oo){eo.delete(oo)}function no(oo,ao,so){eo.get(oo)[ao]=so}function io(){eo=new WeakMap}return{get:to,remove:ro,update:no,dispose:io}}function painterSortStable(eo,to){return eo.groupOrder!==to.groupOrder?eo.groupOrder-to.groupOrder:eo.renderOrder!==to.renderOrder?eo.renderOrder-to.renderOrder:eo.program!==to.program?eo.program.id-to.program.id:eo.material.id!==to.material.id?eo.material.id-to.material.id:eo.z!==to.z?eo.z-to.z:eo.id-to.id}function reversePainterSortStable(eo,to){return eo.groupOrder!==to.groupOrder?eo.groupOrder-to.groupOrder:eo.renderOrder!==to.renderOrder?eo.renderOrder-to.renderOrder:eo.z!==to.z?to.z-eo.z:eo.id-to.id}function WebGLRenderList(){var eo=[],to=0,ro=[],no=[],io={id:-1};function oo(){to=0,ro.length=0,no.length=0}function ao(fo,mo,go,yo,vo,Ao){var ho=eo[to];return ho===void 0?(ho={id:fo.id,object:fo,geometry:mo,material:go,program:go.program||io,groupOrder:yo,renderOrder:fo.renderOrder,z:vo,group:Ao},eo[to]=ho):(ho.id=fo.id,ho.object=fo,ho.geometry=mo,ho.material=go,ho.program=go.program||io,ho.groupOrder=yo,ho.renderOrder=fo.renderOrder,ho.z=vo,ho.group=Ao),to++,ho}function so(fo,mo,go,yo,vo,Ao){var ho=ao(fo,mo,go,yo,vo,Ao);(go.transparent===!0?no:ro).push(ho)}function uo(fo,mo,go,yo,vo,Ao){var ho=ao(fo,mo,go,yo,vo,Ao);(go.transparent===!0?no:ro).unshift(ho)}function lo(fo,mo){ro.length>1&&ro.sort(fo||painterSortStable),no.length>1&&no.sort(mo||reversePainterSortStable)}function co(){for(var fo=to,mo=eo.length;fo<mo;fo++){var go=eo[fo];if(go.id===null)break;go.id=null,go.object=null,go.geometry=null,go.material=null,go.program=null,go.group=null}}return{opaque:ro,transparent:no,init:oo,push:so,unshift:uo,finish:co,sort:lo}}function WebGLRenderLists(){var eo=new WeakMap;function to(io){var oo=io.target;oo.removeEventListener("dispose",to),eo.delete(oo)}function ro(io,oo){var ao=eo.get(io),so;return ao===void 0?(so=new WebGLRenderList,eo.set(io,new WeakMap),eo.get(io).set(oo,so),io.addEventListener("dispose",to)):(so=ao.get(oo),so===void 0&&(so=new WebGLRenderList,ao.set(oo,so))),so}function no(){eo=new WeakMap}return{get:ro,dispose:no}}function UniformsCache(){var eo={};return{get:function(to){if(eo[to.id]!==void 0)return eo[to.id];var ro;switch(to.type){case"DirectionalLight":ro={direction:new Vector3,color:new Color};break;case"SpotLight":ro={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":ro={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":ro={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":ro={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return eo[to.id]=ro,ro}}}function ShadowUniformsCache(){var eo={};return{get:function(to){if(eo[to.id]!==void 0)return eo[to.id];var ro;switch(to.type){case"DirectionalLight":ro={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":ro={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":ro={shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return eo[to.id]=ro,ro}}}var nextVersion=0;function shadowCastingLightsFirst(eo,to){return(to.castShadow?1:0)-(eo.castShadow?1:0)}function WebGLLights(){for(var eo=new UniformsCache,to=ShadowUniformsCache(),ro={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},no=0;no<9;no++)ro.probe.push(new Vector3);var io=new Vector3,oo=new Matrix4,ao=new Matrix4;function so(uo,lo,co){for(var fo=0,mo=0,go=0,yo=0;yo<9;yo++)ro.probe[yo].set(0,0,0);var vo=0,Ao=0,ho=0,po=0,Mo=0,xo=0,wo=0,bo=0,_o=co.matrixWorldInverse;uo.sort(shadowCastingLightsFirst);for(var yo=0,To=uo.length;yo<To;yo++){var No=uo[yo],Po=No.color,Co=No.intensity,Do=No.distance,zo=No.shadow&&No.shadow.map?No.shadow.map.texture:null;if(No.isAmbientLight)fo+=Po.r*Co,mo+=Po.g*Co,go+=Po.b*Co;else if(No.isLightProbe)for(var Ro=0;Ro<9;Ro++)ro.probe[Ro].addScaledVector(No.sh.coefficients[Ro],Co);else if(No.isDirectionalLight){var Lo=eo.get(No);if(Lo.color.copy(No.color).multiplyScalar(No.intensity),Lo.direction.setFromMatrixPosition(No.matrixWorld),io.setFromMatrixPosition(No.target.matrixWorld),Lo.direction.sub(io),Lo.direction.transformDirection(_o),No.castShadow){var $o=No.shadow,jo=to.get(No);jo.shadowBias=$o.bias,jo.shadowRadius=$o.radius,jo.shadowMapSize=$o.mapSize,ro.directionalShadow[vo]=jo,ro.directionalShadowMap[vo]=zo,ro.directionalShadowMatrix[vo]=No.shadow.matrix,xo++}ro.directional[vo]=Lo,vo++}else if(No.isSpotLight){var Lo=eo.get(No);if(Lo.position.setFromMatrixPosition(No.matrixWorld),Lo.position.applyMatrix4(_o),Lo.color.copy(Po).multiplyScalar(Co),Lo.distance=Do,Lo.direction.setFromMatrixPosition(No.matrixWorld),io.setFromMatrixPosition(No.target.matrixWorld),Lo.direction.sub(io),Lo.direction.transformDirection(_o),Lo.coneCos=Math.cos(No.angle),Lo.penumbraCos=Math.cos(No.angle*(1-No.penumbra)),Lo.decay=No.decay,No.castShadow){var $o=No.shadow,jo=to.get(No);jo.shadowBias=$o.bias,jo.shadowRadius=$o.radius,jo.shadowMapSize=$o.mapSize,ro.spotShadow[ho]=jo,ro.spotShadowMap[ho]=zo,ro.spotShadowMatrix[ho]=No.shadow.matrix,bo++}ro.spot[ho]=Lo,ho++}else if(No.isRectAreaLight){var Lo=eo.get(No);Lo.color.copy(Po).multiplyScalar(Co),Lo.position.setFromMatrixPosition(No.matrixWorld),Lo.position.applyMatrix4(_o),ao.identity(),oo.copy(No.matrixWorld),oo.premultiply(_o),ao.extractRotation(oo),Lo.halfWidth.set(No.width*.5,0,0),Lo.halfHeight.set(0,No.height*.5,0),Lo.halfWidth.applyMatrix4(ao),Lo.halfHeight.applyMatrix4(ao),ro.rectArea[po]=Lo,po++}else if(No.isPointLight){var Lo=eo.get(No);if(Lo.position.setFromMatrixPosition(No.matrixWorld),Lo.position.applyMatrix4(_o),Lo.color.copy(No.color).multiplyScalar(No.intensity),Lo.distance=No.distance,Lo.decay=No.decay,No.castShadow){var $o=No.shadow,jo=to.get(No);jo.shadowBias=$o.bias,jo.shadowRadius=$o.radius,jo.shadowMapSize=$o.mapSize,jo.shadowCameraNear=$o.camera.near,jo.shadowCameraFar=$o.camera.far,ro.pointShadow[Ao]=jo,ro.pointShadowMap[Ao]=zo,ro.pointShadowMatrix[Ao]=No.shadow.matrix,wo++}ro.point[Ao]=Lo,Ao++}else if(No.isHemisphereLight){var Lo=eo.get(No);Lo.direction.setFromMatrixPosition(No.matrixWorld),Lo.direction.transformDirection(_o),Lo.direction.normalize(),Lo.skyColor.copy(No.color).multiplyScalar(Co),Lo.groundColor.copy(No.groundColor).multiplyScalar(Co),ro.hemi[Mo]=Lo,Mo++}}ro.ambient[0]=fo,ro.ambient[1]=mo,ro.ambient[2]=go;var Wo=ro.hash;(Wo.directionalLength!==vo||Wo.pointLength!==Ao||Wo.spotLength!==ho||Wo.rectAreaLength!==po||Wo.hemiLength!==Mo||Wo.numDirectionalShadows!==xo||Wo.numPointShadows!==wo||Wo.numSpotShadows!==bo)&&(ro.directional.length=vo,ro.spot.length=ho,ro.rectArea.length=po,ro.point.length=Ao,ro.hemi.length=Mo,ro.directionalShadow.length=xo,ro.directionalShadowMap.length=xo,ro.pointShadow.length=wo,ro.pointShadowMap.length=wo,ro.spotShadow.length=bo,ro.spotShadowMap.length=bo,ro.directionalShadowMatrix.length=xo,ro.pointShadowMatrix.length=wo,ro.spotShadowMatrix.length=bo,Wo.directionalLength=vo,Wo.pointLength=Ao,Wo.spotLength=ho,Wo.rectAreaLength=po,Wo.hemiLength=Mo,Wo.numDirectionalShadows=xo,Wo.numPointShadows=wo,Wo.numSpotShadows=bo,ro.version=nextVersion++)}return{setup:so,state:ro}}function WebGLRenderState(){var eo=new WebGLLights,to=[],ro=[];function no(){to.length=0,ro.length=0}function io(uo){to.push(uo)}function oo(uo){ro.push(uo)}function ao(uo){eo.setup(to,ro,uo)}var so={lightsArray:to,shadowsArray:ro,lights:eo};return{init:no,state:so,setupLights:ao,pushLight:io,pushShadow:oo}}function WebGLRenderStates(){var eo=new WeakMap;function to(io){var oo=io.target;oo.removeEventListener("dispose",to),eo.delete(oo)}function ro(io,oo){var ao;return eo.has(io)===!1?(ao=new WebGLRenderState,eo.set(io,new WeakMap),eo.get(io).set(oo,ao),io.addEventListener("dispose",to)):eo.get(io).has(oo)===!1?(ao=new WebGLRenderState,eo.get(io).set(oo,ao)):ao=eo.get(io).get(oo),ao}function no(){eo=new WeakMap}return{get:ro,dispose:no}}function MeshDepthMaterial(eo){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(eo)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.depthPacking=eo.depthPacking,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.map=eo.map,this.alphaMap=eo.alphaMap,this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this};function MeshDistanceMaterial(eo){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(eo)}MeshDistanceMaterial.prototype=Object.create(Material.prototype);MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial;MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;MeshDistanceMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.referencePosition.copy(eo.referencePosition),this.nearDistance=eo.nearDistance,this.farDistance=eo.farDistance,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.map=eo.map,this.alphaMap=eo.alphaMap,this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this};var vsm_frag=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,vsm_vert=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function WebGLShadowMap(eo,to,ro){var no=new Frustum,io=new Vector2,oo=new Vector2,ao=new Vector4,so=[],uo=[],lo={},co={0:BackSide,1:FrontSide,2:DoubleSide},fo=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vsm_vert,fragmentShader:vsm_frag}),mo=fo.clone();mo.defines.HORIZONAL_PASS=1;var go=new BufferGeometry;go.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var yo=new Mesh(go,fo),vo=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(wo,bo,_o){if(vo.enabled!==!1&&!(vo.autoUpdate===!1&&vo.needsUpdate===!1)&&wo.length!==0){var To=eo.getRenderTarget(),No=eo.getActiveCubeFace(),Po=eo.getActiveMipmapLevel(),Co=eo.state;Co.setBlending(NoBlending),Co.buffers.color.setClear(1,1,1,1),Co.buffers.depth.setTest(!0),Co.setScissorTest(!1);for(var Do=0,zo=wo.length;Do<zo;Do++){var Ro=wo[Do],Lo=Ro.shadow;if(Lo===void 0){console.warn("THREE.WebGLShadowMap:",Ro,"has no shadow.");continue}io.copy(Lo.mapSize);var $o=Lo.getFrameExtents();if(io.multiply($o),oo.copy(Lo.mapSize),(io.x>ro||io.y>ro)&&(io.x>ro&&(oo.x=Math.floor(ro/$o.x),io.x=oo.x*$o.x,Lo.mapSize.x=oo.x),io.y>ro&&(oo.y=Math.floor(ro/$o.y),io.y=oo.y*$o.y,Lo.mapSize.y=oo.y)),Lo.map===null&&!Lo.isPointLightShadow&&this.type===VSMShadowMap){var jo={minFilter:LinearFilter,magFilter:LinearFilter,format:RGBAFormat};Lo.map=new WebGLRenderTarget(io.x,io.y,jo),Lo.map.texture.name=Ro.name+".shadowMap",Lo.mapPass=new WebGLRenderTarget(io.x,io.y,jo),Lo.camera.updateProjectionMatrix()}if(Lo.map===null){var jo={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};Lo.map=new WebGLRenderTarget(io.x,io.y,jo),Lo.map.texture.name=Ro.name+".shadowMap",Lo.camera.updateProjectionMatrix()}eo.setRenderTarget(Lo.map),eo.clear();for(var Wo=Lo.getViewportCount(),Ko=0;Ko<Wo;Ko++){var Jo=Lo.getViewport(Ko);ao.set(oo.x*Jo.x,oo.y*Jo.y,oo.x*Jo.z,oo.y*Jo.w),Co.viewport(ao),Lo.updateMatrices(Ro,Ko),no=Lo.getFrustum(),xo(bo,_o,Lo.camera,Ro,this.type)}!Lo.isPointLightShadow&&this.type===VSMShadowMap&&Ao(Lo,_o)}vo.needsUpdate=!1,eo.setRenderTarget(To,No,Po)}};function Ao(wo,bo){var _o=to.update(yo);fo.uniforms.shadow_pass.value=wo.map.texture,fo.uniforms.resolution.value=wo.mapSize,fo.uniforms.radius.value=wo.radius,eo.setRenderTarget(wo.mapPass),eo.clear(),eo.renderBufferDirect(bo,null,_o,fo,yo,null),mo.uniforms.shadow_pass.value=wo.mapPass.texture,mo.uniforms.resolution.value=wo.mapSize,mo.uniforms.radius.value=wo.radius,eo.setRenderTarget(wo.map),eo.clear(),eo.renderBufferDirect(bo,null,_o,mo,yo,null)}function ho(wo,bo,_o){var To=wo<<0|bo<<1|_o<<2,No=so[To];return No===void 0&&(No=new MeshDepthMaterial({depthPacking:RGBADepthPacking,morphTargets:wo,skinning:bo}),so[To]=No),No}function po(wo,bo,_o){var To=wo<<0|bo<<1|_o<<2,No=uo[To];return No===void 0&&(No=new MeshDistanceMaterial({morphTargets:wo,skinning:bo}),uo[To]=No),No}function Mo(wo,bo,_o,To,No,Po,Co){var Do=null,zo=ho,Ro=wo.customDepthMaterial;if(To.isPointLight===!0&&(zo=po,Ro=wo.customDistanceMaterial),Ro===void 0){var Lo=!1;_o.morphTargets===!0&&(Lo=bo.morphAttributes&&bo.morphAttributes.position&&bo.morphAttributes.position.length>0);var $o=!1;wo.isSkinnedMesh===!0&&(_o.skinning===!0?$o=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",wo));var jo=wo.isInstancedMesh===!0;Do=zo(Lo,$o,jo)}else Do=Ro;if(eo.localClippingEnabled&&_o.clipShadows===!0&&_o.clippingPlanes.length!==0){var Wo=Do.uuid,Ko=_o.uuid,Jo=lo[Wo];Jo===void 0&&(Jo={},lo[Wo]=Jo);var Go=Jo[Ko];Go===void 0&&(Go=Do.clone(),Jo[Ko]=Go),Do=Go}return Do.visible=_o.visible,Do.wireframe=_o.wireframe,Co===VSMShadowMap?Do.side=_o.shadowSide!==null?_o.shadowSide:_o.side:Do.side=_o.shadowSide!==null?_o.shadowSide:co[_o.side],Do.clipShadows=_o.clipShadows,Do.clippingPlanes=_o.clippingPlanes,Do.clipIntersection=_o.clipIntersection,Do.wireframeLinewidth=_o.wireframeLinewidth,Do.linewidth=_o.linewidth,To.isPointLight===!0&&Do.isMeshDistanceMaterial===!0&&(Do.referencePosition.setFromMatrixPosition(To.matrixWorld),Do.nearDistance=No,Do.farDistance=Po),Do}function xo(wo,bo,_o,To,No){if(wo.visible!==!1){var Po=wo.layers.test(bo.layers);if(Po&&(wo.isMesh||wo.isLine||wo.isPoints)&&(wo.castShadow||wo.receiveShadow&&No===VSMShadowMap)&&(!wo.frustumCulled||no.intersectsObject(wo))){wo.modelViewMatrix.multiplyMatrices(_o.matrixWorldInverse,wo.matrixWorld);var Co=to.update(wo),Do=wo.material;if(Array.isArray(Do))for(var zo=Co.groups,Ro=0,Lo=zo.length;Ro<Lo;Ro++){var $o=zo[Ro],jo=Do[$o.materialIndex];if(jo&&jo.visible){var Wo=Mo(wo,Co,jo,To,_o.near,_o.far,No);eo.renderBufferDirect(_o,null,Co,Wo,wo,$o)}}else if(Do.visible){var Wo=Mo(wo,Co,Do,To,_o.near,_o.far,No);eo.renderBufferDirect(_o,null,Co,Wo,wo,null)}}for(var Ko=wo.children,Jo=0,Go=Ko.length;Jo<Go;Jo++)xo(Ko[Jo],bo,_o,To,No)}}}function WebGLState(eo,to,ro){var no=ro.isWebGL2;function io(){var qo=!1,vu=new Vector4,Mu=null,Lu=new Vector4(0,0,0,0);return{setMask:function(Au){Mu!==Au&&!qo&&(eo.colorMask(Au,Au,Au,Au),Mu=Au)},setLocked:function(Au){qo=Au},setClear:function(Au,Nu,Vu,Wu,ol){ol===!0&&(Au*=Wu,Nu*=Wu,Vu*=Wu),vu.set(Au,Nu,Vu,Wu),Lu.equals(vu)===!1&&(eo.clearColor(Au,Nu,Vu,Wu),Lu.copy(vu))},reset:function(){qo=!1,Mu=null,Lu.set(-1,0,0,0)}}}function oo(){var qo=!1,vu=null,Mu=null,Lu=null;return{setTest:function(Au){Au?uu(2929):Js(2929)},setMask:function(Au){vu!==Au&&!qo&&(eo.depthMask(Au),vu=Au)},setFunc:function(Au){if(Mu!==Au){if(Au)switch(Au){case NeverDepth:eo.depthFunc(512);break;case AlwaysDepth:eo.depthFunc(519);break;case LessDepth:eo.depthFunc(513);break;case LessEqualDepth:eo.depthFunc(515);break;case EqualDepth:eo.depthFunc(514);break;case GreaterEqualDepth:eo.depthFunc(518);break;case GreaterDepth:eo.depthFunc(516);break;case NotEqualDepth:eo.depthFunc(517);break;default:eo.depthFunc(515)}else eo.depthFunc(515);Mu=Au}},setLocked:function(Au){qo=Au},setClear:function(Au){Lu!==Au&&(eo.clearDepth(Au),Lu=Au)},reset:function(){qo=!1,vu=null,Mu=null,Lu=null}}}function ao(){var qo=!1,vu=null,Mu=null,Lu=null,Au=null,Nu=null,Vu=null,Wu=null,ol=null;return{setTest:function(bu){qo||(bu?uu(2960):Js(2960))},setMask:function(bu){vu!==bu&&!qo&&(eo.stencilMask(bu),vu=bu)},setFunc:function(bu,tl,al){(Mu!==bu||Lu!==tl||Au!==al)&&(eo.stencilFunc(bu,tl,al),Mu=bu,Lu=tl,Au=al)},setOp:function(bu,tl,al){(Nu!==bu||Vu!==tl||Wu!==al)&&(eo.stencilOp(bu,tl,al),Nu=bu,Vu=tl,Wu=al)},setLocked:function(bu){qo=bu},setClear:function(bu){ol!==bu&&(eo.clearStencil(bu),ol=bu)},reset:function(){qo=!1,vu=null,Mu=null,Lu=null,Au=null,Nu=null,Vu=null,Wu=null,ol=null}}}var so=new io,uo=new oo,lo=new ao,co=eo.getParameter(34921),fo=new Uint8Array(co),mo=new Uint8Array(co),go=new Uint8Array(co),yo={},vo=null,Ao=null,ho=null,po=null,Mo=null,xo=null,wo=null,bo=null,_o=null,To=!1,No=null,Po=null,Co=null,Do=null,zo=null,Ro=eo.getParameter(35661),Lo=!1,$o=0,jo=eo.getParameter(7938);jo.indexOf("WebGL")!==-1?($o=parseFloat(/^WebGL\ ([0-9])/.exec(jo)[1]),Lo=$o>=1):jo.indexOf("OpenGL ES")!==-1&&($o=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(jo)[1]),Lo=$o>=2);var Wo=null,Ko={},Jo=new Vector4,Go=new Vector4;function Xo(qo,vu,Mu){var Lu=new Uint8Array(4),Au=eo.createTexture();eo.bindTexture(qo,Au),eo.texParameteri(qo,10241,9728),eo.texParameteri(qo,10240,9728);for(var Nu=0;Nu<Mu;Nu++)eo.texImage2D(vu+Nu,0,6408,1,1,0,6408,5121,Lu);return Au}var va={};va[3553]=Xo(3553,3553,1),va[34067]=Xo(34067,34069,6),so.setClear(0,0,0,1),uo.setClear(1),lo.setClear(0),uu(2929),uo.setFunc(LessEqualDepth),Fo(!1),Vo(CullFaceBack),uu(2884),Ru(NoBlending);function tu(){for(var qo=0,vu=fo.length;qo<vu;qo++)fo[qo]=0}function Zs(qo){ga(qo,0)}function ga(qo,vu){if(fo[qo]=1,mo[qo]===0&&(eo.enableVertexAttribArray(qo),mo[qo]=1),go[qo]!==vu){var Mu=no?eo:to.get("ANGLE_instanced_arrays");Mu[no?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](qo,vu),go[qo]=vu}}function qs(){for(var qo=0,vu=mo.length;qo!==vu;++qo)mo[qo]!==fo[qo]&&(eo.disableVertexAttribArray(qo),mo[qo]=0)}function su(qo,vu,Mu,Lu,Au,Nu){no===!0&&(Mu===5124||Mu===5125)?eo.vertexAttribIPointer(qo,vu,Mu,Lu,Au,Nu):eo.vertexAttribPointer(qo,vu,Mu,Lu,Au,Nu)}function uu(qo){yo[qo]!==!0&&(eo.enable(qo),yo[qo]=!0)}function Js(qo){yo[qo]!==!1&&(eo.disable(qo),yo[qo]=!1)}function Xs(qo){return vo!==qo?(eo.useProgram(qo),vo=qo,!0):!1}var iu={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(no)iu[MinEquation]=32775,iu[MaxEquation]=32776;else{var hu=to.get("EXT_blend_minmax");hu!==null&&(iu[MinEquation]=hu.MIN_EXT,iu[MaxEquation]=hu.MAX_EXT)}var yu={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function Ru(qo,vu,Mu,Lu,Au,Nu,Vu,Wu){if(qo===NoBlending){Ao&&(Js(3042),Ao=!1);return}if(Ao||(uu(3042),Ao=!0),qo!==CustomBlending){if(qo!==ho||Wu!==To){if((po!==AddEquation||wo!==AddEquation)&&(eo.blendEquation(32774),po=AddEquation,wo=AddEquation),Wu)switch(qo){case NormalBlending:eo.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:eo.blendFunc(1,1);break;case SubtractiveBlending:eo.blendFuncSeparate(0,0,769,771);break;case MultiplyBlending:eo.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",qo);break}else switch(qo){case NormalBlending:eo.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:eo.blendFunc(770,1);break;case SubtractiveBlending:eo.blendFunc(0,769);break;case MultiplyBlending:eo.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",qo);break}Mo=null,xo=null,bo=null,_o=null,ho=qo,To=Wu}return}Au=Au||vu,Nu=Nu||Mu,Vu=Vu||Lu,(vu!==po||Au!==wo)&&(eo.blendEquationSeparate(iu[vu],iu[Au]),po=vu,wo=Au),(Mu!==Mo||Lu!==xo||Nu!==bo||Vu!==_o)&&(eo.blendFuncSeparate(yu[Mu],yu[Lu],yu[Nu],yu[Vu]),Mo=Mu,xo=Lu,bo=Nu,_o=Vu),ho=qo,To=null}function ku(qo,vu){qo.side===DoubleSide?Js(2884):uu(2884);var Mu=qo.side===BackSide;vu&&(Mu=!Mu),Fo(Mu),qo.blending===NormalBlending&&qo.transparent===!1?Ru(NoBlending):Ru(qo.blending,qo.blendEquation,qo.blendSrc,qo.blendDst,qo.blendEquationAlpha,qo.blendSrcAlpha,qo.blendDstAlpha,qo.premultipliedAlpha),uo.setFunc(qo.depthFunc),uo.setTest(qo.depthTest),uo.setMask(qo.depthWrite),so.setMask(qo.colorWrite);var Lu=qo.stencilWrite;lo.setTest(Lu),Lu&&(lo.setMask(qo.stencilWriteMask),lo.setFunc(qo.stencilFunc,qo.stencilRef,qo.stencilFuncMask),lo.setOp(qo.stencilFail,qo.stencilZFail,qo.stencilZPass)),au(qo.polygonOffset,qo.polygonOffsetFactor,qo.polygonOffsetUnits)}function Fo(qo){No!==qo&&(qo?eo.frontFace(2304):eo.frontFace(2305),No=qo)}function Vo(qo){qo!==CullFaceNone?(uu(2884),qo!==Po&&(qo===CullFaceBack?eo.cullFace(1029):qo===CullFaceFront?eo.cullFace(1028):eo.cullFace(1032))):Js(2884),Po=qo}function lu(qo){qo!==Co&&(Lo&&eo.lineWidth(qo),Co=qo)}function au(qo,vu,Mu){qo?(uu(32823),(Do!==vu||zo!==Mu)&&(eo.polygonOffset(vu,Mu),Do=vu,zo=Mu)):Js(32823)}function Tu(qo){qo?uu(3089):Js(3089)}function mu(qo){qo===void 0&&(qo=33984+Ro-1),Wo!==qo&&(eo.activeTexture(qo),Wo=qo)}function gu(qo,vu){Wo===null&&mu();var Mu=Ko[Wo];Mu===void 0&&(Mu={type:void 0,texture:void 0},Ko[Wo]=Mu),(Mu.type!==qo||Mu.texture!==vu)&&(eo.bindTexture(qo,vu||va[qo]),Mu.type=qo,Mu.texture=vu)}function Fu(){var qo=Ko[Wo];qo!==void 0&&qo.type!==void 0&&(eo.bindTexture(qo.type,null),qo.type=void 0,qo.texture=void 0)}function zu(){try{eo.compressedTexImage2D.apply(eo,arguments)}catch(qo){console.error("THREE.WebGLState:",qo)}}function Iu(){try{eo.texImage2D.apply(eo,arguments)}catch(qo){console.error("THREE.WebGLState:",qo)}}function du(){try{eo.texImage3D.apply(eo,arguments)}catch(qo){console.error("THREE.WebGLState:",qo)}}function xu(qo){Jo.equals(qo)===!1&&(eo.scissor(qo.x,qo.y,qo.z,qo.w),Jo.copy(qo))}function pu(qo){Go.equals(qo)===!1&&(eo.viewport(qo.x,qo.y,qo.z,qo.w),Go.copy(qo))}function ou(){for(var qo=0;qo<mo.length;qo++)mo[qo]===1&&(eo.disableVertexAttribArray(qo),mo[qo]=0);yo={},Wo=null,Ko={},vo=null,ho=null,No=null,Po=null,so.reset(),uo.reset(),lo.reset()}return{buffers:{color:so,depth:uo,stencil:lo},initAttributes:tu,enableAttribute:Zs,enableAttributeAndDivisor:ga,disableUnusedAttributes:qs,vertexAttribPointer:su,enable:uu,disable:Js,useProgram:Xs,setBlending:Ru,setMaterial:ku,setFlipSided:Fo,setCullFace:Vo,setLineWidth:lu,setPolygonOffset:au,setScissorTest:Tu,activeTexture:mu,bindTexture:gu,unbindTexture:Fu,compressedTexImage2D:zu,texImage2D:Iu,texImage3D:du,scissor:xu,viewport:pu,reset:ou}}function WebGLTextures(eo,to,ro,no,io,oo,ao){var so=io.isWebGL2,uo=io.maxTextures,lo=io.maxCubemapSize,co=io.maxTextureSize,fo=io.maxSamples,mo=new WeakMap,go,yo=!1;try{yo=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function vo(Fo,Vo){return yo?new OffscreenCanvas(Fo,Vo):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function Ao(Fo,Vo,lu,au){var Tu=1;if((Fo.width>au||Fo.height>au)&&(Tu=au/Math.max(Fo.width,Fo.height)),Tu<1||Vo===!0)if(typeof HTMLImageElement!="undefined"&&Fo instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Fo instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Fo instanceof ImageBitmap){var mu=Vo?MathUtils.floorPowerOfTwo:Math.floor,gu=mu(Tu*Fo.width),Fu=mu(Tu*Fo.height);go===void 0&&(go=vo(gu,Fu));var zu=lu?vo(gu,Fu):go;zu.width=gu,zu.height=Fu;var Iu=zu.getContext("2d");return Iu.drawImage(Fo,0,0,gu,Fu),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fo.width+"x"+Fo.height+") to ("+gu+"x"+Fu+")."),zu}else return"data"in Fo&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fo.width+"x"+Fo.height+")."),Fo;return Fo}function ho(Fo){return MathUtils.isPowerOfTwo(Fo.width)&&MathUtils.isPowerOfTwo(Fo.height)}function po(Fo){return so?!1:Fo.wrapS!==ClampToEdgeWrapping||Fo.wrapT!==ClampToEdgeWrapping||Fo.minFilter!==NearestFilter&&Fo.minFilter!==LinearFilter}function Mo(Fo,Vo){return Fo.generateMipmaps&&Vo&&Fo.minFilter!==NearestFilter&&Fo.minFilter!==LinearFilter}function xo(Fo,Vo,lu,au){eo.generateMipmap(Fo);var Tu=no.get(Vo);Tu.__maxMipLevel=Math.log(Math.max(lu,au))*Math.LOG2E}function wo(Fo,Vo,lu){if(so===!1)return Vo;if(Fo!==null){if(eo[Fo]!==void 0)return eo[Fo];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Fo+"'")}var au=Vo;return Vo===6403&&(lu===5126&&(au=33326),lu===5131&&(au=33325),lu===5121&&(au=33321)),Vo===6407&&(lu===5126&&(au=34837),lu===5131&&(au=34843),lu===5121&&(au=32849)),Vo===6408&&(lu===5126&&(au=34836),lu===5131&&(au=34842),lu===5121&&(au=32856)),(au===33325||au===33326||au===34842||au===34836)&&to.get("EXT_color_buffer_float"),au}function bo(Fo){return Fo===NearestFilter||Fo===NearestMipmapNearestFilter||Fo===NearestMipmapLinearFilter?9728:9729}function _o(Fo){var Vo=Fo.target;Vo.removeEventListener("dispose",_o),No(Vo),Vo.isVideoTexture&&mo.delete(Vo),ao.memory.textures--}function To(Fo){var Vo=Fo.target;Vo.removeEventListener("dispose",To),Po(Vo),ao.memory.textures--}function No(Fo){var Vo=no.get(Fo);Vo.__webglInit!==void 0&&(eo.deleteTexture(Vo.__webglTexture),no.remove(Fo))}function Po(Fo){var Vo=no.get(Fo),lu=no.get(Fo.texture);if(!!Fo){if(lu.__webglTexture!==void 0&&eo.deleteTexture(lu.__webglTexture),Fo.depthTexture&&Fo.depthTexture.dispose(),Fo.isWebGLCubeRenderTarget)for(var au=0;au<6;au++)eo.deleteFramebuffer(Vo.__webglFramebuffer[au]),Vo.__webglDepthbuffer&&eo.deleteRenderbuffer(Vo.__webglDepthbuffer[au]);else eo.deleteFramebuffer(Vo.__webglFramebuffer),Vo.__webglDepthbuffer&&eo.deleteRenderbuffer(Vo.__webglDepthbuffer),Vo.__webglMultisampledFramebuffer&&eo.deleteFramebuffer(Vo.__webglMultisampledFramebuffer),Vo.__webglColorRenderbuffer&&eo.deleteRenderbuffer(Vo.__webglColorRenderbuffer),Vo.__webglDepthRenderbuffer&&eo.deleteRenderbuffer(Vo.__webglDepthRenderbuffer);no.remove(Fo.texture),no.remove(Fo)}}var Co=0;function Do(){Co=0}function zo(){var Fo=Co;return Fo>=uo&&console.warn("THREE.WebGLTextures: Trying to use "+Fo+" texture units while this GPU supports only "+uo),Co+=1,Fo}function Ro(Fo,Vo){var lu=no.get(Fo);if(Fo.isVideoTexture&&iu(Fo),Fo.version>0&&lu.__version!==Fo.version){var au=Fo.image;if(au===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(au.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{va(lu,Fo,Vo);return}}ro.activeTexture(33984+Vo),ro.bindTexture(3553,lu.__webglTexture)}function Lo(Fo,Vo){var lu=no.get(Fo);if(Fo.version>0&&lu.__version!==Fo.version){va(lu,Fo,Vo);return}ro.activeTexture(33984+Vo),ro.bindTexture(35866,lu.__webglTexture)}function $o(Fo,Vo){var lu=no.get(Fo);if(Fo.version>0&&lu.__version!==Fo.version){va(lu,Fo,Vo);return}ro.activeTexture(33984+Vo),ro.bindTexture(32879,lu.__webglTexture)}function jo(Fo,Vo){if(Fo.image.length===6){var lu=no.get(Fo);if(Fo.version>0&&lu.__version!==Fo.version){Xo(lu,Fo),ro.activeTexture(33984+Vo),ro.bindTexture(34067,lu.__webglTexture),eo.pixelStorei(37440,Fo.flipY);for(var au=Fo&&(Fo.isCompressedTexture||Fo.image[0].isCompressedTexture),Tu=Fo.image[0]&&Fo.image[0].isDataTexture,mu=[],gu=0;gu<6;gu++)!au&&!Tu?mu[gu]=Ao(Fo.image[gu],!1,!0,lo):mu[gu]=Tu?Fo.image[gu].image:Fo.image[gu];var Fu=mu[0],zu=ho(Fu)||so,Iu=oo.convert(Fo.format),du=oo.convert(Fo.type),xu=wo(Fo.internalFormat,Iu,du);Go(34067,Fo,zu);var pu;if(au){for(var gu=0;gu<6;gu++){pu=mu[gu].mipmaps;for(var ou=0;ou<pu.length;ou++){var qo=pu[ou];Fo.format!==RGBAFormat&&Fo.format!==RGBFormat?Iu!==null?ro.compressedTexImage2D(34069+gu,ou,xu,qo.width,qo.height,0,qo.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ro.texImage2D(34069+gu,ou,xu,qo.width,qo.height,0,Iu,du,qo.data)}}lu.__maxMipLevel=pu.length-1}else{pu=Fo.mipmaps;for(var gu=0;gu<6;gu++)if(Tu){ro.texImage2D(34069+gu,0,xu,mu[gu].width,mu[gu].height,0,Iu,du,mu[gu].data);for(var ou=0;ou<pu.length;ou++){var qo=pu[ou],vu=qo.image[gu].image;ro.texImage2D(34069+gu,ou+1,xu,vu.width,vu.height,0,Iu,du,vu.data)}}else{ro.texImage2D(34069+gu,0,xu,Iu,du,mu[gu]);for(var ou=0;ou<pu.length;ou++){var qo=pu[ou];ro.texImage2D(34069+gu,ou+1,xu,Iu,du,qo.image[gu])}}lu.__maxMipLevel=pu.length}Mo(Fo,zu)&&xo(34067,Fo,Fu.width,Fu.height),lu.__version=Fo.version,Fo.onUpdate&&Fo.onUpdate(Fo)}else ro.activeTexture(33984+Vo),ro.bindTexture(34067,lu.__webglTexture)}}function Wo(Fo,Vo){ro.activeTexture(33984+Vo),ro.bindTexture(34067,no.get(Fo).__webglTexture)}var Ko={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Jo={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Go(Fo,Vo,lu){lu?(eo.texParameteri(Fo,10242,Ko[Vo.wrapS]),eo.texParameteri(Fo,10243,Ko[Vo.wrapT]),(Fo===32879||Fo===35866)&&eo.texParameteri(Fo,32882,Ko[Vo.wrapR]),eo.texParameteri(Fo,10240,Jo[Vo.magFilter]),eo.texParameteri(Fo,10241,Jo[Vo.minFilter])):(eo.texParameteri(Fo,10242,33071),eo.texParameteri(Fo,10243,33071),(Fo===32879||Fo===35866)&&eo.texParameteri(Fo,32882,33071),(Vo.wrapS!==ClampToEdgeWrapping||Vo.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),eo.texParameteri(Fo,10240,bo(Vo.magFilter)),eo.texParameteri(Fo,10241,bo(Vo.minFilter)),Vo.minFilter!==NearestFilter&&Vo.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var au=to.get("EXT_texture_filter_anisotropic");if(au){if(Vo.type===FloatType&&to.get("OES_texture_float_linear")===null||Vo.type===HalfFloatType&&(so||to.get("OES_texture_half_float_linear"))===null)return;(Vo.anisotropy>1||no.get(Vo).__currentAnisotropy)&&(eo.texParameterf(Fo,au.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Vo.anisotropy,io.getMaxAnisotropy())),no.get(Vo).__currentAnisotropy=Vo.anisotropy)}}function Xo(Fo,Vo){Fo.__webglInit===void 0&&(Fo.__webglInit=!0,Vo.addEventListener("dispose",_o),Fo.__webglTexture=eo.createTexture(),ao.memory.textures++)}function va(Fo,Vo,lu){var au=3553;Vo.isDataTexture2DArray&&(au=35866),Vo.isDataTexture3D&&(au=32879),Xo(Fo,Vo),ro.activeTexture(33984+lu),ro.bindTexture(au,Fo.__webglTexture),eo.pixelStorei(37440,Vo.flipY),eo.pixelStorei(37441,Vo.premultiplyAlpha),eo.pixelStorei(3317,Vo.unpackAlignment);var Tu=po(Vo)&&ho(Vo.image)===!1,mu=Ao(Vo.image,Tu,!1,co),gu=ho(mu)||so,Fu=oo.convert(Vo.format),zu=oo.convert(Vo.type),Iu=wo(Vo.internalFormat,Fu,zu);Go(au,Vo,gu);var du,xu=Vo.mipmaps;if(Vo.isDepthTexture)Iu=6402,so?Vo.type===FloatType?Iu=36012:Vo.type===UnsignedIntType?Iu=33190:Vo.type===UnsignedInt248Type?Iu=35056:Iu=33189:Vo.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Vo.format===DepthFormat&&Iu===6402&&Vo.type!==UnsignedShortType&&Vo.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Vo.type=UnsignedShortType,zu=oo.convert(Vo.type)),Vo.format===DepthStencilFormat&&Iu===6402&&(Iu=34041,Vo.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Vo.type=UnsignedInt248Type,zu=oo.convert(Vo.type))),ro.texImage2D(3553,0,Iu,mu.width,mu.height,0,Fu,zu,null);else if(Vo.isDataTexture)if(xu.length>0&&gu){for(var pu=0,ou=xu.length;pu<ou;pu++)du=xu[pu],ro.texImage2D(3553,pu,Iu,du.width,du.height,0,Fu,zu,du.data);Vo.generateMipmaps=!1,Fo.__maxMipLevel=xu.length-1}else ro.texImage2D(3553,0,Iu,mu.width,mu.height,0,Fu,zu,mu.data),Fo.__maxMipLevel=0;else if(Vo.isCompressedTexture){for(var pu=0,ou=xu.length;pu<ou;pu++)du=xu[pu],Vo.format!==RGBAFormat&&Vo.format!==RGBFormat?Fu!==null?ro.compressedTexImage2D(3553,pu,Iu,du.width,du.height,0,du.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ro.texImage2D(3553,pu,Iu,du.width,du.height,0,Fu,zu,du.data);Fo.__maxMipLevel=xu.length-1}else if(Vo.isDataTexture2DArray)ro.texImage3D(35866,0,Iu,mu.width,mu.height,mu.depth,0,Fu,zu,mu.data),Fo.__maxMipLevel=0;else if(Vo.isDataTexture3D)ro.texImage3D(32879,0,Iu,mu.width,mu.height,mu.depth,0,Fu,zu,mu.data),Fo.__maxMipLevel=0;else if(xu.length>0&&gu){for(var pu=0,ou=xu.length;pu<ou;pu++)du=xu[pu],ro.texImage2D(3553,pu,Iu,Fu,zu,du);Vo.generateMipmaps=!1,Fo.__maxMipLevel=xu.length-1}else ro.texImage2D(3553,0,Iu,Fu,zu,mu),Fo.__maxMipLevel=0;Mo(Vo,gu)&&xo(au,Vo,mu.width,mu.height),Fo.__version=Vo.version,Vo.onUpdate&&Vo.onUpdate(Vo)}function tu(Fo,Vo,lu,au){var Tu=oo.convert(Vo.texture.format),mu=oo.convert(Vo.texture.type),gu=wo(Vo.texture.internalFormat,Tu,mu);ro.texImage2D(au,0,gu,Vo.width,Vo.height,0,Tu,mu,null),eo.bindFramebuffer(36160,Fo),eo.framebufferTexture2D(36160,lu,au,no.get(Vo.texture).__webglTexture,0),eo.bindFramebuffer(36160,null)}function Zs(Fo,Vo,lu){if(eo.bindRenderbuffer(36161,Fo),Vo.depthBuffer&&!Vo.stencilBuffer){var au=33189;if(lu){var Tu=Vo.depthTexture;Tu&&Tu.isDepthTexture&&(Tu.type===FloatType?au=36012:Tu.type===UnsignedIntType&&(au=33190));var mu=Xs(Vo);eo.renderbufferStorageMultisample(36161,mu,au,Vo.width,Vo.height)}else eo.renderbufferStorage(36161,au,Vo.width,Vo.height);eo.framebufferRenderbuffer(36160,36096,36161,Fo)}else if(Vo.depthBuffer&&Vo.stencilBuffer){if(lu){var mu=Xs(Vo);eo.renderbufferStorageMultisample(36161,mu,35056,Vo.width,Vo.height)}else eo.renderbufferStorage(36161,34041,Vo.width,Vo.height);eo.framebufferRenderbuffer(36160,33306,36161,Fo)}else{var gu=oo.convert(Vo.texture.format),Fu=oo.convert(Vo.texture.type),au=wo(Vo.texture.internalFormat,gu,Fu);if(lu){var mu=Xs(Vo);eo.renderbufferStorageMultisample(36161,mu,au,Vo.width,Vo.height)}else eo.renderbufferStorage(36161,au,Vo.width,Vo.height)}eo.bindRenderbuffer(36161,null)}function ga(Fo,Vo){var lu=Vo&&Vo.isWebGLCubeRenderTarget;if(lu)throw new Error("Depth Texture with cube render targets is not supported");if(eo.bindFramebuffer(36160,Fo),!(Vo.depthTexture&&Vo.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!no.get(Vo.depthTexture).__webglTexture||Vo.depthTexture.image.width!==Vo.width||Vo.depthTexture.image.height!==Vo.height)&&(Vo.depthTexture.image.width=Vo.width,Vo.depthTexture.image.height=Vo.height,Vo.depthTexture.needsUpdate=!0),Ro(Vo.depthTexture,0);var au=no.get(Vo.depthTexture).__webglTexture;if(Vo.depthTexture.format===DepthFormat)eo.framebufferTexture2D(36160,36096,3553,au,0);else if(Vo.depthTexture.format===DepthStencilFormat)eo.framebufferTexture2D(36160,33306,3553,au,0);else throw new Error("Unknown depthTexture format")}function qs(Fo){var Vo=no.get(Fo),lu=Fo.isWebGLCubeRenderTarget===!0;if(Fo.depthTexture){if(lu)throw new Error("target.depthTexture not supported in Cube render targets");ga(Vo.__webglFramebuffer,Fo)}else if(lu){Vo.__webglDepthbuffer=[];for(var au=0;au<6;au++)eo.bindFramebuffer(36160,Vo.__webglFramebuffer[au]),Vo.__webglDepthbuffer[au]=eo.createRenderbuffer(),Zs(Vo.__webglDepthbuffer[au],Fo,!1)}else eo.bindFramebuffer(36160,Vo.__webglFramebuffer),Vo.__webglDepthbuffer=eo.createRenderbuffer(),Zs(Vo.__webglDepthbuffer,Fo,!1);eo.bindFramebuffer(36160,null)}function su(Fo){var Vo=no.get(Fo),lu=no.get(Fo.texture);Fo.addEventListener("dispose",To),lu.__webglTexture=eo.createTexture(),ao.memory.textures++;var au=Fo.isWebGLCubeRenderTarget===!0,Tu=Fo.isWebGLMultisampleRenderTarget===!0,mu=ho(Fo)||so;if(so&&Fo.texture.format===RGBFormat&&(Fo.texture.type===FloatType||Fo.texture.type===HalfFloatType)&&(Fo.texture.format=RGBAFormat,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),au){Vo.__webglFramebuffer=[];for(var gu=0;gu<6;gu++)Vo.__webglFramebuffer[gu]=eo.createFramebuffer()}else if(Vo.__webglFramebuffer=eo.createFramebuffer(),Tu)if(so){Vo.__webglMultisampledFramebuffer=eo.createFramebuffer(),Vo.__webglColorRenderbuffer=eo.createRenderbuffer(),eo.bindRenderbuffer(36161,Vo.__webglColorRenderbuffer);var Fu=oo.convert(Fo.texture.format),zu=oo.convert(Fo.texture.type),Iu=wo(Fo.texture.internalFormat,Fu,zu),du=Xs(Fo);eo.renderbufferStorageMultisample(36161,du,Iu,Fo.width,Fo.height),eo.bindFramebuffer(36160,Vo.__webglMultisampledFramebuffer),eo.framebufferRenderbuffer(36160,36064,36161,Vo.__webglColorRenderbuffer),eo.bindRenderbuffer(36161,null),Fo.depthBuffer&&(Vo.__webglDepthRenderbuffer=eo.createRenderbuffer(),Zs(Vo.__webglDepthRenderbuffer,Fo,!0)),eo.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(au){ro.bindTexture(34067,lu.__webglTexture),Go(34067,Fo.texture,mu);for(var gu=0;gu<6;gu++)tu(Vo.__webglFramebuffer[gu],Fo,36064,34069+gu);Mo(Fo.texture,mu)&&xo(34067,Fo.texture,Fo.width,Fo.height),ro.bindTexture(34067,null)}else ro.bindTexture(3553,lu.__webglTexture),Go(3553,Fo.texture,mu),tu(Vo.__webglFramebuffer,Fo,36064,3553),Mo(Fo.texture,mu)&&xo(3553,Fo.texture,Fo.width,Fo.height),ro.bindTexture(3553,null);Fo.depthBuffer&&qs(Fo)}function uu(Fo){var Vo=Fo.texture,lu=ho(Fo)||so;if(Mo(Vo,lu)){var au=Fo.isWebGLCubeRenderTarget?34067:3553,Tu=no.get(Vo).__webglTexture;ro.bindTexture(au,Tu),xo(au,Vo,Fo.width,Fo.height),ro.bindTexture(au,null)}}function Js(Fo){if(Fo.isWebGLMultisampleRenderTarget)if(so){var Vo=no.get(Fo);eo.bindFramebuffer(36008,Vo.__webglMultisampledFramebuffer),eo.bindFramebuffer(36009,Vo.__webglFramebuffer);var lu=Fo.width,au=Fo.height,Tu=16384;Fo.depthBuffer&&(Tu|=256),Fo.stencilBuffer&&(Tu|=1024),eo.blitFramebuffer(0,0,lu,au,0,0,lu,au,Tu,9728),eo.bindFramebuffer(36160,Vo.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Xs(Fo){return so&&Fo.isWebGLMultisampleRenderTarget?Math.min(fo,Fo.samples):0}function iu(Fo){var Vo=ao.render.frame;mo.get(Fo)!==Vo&&(mo.set(Fo,Vo),Fo.update())}var hu=!1,yu=!1;function Ru(Fo,Vo){Fo&&Fo.isWebGLRenderTarget&&(hu===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),hu=!0),Fo=Fo.texture),Ro(Fo,Vo)}function ku(Fo,Vo){Fo&&Fo.isWebGLCubeRenderTarget&&(yu===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),yu=!0),Fo=Fo.texture),Fo&&Fo.isCubeTexture||Array.isArray(Fo.image)&&Fo.image.length===6?jo(Fo,Vo):Wo(Fo,Vo)}this.allocateTextureUnit=zo,this.resetTextureUnits=Do,this.setTexture2D=Ro,this.setTexture2DArray=Lo,this.setTexture3D=$o,this.setTextureCube=jo,this.setTextureCubeDynamic=Wo,this.setupRenderTarget=su,this.updateRenderTargetMipmap=uu,this.updateMultisampleRenderTarget=Js,this.safeSetTexture2D=Ru,this.safeSetTextureCube=ku}function WebGLUtils(eo,to,ro){var no=ro.isWebGL2;function io(oo){var ao;if(oo===UnsignedByteType)return 5121;if(oo===UnsignedShort4444Type)return 32819;if(oo===UnsignedShort5551Type)return 32820;if(oo===UnsignedShort565Type)return 33635;if(oo===ByteType)return 5120;if(oo===ShortType)return 5122;if(oo===UnsignedShortType)return 5123;if(oo===IntType)return 5124;if(oo===UnsignedIntType)return 5125;if(oo===FloatType)return 5126;if(oo===HalfFloatType)return no?5131:(ao=to.get("OES_texture_half_float"),ao!==null?ao.HALF_FLOAT_OES:null);if(oo===AlphaFormat)return 6406;if(oo===RGBFormat)return 6407;if(oo===RGBAFormat)return 6408;if(oo===LuminanceFormat)return 6409;if(oo===LuminanceAlphaFormat)return 6410;if(oo===DepthFormat)return 6402;if(oo===DepthStencilFormat)return 34041;if(oo===RedFormat)return 6403;if(oo===RedIntegerFormat)return 36244;if(oo===RGFormat)return 33319;if(oo===RGIntegerFormat)return 33320;if(oo===RGBIntegerFormat)return 36248;if(oo===RGBAIntegerFormat)return 36249;if(oo===RGB_S3TC_DXT1_Format||oo===RGBA_S3TC_DXT1_Format||oo===RGBA_S3TC_DXT3_Format||oo===RGBA_S3TC_DXT5_Format)if(ao=to.get("WEBGL_compressed_texture_s3tc"),ao!==null){if(oo===RGB_S3TC_DXT1_Format)return ao.COMPRESSED_RGB_S3TC_DXT1_EXT;if(oo===RGBA_S3TC_DXT1_Format)return ao.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(oo===RGBA_S3TC_DXT3_Format)return ao.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(oo===RGBA_S3TC_DXT5_Format)return ao.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(oo===RGB_PVRTC_4BPPV1_Format||oo===RGB_PVRTC_2BPPV1_Format||oo===RGBA_PVRTC_4BPPV1_Format||oo===RGBA_PVRTC_2BPPV1_Format)if(ao=to.get("WEBGL_compressed_texture_pvrtc"),ao!==null){if(oo===RGB_PVRTC_4BPPV1_Format)return ao.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(oo===RGB_PVRTC_2BPPV1_Format)return ao.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(oo===RGBA_PVRTC_4BPPV1_Format)return ao.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(oo===RGBA_PVRTC_2BPPV1_Format)return ao.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(oo===RGB_ETC1_Format)return ao=to.get("WEBGL_compressed_texture_etc1"),ao!==null?ao.COMPRESSED_RGB_ETC1_WEBGL:null;if((oo===RGB_ETC2_Format||oo===RGBA_ETC2_EAC_Format)&&(ao=to.get("WEBGL_compressed_texture_etc"),ao!==null)){if(oo===RGB_ETC2_Format)return ao.COMPRESSED_RGB8_ETC2;if(oo===RGBA_ETC2_EAC_Format)return ao.COMPRESSED_RGBA8_ETC2_EAC}if(oo===RGBA_ASTC_4x4_Format||oo===RGBA_ASTC_5x4_Format||oo===RGBA_ASTC_5x5_Format||oo===RGBA_ASTC_6x5_Format||oo===RGBA_ASTC_6x6_Format||oo===RGBA_ASTC_8x5_Format||oo===RGBA_ASTC_8x6_Format||oo===RGBA_ASTC_8x8_Format||oo===RGBA_ASTC_10x5_Format||oo===RGBA_ASTC_10x6_Format||oo===RGBA_ASTC_10x8_Format||oo===RGBA_ASTC_10x10_Format||oo===RGBA_ASTC_12x10_Format||oo===RGBA_ASTC_12x12_Format||oo===SRGB8_ALPHA8_ASTC_4x4_Format||oo===SRGB8_ALPHA8_ASTC_5x4_Format||oo===SRGB8_ALPHA8_ASTC_5x5_Format||oo===SRGB8_ALPHA8_ASTC_6x5_Format||oo===SRGB8_ALPHA8_ASTC_6x6_Format||oo===SRGB8_ALPHA8_ASTC_8x5_Format||oo===SRGB8_ALPHA8_ASTC_8x6_Format||oo===SRGB8_ALPHA8_ASTC_8x8_Format||oo===SRGB8_ALPHA8_ASTC_10x5_Format||oo===SRGB8_ALPHA8_ASTC_10x6_Format||oo===SRGB8_ALPHA8_ASTC_10x8_Format||oo===SRGB8_ALPHA8_ASTC_10x10_Format||oo===SRGB8_ALPHA8_ASTC_12x10_Format||oo===SRGB8_ALPHA8_ASTC_12x12_Format)return ao=to.get("WEBGL_compressed_texture_astc"),ao!==null?oo:null;if(oo===RGBA_BPTC_Format)return ao=to.get("EXT_texture_compression_bptc"),ao!==null?oo:null;if(oo===UnsignedInt248Type)return no?34042:(ao=to.get("WEBGL_depth_texture"),ao!==null?ao.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:io}}function ArrayCamera(eo){PerspectiveCamera.call(this),this.cameras=eo||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function Group(){Object3D.call(this),this.type="Group"}Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group,isGroup:!0});function WebXRController(){this._targetRay=null,this._grip=null}Object.assign(WebXRController.prototype,{constructor:WebXRController,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(eo){return this._targetRay!==null&&this._targetRay.dispatchEvent(eo),this._grip!==null&&this._grip.dispatchEvent(eo),this},disconnect:function(eo){return this.dispatchEvent({type:"disconnected",data:eo}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(eo,to,ro){var no=null,io=null,oo=this._targetRay,ao=this._grip;return eo&&(oo!==null&&(no=to.getPose(eo.targetRaySpace,ro),no!==null&&(oo.matrix.fromArray(no.transform.matrix),oo.matrix.decompose(oo.position,oo.rotation,oo.scale))),ao!==null&&eo.gripSpace&&(io=to.getPose(eo.gripSpace,ro),io!==null&&(ao.matrix.fromArray(io.transform.matrix),ao.matrix.decompose(ao.position,ao.rotation,ao.scale)))),oo!==null&&(oo.visible=no!==null),ao!==null&&(ao.visible=io!==null),this}});function WebXRManager(eo,to){var ro=this,no=null,io=1,oo=null,ao="local-floor",so=null,uo=[],lo=new Map,co=new PerspectiveCamera;co.layers.enable(1),co.viewport=new Vector4;var fo=new PerspectiveCamera;fo.layers.enable(2),fo.viewport=new Vector4;var mo=[co,fo],go=new ArrayCamera;go.layers.enable(1),go.layers.enable(2);var yo=null,vo=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(Co){var Do=uo[Co];return Do===void 0&&(Do=new WebXRController,uo[Co]=Do),Do.getTargetRaySpace()},this.getControllerGrip=function(Co){var Do=uo[Co];return Do===void 0&&(Do=new WebXRController,uo[Co]=Do),Do.getGripSpace()};function Ao(Co){var Do=lo.get(Co.inputSource);Do&&Do.dispatchEvent({type:Co.type})}function ho(){lo.forEach(function(Co,Do){Co.disconnect(Do)}),lo.clear(),eo.setFramebuffer(null),eo.setRenderTarget(eo.getRenderTarget()),Po.stop(),ro.isPresenting=!1,ro.dispatchEvent({type:"sessionend"})}function po(Co){oo=Co,Po.setContext(no),Po.start(),ro.isPresenting=!0,ro.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(Co){io=Co,ro.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Co){ao=Co,ro.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return oo},this.getSession=function(){return no},this.setSession=function(Co){if(no=Co,no!==null){no.addEventListener("select",Ao),no.addEventListener("selectstart",Ao),no.addEventListener("selectend",Ao),no.addEventListener("squeeze",Ao),no.addEventListener("squeezestart",Ao),no.addEventListener("squeezeend",Ao),no.addEventListener("end",ho);var Do=to.getContextAttributes();Do.xrCompatible!==!0&&to.makeXRCompatible();var zo={antialias:Do.antialias,alpha:Do.alpha,depth:Do.depth,stencil:Do.stencil,framebufferScaleFactor:io},Ro=new XRWebGLLayer(no,to,zo);no.updateRenderState({baseLayer:Ro}),no.requestReferenceSpace(ao).then(po),no.addEventListener("inputsourceschange",Mo)}};function Mo(Co){for(var Do=no.inputSources,zo=0;zo<uo.length;zo++)lo.set(Do[zo],uo[zo]);for(var zo=0;zo<Co.removed.length;zo++){var Ro=Co.removed[zo],Lo=lo.get(Ro);Lo&&(Lo.dispatchEvent({type:"disconnected",data:Ro}),lo.delete(Ro))}for(var zo=0;zo<Co.added.length;zo++){var Ro=Co.added[zo],Lo=lo.get(Ro);Lo&&Lo.dispatchEvent({type:"connected",data:Ro})}}var xo=new Vector3,wo=new Vector3;function bo(Co,Do,zo){xo.setFromMatrixPosition(Do.matrixWorld),wo.setFromMatrixPosition(zo.matrixWorld);var Ro=xo.distanceTo(wo),Lo=Do.projectionMatrix.elements,$o=zo.projectionMatrix.elements,jo=Lo[14]/(Lo[10]-1),Wo=Lo[14]/(Lo[10]+1),Ko=(Lo[9]+1)/Lo[5],Jo=(Lo[9]-1)/Lo[5],Go=(Lo[8]-1)/Lo[0],Xo=($o[8]+1)/$o[0],va=jo*Go,tu=jo*Xo,Zs=Ro/(-Go+Xo),ga=Zs*-Go;Do.matrixWorld.decompose(Co.position,Co.quaternion,Co.scale),Co.translateX(ga),Co.translateZ(Zs),Co.matrixWorld.compose(Co.position,Co.quaternion,Co.scale),Co.matrixWorldInverse.getInverse(Co.matrixWorld);var qs=jo+Zs,su=Wo+Zs,uu=va-ga,Js=tu+(Ro-ga),Xs=Ko*Wo/su*qs,iu=Jo*Wo/su*qs;Co.projectionMatrix.makePerspective(uu,Js,Xs,iu,qs,su)}function _o(Co,Do){Do===null?Co.matrixWorld.copy(Co.matrix):Co.matrixWorld.multiplyMatrices(Do.matrixWorld,Co.matrix),Co.matrixWorldInverse.getInverse(Co.matrixWorld)}this.getCamera=function(Co){go.near=fo.near=co.near=Co.near,go.far=fo.far=co.far=Co.far,(yo!==go.near||vo!==go.far)&&(no.updateRenderState({depthNear:go.near,depthFar:go.far}),yo=go.near,vo=go.far);var Do=Co.parent,zo=go.cameras;_o(go,Do);for(var Ro=0;Ro<zo.length;Ro++)_o(zo[Ro],Do);Co.matrixWorld.copy(go.matrixWorld);for(var Lo=Co.children,Ro=0,$o=Lo.length;Ro<$o;Ro++)Lo[Ro].updateMatrixWorld(!0);return zo.length===2?bo(go,co,fo):go.projectionMatrix.copy(co.projectionMatrix),go};var To=null;function No(Co,Do){if(so=Do.getViewerPose(oo),so!==null){var zo=so.views,Ro=no.renderState.baseLayer;eo.setFramebuffer(Ro.framebuffer);var Lo=!1;zo.length!==go.cameras.length&&(go.cameras.length=0,Lo=!0);for(var $o=0;$o<zo.length;$o++){var jo=zo[$o],Wo=Ro.getViewport(jo),Ko=mo[$o];Ko.matrix.fromArray(jo.transform.matrix),Ko.projectionMatrix.fromArray(jo.projectionMatrix),Ko.viewport.set(Wo.x,Wo.y,Wo.width,Wo.height),$o===0&&go.matrix.copy(Ko.matrix),Lo===!0&&go.cameras.push(Ko)}}for(var Jo=no.inputSources,$o=0;$o<uo.length;$o++){var Go=uo[$o],Xo=Jo[$o];Go.update(Xo,Do,oo)}To&&To(Co,Do)}var Po=new WebGLAnimation;Po.setAnimationLoop(No),this.setAnimationLoop=function(Co){To=Co},this.dispose=function(){}}Object.assign(WebXRManager.prototype,EventDispatcher.prototype);function WebGLMaterials(eo){function to(ho,po){ho.fogColor.value.copy(po.color),po.isFog?(ho.fogNear.value=po.near,ho.fogFar.value=po.far):po.isFogExp2&&(ho.fogDensity.value=po.density)}function ro(ho,po,Mo,xo,wo){po.isMeshBasicMaterial?no(ho,po):po.isMeshLambertMaterial?(no(ho,po),uo(ho,po)):po.isMeshToonMaterial?(no(ho,po),co(ho,po)):po.isMeshPhongMaterial?(no(ho,po),lo(ho,po)):po.isMeshStandardMaterial?(no(ho,po,Mo),po.isMeshPhysicalMaterial?mo(ho,po,Mo):fo(ho,po,Mo)):po.isMeshMatcapMaterial?(no(ho,po),go(ho,po)):po.isMeshDepthMaterial?(no(ho,po),yo(ho,po)):po.isMeshDistanceMaterial?(no(ho,po),vo(ho,po)):po.isMeshNormalMaterial?(no(ho,po),Ao(ho,po)):po.isLineBasicMaterial?(io(ho,po),po.isLineDashedMaterial&&oo(ho,po)):po.isPointsMaterial?ao(ho,po,xo,wo):po.isSpriteMaterial?so(ho,po):po.isShadowMaterial?(ho.color.value.copy(po.color),ho.opacity.value=po.opacity):po.isShaderMaterial&&(po.uniformsNeedUpdate=!1)}function no(ho,po,Mo){ho.opacity.value=po.opacity,po.color&&ho.diffuse.value.copy(po.color),po.emissive&&ho.emissive.value.copy(po.emissive).multiplyScalar(po.emissiveIntensity),po.map&&(ho.map.value=po.map),po.alphaMap&&(ho.alphaMap.value=po.alphaMap),po.specularMap&&(ho.specularMap.value=po.specularMap);var xo=po.envMap||Mo;xo&&(ho.envMap.value=xo,ho.flipEnvMap.value=xo.isCubeTexture?-1:1,ho.reflectivity.value=po.reflectivity,ho.refractionRatio.value=po.refractionRatio,ho.maxMipLevel.value=eo.get(xo).__maxMipLevel),po.lightMap&&(ho.lightMap.value=po.lightMap,ho.lightMapIntensity.value=po.lightMapIntensity),po.aoMap&&(ho.aoMap.value=po.aoMap,ho.aoMapIntensity.value=po.aoMapIntensity);var wo;po.map?wo=po.map:po.specularMap?wo=po.specularMap:po.displacementMap?wo=po.displacementMap:po.normalMap?wo=po.normalMap:po.bumpMap?wo=po.bumpMap:po.roughnessMap?wo=po.roughnessMap:po.metalnessMap?wo=po.metalnessMap:po.alphaMap?wo=po.alphaMap:po.emissiveMap&&(wo=po.emissiveMap),wo!==void 0&&(wo.isWebGLRenderTarget&&(wo=wo.texture),wo.matrixAutoUpdate===!0&&wo.updateMatrix(),ho.uvTransform.value.copy(wo.matrix));var bo;po.aoMap?bo=po.aoMap:po.lightMap&&(bo=po.lightMap),bo!==void 0&&(bo.isWebGLRenderTarget&&(bo=bo.texture),bo.matrixAutoUpdate===!0&&bo.updateMatrix(),ho.uv2Transform.value.copy(bo.matrix))}function io(ho,po){ho.diffuse.value.copy(po.color),ho.opacity.value=po.opacity}function oo(ho,po){ho.dashSize.value=po.dashSize,ho.totalSize.value=po.dashSize+po.gapSize,ho.scale.value=po.scale}function ao(ho,po,Mo,xo){ho.diffuse.value.copy(po.color),ho.opacity.value=po.opacity,ho.size.value=po.size*Mo,ho.scale.value=xo*.5,po.map&&(ho.map.value=po.map),po.alphaMap&&(ho.alphaMap.value=po.alphaMap);var wo;po.map?wo=po.map:po.alphaMap&&(wo=po.alphaMap),wo!==void 0&&(wo.matrixAutoUpdate===!0&&wo.updateMatrix(),ho.uvTransform.value.copy(wo.matrix))}function so(ho,po){ho.diffuse.value.copy(po.color),ho.opacity.value=po.opacity,ho.rotation.value=po.rotation,po.map&&(ho.map.value=po.map),po.alphaMap&&(ho.alphaMap.value=po.alphaMap);var Mo;po.map?Mo=po.map:po.alphaMap&&(Mo=po.alphaMap),Mo!==void 0&&(Mo.matrixAutoUpdate===!0&&Mo.updateMatrix(),ho.uvTransform.value.copy(Mo.matrix))}function uo(ho,po){po.emissiveMap&&(ho.emissiveMap.value=po.emissiveMap)}function lo(ho,po){ho.specular.value.copy(po.specular),ho.shininess.value=Math.max(po.shininess,1e-4),po.emissiveMap&&(ho.emissiveMap.value=po.emissiveMap),po.bumpMap&&(ho.bumpMap.value=po.bumpMap,ho.bumpScale.value=po.bumpScale,po.side===BackSide&&(ho.bumpScale.value*=-1)),po.normalMap&&(ho.normalMap.value=po.normalMap,ho.normalScale.value.copy(po.normalScale),po.side===BackSide&&ho.normalScale.value.negate()),po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias)}function co(ho,po){ho.specular.value.copy(po.specular),ho.shininess.value=Math.max(po.shininess,1e-4),po.gradientMap&&(ho.gradientMap.value=po.gradientMap),po.emissiveMap&&(ho.emissiveMap.value=po.emissiveMap),po.bumpMap&&(ho.bumpMap.value=po.bumpMap,ho.bumpScale.value=po.bumpScale,po.side===BackSide&&(ho.bumpScale.value*=-1)),po.normalMap&&(ho.normalMap.value=po.normalMap,ho.normalScale.value.copy(po.normalScale),po.side===BackSide&&ho.normalScale.value.negate()),po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias)}function fo(ho,po,Mo){ho.roughness.value=po.roughness,ho.metalness.value=po.metalness,po.roughnessMap&&(ho.roughnessMap.value=po.roughnessMap),po.metalnessMap&&(ho.metalnessMap.value=po.metalnessMap),po.emissiveMap&&(ho.emissiveMap.value=po.emissiveMap),po.bumpMap&&(ho.bumpMap.value=po.bumpMap,ho.bumpScale.value=po.bumpScale,po.side===BackSide&&(ho.bumpScale.value*=-1)),po.normalMap&&(ho.normalMap.value=po.normalMap,ho.normalScale.value.copy(po.normalScale),po.side===BackSide&&ho.normalScale.value.negate()),po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias),(po.envMap||Mo)&&(ho.envMapIntensity.value=po.envMapIntensity)}function mo(ho,po,Mo){fo(ho,po,Mo),ho.reflectivity.value=po.reflectivity,ho.clearcoat.value=po.clearcoat,ho.clearcoatRoughness.value=po.clearcoatRoughness,po.sheen&&ho.sheen.value.copy(po.sheen),po.clearcoatMap&&(ho.clearcoatMap.value=po.clearcoatMap),po.clearcoatRoughnessMap&&(ho.clearcoatRoughnessMap.value=po.clearcoatRoughnessMap),po.clearcoatNormalMap&&(ho.clearcoatNormalScale.value.copy(po.clearcoatNormalScale),ho.clearcoatNormalMap.value=po.clearcoatNormalMap,po.side===BackSide&&ho.clearcoatNormalScale.value.negate()),ho.transparency.value=po.transparency}function go(ho,po){po.matcap&&(ho.matcap.value=po.matcap),po.bumpMap&&(ho.bumpMap.value=po.bumpMap,ho.bumpScale.value=po.bumpScale,po.side===BackSide&&(ho.bumpScale.value*=-1)),po.normalMap&&(ho.normalMap.value=po.normalMap,ho.normalScale.value.copy(po.normalScale),po.side===BackSide&&ho.normalScale.value.negate()),po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias)}function yo(ho,po){po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias)}function vo(ho,po){po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias),ho.referencePosition.value.copy(po.referencePosition),ho.nearDistance.value=po.nearDistance,ho.farDistance.value=po.farDistance}function Ao(ho,po){po.bumpMap&&(ho.bumpMap.value=po.bumpMap,ho.bumpScale.value=po.bumpScale,po.side===BackSide&&(ho.bumpScale.value*=-1)),po.normalMap&&(ho.normalMap.value=po.normalMap,ho.normalScale.value.copy(po.normalScale),po.side===BackSide&&ho.normalScale.value.negate()),po.displacementMap&&(ho.displacementMap.value=po.displacementMap,ho.displacementScale.value=po.displacementScale,ho.displacementBias.value=po.displacementBias)}return{refreshFogUniforms:to,refreshMaterialUniforms:ro}}function WebGLRenderer(eo){eo=eo||{};var to=eo.canvas!==void 0?eo.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),ro=eo.context!==void 0?eo.context:null,no=eo.alpha!==void 0?eo.alpha:!1,io=eo.depth!==void 0?eo.depth:!0,oo=eo.stencil!==void 0?eo.stencil:!0,ao=eo.antialias!==void 0?eo.antialias:!1,so=eo.premultipliedAlpha!==void 0?eo.premultipliedAlpha:!0,uo=eo.preserveDrawingBuffer!==void 0?eo.preserveDrawingBuffer:!1,lo=eo.powerPreference!==void 0?eo.powerPreference:"default",co=eo.failIfMajorPerformanceCaveat!==void 0?eo.failIfMajorPerformanceCaveat:!1,fo=null,mo=null;this.domElement=to,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var go=this,yo=!1,vo=null,Ao=0,ho=0,po=null,Mo=null,xo=-1,wo={geometry:null,program:null,wireframe:!1},bo=null,_o=null,To=new Vector4,No=new Vector4,Po=null,Co=to.width,Do=to.height,zo=1,Ro=null,Lo=null,$o=new Vector4(0,0,Co,Do),jo=new Vector4(0,0,Co,Do),Wo=!1,Ko=new Frustum,Jo=new WebGLClipping,Go=!1,Xo=!1,va=new Matrix4,tu=new Vector3;function Zs(){return po===null?zo:1}var ga;try{var qs={alpha:no,depth:io,stencil:oo,antialias:ao,premultipliedAlpha:so,preserveDrawingBuffer:uo,powerPreference:lo,failIfMajorPerformanceCaveat:co};if(to.addEventListener("webglcontextlost",pu,!1),to.addEventListener("webglcontextrestored",ou,!1),ga=ro||to.getContext("webgl",qs)||to.getContext("experimental-webgl",qs),ga===null)throw to.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");ga.getShaderPrecisionFormat===void 0&&(ga.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ko){throw console.error("THREE.WebGLRenderer: "+ko.message),ko}var su,uu,Js,Xs,iu,hu,yu,Ru,ku,Fo,Vo,lu,au,Tu,mu,gu,Fu,zu;function Iu(){su=new WebGLExtensions(ga),uu=new WebGLCapabilities(ga,su,eo),uu.isWebGL2===!1&&(su.get("WEBGL_depth_texture"),su.get("OES_texture_float"),su.get("OES_texture_half_float"),su.get("OES_texture_half_float_linear"),su.get("OES_standard_derivatives"),su.get("OES_element_index_uint"),su.get("ANGLE_instanced_arrays")),su.get("OES_texture_float_linear"),zu=new WebGLUtils(ga,su,uu),Js=new WebGLState(ga,su,uu),Js.scissor(No.copy(jo).multiplyScalar(zo).floor()),Js.viewport(To.copy($o).multiplyScalar(zo).floor()),Xs=new WebGLInfo(ga),iu=new WebGLProperties,hu=new WebGLTextures(ga,su,Js,iu,uu,zu,Xs),yu=new WebGLAttributes(ga,uu),Ru=new WebGLGeometries(ga,yu,Xs),ku=new WebGLObjects(ga,Ru,yu,Xs),mu=new WebGLMorphtargets(ga),Fo=new WebGLPrograms(go,su,uu),Vo=new WebGLMaterials(iu),lu=new WebGLRenderLists,au=new WebGLRenderStates,Tu=new WebGLBackground(go,Js,ku,so),gu=new WebGLBufferRenderer(ga,su,Xs,uu),Fu=new WebGLIndexedBufferRenderer(ga,su,Xs,uu),Xs.programs=Fo.programs,go.capabilities=uu,go.extensions=su,go.properties=iu,go.renderLists=lu,go.state=Js,go.info=Xs}Iu();var du=new WebXRManager(go,ga);this.xr=du;var xu=new WebGLShadowMap(go,ku,uu.maxTextureSize);this.shadowMap=xu,this.getContext=function(){return ga},this.getContextAttributes=function(){return ga.getContextAttributes()},this.forceContextLoss=function(){var ko=su.get("WEBGL_lose_context");ko&&ko.loseContext()},this.forceContextRestore=function(){var ko=su.get("WEBGL_lose_context");ko&&ko.restoreContext()},this.getPixelRatio=function(){return zo},this.setPixelRatio=function(ko){ko!==void 0&&(zo=ko,this.setSize(Co,Do,!1))},this.getSize=function(ko){return ko===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ko=new Vector2),ko.set(Co,Do)},this.setSize=function(ko,Ws,_a){if(du.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Co=ko,Do=Ws,to.width=Math.floor(ko*zo),to.height=Math.floor(Ws*zo),_a!==!1&&(to.style.width=ko+"px",to.style.height=Ws+"px"),this.setViewport(0,0,ko,Ws)},this.getDrawingBufferSize=function(ko){return ko===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ko=new Vector2),ko.set(Co*zo,Do*zo).floor()},this.setDrawingBufferSize=function(ko,Ws,_a){Co=ko,Do=Ws,zo=_a,to.width=Math.floor(ko*_a),to.height=Math.floor(Ws*_a),this.setViewport(0,0,ko,Ws)},this.getCurrentViewport=function(ko){return ko===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ko=new Vector4),ko.copy(To)},this.getViewport=function(ko){return ko.copy($o)},this.setViewport=function(ko,Ws,_a,eu){ko.isVector4?$o.set(ko.x,ko.y,ko.z,ko.w):$o.set(ko,Ws,_a,eu),Js.viewport(To.copy($o).multiplyScalar(zo).floor())},this.getScissor=function(ko){return ko.copy(jo)},this.setScissor=function(ko,Ws,_a,eu){ko.isVector4?jo.set(ko.x,ko.y,ko.z,ko.w):jo.set(ko,Ws,_a,eu),Js.scissor(No.copy(jo).multiplyScalar(zo).floor())},this.getScissorTest=function(){return Wo},this.setScissorTest=function(ko){Js.setScissorTest(Wo=ko)},this.setOpaqueSort=function(ko){Ro=ko},this.setTransparentSort=function(ko){Lo=ko},this.getClearColor=function(){return Tu.getClearColor()},this.setClearColor=function(){Tu.setClearColor.apply(Tu,arguments)},this.getClearAlpha=function(){return Tu.getClearAlpha()},this.setClearAlpha=function(){Tu.setClearAlpha.apply(Tu,arguments)},this.clear=function(ko,Ws,_a){var eu=0;(ko===void 0||ko)&&(eu|=16384),(Ws===void 0||Ws)&&(eu|=256),(_a===void 0||_a)&&(eu|=1024),ga.clear(eu)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){to.removeEventListener("webglcontextlost",pu,!1),to.removeEventListener("webglcontextrestored",ou,!1),lu.dispose(),au.dispose(),iu.dispose(),ku.dispose(),du.dispose(),ol.stop()};function pu(ko){ko.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),yo=!0}function ou(){console.log("THREE.WebGLRenderer: Context Restored."),yo=!1,Iu()}function qo(ko){var Ws=ko.target;Ws.removeEventListener("dispose",qo),vu(Ws)}function vu(ko){Mu(ko),iu.remove(ko)}function Mu(ko){var Ws=iu.get(ko).program;ko.program=void 0,Ws!==void 0&&Fo.releaseProgram(Ws)}function Lu(ko,Ws){ko.render(function(_a){go.renderBufferImmediate(_a,Ws)})}this.renderBufferImmediate=function(ko,Ws){Js.initAttributes();var _a=iu.get(ko);ko.hasPositions&&!_a.position&&(_a.position=ga.createBuffer()),ko.hasNormals&&!_a.normal&&(_a.normal=ga.createBuffer()),ko.hasUvs&&!_a.uv&&(_a.uv=ga.createBuffer()),ko.hasColors&&!_a.color&&(_a.color=ga.createBuffer());var eu=Ws.getAttributes();ko.hasPositions&&(ga.bindBuffer(34962,_a.position),ga.bufferData(34962,ko.positionArray,35048),Js.enableAttribute(eu.position),ga.vertexAttribPointer(eu.position,3,5126,!1,0,0)),ko.hasNormals&&(ga.bindBuffer(34962,_a.normal),ga.bufferData(34962,ko.normalArray,35048),Js.enableAttribute(eu.normal),ga.vertexAttribPointer(eu.normal,3,5126,!1,0,0)),ko.hasUvs&&(ga.bindBuffer(34962,_a.uv),ga.bufferData(34962,ko.uvArray,35048),Js.enableAttribute(eu.uv),ga.vertexAttribPointer(eu.uv,2,5126,!1,0,0)),ko.hasColors&&(ga.bindBuffer(34962,_a.color),ga.bufferData(34962,ko.colorArray,35048),Js.enableAttribute(eu.color),ga.vertexAttribPointer(eu.color,3,5126,!1,0,0)),Js.disableUnusedAttributes(),ga.drawArrays(4,0,ko.count),ko.count=0};var Au=new Scene;this.renderBufferDirect=function(ko,Ws,_a,eu,fu,Pu){Ws===null&&(Ws=Au);var Eu=fu.isMesh&&fu.matrixWorld.determinant()<0,_u=ul(ko,Ws,eu,fu);Js.setMaterial(eu,Eu);var Ou=!1;(wo.geometry!==_a.id||wo.program!==_u.id||wo.wireframe!==(eu.wireframe===!0))&&(wo.geometry=_a.id,wo.program=_u.id,wo.wireframe=eu.wireframe===!0,Ou=!0),(eu.morphTargets||eu.morphNormals)&&(mu.update(fu,_a,eu,_u),Ou=!0),fu.isInstancedMesh===!0&&(Ou=!0);var ju=_a.index,Yu=_a.attributes.position;if(ju===null){if(Yu===void 0||Yu.count===0)return}else if(ju.count===0)return;var Bo=1;eu.wireframe===!0&&(ju=Ru.getWireframeAttribute(_a),Bo=2);var Uo,Yo=gu;ju!==null&&(Uo=yu.get(ju),Yo=Fu,Yo.setIndex(Uo)),Ou&&(Nu(fu,_a,eu,_u),ju!==null&&ga.bindBuffer(34963,Uo.buffer));var Zo=ju!==null?ju.count:Yu.count,ru=_a.drawRange.start*Bo,Cu=_a.drawRange.count*Bo,Du=Pu!==null?Pu.start*Bo:0,el=Pu!==null?Pu.count*Bo:1/0,Su=Math.max(ru,Du),rl=Math.min(Zo,ru+Cu,Du+el)-1,ml=Math.max(0,rl-Su+1);if(ml!==0){if(fu.isMesh)eu.wireframe===!0?(Js.setLineWidth(eu.wireframeLinewidth*Zs()),Yo.setMode(1)):Yo.setMode(4);else if(fu.isLine){var Ml=eu.linewidth;Ml===void 0&&(Ml=1),Js.setLineWidth(Ml*Zs()),fu.isLineSegments?Yo.setMode(1):fu.isLineLoop?Yo.setMode(2):Yo.setMode(3)}else fu.isPoints?Yo.setMode(0):fu.isSprite&&Yo.setMode(4);if(fu.isInstancedMesh)Yo.renderInstances(_a,Su,ml,fu.count);else if(_a.isInstancedBufferGeometry){var El=Math.min(_a.instanceCount,_a._maxInstanceCount);Yo.renderInstances(_a,Su,ml,El)}else Yo.render(Su,ml)}};function Nu(ko,Ws,_a,eu){if(!(uu.isWebGL2===!1&&(ko.isInstancedMesh||Ws.isInstancedBufferGeometry)&&su.get("ANGLE_instanced_arrays")===null)){Js.initAttributes();var fu=Ws.attributes,Pu=eu.getAttributes(),Eu=_a.defaultAttributeValues;for(var _u in Pu){var Ou=Pu[_u];if(Ou>=0){var ju=fu[_u];if(ju!==void 0){var Yu=ju.normalized,Bo=ju.itemSize,Uo=yu.get(ju);if(Uo===void 0)continue;var Yo=Uo.buffer,Zo=Uo.type,ru=Uo.bytesPerElement;if(ju.isInterleavedBufferAttribute){var Cu=ju.data,Du=Cu.stride,el=ju.offset;Cu&&Cu.isInstancedInterleavedBuffer?(Js.enableAttributeAndDivisor(Ou,Cu.meshPerAttribute),Ws._maxInstanceCount===void 0&&(Ws._maxInstanceCount=Cu.meshPerAttribute*Cu.count)):Js.enableAttribute(Ou),ga.bindBuffer(34962,Yo),Js.vertexAttribPointer(Ou,Bo,Zo,Yu,Du*ru,el*ru)}else ju.isInstancedBufferAttribute?(Js.enableAttributeAndDivisor(Ou,ju.meshPerAttribute),Ws._maxInstanceCount===void 0&&(Ws._maxInstanceCount=ju.meshPerAttribute*ju.count)):Js.enableAttribute(Ou),ga.bindBuffer(34962,Yo),Js.vertexAttribPointer(Ou,Bo,Zo,Yu,0,0)}else if(_u==="instanceMatrix"){var Uo=yu.get(ko.instanceMatrix);if(Uo===void 0)continue;var Yo=Uo.buffer,Zo=Uo.type;Js.enableAttributeAndDivisor(Ou+0,1),Js.enableAttributeAndDivisor(Ou+1,1),Js.enableAttributeAndDivisor(Ou+2,1),Js.enableAttributeAndDivisor(Ou+3,1),ga.bindBuffer(34962,Yo),ga.vertexAttribPointer(Ou+0,4,Zo,!1,64,0),ga.vertexAttribPointer(Ou+1,4,Zo,!1,64,16),ga.vertexAttribPointer(Ou+2,4,Zo,!1,64,32),ga.vertexAttribPointer(Ou+3,4,Zo,!1,64,48)}else if(Eu!==void 0){var Su=Eu[_u];if(Su!==void 0)switch(Su.length){case 2:ga.vertexAttrib2fv(Ou,Su);break;case 3:ga.vertexAttrib3fv(Ou,Su);break;case 4:ga.vertexAttrib4fv(Ou,Su);break;default:ga.vertexAttrib1fv(Ou,Su)}}}}Js.disableUnusedAttributes()}}this.compile=function(ko,Ws){mo=au.get(ko,Ws),mo.init(),ko.traverse(function(eu){eu.isLight&&(mo.pushLight(eu),eu.castShadow&&mo.pushShadow(eu))}),mo.setupLights(Ws);const _a={};ko.traverse(function(eu){let fu=eu.material;if(fu)if(Array.isArray(fu))for(let Pu=0;Pu<fu.length;Pu++){let Eu=fu[Pu];Eu.uuid in _a||(nl(Eu,ko,eu),_a[Eu.uuid]=!0)}else fu.uuid in _a||(nl(fu,ko,eu),_a[fu.uuid]=!0)})};var Vu=null;function Wu(ko){du.isPresenting||Vu&&Vu(ko)}var ol=new WebGLAnimation;ol.setAnimationLoop(Wu),typeof window!="undefined"&&ol.setContext(window),this.setAnimationLoop=function(ko){Vu=ko,du.setAnimationLoop(ko),ol.start()},this.render=function(ko,Ws){var _a,eu;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),_a=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),eu=arguments[3]),!(Ws&&Ws.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!yo){wo.geometry=null,wo.program=null,wo.wireframe=!1,xo=-1,bo=null,ko.autoUpdate===!0&&ko.updateMatrixWorld(),Ws.parent===null&&Ws.updateMatrixWorld(),du.enabled&&du.isPresenting&&(Ws=du.getCamera(Ws)),ko.onBeforeRender(go,ko,Ws,_a||po),mo=au.get(ko,Ws),mo.init(),va.multiplyMatrices(Ws.projectionMatrix,Ws.matrixWorldInverse),Ko.setFromProjectionMatrix(va),Xo=this.localClippingEnabled,Go=Jo.init(this.clippingPlanes,Xo,Ws),fo=lu.get(ko,Ws),fo.init(),bu(ko,Ws,0,go.sortObjects),fo.finish(),go.sortObjects===!0&&fo.sort(Ro,Lo),Go&&Jo.beginShadows();var fu=mo.state.shadowsArray;xu.render(fu,ko,Ws),mo.setupLights(Ws),Go&&Jo.endShadows(),this.info.autoReset&&this.info.reset(),_a!==void 0&&this.setRenderTarget(_a),Tu.render(fo,ko,Ws,eu);var Pu=fo.opaque,Eu=fo.transparent;if(ko.overrideMaterial){var _u=ko.overrideMaterial;Pu.length&&tl(Pu,ko,Ws,_u),Eu.length&&tl(Eu,ko,Ws,_u)}else Pu.length&&tl(Pu,ko,Ws),Eu.length&&tl(Eu,ko,Ws);ko.onAfterRender(go,ko,Ws),po!==null&&(hu.updateRenderTargetMipmap(po),hu.updateMultisampleRenderTarget(po)),Js.buffers.depth.setTest(!0),Js.buffers.depth.setMask(!0),Js.buffers.color.setMask(!0),Js.setPolygonOffset(!1),fo=null,mo=null}};function bu(ko,Ws,_a,eu){if(ko.visible!==!1){var fu=ko.layers.test(Ws.layers);if(fu){if(ko.isGroup)_a=ko.renderOrder;else if(ko.isLOD)ko.autoUpdate===!0&&ko.update(Ws);else if(ko.isLight)mo.pushLight(ko),ko.castShadow&&mo.pushShadow(ko);else if(ko.isSprite){if(!ko.frustumCulled||Ko.intersectsSprite(ko)){eu&&tu.setFromMatrixPosition(ko.matrixWorld).applyMatrix4(va);var Pu=ku.update(ko),Eu=ko.material;Eu.visible&&fo.push(ko,Pu,Eu,_a,tu.z,null)}}else if(ko.isImmediateRenderObject)eu&&tu.setFromMatrixPosition(ko.matrixWorld).applyMatrix4(va),fo.push(ko,null,ko.material,_a,tu.z,null);else if((ko.isMesh||ko.isLine||ko.isPoints)&&(ko.isSkinnedMesh&&ko.skeleton.frame!==Xs.render.frame&&(ko.skeleton.update(),ko.skeleton.frame=Xs.render.frame),!ko.frustumCulled||Ko.intersectsObject(ko))){eu&&tu.setFromMatrixPosition(ko.matrixWorld).applyMatrix4(va);var Pu=ku.update(ko),Eu=ko.material;if(Array.isArray(Eu))for(var _u=Pu.groups,Ou=0,ju=_u.length;Ou<ju;Ou++){var Yu=_u[Ou],Bo=Eu[Yu.materialIndex];Bo&&Bo.visible&&fo.push(ko,Pu,Bo,_a,tu.z,Yu)}else Eu.visible&&fo.push(ko,Pu,Eu,_a,tu.z,null)}}for(var Uo=ko.children,Ou=0,ju=Uo.length;Ou<ju;Ou++)bu(Uo[Ou],Ws,_a,eu)}}function tl(ko,Ws,_a,eu){for(var fu=0,Pu=ko.length;fu<Pu;fu++){var Eu=ko[fu],_u=Eu.object,Ou=Eu.geometry,ju=eu===void 0?Eu.material:eu,Yu=Eu.group;if(_a.isArrayCamera){_o=_a;for(var Bo=_a.cameras,Uo=0,Yo=Bo.length;Uo<Yo;Uo++){var Zo=Bo[Uo];_u.layers.test(Zo.layers)&&(Js.viewport(To.copy(Zo.viewport)),mo.setupLights(Zo),al(_u,Ws,Zo,Ou,ju,Yu))}}else _o=null,al(_u,Ws,_a,Ou,ju,Yu)}}function al(ko,Ws,_a,eu,fu,Pu){if(ko.onBeforeRender(go,Ws,_a,eu,fu,Pu),mo=au.get(Ws,_o||_a),ko.modelViewMatrix.multiplyMatrices(_a.matrixWorldInverse,ko.matrixWorld),ko.normalMatrix.getNormalMatrix(ko.modelViewMatrix),ko.isImmediateRenderObject){var Eu=ul(_a,Ws,fu,ko);Js.setMaterial(fu),wo.geometry=null,wo.program=null,wo.wireframe=!1,Lu(ko,Eu)}else go.renderBufferDirect(_a,Ws,eu,fu,ko,Pu);ko.onAfterRender(go,Ws,_a,eu,fu,Pu),mo=au.get(Ws,_o||_a)}function nl(ko,Ws,_a){var eu=iu.get(ko),fu=mo.state.lights,Pu=mo.state.shadowsArray,Eu=fu.state.version,_u=Fo.getParameters(ko,fu.state,Pu,Ws,Jo.numPlanes,Jo.numIntersection,_a),Ou=Fo.getProgramCacheKey(_u),ju=eu.program,Yu=!0;if(ju===void 0)ko.addEventListener("dispose",qo);else if(ju.cacheKey!==Ou)Mu(ko);else if(eu.lightsStateVersion!==Eu)eu.lightsStateVersion=Eu,Yu=!1;else{if(_u.shaderID!==void 0)return;Yu=!1}Yu&&(ju=Fo.acquireProgram(_u,Ou),eu.program=ju,eu.uniforms=_u.uniforms,eu.outputEncoding=_u.outputEncoding,ko.program=ju);var Bo=ju.getAttributes();if(ko.morphTargets){ko.numSupportedMorphTargets=0;for(var Uo=0;Uo<go.maxMorphTargets;Uo++)Bo["morphTarget"+Uo]>=0&&ko.numSupportedMorphTargets++}if(ko.morphNormals){ko.numSupportedMorphNormals=0;for(var Uo=0;Uo<go.maxMorphNormals;Uo++)Bo["morphNormal"+Uo]>=0&&ko.numSupportedMorphNormals++}var Yo=eu.uniforms;(!ko.isShaderMaterial&&!ko.isRawShaderMaterial||ko.clipping===!0)&&(eu.numClippingPlanes=Jo.numPlanes,eu.numIntersection=Jo.numIntersection,Yo.clippingPlanes=Jo.uniform),eu.environment=ko.isMeshStandardMaterial?Ws.environment:null,eu.fog=Ws.fog,eu.needsLights=Al(ko),eu.lightsStateVersion=Eu,eu.needsLights&&(Yo.ambientLightColor.value=fu.state.ambient,Yo.lightProbe.value=fu.state.probe,Yo.directionalLights.value=fu.state.directional,Yo.directionalLightShadows.value=fu.state.directionalShadow,Yo.spotLights.value=fu.state.spot,Yo.spotLightShadows.value=fu.state.spotShadow,Yo.rectAreaLights.value=fu.state.rectArea,Yo.pointLights.value=fu.state.point,Yo.pointLightShadows.value=fu.state.pointShadow,Yo.hemisphereLights.value=fu.state.hemi,Yo.directionalShadowMap.value=fu.state.directionalShadowMap,Yo.directionalShadowMatrix.value=fu.state.directionalShadowMatrix,Yo.spotShadowMap.value=fu.state.spotShadowMap,Yo.spotShadowMatrix.value=fu.state.spotShadowMatrix,Yo.pointShadowMap.value=fu.state.pointShadowMap,Yo.pointShadowMatrix.value=fu.state.pointShadowMatrix);var Zo=eu.program.getUniforms(),ru=WebGLUniforms.seqWithValue(Zo.seq,Yo);eu.uniformsList=ru}function ul(ko,Ws,_a,eu){hu.resetTextureUnits();var fu=Ws.fog,Pu=_a.isMeshStandardMaterial?Ws.environment:null,Eu=po===null?go.outputEncoding:po.texture.encoding,_u=iu.get(_a),Ou=mo.state.lights;if(Go&&(Xo||ko!==bo)){var ju=ko===bo&&_a.id===xo;Jo.setState(_a.clippingPlanes,_a.clipIntersection,_a.clipShadows,ko,_u,ju)}_a.version===_u.__version?(_u.program===void 0||_a.fog&&_u.fog!==fu||_u.environment!==Pu||_u.needsLights&&_u.lightsStateVersion!==Ou.state.version||_u.numClippingPlanes!==void 0&&(_u.numClippingPlanes!==Jo.numPlanes||_u.numIntersection!==Jo.numIntersection)||_u.outputEncoding!==Eu)&&nl(_a,Ws,eu):(nl(_a,Ws,eu),_u.__version=_a.version);var Yu=!1,Bo=!1,Uo=!1,Yo=_u.program,Zo=Yo.getUniforms(),ru=_u.uniforms;if(Js.useProgram(Yo.program)&&(Yu=!0,Bo=!0,Uo=!0),_a.id!==xo&&(xo=_a.id,Bo=!0),Yu||bo!==ko){if(Zo.setValue(ga,"projectionMatrix",ko.projectionMatrix),uu.logarithmicDepthBuffer&&Zo.setValue(ga,"logDepthBufFC",2/(Math.log(ko.far+1)/Math.LN2)),bo!==ko&&(bo=ko,Bo=!0,Uo=!0),_a.isShaderMaterial||_a.isMeshPhongMaterial||_a.isMeshToonMaterial||_a.isMeshStandardMaterial||_a.envMap){var Cu=Zo.map.cameraPosition;Cu!==void 0&&Cu.setValue(ga,tu.setFromMatrixPosition(ko.matrixWorld))}(_a.isMeshPhongMaterial||_a.isMeshToonMaterial||_a.isMeshLambertMaterial||_a.isMeshBasicMaterial||_a.isMeshStandardMaterial||_a.isShaderMaterial)&&Zo.setValue(ga,"isOrthographic",ko.isOrthographicCamera===!0),(_a.isMeshPhongMaterial||_a.isMeshToonMaterial||_a.isMeshLambertMaterial||_a.isMeshBasicMaterial||_a.isMeshStandardMaterial||_a.isShaderMaterial||_a.skinning)&&Zo.setValue(ga,"viewMatrix",ko.matrixWorldInverse)}if(_a.skinning){Zo.setOptional(ga,eu,"bindMatrix"),Zo.setOptional(ga,eu,"bindMatrixInverse");var Du=eu.skeleton;if(Du){var el=Du.bones;if(uu.floatVertexTextures){if(Du.boneTexture===void 0){var Su=Math.sqrt(el.length*4);Su=MathUtils.ceilPowerOfTwo(Su),Su=Math.max(Su,4);var rl=new Float32Array(Su*Su*4);rl.set(Du.boneMatrices);var ml=new DataTexture(rl,Su,Su,RGBAFormat,FloatType);Du.boneMatrices=rl,Du.boneTexture=ml,Du.boneTextureSize=Su}Zo.setValue(ga,"boneTexture",Du.boneTexture,hu),Zo.setValue(ga,"boneTextureSize",Du.boneTextureSize)}else Zo.setOptional(ga,Du,"boneMatrices")}}return(Bo||_u.receiveShadow!==eu.receiveShadow)&&(_u.receiveShadow=eu.receiveShadow,Zo.setValue(ga,"receiveShadow",eu.receiveShadow)),Bo&&(Zo.setValue(ga,"toneMappingExposure",go.toneMappingExposure),Zo.setValue(ga,"toneMappingWhitePoint",go.toneMappingWhitePoint),_u.needsLights&&Xu(ru,Uo),fu&&_a.fog&&Vo.refreshFogUniforms(ru,fu),Vo.refreshMaterialUniforms(ru,_a,Pu,zo,Do),ru.ltc_1!==void 0&&(ru.ltc_1.value=UniformsLib.LTC_1),ru.ltc_2!==void 0&&(ru.ltc_2.value=UniformsLib.LTC_2),WebGLUniforms.upload(ga,_u.uniformsList,ru,hu)),_a.isShaderMaterial&&_a.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(ga,_u.uniformsList,ru,hu),_a.uniformsNeedUpdate=!1),_a.isSpriteMaterial&&Zo.setValue(ga,"center",eu.center),Zo.setValue(ga,"modelViewMatrix",eu.modelViewMatrix),Zo.setValue(ga,"normalMatrix",eu.normalMatrix),Zo.setValue(ga,"modelMatrix",eu.matrixWorld),Yo}function Xu(ko,Ws){ko.ambientLightColor.needsUpdate=Ws,ko.lightProbe.needsUpdate=Ws,ko.directionalLights.needsUpdate=Ws,ko.directionalLightShadows.needsUpdate=Ws,ko.pointLights.needsUpdate=Ws,ko.pointLightShadows.needsUpdate=Ws,ko.spotLights.needsUpdate=Ws,ko.spotLightShadows.needsUpdate=Ws,ko.rectAreaLights.needsUpdate=Ws,ko.hemisphereLights.needsUpdate=Ws}function Al(ko){return ko.isMeshLambertMaterial||ko.isMeshToonMaterial||ko.isMeshPhongMaterial||ko.isMeshStandardMaterial||ko.isShadowMaterial||ko.isShaderMaterial&&ko.lights===!0}this.setFramebuffer=function(ko){vo!==ko&&po===null&&ga.bindFramebuffer(36160,ko),vo=ko},this.getActiveCubeFace=function(){return Ao},this.getActiveMipmapLevel=function(){return ho},this.getRenderTarget=function(){return po},this.setRenderTarget=function(ko,Ws,_a){po=ko,Ao=Ws,ho=_a,ko&&iu.get(ko).__webglFramebuffer===void 0&&hu.setupRenderTarget(ko);var eu=vo,fu=!1;if(ko){var Pu=iu.get(ko).__webglFramebuffer;ko.isWebGLCubeRenderTarget?(eu=Pu[Ws||0],fu=!0):ko.isWebGLMultisampleRenderTarget?eu=iu.get(ko).__webglMultisampledFramebuffer:eu=Pu,To.copy(ko.viewport),No.copy(ko.scissor),Po=ko.scissorTest}else To.copy($o).multiplyScalar(zo).floor(),No.copy(jo).multiplyScalar(zo).floor(),Po=Wo;if(Mo!==eu&&(ga.bindFramebuffer(36160,eu),Mo=eu),Js.viewport(To),Js.scissor(No),Js.setScissorTest(Po),fu){var Eu=iu.get(ko.texture);ga.framebufferTexture2D(36160,36064,34069+(Ws||0),Eu.__webglTexture,_a||0)}},this.readRenderTargetPixels=function(ko,Ws,_a,eu,fu,Pu,Eu){if(!(ko&&ko.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var _u=iu.get(ko).__webglFramebuffer;if(ko.isWebGLCubeRenderTarget&&Eu!==void 0&&(_u=_u[Eu]),_u){var Ou=!1;_u!==Mo&&(ga.bindFramebuffer(36160,_u),Ou=!0);try{var ju=ko.texture,Yu=ju.format,Bo=ju.type;if(Yu!==RGBAFormat&&zu.convert(Yu)!==ga.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Bo!==UnsignedByteType&&zu.convert(Bo)!==ga.getParameter(35738)&&!(Bo===FloatType&&(uu.isWebGL2||su.get("OES_texture_float")||su.get("WEBGL_color_buffer_float")))&&!(Bo===HalfFloatType&&(uu.isWebGL2?su.get("EXT_color_buffer_float"):su.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ga.checkFramebufferStatus(36160)===36053?Ws>=0&&Ws<=ko.width-eu&&_a>=0&&_a<=ko.height-fu&&ga.readPixels(Ws,_a,eu,fu,zu.convert(Yu),zu.convert(Bo),Pu):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Ou&&ga.bindFramebuffer(36160,Mo)}}},this.copyFramebufferToTexture=function(ko,Ws,_a){_a===void 0&&(_a=0);var eu=Math.pow(2,-_a),fu=Math.floor(Ws.image.width*eu),Pu=Math.floor(Ws.image.height*eu),Eu=zu.convert(Ws.format);hu.setTexture2D(Ws,0),ga.copyTexImage2D(3553,_a,Eu,ko.x,ko.y,fu,Pu,0),Js.unbindTexture()},this.copyTextureToTexture=function(ko,Ws,_a,eu){eu===void 0&&(eu=0);var fu=Ws.image.width,Pu=Ws.image.height,Eu=zu.convert(_a.format),_u=zu.convert(_a.type);hu.setTexture2D(_a,0),Ws.isDataTexture?ga.texSubImage2D(3553,eu,ko.x,ko.y,fu,Pu,Eu,_u,Ws.image.data):Ws.isCompressedTexture?ga.compressedTexSubImage2D(3553,eu,ko.x,ko.y,Ws.mipmaps[0].width,Ws.mipmaps[0].height,Eu,Ws.mipmaps[0].data):ga.texSubImage2D(3553,eu,ko.x,ko.y,Eu,_u,Ws.image),eu===0&&_a.generateMipmaps&&ga.generateMipmap(3553),Js.unbindTexture()},this.initTexture=function(ko){hu.setTexture2D(ko,0),Js.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function FogExp2(eo,to){this.name="",this.color=new Color(eo),this.density=to!==void 0?to:25e-5}Object.assign(FogExp2.prototype,{isFogExp2:!0,clone:function(){return new FogExp2(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function Fog(eo,to,ro){this.name="",this.color=new Color(eo),this.near=to!==void 0?to:1,this.far=ro!==void 0?ro:1e3}Object.assign(Fog.prototype,{isFog:!0,clone:function(){return new Fog(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function InterleavedBuffer(eo,to){this.array=eo,this.stride=to,this.count=eo!==void 0?eo.length/to:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(eo){eo===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(eo){return this.usage=eo,this},copy:function(eo){return this.array=new eo.array.constructor(eo.array),this.count=eo.count,this.stride=eo.stride,this.usage=eo.usage,this},copyAt:function(eo,to,ro){eo*=this.stride,ro*=to.stride;for(var no=0,io=this.stride;no<io;no++)this.array[eo+no]=to.array[ro+no];return this},set:function(eo,to){return to===void 0&&(to=0),this.array.set(eo,to),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(eo){return this.onUploadCallback=eo,this}});var _vector$6=new Vector3;function InterleavedBufferAttribute(eo,to,ro,no){this.name="",this.data=eo,this.itemSize=to,this.offset=ro,this.normalized=no===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(eo){for(var to=0,ro=this.data.count;to<ro;to++)_vector$6.x=this.getX(to),_vector$6.y=this.getY(to),_vector$6.z=this.getZ(to),_vector$6.applyMatrix4(eo),this.setXYZ(to,_vector$6.x,_vector$6.y,_vector$6.z);return this},setX:function(eo,to){return this.data.array[eo*this.data.stride+this.offset]=to,this},setY:function(eo,to){return this.data.array[eo*this.data.stride+this.offset+1]=to,this},setZ:function(eo,to){return this.data.array[eo*this.data.stride+this.offset+2]=to,this},setW:function(eo,to){return this.data.array[eo*this.data.stride+this.offset+3]=to,this},getX:function(eo){return this.data.array[eo*this.data.stride+this.offset]},getY:function(eo){return this.data.array[eo*this.data.stride+this.offset+1]},getZ:function(eo){return this.data.array[eo*this.data.stride+this.offset+2]},getW:function(eo){return this.data.array[eo*this.data.stride+this.offset+3]},setXY:function(eo,to,ro){return eo=eo*this.data.stride+this.offset,this.data.array[eo+0]=to,this.data.array[eo+1]=ro,this},setXYZ:function(eo,to,ro,no){return eo=eo*this.data.stride+this.offset,this.data.array[eo+0]=to,this.data.array[eo+1]=ro,this.data.array[eo+2]=no,this},setXYZW:function(eo,to,ro,no,io){return eo=eo*this.data.stride+this.offset,this.data.array[eo+0]=to,this.data.array[eo+1]=ro,this.data.array[eo+2]=no,this.data.array[eo+3]=io,this},clone:function(){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var eo=[],to=0;to<this.count;to++)for(var ro=to*this.data.stride+this.offset,no=0;no<this.itemSize;no++)eo.push(this.data.array[ro+no]);return new BufferAttribute(new this.array.constructor(eo),this.itemSize,this.normalized)},toJSON:function(){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var eo=[],to=0;to<this.count;to++)for(var ro=to*this.data.stride+this.offset,no=0;no<this.itemSize;no++)eo.push(this.data.array[ro+no]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:eo,normalized:this.normalized}}});function SpriteMaterial(eo){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(eo)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.map=eo.map,this.alphaMap=eo.alphaMap,this.rotation=eo.rotation,this.sizeAttenuation=eo.sizeAttenuation,this};var _geometry,_intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;function Sprite(eo){if(Object3D.call(this),this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;var to=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),ro=new InterleavedBuffer(to,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(ro,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(ro,2,3,!1))}this.geometry=_geometry,this.material=eo!==void 0?eo:new SpriteMaterial,this.center=new Vector2(.5,.5)}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(eo,to){eo.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(eo.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(eo.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),eo.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);var ro=this.material.rotation,no,io;ro!==0&&(io=Math.cos(ro),no=Math.sin(ro));var oo=this.center;transformVertex(_vA$1.set(-.5,-.5,0),_mvPosition,oo,_worldScale,no,io),transformVertex(_vB$1.set(.5,-.5,0),_mvPosition,oo,_worldScale,no,io),transformVertex(_vC$1.set(.5,.5,0),_mvPosition,oo,_worldScale,no,io),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);var ao=eo.ray.intersectTriangle(_vA$1,_vB$1,_vC$1,!1,_intersectPoint);if(!(ao===null&&(transformVertex(_vB$1.set(-.5,.5,0),_mvPosition,oo,_worldScale,no,io),_uvB$1.set(0,1),ao=eo.ray.intersectTriangle(_vA$1,_vC$1,_vB$1,!1,_intersectPoint),ao===null))){var so=eo.ray.origin.distanceTo(_intersectPoint);so<eo.near||so>eo.far||to.push({distance:so,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(eo){return Object3D.prototype.copy.call(this,eo),eo.center!==void 0&&this.center.copy(eo.center),this}});function transformVertex(eo,to,ro,no,io,oo){_alignedPosition.subVectors(eo,ro).addScalar(.5).multiply(no),io!==void 0?(_rotatedPosition.x=oo*_alignedPosition.x-io*_alignedPosition.y,_rotatedPosition.y=io*_alignedPosition.x+oo*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),eo.copy(to),eo.x+=_rotatedPosition.x,eo.y+=_rotatedPosition.y,eo.applyMatrix4(_viewWorldMatrix)}var _v1$4=new Vector3,_v2$2=new Vector3;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:function(eo){Object3D.prototype.copy.call(this,eo,!1);for(var to=eo.levels,ro=0,no=to.length;ro<no;ro++){var io=to[ro];this.addLevel(io.object.clone(),io.distance)}return this.autoUpdate=eo.autoUpdate,this},addLevel:function(eo,to){to===void 0&&(to=0),to=Math.abs(to);for(var ro=this.levels,no=0;no<ro.length&&!(to<ro[no].distance);no++);return ro.splice(no,0,{distance:to,object:eo}),this.add(eo),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(eo){var to=this.levels;if(to.length>0){for(var ro=1,no=to.length;ro<no&&!(eo<to[ro].distance);ro++);return to[ro-1].object}return null},raycast:function(eo,to){var ro=this.levels;if(ro.length>0){_v1$4.setFromMatrixPosition(this.matrixWorld);var no=eo.ray.origin.distanceTo(_v1$4);this.getObjectForDistance(no).raycast(eo,to)}},update:function(eo){var to=this.levels;if(to.length>1){_v1$4.setFromMatrixPosition(eo.matrixWorld),_v2$2.setFromMatrixPosition(this.matrixWorld);var ro=_v1$4.distanceTo(_v2$2)/eo.zoom;to[0].object.visible=!0;for(var no=1,io=to.length;no<io&&ro>=to[no].distance;no++)to[no-1].object.visible=!1,to[no].object.visible=!0;for(this._currentLevel=no-1;no<io;no++)to[no].object.visible=!1}},toJSON:function(eo){var to=Object3D.prototype.toJSON.call(this,eo);this.autoUpdate===!1&&(to.object.autoUpdate=!1),to.object.levels=[];for(var ro=this.levels,no=0,io=ro.length;no<io;no++){var oo=ro[no];to.object.levels.push({object:oo.object.uuid,distance:oo.distance})}return to}});function SkinnedMesh(eo,to){eo&&eo.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,eo,to),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,bind:function(eo,to){this.skeleton=eo,to===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),to=this.matrixWorld),this.bindMatrix.copy(to),this.bindMatrixInverse.getInverse(to)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var eo=new Vector4,to=this.geometry.attributes.skinWeight,ro=0,no=to.count;ro<no;ro++){eo.x=to.getX(ro),eo.y=to.getY(ro),eo.z=to.getZ(ro),eo.w=to.getW(ro);var io=1/eo.manhattanLength();io!==1/0?eo.multiplyScalar(io):eo.set(1,0,0,0),to.setXYZW(ro,eo.x,eo.y,eo.z,eo.w)}},updateMatrixWorld:function(eo){Mesh.prototype.updateMatrixWorld.call(this,eo),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:function(){var eo=new Vector3,to=new Vector4,ro=new Vector4,no=new Vector3,io=new Matrix4;return function(oo,ao){var so=this.skeleton,uo=this.geometry;to.fromBufferAttribute(uo.attributes.skinIndex,oo),ro.fromBufferAttribute(uo.attributes.skinWeight,oo),eo.fromBufferAttribute(uo.attributes.position,oo).applyMatrix4(this.bindMatrix),ao.set(0,0,0);for(var lo=0;lo<4;lo++){var co=ro.getComponent(lo);if(co!==0){var fo=to.getComponent(lo);io.multiplyMatrices(so.bones[fo].matrixWorld,so.boneInverses[fo]),ao.addScaledVector(no.copy(eo).applyMatrix4(io),co)}}return ao.applyMatrix4(this.bindMatrixInverse)}}()});var _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;function Skeleton(eo,to){if(eo=eo||[],this.bones=eo.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,to===void 0)this.calculateInverses();else if(this.bones.length===to.length)this.boneInverses=to.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var ro=0,no=this.bones.length;ro<no;ro++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var eo=0,to=this.bones.length;eo<to;eo++){var ro=new Matrix4;this.bones[eo]&&ro.getInverse(this.bones[eo].matrixWorld),this.boneInverses.push(ro)}},pose:function(){var eo,to,ro;for(to=0,ro=this.bones.length;to<ro;to++)eo=this.bones[to],eo&&eo.matrixWorld.getInverse(this.boneInverses[to]);for(to=0,ro=this.bones.length;to<ro;to++)eo=this.bones[to],eo&&(eo.parent&&eo.parent.isBone?(eo.matrix.getInverse(eo.parent.matrixWorld),eo.matrix.multiply(eo.matrixWorld)):eo.matrix.copy(eo.matrixWorld),eo.matrix.decompose(eo.position,eo.quaternion,eo.scale))},update:function(){for(var eo=this.bones,to=this.boneInverses,ro=this.boneMatrices,no=this.boneTexture,io=0,oo=eo.length;io<oo;io++){var ao=eo[io]?eo[io].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(ao,to[io]),_offsetMatrix.toArray(ro,io*16)}no!==void 0&&(no.needsUpdate=!0)},clone:function(){return new Skeleton(this.bones,this.boneInverses)},getBoneByName:function(eo){for(var to=0,ro=this.bones.length;to<ro;to++){var no=this.bones[to];if(no.name===eo)return no}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});var _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;function InstancedMesh(eo,to,ro){Mesh.call(this,eo,to),this.instanceMatrix=new BufferAttribute(new Float32Array(ro*16),16),this.count=ro,this.frustumCulled=!1}InstancedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,getMatrixAt:function(eo,to){to.fromArray(this.instanceMatrix.array,eo*16)},raycast:function(eo,to){var ro=this.matrixWorld,no=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0)for(var io=0;io<no;io++){this.getMatrixAt(io,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(ro,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(eo,_instanceIntersects);for(var oo=0,ao=_instanceIntersects.length;oo<ao;oo++){var so=_instanceIntersects[oo];so.instanceId=io,so.object=this,to.push(so)}_instanceIntersects.length=0}},setMatrixAt:function(eo,to){to.toArray(this.instanceMatrix.array,eo*16)},updateMorphTargets:function(){}});function LineBasicMaterial(eo){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(eo)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.linewidth=eo.linewidth,this.linecap=eo.linecap,this.linejoin=eo.linejoin,this.morphTargets=eo.morphTargets,this};var _start=new Vector3,_end=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$2=new Sphere;function Line$1(eo,to,ro){ro===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Object3D.call(this),this.type="Line",this.geometry=eo!==void 0?eo:new BufferGeometry,this.material=to!==void 0?to:new LineBasicMaterial,this.updateMorphTargets()}Line$1.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line$1,isLine:!0,computeLineDistances:function(){var eo=this.geometry;if(eo.isBufferGeometry)if(eo.index===null){for(var to=eo.attributes.position,ro=[0],no=1,io=to.count;no<io;no++)_start.fromBufferAttribute(to,no-1),_end.fromBufferAttribute(to,no),ro[no]=ro[no-1],ro[no]+=_start.distanceTo(_end);eo.setAttribute("lineDistance",new Float32BufferAttribute(ro,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(eo.isGeometry){var oo=eo.vertices,ro=eo.lineDistances;ro[0]=0;for(var no=1,io=oo.length;no<io;no++)ro[no]=ro[no-1],ro[no]+=oo[no-1].distanceTo(oo[no])}return this},raycast:function(eo,to){var ro=this.geometry,no=this.matrixWorld,io=eo.params.Line.threshold;if(ro.boundingSphere===null&&ro.computeBoundingSphere(),_sphere$2.copy(ro.boundingSphere),_sphere$2.applyMatrix4(no),_sphere$2.radius+=io,eo.ray.intersectsSphere(_sphere$2)!==!1){_inverseMatrix$1.getInverse(no),_ray$1.copy(eo.ray).applyMatrix4(_inverseMatrix$1);var oo=io/((this.scale.x+this.scale.y+this.scale.z)/3),ao=oo*oo,so=new Vector3,uo=new Vector3,lo=new Vector3,co=new Vector3,fo=this&&this.isLineSegments?2:1;if(ro.isBufferGeometry){var mo=ro.index,go=ro.attributes,yo=go.position.array;if(mo!==null)for(var vo=mo.array,Ao=0,ho=vo.length-1;Ao<ho;Ao+=fo){var po=vo[Ao],Mo=vo[Ao+1];so.fromArray(yo,po*3),uo.fromArray(yo,Mo*3);var xo=_ray$1.distanceSqToSegment(so,uo,co,lo);if(!(xo>ao)){co.applyMatrix4(this.matrixWorld);var wo=eo.ray.origin.distanceTo(co);wo<eo.near||wo>eo.far||to.push({distance:wo,point:lo.clone().applyMatrix4(this.matrixWorld),index:Ao,face:null,faceIndex:null,object:this})}}else for(var Ao=0,ho=yo.length/3-1;Ao<ho;Ao+=fo){so.fromArray(yo,3*Ao),uo.fromArray(yo,3*Ao+3);var xo=_ray$1.distanceSqToSegment(so,uo,co,lo);if(!(xo>ao)){co.applyMatrix4(this.matrixWorld);var wo=eo.ray.origin.distanceTo(co);wo<eo.near||wo>eo.far||to.push({distance:wo,point:lo.clone().applyMatrix4(this.matrixWorld),index:Ao,face:null,faceIndex:null,object:this})}}}else if(ro.isGeometry)for(var bo=ro.vertices,_o=bo.length,Ao=0;Ao<_o-1;Ao+=fo){var xo=_ray$1.distanceSqToSegment(bo[Ao],bo[Ao+1],co,lo);if(!(xo>ao)){co.applyMatrix4(this.matrixWorld);var wo=eo.ray.origin.distanceTo(co);wo<eo.near||wo>eo.far||to.push({distance:wo,point:lo.clone().applyMatrix4(this.matrixWorld),index:Ao,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var eo=this.geometry,to,ro,no;if(eo.isBufferGeometry){var io=eo.morphAttributes,oo=Object.keys(io);if(oo.length>0){var ao=io[oo[0]];if(ao!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},to=0,ro=ao.length;to<ro;to++)no=ao[to].name||String(to),this.morphTargetInfluences.push(0),this.morphTargetDictionary[no]=to}}else{var so=eo.morphTargets;so!==void 0&&so.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var _start$1=new Vector3,_end$1=new Vector3;function LineSegments(eo,to){Line$1.call(this,eo,to),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:function(){var eo=this.geometry;if(eo.isBufferGeometry)if(eo.index===null){for(var to=eo.attributes.position,ro=[],no=0,io=to.count;no<io;no+=2)_start$1.fromBufferAttribute(to,no),_end$1.fromBufferAttribute(to,no+1),ro[no]=no===0?0:ro[no-1],ro[no+1]=ro[no]+_start$1.distanceTo(_end$1);eo.setAttribute("lineDistance",new Float32BufferAttribute(ro,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(eo.isGeometry)for(var oo=eo.vertices,ro=eo.lineDistances,no=0,io=oo.length;no<io;no+=2)_start$1.copy(oo[no]),_end$1.copy(oo[no+1]),ro[no]=no===0?0:ro[no-1],ro[no+1]=ro[no]+_start$1.distanceTo(_end$1);return this}});function LineLoop(eo,to){Line$1.call(this,eo,to),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line$1.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(eo){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(eo)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.map=eo.map,this.alphaMap=eo.alphaMap,this.size=eo.size,this.sizeAttenuation=eo.sizeAttenuation,this.morphTargets=eo.morphTargets,this};var _inverseMatrix$2=new Matrix4,_ray$2=new Ray,_sphere$3=new Sphere,_position$1=new Vector3;function Points(eo,to){Object3D.call(this),this.type="Points",this.geometry=eo!==void 0?eo:new BufferGeometry,this.material=to!==void 0?to:new PointsMaterial,this.updateMorphTargets()}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(eo,to){var ro=this.geometry,no=this.matrixWorld,io=eo.params.Points.threshold;if(ro.boundingSphere===null&&ro.computeBoundingSphere(),_sphere$3.copy(ro.boundingSphere),_sphere$3.applyMatrix4(no),_sphere$3.radius+=io,eo.ray.intersectsSphere(_sphere$3)!==!1){_inverseMatrix$2.getInverse(no),_ray$2.copy(eo.ray).applyMatrix4(_inverseMatrix$2);var oo=io/((this.scale.x+this.scale.y+this.scale.z)/3),ao=oo*oo;if(ro.isBufferGeometry){var so=ro.index,uo=ro.attributes,lo=uo.position.array;if(so!==null)for(var co=so.array,fo=0,mo=co.length;fo<mo;fo++){var go=co[fo];_position$1.fromArray(lo,go*3),testPoint(_position$1,go,ao,no,eo,to,this)}else for(var fo=0,yo=lo.length/3;fo<yo;fo++)_position$1.fromArray(lo,fo*3),testPoint(_position$1,fo,ao,no,eo,to,this)}else for(var vo=ro.vertices,fo=0,yo=vo.length;fo<yo;fo++)testPoint(vo[fo],fo,ao,no,eo,to,this)}},updateMorphTargets:function(){var eo=this.geometry,to,ro,no;if(eo.isBufferGeometry){var io=eo.morphAttributes,oo=Object.keys(io);if(oo.length>0){var ao=io[oo[0]];if(ao!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},to=0,ro=ao.length;to<ro;to++)no=ao[to].name||String(to),this.morphTargetInfluences.push(0),this.morphTargetDictionary[no]=to}}else{var so=eo.morphTargets;so!==void 0&&so.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function testPoint(eo,to,ro,no,io,oo,ao){var so=_ray$2.distanceSqToPoint(eo);if(so<ro){var uo=new Vector3;_ray$2.closestPointToPoint(eo,uo),uo.applyMatrix4(no);var lo=io.ray.origin.distanceTo(uo);if(lo<io.near||lo>io.far)return;oo.push({distance:lo,distanceToRay:Math.sqrt(so),point:uo,index:to,face:null,object:ao})}}function VideoTexture(eo,to,ro,no,io,oo,ao,so,uo){Texture.call(this,eo,to,ro,no,io,oo,ao,so,uo),this.format=ao!==void 0?ao:RGBFormat,this.minFilter=oo!==void 0?oo:LinearFilter,this.magFilter=io!==void 0?io:LinearFilter,this.generateMipmaps=!1}VideoTexture.prototype=Object.assign(Object.create(Texture.prototype),{constructor:VideoTexture,isVideoTexture:!0,update:function(){var eo=this.image;eo.readyState>=eo.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function CompressedTexture(eo,to,ro,no,io,oo,ao,so,uo,lo,co,fo){Texture.call(this,null,oo,ao,so,uo,lo,no,io,co,fo),this.image={width:to,height:ro},this.mipmaps=eo,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(eo,to,ro,no,io,oo,ao,so,uo){Texture.call(this,eo,to,ro,no,io,oo,ao,so,uo),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;CanvasTexture.prototype.isCanvasTexture=!0;function DepthTexture(eo,to,ro,no,io,oo,ao,so,uo,lo){if(lo=lo!==void 0?lo:DepthFormat,lo!==DepthFormat&&lo!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");ro===void 0&&lo===DepthFormat&&(ro=UnsignedShortType),ro===void 0&&lo===DepthStencilFormat&&(ro=UnsignedInt248Type),Texture.call(this,null,no,io,oo,ao,so,lo,ro,uo),this.image={width:eo,height:to},this.magFilter=ao!==void 0?ao:NearestFilter,this.minFilter=so!==void 0?so:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(eo){BufferGeometry.call(this),this.type="WireframeGeometry";var to=[],ro,no,io,oo,ao,so=[0,0],uo={},lo,co,fo,mo,go=["a","b","c"],yo;if(eo&&eo.isGeometry){var vo=eo.faces;for(ro=0,io=vo.length;ro<io;ro++){var Ao=vo[ro];for(no=0;no<3;no++)co=Ao[go[no]],fo=Ao[go[(no+1)%3]],so[0]=Math.min(co,fo),so[1]=Math.max(co,fo),mo=so[0]+","+so[1],uo[mo]===void 0&&(uo[mo]={index1:so[0],index2:so[1]})}for(mo in uo)lo=uo[mo],yo=eo.vertices[lo.index1],to.push(yo.x,yo.y,yo.z),yo=eo.vertices[lo.index2],to.push(yo.x,yo.y,yo.z)}else if(eo&&eo.isBufferGeometry){var ho,po,Mo,xo,wo,bo,_o,To;if(yo=new Vector3,eo.index!==null){for(ho=eo.attributes.position,po=eo.index,Mo=eo.groups,Mo.length===0&&(Mo=[{start:0,count:po.count,materialIndex:0}]),oo=0,ao=Mo.length;oo<ao;++oo)for(xo=Mo[oo],wo=xo.start,bo=xo.count,ro=wo,io=wo+bo;ro<io;ro+=3)for(no=0;no<3;no++)co=po.getX(ro+no),fo=po.getX(ro+(no+1)%3),so[0]=Math.min(co,fo),so[1]=Math.max(co,fo),mo=so[0]+","+so[1],uo[mo]===void 0&&(uo[mo]={index1:so[0],index2:so[1]});for(mo in uo)lo=uo[mo],yo.fromBufferAttribute(ho,lo.index1),to.push(yo.x,yo.y,yo.z),yo.fromBufferAttribute(ho,lo.index2),to.push(yo.x,yo.y,yo.z)}else for(ho=eo.attributes.position,ro=0,io=ho.count/3;ro<io;ro++)for(no=0;no<3;no++)_o=3*ro+no,yo.fromBufferAttribute(ho,_o),to.push(yo.x,yo.y,yo.z),To=3*ro+(no+1)%3,yo.fromBufferAttribute(ho,To),to.push(yo.x,yo.y,yo.z)}this.setAttribute("position",new Float32BufferAttribute(to,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(eo,to,ro){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:eo,slices:to,stacks:ro},this.fromBufferGeometry(new ParametricBufferGeometry(eo,to,ro)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(eo,to,ro){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:eo,slices:to,stacks:ro};var no=[],io=[],oo=[],ao=[],so=1e-5,uo=new Vector3,lo=new Vector3,co=new Vector3,fo=new Vector3,mo=new Vector3,go,yo;eo.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var vo=to+1;for(go=0;go<=ro;go++){var Ao=go/ro;for(yo=0;yo<=to;yo++){var ho=yo/to;eo(ho,Ao,lo),io.push(lo.x,lo.y,lo.z),ho-so>=0?(eo(ho-so,Ao,co),fo.subVectors(lo,co)):(eo(ho+so,Ao,co),fo.subVectors(co,lo)),Ao-so>=0?(eo(ho,Ao-so,co),mo.subVectors(lo,co)):(eo(ho,Ao+so,co),mo.subVectors(co,lo)),uo.crossVectors(fo,mo).normalize(),oo.push(uo.x,uo.y,uo.z),ao.push(ho,Ao)}}for(go=0;go<ro;go++)for(yo=0;yo<to;yo++){var po=go*vo+yo,Mo=go*vo+yo+1,xo=(go+1)*vo+yo+1,wo=(go+1)*vo+yo;no.push(po,Mo,wo),no.push(Mo,xo,wo)}this.setIndex(no),this.setAttribute("position",new Float32BufferAttribute(io,3)),this.setAttribute("normal",new Float32BufferAttribute(oo,3)),this.setAttribute("uv",new Float32BufferAttribute(ao,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(eo,to,ro,no){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:eo,indices:to,radius:ro,detail:no},this.fromBufferGeometry(new PolyhedronBufferGeometry(eo,to,ro,no)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(eo,to,ro,no){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:eo,indices:to,radius:ro,detail:no},ro=ro||1,no=no||0;var io=[],oo=[];ao(no),uo(ro),lo(),this.setAttribute("position",new Float32BufferAttribute(io,3)),this.setAttribute("normal",new Float32BufferAttribute(io.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(oo,2)),no===0?this.computeVertexNormals():this.normalizeNormals();function ao(ho){for(var po=new Vector3,Mo=new Vector3,xo=new Vector3,wo=0;wo<to.length;wo+=3)mo(to[wo+0],po),mo(to[wo+1],Mo),mo(to[wo+2],xo),so(po,Mo,xo,ho)}function so(ho,po,Mo,xo){var wo=Math.pow(2,xo),bo=[],_o,To;for(_o=0;_o<=wo;_o++){bo[_o]=[];var No=ho.clone().lerp(Mo,_o/wo),Po=po.clone().lerp(Mo,_o/wo),Co=wo-_o;for(To=0;To<=Co;To++)To===0&&_o===wo?bo[_o][To]=No:bo[_o][To]=No.clone().lerp(Po,To/Co)}for(_o=0;_o<wo;_o++)for(To=0;To<2*(wo-_o)-1;To++){var Do=Math.floor(To/2);To%2===0?(fo(bo[_o][Do+1]),fo(bo[_o+1][Do]),fo(bo[_o][Do])):(fo(bo[_o][Do+1]),fo(bo[_o+1][Do+1]),fo(bo[_o+1][Do]))}}function uo(ho){for(var po=new Vector3,Mo=0;Mo<io.length;Mo+=3)po.x=io[Mo+0],po.y=io[Mo+1],po.z=io[Mo+2],po.normalize().multiplyScalar(ho),io[Mo+0]=po.x,io[Mo+1]=po.y,io[Mo+2]=po.z}function lo(){for(var ho=new Vector3,po=0;po<io.length;po+=3){ho.x=io[po+0],ho.y=io[po+1],ho.z=io[po+2];var Mo=vo(ho)/2/Math.PI+.5,xo=Ao(ho)/Math.PI+.5;oo.push(Mo,1-xo)}go(),co()}function co(){for(var ho=0;ho<oo.length;ho+=6){var po=oo[ho+0],Mo=oo[ho+2],xo=oo[ho+4],wo=Math.max(po,Mo,xo),bo=Math.min(po,Mo,xo);wo>.9&&bo<.1&&(po<.2&&(oo[ho+0]+=1),Mo<.2&&(oo[ho+2]+=1),xo<.2&&(oo[ho+4]+=1))}}function fo(ho){io.push(ho.x,ho.y,ho.z)}function mo(ho,po){var Mo=ho*3;po.x=eo[Mo+0],po.y=eo[Mo+1],po.z=eo[Mo+2]}function go(){for(var ho=new Vector3,po=new Vector3,Mo=new Vector3,xo=new Vector3,wo=new Vector2,bo=new Vector2,_o=new Vector2,To=0,No=0;To<io.length;To+=9,No+=6){ho.set(io[To+0],io[To+1],io[To+2]),po.set(io[To+3],io[To+4],io[To+5]),Mo.set(io[To+6],io[To+7],io[To+8]),wo.set(oo[No+0],oo[No+1]),bo.set(oo[No+2],oo[No+3]),_o.set(oo[No+4],oo[No+5]),xo.copy(ho).add(po).add(Mo).divideScalar(3);var Po=vo(xo);yo(wo,No+0,ho,Po),yo(bo,No+2,po,Po),yo(_o,No+4,Mo,Po)}}function yo(ho,po,Mo,xo){xo<0&&ho.x===1&&(oo[po]=ho.x-1),Mo.x===0&&Mo.z===0&&(oo[po]=xo/2/Math.PI+.5)}function vo(ho){return Math.atan2(ho.z,-ho.x)}function Ao(ho){return Math.atan2(-ho.y,Math.sqrt(ho.x*ho.x+ho.z*ho.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(eo,to){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:eo,detail:to},this.fromBufferGeometry(new TetrahedronBufferGeometry(eo,to)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(eo,to){var ro=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],no=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,ro,no,eo,to),this.type="TetrahedronBufferGeometry",this.parameters={radius:eo,detail:to}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(eo,to){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:eo,detail:to},this.fromBufferGeometry(new OctahedronBufferGeometry(eo,to)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(eo,to){var ro=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],no=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,ro,no,eo,to),this.type="OctahedronBufferGeometry",this.parameters={radius:eo,detail:to}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(eo,to){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:eo,detail:to},this.fromBufferGeometry(new IcosahedronBufferGeometry(eo,to)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(eo,to){var ro=(1+Math.sqrt(5))/2,no=[-1,ro,0,1,ro,0,-1,-ro,0,1,-ro,0,0,-1,ro,0,1,ro,0,-1,-ro,0,1,-ro,ro,0,-1,ro,0,1,-ro,0,-1,-ro,0,1],io=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,no,io,eo,to),this.type="IcosahedronBufferGeometry",this.parameters={radius:eo,detail:to}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(eo,to){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:eo,detail:to},this.fromBufferGeometry(new DodecahedronBufferGeometry(eo,to)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(eo,to){var ro=(1+Math.sqrt(5))/2,no=1/ro,io=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-no,-ro,0,-no,ro,0,no,-ro,0,no,ro,-no,-ro,0,-no,ro,0,no,-ro,0,no,ro,0,-ro,0,-no,ro,0,-no,-ro,0,no,ro,0,no],oo=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,io,oo,eo,to),this.type="DodecahedronBufferGeometry",this.parameters={radius:eo,detail:to}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(eo,to,ro,no,io,oo){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:eo,tubularSegments:to,radius:ro,radialSegments:no,closed:io},oo!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var ao=new TubeBufferGeometry(eo,to,ro,no,io);this.tangents=ao.tangents,this.normals=ao.normals,this.binormals=ao.binormals,this.fromBufferGeometry(ao),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(eo,to,ro,no,io){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:eo,tubularSegments:to,radius:ro,radialSegments:no,closed:io},to=to||64,ro=ro||1,no=no||8,io=io||!1;var oo=eo.computeFrenetFrames(to,io);this.tangents=oo.tangents,this.normals=oo.normals,this.binormals=oo.binormals;var ao=new Vector3,so=new Vector3,uo=new Vector2,lo=new Vector3,co,fo,mo=[],go=[],yo=[],vo=[];Ao(),this.setIndex(vo),this.setAttribute("position",new Float32BufferAttribute(mo,3)),this.setAttribute("normal",new Float32BufferAttribute(go,3)),this.setAttribute("uv",new Float32BufferAttribute(yo,2));function Ao(){for(co=0;co<to;co++)ho(co);ho(io===!1?to:0),Mo(),po()}function ho(xo){lo=eo.getPointAt(xo/to,lo);var wo=oo.normals[xo],bo=oo.binormals[xo];for(fo=0;fo<=no;fo++){var _o=fo/no*Math.PI*2,To=Math.sin(_o),No=-Math.cos(_o);so.x=No*wo.x+To*bo.x,so.y=No*wo.y+To*bo.y,so.z=No*wo.z+To*bo.z,so.normalize(),go.push(so.x,so.y,so.z),ao.x=lo.x+ro*so.x,ao.y=lo.y+ro*so.y,ao.z=lo.z+ro*so.z,mo.push(ao.x,ao.y,ao.z)}}function po(){for(fo=1;fo<=to;fo++)for(co=1;co<=no;co++){var xo=(no+1)*(fo-1)+(co-1),wo=(no+1)*fo+(co-1),bo=(no+1)*fo+co,_o=(no+1)*(fo-1)+co;vo.push(xo,wo,_o),vo.push(wo,bo,_o)}}function Mo(){for(co=0;co<=to;co++)for(fo=0;fo<=no;fo++)uo.x=co/to,uo.y=fo/no,yo.push(uo.x,uo.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;TubeBufferGeometry.prototype.toJSON=function(){var eo=BufferGeometry.prototype.toJSON.call(this);return eo.path=this.parameters.path.toJSON(),eo};function TorusKnotGeometry(eo,to,ro,no,io,oo,ao){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:eo,tube:to,tubularSegments:ro,radialSegments:no,p:io,q:oo},ao!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(eo,to,ro,no,io,oo)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(eo,to,ro,no,io,oo){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:eo,tube:to,tubularSegments:ro,radialSegments:no,p:io,q:oo},eo=eo||1,to=to||.4,ro=Math.floor(ro)||64,no=Math.floor(no)||8,io=io||2,oo=oo||3;var ao=[],so=[],uo=[],lo=[],co,fo,mo=new Vector3,go=new Vector3,yo=new Vector3,vo=new Vector3,Ao=new Vector3,ho=new Vector3,po=new Vector3;for(co=0;co<=ro;++co){var Mo=co/ro*io*Math.PI*2;for(Co(Mo,io,oo,eo,yo),Co(Mo+.01,io,oo,eo,vo),ho.subVectors(vo,yo),po.addVectors(vo,yo),Ao.crossVectors(ho,po),po.crossVectors(Ao,ho),Ao.normalize(),po.normalize(),fo=0;fo<=no;++fo){var xo=fo/no*Math.PI*2,wo=-to*Math.cos(xo),bo=to*Math.sin(xo);mo.x=yo.x+(wo*po.x+bo*Ao.x),mo.y=yo.y+(wo*po.y+bo*Ao.y),mo.z=yo.z+(wo*po.z+bo*Ao.z),so.push(mo.x,mo.y,mo.z),go.subVectors(mo,yo).normalize(),uo.push(go.x,go.y,go.z),lo.push(co/ro),lo.push(fo/no)}}for(fo=1;fo<=ro;fo++)for(co=1;co<=no;co++){var _o=(no+1)*(fo-1)+(co-1),To=(no+1)*fo+(co-1),No=(no+1)*fo+co,Po=(no+1)*(fo-1)+co;ao.push(_o,To,Po),ao.push(To,No,Po)}this.setIndex(ao),this.setAttribute("position",new Float32BufferAttribute(so,3)),this.setAttribute("normal",new Float32BufferAttribute(uo,3)),this.setAttribute("uv",new Float32BufferAttribute(lo,2));function Co(Do,zo,Ro,Lo,$o){var jo=Math.cos(Do),Wo=Math.sin(Do),Ko=Ro/zo*Do,Jo=Math.cos(Ko);$o.x=Lo*(2+Jo)*.5*jo,$o.y=Lo*(2+Jo)*Wo*.5,$o.z=Lo*Math.sin(Ko)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(eo,to,ro,no,io){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:eo,tube:to,radialSegments:ro,tubularSegments:no,arc:io},this.fromBufferGeometry(new TorusBufferGeometry(eo,to,ro,no,io)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(eo,to,ro,no,io){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:eo,tube:to,radialSegments:ro,tubularSegments:no,arc:io},eo=eo||1,to=to||.4,ro=Math.floor(ro)||8,no=Math.floor(no)||6,io=io||Math.PI*2;var oo=[],ao=[],so=[],uo=[],lo=new Vector3,co=new Vector3,fo=new Vector3,mo,go;for(mo=0;mo<=ro;mo++)for(go=0;go<=no;go++){var yo=go/no*io,vo=mo/ro*Math.PI*2;co.x=(eo+to*Math.cos(vo))*Math.cos(yo),co.y=(eo+to*Math.cos(vo))*Math.sin(yo),co.z=to*Math.sin(vo),ao.push(co.x,co.y,co.z),lo.x=eo*Math.cos(yo),lo.y=eo*Math.sin(yo),fo.subVectors(co,lo).normalize(),so.push(fo.x,fo.y,fo.z),uo.push(go/no),uo.push(mo/ro)}for(mo=1;mo<=ro;mo++)for(go=1;go<=no;go++){var Ao=(no+1)*mo+go-1,ho=(no+1)*(mo-1)+go-1,po=(no+1)*(mo-1)+go,Mo=(no+1)*mo+go;oo.push(Ao,ho,Mo),oo.push(ho,po,Mo)}this.setIndex(oo),this.setAttribute("position",new Float32BufferAttribute(ao,3)),this.setAttribute("normal",new Float32BufferAttribute(so,3)),this.setAttribute("uv",new Float32BufferAttribute(uo,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var Earcut={triangulate:function(eo,to,ro){ro=ro||2;var no=to&&to.length,io=no?to[0]*ro:eo.length,oo=linkedList(eo,0,io,ro,!0),ao=[];if(!oo||oo.next===oo.prev)return ao;var so,uo,lo,co,fo,mo,go;if(no&&(oo=eliminateHoles(eo,to,oo,ro)),eo.length>80*ro){so=lo=eo[0],uo=co=eo[1];for(var yo=ro;yo<io;yo+=ro)fo=eo[yo],mo=eo[yo+1],fo<so&&(so=fo),mo<uo&&(uo=mo),fo>lo&&(lo=fo),mo>co&&(co=mo);go=Math.max(lo-so,co-uo),go=go!==0?1/go:0}return earcutLinked(oo,ao,ro,so,uo,go),ao}};function linkedList(eo,to,ro,no,io){var oo,ao;if(io===signedArea(eo,to,ro,no)>0)for(oo=to;oo<ro;oo+=no)ao=insertNode(oo,eo[oo],eo[oo+1],ao);else for(oo=ro-no;oo>=to;oo-=no)ao=insertNode(oo,eo[oo],eo[oo+1],ao);return ao&&equals(ao,ao.next)&&(removeNode(ao),ao=ao.next),ao}function filterPoints(eo,to){if(!eo)return eo;to||(to=eo);var ro=eo,no;do if(no=!1,!ro.steiner&&(equals(ro,ro.next)||area(ro.prev,ro,ro.next)===0)){if(removeNode(ro),ro=to=ro.prev,ro===ro.next)break;no=!0}else ro=ro.next;while(no||ro!==to);return to}function earcutLinked(eo,to,ro,no,io,oo,ao){if(!!eo){!ao&&oo&&indexCurve(eo,no,io,oo);for(var so=eo,uo,lo;eo.prev!==eo.next;){if(uo=eo.prev,lo=eo.next,oo?isEarHashed(eo,no,io,oo):isEar(eo)){to.push(uo.i/ro),to.push(eo.i/ro),to.push(lo.i/ro),removeNode(eo),eo=lo.next,so=lo.next;continue}if(eo=lo,eo===so){ao?ao===1?(eo=cureLocalIntersections(filterPoints(eo),to,ro),earcutLinked(eo,to,ro,no,io,oo,2)):ao===2&&splitEarcut(eo,to,ro,no,io,oo):earcutLinked(filterPoints(eo),to,ro,no,io,oo,1);break}}}}function isEar(eo){var to=eo.prev,ro=eo,no=eo.next;if(area(to,ro,no)>=0)return!1;for(var io=eo.next.next;io!==eo.prev;){if(pointInTriangle(to.x,to.y,ro.x,ro.y,no.x,no.y,io.x,io.y)&&area(io.prev,io,io.next)>=0)return!1;io=io.next}return!0}function isEarHashed(eo,to,ro,no){var io=eo.prev,oo=eo,ao=eo.next;if(area(io,oo,ao)>=0)return!1;for(var so=io.x<oo.x?io.x<ao.x?io.x:ao.x:oo.x<ao.x?oo.x:ao.x,uo=io.y<oo.y?io.y<ao.y?io.y:ao.y:oo.y<ao.y?oo.y:ao.y,lo=io.x>oo.x?io.x>ao.x?io.x:ao.x:oo.x>ao.x?oo.x:ao.x,co=io.y>oo.y?io.y>ao.y?io.y:ao.y:oo.y>ao.y?oo.y:ao.y,fo=zOrder(so,uo,to,ro,no),mo=zOrder(lo,co,to,ro,no),go=eo.prevZ,yo=eo.nextZ;go&&go.z>=fo&&yo&&yo.z<=mo;){if(go!==eo.prev&&go!==eo.next&&pointInTriangle(io.x,io.y,oo.x,oo.y,ao.x,ao.y,go.x,go.y)&&area(go.prev,go,go.next)>=0||(go=go.prevZ,yo!==eo.prev&&yo!==eo.next&&pointInTriangle(io.x,io.y,oo.x,oo.y,ao.x,ao.y,yo.x,yo.y)&&area(yo.prev,yo,yo.next)>=0))return!1;yo=yo.nextZ}for(;go&&go.z>=fo;){if(go!==eo.prev&&go!==eo.next&&pointInTriangle(io.x,io.y,oo.x,oo.y,ao.x,ao.y,go.x,go.y)&&area(go.prev,go,go.next)>=0)return!1;go=go.prevZ}for(;yo&&yo.z<=mo;){if(yo!==eo.prev&&yo!==eo.next&&pointInTriangle(io.x,io.y,oo.x,oo.y,ao.x,ao.y,yo.x,yo.y)&&area(yo.prev,yo,yo.next)>=0)return!1;yo=yo.nextZ}return!0}function cureLocalIntersections(eo,to,ro){var no=eo;do{var io=no.prev,oo=no.next.next;!equals(io,oo)&&intersects(io,no,no.next,oo)&&locallyInside(io,oo)&&locallyInside(oo,io)&&(to.push(io.i/ro),to.push(no.i/ro),to.push(oo.i/ro),removeNode(no),removeNode(no.next),no=eo=oo),no=no.next}while(no!==eo);return filterPoints(no)}function splitEarcut(eo,to,ro,no,io,oo){var ao=eo;do{for(var so=ao.next.next;so!==ao.prev;){if(ao.i!==so.i&&isValidDiagonal(ao,so)){var uo=splitPolygon(ao,so);ao=filterPoints(ao,ao.next),uo=filterPoints(uo,uo.next),earcutLinked(ao,to,ro,no,io,oo),earcutLinked(uo,to,ro,no,io,oo);return}so=so.next}ao=ao.next}while(ao!==eo)}function eliminateHoles(eo,to,ro,no){var io=[],oo,ao,so,uo,lo;for(oo=0,ao=to.length;oo<ao;oo++)so=to[oo]*no,uo=oo<ao-1?to[oo+1]*no:eo.length,lo=linkedList(eo,so,uo,no,!1),lo===lo.next&&(lo.steiner=!0),io.push(getLeftmost(lo));for(io.sort(compareX),oo=0;oo<io.length;oo++)eliminateHole(io[oo],ro),ro=filterPoints(ro,ro.next);return ro}function compareX(eo,to){return eo.x-to.x}function eliminateHole(eo,to){if(to=findHoleBridge(eo,to),to){var ro=splitPolygon(to,eo);filterPoints(to,to.next),filterPoints(ro,ro.next)}}function findHoleBridge(eo,to){var ro=to,no=eo.x,io=eo.y,oo=-1/0,ao;do{if(io<=ro.y&&io>=ro.next.y&&ro.next.y!==ro.y){var so=ro.x+(io-ro.y)*(ro.next.x-ro.x)/(ro.next.y-ro.y);if(so<=no&&so>oo){if(oo=so,so===no){if(io===ro.y)return ro;if(io===ro.next.y)return ro.next}ao=ro.x<ro.next.x?ro:ro.next}}ro=ro.next}while(ro!==to);if(!ao)return null;if(no===oo)return ao;var uo=ao,lo=ao.x,co=ao.y,fo=1/0,mo;ro=ao;do no>=ro.x&&ro.x>=lo&&no!==ro.x&&pointInTriangle(io<co?no:oo,io,lo,co,io<co?oo:no,io,ro.x,ro.y)&&(mo=Math.abs(io-ro.y)/(no-ro.x),locallyInside(ro,eo)&&(mo<fo||mo===fo&&(ro.x>ao.x||ro.x===ao.x&&sectorContainsSector(ao,ro)))&&(ao=ro,fo=mo)),ro=ro.next;while(ro!==uo);return ao}function sectorContainsSector(eo,to){return area(eo.prev,eo,to.prev)<0&&area(to.next,eo,eo.next)<0}function indexCurve(eo,to,ro,no){var io=eo;do io.z===null&&(io.z=zOrder(io.x,io.y,to,ro,no)),io.prevZ=io.prev,io.nextZ=io.next,io=io.next;while(io!==eo);io.prevZ.nextZ=null,io.prevZ=null,sortLinked(io)}function sortLinked(eo){var to,ro,no,io,oo,ao,so,uo,lo=1;do{for(ro=eo,eo=null,oo=null,ao=0;ro;){for(ao++,no=ro,so=0,to=0;to<lo&&(so++,no=no.nextZ,!!no);to++);for(uo=lo;so>0||uo>0&&no;)so!==0&&(uo===0||!no||ro.z<=no.z)?(io=ro,ro=ro.nextZ,so--):(io=no,no=no.nextZ,uo--),oo?oo.nextZ=io:eo=io,io.prevZ=oo,oo=io;ro=no}oo.nextZ=null,lo*=2}while(ao>1);return eo}function zOrder(eo,to,ro,no,io){return eo=32767*(eo-ro)*io,to=32767*(to-no)*io,eo=(eo|eo<<8)&16711935,eo=(eo|eo<<4)&252645135,eo=(eo|eo<<2)&858993459,eo=(eo|eo<<1)&1431655765,to=(to|to<<8)&16711935,to=(to|to<<4)&252645135,to=(to|to<<2)&858993459,to=(to|to<<1)&1431655765,eo|to<<1}function getLeftmost(eo){var to=eo,ro=eo;do(to.x<ro.x||to.x===ro.x&&to.y<ro.y)&&(ro=to),to=to.next;while(to!==eo);return ro}function pointInTriangle(eo,to,ro,no,io,oo,ao,so){return(io-ao)*(to-so)-(eo-ao)*(oo-so)>=0&&(eo-ao)*(no-so)-(ro-ao)*(to-so)>=0&&(ro-ao)*(oo-so)-(io-ao)*(no-so)>=0}function isValidDiagonal(eo,to){return eo.next.i!==to.i&&eo.prev.i!==to.i&&!intersectsPolygon(eo,to)&&(locallyInside(eo,to)&&locallyInside(to,eo)&&middleInside(eo,to)&&(area(eo.prev,eo,to.prev)||area(eo,to.prev,to))||equals(eo,to)&&area(eo.prev,eo,eo.next)>0&&area(to.prev,to,to.next)>0)}function area(eo,to,ro){return(to.y-eo.y)*(ro.x-to.x)-(to.x-eo.x)*(ro.y-to.y)}function equals(eo,to){return eo.x===to.x&&eo.y===to.y}function intersects(eo,to,ro,no){var io=sign(area(eo,to,ro)),oo=sign(area(eo,to,no)),ao=sign(area(ro,no,eo)),so=sign(area(ro,no,to));return!!(io!==oo&&ao!==so||io===0&&onSegment(eo,ro,to)||oo===0&&onSegment(eo,no,to)||ao===0&&onSegment(ro,eo,no)||so===0&&onSegment(ro,to,no))}function onSegment(eo,to,ro){return to.x<=Math.max(eo.x,ro.x)&&to.x>=Math.min(eo.x,ro.x)&&to.y<=Math.max(eo.y,ro.y)&&to.y>=Math.min(eo.y,ro.y)}function sign(eo){return eo>0?1:eo<0?-1:0}function intersectsPolygon(eo,to){var ro=eo;do{if(ro.i!==eo.i&&ro.next.i!==eo.i&&ro.i!==to.i&&ro.next.i!==to.i&&intersects(ro,ro.next,eo,to))return!0;ro=ro.next}while(ro!==eo);return!1}function locallyInside(eo,to){return area(eo.prev,eo,eo.next)<0?area(eo,to,eo.next)>=0&&area(eo,eo.prev,to)>=0:area(eo,to,eo.prev)<0||area(eo,eo.next,to)<0}function middleInside(eo,to){var ro=eo,no=!1,io=(eo.x+to.x)/2,oo=(eo.y+to.y)/2;do ro.y>oo!=ro.next.y>oo&&ro.next.y!==ro.y&&io<(ro.next.x-ro.x)*(oo-ro.y)/(ro.next.y-ro.y)+ro.x&&(no=!no),ro=ro.next;while(ro!==eo);return no}function splitPolygon(eo,to){var ro=new Node(eo.i,eo.x,eo.y),no=new Node(to.i,to.x,to.y),io=eo.next,oo=to.prev;return eo.next=to,to.prev=eo,ro.next=io,io.prev=ro,no.next=ro,ro.prev=no,oo.next=no,no.prev=oo,no}function insertNode(eo,to,ro,no){var io=new Node(eo,to,ro);return no?(io.next=no.next,io.prev=no,no.next.prev=io,no.next=io):(io.prev=io,io.next=io),io}function removeNode(eo){eo.next.prev=eo.prev,eo.prev.next=eo.next,eo.prevZ&&(eo.prevZ.nextZ=eo.nextZ),eo.nextZ&&(eo.nextZ.prevZ=eo.prevZ)}function Node(eo,to,ro){this.i=eo,this.x=to,this.y=ro,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(eo,to,ro,no){for(var io=0,oo=to,ao=ro-no;oo<ro;oo+=no)io+=(eo[ao]-eo[oo])*(eo[oo+1]+eo[ao+1]),ao=oo;return io}var ShapeUtils={area:function(eo){for(var to=eo.length,ro=0,no=to-1,io=0;io<to;no=io++)ro+=eo[no].x*eo[io].y-eo[io].x*eo[no].y;return ro*.5},isClockWise:function(eo){return ShapeUtils.area(eo)<0},triangulateShape:function(eo,to){var ro=[],no=[],io=[];removeDupEndPts(eo),addContour(ro,eo);var oo=eo.length;to.forEach(removeDupEndPts);for(var ao=0;ao<to.length;ao++)no.push(oo),oo+=to[ao].length,addContour(ro,to[ao]);for(var so=Earcut.triangulate(ro,no),ao=0;ao<so.length;ao+=3)io.push(so.slice(ao,ao+3));return io}};function removeDupEndPts(eo){var to=eo.length;to>2&&eo[to-1].equals(eo[0])&&eo.pop()}function addContour(eo,to){for(var ro=0;ro<to.length;ro++)eo.push(to[ro].x),eo.push(to[ro].y)}function ExtrudeGeometry(eo,to){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:eo,options:to},this.fromBufferGeometry(new ExtrudeBufferGeometry(eo,to)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;ExtrudeGeometry.prototype.toJSON=function(){var eo=Geometry.prototype.toJSON.call(this),to=this.parameters.shapes,ro=this.parameters.options;return toJSON(to,ro,eo)};function ExtrudeBufferGeometry(eo,to){BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:eo,options:to},eo=Array.isArray(eo)?eo:[eo];for(var ro=this,no=[],io=[],oo=0,ao=eo.length;oo<ao;oo++){var so=eo[oo];uo(so)}this.setAttribute("position",new Float32BufferAttribute(no,3)),this.setAttribute("uv",new Float32BufferAttribute(io,2)),this.computeVertexNormals();function uo(lo){var co=[],fo=to.curveSegments!==void 0?to.curveSegments:12,mo=to.steps!==void 0?to.steps:1,go=to.depth!==void 0?to.depth:100,yo=to.bevelEnabled!==void 0?to.bevelEnabled:!0,vo=to.bevelThickness!==void 0?to.bevelThickness:6,Ao=to.bevelSize!==void 0?to.bevelSize:vo-2,ho=to.bevelOffset!==void 0?to.bevelOffset:0,po=to.bevelSegments!==void 0?to.bevelSegments:3,Mo=to.extrudePath,xo=to.UVGenerator!==void 0?to.UVGenerator:WorldUVGenerator;to.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),go=to.amount);var wo,bo=!1,_o,To,No,Po;Mo&&(wo=Mo.getSpacedPoints(mo),bo=!0,yo=!1,_o=Mo.computeFrenetFrames(mo,!1),To=new Vector3,No=new Vector3,Po=new Vector3),yo||(po=0,vo=0,Ao=0,ho=0);var Co,Do,zo,Ro=lo.extractPoints(fo),Lo=Ro.shape,$o=Ro.holes,jo=!ShapeUtils.isClockWise(Lo);if(jo)for(Lo=Lo.reverse(),Do=0,zo=$o.length;Do<zo;Do++)Co=$o[Do],ShapeUtils.isClockWise(Co)&&($o[Do]=Co.reverse());var Wo=ShapeUtils.triangulateShape(Lo,$o),Ko=Lo;for(Do=0,zo=$o.length;Do<zo;Do++)Co=$o[Do],Lo=Lo.concat(Co);function Jo(du,xu,pu){return xu||console.error("THREE.ExtrudeGeometry: vec does not exist"),xu.clone().multiplyScalar(pu).add(du)}var Go,Xo,va,tu,Zs,ga=Lo.length,qs,su=Wo.length;function uu(du,xu,pu){var ou,qo,vu,Mu=du.x-xu.x,Lu=du.y-xu.y,Au=pu.x-du.x,Nu=pu.y-du.y,Vu=Mu*Mu+Lu*Lu,Wu=Mu*Nu-Lu*Au;if(Math.abs(Wu)>Number.EPSILON){var ol=Math.sqrt(Vu),bu=Math.sqrt(Au*Au+Nu*Nu),tl=xu.x-Lu/ol,al=xu.y+Mu/ol,nl=pu.x-Nu/bu,ul=pu.y+Au/bu,Xu=((nl-tl)*Nu-(ul-al)*Au)/(Mu*Nu-Lu*Au);ou=tl+Mu*Xu-du.x,qo=al+Lu*Xu-du.y;var Al=ou*ou+qo*qo;if(Al<=2)return new Vector2(ou,qo);vu=Math.sqrt(Al/2)}else{var ko=!1;Mu>Number.EPSILON?Au>Number.EPSILON&&(ko=!0):Mu<-Number.EPSILON?Au<-Number.EPSILON&&(ko=!0):Math.sign(Lu)===Math.sign(Nu)&&(ko=!0),ko?(ou=-Lu,qo=Mu,vu=Math.sqrt(Vu)):(ou=Mu,qo=Lu,vu=Math.sqrt(Vu/2))}return new Vector2(ou/vu,qo/vu)}for(var Js=[],Xs=0,iu=Ko.length,hu=iu-1,yu=Xs+1;Xs<iu;Xs++,hu++,yu++)hu===iu&&(hu=0),yu===iu&&(yu=0),Js[Xs]=uu(Ko[Xs],Ko[hu],Ko[yu]);var Ru=[],ku,Fo=Js.concat();for(Do=0,zo=$o.length;Do<zo;Do++){for(Co=$o[Do],ku=[],Xs=0,iu=Co.length,hu=iu-1,yu=Xs+1;Xs<iu;Xs++,hu++,yu++)hu===iu&&(hu=0),yu===iu&&(yu=0),ku[Xs]=uu(Co[Xs],Co[hu],Co[yu]);Ru.push(ku),Fo=Fo.concat(ku)}for(Go=0;Go<po;Go++){for(va=Go/po,tu=vo*Math.cos(va*Math.PI/2),Xo=Ao*Math.sin(va*Math.PI/2)+ho,Xs=0,iu=Ko.length;Xs<iu;Xs++)Zs=Jo(Ko[Xs],Js[Xs],Xo),mu(Zs.x,Zs.y,-tu);for(Do=0,zo=$o.length;Do<zo;Do++)for(Co=$o[Do],ku=Ru[Do],Xs=0,iu=Co.length;Xs<iu;Xs++)Zs=Jo(Co[Xs],ku[Xs],Xo),mu(Zs.x,Zs.y,-tu)}for(Xo=Ao+ho,Xs=0;Xs<ga;Xs++)Zs=yo?Jo(Lo[Xs],Fo[Xs],Xo):Lo[Xs],bo?(No.copy(_o.normals[0]).multiplyScalar(Zs.x),To.copy(_o.binormals[0]).multiplyScalar(Zs.y),Po.copy(wo[0]).add(No).add(To),mu(Po.x,Po.y,Po.z)):mu(Zs.x,Zs.y,0);var Vo;for(Vo=1;Vo<=mo;Vo++)for(Xs=0;Xs<ga;Xs++)Zs=yo?Jo(Lo[Xs],Fo[Xs],Xo):Lo[Xs],bo?(No.copy(_o.normals[Vo]).multiplyScalar(Zs.x),To.copy(_o.binormals[Vo]).multiplyScalar(Zs.y),Po.copy(wo[Vo]).add(No).add(To),mu(Po.x,Po.y,Po.z)):mu(Zs.x,Zs.y,go/mo*Vo);for(Go=po-1;Go>=0;Go--){for(va=Go/po,tu=vo*Math.cos(va*Math.PI/2),Xo=Ao*Math.sin(va*Math.PI/2)+ho,Xs=0,iu=Ko.length;Xs<iu;Xs++)Zs=Jo(Ko[Xs],Js[Xs],Xo),mu(Zs.x,Zs.y,go+tu);for(Do=0,zo=$o.length;Do<zo;Do++)for(Co=$o[Do],ku=Ru[Do],Xs=0,iu=Co.length;Xs<iu;Xs++)Zs=Jo(Co[Xs],ku[Xs],Xo),bo?mu(Zs.x,Zs.y+wo[mo-1].y,wo[mo-1].x+tu):mu(Zs.x,Zs.y,go+tu)}lu(),au();function lu(){var du=no.length/3;if(yo){var xu=0,pu=ga*xu;for(Xs=0;Xs<su;Xs++)qs=Wo[Xs],gu(qs[2]+pu,qs[1]+pu,qs[0]+pu);for(xu=mo+po*2,pu=ga*xu,Xs=0;Xs<su;Xs++)qs=Wo[Xs],gu(qs[0]+pu,qs[1]+pu,qs[2]+pu)}else{for(Xs=0;Xs<su;Xs++)qs=Wo[Xs],gu(qs[2],qs[1],qs[0]);for(Xs=0;Xs<su;Xs++)qs=Wo[Xs],gu(qs[0]+ga*mo,qs[1]+ga*mo,qs[2]+ga*mo)}ro.addGroup(du,no.length/3-du,0)}function au(){var du=no.length/3,xu=0;for(Tu(Ko,xu),xu+=Ko.length,Do=0,zo=$o.length;Do<zo;Do++)Co=$o[Do],Tu(Co,xu),xu+=Co.length;ro.addGroup(du,no.length/3-du,1)}function Tu(du,xu){var pu,ou;for(Xs=du.length;--Xs>=0;){pu=Xs,ou=Xs-1,ou<0&&(ou=du.length-1);var qo=0,vu=mo+po*2;for(qo=0;qo<vu;qo++){var Mu=ga*qo,Lu=ga*(qo+1),Au=xu+pu+Mu,Nu=xu+ou+Mu,Vu=xu+ou+Lu,Wu=xu+pu+Lu;Fu(Au,Nu,Vu,Wu)}}}function mu(du,xu,pu){co.push(du),co.push(xu),co.push(pu)}function gu(du,xu,pu){zu(du),zu(xu),zu(pu);var ou=no.length/3,qo=xo.generateTopUV(ro,no,ou-3,ou-2,ou-1);Iu(qo[0]),Iu(qo[1]),Iu(qo[2])}function Fu(du,xu,pu,ou){zu(du),zu(xu),zu(ou),zu(xu),zu(pu),zu(ou);var qo=no.length/3,vu=xo.generateSideWallUV(ro,no,qo-6,qo-3,qo-2,qo-1);Iu(vu[0]),Iu(vu[1]),Iu(vu[3]),Iu(vu[1]),Iu(vu[2]),Iu(vu[3])}function zu(du){no.push(co[du*3+0]),no.push(co[du*3+1]),no.push(co[du*3+2])}function Iu(du){io.push(du.x),io.push(du.y)}}}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.toJSON=function(){var eo=BufferGeometry.prototype.toJSON.call(this),to=this.parameters.shapes,ro=this.parameters.options;return toJSON(to,ro,eo)};var WorldUVGenerator={generateTopUV:function(eo,to,ro,no,io){var oo=to[ro*3],ao=to[ro*3+1],so=to[no*3],uo=to[no*3+1],lo=to[io*3],co=to[io*3+1];return[new Vector2(oo,ao),new Vector2(so,uo),new Vector2(lo,co)]},generateSideWallUV:function(eo,to,ro,no,io,oo){var ao=to[ro*3],so=to[ro*3+1],uo=to[ro*3+2],lo=to[no*3],co=to[no*3+1],fo=to[no*3+2],mo=to[io*3],go=to[io*3+1],yo=to[io*3+2],vo=to[oo*3],Ao=to[oo*3+1],ho=to[oo*3+2];return Math.abs(so-co)<.01?[new Vector2(ao,1-uo),new Vector2(lo,1-fo),new Vector2(mo,1-yo),new Vector2(vo,1-ho)]:[new Vector2(so,1-uo),new Vector2(co,1-fo),new Vector2(go,1-yo),new Vector2(Ao,1-ho)]}};function toJSON(eo,to,ro){if(ro.shapes=[],Array.isArray(eo))for(var no=0,io=eo.length;no<io;no++){var oo=eo[no];ro.shapes.push(oo.uuid)}else ro.shapes.push(eo.uuid);return to.extrudePath!==void 0&&(ro.options.extrudePath=to.extrudePath.toJSON()),ro}function TextGeometry(eo,to){Geometry.call(this),this.type="TextGeometry",this.parameters={text:eo,parameters:to},this.fromBufferGeometry(new TextBufferGeometry(eo,to)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(eo,to){to=to||{};var ro=to.font;if(!(ro&&ro.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var no=ro.generateShapes(eo,to.size);to.depth=to.height!==void 0?to.height:50,to.bevelThickness===void 0&&(to.bevelThickness=10),to.bevelSize===void 0&&(to.bevelSize=8),to.bevelEnabled===void 0&&(to.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,no,to),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(eo,to,ro,no,io,oo,ao){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:eo,widthSegments:to,heightSegments:ro,phiStart:no,phiLength:io,thetaStart:oo,thetaLength:ao},this.fromBufferGeometry(new SphereBufferGeometry(eo,to,ro,no,io,oo,ao)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(eo,to,ro,no,io,oo,ao){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:eo,widthSegments:to,heightSegments:ro,phiStart:no,phiLength:io,thetaStart:oo,thetaLength:ao},eo=eo||1,to=Math.max(3,Math.floor(to)||8),ro=Math.max(2,Math.floor(ro)||6),no=no!==void 0?no:0,io=io!==void 0?io:Math.PI*2,oo=oo!==void 0?oo:0,ao=ao!==void 0?ao:Math.PI;var so=Math.min(oo+ao,Math.PI),uo,lo,co=0,fo=[],mo=new Vector3,go=new Vector3,yo=[],vo=[],Ao=[],ho=[];for(lo=0;lo<=ro;lo++){var po=[],Mo=lo/ro,xo=0;for(lo==0&&oo==0?xo=.5/to:lo==ro&&so==Math.PI&&(xo=-.5/to),uo=0;uo<=to;uo++){var wo=uo/to;mo.x=-eo*Math.cos(no+wo*io)*Math.sin(oo+Mo*ao),mo.y=eo*Math.cos(oo+Mo*ao),mo.z=eo*Math.sin(no+wo*io)*Math.sin(oo+Mo*ao),vo.push(mo.x,mo.y,mo.z),go.copy(mo).normalize(),Ao.push(go.x,go.y,go.z),ho.push(wo+xo,1-Mo),po.push(co++)}fo.push(po)}for(lo=0;lo<ro;lo++)for(uo=0;uo<to;uo++){var bo=fo[lo][uo+1],_o=fo[lo][uo],To=fo[lo+1][uo],No=fo[lo+1][uo+1];(lo!==0||oo>0)&&yo.push(bo,_o,No),(lo!==ro-1||so<Math.PI)&&yo.push(_o,To,No)}this.setIndex(yo),this.setAttribute("position",new Float32BufferAttribute(vo,3)),this.setAttribute("normal",new Float32BufferAttribute(Ao,3)),this.setAttribute("uv",new Float32BufferAttribute(ho,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(eo,to,ro,no,io,oo){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:eo,outerRadius:to,thetaSegments:ro,phiSegments:no,thetaStart:io,thetaLength:oo},this.fromBufferGeometry(new RingBufferGeometry(eo,to,ro,no,io,oo)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(eo,to,ro,no,io,oo){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:eo,outerRadius:to,thetaSegments:ro,phiSegments:no,thetaStart:io,thetaLength:oo},eo=eo||.5,to=to||1,io=io!==void 0?io:0,oo=oo!==void 0?oo:Math.PI*2,ro=ro!==void 0?Math.max(3,ro):8,no=no!==void 0?Math.max(1,no):1;var ao=[],so=[],uo=[],lo=[],co,fo=eo,mo=(to-eo)/no,go=new Vector3,yo=new Vector2,vo,Ao;for(vo=0;vo<=no;vo++){for(Ao=0;Ao<=ro;Ao++)co=io+Ao/ro*oo,go.x=fo*Math.cos(co),go.y=fo*Math.sin(co),so.push(go.x,go.y,go.z),uo.push(0,0,1),yo.x=(go.x/to+1)/2,yo.y=(go.y/to+1)/2,lo.push(yo.x,yo.y);fo+=mo}for(vo=0;vo<no;vo++){var ho=vo*(ro+1);for(Ao=0;Ao<ro;Ao++){co=Ao+ho;var po=co,Mo=co+ro+1,xo=co+ro+2,wo=co+1;ao.push(po,Mo,wo),ao.push(Mo,xo,wo)}}this.setIndex(ao),this.setAttribute("position",new Float32BufferAttribute(so,3)),this.setAttribute("normal",new Float32BufferAttribute(uo,3)),this.setAttribute("uv",new Float32BufferAttribute(lo,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(eo,to,ro,no){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:eo,segments:to,phiStart:ro,phiLength:no},this.fromBufferGeometry(new LatheBufferGeometry(eo,to,ro,no)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(eo,to,ro,no){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:eo,segments:to,phiStart:ro,phiLength:no},to=Math.floor(to)||12,ro=ro||0,no=no||Math.PI*2,no=MathUtils.clamp(no,0,Math.PI*2);var io=[],oo=[],ao=[],so,uo=1/to,lo=new Vector3,co=new Vector2,fo,mo;for(fo=0;fo<=to;fo++){var go=ro+fo*uo*no,yo=Math.sin(go),vo=Math.cos(go);for(mo=0;mo<=eo.length-1;mo++)lo.x=eo[mo].x*yo,lo.y=eo[mo].y,lo.z=eo[mo].x*vo,oo.push(lo.x,lo.y,lo.z),co.x=fo/to,co.y=mo/(eo.length-1),ao.push(co.x,co.y)}for(fo=0;fo<to;fo++)for(mo=0;mo<eo.length-1;mo++){so=mo+fo*eo.length;var Ao=so,ho=so+eo.length,po=so+eo.length+1,Mo=so+1;io.push(Ao,ho,Mo),io.push(ho,po,Mo)}if(this.setIndex(io),this.setAttribute("position",new Float32BufferAttribute(oo,3)),this.setAttribute("uv",new Float32BufferAttribute(ao,2)),this.computeVertexNormals(),no===Math.PI*2){var xo=this.attributes.normal.array,wo=new Vector3,bo=new Vector3,_o=new Vector3;for(so=to*eo.length*3,fo=0,mo=0;fo<eo.length;fo++,mo+=3)wo.x=xo[mo+0],wo.y=xo[mo+1],wo.z=xo[mo+2],bo.x=xo[so+mo+0],bo.y=xo[so+mo+1],bo.z=xo[so+mo+2],_o.addVectors(wo,bo).normalize(),xo[mo+0]=xo[so+mo+0]=_o.x,xo[mo+1]=xo[so+mo+1]=_o.y,xo[mo+2]=xo[so+mo+2]=_o.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(eo,to){Geometry.call(this),this.type="ShapeGeometry",typeof to=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),to=to.curveSegments),this.parameters={shapes:eo,curveSegments:to},this.fromBufferGeometry(new ShapeBufferGeometry(eo,to)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;ShapeGeometry.prototype.toJSON=function(){var eo=Geometry.prototype.toJSON.call(this),to=this.parameters.shapes;return toJSON$1(to,eo)};function ShapeBufferGeometry(eo,to){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:eo,curveSegments:to},to=to||12;var ro=[],no=[],io=[],oo=[],ao=0,so=0;if(Array.isArray(eo)===!1)lo(eo);else for(var uo=0;uo<eo.length;uo++)lo(eo[uo]),this.addGroup(ao,so,uo),ao+=so,so=0;this.setIndex(ro),this.setAttribute("position",new Float32BufferAttribute(no,3)),this.setAttribute("normal",new Float32BufferAttribute(io,3)),this.setAttribute("uv",new Float32BufferAttribute(oo,2));function lo(co){var fo,mo,go,yo=no.length/3,vo=co.extractPoints(to),Ao=vo.shape,ho=vo.holes;for(ShapeUtils.isClockWise(Ao)===!1&&(Ao=Ao.reverse()),fo=0,mo=ho.length;fo<mo;fo++)go=ho[fo],ShapeUtils.isClockWise(go)===!0&&(ho[fo]=go.reverse());var po=ShapeUtils.triangulateShape(Ao,ho);for(fo=0,mo=ho.length;fo<mo;fo++)go=ho[fo],Ao=Ao.concat(go);for(fo=0,mo=Ao.length;fo<mo;fo++){var Mo=Ao[fo];no.push(Mo.x,Mo.y,0),io.push(0,0,1),oo.push(Mo.x,Mo.y)}for(fo=0,mo=po.length;fo<mo;fo++){var xo=po[fo],wo=xo[0]+yo,bo=xo[1]+yo,_o=xo[2]+yo;ro.push(wo,bo,_o),so+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;ShapeBufferGeometry.prototype.toJSON=function(){var eo=BufferGeometry.prototype.toJSON.call(this),to=this.parameters.shapes;return toJSON$1(to,eo)};function toJSON$1(eo,to){if(to.shapes=[],Array.isArray(eo))for(var ro=0,no=eo.length;ro<no;ro++){var io=eo[ro];to.shapes.push(io.uuid)}else to.shapes.push(eo.uuid);return to}function EdgesGeometry(eo,to){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:to},to=to!==void 0?to:1;var ro=[],no=Math.cos(MathUtils.DEG2RAD*to),io=[0,0],oo={},ao,so,uo,lo=["a","b","c"],co;eo.isBufferGeometry?(co=new Geometry,co.fromBufferGeometry(eo)):co=eo.clone(),co.mergeVertices(),co.computeFaceNormals();for(var fo=co.vertices,mo=co.faces,go=0,yo=mo.length;go<yo;go++)for(var vo=mo[go],Ao=0;Ao<3;Ao++)ao=vo[lo[Ao]],so=vo[lo[(Ao+1)%3]],io[0]=Math.min(ao,so),io[1]=Math.max(ao,so),uo=io[0]+","+io[1],oo[uo]===void 0?oo[uo]={index1:io[0],index2:io[1],face1:go,face2:void 0}:oo[uo].face2=go;for(uo in oo){var ho=oo[uo];if(ho.face2===void 0||mo[ho.face1].normal.dot(mo[ho.face2].normal)<=no){var po=fo[ho.index1];ro.push(po.x,po.y,po.z),po=fo[ho.index2],ro.push(po.x,po.y,po.z)}}this.setAttribute("position",new Float32BufferAttribute(ro,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(eo,to,ro,no,io,oo,ao,so){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:eo,radiusBottom:to,height:ro,radialSegments:no,heightSegments:io,openEnded:oo,thetaStart:ao,thetaLength:so},this.fromBufferGeometry(new CylinderBufferGeometry(eo,to,ro,no,io,oo,ao,so)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(eo,to,ro,no,io,oo,ao,so){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:eo,radiusBottom:to,height:ro,radialSegments:no,heightSegments:io,openEnded:oo,thetaStart:ao,thetaLength:so};var uo=this;eo=eo!==void 0?eo:1,to=to!==void 0?to:1,ro=ro||1,no=Math.floor(no)||8,io=Math.floor(io)||1,oo=oo!==void 0?oo:!1,ao=ao!==void 0?ao:0,so=so!==void 0?so:Math.PI*2;var lo=[],co=[],fo=[],mo=[],go=0,yo=[],vo=ro/2,Ao=0;ho(),oo===!1&&(eo>0&&po(!0),to>0&&po(!1)),this.setIndex(lo),this.setAttribute("position",new Float32BufferAttribute(co,3)),this.setAttribute("normal",new Float32BufferAttribute(fo,3)),this.setAttribute("uv",new Float32BufferAttribute(mo,2));function ho(){var Mo,xo,wo=new Vector3,bo=new Vector3,_o=0,To=(to-eo)/ro;for(xo=0;xo<=io;xo++){var No=[],Po=xo/io,Co=Po*(to-eo)+eo;for(Mo=0;Mo<=no;Mo++){var Do=Mo/no,zo=Do*so+ao,Ro=Math.sin(zo),Lo=Math.cos(zo);bo.x=Co*Ro,bo.y=-Po*ro+vo,bo.z=Co*Lo,co.push(bo.x,bo.y,bo.z),wo.set(Ro,To,Lo).normalize(),fo.push(wo.x,wo.y,wo.z),mo.push(Do,1-Po),No.push(go++)}yo.push(No)}for(Mo=0;Mo<no;Mo++)for(xo=0;xo<io;xo++){var $o=yo[xo][Mo],jo=yo[xo+1][Mo],Wo=yo[xo+1][Mo+1],Ko=yo[xo][Mo+1];lo.push($o,jo,Ko),lo.push(jo,Wo,Ko),_o+=6}uo.addGroup(Ao,_o,0),Ao+=_o}function po(Mo){var xo,wo,bo,_o=new Vector2,To=new Vector3,No=0,Po=Mo===!0?eo:to,Co=Mo===!0?1:-1;for(wo=go,xo=1;xo<=no;xo++)co.push(0,vo*Co,0),fo.push(0,Co,0),mo.push(.5,.5),go++;for(bo=go,xo=0;xo<=no;xo++){var Do=xo/no,zo=Do*so+ao,Ro=Math.cos(zo),Lo=Math.sin(zo);To.x=Po*Lo,To.y=vo*Co,To.z=Po*Ro,co.push(To.x,To.y,To.z),fo.push(0,Co,0),_o.x=Ro*.5+.5,_o.y=Lo*.5*Co+.5,mo.push(_o.x,_o.y),go++}for(xo=0;xo<no;xo++){var $o=wo+xo,jo=bo+xo;Mo===!0?lo.push(jo,jo+1,$o):lo.push(jo+1,jo,$o),No+=3}uo.addGroup(Ao,No,Mo===!0?1:2),Ao+=No}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(eo,to,ro,no,io,oo,ao){CylinderGeometry.call(this,0,eo,to,ro,no,io,oo,ao),this.type="ConeGeometry",this.parameters={radius:eo,height:to,radialSegments:ro,heightSegments:no,openEnded:io,thetaStart:oo,thetaLength:ao}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(eo,to,ro,no,io,oo,ao){CylinderBufferGeometry.call(this,0,eo,to,ro,no,io,oo,ao),this.type="ConeBufferGeometry",this.parameters={radius:eo,height:to,radialSegments:ro,heightSegments:no,openEnded:io,thetaStart:oo,thetaLength:ao}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(eo,to,ro,no){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:eo,segments:to,thetaStart:ro,thetaLength:no},this.fromBufferGeometry(new CircleBufferGeometry(eo,to,ro,no)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(eo,to,ro,no){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:eo,segments:to,thetaStart:ro,thetaLength:no},eo=eo||1,to=to!==void 0?Math.max(3,to):8,ro=ro!==void 0?ro:0,no=no!==void 0?no:Math.PI*2;var io=[],oo=[],ao=[],so=[],uo,lo,co=new Vector3,fo=new Vector2;for(oo.push(0,0,0),ao.push(0,0,1),so.push(.5,.5),lo=0,uo=3;lo<=to;lo++,uo+=3){var mo=ro+lo/to*no;co.x=eo*Math.cos(mo),co.y=eo*Math.sin(mo),oo.push(co.x,co.y,co.z),ao.push(0,0,1),fo.x=(oo[uo]/eo+1)/2,fo.y=(oo[uo+1]/eo+1)/2,so.push(fo.x,fo.y)}for(uo=1;uo<=to;uo++)io.push(uo,uo+1,0);this.setIndex(io),this.setAttribute("position",new Float32BufferAttribute(oo,3)),this.setAttribute("normal",new Float32BufferAttribute(ao,3)),this.setAttribute("uv",new Float32BufferAttribute(so,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({__proto__:null,WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(eo){Material.call(this),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(eo)}ShadowMaterial.prototype=Object.create(Material.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;ShadowMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this};function RawShaderMaterial(eo){ShaderMaterial.call(this,eo),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(eo){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(eo)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.defines={STANDARD:""},this.color.copy(eo.color),this.roughness=eo.roughness,this.metalness=eo.metalness,this.map=eo.map,this.lightMap=eo.lightMap,this.lightMapIntensity=eo.lightMapIntensity,this.aoMap=eo.aoMap,this.aoMapIntensity=eo.aoMapIntensity,this.emissive.copy(eo.emissive),this.emissiveMap=eo.emissiveMap,this.emissiveIntensity=eo.emissiveIntensity,this.bumpMap=eo.bumpMap,this.bumpScale=eo.bumpScale,this.normalMap=eo.normalMap,this.normalMapType=eo.normalMapType,this.normalScale.copy(eo.normalScale),this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this.roughnessMap=eo.roughnessMap,this.metalnessMap=eo.metalnessMap,this.alphaMap=eo.alphaMap,this.envMap=eo.envMap,this.envMapIntensity=eo.envMapIntensity,this.refractionRatio=eo.refractionRatio,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.wireframeLinecap=eo.wireframeLinecap,this.wireframeLinejoin=eo.wireframeLinejoin,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this.vertexTangents=eo.vertexTangents,this};function MeshPhysicalMaterial(eo){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(eo)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(eo){return MeshStandardMaterial.prototype.copy.call(this,eo),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=eo.clearcoat,this.clearcoatMap=eo.clearcoatMap,this.clearcoatRoughness=eo.clearcoatRoughness,this.clearcoatRoughnessMap=eo.clearcoatRoughnessMap,this.clearcoatNormalMap=eo.clearcoatNormalMap,this.clearcoatNormalScale.copy(eo.clearcoatNormalScale),this.reflectivity=eo.reflectivity,eo.sheen?this.sheen=(this.sheen||new Color).copy(eo.sheen):this.sheen=null,this.transparency=eo.transparency,this};function MeshPhongMaterial(eo){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(eo)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.specular.copy(eo.specular),this.shininess=eo.shininess,this.map=eo.map,this.lightMap=eo.lightMap,this.lightMapIntensity=eo.lightMapIntensity,this.aoMap=eo.aoMap,this.aoMapIntensity=eo.aoMapIntensity,this.emissive.copy(eo.emissive),this.emissiveMap=eo.emissiveMap,this.emissiveIntensity=eo.emissiveIntensity,this.bumpMap=eo.bumpMap,this.bumpScale=eo.bumpScale,this.normalMap=eo.normalMap,this.normalMapType=eo.normalMapType,this.normalScale.copy(eo.normalScale),this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this.specularMap=eo.specularMap,this.alphaMap=eo.alphaMap,this.envMap=eo.envMap,this.combine=eo.combine,this.reflectivity=eo.reflectivity,this.refractionRatio=eo.refractionRatio,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.wireframeLinecap=eo.wireframeLinecap,this.wireframeLinejoin=eo.wireframeLinejoin,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this};function MeshToonMaterial(eo){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(eo)}MeshToonMaterial.prototype=Object.create(Material.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.specular.copy(eo.specular),this.shininess=eo.shininess,this.map=eo.map,this.gradientMap=eo.gradientMap,this.lightMap=eo.lightMap,this.lightMapIntensity=eo.lightMapIntensity,this.aoMap=eo.aoMap,this.aoMapIntensity=eo.aoMapIntensity,this.emissive.copy(eo.emissive),this.emissiveMap=eo.emissiveMap,this.emissiveIntensity=eo.emissiveIntensity,this.bumpMap=eo.bumpMap,this.bumpScale=eo.bumpScale,this.normalMap=eo.normalMap,this.normalMapType=eo.normalMapType,this.normalScale.copy(eo.normalScale),this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this.specularMap=eo.specularMap,this.alphaMap=eo.alphaMap,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.wireframeLinecap=eo.wireframeLinecap,this.wireframeLinejoin=eo.wireframeLinejoin,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this};function MeshNormalMaterial(eo){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(eo)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.bumpMap=eo.bumpMap,this.bumpScale=eo.bumpScale,this.normalMap=eo.normalMap,this.normalMapType=eo.normalMapType,this.normalScale.copy(eo.normalScale),this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this};function MeshLambertMaterial(eo){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(eo)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.color.copy(eo.color),this.map=eo.map,this.lightMap=eo.lightMap,this.lightMapIntensity=eo.lightMapIntensity,this.aoMap=eo.aoMap,this.aoMapIntensity=eo.aoMapIntensity,this.emissive.copy(eo.emissive),this.emissiveMap=eo.emissiveMap,this.emissiveIntensity=eo.emissiveIntensity,this.specularMap=eo.specularMap,this.alphaMap=eo.alphaMap,this.envMap=eo.envMap,this.combine=eo.combine,this.reflectivity=eo.reflectivity,this.refractionRatio=eo.refractionRatio,this.wireframe=eo.wireframe,this.wireframeLinewidth=eo.wireframeLinewidth,this.wireframeLinecap=eo.wireframeLinecap,this.wireframeLinejoin=eo.wireframeLinejoin,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this};function MeshMatcapMaterial(eo){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(eo)}MeshMatcapMaterial.prototype=Object.create(Material.prototype);MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial;MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;MeshMatcapMaterial.prototype.copy=function(eo){return Material.prototype.copy.call(this,eo),this.defines={MATCAP:""},this.color.copy(eo.color),this.matcap=eo.matcap,this.map=eo.map,this.bumpMap=eo.bumpMap,this.bumpScale=eo.bumpScale,this.normalMap=eo.normalMap,this.normalMapType=eo.normalMapType,this.normalScale.copy(eo.normalScale),this.displacementMap=eo.displacementMap,this.displacementScale=eo.displacementScale,this.displacementBias=eo.displacementBias,this.alphaMap=eo.alphaMap,this.skinning=eo.skinning,this.morphTargets=eo.morphTargets,this.morphNormals=eo.morphNormals,this};function LineDashedMaterial(eo){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(eo)}LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(eo){return LineBasicMaterial.prototype.copy.call(this,eo),this.scale=eo.scale,this.dashSize=eo.dashSize,this.gapSize=eo.gapSize,this};var Materials=Object.freeze({__proto__:null,ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material}),AnimationUtils={arraySlice:function(eo,to,ro){return AnimationUtils.isTypedArray(eo)?new eo.constructor(eo.subarray(to,ro!==void 0?ro:eo.length)):eo.slice(to,ro)},convertArray:function(eo,to,ro){return!eo||!ro&&eo.constructor===to?eo:typeof to.BYTES_PER_ELEMENT=="number"?new to(eo):Array.prototype.slice.call(eo)},isTypedArray:function(eo){return ArrayBuffer.isView(eo)&&!(eo instanceof DataView)},getKeyframeOrder:function(eo){function to(oo,ao){return eo[oo]-eo[ao]}for(var ro=eo.length,no=new Array(ro),io=0;io!==ro;++io)no[io]=io;return no.sort(to),no},sortedArray:function(eo,to,ro){for(var no=eo.length,io=new eo.constructor(no),oo=0,ao=0;ao!==no;++oo)for(var so=ro[oo]*to,uo=0;uo!==to;++uo)io[ao++]=eo[so+uo];return io},flattenJSON:function(eo,to,ro,no){for(var io=1,oo=eo[0];oo!==void 0&&oo[no]===void 0;)oo=eo[io++];if(oo!==void 0){var ao=oo[no];if(ao!==void 0)if(Array.isArray(ao))do ao=oo[no],ao!==void 0&&(to.push(oo.time),ro.push.apply(ro,ao)),oo=eo[io++];while(oo!==void 0);else if(ao.toArray!==void 0)do ao=oo[no],ao!==void 0&&(to.push(oo.time),ao.toArray(ro,ro.length)),oo=eo[io++];while(oo!==void 0);else do ao=oo[no],ao!==void 0&&(to.push(oo.time),ro.push(ao)),oo=eo[io++];while(oo!==void 0)}},subclip:function(eo,to,ro,no,io){io=io||30;var oo=eo.clone();oo.name=to;for(var ao=[],so=0;so<oo.tracks.length;++so){for(var uo=oo.tracks[so],lo=uo.getValueSize(),co=[],fo=[],mo=0;mo<uo.times.length;++mo){var go=uo.times[mo]*io;if(!(go<ro||go>=no)){co.push(uo.times[mo]);for(var yo=0;yo<lo;++yo)fo.push(uo.values[mo*lo+yo])}}co.length!==0&&(uo.times=AnimationUtils.convertArray(co,uo.times.constructor),uo.values=AnimationUtils.convertArray(fo,uo.values.constructor),ao.push(uo))}oo.tracks=ao;for(var vo=1/0,so=0;so<oo.tracks.length;++so)vo>oo.tracks[so].times[0]&&(vo=oo.tracks[so].times[0]);for(var so=0;so<oo.tracks.length;++so)oo.tracks[so].shift(-1*vo);return oo.resetDuration(),oo},makeClipAdditive:function(eo,to,ro,no){to===void 0&&(to=0),ro===void 0&&(ro=eo),(no===void 0||no<=0)&&(no=30);for(var io=eo.tracks.length,oo=to/no,ao=0;ao<io;++ao){var so=ro.tracks[ao],uo=so.ValueTypeName;if(!(uo==="bool"||uo==="string")){var lo=eo.tracks.find(function(xo){return xo.name===so.name&&xo.ValueTypeName===uo});if(lo!==void 0){var co=so.getValueSize(),fo=so.times.length-1,mo;if(oo<=so.times[0])mo=AnimationUtils.arraySlice(so.values,0,so.valueSize);else if(oo>=so.times[fo]){var go=fo*co;mo=AnimationUtils.arraySlice(so.values,go)}else{var yo=so.createInterpolant();yo.evaluate(oo),mo=yo.resultBuffer}if(uo==="quaternion"){var vo=new Quaternion(mo[0],mo[1],mo[2],mo[3]).normalize().conjugate();vo.toArray(mo)}for(var Ao=lo.times.length,ho=0;ho<Ao;++ho){var po=ho*co;if(uo==="quaternion")Quaternion.multiplyQuaternionsFlat(lo.values,po,mo,0,lo.values,po);else for(var Mo=0;Mo<co;++Mo)lo.values[po+Mo]-=mo[Mo]}}}}return eo.blendMode=AdditiveAnimationBlendMode,eo}};function Interpolant(eo,to,ro,no){this.parameterPositions=eo,this._cachedIndex=0,this.resultBuffer=no!==void 0?no:new to.constructor(ro),this.sampleValues=to,this.valueSize=ro}Object.assign(Interpolant.prototype,{evaluate:function(eo){var to=this.parameterPositions,ro=this._cachedIndex,no=to[ro],io=to[ro-1];e:{t:{var oo;r:{n:if(!(eo<no)){for(var ao=ro+2;;){if(no===void 0){if(eo<io)break n;return ro=to.length,this._cachedIndex=ro,this.afterEnd_(ro-1,eo,io)}if(ro===ao)break;if(io=no,no=to[++ro],eo<no)break t}oo=to.length;break r}if(!(eo>=io)){var so=to[1];eo<so&&(ro=2,io=so);for(var ao=ro-2;;){if(io===void 0)return this._cachedIndex=0,this.beforeStart_(0,eo,no);if(ro===ao)break;if(no=io,io=to[--ro-1],eo>=io)break t}oo=ro,ro=0;break r}break e}for(;ro<oo;){var uo=ro+oo>>>1;eo<to[uo]?oo=uo:ro=uo+1}if(no=to[ro],io=to[ro-1],io===void 0)return this._cachedIndex=0,this.beforeStart_(0,eo,no);if(no===void 0)return ro=to.length,this._cachedIndex=ro,this.afterEnd_(ro-1,io,eo)}this._cachedIndex=ro,this.intervalChanged_(ro,io,no)}return this.interpolate_(ro,io,eo,no)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(eo){for(var to=this.resultBuffer,ro=this.sampleValues,no=this.valueSize,io=eo*no,oo=0;oo!==no;++oo)to[oo]=ro[io+oo];return to},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(eo,to,ro,no){Interpolant.call(this,eo,to,ro,no),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(eo,to,ro){var no=this.parameterPositions,io=eo-2,oo=eo+1,ao=no[io],so=no[oo];if(ao===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:io=eo,ao=2*to-ro;break;case WrapAroundEnding:io=no.length-2,ao=to+no[io]-no[io+1];break;default:io=eo,ao=ro}if(so===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:oo=eo,so=2*ro-to;break;case WrapAroundEnding:oo=1,so=ro+no[1]-no[0];break;default:oo=eo-1,so=to}var uo=(ro-to)*.5,lo=this.valueSize;this._weightPrev=uo/(to-ao),this._weightNext=uo/(so-ro),this._offsetPrev=io*lo,this._offsetNext=oo*lo},interpolate_:function(eo,to,ro,no){for(var io=this.resultBuffer,oo=this.sampleValues,ao=this.valueSize,so=eo*ao,uo=so-ao,lo=this._offsetPrev,co=this._offsetNext,fo=this._weightPrev,mo=this._weightNext,go=(ro-to)/(no-to),yo=go*go,vo=yo*go,Ao=-fo*vo+2*fo*yo-fo*go,ho=(1+fo)*vo+(-1.5-2*fo)*yo+(-.5+fo)*go+1,po=(-1-mo)*vo+(1.5+mo)*yo+.5*go,Mo=mo*vo-mo*yo,xo=0;xo!==ao;++xo)io[xo]=Ao*oo[lo+xo]+ho*oo[uo+xo]+po*oo[so+xo]+Mo*oo[co+xo];return io}});function LinearInterpolant(eo,to,ro,no){Interpolant.call(this,eo,to,ro,no)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(eo,to,ro,no){for(var io=this.resultBuffer,oo=this.sampleValues,ao=this.valueSize,so=eo*ao,uo=so-ao,lo=(ro-to)/(no-to),co=1-lo,fo=0;fo!==ao;++fo)io[fo]=oo[uo+fo]*co+oo[so+fo]*lo;return io}});function DiscreteInterpolant(eo,to,ro,no){Interpolant.call(this,eo,to,ro,no)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(eo){return this.copySampleValue_(eo-1)}});function KeyframeTrack(eo,to,ro,no){if(eo===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(to===void 0||to.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+eo);this.name=eo,this.times=AnimationUtils.convertArray(to,this.TimeBufferType),this.values=AnimationUtils.convertArray(ro,this.ValueBufferType),this.setInterpolation(no||this.DefaultInterpolation)}Object.assign(KeyframeTrack,{toJSON:function(eo){var to=eo.constructor,ro;if(to.toJSON!==void 0)ro=to.toJSON(eo);else{ro={name:eo.name,times:AnimationUtils.convertArray(eo.times,Array),values:AnimationUtils.convertArray(eo.values,Array)};var no=eo.getInterpolation();no!==eo.DefaultInterpolation&&(ro.interpolation=no)}return ro.type=eo.ValueTypeName,ro}});Object.assign(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(eo){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),eo)},InterpolantFactoryMethodLinear:function(eo){return new LinearInterpolant(this.times,this.values,this.getValueSize(),eo)},InterpolantFactoryMethodSmooth:function(eo){return new CubicInterpolant(this.times,this.values,this.getValueSize(),eo)},setInterpolation:function(eo){var to;switch(eo){case InterpolateDiscrete:to=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:to=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:to=this.InterpolantFactoryMethodSmooth;break}if(to===void 0){var ro="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(eo!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(ro);return console.warn("THREE.KeyframeTrack:",ro),this}return this.createInterpolant=to,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(eo){if(eo!==0)for(var to=this.times,ro=0,no=to.length;ro!==no;++ro)to[ro]+=eo;return this},scale:function(eo){if(eo!==1)for(var to=this.times,ro=0,no=to.length;ro!==no;++ro)to[ro]*=eo;return this},trim:function(eo,to){for(var ro=this.times,no=ro.length,io=0,oo=no-1;io!==no&&ro[io]<eo;)++io;for(;oo!==-1&&ro[oo]>to;)--oo;if(++oo,io!==0||oo!==no){io>=oo&&(oo=Math.max(oo,1),io=oo-1);var ao=this.getValueSize();this.times=AnimationUtils.arraySlice(ro,io,oo),this.values=AnimationUtils.arraySlice(this.values,io*ao,oo*ao)}return this},validate:function(){var eo=!0,to=this.getValueSize();to-Math.floor(to)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),eo=!1);var ro=this.times,no=this.values,io=ro.length;io===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),eo=!1);for(var oo=null,ao=0;ao!==io;ao++){var so=ro[ao];if(typeof so=="number"&&isNaN(so)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,ao,so),eo=!1;break}if(oo!==null&&oo>so){console.error("THREE.KeyframeTrack: Out of order keys.",this,ao,so,oo),eo=!1;break}oo=so}if(no!==void 0&&AnimationUtils.isTypedArray(no))for(var ao=0,uo=no.length;ao!==uo;++ao){var lo=no[ao];if(isNaN(lo)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,ao,lo),eo=!1;break}}return eo},optimize:function(){for(var eo=AnimationUtils.arraySlice(this.times),to=AnimationUtils.arraySlice(this.values),ro=this.getValueSize(),no=this.getInterpolation()===InterpolateSmooth,io=1,oo=eo.length-1,ao=1;ao<oo;++ao){var so=!1,uo=eo[ao],lo=eo[ao+1];if(uo!==lo&&(ao!==1||uo!==uo[0]))if(no)so=!0;else for(var co=ao*ro,fo=co-ro,mo=co+ro,go=0;go!==ro;++go){var yo=to[co+go];if(yo!==to[fo+go]||yo!==to[mo+go]){so=!0;break}}if(so){if(ao!==io){eo[io]=eo[ao];for(var vo=ao*ro,Ao=io*ro,go=0;go!==ro;++go)to[Ao+go]=to[vo+go]}++io}}if(oo>0){eo[io]=eo[oo];for(var vo=oo*ro,Ao=io*ro,go=0;go!==ro;++go)to[Ao+go]=to[vo+go];++io}return io!==eo.length?(this.times=AnimationUtils.arraySlice(eo,0,io),this.values=AnimationUtils.arraySlice(to,0,io*ro)):(this.times=eo,this.values=to),this},clone:function(){var eo=AnimationUtils.arraySlice(this.times,0),to=AnimationUtils.arraySlice(this.values,0),ro=this.constructor,no=new ro(this.name,eo,to);return no.createInterpolant=this.createInterpolant,no}});function BooleanKeyframeTrack(eo,to,ro){KeyframeTrack.call(this,eo,to,ro)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(eo,to,ro,no){KeyframeTrack.call(this,eo,to,ro,no)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function NumberKeyframeTrack(eo,to,ro,no){KeyframeTrack.call(this,eo,to,ro,no)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function QuaternionLinearInterpolant(eo,to,ro,no){Interpolant.call(this,eo,to,ro,no)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(eo,to,ro,no){for(var io=this.resultBuffer,oo=this.sampleValues,ao=this.valueSize,so=eo*ao,uo=(ro-to)/(no-to),lo=so+ao;so!==lo;so+=4)Quaternion.slerpFlat(io,0,oo,so-ao,oo,so,uo);return io}});function QuaternionKeyframeTrack(eo,to,ro,no){KeyframeTrack.call(this,eo,to,ro,no)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(eo){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),eo)},InterpolantFactoryMethodSmooth:void 0});function StringKeyframeTrack(eo,to,ro,no){KeyframeTrack.call(this,eo,to,ro,no)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function VectorKeyframeTrack(eo,to,ro,no){KeyframeTrack.call(this,eo,to,ro,no)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function AnimationClip(eo,to,ro,no){this.name=eo,this.tracks=ro,this.duration=to!==void 0?to:-1,this.blendMode=no!==void 0?no:NormalAnimationBlendMode,this.uuid=MathUtils.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(eo){switch(eo.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+eo)}function parseKeyframeTrack(eo){if(eo.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var to=getTrackTypeForValueTypeName(eo.type);if(eo.times===void 0){var ro=[],no=[];AnimationUtils.flattenJSON(eo.keys,ro,no,"value"),eo.times=ro,eo.values=no}return to.parse!==void 0?to.parse(eo):new to(eo.name,eo.times,eo.values,eo.interpolation)}Object.assign(AnimationClip,{parse:function(eo){for(var to=[],ro=eo.tracks,no=1/(eo.fps||1),io=0,oo=ro.length;io!==oo;++io)to.push(parseKeyframeTrack(ro[io]).scale(no));return new AnimationClip(eo.name,eo.duration,to,eo.blendMode)},toJSON:function(eo){for(var to=[],ro=eo.tracks,no={name:eo.name,duration:eo.duration,tracks:to,uuid:eo.uuid,blendMode:eo.blendMode},io=0,oo=ro.length;io!==oo;++io)to.push(KeyframeTrack.toJSON(ro[io]));return no},CreateFromMorphTargetSequence:function(eo,to,ro,no){for(var io=to.length,oo=[],ao=0;ao<io;ao++){var so=[],uo=[];so.push((ao+io-1)%io,ao,(ao+1)%io),uo.push(0,1,0);var lo=AnimationUtils.getKeyframeOrder(so);so=AnimationUtils.sortedArray(so,1,lo),uo=AnimationUtils.sortedArray(uo,1,lo),!no&&so[0]===0&&(so.push(io),uo.push(uo[0])),oo.push(new NumberKeyframeTrack(".morphTargetInfluences["+to[ao].name+"]",so,uo).scale(1/ro))}return new AnimationClip(eo,-1,oo)},findByName:function(eo,to){var ro=eo;if(!Array.isArray(eo)){var no=eo;ro=no.geometry&&no.geometry.animations||no.animations}for(var io=0;io<ro.length;io++)if(ro[io].name===to)return ro[io];return null},CreateClipsFromMorphTargetSequences:function(eo,to,ro){for(var no={},io=/^([\w-]*?)([\d]+)$/,oo=0,ao=eo.length;oo<ao;oo++){var so=eo[oo],uo=so.name.match(io);if(uo&&uo.length>1){var lo=uo[1],co=no[lo];co||(no[lo]=co=[]),co.push(so)}}var fo=[];for(var lo in no)fo.push(AnimationClip.CreateFromMorphTargetSequence(lo,no[lo],to,ro));return fo},parseAnimation:function(eo,to){if(!eo)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var ro=function(xo,wo,bo,_o,To){if(bo.length!==0){var No=[],Po=[];AnimationUtils.flattenJSON(bo,No,Po,_o),No.length!==0&&To.push(new xo(wo,No,Po))}},no=[],io=eo.name||"default",oo=eo.length||-1,ao=eo.fps||30,so=eo.blendMode,uo=eo.hierarchy||[],lo=0;lo<uo.length;lo++){var co=uo[lo].keys;if(!(!co||co.length===0))if(co[0].morphTargets){for(var fo={},mo=0;mo<co.length;mo++)if(co[mo].morphTargets)for(var go=0;go<co[mo].morphTargets.length;go++)fo[co[mo].morphTargets[go]]=-1;for(var yo in fo){for(var vo=[],Ao=[],go=0;go!==co[mo].morphTargets.length;++go){var ho=co[mo];vo.push(ho.time),Ao.push(ho.morphTarget===yo?1:0)}no.push(new NumberKeyframeTrack(".morphTargetInfluence["+yo+"]",vo,Ao))}oo=fo.length*(ao||1)}else{var po=".bones["+to[lo].name+"]";ro(VectorKeyframeTrack,po+".position",co,"pos",no),ro(QuaternionKeyframeTrack,po+".quaternion",co,"rot",no),ro(VectorKeyframeTrack,po+".scale",co,"scl",no)}}if(no.length===0)return null;var Mo=new AnimationClip(io,oo,no,so);return Mo}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var eo=this.tracks,to=0,ro=0,no=eo.length;ro!==no;++ro){var io=this.tracks[ro];to=Math.max(to,io.times[io.times.length-1])}return this.duration=to,this},trim:function(){for(var eo=0;eo<this.tracks.length;eo++)this.tracks[eo].trim(0,this.duration);return this},validate:function(){for(var eo=!0,to=0;to<this.tracks.length;to++)eo=eo&&this.tracks[to].validate();return eo},optimize:function(){for(var eo=0;eo<this.tracks.length;eo++)this.tracks[eo].optimize();return this},clone:function(){for(var eo=[],to=0;to<this.tracks.length;to++)eo.push(this.tracks[to].clone());return new AnimationClip(this.name,this.duration,eo,this.blendMode)}});var Cache={enabled:!1,files:{},add:function(eo,to){this.enabled!==!1&&(this.files[eo]=to)},get:function(eo){if(this.enabled!==!1)return this.files[eo]},remove:function(eo){delete this.files[eo]},clear:function(){this.files={}}};function LoadingManager(eo,to,ro){var no=this,io=!1,oo=0,ao=0,so=void 0,uo=[];this.onStart=void 0,this.onLoad=eo,this.onProgress=to,this.onError=ro,this.itemStart=function(lo){ao++,io===!1&&no.onStart!==void 0&&no.onStart(lo,oo,ao),io=!0},this.itemEnd=function(lo){oo++,no.onProgress!==void 0&&no.onProgress(lo,oo,ao),oo===ao&&(io=!1,no.onLoad!==void 0&&no.onLoad())},this.itemError=function(lo){no.onError!==void 0&&no.onError(lo)},this.resolveURL=function(lo){return so?so(lo):lo},this.setURLModifier=function(lo){return so=lo,this},this.addHandler=function(lo,co){return uo.push(lo,co),this},this.removeHandler=function(lo){var co=uo.indexOf(lo);return co!==-1&&uo.splice(co,2),this},this.getHandler=function(lo){for(var co=0,fo=uo.length;co<fo;co+=2){var mo=uo[co],go=uo[co+1];if(mo.global&&(mo.lastIndex=0),mo.test(lo))return go}return null}}var DefaultLoadingManager=new LoadingManager;function Loader(eo){this.manager=eo!==void 0?eo:DefaultLoadingManager,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Loader.prototype,{load:function(){},loadAsync:function(eo,to){var ro=this;return new Promise(function(no,io){ro.load(eo,no,to,io)})},parse:function(){},setCrossOrigin:function(eo){return this.crossOrigin=eo,this},setPath:function(eo){return this.path=eo,this},setResourcePath:function(eo){return this.resourcePath=eo,this},setRequestHeader:function(eo){return this.requestHeader=eo,this}});var loading={};function FileLoader(eo){Loader.call(this,eo)}FileLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FileLoader,load:function(eo,to,ro,no){eo===void 0&&(eo=""),this.path!==void 0&&(eo=this.path+eo),eo=this.manager.resolveURL(eo);var io=this,oo=Cache.get(eo);if(oo!==void 0)return io.manager.itemStart(eo),setTimeout(function(){to&&to(oo),io.manager.itemEnd(eo)},0),oo;if(loading[eo]!==void 0){loading[eo].push({onLoad:to,onProgress:ro,onError:no});return}var ao=/^data:(.*?)(;base64)?,(.*)$/,so=eo.match(ao);if(so){var uo=so[1],lo=!!so[2],co=so[3];co=decodeURIComponent(co),lo&&(co=atob(co));try{var fo,mo=(this.responseType||"").toLowerCase();switch(mo){case"arraybuffer":case"blob":for(var go=new Uint8Array(co.length),yo=0;yo<co.length;yo++)go[yo]=co.charCodeAt(yo);mo==="blob"?fo=new Blob([go.buffer],{type:uo}):fo=go.buffer;break;case"document":var vo=new DOMParser;fo=vo.parseFromString(co,uo);break;case"json":fo=JSON.parse(co);break;default:fo=co;break}setTimeout(function(){to&&to(fo),io.manager.itemEnd(eo)},0)}catch(po){setTimeout(function(){no&&no(po),io.manager.itemError(eo),io.manager.itemEnd(eo)},0)}}else{loading[eo]=[],loading[eo].push({onLoad:to,onProgress:ro,onError:no});var Ao=new XMLHttpRequest;Ao.open("GET",eo,!0),Ao.addEventListener("load",function(po){var Mo=this.response,xo=loading[eo];if(delete loading[eo],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Cache.add(eo,Mo);for(var wo=0,bo=xo.length;wo<bo;wo++){var _o=xo[wo];_o.onLoad&&_o.onLoad(Mo)}io.manager.itemEnd(eo)}else{for(var wo=0,bo=xo.length;wo<bo;wo++){var _o=xo[wo];_o.onError&&_o.onError(po)}io.manager.itemError(eo),io.manager.itemEnd(eo)}},!1),Ao.addEventListener("progress",function(po){for(var Mo=loading[eo],xo=0,wo=Mo.length;xo<wo;xo++){var bo=Mo[xo];bo.onProgress&&bo.onProgress(po)}},!1),Ao.addEventListener("error",function(po){var Mo=loading[eo];delete loading[eo];for(var xo=0,wo=Mo.length;xo<wo;xo++){var bo=Mo[xo];bo.onError&&bo.onError(po)}io.manager.itemError(eo),io.manager.itemEnd(eo)},!1),Ao.addEventListener("abort",function(po){var Mo=loading[eo];delete loading[eo];for(var xo=0,wo=Mo.length;xo<wo;xo++){var bo=Mo[xo];bo.onError&&bo.onError(po)}io.manager.itemError(eo),io.manager.itemEnd(eo)},!1),this.responseType!==void 0&&(Ao.responseType=this.responseType),this.withCredentials!==void 0&&(Ao.withCredentials=this.withCredentials),Ao.overrideMimeType&&Ao.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var ho in this.requestHeader)Ao.setRequestHeader(ho,this.requestHeader[ho]);Ao.send(null)}return io.manager.itemStart(eo),Ao},setResponseType:function(eo){return this.responseType=eo,this},setWithCredentials:function(eo){return this.withCredentials=eo,this},setMimeType:function(eo){return this.mimeType=eo,this}});function AnimationLoader(eo){Loader.call(this,eo)}AnimationLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AnimationLoader,load:function(eo,to,ro,no){var io=this,oo=new FileLoader(io.manager);oo.setPath(io.path),oo.load(eo,function(ao){try{to(io.parse(JSON.parse(ao)))}catch(so){no?no(so):console.error(so),io.manager.itemError(eo)}},ro,no)},parse:function(eo){for(var to=[],ro=0;ro<eo.length;ro++){var no=AnimationClip.parse(eo[ro]);to.push(no)}return to}});function CompressedTextureLoader(eo){Loader.call(this,eo)}CompressedTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:function(eo,to,ro,no){var io=this,oo=[],ao=new CompressedTexture;ao.image=oo;var so=new FileLoader(this.manager);so.setPath(this.path),so.setResponseType("arraybuffer");function uo(mo){so.load(eo[mo],function(go){var yo=io.parse(go,!0);oo[mo]={width:yo.width,height:yo.height,format:yo.format,mipmaps:yo.mipmaps},lo+=1,lo===6&&(yo.mipmapCount===1&&(ao.minFilter=LinearFilter),ao.format=yo.format,ao.needsUpdate=!0,to&&to(ao))},ro,no)}if(Array.isArray(eo))for(var lo=0,co=0,fo=eo.length;co<fo;++co)uo(co);else so.load(eo,function(mo){var go=io.parse(mo,!0);if(go.isCubemap)for(var yo=go.mipmaps.length/go.mipmapCount,vo=0;vo<yo;vo++){oo[vo]={mipmaps:[]};for(var Ao=0;Ao<go.mipmapCount;Ao++)oo[vo].mipmaps.push(go.mipmaps[vo*go.mipmapCount+Ao]),oo[vo].format=go.format,oo[vo].width=go.width,oo[vo].height=go.height}else ao.image.width=go.width,ao.image.height=go.height,ao.mipmaps=go.mipmaps;go.mipmapCount===1&&(ao.minFilter=LinearFilter),ao.format=go.format,ao.needsUpdate=!0,to&&to(ao)},ro,no);return ao}});function DataTextureLoader(eo){Loader.call(this,eo)}DataTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:function(eo,to,ro,no){var io=this,oo=new DataTexture,ao=new FileLoader(this.manager);return ao.setResponseType("arraybuffer"),ao.setPath(this.path),ao.load(eo,function(so){var uo=io.parse(so);!uo||(uo.image!==void 0?oo.image=uo.image:uo.data!==void 0&&(oo.image.width=uo.width,oo.image.height=uo.height,oo.image.data=uo.data),oo.wrapS=uo.wrapS!==void 0?uo.wrapS:ClampToEdgeWrapping,oo.wrapT=uo.wrapT!==void 0?uo.wrapT:ClampToEdgeWrapping,oo.magFilter=uo.magFilter!==void 0?uo.magFilter:LinearFilter,oo.minFilter=uo.minFilter!==void 0?uo.minFilter:LinearFilter,oo.anisotropy=uo.anisotropy!==void 0?uo.anisotropy:1,uo.format!==void 0&&(oo.format=uo.format),uo.type!==void 0&&(oo.type=uo.type),uo.mipmaps!==void 0&&(oo.mipmaps=uo.mipmaps,oo.minFilter=LinearMipmapLinearFilter),uo.mipmapCount===1&&(oo.minFilter=LinearFilter),oo.needsUpdate=!0,to&&to(oo,uo))},ro,no),oo}});function ImageLoader(eo){Loader.call(this,eo)}ImageLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageLoader,load:function(eo,to,ro,no){this.path!==void 0&&(eo=this.path+eo),eo=this.manager.resolveURL(eo);var io=this,oo=Cache.get(eo);if(oo!==void 0)return io.manager.itemStart(eo),setTimeout(function(){to&&to(oo),io.manager.itemEnd(eo)},0),oo;var ao=document.createElementNS("http://www.w3.org/1999/xhtml","img");function so(){ao.removeEventListener("load",so,!1),ao.removeEventListener("error",uo,!1),Cache.add(eo,this),to&&to(this),io.manager.itemEnd(eo)}function uo(lo){ao.removeEventListener("load",so,!1),ao.removeEventListener("error",uo,!1),no&&no(lo),io.manager.itemError(eo),io.manager.itemEnd(eo)}return ao.addEventListener("load",so,!1),ao.addEventListener("error",uo,!1),eo.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ao.crossOrigin=this.crossOrigin),io.manager.itemStart(eo),ao.src=eo,ao}});function CubeTextureLoader(eo){Loader.call(this,eo)}CubeTextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:function(eo,to,ro,no){var io=new CubeTexture,oo=new ImageLoader(this.manager);oo.setCrossOrigin(this.crossOrigin),oo.setPath(this.path);var ao=0;function so(lo){oo.load(eo[lo],function(co){io.images[lo]=co,ao++,ao===6&&(io.needsUpdate=!0,to&&to(io))},void 0,no)}for(var uo=0;uo<eo.length;++uo)so(uo);return io}});function TextureLoader(eo){Loader.call(this,eo)}TextureLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:TextureLoader,load:function(eo,to,ro,no){var io=new Texture,oo=new ImageLoader(this.manager);return oo.setCrossOrigin(this.crossOrigin),oo.setPath(this.path),oo.load(eo,function(ao){io.image=ao;var so=eo.search(/\.jpe?g($|\?)/i)>0||eo.search(/^data\:image\/jpeg/)===0;io.format=so?RGBFormat:RGBAFormat,io.needsUpdate=!0,to!==void 0&&to(io)},ro,no),io}});function Curve(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(eo,to){var ro=this.getUtoTmapping(eo);return this.getPoint(ro,to)},getPoints:function(eo){eo===void 0&&(eo=5);for(var to=[],ro=0;ro<=eo;ro++)to.push(this.getPoint(ro/eo));return to},getSpacedPoints:function(eo){eo===void 0&&(eo=5);for(var to=[],ro=0;ro<=eo;ro++)to.push(this.getPointAt(ro/eo));return to},getLength:function(){var eo=this.getLengths();return eo[eo.length-1]},getLengths:function(eo){if(eo===void 0&&(eo=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===eo+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var to=[],ro,no=this.getPoint(0),io,oo=0;for(to.push(0),io=1;io<=eo;io++)ro=this.getPoint(io/eo),oo+=ro.distanceTo(no),to.push(oo),no=ro;return this.cacheArcLengths=to,to},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(eo,to){var ro=this.getLengths(),no=0,io=ro.length,oo;to?oo=to:oo=eo*ro[io-1];for(var ao=0,so=io-1,uo;ao<=so;)if(no=Math.floor(ao+(so-ao)/2),uo=ro[no]-oo,uo<0)ao=no+1;else if(uo>0)so=no-1;else{so=no;break}if(no=so,ro[no]===oo)return no/(io-1);var lo=ro[no],co=ro[no+1],fo=co-lo,mo=(oo-lo)/fo,go=(no+mo)/(io-1);return go},getTangent:function(eo,to){var ro=1e-4,no=eo-ro,io=eo+ro;no<0&&(no=0),io>1&&(io=1);var oo=this.getPoint(no),ao=this.getPoint(io),so=to||(oo.isVector2?new Vector2:new Vector3);return so.copy(ao).sub(oo).normalize(),so},getTangentAt:function(eo,to){var ro=this.getUtoTmapping(eo);return this.getTangent(ro,to)},computeFrenetFrames:function(eo,to){var ro=new Vector3,no=[],io=[],oo=[],ao=new Vector3,so=new Matrix4,uo,lo,co;for(uo=0;uo<=eo;uo++)lo=uo/eo,no[uo]=this.getTangentAt(lo,new Vector3),no[uo].normalize();io[0]=new Vector3,oo[0]=new Vector3;var fo=Number.MAX_VALUE,mo=Math.abs(no[0].x),go=Math.abs(no[0].y),yo=Math.abs(no[0].z);for(mo<=fo&&(fo=mo,ro.set(1,0,0)),go<=fo&&(fo=go,ro.set(0,1,0)),yo<=fo&&ro.set(0,0,1),ao.crossVectors(no[0],ro).normalize(),io[0].crossVectors(no[0],ao),oo[0].crossVectors(no[0],io[0]),uo=1;uo<=eo;uo++)io[uo]=io[uo-1].clone(),oo[uo]=oo[uo-1].clone(),ao.crossVectors(no[uo-1],no[uo]),ao.length()>Number.EPSILON&&(ao.normalize(),co=Math.acos(MathUtils.clamp(no[uo-1].dot(no[uo]),-1,1)),io[uo].applyMatrix4(so.makeRotationAxis(ao,co))),oo[uo].crossVectors(no[uo],io[uo]);if(to===!0)for(co=Math.acos(MathUtils.clamp(io[0].dot(io[eo]),-1,1)),co/=eo,no[0].dot(ao.crossVectors(io[0],io[eo]))>0&&(co=-co),uo=1;uo<=eo;uo++)io[uo].applyMatrix4(so.makeRotationAxis(no[uo],co*uo)),oo[uo].crossVectors(no[uo],io[uo]);return{tangents:no,normals:io,binormals:oo}},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.arcLengthDivisions=eo.arcLengthDivisions,this},toJSON:function(){var eo={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return eo.arcLengthDivisions=this.arcLengthDivisions,eo.type=this.type,eo},fromJSON:function(eo){return this.arcLengthDivisions=eo.arcLengthDivisions,this}});function EllipseCurve(eo,to,ro,no,io,oo,ao,so){Curve.call(this),this.type="EllipseCurve",this.aX=eo||0,this.aY=to||0,this.xRadius=ro||1,this.yRadius=no||1,this.aStartAngle=io||0,this.aEndAngle=oo||2*Math.PI,this.aClockwise=ao||!1,this.aRotation=so||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(eo,to){for(var ro=to||new Vector2,no=Math.PI*2,io=this.aEndAngle-this.aStartAngle,oo=Math.abs(io)<Number.EPSILON;io<0;)io+=no;for(;io>no;)io-=no;io<Number.EPSILON&&(oo?io=0:io=no),this.aClockwise===!0&&!oo&&(io===no?io=-no:io=io-no);var ao=this.aStartAngle+eo*io,so=this.aX+this.xRadius*Math.cos(ao),uo=this.aY+this.yRadius*Math.sin(ao);if(this.aRotation!==0){var lo=Math.cos(this.aRotation),co=Math.sin(this.aRotation),fo=so-this.aX,mo=uo-this.aY;so=fo*lo-mo*co+this.aX,uo=fo*co+mo*lo+this.aY}return ro.set(so,uo)};EllipseCurve.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.aX=eo.aX,this.aY=eo.aY,this.xRadius=eo.xRadius,this.yRadius=eo.yRadius,this.aStartAngle=eo.aStartAngle,this.aEndAngle=eo.aEndAngle,this.aClockwise=eo.aClockwise,this.aRotation=eo.aRotation,this};EllipseCurve.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.aX=this.aX,eo.aY=this.aY,eo.xRadius=this.xRadius,eo.yRadius=this.yRadius,eo.aStartAngle=this.aStartAngle,eo.aEndAngle=this.aEndAngle,eo.aClockwise=this.aClockwise,eo.aRotation=this.aRotation,eo};EllipseCurve.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.aX=eo.aX,this.aY=eo.aY,this.xRadius=eo.xRadius,this.yRadius=eo.yRadius,this.aStartAngle=eo.aStartAngle,this.aEndAngle=eo.aEndAngle,this.aClockwise=eo.aClockwise,this.aRotation=eo.aRotation,this};function ArcCurve(eo,to,ro,no,io,oo){EllipseCurve.call(this,eo,to,ro,ro,no,io,oo),this.type="ArcCurve"}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;ArcCurve.prototype.isArcCurve=!0;function CubicPoly(){var eo=0,to=0,ro=0,no=0;function io(oo,ao,so,uo){eo=oo,to=so,ro=-3*oo+3*ao-2*so-uo,no=2*oo-2*ao+so+uo}return{initCatmullRom:function(oo,ao,so,uo,lo){io(ao,so,lo*(so-oo),lo*(uo-ao))},initNonuniformCatmullRom:function(oo,ao,so,uo,lo,co,fo){var mo=(ao-oo)/lo-(so-oo)/(lo+co)+(so-ao)/co,go=(so-ao)/co-(uo-ao)/(co+fo)+(uo-so)/fo;mo*=co,go*=co,io(ao,so,mo,go)},calc:function(oo){var ao=oo*oo,so=ao*oo;return eo+to*oo+ro*ao+no*so}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(eo,to,ro,no){Curve.call(this),this.type="CatmullRomCurve3",this.points=eo||[],this.closed=to||!1,this.curveType=ro||"centripetal",this.tension=no||.5}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;CatmullRomCurve3.prototype.getPoint=function(eo,to){var ro=to||new Vector3,no=this.points,io=no.length,oo=(io-(this.closed?0:1))*eo,ao=Math.floor(oo),so=oo-ao;this.closed?ao+=ao>0?0:(Math.floor(Math.abs(ao)/io)+1)*io:so===0&&ao===io-1&&(ao=io-2,so=1);var uo,lo,co,fo;if(this.closed||ao>0?uo=no[(ao-1)%io]:(tmp.subVectors(no[0],no[1]).add(no[0]),uo=tmp),lo=no[ao%io],co=no[(ao+1)%io],this.closed||ao+2<io?fo=no[(ao+2)%io]:(tmp.subVectors(no[io-1],no[io-2]).add(no[io-1]),fo=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){var mo=this.curveType==="chordal"?.5:.25,go=Math.pow(uo.distanceToSquared(lo),mo),yo=Math.pow(lo.distanceToSquared(co),mo),vo=Math.pow(co.distanceToSquared(fo),mo);yo<1e-4&&(yo=1),go<1e-4&&(go=yo),vo<1e-4&&(vo=yo),px.initNonuniformCatmullRom(uo.x,lo.x,co.x,fo.x,go,yo,vo),py.initNonuniformCatmullRom(uo.y,lo.y,co.y,fo.y,go,yo,vo),pz.initNonuniformCatmullRom(uo.z,lo.z,co.z,fo.z,go,yo,vo)}else this.curveType==="catmullrom"&&(px.initCatmullRom(uo.x,lo.x,co.x,fo.x,this.tension),py.initCatmullRom(uo.y,lo.y,co.y,fo.y,this.tension),pz.initCatmullRom(uo.z,lo.z,co.z,fo.z,this.tension));return ro.set(px.calc(so),py.calc(so),pz.calc(so)),ro};CatmullRomCurve3.prototype.copy=function(eo){Curve.prototype.copy.call(this,eo),this.points=[];for(var to=0,ro=eo.points.length;to<ro;to++){var no=eo.points[to];this.points.push(no.clone())}return this.closed=eo.closed,this.curveType=eo.curveType,this.tension=eo.tension,this};CatmullRomCurve3.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);eo.points=[];for(var to=0,ro=this.points.length;to<ro;to++){var no=this.points[to];eo.points.push(no.toArray())}return eo.closed=this.closed,eo.curveType=this.curveType,eo.tension=this.tension,eo};CatmullRomCurve3.prototype.fromJSON=function(eo){Curve.prototype.fromJSON.call(this,eo),this.points=[];for(var to=0,ro=eo.points.length;to<ro;to++){var no=eo.points[to];this.points.push(new Vector3().fromArray(no))}return this.closed=eo.closed,this.curveType=eo.curveType,this.tension=eo.tension,this};function CatmullRom(eo,to,ro,no,io){var oo=(no-to)*.5,ao=(io-ro)*.5,so=eo*eo,uo=eo*so;return(2*ro-2*no+oo+ao)*uo+(-3*ro+3*no-2*oo-ao)*so+oo*eo+ro}function QuadraticBezierP0(eo,to){var ro=1-eo;return ro*ro*to}function QuadraticBezierP1(eo,to){return 2*(1-eo)*eo*to}function QuadraticBezierP2(eo,to){return eo*eo*to}function QuadraticBezier(eo,to,ro,no){return QuadraticBezierP0(eo,to)+QuadraticBezierP1(eo,ro)+QuadraticBezierP2(eo,no)}function CubicBezierP0(eo,to){var ro=1-eo;return ro*ro*ro*to}function CubicBezierP1(eo,to){var ro=1-eo;return 3*ro*ro*eo*to}function CubicBezierP2(eo,to){return 3*(1-eo)*eo*eo*to}function CubicBezierP3(eo,to){return eo*eo*eo*to}function CubicBezier(eo,to,ro,no,io){return CubicBezierP0(eo,to)+CubicBezierP1(eo,ro)+CubicBezierP2(eo,no)+CubicBezierP3(eo,io)}function CubicBezierCurve(eo,to,ro,no){Curve.call(this),this.type="CubicBezierCurve",this.v0=eo||new Vector2,this.v1=to||new Vector2,this.v2=ro||new Vector2,this.v3=no||new Vector2}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.isCubicBezierCurve=!0;CubicBezierCurve.prototype.getPoint=function(eo,to){var ro=to||new Vector2,no=this.v0,io=this.v1,oo=this.v2,ao=this.v3;return ro.set(CubicBezier(eo,no.x,io.x,oo.x,ao.x),CubicBezier(eo,no.y,io.y,oo.y,ao.y)),ro};CubicBezierCurve.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.v0.copy(eo.v0),this.v1.copy(eo.v1),this.v2.copy(eo.v2),this.v3.copy(eo.v3),this};CubicBezierCurve.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.v0=this.v0.toArray(),eo.v1=this.v1.toArray(),eo.v2=this.v2.toArray(),eo.v3=this.v3.toArray(),eo};CubicBezierCurve.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.v0.fromArray(eo.v0),this.v1.fromArray(eo.v1),this.v2.fromArray(eo.v2),this.v3.fromArray(eo.v3),this};function CubicBezierCurve3(eo,to,ro,no){Curve.call(this),this.type="CubicBezierCurve3",this.v0=eo||new Vector3,this.v1=to||new Vector3,this.v2=ro||new Vector3,this.v3=no||new Vector3}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;CubicBezierCurve3.prototype.getPoint=function(eo,to){var ro=to||new Vector3,no=this.v0,io=this.v1,oo=this.v2,ao=this.v3;return ro.set(CubicBezier(eo,no.x,io.x,oo.x,ao.x),CubicBezier(eo,no.y,io.y,oo.y,ao.y),CubicBezier(eo,no.z,io.z,oo.z,ao.z)),ro};CubicBezierCurve3.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.v0.copy(eo.v0),this.v1.copy(eo.v1),this.v2.copy(eo.v2),this.v3.copy(eo.v3),this};CubicBezierCurve3.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.v0=this.v0.toArray(),eo.v1=this.v1.toArray(),eo.v2=this.v2.toArray(),eo.v3=this.v3.toArray(),eo};CubicBezierCurve3.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.v0.fromArray(eo.v0),this.v1.fromArray(eo.v1),this.v2.fromArray(eo.v2),this.v3.fromArray(eo.v3),this};function LineCurve(eo,to){Curve.call(this),this.type="LineCurve",this.v1=eo||new Vector2,this.v2=to||new Vector2}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(eo,to){var ro=to||new Vector2;return eo===1?ro.copy(this.v2):(ro.copy(this.v2).sub(this.v1),ro.multiplyScalar(eo).add(this.v1)),ro};LineCurve.prototype.getPointAt=function(eo,to){return this.getPoint(eo,to)};LineCurve.prototype.getTangent=function(eo,to){var ro=to||new Vector2,ro=ro.copy(this.v2).sub(this.v1).normalize();return ro};LineCurve.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.v1.copy(eo.v1),this.v2.copy(eo.v2),this};LineCurve.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.v1=this.v1.toArray(),eo.v2=this.v2.toArray(),eo};LineCurve.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.v1.fromArray(eo.v1),this.v2.fromArray(eo.v2),this};function LineCurve3(eo,to){Curve.call(this),this.type="LineCurve3",this.v1=eo||new Vector3,this.v2=to||new Vector3}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.isLineCurve3=!0;LineCurve3.prototype.getPoint=function(eo,to){var ro=to||new Vector3;return eo===1?ro.copy(this.v2):(ro.copy(this.v2).sub(this.v1),ro.multiplyScalar(eo).add(this.v1)),ro};LineCurve3.prototype.getPointAt=function(eo,to){return this.getPoint(eo,to)};LineCurve3.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.v1.copy(eo.v1),this.v2.copy(eo.v2),this};LineCurve3.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.v1=this.v1.toArray(),eo.v2=this.v2.toArray(),eo};LineCurve3.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.v1.fromArray(eo.v1),this.v2.fromArray(eo.v2),this};function QuadraticBezierCurve(eo,to,ro){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=eo||new Vector2,this.v1=to||new Vector2,this.v2=ro||new Vector2}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;QuadraticBezierCurve.prototype.getPoint=function(eo,to){var ro=to||new Vector2,no=this.v0,io=this.v1,oo=this.v2;return ro.set(QuadraticBezier(eo,no.x,io.x,oo.x),QuadraticBezier(eo,no.y,io.y,oo.y)),ro};QuadraticBezierCurve.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.v0.copy(eo.v0),this.v1.copy(eo.v1),this.v2.copy(eo.v2),this};QuadraticBezierCurve.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.v0=this.v0.toArray(),eo.v1=this.v1.toArray(),eo.v2=this.v2.toArray(),eo};QuadraticBezierCurve.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.v0.fromArray(eo.v0),this.v1.fromArray(eo.v1),this.v2.fromArray(eo.v2),this};function QuadraticBezierCurve3(eo,to,ro){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=eo||new Vector3,this.v1=to||new Vector3,this.v2=ro||new Vector3}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;QuadraticBezierCurve3.prototype.getPoint=function(eo,to){var ro=to||new Vector3,no=this.v0,io=this.v1,oo=this.v2;return ro.set(QuadraticBezier(eo,no.x,io.x,oo.x),QuadraticBezier(eo,no.y,io.y,oo.y),QuadraticBezier(eo,no.z,io.z,oo.z)),ro};QuadraticBezierCurve3.prototype.copy=function(eo){return Curve.prototype.copy.call(this,eo),this.v0.copy(eo.v0),this.v1.copy(eo.v1),this.v2.copy(eo.v2),this};QuadraticBezierCurve3.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);return eo.v0=this.v0.toArray(),eo.v1=this.v1.toArray(),eo.v2=this.v2.toArray(),eo};QuadraticBezierCurve3.prototype.fromJSON=function(eo){return Curve.prototype.fromJSON.call(this,eo),this.v0.fromArray(eo.v0),this.v1.fromArray(eo.v1),this.v2.fromArray(eo.v2),this};function SplineCurve(eo){Curve.call(this),this.type="SplineCurve",this.points=eo||[]}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(eo,to){var ro=to||new Vector2,no=this.points,io=(no.length-1)*eo,oo=Math.floor(io),ao=io-oo,so=no[oo===0?oo:oo-1],uo=no[oo],lo=no[oo>no.length-2?no.length-1:oo+1],co=no[oo>no.length-3?no.length-1:oo+2];return ro.set(CatmullRom(ao,so.x,uo.x,lo.x,co.x),CatmullRom(ao,so.y,uo.y,lo.y,co.y)),ro};SplineCurve.prototype.copy=function(eo){Curve.prototype.copy.call(this,eo),this.points=[];for(var to=0,ro=eo.points.length;to<ro;to++){var no=eo.points[to];this.points.push(no.clone())}return this};SplineCurve.prototype.toJSON=function(){var eo=Curve.prototype.toJSON.call(this);eo.points=[];for(var to=0,ro=this.points.length;to<ro;to++){var no=this.points[to];eo.points.push(no.toArray())}return eo};SplineCurve.prototype.fromJSON=function(eo){Curve.prototype.fromJSON.call(this,eo),this.points=[];for(var to=0,ro=eo.points.length;to<ro;to++){var no=eo.points[to];this.points.push(new Vector2().fromArray(no))}return this};var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(eo){this.curves.push(eo)},closePath:function(){var eo=this.curves[0].getPoint(0),to=this.curves[this.curves.length-1].getPoint(1);eo.equals(to)||this.curves.push(new LineCurve(to,eo))},getPoint:function(eo){for(var to=eo*this.getLength(),ro=this.getCurveLengths(),no=0;no<ro.length;){if(ro[no]>=to){var io=ro[no]-to,oo=this.curves[no],ao=oo.getLength(),so=ao===0?0:1-io/ao;return oo.getPointAt(so)}no++}return null},getLength:function(){var eo=this.getCurveLengths();return eo[eo.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var eo=[],to=0,ro=0,no=this.curves.length;ro<no;ro++)to+=this.curves[ro].getLength(),eo.push(to);return this.cacheLengths=eo,eo},getSpacedPoints:function(eo){eo===void 0&&(eo=40);for(var to=[],ro=0;ro<=eo;ro++)to.push(this.getPoint(ro/eo));return this.autoClose&&to.push(to[0]),to},getPoints:function(eo){eo=eo||12;for(var to=[],ro,no=0,io=this.curves;no<io.length;no++)for(var oo=io[no],ao=oo&&oo.isEllipseCurve?eo*2:oo&&(oo.isLineCurve||oo.isLineCurve3)?1:oo&&oo.isSplineCurve?eo*oo.points.length:eo,so=oo.getPoints(ao),uo=0;uo<so.length;uo++){var lo=so[uo];ro&&ro.equals(lo)||(to.push(lo),ro=lo)}return this.autoClose&&to.length>1&&!to[to.length-1].equals(to[0])&&to.push(to[0]),to},copy:function(eo){Curve.prototype.copy.call(this,eo),this.curves=[];for(var to=0,ro=eo.curves.length;to<ro;to++){var no=eo.curves[to];this.curves.push(no.clone())}return this.autoClose=eo.autoClose,this},toJSON:function(){var eo=Curve.prototype.toJSON.call(this);eo.autoClose=this.autoClose,eo.curves=[];for(var to=0,ro=this.curves.length;to<ro;to++){var no=this.curves[to];eo.curves.push(no.toJSON())}return eo},fromJSON:function(eo){Curve.prototype.fromJSON.call(this,eo),this.autoClose=eo.autoClose,this.curves=[];for(var to=0,ro=eo.curves.length;to<ro;to++){var no=eo.curves[to];this.curves.push(new Curves[no.type]().fromJSON(no))}return this}});function Path(eo){CurvePath.call(this),this.type="Path",this.currentPoint=new Vector2,eo&&this.setFromPoints(eo)}Path.prototype=Object.assign(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:function(eo){this.moveTo(eo[0].x,eo[0].y);for(var to=1,ro=eo.length;to<ro;to++)this.lineTo(eo[to].x,eo[to].y);return this},moveTo:function(eo,to){return this.currentPoint.set(eo,to),this},lineTo:function(eo,to){var ro=new LineCurve(this.currentPoint.clone(),new Vector2(eo,to));return this.curves.push(ro),this.currentPoint.set(eo,to),this},quadraticCurveTo:function(eo,to,ro,no){var io=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(eo,to),new Vector2(ro,no));return this.curves.push(io),this.currentPoint.set(ro,no),this},bezierCurveTo:function(eo,to,ro,no,io,oo){var ao=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(eo,to),new Vector2(ro,no),new Vector2(io,oo));return this.curves.push(ao),this.currentPoint.set(io,oo),this},splineThru:function(eo){var to=[this.currentPoint.clone()].concat(eo),ro=new SplineCurve(to);return this.curves.push(ro),this.currentPoint.copy(eo[eo.length-1]),this},arc:function(eo,to,ro,no,io,oo){var ao=this.currentPoint.x,so=this.currentPoint.y;return this.absarc(eo+ao,to+so,ro,no,io,oo),this},absarc:function(eo,to,ro,no,io,oo){return this.absellipse(eo,to,ro,ro,no,io,oo),this},ellipse:function(eo,to,ro,no,io,oo,ao,so){var uo=this.currentPoint.x,lo=this.currentPoint.y;return this.absellipse(eo+uo,to+lo,ro,no,io,oo,ao,so),this},absellipse:function(eo,to,ro,no,io,oo,ao,so){var uo=new EllipseCurve(eo,to,ro,no,io,oo,ao,so);if(this.curves.length>0){var lo=uo.getPoint(0);lo.equals(this.currentPoint)||this.lineTo(lo.x,lo.y)}this.curves.push(uo);var co=uo.getPoint(1);return this.currentPoint.copy(co),this},copy:function(eo){return CurvePath.prototype.copy.call(this,eo),this.currentPoint.copy(eo.currentPoint),this},toJSON:function(){var eo=CurvePath.prototype.toJSON.call(this);return eo.currentPoint=this.currentPoint.toArray(),eo},fromJSON:function(eo){return CurvePath.prototype.fromJSON.call(this,eo),this.currentPoint.fromArray(eo.currentPoint),this}});function Shape(eo){Path.call(this,eo),this.uuid=MathUtils.generateUUID(),this.type="Shape",this.holes=[]}Shape.prototype=Object.assign(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:function(eo){for(var to=[],ro=0,no=this.holes.length;ro<no;ro++)to[ro]=this.holes[ro].getPoints(eo);return to},extractPoints:function(eo){return{shape:this.getPoints(eo),holes:this.getPointsHoles(eo)}},copy:function(eo){Path.prototype.copy.call(this,eo),this.holes=[];for(var to=0,ro=eo.holes.length;to<ro;to++){var no=eo.holes[to];this.holes.push(no.clone())}return this},toJSON:function(){var eo=Path.prototype.toJSON.call(this);eo.uuid=this.uuid,eo.holes=[];for(var to=0,ro=this.holes.length;to<ro;to++){var no=this.holes[to];eo.holes.push(no.toJSON())}return eo},fromJSON:function(eo){Path.prototype.fromJSON.call(this,eo),this.uuid=eo.uuid,this.holes=[];for(var to=0,ro=eo.holes.length;to<ro;to++){var no=eo.holes[to];this.holes.push(new Path().fromJSON(no))}return this}});function Light(eo,to){Object3D.call(this),this.type="Light",this.color=new Color(eo),this.intensity=to!==void 0?to:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(eo){return Object3D.prototype.copy.call(this,eo),this.color.copy(eo.color),this.intensity=eo.intensity,this},toJSON:function(eo){var to=Object3D.prototype.toJSON.call(this,eo);return to.object.color=this.color.getHex(),to.object.intensity=this.intensity,this.groundColor!==void 0&&(to.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(to.object.distance=this.distance),this.angle!==void 0&&(to.object.angle=this.angle),this.decay!==void 0&&(to.object.decay=this.decay),this.penumbra!==void 0&&(to.object.penumbra=this.penumbra),this.shadow!==void 0&&(to.object.shadow=this.shadow.toJSON()),to}});function HemisphereLight(eo,to,ro){Light.call(this,eo,ro),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(to)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(eo){return Light.prototype.copy.call(this,eo),this.groundColor.copy(eo.groundColor),this}});function LightShadow(eo){this.camera=eo,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}Object.assign(LightShadow.prototype,{_projScreenMatrix:new Matrix4,_lightPositionWorld:new Vector3,_lookTarget:new Vector3,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(eo){var to=this.camera,ro=this.matrix,no=this._projScreenMatrix,io=this._lookTarget,oo=this._lightPositionWorld;oo.setFromMatrixPosition(eo.matrixWorld),to.position.copy(oo),io.setFromMatrixPosition(eo.target.matrixWorld),to.lookAt(io),to.updateMatrixWorld(),no.multiplyMatrices(to.projectionMatrix,to.matrixWorldInverse),this._frustum.setFromProjectionMatrix(no),ro.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ro.multiply(to.projectionMatrix),ro.multiply(to.matrixWorldInverse)},getViewport:function(eo){return this._viewports[eo]},getFrameExtents:function(){return this._frameExtents},copy:function(eo){return this.camera=eo.camera.clone(),this.bias=eo.bias,this.radius=eo.radius,this.mapSize.copy(eo.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var eo={};return this.bias!==0&&(eo.bias=this.bias),this.radius!==1&&(eo.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(eo.mapSize=this.mapSize.toArray()),eo.camera=this.camera.toJSON(!1).object,delete eo.camera.matrix,eo}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:function(eo){var to=this.camera,ro=MathUtils.RAD2DEG*2*eo.angle,no=this.mapSize.width/this.mapSize.height,io=eo.distance||to.far;(ro!==to.fov||no!==to.aspect||io!==to.far)&&(to.fov=ro,to.aspect=no,to.far=io,to.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,eo)}});function SpotLight(eo,to,ro,no,io,oo){Light.call(this,eo,to),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(ao){this.intensity=ao/Math.PI}}),this.distance=ro!==void 0?ro:0,this.angle=no!==void 0?no:Math.PI/3,this.penumbra=io!==void 0?io:0,this.decay=oo!==void 0?oo:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(eo){return Light.prototype.copy.call(this,eo),this.distance=eo.distance,this.angle=eo.angle,this.penumbra=eo.penumbra,this.decay=eo.decay,this.target=eo.target.clone(),this.shadow=eo.shadow.clone(),this}});function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}PointLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:function(eo,to){to===void 0&&(to=0);var ro=this.camera,no=this.matrix,io=this._lightPositionWorld,oo=this._lookTarget,ao=this._projScreenMatrix;io.setFromMatrixPosition(eo.matrixWorld),ro.position.copy(io),oo.copy(ro.position),oo.add(this._cubeDirections[to]),ro.up.copy(this._cubeUps[to]),ro.lookAt(oo),ro.updateMatrixWorld(),no.makeTranslation(-io.x,-io.y,-io.z),ao.multiplyMatrices(ro.projectionMatrix,ro.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ao)}});function PointLight(eo,to,ro,no){Light.call(this,eo,to),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(io){this.intensity=io/(4*Math.PI)}}),this.distance=ro!==void 0?ro:0,this.decay=no!==void 0?no:1,this.shadow=new PointLightShadow}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(eo){return Light.prototype.copy.call(this,eo),this.distance=eo.distance,this.decay=eo.decay,this.shadow=eo.shadow.clone(),this}});function OrthographicCamera(eo,to,ro,no,io,oo){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=eo!==void 0?eo:-1,this.right=to!==void 0?to:1,this.top=ro!==void 0?ro:1,this.bottom=no!==void 0?no:-1,this.near=io!==void 0?io:.1,this.far=oo!==void 0?oo:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(eo,to){return Camera.prototype.copy.call(this,eo,to),this.left=eo.left,this.right=eo.right,this.top=eo.top,this.bottom=eo.bottom,this.near=eo.near,this.far=eo.far,this.zoom=eo.zoom,this.view=eo.view===null?null:Object.assign({},eo.view),this},setViewOffset:function(eo,to,ro,no,io,oo){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=eo,this.view.fullHeight=to,this.view.offsetX=ro,this.view.offsetY=no,this.view.width=io,this.view.height=oo,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var eo=(this.right-this.left)/(2*this.zoom),to=(this.top-this.bottom)/(2*this.zoom),ro=(this.right+this.left)/2,no=(this.top+this.bottom)/2,io=ro-eo,oo=ro+eo,ao=no+to,so=no-to;if(this.view!==null&&this.view.enabled){var uo=(this.right-this.left)/this.view.fullWidth/this.zoom,lo=(this.top-this.bottom)/this.view.fullHeight/this.zoom;io+=uo*this.view.offsetX,oo=io+uo*this.view.width,ao-=lo*this.view.offsetY,so=ao-lo*this.view.height}this.projectionMatrix.makeOrthographic(io,oo,ao,so,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(eo){var to=Object3D.prototype.toJSON.call(this,eo);return to.object.zoom=this.zoom,to.object.left=this.left,to.object.right=this.right,to.object.top=this.top,to.object.bottom=this.bottom,to.object.near=this.near,to.object.far=this.far,this.view!==null&&(to.object.view=Object.assign({},this.view)),to}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:function(eo){LightShadow.prototype.updateMatrices.call(this,eo)}});function DirectionalLight(eo,to){Light.call(this,eo,to),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(eo){return Light.prototype.copy.call(this,eo),this.target=eo.target.clone(),this.shadow=eo.shadow.clone(),this}});function AmbientLight(eo,to){Light.call(this,eo,to),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(eo,to,ro,no){Light.call(this,eo,to),this.type="RectAreaLight",this.width=ro!==void 0?ro:10,this.height=no!==void 0?no:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(eo){return Light.prototype.copy.call(this,eo),this.width=eo.width,this.height=eo.height,this},toJSON:function(eo){var to=Light.prototype.toJSON.call(this,eo);return to.object.width=this.width,to.object.height=this.height,to}});function SphericalHarmonics3(){this.coefficients=[];for(var eo=0;eo<9;eo++)this.coefficients.push(new Vector3)}Object.assign(SphericalHarmonics3.prototype,{isSphericalHarmonics3:!0,set:function(eo){for(var to=0;to<9;to++)this.coefficients[to].copy(eo[to]);return this},zero:function(){for(var eo=0;eo<9;eo++)this.coefficients[eo].set(0,0,0);return this},getAt:function(eo,to){var ro=eo.x,no=eo.y,io=eo.z,oo=this.coefficients;return to.copy(oo[0]).multiplyScalar(.282095),to.addScaledVector(oo[1],.488603*no),to.addScaledVector(oo[2],.488603*io),to.addScaledVector(oo[3],.488603*ro),to.addScaledVector(oo[4],1.092548*(ro*no)),to.addScaledVector(oo[5],1.092548*(no*io)),to.addScaledVector(oo[6],.315392*(3*io*io-1)),to.addScaledVector(oo[7],1.092548*(ro*io)),to.addScaledVector(oo[8],.546274*(ro*ro-no*no)),to},getIrradianceAt:function(eo,to){var ro=eo.x,no=eo.y,io=eo.z,oo=this.coefficients;return to.copy(oo[0]).multiplyScalar(.886227),to.addScaledVector(oo[1],2*.511664*no),to.addScaledVector(oo[2],2*.511664*io),to.addScaledVector(oo[3],2*.511664*ro),to.addScaledVector(oo[4],2*.429043*ro*no),to.addScaledVector(oo[5],2*.429043*no*io),to.addScaledVector(oo[6],.743125*io*io-.247708),to.addScaledVector(oo[7],2*.429043*ro*io),to.addScaledVector(oo[8],.429043*(ro*ro-no*no)),to},add:function(eo){for(var to=0;to<9;to++)this.coefficients[to].add(eo.coefficients[to]);return this},addScaledSH:function(eo,to){for(var ro=0;ro<9;ro++)this.coefficients[ro].addScaledVector(eo.coefficients[ro],to);return this},scale:function(eo){for(var to=0;to<9;to++)this.coefficients[to].multiplyScalar(eo);return this},lerp:function(eo,to){for(var ro=0;ro<9;ro++)this.coefficients[ro].lerp(eo.coefficients[ro],to);return this},equals:function(eo){for(var to=0;to<9;to++)if(!this.coefficients[to].equals(eo.coefficients[to]))return!1;return!0},copy:function(eo){return this.set(eo.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(eo,to){to===void 0&&(to=0);for(var ro=this.coefficients,no=0;no<9;no++)ro[no].fromArray(eo,to+no*3);return this},toArray:function(eo,to){eo===void 0&&(eo=[]),to===void 0&&(to=0);for(var ro=this.coefficients,no=0;no<9;no++)ro[no].toArray(eo,to+no*3);return eo}});Object.assign(SphericalHarmonics3,{getBasisAt:function(eo,to){var ro=eo.x,no=eo.y,io=eo.z;to[0]=.282095,to[1]=.488603*no,to[2]=.488603*io,to[3]=.488603*ro,to[4]=1.092548*ro*no,to[5]=1.092548*no*io,to[6]=.315392*(3*io*io-1),to[7]=1.092548*ro*io,to[8]=.546274*(ro*ro-no*no)}});function LightProbe(eo,to){Light.call(this,void 0,to),this.type="LightProbe",this.sh=eo!==void 0?eo:new SphericalHarmonics3}LightProbe.prototype=Object.assign(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:function(eo){return Light.prototype.copy.call(this,eo),this.sh.copy(eo.sh),this},fromJSON:function(eo){return this.intensity=eo.intensity,this.sh.fromArray(eo.sh),this},toJSON:function(eo){var to=Light.prototype.toJSON.call(this,eo);return to.object.sh=this.sh.toArray(),to}});function MaterialLoader(eo){Loader.call(this,eo),this.textures={}}MaterialLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:MaterialLoader,load:function(eo,to,ro,no){var io=this,oo=new FileLoader(io.manager);oo.setPath(io.path),oo.load(eo,function(ao){try{to(io.parse(JSON.parse(ao)))}catch(so){no?no(so):console.error(so),io.manager.itemError(eo)}},ro,no)},parse:function(eo){var to=this.textures;function ro(uo){return to[uo]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",uo),to[uo]}var no=new Materials[eo.type];if(eo.uuid!==void 0&&(no.uuid=eo.uuid),eo.name!==void 0&&(no.name=eo.name),eo.color!==void 0&&no.color.setHex(eo.color),eo.roughness!==void 0&&(no.roughness=eo.roughness),eo.metalness!==void 0&&(no.metalness=eo.metalness),eo.sheen!==void 0&&(no.sheen=new Color().setHex(eo.sheen)),eo.emissive!==void 0&&no.emissive.setHex(eo.emissive),eo.specular!==void 0&&no.specular.setHex(eo.specular),eo.shininess!==void 0&&(no.shininess=eo.shininess),eo.clearcoat!==void 0&&(no.clearcoat=eo.clearcoat),eo.clearcoatRoughness!==void 0&&(no.clearcoatRoughness=eo.clearcoatRoughness),eo.fog!==void 0&&(no.fog=eo.fog),eo.flatShading!==void 0&&(no.flatShading=eo.flatShading),eo.blending!==void 0&&(no.blending=eo.blending),eo.combine!==void 0&&(no.combine=eo.combine),eo.side!==void 0&&(no.side=eo.side),eo.opacity!==void 0&&(no.opacity=eo.opacity),eo.transparent!==void 0&&(no.transparent=eo.transparent),eo.alphaTest!==void 0&&(no.alphaTest=eo.alphaTest),eo.depthTest!==void 0&&(no.depthTest=eo.depthTest),eo.depthWrite!==void 0&&(no.depthWrite=eo.depthWrite),eo.colorWrite!==void 0&&(no.colorWrite=eo.colorWrite),eo.stencilWrite!==void 0&&(no.stencilWrite=eo.stencilWrite),eo.stencilWriteMask!==void 0&&(no.stencilWriteMask=eo.stencilWriteMask),eo.stencilFunc!==void 0&&(no.stencilFunc=eo.stencilFunc),eo.stencilRef!==void 0&&(no.stencilRef=eo.stencilRef),eo.stencilFuncMask!==void 0&&(no.stencilFuncMask=eo.stencilFuncMask),eo.stencilFail!==void 0&&(no.stencilFail=eo.stencilFail),eo.stencilZFail!==void 0&&(no.stencilZFail=eo.stencilZFail),eo.stencilZPass!==void 0&&(no.stencilZPass=eo.stencilZPass),eo.wireframe!==void 0&&(no.wireframe=eo.wireframe),eo.wireframeLinewidth!==void 0&&(no.wireframeLinewidth=eo.wireframeLinewidth),eo.wireframeLinecap!==void 0&&(no.wireframeLinecap=eo.wireframeLinecap),eo.wireframeLinejoin!==void 0&&(no.wireframeLinejoin=eo.wireframeLinejoin),eo.rotation!==void 0&&(no.rotation=eo.rotation),eo.linewidth!==1&&(no.linewidth=eo.linewidth),eo.dashSize!==void 0&&(no.dashSize=eo.dashSize),eo.gapSize!==void 0&&(no.gapSize=eo.gapSize),eo.scale!==void 0&&(no.scale=eo.scale),eo.polygonOffset!==void 0&&(no.polygonOffset=eo.polygonOffset),eo.polygonOffsetFactor!==void 0&&(no.polygonOffsetFactor=eo.polygonOffsetFactor),eo.polygonOffsetUnits!==void 0&&(no.polygonOffsetUnits=eo.polygonOffsetUnits),eo.skinning!==void 0&&(no.skinning=eo.skinning),eo.morphTargets!==void 0&&(no.morphTargets=eo.morphTargets),eo.morphNormals!==void 0&&(no.morphNormals=eo.morphNormals),eo.dithering!==void 0&&(no.dithering=eo.dithering),eo.vertexTangents!==void 0&&(no.vertexTangents=eo.vertexTangents),eo.visible!==void 0&&(no.visible=eo.visible),eo.toneMapped!==void 0&&(no.toneMapped=eo.toneMapped),eo.userData!==void 0&&(no.userData=eo.userData),eo.vertexColors!==void 0&&(typeof eo.vertexColors=="number"?no.vertexColors=eo.vertexColors>0:no.vertexColors=eo.vertexColors),eo.uniforms!==void 0)for(var io in eo.uniforms){var oo=eo.uniforms[io];switch(no.uniforms[io]={},oo.type){case"t":no.uniforms[io].value=ro(oo.value);break;case"c":no.uniforms[io].value=new Color().setHex(oo.value);break;case"v2":no.uniforms[io].value=new Vector2().fromArray(oo.value);break;case"v3":no.uniforms[io].value=new Vector3().fromArray(oo.value);break;case"v4":no.uniforms[io].value=new Vector4().fromArray(oo.value);break;case"m3":no.uniforms[io].value=new Matrix3().fromArray(oo.value);case"m4":no.uniforms[io].value=new Matrix4().fromArray(oo.value);break;default:no.uniforms[io].value=oo.value}}if(eo.defines!==void 0&&(no.defines=eo.defines),eo.vertexShader!==void 0&&(no.vertexShader=eo.vertexShader),eo.fragmentShader!==void 0&&(no.fragmentShader=eo.fragmentShader),eo.extensions!==void 0)for(var ao in eo.extensions)no.extensions[ao]=eo.extensions[ao];if(eo.shading!==void 0&&(no.flatShading=eo.shading===1),eo.size!==void 0&&(no.size=eo.size),eo.sizeAttenuation!==void 0&&(no.sizeAttenuation=eo.sizeAttenuation),eo.map!==void 0&&(no.map=ro(eo.map)),eo.matcap!==void 0&&(no.matcap=ro(eo.matcap)),eo.alphaMap!==void 0&&(no.alphaMap=ro(eo.alphaMap)),eo.bumpMap!==void 0&&(no.bumpMap=ro(eo.bumpMap)),eo.bumpScale!==void 0&&(no.bumpScale=eo.bumpScale),eo.normalMap!==void 0&&(no.normalMap=ro(eo.normalMap)),eo.normalMapType!==void 0&&(no.normalMapType=eo.normalMapType),eo.normalScale!==void 0){var so=eo.normalScale;Array.isArray(so)===!1&&(so=[so,so]),no.normalScale=new Vector2().fromArray(so)}return eo.displacementMap!==void 0&&(no.displacementMap=ro(eo.displacementMap)),eo.displacementScale!==void 0&&(no.displacementScale=eo.displacementScale),eo.displacementBias!==void 0&&(no.displacementBias=eo.displacementBias),eo.roughnessMap!==void 0&&(no.roughnessMap=ro(eo.roughnessMap)),eo.metalnessMap!==void 0&&(no.metalnessMap=ro(eo.metalnessMap)),eo.emissiveMap!==void 0&&(no.emissiveMap=ro(eo.emissiveMap)),eo.emissiveIntensity!==void 0&&(no.emissiveIntensity=eo.emissiveIntensity),eo.specularMap!==void 0&&(no.specularMap=ro(eo.specularMap)),eo.envMap!==void 0&&(no.envMap=ro(eo.envMap)),eo.envMapIntensity!==void 0&&(no.envMapIntensity=eo.envMapIntensity),eo.reflectivity!==void 0&&(no.reflectivity=eo.reflectivity),eo.refractionRatio!==void 0&&(no.refractionRatio=eo.refractionRatio),eo.lightMap!==void 0&&(no.lightMap=ro(eo.lightMap)),eo.lightMapIntensity!==void 0&&(no.lightMapIntensity=eo.lightMapIntensity),eo.aoMap!==void 0&&(no.aoMap=ro(eo.aoMap)),eo.aoMapIntensity!==void 0&&(no.aoMapIntensity=eo.aoMapIntensity),eo.gradientMap!==void 0&&(no.gradientMap=ro(eo.gradientMap)),eo.clearcoatMap!==void 0&&(no.clearcoatMap=ro(eo.clearcoatMap)),eo.clearcoatRoughnessMap!==void 0&&(no.clearcoatRoughnessMap=ro(eo.clearcoatRoughnessMap)),eo.clearcoatNormalMap!==void 0&&(no.clearcoatNormalMap=ro(eo.clearcoatNormalMap)),eo.clearcoatNormalScale!==void 0&&(no.clearcoatNormalScale=new Vector2().fromArray(eo.clearcoatNormalScale)),no},setTextures:function(eo){return this.textures=eo,this}});var LoaderUtils={decodeText:function(eo){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(eo);for(var to="",ro=0,no=eo.length;ro<no;ro++)to+=String.fromCharCode(eo[ro]);try{return decodeURIComponent(escape(to))}catch{return to}},extractUrlBase:function(eo){var to=eo.lastIndexOf("/");return to===-1?"./":eo.substr(0,to+1)}};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:function(eo){return BufferGeometry.prototype.copy.call(this,eo),this.instanceCount=eo.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var eo=BufferGeometry.prototype.toJSON.call(this);return eo.instanceCount=this.instanceCount,eo.isInstancedBufferGeometry=!0,eo}});function InstancedBufferAttribute(eo,to,ro,no){typeof ro=="number"&&(no=ro,ro=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,eo,to,ro),this.meshPerAttribute=no||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(eo){return BufferAttribute.prototype.copy.call(this,eo),this.meshPerAttribute=eo.meshPerAttribute,this},toJSON:function(){var eo=BufferAttribute.prototype.toJSON.call(this);return eo.meshPerAttribute=this.meshPerAttribute,eo.isInstancedBufferAttribute=!0,eo}});function BufferGeometryLoader(eo){Loader.call(this,eo)}BufferGeometryLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:function(eo,to,ro,no){var io=this,oo=new FileLoader(io.manager);oo.setPath(io.path),oo.load(eo,function(ao){try{to(io.parse(JSON.parse(ao)))}catch(so){no?no(so):console.error(so),io.manager.itemError(eo)}},ro,no)},parse:function(eo){var to=eo.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,ro=eo.data.index;if(ro!==void 0){var no=new TYPED_ARRAYS[ro.type](ro.array);to.setIndex(new BufferAttribute(no,1))}var io=eo.data.attributes;for(var oo in io){var ao=io[oo],no=new TYPED_ARRAYS[ao.type](ao.array),so=ao.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute,uo=new so(no,ao.itemSize,ao.normalized);ao.name!==void 0&&(uo.name=ao.name),to.setAttribute(oo,uo)}var lo=eo.data.morphAttributes;if(lo)for(var oo in lo){for(var co=lo[oo],fo=[],mo=0,go=co.length;mo<go;mo++){var ao=co[mo],no=new TYPED_ARRAYS[ao.type](ao.array),uo=new BufferAttribute(no,ao.itemSize,ao.normalized);ao.name!==void 0&&(uo.name=ao.name),fo.push(uo)}to.morphAttributes[oo]=fo}var yo=eo.data.morphTargetsRelative;yo&&(to.morphTargetsRelative=!0);var vo=eo.data.groups||eo.data.drawcalls||eo.data.offsets;if(vo!==void 0)for(var mo=0,Ao=vo.length;mo!==Ao;++mo){var ho=vo[mo];to.addGroup(ho.start,ho.count,ho.materialIndex)}var po=eo.data.boundingSphere;if(po!==void 0){var Mo=new Vector3;po.center!==void 0&&Mo.fromArray(po.center),to.boundingSphere=new Sphere(Mo,po.radius)}return eo.name&&(to.name=eo.name),eo.userData&&(to.userData=eo.userData),to}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ObjectLoader(eo){Loader.call(this,eo)}ObjectLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ObjectLoader,load:function(eo,to,ro,no){var io=this,oo=this.path===""?LoaderUtils.extractUrlBase(eo):this.path;this.resourcePath=this.resourcePath||oo;var ao=new FileLoader(io.manager);ao.setPath(this.path),ao.load(eo,function(so){var uo=null;try{uo=JSON.parse(so)}catch(co){no!==void 0&&no(co),console.error("THREE:ObjectLoader: Can't parse "+eo+".",co.message);return}var lo=uo.metadata;if(lo===void 0||lo.type===void 0||lo.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+eo);return}io.parse(uo,to)},ro,no)},parse:function(eo,to){var ro=this.parseShape(eo.shapes),no=this.parseGeometries(eo.geometries,ro),io=this.parseImages(eo.images,function(){to!==void 0&&to(so)}),oo=this.parseTextures(eo.textures,io),ao=this.parseMaterials(eo.materials,oo),so=this.parseObject(eo.object,no,ao);return eo.animations&&(so.animations=this.parseAnimations(eo.animations)),(eo.images===void 0||eo.images.length===0)&&to!==void 0&&to(so),so},parseShape:function(eo){var to={};if(eo!==void 0)for(var ro=0,no=eo.length;ro<no;ro++){var io=new Shape().fromJSON(eo[ro]);to[io.uuid]=io}return to},parseGeometries:function(eo,to){var ro={};if(eo!==void 0)for(var no=new BufferGeometryLoader,io=0,oo=eo.length;io<oo;io++){var ao,so=eo[io];switch(so.type){case"PlaneGeometry":case"PlaneBufferGeometry":ao=new Geometries[so.type](so.width,so.height,so.widthSegments,so.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":ao=new Geometries[so.type](so.width,so.height,so.depth,so.widthSegments,so.heightSegments,so.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":ao=new Geometries[so.type](so.radius,so.segments,so.thetaStart,so.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":ao=new Geometries[so.type](so.radiusTop,so.radiusBottom,so.height,so.radialSegments,so.heightSegments,so.openEnded,so.thetaStart,so.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":ao=new Geometries[so.type](so.radius,so.height,so.radialSegments,so.heightSegments,so.openEnded,so.thetaStart,so.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":ao=new Geometries[so.type](so.radius,so.widthSegments,so.heightSegments,so.phiStart,so.phiLength,so.thetaStart,so.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":ao=new Geometries[so.type](so.radius,so.detail);break;case"RingGeometry":case"RingBufferGeometry":ao=new Geometries[so.type](so.innerRadius,so.outerRadius,so.thetaSegments,so.phiSegments,so.thetaStart,so.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":ao=new Geometries[so.type](so.radius,so.tube,so.radialSegments,so.tubularSegments,so.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":ao=new Geometries[so.type](so.radius,so.tube,so.tubularSegments,so.radialSegments,so.p,so.q);break;case"TubeGeometry":case"TubeBufferGeometry":ao=new Geometries[so.type](new Curves[so.path.type]().fromJSON(so.path),so.tubularSegments,so.radius,so.radialSegments,so.closed);break;case"LatheGeometry":case"LatheBufferGeometry":ao=new Geometries[so.type](so.points,so.segments,so.phiStart,so.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":ao=new Geometries[so.type](so.vertices,so.indices,so.radius,so.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var fo=[],uo=0,lo=so.shapes.length;uo<lo;uo++){var co=to[so.shapes[uo]];fo.push(co)}ao=new Geometries[so.type](fo,so.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var fo=[],uo=0,lo=so.shapes.length;uo<lo;uo++){var co=to[so.shapes[uo]];fo.push(co)}var mo=so.options.extrudePath;mo!==void 0&&(so.options.extrudePath=new Curves[mo.type]().fromJSON(mo)),ao=new Geometries[so.type](fo,so.options);break;case"BufferGeometry":case"InstancedBufferGeometry":ao=no.parse(so);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+so.type+'"');continue}ao.uuid=so.uuid,so.name!==void 0&&(ao.name=so.name),ao.isBufferGeometry===!0&&so.userData!==void 0&&(ao.userData=so.userData),ro[so.uuid]=ao}return ro},parseMaterials:function(eo,to){var ro={},no={};if(eo!==void 0){var io=new MaterialLoader;io.setTextures(to);for(var oo=0,ao=eo.length;oo<ao;oo++){var so=eo[oo];if(so.type==="MultiMaterial"){for(var uo=[],lo=0;lo<so.materials.length;lo++){var co=so.materials[lo];ro[co.uuid]===void 0&&(ro[co.uuid]=io.parse(co)),uo.push(ro[co.uuid])}no[so.uuid]=uo}else ro[so.uuid]===void 0&&(ro[so.uuid]=io.parse(so)),no[so.uuid]=ro[so.uuid]}}return no},parseAnimations:function(eo){for(var to=[],ro=0;ro<eo.length;ro++){var no=eo[ro],io=AnimationClip.parse(no);no.uuid!==void 0&&(io.uuid=no.uuid),to.push(io)}return to},parseImages:function(eo,to){var ro=this,no={};function io(vo){return ro.manager.itemStart(vo),ao.load(vo,function(){ro.manager.itemEnd(vo)},void 0,function(){ro.manager.itemError(vo),ro.manager.itemEnd(vo)})}if(eo!==void 0&&eo.length>0){var oo=new LoadingManager(to),ao=new ImageLoader(oo);ao.setCrossOrigin(this.crossOrigin);for(var so=0,uo=eo.length;so<uo;so++){var lo=eo[so],co=lo.url;if(Array.isArray(co)){no[lo.uuid]=[];for(var fo=0,mo=co.length;fo<mo;fo++){var go=co[fo],yo=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(go)?go:ro.resourcePath+go;no[lo.uuid].push(io(yo))}}else{var yo=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(lo.url)?lo.url:ro.resourcePath+lo.url;no[lo.uuid]=io(yo)}}}return no},parseTextures:function(eo,to){function ro(uo,lo){return typeof uo=="number"?uo:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",uo),lo[uo])}var no={};if(eo!==void 0)for(var io=0,oo=eo.length;io<oo;io++){var ao=eo[io];ao.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',ao.uuid),to[ao.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",ao.image);var so;Array.isArray(to[ao.image])?so=new CubeTexture(to[ao.image]):so=new Texture(to[ao.image]),so.needsUpdate=!0,so.uuid=ao.uuid,ao.name!==void 0&&(so.name=ao.name),ao.mapping!==void 0&&(so.mapping=ro(ao.mapping,TEXTURE_MAPPING)),ao.offset!==void 0&&so.offset.fromArray(ao.offset),ao.repeat!==void 0&&so.repeat.fromArray(ao.repeat),ao.center!==void 0&&so.center.fromArray(ao.center),ao.rotation!==void 0&&(so.rotation=ao.rotation),ao.wrap!==void 0&&(so.wrapS=ro(ao.wrap[0],TEXTURE_WRAPPING),so.wrapT=ro(ao.wrap[1],TEXTURE_WRAPPING)),ao.format!==void 0&&(so.format=ao.format),ao.type!==void 0&&(so.type=ao.type),ao.encoding!==void 0&&(so.encoding=ao.encoding),ao.minFilter!==void 0&&(so.minFilter=ro(ao.minFilter,TEXTURE_FILTER)),ao.magFilter!==void 0&&(so.magFilter=ro(ao.magFilter,TEXTURE_FILTER)),ao.anisotropy!==void 0&&(so.anisotropy=ao.anisotropy),ao.flipY!==void 0&&(so.flipY=ao.flipY),ao.premultiplyAlpha!==void 0&&(so.premultiplyAlpha=ao.premultiplyAlpha),ao.unpackAlignment!==void 0&&(so.unpackAlignment=ao.unpackAlignment),no[ao.uuid]=so}return no},parseObject:function(eo,to,ro){var no;function io(Ao){return to[Ao]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ao),to[Ao]}function oo(Ao){if(Ao!==void 0){if(Array.isArray(Ao)){for(var ho=[],po=0,Mo=Ao.length;po<Mo;po++){var xo=Ao[po];ro[xo]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",xo),ho.push(ro[xo])}return ho}return ro[Ao]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ao),ro[Ao]}}switch(eo.type){case"Scene":no=new Scene,eo.background!==void 0&&Number.isInteger(eo.background)&&(no.background=new Color(eo.background)),eo.fog!==void 0&&(eo.fog.type==="Fog"?no.fog=new Fog(eo.fog.color,eo.fog.near,eo.fog.far):eo.fog.type==="FogExp2"&&(no.fog=new FogExp2(eo.fog.color,eo.fog.density)));break;case"PerspectiveCamera":no=new PerspectiveCamera(eo.fov,eo.aspect,eo.near,eo.far),eo.focus!==void 0&&(no.focus=eo.focus),eo.zoom!==void 0&&(no.zoom=eo.zoom),eo.filmGauge!==void 0&&(no.filmGauge=eo.filmGauge),eo.filmOffset!==void 0&&(no.filmOffset=eo.filmOffset),eo.view!==void 0&&(no.view=Object.assign({},eo.view));break;case"OrthographicCamera":no=new OrthographicCamera(eo.left,eo.right,eo.top,eo.bottom,eo.near,eo.far),eo.zoom!==void 0&&(no.zoom=eo.zoom),eo.view!==void 0&&(no.view=Object.assign({},eo.view));break;case"AmbientLight":no=new AmbientLight(eo.color,eo.intensity);break;case"DirectionalLight":no=new DirectionalLight(eo.color,eo.intensity);break;case"PointLight":no=new PointLight(eo.color,eo.intensity,eo.distance,eo.decay);break;case"RectAreaLight":no=new RectAreaLight(eo.color,eo.intensity,eo.width,eo.height);break;case"SpotLight":no=new SpotLight(eo.color,eo.intensity,eo.distance,eo.angle,eo.penumbra,eo.decay);break;case"HemisphereLight":no=new HemisphereLight(eo.color,eo.groundColor,eo.intensity);break;case"LightProbe":no=new LightProbe().fromJSON(eo);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var ao=io(eo.geometry),so=oo(eo.material);no=new Mesh(ao,so);break;case"InstancedMesh":var ao=io(eo.geometry),so=oo(eo.material),uo=eo.count,lo=eo.instanceMatrix;no=new InstancedMesh(ao,so,uo),no.instanceMatrix=new BufferAttribute(new Float32Array(lo.array),16);break;case"LOD":no=new LOD;break;case"Line":no=new Line$1(io(eo.geometry),oo(eo.material),eo.mode);break;case"LineLoop":no=new LineLoop(io(eo.geometry),oo(eo.material));break;case"LineSegments":no=new LineSegments(io(eo.geometry),oo(eo.material));break;case"PointCloud":case"Points":no=new Points(io(eo.geometry),oo(eo.material));break;case"Sprite":no=new Sprite(oo(eo.material));break;case"Group":no=new Group;break;default:no=new Object3D}if(no.uuid=eo.uuid,eo.name!==void 0&&(no.name=eo.name),eo.matrix!==void 0?(no.matrix.fromArray(eo.matrix),eo.matrixAutoUpdate!==void 0&&(no.matrixAutoUpdate=eo.matrixAutoUpdate),no.matrixAutoUpdate&&no.matrix.decompose(no.position,no.quaternion,no.scale)):(eo.position!==void 0&&no.position.fromArray(eo.position),eo.rotation!==void 0&&no.rotation.fromArray(eo.rotation),eo.quaternion!==void 0&&no.quaternion.fromArray(eo.quaternion),eo.scale!==void 0&&no.scale.fromArray(eo.scale)),eo.castShadow!==void 0&&(no.castShadow=eo.castShadow),eo.receiveShadow!==void 0&&(no.receiveShadow=eo.receiveShadow),eo.shadow&&(eo.shadow.bias!==void 0&&(no.shadow.bias=eo.shadow.bias),eo.shadow.radius!==void 0&&(no.shadow.radius=eo.shadow.radius),eo.shadow.mapSize!==void 0&&no.shadow.mapSize.fromArray(eo.shadow.mapSize),eo.shadow.camera!==void 0&&(no.shadow.camera=this.parseObject(eo.shadow.camera))),eo.visible!==void 0&&(no.visible=eo.visible),eo.frustumCulled!==void 0&&(no.frustumCulled=eo.frustumCulled),eo.renderOrder!==void 0&&(no.renderOrder=eo.renderOrder),eo.userData!==void 0&&(no.userData=eo.userData),eo.layers!==void 0&&(no.layers.mask=eo.layers),eo.children!==void 0)for(var co=eo.children,fo=0;fo<co.length;fo++)no.add(this.parseObject(co[fo],to,ro));if(eo.type==="LOD"){eo.autoUpdate!==void 0&&(no.autoUpdate=eo.autoUpdate);for(var mo=eo.levels,go=0;go<mo.length;go++){var yo=mo[go],vo=no.getObjectByProperty("uuid",yo.object);vo!==void 0&&no.addLevel(vo,yo.distance)}}return no}});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};function ImageBitmapLoader(eo){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,eo),this.options=void 0}ImageBitmapLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,setOptions:function(to){return this.options=to,this},load:function(eo,to,ro,no){eo===void 0&&(eo=""),this.path!==void 0&&(eo=this.path+eo),eo=this.manager.resolveURL(eo);var io=this,oo=Cache.get(eo);if(oo!==void 0)return io.manager.itemStart(eo),setTimeout(function(){to&&to(oo),io.manager.itemEnd(eo)},0),oo;fetch(eo).then(function(ao){return ao.blob()}).then(function(ao){return io.options===void 0?createImageBitmap(ao):createImageBitmap(ao,io.options)}).then(function(ao){Cache.add(eo,ao),to&&to(ao),io.manager.itemEnd(eo)}).catch(function(ao){no&&no(ao),io.manager.itemError(eo),io.manager.itemEnd(eo)}),io.manager.itemStart(eo)}});function ShapePath(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(eo,to){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(eo,to),this},lineTo:function(eo,to){return this.currentPath.lineTo(eo,to),this},quadraticCurveTo:function(eo,to,ro,no){return this.currentPath.quadraticCurveTo(eo,to,ro,no),this},bezierCurveTo:function(eo,to,ro,no,io,oo){return this.currentPath.bezierCurveTo(eo,to,ro,no,io,oo),this},splineThru:function(eo){return this.currentPath.splineThru(eo),this},toShapes:function(eo,to){function ro(Lo){for(var $o=[],jo=0,Wo=Lo.length;jo<Wo;jo++){var Ko=Lo[jo],Jo=new Shape;Jo.curves=Ko.curves,$o.push(Jo)}return $o}function no(Lo,$o){for(var jo=$o.length,Wo=!1,Ko=jo-1,Jo=0;Jo<jo;Ko=Jo++){var Go=$o[Ko],Xo=$o[Jo],va=Xo.x-Go.x,tu=Xo.y-Go.y;if(Math.abs(tu)>Number.EPSILON){if(tu<0&&(Go=$o[Jo],va=-va,Xo=$o[Ko],tu=-tu),Lo.y<Go.y||Lo.y>Xo.y)continue;if(Lo.y===Go.y){if(Lo.x===Go.x)return!0}else{var Zs=tu*(Lo.x-Go.x)-va*(Lo.y-Go.y);if(Zs===0)return!0;if(Zs<0)continue;Wo=!Wo}}else{if(Lo.y!==Go.y)continue;if(Xo.x<=Lo.x&&Lo.x<=Go.x||Go.x<=Lo.x&&Lo.x<=Xo.x)return!0}}return Wo}var io=ShapeUtils.isClockWise,oo=this.subPaths;if(oo.length===0)return[];if(to===!0)return ro(oo);var ao,so,uo,lo=[];if(oo.length===1)return so=oo[0],uo=new Shape,uo.curves=so.curves,lo.push(uo),lo;var co=!io(oo[0].getPoints());co=eo?!co:co;var fo=[],mo=[],go=[],yo=0,vo;mo[yo]=void 0,go[yo]=[];for(var Ao=0,ho=oo.length;Ao<ho;Ao++)so=oo[Ao],vo=so.getPoints(),ao=io(vo),ao=eo?!ao:ao,ao?(!co&&mo[yo]&&yo++,mo[yo]={s:new Shape,p:vo},mo[yo].s.curves=so.curves,co&&yo++,go[yo]=[]):go[yo].push({h:so,p:vo[0]});if(!mo[0])return ro(oo);if(mo.length>1){for(var po=!1,Mo=[],xo=0,wo=mo.length;xo<wo;xo++)fo[xo]=[];for(var xo=0,wo=mo.length;xo<wo;xo++)for(var bo=go[xo],_o=0;_o<bo.length;_o++){for(var To=bo[_o],No=!0,Po=0;Po<mo.length;Po++)no(To.p,mo[Po].p)&&(xo!==Po&&Mo.push({froms:xo,tos:Po,hole:_o}),No?(No=!1,fo[Po].push(To)):po=!0);No&&fo[xo].push(To)}Mo.length>0&&(po||(go=fo))}for(var Co,Ao=0,Do=mo.length;Ao<Do;Ao++){uo=mo[Ao].s,lo.push(uo),Co=go[Ao];for(var zo=0,Ro=Co.length;zo<Ro;zo++)uo.holes.push(Co[zo].h)}return lo}});function Font(eo){this.type="Font",this.data=eo}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(eo,to){to===void 0&&(to=100);for(var ro=[],no=createPaths(eo,to,this.data),io=0,oo=no.length;io<oo;io++)Array.prototype.push.apply(ro,no[io].toShapes());return ro}});function createPaths(eo,to,ro){for(var no=Array.from?Array.from(eo):String(eo).split(""),io=to/ro.resolution,oo=(ro.boundingBox.yMax-ro.boundingBox.yMin+ro.underlineThickness)*io,ao=[],so=0,uo=0,lo=0;lo<no.length;lo++){var co=no[lo];if(co===`
`)so=0,uo-=oo;else{var fo=createPath(co,io,so,uo,ro);so+=fo.offsetX,ao.push(fo.path)}}return ao}function createPath(eo,to,ro,no,io){var oo=io.glyphs[eo]||io.glyphs["?"];if(!oo){console.error('THREE.Font: character "'+eo+'" does not exists in font family '+io.familyName+".");return}var ao=new ShapePath,so,uo,lo,co,fo,mo,go,yo;if(oo.o)for(var vo=oo._cachedOutline||(oo._cachedOutline=oo.o.split(" ")),Ao=0,ho=vo.length;Ao<ho;){var po=vo[Ao++];switch(po){case"m":so=vo[Ao++]*to+ro,uo=vo[Ao++]*to+no,ao.moveTo(so,uo);break;case"l":so=vo[Ao++]*to+ro,uo=vo[Ao++]*to+no,ao.lineTo(so,uo);break;case"q":lo=vo[Ao++]*to+ro,co=vo[Ao++]*to+no,fo=vo[Ao++]*to+ro,mo=vo[Ao++]*to+no,ao.quadraticCurveTo(fo,mo,lo,co);break;case"b":lo=vo[Ao++]*to+ro,co=vo[Ao++]*to+no,fo=vo[Ao++]*to+ro,mo=vo[Ao++]*to+no,go=vo[Ao++]*to+ro,yo=vo[Ao++]*to+no,ao.bezierCurveTo(fo,mo,go,yo,lo,co);break}}return{offsetX:oo.ha*to,path:ao}}function FontLoader(eo){Loader.call(this,eo)}FontLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:FontLoader,load:function(eo,to,ro,no){var io=this,oo=new FileLoader(this.manager);oo.setPath(this.path),oo.load(eo,function(ao){var so;try{so=JSON.parse(ao)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),so=JSON.parse(ao.substring(65,ao.length-2))}var uo=io.parse(so);to&&to(uo)},ro,no)},parse:function(eo){return new Font(eo)}});var _context,AudioContext={getContext:function(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context},setContext:function(eo){_context=eo}};function AudioLoader(eo){Loader.call(this,eo)}AudioLoader.prototype=Object.assign(Object.create(Loader.prototype),{constructor:AudioLoader,load:function(eo,to,ro,no){var io=this,oo=new FileLoader(io.manager);oo.setResponseType("arraybuffer"),oo.setPath(io.path),oo.load(eo,function(ao){try{var so=ao.slice(0),uo=AudioContext.getContext();uo.decodeAudioData(so,function(lo){to(lo)})}catch(lo){no?no(lo):console.error(lo),io.manager.itemError(eo)}},ro,no)}});function HemisphereLightProbe(eo,to,ro){LightProbe.call(this,void 0,ro);var no=new Color().set(eo),io=new Color().set(to),oo=new Vector3(no.r,no.g,no.b),ao=new Vector3(io.r,io.g,io.b),so=Math.sqrt(Math.PI),uo=so*Math.sqrt(.75);this.sh.coefficients[0].copy(oo).add(ao).multiplyScalar(so),this.sh.coefficients[1].copy(oo).sub(ao).multiplyScalar(uo)}HemisphereLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:function(eo){return LightProbe.prototype.copy.call(this,eo),this},toJSON:function(eo){var to=LightProbe.prototype.toJSON.call(this,eo);return to}});function AmbientLightProbe(eo,to){LightProbe.call(this,void 0,to);var ro=new Color().set(eo);this.sh.coefficients[0].set(ro.r,ro.g,ro.b).multiplyScalar(2*Math.sqrt(Math.PI))}AmbientLightProbe.prototype=Object.assign(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:function(eo){return LightProbe.prototype.copy.call(this,eo),this},toJSON:function(eo){var to=LightProbe.prototype.toJSON.call(this,eo);return to}});var _eyeRight=new Matrix4,_eyeLeft=new Matrix4;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(StereoCamera.prototype,{update:function(eo){var to=this._cache,ro=to.focus!==eo.focus||to.fov!==eo.fov||to.aspect!==eo.aspect*this.aspect||to.near!==eo.near||to.far!==eo.far||to.zoom!==eo.zoom||to.eyeSep!==this.eyeSep;if(ro){to.focus=eo.focus,to.fov=eo.fov,to.aspect=eo.aspect*this.aspect,to.near=eo.near,to.far=eo.far,to.zoom=eo.zoom,to.eyeSep=this.eyeSep;var no=eo.projectionMatrix.clone(),io=to.eyeSep/2,oo=io*to.near/to.focus,ao=to.near*Math.tan(MathUtils.DEG2RAD*to.fov*.5)/to.zoom,so,uo;_eyeLeft.elements[12]=-io,_eyeRight.elements[12]=io,so=-ao*to.aspect+oo,uo=ao*to.aspect+oo,no.elements[0]=2*to.near/(uo-so),no.elements[8]=(uo+so)/(uo-so),this.cameraL.projectionMatrix.copy(no),so=-ao*to.aspect-oo,uo=ao*to.aspect-oo,no.elements[0]=2*to.near/(uo-so),no.elements[8]=(uo+so)/(uo-so),this.cameraR.projectionMatrix.copy(no)}this.cameraL.matrixWorld.copy(eo.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(eo.matrixWorld).multiply(_eyeRight)}});function Clock(eo){this.autoStart=eo!==void 0?eo:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var eo=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var to=(typeof performance=="undefined"?Date:performance).now();eo=(to-this.oldTime)/1e3,this.oldTime=to,this.elapsedTime+=eo}return eo}});var _position$2=new Vector3,_quaternion$3=new Quaternion,_scale$1=new Vector3,_orientation=new Vector3;function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(eo){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=eo,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(eo){return this.gain.gain.setTargetAtTime(eo,this.context.currentTime,.01),this},updateMatrixWorld:function(eo){Object3D.prototype.updateMatrixWorld.call(this,eo);var to=this.context.listener,ro=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$2,_quaternion$3,_scale$1),_orientation.set(0,0,-1).applyQuaternion(_quaternion$3),to.positionX){var no=this.context.currentTime+this.timeDelta;to.positionX.linearRampToValueAtTime(_position$2.x,no),to.positionY.linearRampToValueAtTime(_position$2.y,no),to.positionZ.linearRampToValueAtTime(_position$2.z,no),to.forwardX.linearRampToValueAtTime(_orientation.x,no),to.forwardY.linearRampToValueAtTime(_orientation.y,no),to.forwardZ.linearRampToValueAtTime(_orientation.z,no),to.upX.linearRampToValueAtTime(ro.x,no),to.upY.linearRampToValueAtTime(ro.y,no),to.upZ.linearRampToValueAtTime(ro.z,no)}else to.setPosition(_position$2.x,_position$2.y,_position$2.z),to.setOrientation(_orientation.x,_orientation.y,_orientation.z,ro.x,ro.y,ro.z)}});function Audio(eo){Object3D.call(this),this.type="Audio",this.listener=eo,this.context=eo.context,this.gain=this.context.createGain(),this.gain.connect(eo.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(eo){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=eo,this.connect(),this},setMediaElementSource:function(eo){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(eo),this.connect(),this},setMediaStreamSource:function(eo){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(eo),this.connect(),this},setBuffer:function(eo){return this.buffer=eo,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(eo){if(eo===void 0&&(eo=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+eo;var to=this.context.createBufferSource();return to.buffer=this.buffer,to.loop=this.loop,to.loopStart=this.loopStart,to.loopEnd=this.loopEnd,to.onended=this.onEnded.bind(this),to.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=to,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var eo=1,to=this.filters.length;eo<to;eo++)this.filters[eo-1].connect(this.filters[eo]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var eo=1,to=this.filters.length;eo<to;eo++)this.filters[eo-1].disconnect(this.filters[eo]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(eo){return eo||(eo=[]),this.isPlaying===!0?(this.disconnect(),this.filters=eo,this.connect()):this.filters=eo,this},setDetune:function(eo){if(this.detune=eo,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(eo){return this.setFilters(eo?[eo]:[])},setPlaybackRate:function(eo){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=eo,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(eo){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=eo,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(eo){return this.loopStart=eo,this},setLoopEnd:function(eo){return this.loopEnd=eo,this},getVolume:function(){return this.gain.gain.value},setVolume:function(eo){return this.gain.gain.setTargetAtTime(eo,this.context.currentTime,.01),this}});var _position$3=new Vector3,_quaternion$4=new Quaternion,_scale$2=new Vector3,_orientation$1=new Vector3;function PositionalAudio(eo){Audio.call(this,eo),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(eo){return this.panner.refDistance=eo,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(eo){return this.panner.rolloffFactor=eo,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(eo){return this.panner.distanceModel=eo,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(eo){return this.panner.maxDistance=eo,this},setDirectionalCone:function(eo,to,ro){return this.panner.coneInnerAngle=eo,this.panner.coneOuterAngle=to,this.panner.coneOuterGain=ro,this},updateMatrixWorld:function(eo){if(Object3D.prototype.updateMatrixWorld.call(this,eo),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(_position$3,_quaternion$4,_scale$2),_orientation$1.set(0,0,1).applyQuaternion(_quaternion$4);var to=this.panner;if(to.positionX){var ro=this.context.currentTime+this.listener.timeDelta;to.positionX.linearRampToValueAtTime(_position$3.x,ro),to.positionY.linearRampToValueAtTime(_position$3.y,ro),to.positionZ.linearRampToValueAtTime(_position$3.z,ro),to.orientationX.linearRampToValueAtTime(_orientation$1.x,ro),to.orientationY.linearRampToValueAtTime(_orientation$1.y,ro),to.orientationZ.linearRampToValueAtTime(_orientation$1.z,ro)}else to.setPosition(_position$3.x,_position$3.y,_position$3.z),to.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z)}}});function AudioAnalyser(eo,to){this.analyser=eo.context.createAnalyser(),this.analyser.fftSize=to!==void 0?to:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),eo.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var eo=0,to=this.getFrequencyData(),ro=0;ro<to.length;ro++)eo+=to[ro];return eo/to.length}});function PropertyMixer(eo,to,ro){this.binding=eo,this.valueSize=ro;var no,io,oo;switch(to){case"quaternion":no=this._slerp,io=this._slerpAdditive,oo=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(ro*6),this._workIndex=5;break;case"string":case"bool":no=this._select,io=this._select,oo=this._setAdditiveIdentityOther,this.buffer=new Array(ro*5);break;default:no=this._lerp,io=this._lerpAdditive,oo=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(ro*5)}this._mixBufferRegion=no,this._mixBufferRegionAdditive=io,this._setIdentity=oo,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(eo,to){var ro=this.buffer,no=this.valueSize,io=eo*no+no,oo=this.cumulativeWeight;if(oo===0){for(var ao=0;ao!==no;++ao)ro[io+ao]=ro[ao];oo=to}else{oo+=to;var so=to/oo;this._mixBufferRegion(ro,io,0,so,no)}this.cumulativeWeight=oo},accumulateAdditive:function(eo){var to=this.buffer,ro=this.valueSize,no=ro*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(to,no,0,eo,ro),this.cumulativeWeightAdditive+=eo},apply:function(eo){var to=this.valueSize,ro=this.buffer,no=eo*to+to,io=this.cumulativeWeight,oo=this.cumulativeWeightAdditive,ao=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,io<1){var so=to*this._origIndex;this._mixBufferRegion(ro,no,so,1-io,to)}oo>0&&this._mixBufferRegionAdditive(ro,no,this._addIndex*to,1,to);for(var uo=to,lo=to+to;uo!==lo;++uo)if(ro[uo]!==ro[uo+to]){ao.setValue(ro,no);break}},saveOriginalState:function(){var eo=this.binding,to=this.buffer,ro=this.valueSize,no=ro*this._origIndex;eo.getValue(to,no);for(var io=ro,oo=no;io!==oo;++io)to[io]=to[no+io%ro];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var eo=this.valueSize*3;this.binding.setValue(this.buffer,eo)},_setAdditiveIdentityNumeric:function(){for(var eo=this._addIndex*this.valueSize,to=eo+this.valueSize,ro=eo;ro<to;ro++)this.buffer[ro]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){for(var eo=this._origIndex*this.valueSize,to=this._addIndex*this.valueSize,ro=0;ro<this.valueSize;ro++)this.buffer[to+ro]=this.buffer[eo+ro]},_select:function(eo,to,ro,no,io){if(no>=.5)for(var oo=0;oo!==io;++oo)eo[to+oo]=eo[ro+oo]},_slerp:function(eo,to,ro,no){Quaternion.slerpFlat(eo,to,eo,to,eo,ro,no)},_slerpAdditive:function(eo,to,ro,no,io){var oo=this._workIndex*io;Quaternion.multiplyQuaternionsFlat(eo,oo,eo,to,eo,ro),Quaternion.slerpFlat(eo,to,eo,to,eo,oo,no)},_lerp:function(eo,to,ro,no,io){for(var oo=1-no,ao=0;ao!==io;++ao){var so=to+ao;eo[so]=eo[so]*oo+eo[ro+ao]*no}},_lerpAdditive:function(eo,to,ro,no,io){for(var oo=0;oo!==io;++oo){var ao=to+oo;eo[ao]=eo[ao]+eo[ro+oo]*no}}});var _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones"];function Composite(eo,to,ro){var no=ro||PropertyBinding.parseTrackName(to);this._targetGroup=eo,this._bindings=eo.subscribe_(to,no)}Object.assign(Composite.prototype,{getValue:function(eo,to){this.bind();var ro=this._targetGroup.nCachedObjects_,no=this._bindings[ro];no!==void 0&&no.getValue(eo,to)},setValue:function(eo,to){for(var ro=this._bindings,no=this._targetGroup.nCachedObjects_,io=ro.length;no!==io;++no)ro[no].setValue(eo,to)},bind:function(){for(var eo=this._bindings,to=this._targetGroup.nCachedObjects_,ro=eo.length;to!==ro;++to)eo[to].bind()},unbind:function(){for(var eo=this._bindings,to=this._targetGroup.nCachedObjects_,ro=eo.length;to!==ro;++to)eo[to].unbind()}});function PropertyBinding(eo,to,ro){this.path=to,this.parsedPath=ro||PropertyBinding.parseTrackName(to),this.node=PropertyBinding.findNode(eo,this.parsedPath.nodeName)||eo,this.rootNode=eo}Object.assign(PropertyBinding,{Composite,create:function(eo,to,ro){return eo&&eo.isAnimationObjectGroup?new PropertyBinding.Composite(eo,to,ro):new PropertyBinding(eo,to,ro)},sanitizeNodeName:function(eo){return eo.replace(/\s/g,"_").replace(_reservedRe,"")},parseTrackName:function(eo){var to=_trackRe.exec(eo);if(!to)throw new Error("PropertyBinding: Cannot parse trackName: "+eo);var ro={nodeName:to[2],objectName:to[3],objectIndex:to[4],propertyName:to[5],propertyIndex:to[6]},no=ro.nodeName&&ro.nodeName.lastIndexOf(".");if(no!==void 0&&no!==-1){var io=ro.nodeName.substring(no+1);_supportedObjectNames.indexOf(io)!==-1&&(ro.nodeName=ro.nodeName.substring(0,no),ro.objectName=io)}if(ro.propertyName===null||ro.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+eo);return ro},findNode:function(eo,to){if(!to||to===""||to==="."||to===-1||to===eo.name||to===eo.uuid)return eo;if(eo.skeleton){var ro=eo.skeleton.getBoneByName(to);if(ro!==void 0)return ro}if(eo.children){var no=function(oo){for(var ao=0;ao<oo.length;ao++){var so=oo[ao];if(so.name===to||so.uuid===to)return so;var uo=no(so.children);if(uo)return uo}return null},io=no(eo.children);if(io)return io}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(to,ro){to[ro]=this.node[this.propertyName]},function(to,ro){for(var no=this.resolvedProperty,io=0,oo=no.length;io!==oo;++io)to[ro++]=no[io]},function(to,ro){to[ro]=this.resolvedProperty[this.propertyIndex]},function(to,ro){this.resolvedProperty.toArray(to,ro)}],SetterByBindingTypeAndVersioning:[[function(to,ro){this.targetObject[this.propertyName]=to[ro]},function(to,ro){this.targetObject[this.propertyName]=to[ro],this.targetObject.needsUpdate=!0},function(to,ro){this.targetObject[this.propertyName]=to[ro],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(to,ro){for(var no=this.resolvedProperty,io=0,oo=no.length;io!==oo;++io)no[io]=to[ro++]},function(to,ro){for(var no=this.resolvedProperty,io=0,oo=no.length;io!==oo;++io)no[io]=to[ro++];this.targetObject.needsUpdate=!0},function(to,ro){for(var no=this.resolvedProperty,io=0,oo=no.length;io!==oo;++io)no[io]=to[ro++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(to,ro){this.resolvedProperty[this.propertyIndex]=to[ro]},function(to,ro){this.resolvedProperty[this.propertyIndex]=to[ro],this.targetObject.needsUpdate=!0},function(to,ro){this.resolvedProperty[this.propertyIndex]=to[ro],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(to,ro){this.resolvedProperty.fromArray(to,ro)},function(to,ro){this.resolvedProperty.fromArray(to,ro),this.targetObject.needsUpdate=!0},function(to,ro){this.resolvedProperty.fromArray(to,ro),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(to,ro){this.bind(),this.getValue(to,ro)},setValue:function(to,ro){this.bind(),this.setValue(to,ro)},bind:function(){var eo=this.node,to=this.parsedPath,ro=to.objectName,no=to.propertyName,io=to.propertyIndex;if(eo||(eo=PropertyBinding.findNode(this.rootNode,to.nodeName)||this.rootNode,this.node=eo),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!eo){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(ro){var oo=to.objectIndex;switch(ro){case"materials":if(!eo.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!eo.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}eo=eo.material.materials;break;case"bones":if(!eo.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}eo=eo.skeleton.bones;for(var ao=0;ao<eo.length;ao++)if(eo[ao].name===oo){oo=ao;break}break;default:if(eo[ro]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}eo=eo[ro]}if(oo!==void 0){if(eo[oo]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,eo);return}eo=eo[oo]}}var so=eo[no];if(so===void 0){var uo=to.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+uo+"."+no+" but it wasn't found.",eo);return}var lo=this.Versioning.None;this.targetObject=eo,eo.needsUpdate!==void 0?lo=this.Versioning.NeedsUpdate:eo.matrixWorldNeedsUpdate!==void 0&&(lo=this.Versioning.MatrixWorldNeedsUpdate);var co=this.BindingType.Direct;if(io!==void 0){if(no==="morphTargetInfluences"){if(!eo.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(eo.geometry.isBufferGeometry){if(!eo.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}eo.morphTargetDictionary[io]!==void 0&&(io=eo.morphTargetDictionary[io])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}co=this.BindingType.ArrayElement,this.resolvedProperty=so,this.propertyIndex=io}else so.fromArray!==void 0&&so.toArray!==void 0?(co=this.BindingType.HasFromToArray,this.resolvedProperty=so):Array.isArray(so)?(co=this.BindingType.EntireArray,this.resolvedProperty=so):this.propertyName=no;this.getValue=this.GetterByBindingType[co],this.setValue=this.SetterByBindingTypeAndVersioning[co][lo]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(){this.uuid=MathUtils.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var eo={};this._indicesByUUID=eo;for(var to=0,ro=arguments.length;to!==ro;++to)eo[arguments[to].uuid]=to;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var no=this;this.stats={objects:{get total(){return no._objects.length},get inUse(){return this.total-no.nCachedObjects_}},get bindingsPerObject(){return no._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var eo=this._objects,to=eo.length,ro=this.nCachedObjects_,no=this._indicesByUUID,io=this._paths,oo=this._parsedPaths,ao=this._bindings,so=ao.length,uo=void 0,lo=0,co=arguments.length;lo!==co;++lo){var fo=arguments[lo],mo=fo.uuid,go=no[mo];if(go===void 0){go=to++,no[mo]=go,eo.push(fo);for(var yo=0,vo=so;yo!==vo;++yo)ao[yo].push(new PropertyBinding(fo,io[yo],oo[yo]))}else if(go<ro){uo=eo[go];var Ao=--ro,ho=eo[Ao];no[ho.uuid]=go,eo[go]=ho,no[mo]=Ao,eo[Ao]=fo;for(var yo=0,vo=so;yo!==vo;++yo){var po=ao[yo],Mo=po[Ao],xo=po[go];po[go]=Mo,xo===void 0&&(xo=new PropertyBinding(fo,io[yo],oo[yo])),po[Ao]=xo}}else eo[go]!==uo&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=ro},remove:function(){for(var eo=this._objects,to=this.nCachedObjects_,ro=this._indicesByUUID,no=this._bindings,io=no.length,oo=0,ao=arguments.length;oo!==ao;++oo){var so=arguments[oo],uo=so.uuid,lo=ro[uo];if(lo!==void 0&&lo>=to){var co=to++,fo=eo[co];ro[fo.uuid]=lo,eo[lo]=fo,ro[uo]=co,eo[co]=so;for(var mo=0,go=io;mo!==go;++mo){var yo=no[mo],vo=yo[co],Ao=yo[lo];yo[lo]=vo,yo[co]=Ao}}}this.nCachedObjects_=to},uncache:function(){for(var eo=this._objects,to=eo.length,ro=this.nCachedObjects_,no=this._indicesByUUID,io=this._bindings,oo=io.length,ao=0,so=arguments.length;ao!==so;++ao){var uo=arguments[ao],lo=uo.uuid,co=no[lo];if(co!==void 0)if(delete no[lo],co<ro){var fo=--ro,mo=eo[fo],go=--to,yo=eo[go];no[mo.uuid]=co,eo[co]=mo,no[yo.uuid]=fo,eo[fo]=yo,eo.pop();for(var vo=0,Ao=oo;vo!==Ao;++vo){var ho=io[vo],po=ho[fo],Mo=ho[go];ho[co]=po,ho[fo]=Mo,ho.pop()}}else{var go=--to,yo=eo[go];no[yo.uuid]=co,eo[co]=yo,eo.pop();for(var vo=0,Ao=oo;vo!==Ao;++vo){var ho=io[vo];ho[co]=ho[go],ho.pop()}}}this.nCachedObjects_=ro},subscribe_:function(eo,to){var ro=this._bindingsIndicesByPath,no=ro[eo],io=this._bindings;if(no!==void 0)return io[no];var oo=this._paths,ao=this._parsedPaths,so=this._objects,uo=so.length,lo=this.nCachedObjects_,co=new Array(uo);no=io.length,ro[eo]=no,oo.push(eo),ao.push(to),io.push(co);for(var fo=lo,mo=so.length;fo!==mo;++fo){var go=so[fo];co[fo]=new PropertyBinding(go,eo,to)}return co},unsubscribe_:function(eo){var to=this._bindingsIndicesByPath,ro=to[eo];if(ro!==void 0){var no=this._paths,io=this._parsedPaths,oo=this._bindings,ao=oo.length-1,so=oo[ao],uo=eo[ao];to[uo]=ro,oo[ro]=so,oo.pop(),io[ro]=io[ao],io.pop(),no[ro]=no[ao],no.pop()}}});function AnimationAction(eo,to,ro,no){this._mixer=eo,this._clip=to,this._localRoot=ro||null,this.blendMode=no||to.blendMode;for(var io=to.tracks,oo=io.length,ao=new Array(oo),so={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},uo=0;uo!==oo;++uo){var lo=io[uo].createInterpolant(null);ao[uo]=lo,lo.settings=so}this._interpolantSettings=so,this._interpolants=ao,this._propertyBindings=new Array(oo),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(eo){return this._startTime=eo,this},setLoop:function(eo,to){return this.loop=eo,this.repetitions=to,this},setEffectiveWeight:function(eo){return this.weight=eo,this._effectiveWeight=this.enabled?eo:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(eo){return this._scheduleFading(eo,0,1)},fadeOut:function(eo){return this._scheduleFading(eo,1,0)},crossFadeFrom:function(eo,to,ro){if(eo.fadeOut(to),this.fadeIn(to),ro){var no=this._clip.duration,io=eo._clip.duration,oo=io/no,ao=no/io;eo.warp(1,oo,to),this.warp(ao,1,to)}return this},crossFadeTo:function(eo,to,ro){return eo.crossFadeFrom(this,to,ro)},stopFading:function(){var eo=this._weightInterpolant;return eo!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(eo)),this},setEffectiveTimeScale:function(eo){return this.timeScale=eo,this._effectiveTimeScale=this.paused?0:eo,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(eo){return this.timeScale=this._clip.duration/eo,this.stopWarping()},syncWith:function(eo){return this.time=eo.time,this.timeScale=eo.timeScale,this.stopWarping()},halt:function(eo){return this.warp(this._effectiveTimeScale,0,eo)},warp:function(eo,to,ro){var no=this._mixer,io=no.time,oo=this._timeScaleInterpolant,ao=this.timeScale;oo===null&&(oo=no._lendControlInterpolant(),this._timeScaleInterpolant=oo);var so=oo.parameterPositions,uo=oo.sampleValues;return so[0]=io,so[1]=io+ro,uo[0]=eo/ao,uo[1]=to/ao,this},stopWarping:function(){var eo=this._timeScaleInterpolant;return eo!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(eo)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(eo,to,ro,no){if(!this.enabled){this._updateWeight(eo);return}var io=this._startTime;if(io!==null){var oo=(eo-io)*ro;if(oo<0||ro===0)return;this._startTime=null,to=ro*oo}to*=this._updateTimeScale(eo);var ao=this._updateTime(to),so=this._updateWeight(eo);if(so>0){var uo=this._interpolants,lo=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(var co=0,fo=uo.length;co!==fo;++co)uo[co].evaluate(ao),lo[co].accumulateAdditive(so);break;case NormalAnimationBlendMode:default:for(var co=0,fo=uo.length;co!==fo;++co)uo[co].evaluate(ao),lo[co].accumulate(no,so)}}},_updateWeight:function(eo){var to=0;if(this.enabled){to=this.weight;var ro=this._weightInterpolant;if(ro!==null){var no=ro.evaluate(eo)[0];to*=no,eo>ro.parameterPositions[1]&&(this.stopFading(),no===0&&(this.enabled=!1))}}return this._effectiveWeight=to,to},_updateTimeScale:function(eo){var to=0;if(!this.paused){to=this.timeScale;var ro=this._timeScaleInterpolant;if(ro!==null){var no=ro.evaluate(eo)[0];to*=no,eo>ro.parameterPositions[1]&&(this.stopWarping(),to===0?this.paused=!0:this.timeScale=to)}}return this._effectiveTimeScale=to,to},_updateTime:function(eo){var to=this.time+eo,ro=this._clip.duration,no=this.loop,io=this._loopCount,oo=no===LoopPingPong;if(eo===0)return io===-1?to:oo&&(io&1)===1?ro-to:to;if(no===LoopOnce){io===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(to>=ro)to=ro;else if(to<0)to=0;else{this.time=to;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=to,this._mixer.dispatchEvent({type:"finished",action:this,direction:eo<0?-1:1})}}else{if(io===-1&&(eo>=0?(io=0,this._setEndings(!0,this.repetitions===0,oo)):this._setEndings(this.repetitions===0,!0,oo)),to>=ro||to<0){var ao=Math.floor(to/ro);to-=ro*ao,io+=Math.abs(ao);var so=this.repetitions-io;if(so<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,to=eo>0?ro:0,this.time=to,this._mixer.dispatchEvent({type:"finished",action:this,direction:eo>0?1:-1});else{if(so===1){var uo=eo<0;this._setEndings(uo,!uo,oo)}else this._setEndings(!1,!1,oo);this._loopCount=io,this.time=to,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ao})}}else this.time=to;if(oo&&(io&1)===1)return ro-to}return to},_setEndings:function(eo,to,ro){var no=this._interpolantSettings;ro?(no.endingStart=ZeroSlopeEnding,no.endingEnd=ZeroSlopeEnding):(eo?no.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:no.endingStart=WrapAroundEnding,to?no.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:no.endingEnd=WrapAroundEnding)},_scheduleFading:function(eo,to,ro){var no=this._mixer,io=no.time,oo=this._weightInterpolant;oo===null&&(oo=no._lendControlInterpolant(),this._weightInterpolant=oo);var ao=oo.parameterPositions,so=oo.sampleValues;return ao[0]=io,so[0]=to,ao[1]=io+eo,so[1]=ro,this}});function AnimationMixer(eo){this._root=eo,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}AnimationMixer.prototype=Object.assign(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:function(eo,to){var ro=eo._localRoot||this._root,no=eo._clip.tracks,io=no.length,oo=eo._propertyBindings,ao=eo._interpolants,so=ro.uuid,uo=this._bindingsByRootAndName,lo=uo[so];lo===void 0&&(lo={},uo[so]=lo);for(var co=0;co!==io;++co){var fo=no[co],mo=fo.name,go=lo[mo];if(go!==void 0)oo[co]=go;else{if(go=oo[co],go!==void 0){go._cacheIndex===null&&(++go.referenceCount,this._addInactiveBinding(go,so,mo));continue}var yo=to&&to._propertyBindings[co].binding.parsedPath;go=new PropertyMixer(PropertyBinding.create(ro,mo,yo),fo.ValueTypeName,fo.getValueSize()),++go.referenceCount,this._addInactiveBinding(go,so,mo),oo[co]=go}ao[co].resultBuffer=go.buffer}},_activateAction:function(eo){if(!this._isActiveAction(eo)){if(eo._cacheIndex===null){var to=(eo._localRoot||this._root).uuid,ro=eo._clip.uuid,no=this._actionsByClip[ro];this._bindAction(eo,no&&no.knownActions[0]),this._addInactiveAction(eo,ro,to)}for(var io=eo._propertyBindings,oo=0,ao=io.length;oo!==ao;++oo){var so=io[oo];so.useCount++===0&&(this._lendBinding(so),so.saveOriginalState())}this._lendAction(eo)}},_deactivateAction:function(eo){if(this._isActiveAction(eo)){for(var to=eo._propertyBindings,ro=0,no=to.length;ro!==no;++ro){var io=to[ro];--io.useCount===0&&(io.restoreOriginalState(),this._takeBackBinding(io))}this._takeBackAction(eo)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var eo=this;this.stats={actions:{get total(){return eo._actions.length},get inUse(){return eo._nActiveActions}},bindings:{get total(){return eo._bindings.length},get inUse(){return eo._nActiveBindings}},controlInterpolants:{get total(){return eo._controlInterpolants.length},get inUse(){return eo._nActiveControlInterpolants}}}},_isActiveAction:function(eo){var to=eo._cacheIndex;return to!==null&&to<this._nActiveActions},_addInactiveAction:function(eo,to,ro){var no=this._actions,io=this._actionsByClip,oo=io[to];if(oo===void 0)oo={knownActions:[eo],actionByRoot:{}},eo._byClipCacheIndex=0,io[to]=oo;else{var ao=oo.knownActions;eo._byClipCacheIndex=ao.length,ao.push(eo)}eo._cacheIndex=no.length,no.push(eo),oo.actionByRoot[ro]=eo},_removeInactiveAction:function(eo){var to=this._actions,ro=to[to.length-1],no=eo._cacheIndex;ro._cacheIndex=no,to[no]=ro,to.pop(),eo._cacheIndex=null;var io=eo._clip.uuid,oo=this._actionsByClip,ao=oo[io],so=ao.knownActions,uo=so[so.length-1],lo=eo._byClipCacheIndex;uo._byClipCacheIndex=lo,so[lo]=uo,so.pop(),eo._byClipCacheIndex=null;var co=ao.actionByRoot,fo=(eo._localRoot||this._root).uuid;delete co[fo],so.length===0&&delete oo[io],this._removeInactiveBindingsForAction(eo)},_removeInactiveBindingsForAction:function(eo){for(var to=eo._propertyBindings,ro=0,no=to.length;ro!==no;++ro){var io=to[ro];--io.referenceCount===0&&this._removeInactiveBinding(io)}},_lendAction:function(eo){var to=this._actions,ro=eo._cacheIndex,no=this._nActiveActions++,io=to[no];eo._cacheIndex=no,to[no]=eo,io._cacheIndex=ro,to[ro]=io},_takeBackAction:function(eo){var to=this._actions,ro=eo._cacheIndex,no=--this._nActiveActions,io=to[no];eo._cacheIndex=no,to[no]=eo,io._cacheIndex=ro,to[ro]=io},_addInactiveBinding:function(eo,to,ro){var no=this._bindingsByRootAndName,io=no[to],oo=this._bindings;io===void 0&&(io={},no[to]=io),io[ro]=eo,eo._cacheIndex=oo.length,oo.push(eo)},_removeInactiveBinding:function(eo){var to=this._bindings,ro=eo.binding,no=ro.rootNode.uuid,io=ro.path,oo=this._bindingsByRootAndName,ao=oo[no],so=to[to.length-1],uo=eo._cacheIndex;so._cacheIndex=uo,to[uo]=so,to.pop(),delete ao[io],Object.keys(ao).length===0&&delete oo[no]},_lendBinding:function(eo){var to=this._bindings,ro=eo._cacheIndex,no=this._nActiveBindings++,io=to[no];eo._cacheIndex=no,to[no]=eo,io._cacheIndex=ro,to[ro]=io},_takeBackBinding:function(eo){var to=this._bindings,ro=eo._cacheIndex,no=--this._nActiveBindings,io=to[no];eo._cacheIndex=no,to[no]=eo,io._cacheIndex=ro,to[ro]=io},_lendControlInterpolant:function(){var eo=this._controlInterpolants,to=this._nActiveControlInterpolants++,ro=eo[to];return ro===void 0&&(ro=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),ro.__cacheIndex=to,eo[to]=ro),ro},_takeBackControlInterpolant:function(eo){var to=this._controlInterpolants,ro=eo.__cacheIndex,no=--this._nActiveControlInterpolants,io=to[no];eo.__cacheIndex=no,to[no]=eo,io.__cacheIndex=ro,to[ro]=io},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(eo,to,ro){var no=to||this._root,io=no.uuid,oo=typeof eo=="string"?AnimationClip.findByName(no,eo):eo,ao=oo!==null?oo.uuid:eo,so=this._actionsByClip[ao],uo=null;if(ro===void 0&&(oo!==null?ro=oo.blendMode:ro=NormalAnimationBlendMode),so!==void 0){var lo=so.actionByRoot[io];if(lo!==void 0&&lo.blendMode===ro)return lo;uo=so.knownActions[0],oo===null&&(oo=uo._clip)}if(oo===null)return null;var co=new AnimationAction(this,oo,to,ro);return this._bindAction(co,uo),this._addInactiveAction(co,ao,io),co},existingAction:function(eo,to){var ro=to||this._root,no=ro.uuid,io=typeof eo=="string"?AnimationClip.findByName(ro,eo):eo,oo=io?io.uuid:eo,ao=this._actionsByClip[oo];return ao!==void 0&&ao.actionByRoot[no]||null},stopAllAction:function(){for(var eo=this._actions,to=this._nActiveActions,ro=to-1;ro>=0;--ro)eo[ro].stop();return this},update:function(eo){eo*=this.timeScale;for(var to=this._actions,ro=this._nActiveActions,no=this.time+=eo,io=Math.sign(eo),oo=this._accuIndex^=1,ao=0;ao!==ro;++ao){var so=to[ao];so._update(no,eo,io,oo)}for(var uo=this._bindings,lo=this._nActiveBindings,ao=0;ao!==lo;++ao)uo[ao].apply(oo);return this},setTime:function(eo){this.time=0;for(var to=0;to<this._actions.length;to++)this._actions[to].time=0;return this.update(eo)},getRoot:function(){return this._root},uncacheClip:function(eo){var to=this._actions,ro=eo.uuid,no=this._actionsByClip,io=no[ro];if(io!==void 0){for(var oo=io.knownActions,ao=0,so=oo.length;ao!==so;++ao){var uo=oo[ao];this._deactivateAction(uo);var lo=uo._cacheIndex,co=to[to.length-1];uo._cacheIndex=null,uo._byClipCacheIndex=null,co._cacheIndex=lo,to[lo]=co,to.pop(),this._removeInactiveBindingsForAction(uo)}delete no[ro]}},uncacheRoot:function(eo){var to=eo.uuid,ro=this._actionsByClip;for(var no in ro){var io=ro[no].actionByRoot,oo=io[to];oo!==void 0&&(this._deactivateAction(oo),this._removeInactiveAction(oo))}var ao=this._bindingsByRootAndName,so=ao[to];if(so!==void 0)for(var uo in so){var lo=so[uo];lo.restoreOriginalState(),this._removeInactiveBinding(lo)}},uncacheAction:function(eo,to){var ro=this.existingAction(eo,to);ro!==null&&(this._deactivateAction(ro),this._removeInactiveAction(ro))}});function Uniform(eo){typeof eo=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),eo=arguments[1]),this.value=eo}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedInterleavedBuffer(eo,to,ro){InterleavedBuffer.call(this,eo,to),this.meshPerAttribute=ro||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(eo){return InterleavedBuffer.prototype.copy.call(this,eo),this.meshPerAttribute=eo.meshPerAttribute,this}});function Raycaster(eo,to,ro,no){this.ray=new Ray(eo,to),this.near=ro||0,this.far=no||1/0,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(eo,to){return eo.distance-to.distance}function intersectObject(eo,to,ro,no){if(eo.layers.test(to.layers)&&eo.raycast(to,ro),no===!0)for(var io=eo.children,oo=0,ao=io.length;oo<ao;oo++)intersectObject(io[oo],to,ro,!0)}Object.assign(Raycaster.prototype,{set:function(eo,to){this.ray.set(eo,to)},setFromCamera:function(eo,to){to&&to.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(to.matrixWorld),this.ray.direction.set(eo.x,eo.y,.5).unproject(to).sub(this.ray.origin).normalize(),this.camera=to):to&&to.isOrthographicCamera?(this.ray.origin.set(eo.x,eo.y,(to.near+to.far)/(to.near-to.far)).unproject(to),this.ray.direction.set(0,0,-1).transformDirection(to.matrixWorld),this.camera=to):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(eo,to,ro){var no=ro||[];return intersectObject(eo,this,no,to),no.sort(ascSort),no},intersectObjects:function(eo,to,ro){var no=ro||[];if(Array.isArray(eo)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),no;for(var io=0,oo=eo.length;io<oo;io++)intersectObject(eo[io],this,no,to);return no.sort(ascSort),no}});function Spherical(eo,to,ro){return this.radius=eo!==void 0?eo:1,this.phi=to!==void 0?to:0,this.theta=ro!==void 0?ro:0,this}Object.assign(Spherical.prototype,{set:function(eo,to,ro){return this.radius=eo,this.phi=to,this.theta=ro,this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.radius=eo.radius,this.phi=eo.phi,this.theta=eo.theta,this},makeSafe:function(){var eo=1e-6;return this.phi=Math.max(eo,Math.min(Math.PI-eo,this.phi)),this},setFromVector3:function(eo){return this.setFromCartesianCoords(eo.x,eo.y,eo.z)},setFromCartesianCoords:function(eo,to,ro){return this.radius=Math.sqrt(eo*eo+to*to+ro*ro),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(eo,ro),this.phi=Math.acos(MathUtils.clamp(to/this.radius,-1,1))),this}});function Cylindrical(eo,to,ro){return this.radius=eo!==void 0?eo:1,this.theta=to!==void 0?to:0,this.y=ro!==void 0?ro:0,this}Object.assign(Cylindrical.prototype,{set:function(eo,to,ro){return this.radius=eo,this.theta=to,this.y=ro,this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.radius=eo.radius,this.theta=eo.theta,this.y=eo.y,this},setFromVector3:function(eo){return this.setFromCartesianCoords(eo.x,eo.y,eo.z)},setFromCartesianCoords:function(eo,to,ro){return this.radius=Math.sqrt(eo*eo+ro*ro),this.theta=Math.atan2(eo,ro),this.y=to,this}});var _vector$7=new Vector2;function Box2(eo,to){this.min=eo!==void 0?eo:new Vector2(1/0,1/0),this.max=to!==void 0?to:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(eo,to){return this.min.copy(eo),this.max.copy(to),this},setFromPoints:function(eo){this.makeEmpty();for(var to=0,ro=eo.length;to<ro;to++)this.expandByPoint(eo[to]);return this},setFromCenterAndSize:function(eo,to){var ro=_vector$7.copy(to).multiplyScalar(.5);return this.min.copy(eo).sub(ro),this.max.copy(eo).add(ro),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.min.copy(eo.min),this.max.copy(eo.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(eo){return eo===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),eo=new Vector2),this.isEmpty()?eo.set(0,0):eo.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(eo){return eo===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),eo=new Vector2),this.isEmpty()?eo.set(0,0):eo.subVectors(this.max,this.min)},expandByPoint:function(eo){return this.min.min(eo),this.max.max(eo),this},expandByVector:function(eo){return this.min.sub(eo),this.max.add(eo),this},expandByScalar:function(eo){return this.min.addScalar(-eo),this.max.addScalar(eo),this},containsPoint:function(eo){return!(eo.x<this.min.x||eo.x>this.max.x||eo.y<this.min.y||eo.y>this.max.y)},containsBox:function(eo){return this.min.x<=eo.min.x&&eo.max.x<=this.max.x&&this.min.y<=eo.min.y&&eo.max.y<=this.max.y},getParameter:function(eo,to){return to===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),to=new Vector2),to.set((eo.x-this.min.x)/(this.max.x-this.min.x),(eo.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(eo){return!(eo.max.x<this.min.x||eo.min.x>this.max.x||eo.max.y<this.min.y||eo.min.y>this.max.y)},clampPoint:function(eo,to){return to===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),to=new Vector2),to.copy(eo).clamp(this.min,this.max)},distanceToPoint:function(eo){var to=_vector$7.copy(eo).clamp(this.min,this.max);return to.sub(eo).length()},intersect:function(eo){return this.min.max(eo.min),this.max.min(eo.max),this},union:function(eo){return this.min.min(eo.min),this.max.max(eo.max),this},translate:function(eo){return this.min.add(eo),this.max.add(eo),this},equals:function(eo){return eo.min.equals(this.min)&&eo.max.equals(this.max)}});var _startP=new Vector3,_startEnd=new Vector3;function Line3(eo,to){this.start=eo!==void 0?eo:new Vector3,this.end=to!==void 0?to:new Vector3}Object.assign(Line3.prototype,{set:function(eo,to){return this.start.copy(eo),this.end.copy(to),this},clone:function(){return new this.constructor().copy(this)},copy:function(eo){return this.start.copy(eo.start),this.end.copy(eo.end),this},getCenter:function(eo){return eo===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),eo=new Vector3),eo.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(eo){return eo===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),eo=new Vector3),eo.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(eo,to){return to===void 0&&(console.warn("THREE.Line3: .at() target is now required"),to=new Vector3),this.delta(to).multiplyScalar(eo).add(this.start)},closestPointToPointParameter:function(eo,to){_startP.subVectors(eo,this.start),_startEnd.subVectors(this.end,this.start);var ro=_startEnd.dot(_startEnd),no=_startEnd.dot(_startP),io=no/ro;return to&&(io=MathUtils.clamp(io,0,1)),io},closestPointToPoint:function(eo,to,ro){var no=this.closestPointToPointParameter(eo,to);return ro===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),ro=new Vector3),this.delta(ro).multiplyScalar(no).add(this.start)},applyMatrix4:function(eo){return this.start.applyMatrix4(eo),this.end.applyMatrix4(eo),this},equals:function(eo){return eo.start.equals(this.start)&&eo.end.equals(this.end)}});function ImmediateRenderObject(eo){Object3D.call(this),this.material=eo,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;var _vector$8=new Vector3;function SpotLightHelper(eo,to){Object3D.call(this),this.light=eo,this.light.updateMatrixWorld(),this.matrix=eo.matrixWorld,this.matrixAutoUpdate=!1,this.color=to;for(var ro=new BufferGeometry,no=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],io=0,oo=1,ao=32;io<ao;io++,oo++){var so=io/ao*Math.PI*2,uo=oo/ao*Math.PI*2;no.push(Math.cos(so),Math.sin(so),1,Math.cos(uo),Math.sin(uo),1)}ro.setAttribute("position",new Float32BufferAttribute(no,3));var lo=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(ro,lo),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){this.light.updateMatrixWorld();var eo=this.light.distance?this.light.distance:1e3,to=eo*Math.tan(this.light.angle);this.cone.scale.set(to,to,eo),_vector$8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var _vector$9=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;function getBoneList(eo){var to=[];eo&&eo.isBone&&to.push(eo);for(var ro=0;ro<eo.children.length;ro++)to.push.apply(to,getBoneList(eo.children[ro]));return to}function SkeletonHelper(eo){for(var to=getBoneList(eo),ro=new BufferGeometry,no=[],io=[],oo=new Color(0,0,1),ao=new Color(0,1,0),so=0;so<to.length;so++){var uo=to[so];uo.parent&&uo.parent.isBone&&(no.push(0,0,0),no.push(0,0,0),io.push(oo.r,oo.g,oo.b),io.push(ao.r,ao.g,ao.b))}ro.setAttribute("position",new Float32BufferAttribute(no,3)),ro.setAttribute("color",new Float32BufferAttribute(io,3));var lo=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});LineSegments.call(this,ro,lo),this.type="SkeletonHelper",this.root=eo,this.bones=to,this.matrix=eo.matrixWorld,this.matrixAutoUpdate=!1}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.isSkeletonHelper=!0;SkeletonHelper.prototype.updateMatrixWorld=function(eo){var to=this.bones,ro=this.geometry,no=ro.getAttribute("position");_matrixWorldInv.getInverse(this.root.matrixWorld);for(var io=0,oo=0;io<to.length;io++){var ao=to[io];ao.parent&&ao.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,ao.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),no.setXYZ(oo,_vector$9.x,_vector$9.y,_vector$9.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,ao.parent.matrixWorld),_vector$9.setFromMatrixPosition(_boneMatrix),no.setXYZ(oo+1,_vector$9.x,_vector$9.y,_vector$9.z),oo+=2)}ro.getAttribute("position").needsUpdate=!0,Object3D.prototype.updateMatrixWorld.call(this,eo)};function PointLightHelper(eo,to,ro){this.light=eo,this.light.updateMatrixWorld(),this.color=ro;var no=new SphereBufferGeometry(to,4,2),io=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});Mesh.call(this,no,io),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var _vector$a=new Vector3,_color1=new Color,_color2=new Color;function HemisphereLightHelper(eo,to,ro){Object3D.call(this),this.light=eo,this.light.updateMatrixWorld(),this.matrix=eo.matrixWorld,this.matrixAutoUpdate=!1,this.color=ro;var no=new OctahedronBufferGeometry(to);no.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);var io=no.getAttribute("position"),oo=new Float32Array(io.count*3);no.setAttribute("color",new BufferAttribute(oo,3)),this.add(new Mesh(no,this.material)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var eo=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var to=eo.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(var ro=0,no=to.count;ro<no;ro++){var io=ro<no/2?_color1:_color2;to.setXYZ(ro,io.r,io.g,io.b)}to.needsUpdate=!0}eo.lookAt(_vector$a.setFromMatrixPosition(this.light.matrixWorld).negate())};function GridHelper(eo,to,ro,no){eo=eo||10,to=to||10,ro=new Color(ro!==void 0?ro:4473924),no=new Color(no!==void 0?no:8947848);for(var io=to/2,oo=eo/to,ao=eo/2,so=[],uo=[],lo=0,co=0,fo=-ao;lo<=to;lo++,fo+=oo){so.push(-ao,0,fo,ao,0,fo),so.push(fo,0,-ao,fo,0,ao);var mo=lo===io?ro:no;mo.toArray(uo,co),co+=3,mo.toArray(uo,co),co+=3,mo.toArray(uo,co),co+=3,mo.toArray(uo,co),co+=3}var go=new BufferGeometry;go.setAttribute("position",new Float32BufferAttribute(so,3)),go.setAttribute("color",new Float32BufferAttribute(uo,3));var yo=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,go,yo),this.type="GridHelper"}GridHelper.prototype=Object.assign(Object.create(LineSegments.prototype),{constructor:GridHelper,copy:function(eo){return LineSegments.prototype.copy.call(this,eo),this.geometry.copy(eo.geometry),this.material.copy(eo.material),this},clone:function(){return new this.constructor().copy(this)}});function PolarGridHelper(eo,to,ro,no,io,oo){eo=eo||10,to=to||16,ro=ro||8,no=no||64,io=new Color(io!==void 0?io:4473924),oo=new Color(oo!==void 0?oo:8947848);var ao=[],so=[],uo,lo,co,fo,mo,go,yo;for(fo=0;fo<=to;fo++)co=fo/to*(Math.PI*2),uo=Math.sin(co)*eo,lo=Math.cos(co)*eo,ao.push(0,0,0),ao.push(uo,0,lo),yo=fo&1?io:oo,so.push(yo.r,yo.g,yo.b),so.push(yo.r,yo.g,yo.b);for(fo=0;fo<=ro;fo++)for(yo=fo&1?io:oo,go=eo-eo/ro*fo,mo=0;mo<no;mo++)co=mo/no*(Math.PI*2),uo=Math.sin(co)*go,lo=Math.cos(co)*go,ao.push(uo,0,lo),so.push(yo.r,yo.g,yo.b),co=(mo+1)/no*(Math.PI*2),uo=Math.sin(co)*go,lo=Math.cos(co)*go,ao.push(uo,0,lo),so.push(yo.r,yo.g,yo.b);var vo=new BufferGeometry;vo.setAttribute("position",new Float32BufferAttribute(ao,3)),vo.setAttribute("color",new Float32BufferAttribute(so,3));var Ao=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,vo,Ao),this.type="PolarGridHelper"}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;var _v1$5=new Vector3,_v2$3=new Vector3,_v3$1=new Vector3;function DirectionalLightHelper(eo,to,ro){Object3D.call(this),this.light=eo,this.light.updateMatrixWorld(),this.matrix=eo.matrixWorld,this.matrixAutoUpdate=!1,this.color=ro,to===void 0&&(to=1);var no=new BufferGeometry;no.setAttribute("position",new Float32BufferAttribute([-to,to,0,to,to,0,to,-to,0,-to,-to,0,-to,to,0],3));var io=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$1(no,io),this.add(this.lightPlane),no=new BufferGeometry,no.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$1(no,io),this.add(this.targetLine),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};DirectionalLightHelper.prototype.update=function(){_v1$5.setFromMatrixPosition(this.light.matrixWorld),_v2$3.setFromMatrixPosition(this.light.target.matrixWorld),_v3$1.subVectors(_v2$3,_v1$5),this.lightPlane.lookAt(_v2$3),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$3),this.targetLine.scale.z=_v3$1.length()};var _vector$b=new Vector3,_camera=new Camera;function CameraHelper(eo){var to=new BufferGeometry,ro=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),no=[],io=[],oo={},ao=new Color(16755200),so=new Color(16711680),uo=new Color(43775),lo=new Color(16777215),co=new Color(3355443);fo("n1","n2",ao),fo("n2","n4",ao),fo("n4","n3",ao),fo("n3","n1",ao),fo("f1","f2",ao),fo("f2","f4",ao),fo("f4","f3",ao),fo("f3","f1",ao),fo("n1","f1",ao),fo("n2","f2",ao),fo("n3","f3",ao),fo("n4","f4",ao),fo("p","n1",so),fo("p","n2",so),fo("p","n3",so),fo("p","n4",so),fo("u1","u2",uo),fo("u2","u3",uo),fo("u3","u1",uo),fo("c","t",lo),fo("p","c",co),fo("cn1","cn2",co),fo("cn3","cn4",co),fo("cf1","cf2",co),fo("cf3","cf4",co);function fo(go,yo,vo){mo(go,vo),mo(yo,vo)}function mo(go,yo){no.push(0,0,0),io.push(yo.r,yo.g,yo.b),oo[go]===void 0&&(oo[go]=[]),oo[go].push(no.length/3-1)}to.setAttribute("position",new Float32BufferAttribute(no,3)),to.setAttribute("color",new Float32BufferAttribute(io,3)),LineSegments.call(this,to,ro),this.type="CameraHelper",this.camera=eo,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=eo.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=oo,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var eo=this.geometry,to=this.pointMap,ro=1,no=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",to,eo,_camera,0,0,-1),setPoint("t",to,eo,_camera,0,0,1),setPoint("n1",to,eo,_camera,-ro,-no,-1),setPoint("n2",to,eo,_camera,ro,-no,-1),setPoint("n3",to,eo,_camera,-ro,no,-1),setPoint("n4",to,eo,_camera,ro,no,-1),setPoint("f1",to,eo,_camera,-ro,-no,1),setPoint("f2",to,eo,_camera,ro,-no,1),setPoint("f3",to,eo,_camera,-ro,no,1),setPoint("f4",to,eo,_camera,ro,no,1),setPoint("u1",to,eo,_camera,ro*.7,no*1.1,-1),setPoint("u2",to,eo,_camera,-ro*.7,no*1.1,-1),setPoint("u3",to,eo,_camera,0,no*2,-1),setPoint("cf1",to,eo,_camera,-ro,0,1),setPoint("cf2",to,eo,_camera,ro,0,1),setPoint("cf3",to,eo,_camera,0,-no,1),setPoint("cf4",to,eo,_camera,0,no,1),setPoint("cn1",to,eo,_camera,-ro,0,-1),setPoint("cn2",to,eo,_camera,ro,0,-1),setPoint("cn3",to,eo,_camera,0,-no,-1),setPoint("cn4",to,eo,_camera,0,no,-1),eo.getAttribute("position").needsUpdate=!0};function setPoint(eo,to,ro,no,io,oo,ao){_vector$b.set(io,oo,ao).unproject(no);var so=to[eo];if(so!==void 0)for(var uo=ro.getAttribute("position"),lo=0,co=so.length;lo<co;lo++)uo.setXYZ(so[lo],_vector$b.x,_vector$b.y,_vector$b.z)}var _box$3=new Box3;function BoxHelper(eo,to){this.object=eo,to===void 0&&(to=16776960);var ro=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),no=new Float32Array(8*3),io=new BufferGeometry;io.setIndex(new BufferAttribute(ro,1)),io.setAttribute("position",new BufferAttribute(no,3)),LineSegments.call(this,io,new LineBasicMaterial({color:to,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(eo){if(eo!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box$3.setFromObject(this.object),!_box$3.isEmpty()){var to=_box$3.min,ro=_box$3.max,no=this.geometry.attributes.position,io=no.array;io[0]=ro.x,io[1]=ro.y,io[2]=ro.z,io[3]=to.x,io[4]=ro.y,io[5]=ro.z,io[6]=to.x,io[7]=to.y,io[8]=ro.z,io[9]=ro.x,io[10]=to.y,io[11]=ro.z,io[12]=ro.x,io[13]=ro.y,io[14]=to.z,io[15]=to.x,io[16]=ro.y,io[17]=to.z,io[18]=to.x,io[19]=to.y,io[20]=to.z,io[21]=ro.x,io[22]=to.y,io[23]=to.z,no.needsUpdate=!0,this.geometry.computeBoundingSphere()}};BoxHelper.prototype.setFromObject=function(eo){return this.object=eo,this.update(),this};BoxHelper.prototype.copy=function(eo){return LineSegments.prototype.copy.call(this,eo),this.object=eo.object,this};BoxHelper.prototype.clone=function(){return new this.constructor().copy(this)};function Box3Helper(eo,to){this.type="Box3Helper",this.box=eo,to=to||16776960;var ro=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),no=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],io=new BufferGeometry;io.setIndex(new BufferAttribute(ro,1)),io.setAttribute("position",new Float32BufferAttribute(no,3)),LineSegments.call(this,io,new LineBasicMaterial({color:to,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}Box3Helper.prototype=Object.create(LineSegments.prototype);Box3Helper.prototype.constructor=Box3Helper;Box3Helper.prototype.updateMatrixWorld=function(eo){var to=this.box;to.isEmpty()||(to.getCenter(this.position),to.getSize(this.scale),this.scale.multiplyScalar(.5),Object3D.prototype.updateMatrixWorld.call(this,eo))};function PlaneHelper(eo,to,ro){this.plane=eo,this.size=to===void 0?1:to;var no=ro!==void 0?ro:16776960,io=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],oo=new BufferGeometry;oo.setAttribute("position",new Float32BufferAttribute(io,3)),oo.computeBoundingSphere(),Line$1.call(this,oo,new LineBasicMaterial({color:no,toneMapped:!1})),this.type="PlaneHelper";var ao=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],so=new BufferGeometry;so.setAttribute("position",new Float32BufferAttribute(ao,3)),so.computeBoundingSphere(),this.add(new Mesh(so,new MeshBasicMaterial({color:no,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}PlaneHelper.prototype=Object.create(Line$1.prototype);PlaneHelper.prototype.constructor=PlaneHelper;PlaneHelper.prototype.updateMatrixWorld=function(eo){var to=-this.plane.constant;Math.abs(to)<1e-8&&(to=1e-8),this.scale.set(.5*this.size,.5*this.size,to),this.children[0].material.side=to<0?BackSide:FrontSide,this.lookAt(this.plane.normal),Object3D.prototype.updateMatrixWorld.call(this,eo)};var _axis=new Vector3,_lineGeometry,_coneGeometry;function ArrowHelper(eo,to,ro,no,io,oo){Object3D.call(this),this.type="ArrowHelper",eo===void 0&&(eo=new Vector3(0,0,1)),to===void 0&&(to=new Vector3(0,0,0)),ro===void 0&&(ro=1),no===void 0&&(no=16776960),io===void 0&&(io=.2*ro),oo===void 0&&(oo=.2*io),_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(to),this.line=new Line$1(_lineGeometry,new LineBasicMaterial({color:no,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:no,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(eo),this.setLength(ro,io,oo)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(eo){if(eo.y>.99999)this.quaternion.set(0,0,0,1);else if(eo.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(eo.z,0,-eo.x).normalize();var to=Math.acos(eo.y);this.quaternion.setFromAxisAngle(_axis,to)}};ArrowHelper.prototype.setLength=function(eo,to,ro){to===void 0&&(to=.2*eo),ro===void 0&&(ro=.2*to),this.line.scale.set(1,Math.max(1e-4,eo-to),1),this.line.updateMatrix(),this.cone.scale.set(ro,to,ro),this.cone.position.y=eo,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(eo){this.line.material.color.set(eo),this.cone.material.color.set(eo)};ArrowHelper.prototype.copy=function(eo){return Object3D.prototype.copy.call(this,eo,!1),this.line.copy(eo.line),this.cone.copy(eo.cone),this};ArrowHelper.prototype.clone=function(){return new this.constructor().copy(this)};function AxesHelper(eo){eo=eo||1;var to=[0,0,0,eo,0,0,0,0,0,0,eo,0,0,0,0,0,0,eo],ro=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],no=new BufferGeometry;no.setAttribute("position",new Float32BufferAttribute(to,3)),no.setAttribute("color",new Float32BufferAttribute(ro,3));var io=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});LineSegments.call(this,no,io),this.type="AxesHelper"}AxesHelper.prototype=Object.create(LineSegments.prototype);AxesHelper.prototype.constructor=AxesHelper;var LOD_MIN=4,LOD_MAX=8,SIZE_MAX=Math.pow(2,LOD_MAX),EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],TOTAL_LODS=LOD_MAX-LOD_MIN+1+EXTRA_LOD_SIGMA.length,MAX_SAMPLES=20,ENCODINGS={[LinearEncoding]:0,[sRGBEncoding]:1,[RGBEEncoding]:2,[RGBM7Encoding]:3,[RGBM16Encoding]:4,[RGBDEncoding]:5,[GammaEncoding]:6},_flatCamera=new OrthographicCamera,{_lodPlanes,_sizeLods,_sigmas}=_createPlanes(),_oldTarget=null,PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];function PMREMGenerator(eo){this._renderer=eo,this._pingPongRenderTarget=null,this._blurMaterial=_getBlurShader(MAX_SAMPLES),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}PMREMGenerator.prototype={constructor:PMREMGenerator,fromScene:function(eo,to=0,ro=.1,no=100){_oldTarget=this._renderer.getRenderTarget();var io=this._allocateTargets();return this._sceneToCubeUV(eo,ro,no,io),to>0&&this._blur(io,0,0,to),this._applyPMREM(io),this._cleanup(io),io},fromEquirectangular:function(eo){return eo.magFilter=NearestFilter,eo.minFilter=NearestFilter,eo.generateMipmaps=!1,this.fromCubemap(eo)},fromCubemap:function(eo){_oldTarget=this._renderer.getRenderTarget();var to=this._allocateTargets(eo);return this._textureToCubeUV(eo,to),this._applyPMREM(to),this._cleanup(to),to},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var eo=0;eo<_lodPlanes.length;eo++)_lodPlanes[eo].dispose()},_cleanup:function(eo){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_oldTarget),eo.scissorTest=!1,eo.setSize(eo.width,eo.height)},_allocateTargets:function(eo){var to={magFilter:NearestFilter,minFilter:NearestFilter,generateMipmaps:!1,type:UnsignedByteType,format:RGBEFormat,encoding:_isLDR(eo)?eo.encoding:RGBEEncoding,depthBuffer:!1,stencilBuffer:!1},ro=_createRenderTarget(to);return ro.depthBuffer=!eo,this._pingPongRenderTarget=_createRenderTarget(to),ro},_compileMaterial:function(eo){var to=new Mesh(_lodPlanes[0],eo);this._renderer.compile(to,_flatCamera)},_sceneToCubeUV:function(eo,to,ro,no){var io=90,oo=1,ao=new PerspectiveCamera(io,oo,to,ro),so=[1,-1,1,1,1,1],uo=[1,1,1,-1,-1,-1],lo=this._renderer,co=lo.outputEncoding,fo=lo.toneMapping,mo=lo.toneMappingExposure,go=lo.getClearColor(),yo=lo.getClearAlpha();lo.toneMapping=LinearToneMapping,lo.toneMappingExposure=1,lo.outputEncoding=LinearEncoding;var vo=eo.background;if(vo&&vo.isColor){vo.convertSRGBToLinear();var Ao=Math.max(vo.r,vo.g,vo.b),ho=Math.min(Math.max(Math.ceil(Math.log2(Ao)),-128),127);vo=vo.multiplyScalar(Math.pow(2,-ho));var po=(ho+128)/255;lo.setClearColor(vo,po),eo.background=null}for(var Mo=0;Mo<6;Mo++){var xo=Mo%3;xo==0?(ao.up.set(0,so[Mo],0),ao.lookAt(uo[Mo],0,0)):xo==1?(ao.up.set(0,0,so[Mo]),ao.lookAt(0,uo[Mo],0)):(ao.up.set(0,so[Mo],0),ao.lookAt(0,0,uo[Mo])),_setViewport(no,xo*SIZE_MAX,Mo>2?SIZE_MAX:0,SIZE_MAX,SIZE_MAX),lo.setRenderTarget(no),lo.render(eo,ao)}lo.toneMapping=fo,lo.toneMappingExposure=mo,lo.outputEncoding=co,lo.setClearColor(go,yo)},_textureToCubeUV:function(eo,to){var ro=this._renderer;eo.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=_getCubemapShader()):this._equirectShader==null&&(this._equirectShader=_getEquirectShader());var no=eo.isCubeTexture?this._cubemapShader:this._equirectShader,io=new Mesh(_lodPlanes[0],no),oo=no.uniforms;oo.envMap.value=eo,eo.isCubeTexture||oo.texelSize.value.set(1/eo.image.width,1/eo.image.height),oo.inputEncoding.value=ENCODINGS[eo.encoding],oo.outputEncoding.value=ENCODINGS[to.texture.encoding],_setViewport(to,0,0,3*SIZE_MAX,2*SIZE_MAX),ro.setRenderTarget(to),ro.render(io,_flatCamera)},_applyPMREM:function(eo){var to=this._renderer,ro=to.autoClear;to.autoClear=!1;for(var no=1;no<TOTAL_LODS;no++){var io=Math.sqrt(_sigmas[no]*_sigmas[no]-_sigmas[no-1]*_sigmas[no-1]),oo=_axisDirections[(no-1)%_axisDirections.length];this._blur(eo,no-1,no,io,oo)}to.autoClear=ro},_blur:function(eo,to,ro,no,io){var oo=this._pingPongRenderTarget;this._halfBlur(eo,oo,to,ro,no,"latitudinal",io),this._halfBlur(oo,eo,ro,ro,no,"longitudinal",io)},_halfBlur:function(eo,to,ro,no,io,oo,ao){var so=this._renderer,uo=this._blurMaterial;oo!=="latitudinal"&&oo!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var lo=3,co=new Mesh(_lodPlanes[no],uo),fo=uo.uniforms,mo=_sizeLods[ro]-1,go=isFinite(io)?Math.PI/(2*mo):2*Math.PI/(2*MAX_SAMPLES-1),yo=io/go,vo=isFinite(io)?1+Math.floor(lo*yo):MAX_SAMPLES;vo>MAX_SAMPLES&&console.warn(`sigmaRadians, ${io}, is too large and will clip, as it requested ${vo} samples when the maximum is set to ${MAX_SAMPLES}`);for(var Ao=[],ho=0,po=0;po<MAX_SAMPLES;++po){var wo=po/yo,Mo=Math.exp(-wo*wo/2);Ao.push(Mo),po==0?ho+=Mo:po<vo&&(ho+=2*Mo)}for(var po=0;po<Ao.length;po++)Ao[po]=Ao[po]/ho;fo.envMap.value=eo.texture,fo.samples.value=vo,fo.weights.value=Ao,fo.latitudinal.value=oo==="latitudinal",ao&&(fo.poleAxis.value=ao),fo.dTheta.value=go,fo.mipInt.value=LOD_MAX-ro,fo.inputEncoding.value=ENCODINGS[eo.texture.encoding],fo.outputEncoding.value=ENCODINGS[eo.texture.encoding];var xo=_sizeLods[no],wo=3*Math.max(0,SIZE_MAX-2*xo),bo=(no===0?0:2*SIZE_MAX)+2*xo*(no>LOD_MAX-LOD_MIN?no-LOD_MAX+LOD_MIN:0);_setViewport(to,wo,bo,3*xo,2*xo),so.setRenderTarget(to),so.render(co,_flatCamera)}};function _isLDR(eo){return eo===void 0||eo.type!==UnsignedByteType?!1:eo.encoding===LinearEncoding||eo.encoding===sRGBEncoding||eo.encoding===GammaEncoding}function _createPlanes(){for(var eo=[],to=[],ro=[],no=LOD_MAX,io=0;io<TOTAL_LODS;io++){var oo=Math.pow(2,no);to.push(oo);var ao=1/oo;io>LOD_MAX-LOD_MIN?ao=EXTRA_LOD_SIGMA[io-LOD_MAX+LOD_MIN-1]:io==0&&(ao=0),ro.push(ao);for(var so=1/(oo-1),uo=-so/2,lo=1+so/2,co=[uo,uo,lo,uo,lo,lo,uo,uo,lo,lo,uo,lo],fo=6,mo=6,go=3,yo=2,vo=1,Ao=new Float32Array(go*mo*fo),ho=new Float32Array(yo*mo*fo),po=new Float32Array(vo*mo*fo),Mo=0;Mo<fo;Mo++){var xo=Mo%3*2/3-1,wo=Mo>2?0:-1,bo=[xo,wo,0,xo+2/3,wo,0,xo+2/3,wo+1,0,xo,wo,0,xo+2/3,wo+1,0,xo,wo+1,0];Ao.set(bo,go*mo*Mo),ho.set(co,yo*mo*Mo);var _o=[Mo,Mo,Mo,Mo,Mo,Mo];po.set(_o,vo*mo*Mo)}var To=new BufferGeometry;To.setAttribute("position",new BufferAttribute(Ao,go)),To.setAttribute("uv",new BufferAttribute(ho,yo)),To.setAttribute("faceIndex",new BufferAttribute(po,vo)),eo.push(To),no>LOD_MIN&&no--}return{_lodPlanes:eo,_sizeLods:to,_sigmas:ro}}function _createRenderTarget(eo){var to=new WebGLRenderTarget(3*SIZE_MAX,3*SIZE_MAX,eo);return to.texture.mapping=CubeUVReflectionMapping,to.texture.name="PMREM.cubeUv",to.scissorTest=!0,to}function _setViewport(eo,to,ro,no,io){eo.viewport.set(to,ro,no,io),eo.scissor.set(to,ro,no,io)}function _getBlurShader(eo){var to=new Float32Array(eo),ro=new Vector3(0,1,0),no=new RawShaderMaterial({defines:{n:eo},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:to},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:ro},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${_getEncodings()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return no.type="SphericalGaussianBlur",no}function _getEquirectShader(){var eo=new Vector2(1,1),to=new RawShaderMaterial({uniforms:{envMap:{value:null},texelSize:{value:eo},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${_getEncodings()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return to.type="EquirectangularToCubeUV",to}function _getCubemapShader(){var eo=new RawShaderMaterial({uniforms:{envMap:{value:null},inputEncoding:{value:ENCODINGS[LinearEncoding]},outputEncoding:{value:ENCODINGS[LinearEncoding]}},vertexShader:_getCommonVertexShader(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${_getEncodings()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1});return eo.type="CubemapToCubeUV",eo}function _getCommonVertexShader(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function _getEncodings(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}function Face4(eo,to,ro,no,io,oo,ao){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Face3(eo,to,ro,io,oo,ao)}var LineStrip=0,LinePieces=1,NoColors=0,FaceColors=1,VertexColors=2;function MeshFaceMaterial(eo){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),eo}function MultiMaterial(eo){return eo===void 0&&(eo=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),eo.isMultiMaterial=!0,eo.materials=eo,eo.clone=function(){return eo.slice()},eo}function PointCloud(eo,to){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(eo,to)}function Particle(eo){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(eo)}function ParticleSystem(eo,to){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(eo,to)}function PointCloudMaterial(eo){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(eo)}function ParticleBasicMaterial(eo){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(eo)}function ParticleSystemMaterial(eo){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(eo)}function Vertex(eo,to,ro){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(eo,to,ro)}function DynamicBufferAttribute(eo,to){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(eo,to).setUsage(DynamicDrawUsage)}function Int8Attribute(eo,to){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(eo,to)}function Uint8Attribute(eo,to){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(eo,to)}function Uint8ClampedAttribute(eo,to){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(eo,to)}function Int16Attribute(eo,to){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(eo,to)}function Uint16Attribute(eo,to){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(eo,to)}function Int32Attribute(eo,to){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(eo,to)}function Uint32Attribute(eo,to){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(eo,to)}function Float32Attribute(eo,to){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(eo,to)}function Float64Attribute(eo,to){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(eo,to)}Curve.create=function(eo,to){return console.log("THREE.Curve.create() has been deprecated"),eo.prototype=Object.create(Curve.prototype),eo.prototype.constructor=eo,eo.prototype.getPoint=to,eo};Object.assign(CurvePath.prototype,{createPointsGeometry:function(eo){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var to=this.getPoints(eo);return this.createGeometry(to)},createSpacedPointsGeometry:function(eo){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var to=this.getSpacedPoints(eo);return this.createGeometry(to)},createGeometry:function(eo){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var to=new Geometry,ro=0,no=eo.length;ro<no;ro++){var io=eo[ro];to.vertices.push(new Vector3(io.x,io.y,io.z||0))}return to}});Object.assign(Path.prototype,{fromPoints:function(eo){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(eo)}});function ClosedSplineCurve3(eo){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,eo),this.type="catmullrom",this.closed=!0}ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function SplineCurve3(eo){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,eo),this.type="catmullrom"}SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype);function Spline(eo){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,eo),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function AxisHelper(eo){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(eo)}function BoundingBoxHelper(eo,to){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(eo,to)}function EdgesHelper(eo,to){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(eo.geometry),new LineBasicMaterial({color:to!==void 0?to:16777215}))}GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function WireframeHelper(eo,to){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(eo.geometry),new LineBasicMaterial({color:to!==void 0?to:16777215}))}Object.assign(Loader.prototype,{extractUrlBase:function(eo){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(eo)}});Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function XHRLoader(eo){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(eo)}function BinaryTextureLoader(eo){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(eo)}Object.assign(ObjectLoader.prototype,{setTexturePath:function(eo){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(eo)}});Object.assign(Box2.prototype,{center:function(eo){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(eo)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(eo){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(eo)},size:function(eo){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(eo)}});Object.assign(Box3.prototype,{center:function(eo){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(eo)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(eo){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(eo)},isIntersectionSphere:function(eo){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(eo)},size:function(eo){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(eo)}});Object.assign(Sphere.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Frustum.prototype.setFromMatrix=function(eo){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(eo)};Line3.prototype.center=function(eo){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(eo)};Object.assign(MathUtils,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(eo){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),MathUtils.floorPowerOfTwo(eo)},nextPowerOfTwo:function(eo){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),MathUtils.ceilPowerOfTwo(eo)}});Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(eo,to){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(eo,to)},multiplyVector3:function(eo){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),eo.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(eo){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),eo.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(eo){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(eo)},flattenToArrayOffset:function(eo,to){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(eo,to)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Vector3().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(eo){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(eo)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(eo){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),eo.applyMatrix4(this)},multiplyVector4:function(eo){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),eo.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(eo){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),eo.transformDirection(this)},crossVector:function(eo){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),eo.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(eo){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),eo.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(eo,to,ro,no,io,oo){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(eo,to,no,ro,io,oo)}});Plane.prototype.isIntersectionLine=function(eo){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(eo)};Quaternion.prototype.multiplyVector3=function(eo){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),eo.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(eo){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(eo)},isIntersectionPlane:function(eo){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(eo)},isIntersectionSphere:function(eo){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(eo)}});Object.assign(Triangle.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(eo,to){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(eo,to)},midpoint:function(eo){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(eo)},normal:function(eo){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(eo)},plane:function(eo){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(eo)}});Object.assign(Triangle,{barycoordFromPoint:function(eo,to,ro,no,io){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(eo,to,ro,no,io)},normal:function(eo,to,ro,no){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(eo,to,ro,no)}});Object.assign(Shape.prototype,{extractAllPoints:function(eo){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(eo)},extrude:function(eo){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,eo)},makeGeometry:function(eo){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,eo)}});Object.assign(Vector2.prototype,{fromAttribute:function(eo,to,ro){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(eo,to,ro)},distanceToManhattan:function(eo){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(eo)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(eo){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(eo)},getScaleFromMatrix:function(eo){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(eo)},getColumnFromMatrix:function(eo,to){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(to,eo)},applyProjection:function(eo){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(eo)},fromAttribute:function(eo,to,ro){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(eo,to,ro)},distanceToManhattan:function(eo){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(eo)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vector4.prototype,{fromAttribute:function(eo,to,ro){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(eo,to,ro)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(eo){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(eo)}});Object.assign(Object3D.prototype,{getChildByName:function(eo){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(eo)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(eo,to){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(to,eo)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(eo){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(eo)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(eo){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=eo}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mesh.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),TrianglesDrawMode},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(eo){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=eo}});PerspectiveCamera.prototype.setLens=function(eo,to){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),to!==void 0&&(this.filmGauge=to),this.setFocalLength(eo)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(eo){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=eo}},shadowCameraLeft:{set:function(eo){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=eo}},shadowCameraRight:{set:function(eo){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=eo}},shadowCameraTop:{set:function(eo){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=eo}},shadowCameraBottom:{set:function(eo){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=eo}},shadowCameraNear:{set:function(eo){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=eo}},shadowCameraFar:{set:function(eo){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=eo}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(eo){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=eo}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(eo){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=eo}},shadowMapHeight:{set:function(eo){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=eo}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(DynamicDrawUsage)}}});Object.assign(BufferAttribute.prototype,{setDynamic:function(eo){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(eo===!0?DynamicDrawUsage:StaticDrawUsage),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(BufferGeometry.prototype,{addIndex:function(eo){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(eo)},addAttribute:function(eo,to){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(to&&to.isBufferAttribute)&&!(to&&to.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(eo,new BufferAttribute(arguments[1],arguments[2]))):eo==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(to),this):this.setAttribute(eo,to)},addDrawCall:function(eo,to,ro){ro!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(eo,to)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(eo){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(eo)},applyMatrix:function(eo){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(eo)}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(eo){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=eo}}});Object.defineProperties(Raycaster.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(eo){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=eo}}});Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===DynamicDrawUsage},set:function(eo){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(eo)}}});Object.assign(InterleavedBuffer.prototype,{setDynamic:function(eo){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(eo===!0?DynamicDrawUsage:StaticDrawUsage),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ExtrudeBufferGeometry.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(eo){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=eo===FlatShading}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(eo){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=eo}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(eo){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=eo}}});Object.assign(WebGLRenderer.prototype,{clearTarget:function(eo,to,ro,no){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(eo),this.clear(to,ro,no)},animate:function(eo){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(eo)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(eo){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(eo)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(eo){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=eo}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(eo){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=eo}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(eo){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=eo===!0?sRGBEncoding:LinearEncoding}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function WebGLRenderTargetCube(eo,to,ro){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(eo,ro)}Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(eo){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=eo}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(eo){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=eo}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(eo){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=eo}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(eo){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=eo}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(eo){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=eo}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(eo){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=eo}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(eo){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=eo}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(eo){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=eo}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(eo){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=eo}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(eo){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=eo}}});Object.defineProperties(Audio.prototype,{load:{value:function(eo){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var to=this,ro=new AudioLoader;return ro.load(eo,function(no){to.setBuffer(no)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};CubeCamera.prototype.updateCubeMap=function(eo,to){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(eo,to)};var GeometryUtils={merge:function(eo,to,ro){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var no;to.isMesh&&(to.matrixAutoUpdate&&to.updateMatrix(),no=to.matrix,to=to.geometry),eo.merge(to,no,ro)},center:function(eo){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),eo.center()}};ImageUtils.crossOrigin=void 0;ImageUtils.loadTexture=function(eo,to,ro,no){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var io=new TextureLoader;io.setCrossOrigin(this.crossOrigin);var oo=io.load(eo,ro,void 0,no);return to&&(oo.mapping=to),oo};ImageUtils.loadTextureCube=function(eo,to,ro,no){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var io=new CubeTextureLoader;io.setCrossOrigin(this.crossOrigin);var oo=io.load(eo,ro,void 0,no);return to&&(oo.mapping=to),oo};ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}var SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));var three_module=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,AxisHelper,BackSide,BasicDepthPacking,BasicShadowMap,BinaryTextureLoader,Bone,BooleanKeyframeTrack,BoundingBoxHelper,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasRenderer,CanvasTexture,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,ClosedSplineCurve3,Color,ColorKeyframeTrack,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeGeometry:BoxGeometry,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubeUVRefractionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CylinderBufferGeometry,CylinderGeometry,Cylindrical,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DirectionalLightShadow,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicBufferAttribute,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EdgesHelper,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,Face3,Face4,FaceColors,FileLoader,FlatShading,Float32Attribute,Float32BufferAttribute,Float64Attribute,Float64BufferAttribute,FloatType,Fog,FogExp2,Font,FontLoader,FrontFaceDirectionCCW,FrontFaceDirectionCW,FrontSide,Frustum,GammaEncoding,Geometry,GeometryUtils,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16Attribute,Int16BufferAttribute,Int32Attribute,Int32BufferAttribute,Int8Attribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,JSONLoader,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LensFlare,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,LightShadow,Line:Line$1,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LinePieces,LineSegments,LineStrip,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LogLuvEncoding,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,Math:MathUtils,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshFaceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiMaterial,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColors,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,ParametricBufferGeometry,ParametricGeometry,Particle,ParticleBasicMaterial,ParticleSystem,ParticleSystemMaterial,Path,PerspectiveCamera,Plane,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointCloud,PointCloudMaterial,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDEncoding,RGBEEncoding,RGBEFormat,RGBFormat,RGBIntegerFormat,RGBM16Encoding,RGBM7Encoding,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGB8_ALPHA8_ASTC_10x10_Format,SRGB8_ALPHA8_ASTC_10x5_Format,SRGB8_ALPHA8_ASTC_10x6_Format,SRGB8_ALPHA8_ASTC_10x8_Format,SRGB8_ALPHA8_ASTC_12x10_Format,SRGB8_ALPHA8_ASTC_12x12_Format,SRGB8_ALPHA8_ASTC_4x4_Format,SRGB8_ALPHA8_ASTC_5x4_Format,SRGB8_ALPHA8_ASTC_5x5_Format,SRGB8_ALPHA8_ASTC_6x5_Format,SRGB8_ALPHA8_ASTC_6x6_Format,SRGB8_ALPHA8_ASTC_8x5_Format,SRGB8_ALPHA8_ASTC_8x6_Format,SRGB8_ALPHA8_ASTC_8x8_Format,Scene,SceneUtils,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,SmoothShading,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SphericalReflectionMapping,Spline,SplineCurve,SplineCurve3,SpotLight,SpotLightHelper,SpotLightShadow,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,TextBufferGeometry,TextGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,UVMapping,Uint16Attribute,Uint16BufferAttribute,Uint32Attribute,Uint32BufferAttribute,Uint8Attribute,Uint8BufferAttribute,Uint8ClampedAttribute,Uint8ClampedBufferAttribute,Uncharted2ToneMapping,Uniform,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShort565Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,Vertex,VertexColors,VideoTexture,WebGLCubeRenderTarget,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderTargetCube,WebGLRenderer,WebGLUtils,WireframeGeometry,WireframeHelper,WrapAroundEnding,XHRLoader,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,sRGBEncoding}),CSS3DObject=function(eo){Object3D.call(this),this.element=eo,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(to){to.element instanceof Element&&to.element.parentNode!==null&&to.element.parentNode.removeChild(to.element)})})};CSS3DObject.prototype=Object.create(Object3D.prototype);CSS3DObject.prototype.constructor=CSS3DObject;var CSS3DSprite=function(eo){CSS3DObject.call(this,eo)};CSS3DSprite.prototype=Object.create(CSS3DObject.prototype);CSS3DSprite.prototype.constructor=CSS3DSprite;var CSS3DRenderer=function(){var eo=this,to,ro,no,io,oo=new Matrix4,ao={camera:{fov:0,style:""},objects:new WeakMap},so=document.createElement("div");so.style.overflow="hidden",this.domElement=so;var uo=document.createElement("div");uo.style.WebkitTransformStyle="preserve-3d",uo.style.transformStyle="preserve-3d",uo.style.pointerEvents="none",so.appendChild(uo);var lo=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:to,height:ro}},this.setSize=function(ho,po){to=ho,ro=po,no=to/2,io=ro/2,so.style.width=ho+"px",so.style.height=po+"px",uo.style.width=ho+"px",uo.style.height=po+"px"};function co(ho){return Math.abs(ho)<1e-10?0:ho}function fo(ho){var po=ho.elements;return"matrix3d("+co(po[0])+","+co(-po[1])+","+co(po[2])+","+co(po[3])+","+co(po[4])+","+co(-po[5])+","+co(po[6])+","+co(po[7])+","+co(po[8])+","+co(-po[9])+","+co(po[10])+","+co(po[11])+","+co(po[12])+","+co(-po[13])+","+co(po[14])+","+co(po[15])+")"}function mo(ho,po){var Mo=ho.elements,xo="matrix3d("+co(Mo[0])+","+co(Mo[1])+","+co(Mo[2])+","+co(Mo[3])+","+co(-Mo[4])+","+co(-Mo[5])+","+co(-Mo[6])+","+co(-Mo[7])+","+co(Mo[8])+","+co(Mo[9])+","+co(Mo[10])+","+co(Mo[11])+","+co(Mo[12])+","+co(Mo[13])+","+co(Mo[14])+","+co(Mo[15])+")";return lo?"translate(-50%,-50%)translate("+no+"px,"+io+"px)"+po+xo:"translate(-50%,-50%)"+xo}function go(ho,po,Mo,xo){if(ho instanceof CSS3DObject){ho.onBeforeRender(eo,po,Mo);var wo;ho instanceof CSS3DSprite?(oo.copy(Mo.matrixWorldInverse),oo.transpose(),oo.copyPosition(ho.matrixWorld),oo.scale(ho.scale),oo.elements[3]=0,oo.elements[7]=0,oo.elements[11]=0,oo.elements[15]=1,wo=mo(oo,xo)):wo=mo(ho.matrixWorld,xo);var bo=ho.element,_o=ao.objects.get(ho);if(_o===void 0||_o.style!==wo){bo.style.WebkitTransform=wo,bo.style.transform=wo;var To={style:wo};lo&&(To.distanceToCameraSquared=yo(Mo,ho)),ao.objects.set(ho,To)}bo.style.display=ho.visible?"":"none",bo.parentNode!==uo&&uo.appendChild(bo),ho.onAfterRender(eo,po,Mo)}for(var No=0,Po=ho.children.length;No<Po;No++)go(ho.children[No],po,Mo,xo)}var yo=function(){var ho=new Vector3,po=new Vector3;return function(Mo,xo){return ho.setFromMatrixPosition(Mo.matrixWorld),po.setFromMatrixPosition(xo.matrixWorld),ho.distanceToSquared(po)}}();function vo(ho){var po=[];return ho.traverse(function(Mo){Mo instanceof CSS3DObject&&po.push(Mo)}),po}function Ao(ho){for(var po=vo(ho).sort(function(bo,_o){var To=ao.objects.get(bo).distanceToCameraSquared,No=ao.objects.get(_o).distanceToCameraSquared;return To-No}),Mo=po.length,xo=0,wo=po.length;xo<wo;xo++)po[xo].element.style.zIndex=Mo-xo}this.render=function(ho,po){var Mo=po.projectionMatrix.elements[5]*io;if(ao.camera.fov!==Mo&&(po.isPerspectiveCamera?(so.style.WebkitPerspective=Mo+"px",so.style.perspective=Mo+"px"):(so.style.WebkitPerspective="",so.style.perspective=""),ao.camera.fov=Mo),ho.autoUpdate===!0&&ho.updateMatrixWorld(),po.parent===null&&po.updateMatrixWorld(),po.isOrthographicCamera)var xo=-(po.right+po.left)/2,wo=(po.top+po.bottom)/2;var bo=po.isOrthographicCamera?"scale("+Mo+")translate("+co(xo)+"px,"+co(wo)+"px)"+fo(po.matrixWorldInverse):"translateZ("+Mo+"px)"+fo(po.matrixWorldInverse),_o=bo+"translate("+no+"px,"+io+"px)";ao.camera.style!==_o&&!lo&&(uo.style.WebkitTransform=_o,uo.style.transform=_o,ao.camera.style=_o),go(ho,ho,po,bo),lo&&Ao(ho)}},line$1={},tslib={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(eo){var to,ro,no,io,oo,ao,so,uo,lo,co,fo,mo,go,yo,vo,Ao,ho,po,Mo,xo,wo,bo,_o,To;(function(No){var Po=typeof commonjsGlobal=="object"?commonjsGlobal:typeof self=="object"?self:typeof this=="object"?this:{};No(Co(Po,Co(eo.exports)));function Co(Do,zo){return Do!==Po&&(typeof Object.create=="function"?Object.defineProperty(Do,"__esModule",{value:!0}):Do.__esModule=!0),function(Ro,Lo){return Do[Ro]=zo?zo(Ro,Lo):Lo}}})(function(No){var Po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Do,zo){Do.__proto__=zo}||function(Do,zo){for(var Ro in zo)Object.prototype.hasOwnProperty.call(zo,Ro)&&(Do[Ro]=zo[Ro])};to=function(Do,zo){if(typeof zo!="function"&&zo!==null)throw new TypeError("Class extends value "+String(zo)+" is not a constructor or null");Po(Do,zo);function Ro(){this.constructor=Do}Do.prototype=zo===null?Object.create(zo):(Ro.prototype=zo.prototype,new Ro)},ro=Object.assign||function(Do){for(var zo,Ro=1,Lo=arguments.length;Ro<Lo;Ro++){zo=arguments[Ro];for(var $o in zo)Object.prototype.hasOwnProperty.call(zo,$o)&&(Do[$o]=zo[$o])}return Do},no=function(Do,zo){var Ro={};for(var Lo in Do)Object.prototype.hasOwnProperty.call(Do,Lo)&&zo.indexOf(Lo)<0&&(Ro[Lo]=Do[Lo]);if(Do!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $o=0,Lo=Object.getOwnPropertySymbols(Do);$o<Lo.length;$o++)zo.indexOf(Lo[$o])<0&&Object.prototype.propertyIsEnumerable.call(Do,Lo[$o])&&(Ro[Lo[$o]]=Do[Lo[$o]]);return Ro},io=function(Do,zo,Ro,Lo){var $o=arguments.length,jo=$o<3?zo:Lo===null?Lo=Object.getOwnPropertyDescriptor(zo,Ro):Lo,Wo;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")jo=Reflect.decorate(Do,zo,Ro,Lo);else for(var Ko=Do.length-1;Ko>=0;Ko--)(Wo=Do[Ko])&&(jo=($o<3?Wo(jo):$o>3?Wo(zo,Ro,jo):Wo(zo,Ro))||jo);return $o>3&&jo&&Object.defineProperty(zo,Ro,jo),jo},oo=function(Do,zo){return function(Ro,Lo){zo(Ro,Lo,Do)}},ao=function(Do,zo){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Do,zo)},so=function(Do,zo,Ro,Lo){function $o(jo){return jo instanceof Ro?jo:new Ro(function(Wo){Wo(jo)})}return new(Ro||(Ro=Promise))(function(jo,Wo){function Ko(Xo){try{Go(Lo.next(Xo))}catch(va){Wo(va)}}function Jo(Xo){try{Go(Lo.throw(Xo))}catch(va){Wo(va)}}function Go(Xo){Xo.done?jo(Xo.value):$o(Xo.value).then(Ko,Jo)}Go((Lo=Lo.apply(Do,zo||[])).next())})},uo=function(Do,zo){var Ro={label:0,sent:function(){if(jo[0]&1)throw jo[1];return jo[1]},trys:[],ops:[]},Lo,$o,jo,Wo;return Wo={next:Ko(0),throw:Ko(1),return:Ko(2)},typeof Symbol=="function"&&(Wo[Symbol.iterator]=function(){return this}),Wo;function Ko(Go){return function(Xo){return Jo([Go,Xo])}}function Jo(Go){if(Lo)throw new TypeError("Generator is already executing.");for(;Ro;)try{if(Lo=1,$o&&(jo=Go[0]&2?$o.return:Go[0]?$o.throw||((jo=$o.return)&&jo.call($o),0):$o.next)&&!(jo=jo.call($o,Go[1])).done)return jo;switch($o=0,jo&&(Go=[Go[0]&2,jo.value]),Go[0]){case 0:case 1:jo=Go;break;case 4:return Ro.label++,{value:Go[1],done:!1};case 5:Ro.label++,$o=Go[1],Go=[0];continue;case 7:Go=Ro.ops.pop(),Ro.trys.pop();continue;default:if(jo=Ro.trys,!(jo=jo.length>0&&jo[jo.length-1])&&(Go[0]===6||Go[0]===2)){Ro=0;continue}if(Go[0]===3&&(!jo||Go[1]>jo[0]&&Go[1]<jo[3])){Ro.label=Go[1];break}if(Go[0]===6&&Ro.label<jo[1]){Ro.label=jo[1],jo=Go;break}if(jo&&Ro.label<jo[2]){Ro.label=jo[2],Ro.ops.push(Go);break}jo[2]&&Ro.ops.pop(),Ro.trys.pop();continue}Go=zo.call(Do,Ro)}catch(Xo){Go=[6,Xo],$o=0}finally{Lo=jo=0}if(Go[0]&5)throw Go[1];return{value:Go[0]?Go[1]:void 0,done:!0}}},lo=function(Do,zo){for(var Ro in Do)Ro!=="default"&&!Object.prototype.hasOwnProperty.call(zo,Ro)&&To(zo,Do,Ro)},To=Object.create?function(Do,zo,Ro,Lo){Lo===void 0&&(Lo=Ro),Object.defineProperty(Do,Lo,{enumerable:!0,get:function(){return zo[Ro]}})}:function(Do,zo,Ro,Lo){Lo===void 0&&(Lo=Ro),Do[Lo]=zo[Ro]},co=function(Do){var zo=typeof Symbol=="function"&&Symbol.iterator,Ro=zo&&Do[zo],Lo=0;if(Ro)return Ro.call(Do);if(Do&&typeof Do.length=="number")return{next:function(){return Do&&Lo>=Do.length&&(Do=void 0),{value:Do&&Do[Lo++],done:!Do}}};throw new TypeError(zo?"Object is not iterable.":"Symbol.iterator is not defined.")},fo=function(Do,zo){var Ro=typeof Symbol=="function"&&Do[Symbol.iterator];if(!Ro)return Do;var Lo=Ro.call(Do),$o,jo=[],Wo;try{for(;(zo===void 0||zo-- >0)&&!($o=Lo.next()).done;)jo.push($o.value)}catch(Ko){Wo={error:Ko}}finally{try{$o&&!$o.done&&(Ro=Lo.return)&&Ro.call(Lo)}finally{if(Wo)throw Wo.error}}return jo},mo=function(){for(var Do=[],zo=0;zo<arguments.length;zo++)Do=Do.concat(fo(arguments[zo]));return Do},go=function(){for(var Do=0,zo=0,Ro=arguments.length;zo<Ro;zo++)Do+=arguments[zo].length;for(var Lo=Array(Do),$o=0,zo=0;zo<Ro;zo++)for(var jo=arguments[zo],Wo=0,Ko=jo.length;Wo<Ko;Wo++,$o++)Lo[$o]=jo[Wo];return Lo},yo=function(Do,zo,Ro){if(Ro||arguments.length===2)for(var Lo=0,$o=zo.length,jo;Lo<$o;Lo++)(jo||!(Lo in zo))&&(jo||(jo=Array.prototype.slice.call(zo,0,Lo)),jo[Lo]=zo[Lo]);return Do.concat(jo||Array.prototype.slice.call(zo))},vo=function(Do){return this instanceof vo?(this.v=Do,this):new vo(Do)},Ao=function(Do,zo,Ro){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lo=Ro.apply(Do,zo||[]),$o,jo=[];return $o={},Wo("next"),Wo("throw"),Wo("return"),$o[Symbol.asyncIterator]=function(){return this},$o;function Wo(tu){Lo[tu]&&($o[tu]=function(Zs){return new Promise(function(ga,qs){jo.push([tu,Zs,ga,qs])>1||Ko(tu,Zs)})})}function Ko(tu,Zs){try{Jo(Lo[tu](Zs))}catch(ga){va(jo[0][3],ga)}}function Jo(tu){tu.value instanceof vo?Promise.resolve(tu.value.v).then(Go,Xo):va(jo[0][2],tu)}function Go(tu){Ko("next",tu)}function Xo(tu){Ko("throw",tu)}function va(tu,Zs){tu(Zs),jo.shift(),jo.length&&Ko(jo[0][0],jo[0][1])}},ho=function(Do){var zo,Ro;return zo={},Lo("next"),Lo("throw",function($o){throw $o}),Lo("return"),zo[Symbol.iterator]=function(){return this},zo;function Lo($o,jo){zo[$o]=Do[$o]?function(Wo){return(Ro=!Ro)?{value:vo(Do[$o](Wo)),done:$o==="return"}:jo?jo(Wo):Wo}:jo}},po=function(Do){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var zo=Do[Symbol.asyncIterator],Ro;return zo?zo.call(Do):(Do=typeof co=="function"?co(Do):Do[Symbol.iterator](),Ro={},Lo("next"),Lo("throw"),Lo("return"),Ro[Symbol.asyncIterator]=function(){return this},Ro);function Lo(jo){Ro[jo]=Do[jo]&&function(Wo){return new Promise(function(Ko,Jo){Wo=Do[jo](Wo),$o(Ko,Jo,Wo.done,Wo.value)})}}function $o(jo,Wo,Ko,Jo){Promise.resolve(Jo).then(function(Go){jo({value:Go,done:Ko})},Wo)}},Mo=function(Do,zo){return Object.defineProperty?Object.defineProperty(Do,"raw",{value:zo}):Do.raw=zo,Do};var Co=Object.create?function(Do,zo){Object.defineProperty(Do,"default",{enumerable:!0,value:zo})}:function(Do,zo){Do.default=zo};xo=function(Do){if(Do&&Do.__esModule)return Do;var zo={};if(Do!=null)for(var Ro in Do)Ro!=="default"&&Object.prototype.hasOwnProperty.call(Do,Ro)&&To(zo,Do,Ro);return Co(zo,Do),zo},wo=function(Do){return Do&&Do.__esModule?Do:{default:Do}},bo=function(Do,zo,Ro,Lo){if(Ro==="a"&&!Lo)throw new TypeError("Private accessor was defined without a getter");if(typeof zo=="function"?Do!==zo||!Lo:!zo.has(Do))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Ro==="m"?Lo:Ro==="a"?Lo.call(Do):Lo?Lo.value:zo.get(Do)},_o=function(Do,zo,Ro,Lo,$o){if(Lo==="m")throw new TypeError("Private method is not writable");if(Lo==="a"&&!$o)throw new TypeError("Private accessor was defined without a setter");if(typeof zo=="function"?Do!==zo||!$o:!zo.has(Do))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Lo==="a"?$o.call(Do,Ro):$o?$o.value=Ro:zo.set(Do,Ro),Ro},No("__extends",to),No("__assign",ro),No("__rest",no),No("__decorate",io),No("__param",oo),No("__metadata",ao),No("__awaiter",so),No("__generator",uo),No("__exportStar",lo),No("__createBinding",To),No("__values",co),No("__read",fo),No("__spread",mo),No("__spreadArrays",go),No("__spreadArray",yo),No("__await",vo),No("__asyncGenerator",Ao),No("__asyncDelegator",ho),No("__asyncValues",po),No("__makeTemplateObject",Mo),No("__importStar",xo),No("__importDefault",wo),No("__classPrivateFieldGet",bo),No("__classPrivateFieldSet",_o)})})(tslib);var require$$2$1=getAugmentedNamespace(three_module),Line;Object.defineProperty(line$1,"__esModule",{value:!0});var t$3=tslib.exports;function e$4(eo){if(eo&&eo.__esModule)return eo;var to=Object.create(null);return eo&&Object.keys(eo).forEach(function(ro){if(ro!=="default"){var no=Object.getOwnPropertyDescriptor(eo,ro);Object.defineProperty(to,ro,no.get?no:{enumerable:!0,get:function(){return eo[ro]}})}}),to.default=eo,Object.freeze(to)}var n$5=e$4(require$$2$1),i$2=function(eo){function to(){var ro=eo.call(this)||this;return ro.type="LineSegmentsGeometry",ro.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),ro.setAttribute("position",new n$5.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),ro.setAttribute("uv",new n$5.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),ro}return t$3.__extends(to,eo),to.prototype.applyMatrix4=function(ro){var no=this.attributes.instanceStart,io=this.attributes.instanceEnd;return no!==void 0&&(no.applyMatrix4(ro),io.applyMatrix4(ro),no.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},to.prototype.setPositions=function(ro){var no;no=ro instanceof Float32Array?ro:Array.isArray(ro)?new Float32Array(ro):new Float32Array;var io=new n$5.InstancedInterleavedBuffer(no,6,1);return this.setAttribute("instanceStart",new n$5.InterleavedBufferAttribute(io,3,0)),this.setAttribute("instanceEnd",new n$5.InterleavedBufferAttribute(io,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},to.prototype.setColors=function(ro){var no;no=ro instanceof Float32Array?ro:Array.isArray(ro)?new Float32Array(ro):new Float32Array;var io=new n$5.InstancedInterleavedBuffer(no,6,1);return this.setAttribute("instanceColorStart",new n$5.InterleavedBufferAttribute(io,3,0)),this.setAttribute("instanceColorEnd",new n$5.InterleavedBufferAttribute(io,3,3)),this},to.prototype.fromWireframeGeometry=function(ro){return this.setPositions(ro.attributes.position.array),this},to.prototype.fromEdgesGeometry=function(ro){return this.setPositions(ro.attributes.position.array),this},to.prototype.fromMesh=function(ro){return this.fromWireframeGeometry(new n$5.WireframeGeometry(ro.geometry)),this},to.prototype.fromLineSegments=function(ro){var no=ro.geometry;if(no instanceof n$5.Geometry){var io=new n$5.BufferGeometry().fromGeometry(no);this.setPositions(io.attributes.position.array)}else no instanceof n$5.BufferGeometry&&this.setPositions(no.attributes.position.array);return this},to.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new n$5.Box3);var ro=this.attributes.instanceStart,no=this.attributes.instanceEnd;if(ro!==void 0&&no!==void 0){var io=new n$5.Box3;this.boundingBox.setFromBufferAttribute(ro),io.setFromBufferAttribute(no),this.boundingBox.union(io)}},to.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new n$5.Sphere),this.boundingBox===null&&this.computeBoundingBox();var ro=this.attributes.instanceStart,no=this.attributes.instanceEnd;if(ro!==void 0&&no!==void 0){var io=this.boundingSphere.center;this.boundingBox.getCenter(io);for(var oo=0,ao=new n$5.Vector3,so=0,uo=ro.count;so<uo;so++)ao.fromBufferAttribute(ro,so),oo=Math.max(oo,io.distanceToSquared(ao)),ao.fromBufferAttribute(no,so),oo=Math.max(oo,io.distanceToSquared(ao));this.boundingSphere.radius=Math.sqrt(oo),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}},to.prototype.toJSON=function(){},to}(n$5.InstancedBufferGeometry);Object.assign(i$2.prototype,{isLineSegmentsGeometry:!0});var r$4={uniforms:n$5.UniformsUtils.merge([n$5.UniformsLib.common,n$5.UniformsLib.fog,{linewidth:{value:1},resolution:{value:new n$5.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}}]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		varying vec2 vUv;

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;

			#endif

			float aspect = resolution.x / resolution.y;

			vUv = uv;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec2 ndcStart = clipStart.xy / clipStart.w;
			vec2 ndcEnd = clipEnd.xy / clipEnd.w;

			// direction
			vec2 dir = ndcEnd - ndcStart;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			// perpendicular to dir
			vec2 offset = vec2( dir.y, - dir.x );

			// undo aspect ratio adjustment
			dir.x /= aspect;
			offset.x /= aspect;

			// sign flip
			if ( position.x < 0.0 ) offset *= - 1.0;

			// endcaps
			if ( position.y < 0.0 ) {

				offset += - dir;

			} else if ( position.y > 1.0 ) {

				offset += dir;

			}

			// adjust for linewidth
			offset *= linewidth;

			// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
			offset /= resolution.y;

			// select end
			vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

			// back to clip space
			offset *= clip.w;

			clip.xy += offset;

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;

		#ifdef USE_DASH

			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		varying vec2 vUv;

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			if ( abs( vUv.y ) > 1.0 ) {

				float a = vUv.x;
				float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
				float len2 = a * a + b * b;

				if ( len2 > 1.0 ) discard;

			}

			vec4 diffuseColor = vec4( diffuse, opacity );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );

			#include <tonemapping_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`},o$2=function(eo){function to(ro){var no=eo.call(this,{uniforms:n$5.UniformsUtils.clone(r$4.uniforms),vertexShader:r$4.vertexShader,fragmentShader:r$4.fragmentShader,clipping:!0})||this;return no.type="LineMaterial",no.dashed=!1,Object.defineProperties(no,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(io){this.uniforms.diffuse.value=io}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(io){this.uniforms.linewidth.value=io}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(io){this.uniforms.dashScale.value=io}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(io){this.uniforms.dashSize.value=io}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(io){this.uniforms.gapSize.value=io}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(io){this.uniforms.opacity.value=io}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(io){this.uniforms.resolution.value.copy(io)}}}),no.setValues(ro),no}return t$3.__extends(to,eo),to}(n$5.ShaderMaterial);Object.assign(o$2.prototype,{isLineMaterial:!0});var a$2=function(eo){function to(ro,no){var io=eo.call(this)||this;return io.type="LineSegments2",io.geometry=ro!==void 0?ro:new i$2,io.material=no!==void 0?no:new o$2({color:16777215*Math.random()}),io}return t$3.__extends(to,eo),to.prototype.computeLineDistances=function(){for(var ro=this.geometry,no=ro.attributes.instanceStart,io=ro.attributes.instanceEnd,oo=new Float32Array(2*no.count),ao=new n$5.Vector3,so=new n$5.Vector3,uo=0,lo=0,co=no.count;uo<co;uo++,lo+=2)ao.fromBufferAttribute(no,uo),so.fromBufferAttribute(io,uo),oo[lo]=lo===0?0:oo[lo-1],oo[lo+1]=oo[lo]+ao.distanceTo(so);var fo=new n$5.InstancedInterleavedBuffer(oo,2,1);return ro.setAttribute("instanceDistanceStart",new n$5.InterleavedBufferAttribute(fo,1,0)),ro.setAttribute("instanceDistanceEnd",new n$5.InterleavedBufferAttribute(fo,1,1)),this},to.prototype.raycast=function(ro,no){ro.camera===null&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var io=ro.ray,oo=ro.camera,ao=oo.projectionMatrix,so=this.geometry,uo=this.material,lo=uo.resolution,co=uo.linewidth,fo=so.attributes.instanceStart,mo=so.attributes.instanceEnd,go=new n$5.Vector4,yo=new n$5.Vector4,vo=new n$5.Vector4,Ao=new n$5.Vector3,ho=new n$5.Matrix4,po=new n$5.Line3,Mo=new n$5.Vector3;io.at(1,vo),vo.w=1,vo.applyMatrix4(oo.matrixWorldInverse),vo.applyMatrix4(ao),vo.multiplyScalar(1/vo.w),vo.x*=lo.x/2,vo.y*=lo.y/2,vo.z=0,Ao.copy(vo);var xo=this.matrixWorld;ho.multiplyMatrices(oo.matrixWorldInverse,xo);for(var wo=0,bo=fo.count;wo<bo;wo++){go.fromBufferAttribute(fo,wo),yo.fromBufferAttribute(mo,wo),go.w=1,yo.w=1,go.applyMatrix4(ho),yo.applyMatrix4(ho),go.applyMatrix4(ao),yo.applyMatrix4(ao),go.multiplyScalar(1/go.w),yo.multiplyScalar(1/yo.w);var _o=go.z<-1&&yo.z<-1,To=go.z>1&&yo.z>1;if(!_o&&!To){go.x*=lo.x/2,go.y*=lo.y/2,yo.x*=lo.x/2,yo.y*=lo.y/2,po.start.copy(go),po.start.z=0,po.end.copy(yo),po.end.z=0;var No=po.closestPointToPointParameter(Ao,!0);po.at(No,Mo);var Po=n$5.MathUtils.lerp(go.z,yo.z,No),Co=Po>=-1&&Po<=1,Do=Ao.distanceTo(Mo)<.5*co;if(Co&&Do){po.start.fromBufferAttribute(fo,wo),po.end.fromBufferAttribute(mo,wo),po.start.applyMatrix4(xo),po.end.applyMatrix4(xo);var zo=new n$5.Vector3,Ro=new n$5.Vector3;io.distanceSqToSegment(po.start,po.end,Ro,zo),no.push({point:Ro,pointOnLine:zo,distance:io.origin.distanceTo(Ro),object:this,faceIndex:wo})}}}},to}(n$5.Mesh);Object.assign(a$2.prototype,{isLineSegments2:!0});var s$2=function(eo){function to(ro,no){var io=eo.call(this,ro,no)||this;return io.type="Line2",io}return t$3.__extends(to,eo),to}(a$2);Object.assign(s$2.prototype,{isLine2:!0});var u$3=function(eo){function to(){var ro=eo.call(this)||this;return ro.type="LineGeometry",ro}return t$3.__extends(to,eo),to.prototype.setPositions=function(ro){for(var no=ro.length-3,io=new Float32Array(2*no),oo=0;oo<no;oo+=3)io[2*oo]=ro[oo],io[2*oo+1]=ro[oo+1],io[2*oo+2]=ro[oo+2],io[2*oo+3]=ro[oo+3],io[2*oo+4]=ro[oo+4],io[2*oo+5]=ro[oo+5];return eo.prototype.setPositions.call(this,io),this},to.prototype.setColors=function(ro){for(var no=ro.length-3,io=new Float32Array(2*no),oo=0;oo<no;oo+=3)io[2*oo]=ro[oo],io[2*oo+1]=ro[oo+1],io[2*oo+2]=ro[oo+2],io[2*oo+3]=ro[oo+3],io[2*oo+4]=ro[oo+4],io[2*oo+5]=ro[oo+5];return eo.prototype.setColors.call(this,io),this},to.prototype.fromLine=function(ro){var no=ro.geometry;if(no instanceof n$5.Geometry){var io=new n$5.BufferGeometry().fromGeometry(no);this.setPositions(io.attributes.position.array)}else no instanceof n$5.BufferGeometry&&this.setPositions(no.attributes.position.array);return this},to.prototype.copy=function(){return this},to}(i$2);Object.assign(u$3.prototype,{isLineGeometry:!0});var c$4=null,l$4=function(eo){function to(ro,no){ro===void 0&&(ro=new n$5.Vector3),no===void 0&&(no=new n$5.Vector3);var io=eo.call(this)||this;io.type="FiveLine",io.needsRender=!0;var oo=new u$3,ao=new o$2({color:14467195,linewidth:2,dashScale:20,dashed:!1});io.line=new s$2(oo,ao);var so=new n$5.BufferGeometry,uo=new n$5.PointsMaterial({color:14467195,size:8,map:c$4||(c$4=new n$5.TextureLoader().load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==")),sizeAttenuation:!1,transparent:!0});return io.points=new n$5.Points(so,uo),io.points.renderOrder=11,io.points.frustumCulled=!1,io.setPoints(ro,no),io.add(io.line,io.points),io}return t$3.__extends(to,eo),to.prototype.setPoints=function(ro,no){var io=[].concat(ro.toArray(),no.toArray());this.points.geometry.setAttribute("position",new n$5.BufferAttribute(new Float32Array(io),3)),this.line.geometry.setPositions(io),this.line.computeLineDistances(),this.needsRender=!0},to.prototype.getPoints=function(){var ro=this.points.geometry.attributes.position.array;return[new n$5.Vector3(ro[0],ro[1],ro[2]),new n$5.Vector3(ro[3],ro[4],ro[5])]},to.prototype.setMaterial=function(ro){var no=this.line.material;for(var io in ro)if(ro.hasOwnProperty(io)){var oo=ro[io];io==="dashed"?(no.dashed=oo,oo?no.defines.USE_DASH="":delete no.defines.USE_DASH,no.needsUpdate=!0):no[io]=ro[io]}this.needsRender=!0},to.prototype.setResolution=function(ro,no){var io=this.line.material.resolution;io.x===ro&&io.y===no||(io.set(ro,no),this.needsRender=!0)},to}(n$5.Object3D);Object.assign(l$4.prototype,{isFiveLine:!0}),Line=line$1.Line=l$4,line$1.LineGeometry=u$3,line$1.LineMaterial=o$2,line$1.LineSegmentsGeometry=i$2,line$1.THREE_Line2=s$2,line$1.THREE_LineSegments2=a$2;var five={},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(eo,to){for(var ro=new Array(arguments.length-1),no=0,io=2,oo=!0;io<arguments.length;)ro[no++]=arguments[io++];return new Promise(function(so,uo){ro[no]=function(co){if(oo)if(oo=!1,co)uo(co);else{for(var fo=new Array(arguments.length-1),mo=0;mo<fo.length;)fo[mo++]=arguments[mo];so.apply(null,fo)}};try{eo.apply(to||null,ro)}catch(lo){oo&&(oo=!1,uo(lo))}})}var base64$1={};(function(eo){var to=eo;to.length=function(so){var uo=so.length;if(!uo)return 0;for(var lo=0;--uo%4>1&&so.charAt(uo)==="=";)++lo;return Math.ceil(so.length*3)/4-lo};for(var ro=new Array(64),no=new Array(123),io=0;io<64;)no[ro[io]=io<26?io+65:io<52?io+71:io<62?io-4:io-59|43]=io++;to.encode=function(so,uo,lo){for(var co=null,fo=[],mo=0,go=0,yo;uo<lo;){var vo=so[uo++];switch(go){case 0:fo[mo++]=ro[vo>>2],yo=(vo&3)<<4,go=1;break;case 1:fo[mo++]=ro[yo|vo>>4],yo=(vo&15)<<2,go=2;break;case 2:fo[mo++]=ro[yo|vo>>6],fo[mo++]=ro[vo&63],go=0;break}mo>8191&&((co||(co=[])).push(String.fromCharCode.apply(String,fo)),mo=0)}return go&&(fo[mo++]=ro[yo],fo[mo++]=61,go===1&&(fo[mo++]=61)),co?(mo&&co.push(String.fromCharCode.apply(String,fo.slice(0,mo))),co.join("")):String.fromCharCode.apply(String,fo.slice(0,mo))};var oo="invalid encoding";to.decode=function(so,uo,lo){for(var co=lo,fo=0,mo,go=0;go<so.length;){var yo=so.charCodeAt(go++);if(yo===61&&fo>1)break;if((yo=no[yo])===void 0)throw Error(oo);switch(fo){case 0:mo=yo,fo=1;break;case 1:uo[lo++]=mo<<2|(yo&48)>>4,mo=yo,fo=2;break;case 2:uo[lo++]=(mo&15)<<4|(yo&60)>>2,mo=yo,fo=3;break;case 3:uo[lo++]=(mo&3)<<6|yo,fo=0;break}}if(fo===1)throw Error(oo);return lo-co},to.test=function(so){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(so)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(to,ro,no){return(this._listeners[to]||(this._listeners[to]=[])).push({fn:ro,ctx:no||this}),this};EventEmitter.prototype.off=function(to,ro){if(to===void 0)this._listeners={};else if(ro===void 0)this._listeners[to]=[];else for(var no=this._listeners[to],io=0;io<no.length;)no[io].fn===ro?no.splice(io,1):++io;return this};EventEmitter.prototype.emit=function(to){var ro=this._listeners[to];if(ro){for(var no=[],io=1;io<arguments.length;)no.push(arguments[io++]);for(io=0;io<ro.length;)ro[io].fn.apply(ro[io++].ctx,no)}return this};var float=factory(factory);function factory(eo){return typeof Float32Array!="undefined"?function(){var to=new Float32Array([-0]),ro=new Uint8Array(to.buffer),no=ro[3]===128;function io(uo,lo,co){to[0]=uo,lo[co]=ro[0],lo[co+1]=ro[1],lo[co+2]=ro[2],lo[co+3]=ro[3]}function oo(uo,lo,co){to[0]=uo,lo[co]=ro[3],lo[co+1]=ro[2],lo[co+2]=ro[1],lo[co+3]=ro[0]}eo.writeFloatLE=no?io:oo,eo.writeFloatBE=no?oo:io;function ao(uo,lo){return ro[0]=uo[lo],ro[1]=uo[lo+1],ro[2]=uo[lo+2],ro[3]=uo[lo+3],to[0]}function so(uo,lo){return ro[3]=uo[lo],ro[2]=uo[lo+1],ro[1]=uo[lo+2],ro[0]=uo[lo+3],to[0]}eo.readFloatLE=no?ao:so,eo.readFloatBE=no?so:ao}():function(){function to(no,io,oo,ao){var so=io<0?1:0;if(so&&(io=-io),io===0)no(1/io>0?0:2147483648,oo,ao);else if(isNaN(io))no(2143289344,oo,ao);else if(io>34028234663852886e22)no((so<<31|2139095040)>>>0,oo,ao);else if(io<11754943508222875e-54)no((so<<31|Math.round(io/1401298464324817e-60))>>>0,oo,ao);else{var uo=Math.floor(Math.log(io)/Math.LN2),lo=Math.round(io*Math.pow(2,-uo)*8388608)&8388607;no((so<<31|uo+127<<23|lo)>>>0,oo,ao)}}eo.writeFloatLE=to.bind(null,writeUintLE),eo.writeFloatBE=to.bind(null,writeUintBE);function ro(no,io,oo){var ao=no(io,oo),so=(ao>>31)*2+1,uo=ao>>>23&255,lo=ao&8388607;return uo===255?lo?NaN:so*(1/0):uo===0?so*1401298464324817e-60*lo:so*Math.pow(2,uo-150)*(lo+8388608)}eo.readFloatLE=ro.bind(null,readUintLE),eo.readFloatBE=ro.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var to=new Float64Array([-0]),ro=new Uint8Array(to.buffer),no=ro[7]===128;function io(uo,lo,co){to[0]=uo,lo[co]=ro[0],lo[co+1]=ro[1],lo[co+2]=ro[2],lo[co+3]=ro[3],lo[co+4]=ro[4],lo[co+5]=ro[5],lo[co+6]=ro[6],lo[co+7]=ro[7]}function oo(uo,lo,co){to[0]=uo,lo[co]=ro[7],lo[co+1]=ro[6],lo[co+2]=ro[5],lo[co+3]=ro[4],lo[co+4]=ro[3],lo[co+5]=ro[2],lo[co+6]=ro[1],lo[co+7]=ro[0]}eo.writeDoubleLE=no?io:oo,eo.writeDoubleBE=no?oo:io;function ao(uo,lo){return ro[0]=uo[lo],ro[1]=uo[lo+1],ro[2]=uo[lo+2],ro[3]=uo[lo+3],ro[4]=uo[lo+4],ro[5]=uo[lo+5],ro[6]=uo[lo+6],ro[7]=uo[lo+7],to[0]}function so(uo,lo){return ro[7]=uo[lo],ro[6]=uo[lo+1],ro[5]=uo[lo+2],ro[4]=uo[lo+3],ro[3]=uo[lo+4],ro[2]=uo[lo+5],ro[1]=uo[lo+6],ro[0]=uo[lo+7],to[0]}eo.readDoubleLE=no?ao:so,eo.readDoubleBE=no?so:ao}():function(){function to(no,io,oo,ao,so,uo){var lo=ao<0?1:0;if(lo&&(ao=-ao),ao===0)no(0,so,uo+io),no(1/ao>0?0:2147483648,so,uo+oo);else if(isNaN(ao))no(0,so,uo+io),no(2146959360,so,uo+oo);else if(ao>17976931348623157e292)no(0,so,uo+io),no((lo<<31|2146435072)>>>0,so,uo+oo);else{var co;if(ao<22250738585072014e-324)co=ao/5e-324,no(co>>>0,so,uo+io),no((lo<<31|co/4294967296)>>>0,so,uo+oo);else{var fo=Math.floor(Math.log(ao)/Math.LN2);fo===1024&&(fo=1023),co=ao*Math.pow(2,-fo),no(co*4503599627370496>>>0,so,uo+io),no((lo<<31|fo+1023<<20|co*1048576&1048575)>>>0,so,uo+oo)}}}eo.writeDoubleLE=to.bind(null,writeUintLE,0,4),eo.writeDoubleBE=to.bind(null,writeUintBE,4,0);function ro(no,io,oo,ao,so){var uo=no(ao,so+io),lo=no(ao,so+oo),co=(lo>>31)*2+1,fo=lo>>>20&2047,mo=4294967296*(lo&1048575)+uo;return fo===2047?mo?NaN:co*(1/0):fo===0?co*5e-324*mo:co*Math.pow(2,fo-1075)*(mo+4503599627370496)}eo.readDoubleLE=ro.bind(null,readUintLE,0,4),eo.readDoubleBE=ro.bind(null,readUintBE,4,0)}(),eo}function writeUintLE(eo,to,ro){to[ro]=eo&255,to[ro+1]=eo>>>8&255,to[ro+2]=eo>>>16&255,to[ro+3]=eo>>>24}function writeUintBE(eo,to,ro){to[ro]=eo>>>24,to[ro+1]=eo>>>16&255,to[ro+2]=eo>>>8&255,to[ro+3]=eo&255}function readUintLE(eo,to){return(eo[to]|eo[to+1]<<8|eo[to+2]<<16|eo[to+3]<<24)>>>0}function readUintBE(eo,to){return(eo[to]<<24|eo[to+1]<<16|eo[to+2]<<8|eo[to+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(eo){}return null}var utf8$2={};(function(eo){var to=eo;to.length=function(no){for(var io=0,oo=0,ao=0;ao<no.length;++ao)oo=no.charCodeAt(ao),oo<128?io+=1:oo<2048?io+=2:(oo&64512)===55296&&(no.charCodeAt(ao+1)&64512)===56320?(++ao,io+=4):io+=3;return io},to.read=function(no,io,oo){var ao=oo-io;if(ao<1)return"";for(var so=null,uo=[],lo=0,co;io<oo;)co=no[io++],co<128?uo[lo++]=co:co>191&&co<224?uo[lo++]=(co&31)<<6|no[io++]&63:co>239&&co<365?(co=((co&7)<<18|(no[io++]&63)<<12|(no[io++]&63)<<6|no[io++]&63)-65536,uo[lo++]=55296+(co>>10),uo[lo++]=56320+(co&1023)):uo[lo++]=(co&15)<<12|(no[io++]&63)<<6|no[io++]&63,lo>8191&&((so||(so=[])).push(String.fromCharCode.apply(String,uo)),lo=0);return so?(lo&&so.push(String.fromCharCode.apply(String,uo.slice(0,lo))),so.join("")):String.fromCharCode.apply(String,uo.slice(0,lo))},to.write=function(no,io,oo){for(var ao=oo,so,uo,lo=0;lo<no.length;++lo)so=no.charCodeAt(lo),so<128?io[oo++]=so:so<2048?(io[oo++]=so>>6|192,io[oo++]=so&63|128):(so&64512)===55296&&((uo=no.charCodeAt(lo+1))&64512)===56320?(so=65536+((so&1023)<<10)+(uo&1023),++lo,io[oo++]=so>>18|240,io[oo++]=so>>12&63|128,io[oo++]=so>>6&63|128,io[oo++]=so&63|128):(io[oo++]=so>>12|224,io[oo++]=so>>6&63|128,io[oo++]=so&63|128);return oo-ao}})(utf8$2);var pool_1=pool;function pool(eo,to,ro){var no=ro||8192,io=no>>>1,oo=null,ao=no;return function(uo){if(uo<1||uo>io)return eo(uo);ao+uo>no&&(oo=eo(no),ao=0);var lo=to.call(oo,ao,ao+=uo);return ao&7&&(ao=(ao|7)+1),lo}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(eo,to){this.lo=eo>>>0,this.hi=to>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function eo(to){if(to===0)return zero;var ro=to<0;ro&&(to=-to);var no=to>>>0,io=(to-no)/4294967296>>>0;return ro&&(io=~io>>>0,no=~no>>>0,++no>4294967295&&(no=0,++io>4294967295&&(io=0))),new LongBits$2(no,io)};LongBits$2.from=function eo(to){if(typeof to=="number")return LongBits$2.fromNumber(to);if(util$5.isString(to))if(util$5.Long)to=util$5.Long.fromString(to);else return LongBits$2.fromNumber(parseInt(to,10));return to.low||to.high?new LongBits$2(to.low>>>0,to.high>>>0):zero};LongBits$2.prototype.toNumber=function eo(to){if(!to&&this.hi>>>31){var ro=~this.lo+1>>>0,no=~this.hi>>>0;return ro||(no=no+1>>>0),-(ro+no*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function eo(to){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(to)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(to)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function eo(to){return to===zeroHash?zero:new LongBits$2((charCodeAt.call(to,0)|charCodeAt.call(to,1)<<8|charCodeAt.call(to,2)<<16|charCodeAt.call(to,3)<<24)>>>0,(charCodeAt.call(to,4)|charCodeAt.call(to,5)<<8|charCodeAt.call(to,6)<<16|charCodeAt.call(to,7)<<24)>>>0)};LongBits$2.prototype.toHash=function eo(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function eo(){var to=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^to)>>>0,this.lo=(this.lo<<1^to)>>>0,this};LongBits$2.prototype.zzDecode=function eo(){var to=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^to)>>>0,this.hi=(this.hi>>>1^to)>>>0,this};LongBits$2.prototype.length=function eo(){var to=this.lo,ro=(this.lo>>>28|this.hi<<4)>>>0,no=this.hi>>>24;return no===0?ro===0?to<16384?to<128?1:2:to<2097152?3:4:ro<16384?ro<128?5:6:ro<2097152?7:8:no<128?9:10};(function(eo){var to=eo;to.asPromise=aspromise,to.base64=base64$1,to.EventEmitter=eventemitter,to.float=float,to.inquire=inquire_1,to.utf8=utf8$2,to.pool=pool_1,to.LongBits=longbits,to.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),to.global=to.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,to.emptyArray=Object.freeze?Object.freeze([]):[],to.emptyObject=Object.freeze?Object.freeze({}):{},to.isInteger=Number.isInteger||function(oo){return typeof oo=="number"&&isFinite(oo)&&Math.floor(oo)===oo},to.isString=function(oo){return typeof oo=="string"||oo instanceof String},to.isObject=function(oo){return oo&&typeof oo=="object"},to.isset=to.isSet=function(oo,ao){var so=oo[ao];return so!=null&&oo.hasOwnProperty(ao)?typeof so!="object"||(Array.isArray(so)?so.length:Object.keys(so).length)>0:!1},to.Buffer=function(){try{var io=to.inquire("buffer").Buffer;return io.prototype.utf8Write?io:null}catch{return null}}(),to._Buffer_from=null,to._Buffer_allocUnsafe=null,to.newBuffer=function(oo){return typeof oo=="number"?to.Buffer?to._Buffer_allocUnsafe(oo):new to.Array(oo):to.Buffer?to._Buffer_from(oo):typeof Uint8Array=="undefined"?oo:new Uint8Array(oo)},to.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,to.Long=to.global.dcodeIO&&to.global.dcodeIO.Long||to.global.Long||to.inquire("long"),to.key2Re=/^true|false|0|1$/,to.key32Re=/^-?(?:0|[1-9][0-9]*)$/,to.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,to.longToHash=function(oo){return oo?to.LongBits.from(oo).toHash():to.LongBits.zeroHash},to.longFromHash=function(oo,ao){var so=to.LongBits.fromHash(oo);return to.Long?to.Long.fromBits(so.lo,so.hi,ao):so.toNumber(Boolean(ao))};function ro(io,oo,ao){for(var so=Object.keys(oo),uo=0;uo<so.length;++uo)(io[so[uo]]===void 0||!ao)&&(io[so[uo]]=oo[so[uo]]);return io}to.merge=ro,to.lcFirst=function(oo){return oo.charAt(0).toLowerCase()+oo.substring(1)};function no(io){function oo(ao,so){if(!(this instanceof oo))return new oo(ao,so);Object.defineProperty(this,"message",{get:function(){return ao}}),Error.captureStackTrace?Error.captureStackTrace(this,oo):Object.defineProperty(this,"stack",{value:new Error().stack||""}),so&&ro(this,so)}return(oo.prototype=Object.create(Error.prototype)).constructor=oo,Object.defineProperty(oo.prototype,"name",{get:function(){return io}}),oo.prototype.toString=function(){return this.name+": "+this.message},oo}to.newError=no,to.ProtocolError=no("ProtocolError"),to.oneOfGetter=function(oo){for(var ao={},so=0;so<oo.length;++so)ao[oo[so]]=1;return function(){for(var uo=Object.keys(this),lo=uo.length-1;lo>-1;--lo)if(ao[uo[lo]]===1&&this[uo[lo]]!==void 0&&this[uo[lo]]!==null)return uo[lo]}},to.oneOfSetter=function(oo){return function(ao){for(var so=0;so<oo.length;++so)oo[so]!==ao&&delete this[oo[so]]}},to.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},to._configure=function(){var io=to.Buffer;if(!io){to._Buffer_from=to._Buffer_allocUnsafe=null;return}to._Buffer_from=io.from!==Uint8Array.from&&io.from||function(ao,so){return new io(ao,so)},to._Buffer_allocUnsafe=io.allocUnsafe||function(ao){return new io(ao)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(eo,to,ro){this.fn=eo,this.len=to,this.next=void 0,this.val=ro}function noop(){}function State(eo){this.head=eo.head,this.tail=eo.tail,this.len=eo.len,this.next=eo.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function eo(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function eo(to){return new util$4.Array(to)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function eo(to,ro,no){return this.tail=this.tail.next=new Op(to,ro,no),this.len+=ro,this};function writeByte(eo,to,ro){to[ro]=eo&255}function writeVarint32(eo,to,ro){for(;eo>127;)to[ro++]=eo&127|128,eo>>>=7;to[ro]=eo}function VarintOp(eo,to){this.len=eo,this.next=void 0,this.val=to}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function eo(to){return this.len+=(this.tail=this.tail.next=new VarintOp((to=to>>>0)<128?1:to<16384?2:to<2097152?3:to<268435456?4:5,to)).len,this};Writer$1.prototype.int32=function eo(to){return to<0?this._push(writeVarint64,10,LongBits$1.fromNumber(to)):this.uint32(to)};Writer$1.prototype.sint32=function eo(to){return this.uint32((to<<1^to>>31)>>>0)};function writeVarint64(eo,to,ro){for(;eo.hi;)to[ro++]=eo.lo&127|128,eo.lo=(eo.lo>>>7|eo.hi<<25)>>>0,eo.hi>>>=7;for(;eo.lo>127;)to[ro++]=eo.lo&127|128,eo.lo=eo.lo>>>7;to[ro++]=eo.lo}Writer$1.prototype.uint64=function eo(to){var ro=LongBits$1.from(to);return this._push(writeVarint64,ro.length(),ro)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function eo(to){var ro=LongBits$1.from(to).zzEncode();return this._push(writeVarint64,ro.length(),ro)};Writer$1.prototype.bool=function eo(to){return this._push(writeByte,1,to?1:0)};function writeFixed32(eo,to,ro){to[ro]=eo&255,to[ro+1]=eo>>>8&255,to[ro+2]=eo>>>16&255,to[ro+3]=eo>>>24}Writer$1.prototype.fixed32=function eo(to){return this._push(writeFixed32,4,to>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function eo(to){var ro=LongBits$1.from(to);return this._push(writeFixed32,4,ro.lo)._push(writeFixed32,4,ro.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function eo(to){return this._push(util$4.float.writeFloatLE,4,to)};Writer$1.prototype.double=function eo(to){return this._push(util$4.float.writeDoubleLE,8,to)};var writeBytes=util$4.Array.prototype.set?function eo(to,ro,no){ro.set(to,no)}:function eo(to,ro,no){for(var io=0;io<to.length;++io)ro[no+io]=to[io]};Writer$1.prototype.bytes=function eo(to){var ro=to.length>>>0;if(!ro)return this._push(writeByte,1,0);if(util$4.isString(to)){var no=Writer$1.alloc(ro=base64.length(to));base64.decode(to,no,0),to=no}return this.uint32(ro)._push(writeBytes,ro,to)};Writer$1.prototype.string=function eo(to){var ro=utf8$1.length(to);return ro?this.uint32(ro)._push(utf8$1.write,ro,to):this._push(writeByte,1,0)};Writer$1.prototype.fork=function eo(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function eo(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function eo(){var to=this.head,ro=this.tail,no=this.len;return this.reset().uint32(no),no&&(this.tail.next=to.next,this.tail=ro,this.len+=no),this};Writer$1.prototype.finish=function eo(){for(var to=this.head.next,ro=this.constructor.alloc(this.len),no=0;to;)to.fn(to.val,ro,no),no+=to.len,to=to.next;return ro};Writer$1._configure=function(eo){BufferWriter$1=eo,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(to,ro,no){ro.set(to,no)}:function(to,ro,no){if(to.copy)to.copy(ro,no,0,to.length);else for(var io=0;io<to.length;)ro[no++]=to[io++]}};BufferWriter.prototype.bytes=function eo(to){util$3.isString(to)&&(to=util$3._Buffer_from(to,"base64"));var ro=to.length>>>0;return this.uint32(ro),ro&&this._push(BufferWriter.writeBytesBuffer,ro,to),this};function writeStringBuffer(eo,to,ro){eo.length<40?util$3.utf8.write(eo,to,ro):to.utf8Write?to.utf8Write(eo,ro):to.write(eo,ro)}BufferWriter.prototype.string=function eo(to){var ro=util$3.Buffer.byteLength(to);return this.uint32(ro),ro&&this._push(writeStringBuffer,ro,to),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(eo,to){return RangeError("index out of range: "+eo.pos+" + "+(to||1)+" > "+eo.len)}function Reader$1(eo){this.buf=eo,this.pos=0,this.len=eo.length}var create_array=typeof Uint8Array!="undefined"?function eo(to){if(to instanceof Uint8Array||Array.isArray(to))return new Reader$1(to);throw Error("illegal buffer")}:function eo(to){if(Array.isArray(to))return new Reader$1(to);throw Error("illegal buffer")},create=function eo(){return util$2.Buffer?function(ro){return(Reader$1.create=function(io){return util$2.Buffer.isBuffer(io)?new BufferReader$1(io):create_array(io)})(ro)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function eo(){var to=4294967295;return function(){if(to=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(to=(to|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(to=(to|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(to=(to|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(to=(to|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return to;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return to}}();Reader$1.prototype.int32=function eo(){return this.uint32()|0};Reader$1.prototype.sint32=function eo(){var to=this.uint32();return to>>>1^-(to&1)|0};function readLongVarint(){var eo=new LongBits(0,0),to=0;if(this.len-this.pos>4){for(;to<4;++to)if(eo.lo=(eo.lo|(this.buf[this.pos]&127)<<to*7)>>>0,this.buf[this.pos++]<128)return eo;if(eo.lo=(eo.lo|(this.buf[this.pos]&127)<<28)>>>0,eo.hi=(eo.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return eo;to=0}else{for(;to<3;++to){if(this.pos>=this.len)throw indexOutOfRange(this);if(eo.lo=(eo.lo|(this.buf[this.pos]&127)<<to*7)>>>0,this.buf[this.pos++]<128)return eo}return eo.lo=(eo.lo|(this.buf[this.pos++]&127)<<to*7)>>>0,eo}if(this.len-this.pos>4){for(;to<5;++to)if(eo.hi=(eo.hi|(this.buf[this.pos]&127)<<to*7+3)>>>0,this.buf[this.pos++]<128)return eo}else for(;to<5;++to){if(this.pos>=this.len)throw indexOutOfRange(this);if(eo.hi=(eo.hi|(this.buf[this.pos]&127)<<to*7+3)>>>0,this.buf[this.pos++]<128)return eo}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function eo(){return this.uint32()!==0};function readFixed32_end(eo,to){return(eo[to-4]|eo[to-3]<<8|eo[to-2]<<16|eo[to-1]<<24)>>>0}Reader$1.prototype.fixed32=function eo(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function eo(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function eo(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var to=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,to};Reader$1.prototype.double=function eo(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var to=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,to};Reader$1.prototype.bytes=function eo(){var to=this.uint32(),ro=this.pos,no=this.pos+to;if(no>this.len)throw indexOutOfRange(this,to);return this.pos+=to,Array.isArray(this.buf)?this.buf.slice(ro,no):ro===no?new this.buf.constructor(0):this._slice.call(this.buf,ro,no)};Reader$1.prototype.string=function eo(){var to=this.bytes();return utf8.read(to,0,to.length)};Reader$1.prototype.skip=function eo(to){if(typeof to=="number"){if(this.pos+to>this.len)throw indexOutOfRange(this,to);this.pos+=to}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(eo){switch(eo){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(eo=this.uint32()&7)!==4;)this.skipType(eo);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+eo+" at offset "+this.pos)}return this};Reader$1._configure=function(eo){BufferReader$1=eo,Reader$1.create=create(),BufferReader$1._configure();var to=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[to](!1)},uint64:function(){return readLongVarint.call(this)[to](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[to](!1)},fixed64:function(){return readFixed64.call(this)[to](!0)},sfixed64:function(){return readFixed64.call(this)[to](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(eo){Reader.call(this,eo)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function eo(){var to=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+to,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+to,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(eo,to,ro){if(typeof eo!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=eo,this.requestDelimited=Boolean(to),this.responseDelimited=Boolean(ro)}Service.prototype.rpcCall=function eo(to,ro,no,io,oo){if(!io)throw TypeError("request must be specified");var ao=this;if(!oo)return util.asPromise(eo,ao,to,ro,no,io);if(!ao.rpcImpl){setTimeout(function(){oo(Error("already ended"))},0);return}try{return ao.rpcImpl(to,ro[ao.requestDelimited?"encodeDelimited":"encode"](io).finish(),function(uo,lo){if(uo)return ao.emit("error",uo,to),oo(uo);if(lo===null){ao.end(!0);return}if(!(lo instanceof no))try{lo=no[ao.responseDelimited?"decodeDelimited":"decode"](lo)}catch(co){return ao.emit("error",co,to),oo(co)}return ao.emit("data",lo,to),oo(null,lo)})}catch(so){ao.emit("error",so,to),setTimeout(function(){oo(so)},0);return}};Service.prototype.end=function eo(to){return this.rpcImpl&&(to||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(eo){var to=eo;to.Service=service})(rpc);var roots={};(function(eo){var to=eo;to.build="minimal",to.Writer=writer,to.BufferWriter=writer_buffer,to.Reader=reader,to.BufferReader=reader_buffer,to.util=minimal$1,to.rpc=rpc,to.roots=roots,to.configure=ro;function ro(){to.util._configure(),to.Writer._configure(to.BufferWriter),to.Reader._configure(to.BufferReader)}ro()})(indexMinimal);var minimal=indexMinimal,parseWork,Five;Object.defineProperty(five,"__esModule",{value:!0});var e$3=require$$2$1,t$2=tslib.exports,i$1=minimal;function n$4(eo){if(eo&&eo.__esModule)return eo;var to=Object.create(null);return eo&&Object.keys(eo).forEach(function(ro){if(ro!=="default"){var no=Object.getOwnPropertyDescriptor(eo,ro);Object.defineProperty(to,ro,no.get?no:{enumerable:!0,get:function(){return eo[ro]}})}}),to.default=eo,Object.freeze(to)}var r$3=n$4(e$3),s$1=n$4(i$1),o$1=Number(r$3.REVISION);if(o$1<115||o$1>117)throw new Error('"Five" needs "THREE.js" version between 125 - 117.');/**
 * @license
 * The 'jsrsasign'(RSA-Sign JavaScript Library) License
 *
 * Copyright (c) 2010-2021 Kenji Urushima
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * LICENSE: MIT License
 *//**
 * @license
 * RSA and ECC in JavaScript
 *
 * Copyright (c) 2003-2005  Tom Wu All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 *
 * http://www-cs-students.stanford.edu/~tjw/jsbn/
 * LICENSE: BSD License
 * PART: ext/{base64,jsbn,jsbn2,prgn4,rng,rsa,rsa2}
 *//**
 * @license
 * CryptoJS
 *
 * Copyright (c) 2009-2013 Jeff Mott
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * https://code.google.com/p/crypto-js/wiki/License
 * PART: ext/cryptojs
 */var a$1,u$2={},c$3={},A$3=A$3||function(eo,to){var ro={},no=ro.lib={},io=no.Base=function(){function mo(){}return{extend:function(go){mo.prototype=this;var yo=new mo;return go&&yo.mixIn(go),yo.hasOwnProperty("init")||(yo.init=function(){yo.$super.init.apply(this,arguments)}),yo.init.prototype=yo,yo.$super=this,yo},create:function(){var go=this.extend();return go.init.apply(go,arguments),go},init:function(){},mixIn:function(go){for(var yo in go)go.hasOwnProperty(yo)&&(this[yo]=go[yo]);go.hasOwnProperty("toString")&&(this.toString=go.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),oo=no.WordArray=io.extend({init:function(mo,go){mo=this.words=mo||[],this.sigBytes=go!=null?go:4*mo.length},toString:function(mo){return(mo||so).stringify(this)},concat:function(mo){var go=this.words,yo=mo.words,vo=this.sigBytes,Ao=mo.sigBytes;if(this.clamp(),vo%4)for(var ho=0;ho<Ao;ho++){var po=yo[ho>>>2]>>>24-ho%4*8&255;go[vo+ho>>>2]|=po<<24-(vo+ho)%4*8}else for(ho=0;ho<Ao;ho+=4)go[vo+ho>>>2]=yo[ho>>>2];return this.sigBytes+=Ao,this},clamp:function(){var mo=this.words,go=this.sigBytes;mo[go>>>2]&=4294967295<<32-go%4*8,mo.length=eo.ceil(go/4)},clone:function(){var mo=io.clone.call(this);return mo.words=this.words.slice(0),mo},random:function(mo){for(var go=[],yo=0;yo<mo;yo+=4)go.push(4294967296*eo.random()|0);return new oo.init(go,mo)}}),ao=ro.enc={},so=ao.Hex={stringify:function(mo){for(var go=mo.words,yo=mo.sigBytes,vo=[],Ao=0;Ao<yo;Ao++){var ho=go[Ao>>>2]>>>24-Ao%4*8&255;vo.push((ho>>>4).toString(16)),vo.push((15&ho).toString(16))}return vo.join("")},parse:function(mo){for(var go=mo.length,yo=[],vo=0;vo<go;vo+=2)yo[vo>>>3]|=parseInt(mo.substr(vo,2),16)<<24-vo%8*4;return new oo.init(yo,go/2)}},uo=ao.Latin1={stringify:function(mo){for(var go=mo.words,yo=mo.sigBytes,vo=[],Ao=0;Ao<yo;Ao++){var ho=go[Ao>>>2]>>>24-Ao%4*8&255;vo.push(String.fromCharCode(ho))}return vo.join("")},parse:function(mo){for(var go=mo.length,yo=[],vo=0;vo<go;vo++)yo[vo>>>2]|=(255&mo.charCodeAt(vo))<<24-vo%4*8;return new oo.init(yo,go)}},lo=ao.Utf8={stringify:function(mo){try{return decodeURIComponent(escape(uo.stringify(mo)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(mo){return uo.parse(unescape(encodeURIComponent(mo)))}},co=no.BufferedBlockAlgorithm=io.extend({reset:function(){this._data=new oo.init,this._nDataBytes=0},_append:function(mo){typeof mo=="string"&&(mo=lo.parse(mo)),this._data.concat(mo),this._nDataBytes+=mo.sigBytes},_process:function(mo){var go=this._data,yo=go.words,vo=go.sigBytes,Ao=this.blockSize,ho=vo/(4*Ao),po=(ho=mo?eo.ceil(ho):eo.max((0|ho)-this._minBufferSize,0))*Ao,Mo=eo.min(4*po,vo);if(po){for(var xo=0;xo<po;xo+=Ao)this._doProcessBlock(yo,xo);var wo=yo.splice(0,po);go.sigBytes-=Mo}return new oo.init(wo,Mo)},clone:function(){var mo=io.clone.call(this);return mo._data=this._data.clone(),mo},_minBufferSize:0});no.Hasher=co.extend({cfg:io.extend(),init:function(mo){this.cfg=this.cfg.extend(mo),this.reset()},reset:function(){co.reset.call(this),this._doReset()},update:function(mo){return this._append(mo),this._process(),this},finalize:function(mo){return mo&&this._append(mo),this._doFinalize()},blockSize:16,_createHelper:function(mo){return function(go,yo){return new mo.init(yo).finalize(go)}},_createHmacHelper:function(mo){return function(go,yo){return new fo.HMAC.init(mo,yo).finalize(go)}}});var fo=ro.algo={};return ro}(Math);function l$3(eo,to,ro){eo!=null&&(typeof eo=="number"?this.fromNumber(eo,to,ro):to==null&&typeof eo!="string"?this.fromString(eo,256):this.fromString(eo,to))}function h$4(){return new l$3(null)}(function(eo){for(var to=A$3,ro=(io=to.lib).WordArray,no=io.Hasher,io=to.algo,oo=[],ao=[],so=function(yo){return 4294967296*(yo-(0|yo))|0},uo=2,lo=0;64>lo;){var co;e:{co=uo;for(var fo=eo.sqrt(co),mo=2;mo<=fo;mo++)if(!(co%mo)){co=!1;break e}co=!0}co&&(8>lo&&(oo[lo]=so(eo.pow(uo,.5))),ao[lo]=so(eo.pow(uo,1/3)),lo++),uo++}var go=[];io=io.SHA256=no.extend({_doReset:function(){this._hash=new ro.init(oo.slice(0))},_doProcessBlock:function(yo,vo){for(var Ao=this._hash.words,ho=Ao[0],po=Ao[1],Mo=Ao[2],xo=Ao[3],wo=Ao[4],bo=Ao[5],_o=Ao[6],To=Ao[7],No=0;64>No;No++){if(16>No)go[No]=0|yo[vo+No];else{var Po=go[No-15],Co=go[No-2];go[No]=((Po<<25|Po>>>7)^(Po<<14|Po>>>18)^Po>>>3)+go[No-7]+((Co<<15|Co>>>17)^(Co<<13|Co>>>19)^Co>>>10)+go[No-16]}Po=To+((wo<<26|wo>>>6)^(wo<<21|wo>>>11)^(wo<<7|wo>>>25))+(wo&bo^~wo&_o)+ao[No]+go[No],Co=((ho<<30|ho>>>2)^(ho<<19|ho>>>13)^(ho<<10|ho>>>22))+(ho&po^ho&Mo^po&Mo),To=_o,_o=bo,bo=wo,wo=xo+Po|0,xo=Mo,Mo=po,po=ho,ho=Po+Co|0}Ao[0]=Ao[0]+ho|0,Ao[1]=Ao[1]+po|0,Ao[2]=Ao[2]+Mo|0,Ao[3]=Ao[3]+xo|0,Ao[4]=Ao[4]+wo|0,Ao[5]=Ao[5]+bo|0,Ao[6]=Ao[6]+_o|0,Ao[7]=Ao[7]+To|0},_doFinalize:function(){var yo=this._data,vo=yo.words,Ao=8*this._nDataBytes,ho=8*yo.sigBytes;return vo[ho>>>5]|=128<<24-ho%32,vo[14+(ho+64>>>9<<4)]=eo.floor(Ao/4294967296),vo[15+(ho+64>>>9<<4)]=Ao,yo.sigBytes=4*vo.length,this._process(),this._hash},clone:function(){var yo=no.clone.call(this);return yo._hash=this._hash.clone(),yo}}),to.SHA256=no._createHelper(io),to.HmacSHA256=no._createHmacHelper(io)})(Math),A$3.lib.Cipher||function(eo){var to=(go=A$3).lib,ro=to.Base,no=to.WordArray,io=to.BufferedBlockAlgorithm,oo=go.enc.Base64,ao=go.algo.EvpKDF,so=to.Cipher=io.extend({cfg:ro.extend(),createEncryptor:function(vo,Ao){return this.create(this._ENC_XFORM_MODE,vo,Ao)},createDecryptor:function(vo,Ao){return this.create(this._DEC_XFORM_MODE,vo,Ao)},init:function(vo,Ao,ho){this.cfg=this.cfg.extend(ho),this._xformMode=vo,this._key=Ao,this.reset()},reset:function(){io.reset.call(this),this._doReset()},process:function(vo){return this._append(vo),this._process()},finalize:function(vo){return vo&&this._append(vo),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(vo){return{encrypt:function(Ao,ho,po){return(typeof ho=="string"?yo:mo).encrypt(vo,Ao,ho,po)},decrypt:function(Ao,ho,po){return(typeof ho=="string"?yo:mo).decrypt(vo,Ao,ho,po)}}}});to.StreamCipher=so.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var uo=go.mode={},lo=function(vo,Ao,ho){var po=this._iv;po?this._iv=void 0:po=this._prevBlock;for(var Mo=0;Mo<ho;Mo++)vo[Ao+Mo]^=po[Mo]},co=(to.BlockCipherMode=ro.extend({createEncryptor:function(vo,Ao){return this.Encryptor.create(vo,Ao)},createDecryptor:function(vo,Ao){return this.Decryptor.create(vo,Ao)},init:function(vo,Ao){this._cipher=vo,this._iv=Ao}})).extend();co.Encryptor=co.extend({processBlock:function(vo,Ao){var ho=this._cipher,po=ho.blockSize;lo.call(this,vo,Ao,po),ho.encryptBlock(vo,Ao),this._prevBlock=vo.slice(Ao,Ao+po)}}),co.Decryptor=co.extend({processBlock:function(vo,Ao){var ho=this._cipher,po=ho.blockSize,Mo=vo.slice(Ao,Ao+po);ho.decryptBlock(vo,Ao),lo.call(this,vo,Ao,po),this._prevBlock=Mo}}),uo=uo.CBC=co,co=(go.pad={}).Pkcs7={pad:function(vo,Ao){for(var ho,po=(ho=(ho=4*Ao)-vo.sigBytes%ho)<<24|ho<<16|ho<<8|ho,Mo=[],xo=0;xo<ho;xo+=4)Mo.push(po);ho=no.create(Mo,ho),vo.concat(ho)},unpad:function(vo){vo.sigBytes-=255&vo.words[vo.sigBytes-1>>>2]}},to.BlockCipher=so.extend({cfg:so.cfg.extend({mode:uo,padding:co}),reset:function(){so.reset.call(this);var vo=(Ao=this.cfg).iv,Ao=Ao.mode;if(this._xformMode==this._ENC_XFORM_MODE)var ho=Ao.createEncryptor;else ho=Ao.createDecryptor,this._minBufferSize=1;this._mode=ho.call(Ao,this,vo&&vo.words)},_doProcessBlock:function(vo,Ao){this._mode.processBlock(vo,Ao)},_doFinalize:function(){var vo=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){vo.pad(this._data,this.blockSize);var Ao=this._process(!0)}else Ao=this._process(!0),vo.unpad(Ao);return Ao},blockSize:4});var fo=to.CipherParams=ro.extend({init:function(vo){this.mixIn(vo)},toString:function(vo){return(vo||this.formatter).stringify(this)}}),mo=(uo=(go.format={}).OpenSSL={stringify:function(vo){var Ao=vo.ciphertext;return((vo=vo.salt)?no.create([1398893684,1701076831]).concat(vo).concat(Ao):Ao).toString(oo)},parse:function(vo){var Ao=(vo=oo.parse(vo)).words;if(Ao[0]==1398893684&&Ao[1]==1701076831){var ho=no.create(Ao.slice(2,4));Ao.splice(0,4),vo.sigBytes-=16}return fo.create({ciphertext:vo,salt:ho})}},to.SerializableCipher=ro.extend({cfg:ro.extend({format:uo}),encrypt:function(vo,Ao,ho,po){po=this.cfg.extend(po);var Mo=vo.createEncryptor(ho,po);return Ao=Mo.finalize(Ao),Mo=Mo.cfg,fo.create({ciphertext:Ao,key:ho,iv:Mo.iv,algorithm:vo,mode:Mo.mode,padding:Mo.padding,blockSize:vo.blockSize,formatter:po.format})},decrypt:function(vo,Ao,ho,po){return po=this.cfg.extend(po),Ao=this._parse(Ao,po.format),vo.createDecryptor(ho,po).finalize(Ao.ciphertext)},_parse:function(vo,Ao){return typeof vo=="string"?Ao.parse(vo,this):vo}})),go=(go.kdf={}).OpenSSL={execute:function(vo,Ao,ho,po){return po||(po=no.random(8)),vo=ao.create({keySize:Ao+ho}).compute(vo,po),ho=no.create(vo.words.slice(Ao),4*ho),vo.sigBytes=4*Ao,fo.create({key:vo,iv:ho,salt:po})}},yo=to.PasswordBasedCipher=mo.extend({cfg:mo.cfg.extend({kdf:go}),encrypt:function(vo,Ao,ho,po){return ho=(po=this.cfg.extend(po)).kdf.execute(ho,vo.keySize,vo.ivSize),po.iv=ho.iv,(vo=mo.encrypt.call(this,vo,Ao,ho.key,po)).mixIn(ho),vo},decrypt:function(vo,Ao,ho,po){return po=this.cfg.extend(po),Ao=this._parse(Ao,po.format),ho=po.kdf.execute(ho,vo.keySize,vo.ivSize,Ao.salt),po.iv=ho.iv,mo.decrypt.call(this,vo,Ao,ho.key,po)}})}(),function(){for(var eo=A$3,to=eo.lib.BlockCipher,ro=eo.algo,no=[],io=[],oo=[],ao=[],so=[],uo=[],lo=[],co=[],fo=[],mo=[],go=[],yo=0;256>yo;yo++)go[yo]=128>yo?yo<<1:yo<<1^283;var vo=0,Ao=0;for(yo=0;256>yo;yo++){var ho=(ho=Ao^Ao<<1^Ao<<2^Ao<<3^Ao<<4)>>>8^255&ho^99;no[vo]=ho,io[ho]=vo;var po=go[vo],Mo=go[po],xo=go[Mo],wo=257*go[ho]^16843008*ho;oo[vo]=wo<<24|wo>>>8,ao[vo]=wo<<16|wo>>>16,so[vo]=wo<<8|wo>>>24,uo[vo]=wo,wo=16843009*xo^65537*Mo^257*po^16843008*vo,lo[ho]=wo<<24|wo>>>8,co[ho]=wo<<16|wo>>>16,fo[ho]=wo<<8|wo>>>24,mo[ho]=wo,vo?(vo=po^go[go[go[xo^po]]],Ao^=go[go[Ao]]):vo=Ao=1}var bo=[0,1,2,4,8,16,32,64,128,27,54];ro=ro.AES=to.extend({_doReset:function(){for(var _o=(No=this._key).words,To=No.sigBytes/4,No=4*((this._nRounds=To+6)+1),Po=this._keySchedule=[],Co=0;Co<No;Co++)if(Co<To)Po[Co]=_o[Co];else{var Do=Po[Co-1];Co%To?6<To&&Co%To==4&&(Do=no[Do>>>24]<<24|no[Do>>>16&255]<<16|no[Do>>>8&255]<<8|no[255&Do]):(Do=no[(Do=Do<<8|Do>>>24)>>>24]<<24|no[Do>>>16&255]<<16|no[Do>>>8&255]<<8|no[255&Do],Do^=bo[Co/To|0]<<24),Po[Co]=Po[Co-To]^Do}for(_o=this._invKeySchedule=[],To=0;To<No;To++)Co=No-To,Do=To%4?Po[Co]:Po[Co-4],_o[To]=4>To||4>=Co?Do:lo[no[Do>>>24]]^co[no[Do>>>16&255]]^fo[no[Do>>>8&255]]^mo[no[255&Do]]},encryptBlock:function(_o,To){this._doCryptBlock(_o,To,this._keySchedule,oo,ao,so,uo,no)},decryptBlock:function(_o,To){var No=_o[To+1];_o[To+1]=_o[To+3],_o[To+3]=No,this._doCryptBlock(_o,To,this._invKeySchedule,lo,co,fo,mo,io),No=_o[To+1],_o[To+1]=_o[To+3],_o[To+3]=No},_doCryptBlock:function(_o,To,No,Po,Co,Do,zo,Ro){for(var Lo=this._nRounds,$o=_o[To]^No[0],jo=_o[To+1]^No[1],Wo=_o[To+2]^No[2],Ko=_o[To+3]^No[3],Jo=4,Go=1;Go<Lo;Go++){var Xo=Po[$o>>>24]^Co[jo>>>16&255]^Do[Wo>>>8&255]^zo[255&Ko]^No[Jo++],va=Po[jo>>>24]^Co[Wo>>>16&255]^Do[Ko>>>8&255]^zo[255&$o]^No[Jo++],tu=Po[Wo>>>24]^Co[Ko>>>16&255]^Do[$o>>>8&255]^zo[255&jo]^No[Jo++];Ko=Po[Ko>>>24]^Co[$o>>>16&255]^Do[jo>>>8&255]^zo[255&Wo]^No[Jo++],$o=Xo,jo=va,Wo=tu}Xo=(Ro[$o>>>24]<<24|Ro[jo>>>16&255]<<16|Ro[Wo>>>8&255]<<8|Ro[255&Ko])^No[Jo++],va=(Ro[jo>>>24]<<24|Ro[Wo>>>16&255]<<16|Ro[Ko>>>8&255]<<8|Ro[255&$o])^No[Jo++],tu=(Ro[Wo>>>24]<<24|Ro[Ko>>>16&255]<<16|Ro[$o>>>8&255]<<8|Ro[255&jo])^No[Jo++],Ko=(Ro[Ko>>>24]<<24|Ro[$o>>>16&255]<<16|Ro[jo>>>8&255]<<8|Ro[255&Wo])^No[Jo++],_o[To]=Xo,_o[To+1]=va,_o[To+2]=tu,_o[To+3]=Ko},keySize:8}),eo.AES=to._createHelper(ro)}(),c$3.lang={extend:function(eo,to,ro){if(!to||!eo)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var no=function(){};if(no.prototype=to.prototype,eo.prototype=new no,eo.prototype.constructor=eo,eo.superclass=to.prototype,to.prototype.constructor==Object.prototype.constructor&&(to.prototype.constructor=to),ro){var io;for(io in ro)eo.prototype[io]=ro[io];var oo=function(){},ao=["toString","valueOf"];try{/MSIE/.test(typeof navigator!="undefined"?navigator.userAgent:"node")&&(oo=function(so,uo){for(io=0;io<ao.length;io+=1){var lo=ao[io],co=uo[lo];typeof co=="function"&&co!=Object.prototype[lo]&&(so[lo]=co)}})}catch{}oo(eo.prototype,ro)}}},typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"?(l$3.prototype.am=function(eo,to,ro,no,io,oo){for(var ao=32767&to,so=to>>15;--oo>=0;){var uo=32767&this[eo],lo=this[eo++]>>15,co=so*uo+lo*ao;io=((uo=ao*uo+((32767&co)<<15)+ro[no]+(1073741823&io))>>>30)+(co>>>15)+so*lo+(io>>>30),ro[no++]=1073741823&uo}return io},a$1=30):typeof navigator!="undefined"&&navigator.appName!="Netscape"?(l$3.prototype.am=function(eo,to,ro,no,io,oo){for(;--oo>=0;){var ao=to*this[eo++]+ro[no]+io;io=Math.floor(ao/67108864),ro[no++]=67108863&ao}return io},a$1=26):(l$3.prototype.am=function(eo,to,ro,no,io,oo){for(var ao=16383&to,so=to>>14;--oo>=0;){var uo=16383&this[eo],lo=this[eo++]>>14,co=so*uo+lo*ao;io=((uo=ao*uo+((16383&co)<<14)+ro[no]+io)>>28)+(co>>14)+so*lo,ro[no++]=268435455&uo}return io},a$1=28),l$3.prototype.DB=a$1,l$3.prototype.DM=(1<<a$1)-1,l$3.prototype.DV=1<<a$1;l$3.prototype.FV=Math.pow(2,52),l$3.prototype.F1=52-a$1,l$3.prototype.F2=2*a$1-52;var d$3,g$4,p$4=new Array;for(d$3="0".charCodeAt(0),g$4=0;g$4<=9;++g$4)p$4[d$3++]=g$4;for(d$3="a".charCodeAt(0),g$4=10;g$4<36;++g$4)p$4[d$3++]=g$4;for(d$3="A".charCodeAt(0),g$4=10;g$4<36;++g$4)p$4[d$3++]=g$4;function M$1(eo){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(eo)}function f$4(eo,to){var ro=p$4[eo.charCodeAt(to)];return ro==null?-1:ro}function y$3(eo){var to=h$4();return to.fromInt(eo),to}function m$4(eo){var to,ro=1;return(to=eo>>>16)!=0&&(eo=to,ro+=16),(to=eo>>8)!=0&&(eo=to,ro+=8),(to=eo>>4)!=0&&(eo=to,ro+=4),(to=eo>>2)!=0&&(eo=to,ro+=2),(to=eo>>1)!=0&&(eo=to,ro+=1),ro}function v$3(eo){this.m=eo}function N$1(eo){this.m=eo,this.mp=eo.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<eo.DB-15)-1,this.mt2=2*eo.t}function D$1(eo,to){return eo&to}function E$2(eo,to){return eo|to}function w$3(eo,to){return eo^to}function I$1(eo,to){return eo&~to}function T(eo){if(eo==0)return-1;var to=0;return(65535&eo)==0&&(eo>>=16,to+=16),(255&eo)==0&&(eo>>=8,to+=8),(15&eo)==0&&(eo>>=4,to+=4),(3&eo)==0&&(eo>>=2,to+=2),(1&eo)==0&&++to,to}function x$3(eo){for(var to=0;eo!=0;)eo&=eo-1,++to;return to}function j$1(){}function z$2(eo){return eo}function C$2(eo){this.r2=h$4(),this.q3=h$4(),l$3.ONE.dlShiftTo(2*eo.t,this.r2),this.mu=this.r2.divide(eo),this.m=eo}v$3.prototype.convert=function(eo){return eo.s<0||eo.compareTo(this.m)>=0?eo.mod(this.m):eo},v$3.prototype.revert=function(eo){return eo},v$3.prototype.reduce=function(eo){eo.divRemTo(this.m,null,eo)},v$3.prototype.mulTo=function(eo,to,ro){eo.multiplyTo(to,ro),this.reduce(ro)},v$3.prototype.sqrTo=function(eo,to){eo.squareTo(to),this.reduce(to)},N$1.prototype.convert=function(eo){var to=h$4();return eo.abs().dlShiftTo(this.m.t,to),to.divRemTo(this.m,null,to),eo.s<0&&to.compareTo(l$3.ZERO)>0&&this.m.subTo(to,to),to},N$1.prototype.revert=function(eo){var to=h$4();return eo.copyTo(to),this.reduce(to),to},N$1.prototype.reduce=function(eo){for(;eo.t<=this.mt2;)eo[eo.t++]=0;for(var to=0;to<this.m.t;++to){var ro=32767&eo[to],no=ro*this.mpl+((ro*this.mph+(eo[to]>>15)*this.mpl&this.um)<<15)&eo.DM;for(eo[ro=to+this.m.t]+=this.m.am(0,no,eo,to,0,this.m.t);eo[ro]>=eo.DV;)eo[ro]-=eo.DV,eo[++ro]++}eo.clamp(),eo.drShiftTo(this.m.t,eo),eo.compareTo(this.m)>=0&&eo.subTo(this.m,eo)},N$1.prototype.mulTo=function(eo,to,ro){eo.multiplyTo(to,ro),this.reduce(ro)},N$1.prototype.sqrTo=function(eo,to){eo.squareTo(to),this.reduce(to)},l$3.prototype.copyTo=function(eo){for(var to=this.t-1;to>=0;--to)eo[to]=this[to];eo.t=this.t,eo.s=this.s},l$3.prototype.fromInt=function(eo){this.t=1,this.s=eo<0?-1:0,eo>0?this[0]=eo:eo<-1?this[0]=eo+this.DV:this.t=0},l$3.prototype.fromString=function(eo,to){var ro;if(to==16)ro=4;else if(to==8)ro=3;else if(to==256)ro=8;else if(to==2)ro=1;else if(to==32)ro=5;else{if(to!=4)return void this.fromRadix(eo,to);ro=2}this.t=0,this.s=0;for(var no=eo.length,io=!1,oo=0;--no>=0;){var ao=ro==8?255&eo[no]:f$4(eo,no);ao<0?eo.charAt(no)=="-"&&(io=!0):(io=!1,oo==0?this[this.t++]=ao:oo+ro>this.DB?(this[this.t-1]|=(ao&(1<<this.DB-oo)-1)<<oo,this[this.t++]=ao>>this.DB-oo):this[this.t-1]|=ao<<oo,(oo+=ro)>=this.DB&&(oo-=this.DB))}ro==8&&(128&eo[0])!=0&&(this.s=-1,oo>0&&(this[this.t-1]|=(1<<this.DB-oo)-1<<oo)),this.clamp(),io&&l$3.ZERO.subTo(this,this)},l$3.prototype.clamp=function(){for(var eo=this.s&this.DM;this.t>0&&this[this.t-1]==eo;)--this.t},l$3.prototype.dlShiftTo=function(eo,to){var ro;for(ro=this.t-1;ro>=0;--ro)to[ro+eo]=this[ro];for(ro=eo-1;ro>=0;--ro)to[ro]=0;to.t=this.t+eo,to.s=this.s},l$3.prototype.drShiftTo=function(eo,to){for(var ro=eo;ro<this.t;++ro)to[ro-eo]=this[ro];to.t=Math.max(this.t-eo,0),to.s=this.s},l$3.prototype.lShiftTo=function(eo,to){var ro,no=eo%this.DB,io=this.DB-no,oo=(1<<io)-1,ao=Math.floor(eo/this.DB),so=this.s<<no&this.DM;for(ro=this.t-1;ro>=0;--ro)to[ro+ao+1]=this[ro]>>io|so,so=(this[ro]&oo)<<no;for(ro=ao-1;ro>=0;--ro)to[ro]=0;to[ao]=so,to.t=this.t+ao+1,to.s=this.s,to.clamp()},l$3.prototype.rShiftTo=function(eo,to){to.s=this.s;var ro=Math.floor(eo/this.DB);if(ro>=this.t)to.t=0;else{var no=eo%this.DB,io=this.DB-no,oo=(1<<no)-1;to[0]=this[ro]>>no;for(var ao=ro+1;ao<this.t;++ao)to[ao-ro-1]|=(this[ao]&oo)<<io,to[ao-ro]=this[ao]>>no;no>0&&(to[this.t-ro-1]|=(this.s&oo)<<io),to.t=this.t-ro,to.clamp()}},l$3.prototype.subTo=function(eo,to){for(var ro=0,no=0,io=Math.min(eo.t,this.t);ro<io;)no+=this[ro]-eo[ro],to[ro++]=no&this.DM,no>>=this.DB;if(eo.t<this.t){for(no-=eo.s;ro<this.t;)no+=this[ro],to[ro++]=no&this.DM,no>>=this.DB;no+=this.s}else{for(no+=this.s;ro<eo.t;)no-=eo[ro],to[ro++]=no&this.DM,no>>=this.DB;no-=eo.s}to.s=no<0?-1:0,no<-1?to[ro++]=this.DV+no:no>0&&(to[ro++]=no),to.t=ro,to.clamp()},l$3.prototype.multiplyTo=function(eo,to){var ro=this.abs(),no=eo.abs(),io=ro.t;for(to.t=io+no.t;--io>=0;)to[io]=0;for(io=0;io<no.t;++io)to[io+ro.t]=ro.am(0,no[io],to,io,0,ro.t);to.s=0,to.clamp(),this.s!=eo.s&&l$3.ZERO.subTo(to,to)},l$3.prototype.squareTo=function(eo){for(var to=this.abs(),ro=eo.t=2*to.t;--ro>=0;)eo[ro]=0;for(ro=0;ro<to.t-1;++ro){var no=to.am(ro,to[ro],eo,2*ro,0,1);(eo[ro+to.t]+=to.am(ro+1,2*to[ro],eo,2*ro+1,no,to.t-ro-1))>=to.DV&&(eo[ro+to.t]-=to.DV,eo[ro+to.t+1]=1)}eo.t>0&&(eo[eo.t-1]+=to.am(ro,to[ro],eo,2*ro,0,1)),eo.s=0,eo.clamp()},l$3.prototype.divRemTo=function(eo,to,ro){var no=eo.abs();if(!(no.t<=0)){var io=this.abs();if(io.t<no.t)return to!=null&&to.fromInt(0),void(ro!=null&&this.copyTo(ro));ro==null&&(ro=h$4());var oo=h$4(),ao=this.s,so=eo.s,uo=this.DB-m$4(no[no.t-1]);uo>0?(no.lShiftTo(uo,oo),io.lShiftTo(uo,ro)):(no.copyTo(oo),io.copyTo(ro));var lo=oo.t,co=oo[lo-1];if(co!=0){var fo=co*(1<<this.F1)+(lo>1?oo[lo-2]>>this.F2:0),mo=this.FV/fo,go=(1<<this.F1)/fo,yo=1<<this.F2,vo=ro.t,Ao=vo-lo,ho=to==null?h$4():to;for(oo.dlShiftTo(Ao,ho),ro.compareTo(ho)>=0&&(ro[ro.t++]=1,ro.subTo(ho,ro)),l$3.ONE.dlShiftTo(lo,ho),ho.subTo(oo,oo);oo.t<lo;)oo[oo.t++]=0;for(;--Ao>=0;){var po=ro[--vo]==co?this.DM:Math.floor(ro[vo]*mo+(ro[vo-1]+yo)*go);if((ro[vo]+=oo.am(0,po,ro,Ao,0,lo))<po)for(oo.dlShiftTo(Ao,ho),ro.subTo(ho,ro);ro[vo]<--po;)ro.subTo(ho,ro)}to!=null&&(ro.drShiftTo(lo,to),ao!=so&&l$3.ZERO.subTo(to,to)),ro.t=lo,ro.clamp(),uo>0&&ro.rShiftTo(uo,ro),ao<0&&l$3.ZERO.subTo(ro,ro)}}},l$3.prototype.invDigit=function(){if(this.t<1)return 0;var eo=this[0];if((1&eo)==0)return 0;var to=3&eo;return(to=(to=(to=(to=to*(2-(15&eo)*to)&15)*(2-(255&eo)*to)&255)*(2-((65535&eo)*to&65535))&65535)*(2-eo*to%this.DV)%this.DV)>0?this.DV-to:-to},l$3.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},l$3.prototype.exp=function(eo,to){if(eo>4294967295||eo<1)return l$3.ONE;var ro=h$4(),no=h$4(),io=to.convert(this),oo=m$4(eo)-1;for(io.copyTo(ro);--oo>=0;)if(to.sqrTo(ro,no),(eo&1<<oo)>0)to.mulTo(no,io,ro);else{var ao=ro;ro=no,no=ao}return to.revert(ro)},l$3.prototype.toString=function(eo){if(this.s<0)return"-"+this.negate().toString(eo);var to;if(eo==16)to=4;else if(eo==8)to=3;else if(eo==2)to=1;else if(eo==32)to=5;else{if(eo!=4)return this.toRadix(eo);to=2}var ro,no=(1<<to)-1,io=!1,oo="",ao=this.t,so=this.DB-ao*this.DB%to;if(ao-- >0)for(so<this.DB&&(ro=this[ao]>>so)>0&&(io=!0,oo=M$1(ro));ao>=0;)so<to?(ro=(this[ao]&(1<<so)-1)<<to-so,ro|=this[--ao]>>(so+=this.DB-to)):(ro=this[ao]>>(so-=to)&no,so<=0&&(so+=this.DB,--ao)),ro>0&&(io=!0),io&&(oo+=M$1(ro));return io?oo:"0"},l$3.prototype.negate=function(){var eo=h$4();return l$3.ZERO.subTo(this,eo),eo},l$3.prototype.abs=function(){return this.s<0?this.negate():this},l$3.prototype.compareTo=function(eo){var to=this.s-eo.s;if(to!=0)return to;var ro=this.t;if((to=ro-eo.t)!=0)return this.s<0?-to:to;for(;--ro>=0;)if((to=this[ro]-eo[ro])!=0)return to;return 0},l$3.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+m$4(this[this.t-1]^this.s&this.DM)},l$3.prototype.mod=function(eo){var to=h$4();return this.abs().divRemTo(eo,null,to),this.s<0&&to.compareTo(l$3.ZERO)>0&&eo.subTo(to,to),to},l$3.prototype.modPowInt=function(eo,to){var ro;return ro=eo<256||to.isEven()?new v$3(to):new N$1(to),this.exp(eo,ro)},l$3.ZERO=y$3(0),l$3.ONE=y$3(1),j$1.prototype.convert=z$2,j$1.prototype.revert=z$2,j$1.prototype.mulTo=function(eo,to,ro){eo.multiplyTo(to,ro)},j$1.prototype.sqrTo=function(eo,to){eo.squareTo(to)},C$2.prototype.convert=function(eo){if(eo.s<0||eo.t>2*this.m.t)return eo.mod(this.m);if(eo.compareTo(this.m)<0)return eo;var to=h$4();return eo.copyTo(to),this.reduce(to),to},C$2.prototype.revert=function(eo){return eo},C$2.prototype.reduce=function(eo){for(eo.drShiftTo(this.m.t-1,this.r2),eo.t>this.m.t+1&&(eo.t=this.m.t+1,eo.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);eo.compareTo(this.r2)<0;)eo.dAddOffset(1,this.m.t+1);for(eo.subTo(this.r2,eo);eo.compareTo(this.m)>=0;)eo.subTo(this.m,eo)},C$2.prototype.mulTo=function(eo,to,ro){eo.multiplyTo(to,ro),this.reduce(ro)},C$2.prototype.sqrTo=function(eo,to){eo.squareTo(to),this.reduce(to)};var b$3=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],S$1=(1<<26)/b$3[b$3.length-1];l$3.prototype.chunkSize=function(eo){return Math.floor(Math.LN2*this.DB/Math.log(eo))},l$3.prototype.toRadix=function(eo){if(eo==null&&(eo=10),this.signum()==0||eo<2||eo>36)return"0";var to=this.chunkSize(eo),ro=Math.pow(eo,to),no=y$3(ro),io=h$4(),oo=h$4(),ao="";for(this.divRemTo(no,io,oo);io.signum()>0;)ao=(ro+oo.intValue()).toString(eo).substr(1)+ao,io.divRemTo(no,io,oo);return oo.intValue().toString(eo)+ao},l$3.prototype.fromRadix=function(eo,to){this.fromInt(0),to==null&&(to=10);for(var ro=this.chunkSize(to),no=Math.pow(to,ro),io=!1,oo=0,ao=0,so=0;so<eo.length;++so){var uo=f$4(eo,so);uo<0?eo.charAt(so)=="-"&&this.signum()==0&&(io=!0):(ao=to*ao+uo,++oo>=ro&&(this.dMultiply(no),this.dAddOffset(ao,0),oo=0,ao=0))}oo>0&&(this.dMultiply(Math.pow(to,oo)),this.dAddOffset(ao,0)),io&&l$3.ZERO.subTo(this,this)},l$3.prototype.fromNumber=function(eo,to,ro){if(typeof to=="number")if(eo<2)this.fromInt(1);else for(this.fromNumber(eo,ro),this.testBit(eo-1)||this.bitwiseTo(l$3.ONE.shiftLeft(eo-1),E$2,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(to);)this.dAddOffset(2,0),this.bitLength()>eo&&this.subTo(l$3.ONE.shiftLeft(eo-1),this);else{var no=new Array,io=7&eo;no.length=1+(eo>>3),to.nextBytes(no),io>0?no[0]&=(1<<io)-1:no[0]=0,this.fromString(no,256)}},l$3.prototype.bitwiseTo=function(eo,to,ro){var no,io,oo=Math.min(eo.t,this.t);for(no=0;no<oo;++no)ro[no]=to(this[no],eo[no]);if(eo.t<this.t){for(io=eo.s&this.DM,no=oo;no<this.t;++no)ro[no]=to(this[no],io);ro.t=this.t}else{for(io=this.s&this.DM,no=oo;no<eo.t;++no)ro[no]=to(io,eo[no]);ro.t=eo.t}ro.s=to(this.s,eo.s),ro.clamp()},l$3.prototype.changeBit=function(eo,to){var ro=l$3.ONE.shiftLeft(eo);return this.bitwiseTo(ro,to,ro),ro},l$3.prototype.addTo=function(eo,to){for(var ro=0,no=0,io=Math.min(eo.t,this.t);ro<io;)no+=this[ro]+eo[ro],to[ro++]=no&this.DM,no>>=this.DB;if(eo.t<this.t){for(no+=eo.s;ro<this.t;)no+=this[ro],to[ro++]=no&this.DM,no>>=this.DB;no+=this.s}else{for(no+=this.s;ro<eo.t;)no+=eo[ro],to[ro++]=no&this.DM,no>>=this.DB;no+=eo.s}to.s=no<0?-1:0,no>0?to[ro++]=no:no<-1&&(to[ro++]=this.DV+no),to.t=ro,to.clamp()},l$3.prototype.dMultiply=function(eo){this[this.t]=this.am(0,eo-1,this,0,0,this.t),++this.t,this.clamp()},l$3.prototype.dAddOffset=function(eo,to){if(eo!=0){for(;this.t<=to;)this[this.t++]=0;for(this[to]+=eo;this[to]>=this.DV;)this[to]-=this.DV,++to>=this.t&&(this[this.t++]=0),++this[to]}},l$3.prototype.multiplyLowerTo=function(eo,to,ro){var no,io=Math.min(this.t+eo.t,to);for(ro.s=0,ro.t=io;io>0;)ro[--io]=0;for(no=ro.t-this.t;io<no;++io)ro[io+this.t]=this.am(0,eo[io],ro,io,0,this.t);for(no=Math.min(eo.t,to);io<no;++io)this.am(0,eo[io],ro,io,0,to-io);ro.clamp()},l$3.prototype.multiplyUpperTo=function(eo,to,ro){--to;var no=ro.t=this.t+eo.t-to;for(ro.s=0;--no>=0;)ro[no]=0;for(no=Math.max(to-this.t,0);no<eo.t;++no)ro[this.t+no-to]=this.am(to-no,eo[no],ro,0,0,this.t+no-to);ro.clamp(),ro.drShiftTo(1,ro)},l$3.prototype.modInt=function(eo){if(eo<=0)return 0;var to=this.DV%eo,ro=this.s<0?eo-1:0;if(this.t>0)if(to==0)ro=this[0]%eo;else for(var no=this.t-1;no>=0;--no)ro=(to*ro+this[no])%eo;return ro},l$3.prototype.millerRabin=function(eo){var to=this.subtract(l$3.ONE),ro=to.getLowestSetBit();if(ro<=0)return!1;var no=to.shiftRight(ro);(eo=eo+1>>1)>b$3.length&&(eo=b$3.length);for(var io=h$4(),oo=0;oo<eo;++oo){io.fromInt(b$3[Math.floor(Math.random()*b$3.length)]);var ao=io.modPow(no,this);if(ao.compareTo(l$3.ONE)!=0&&ao.compareTo(to)!=0){for(var so=1;so++<ro&&ao.compareTo(to)!=0;)if((ao=ao.modPowInt(2,this)).compareTo(l$3.ONE)==0)return!1;if(ao.compareTo(to)!=0)return!1}}return!0},l$3.prototype.clone=function(){var eo=h$4();return this.copyTo(eo),eo},l$3.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},l$3.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},l$3.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},l$3.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},l$3.prototype.toByteArray=function(){var eo=this.t,to=new Array;to[0]=this.s;var ro,no=this.DB-eo*this.DB%8,io=0;if(eo-- >0)for(no<this.DB&&(ro=this[eo]>>no)!=(this.s&this.DM)>>no&&(to[io++]=ro|this.s<<this.DB-no);eo>=0;)no<8?(ro=(this[eo]&(1<<no)-1)<<8-no,ro|=this[--eo]>>(no+=this.DB-8)):(ro=this[eo]>>(no-=8)&255,no<=0&&(no+=this.DB,--eo)),(128&ro)!=0&&(ro|=-256),io==0&&(128&this.s)!=(128&ro)&&++io,(io>0||ro!=this.s)&&(to[io++]=ro);return to},l$3.prototype.equals=function(eo){return this.compareTo(eo)==0},l$3.prototype.min=function(eo){return this.compareTo(eo)<0?this:eo},l$3.prototype.max=function(eo){return this.compareTo(eo)>0?this:eo},l$3.prototype.and=function(eo){var to=h$4();return this.bitwiseTo(eo,D$1,to),to},l$3.prototype.or=function(eo){var to=h$4();return this.bitwiseTo(eo,E$2,to),to},l$3.prototype.xor=function(eo){var to=h$4();return this.bitwiseTo(eo,w$3,to),to},l$3.prototype.andNot=function(eo){var to=h$4();return this.bitwiseTo(eo,I$1,to),to},l$3.prototype.not=function(){for(var eo=h$4(),to=0;to<this.t;++to)eo[to]=this.DM&~this[to];return eo.t=this.t,eo.s=~this.s,eo},l$3.prototype.shiftLeft=function(eo){var to=h$4();return eo<0?this.rShiftTo(-eo,to):this.lShiftTo(eo,to),to},l$3.prototype.shiftRight=function(eo){var to=h$4();return eo<0?this.lShiftTo(-eo,to):this.rShiftTo(eo,to),to},l$3.prototype.getLowestSetBit=function(){for(var eo=0;eo<this.t;++eo)if(this[eo]!=0)return eo*this.DB+T(this[eo]);return this.s<0?this.t*this.DB:-1},l$3.prototype.bitCount=function(){for(var eo=0,to=this.s&this.DM,ro=0;ro<this.t;++ro)eo+=x$3(this[ro]^to);return eo},l$3.prototype.testBit=function(eo){var to=Math.floor(eo/this.DB);return to>=this.t?this.s!=0:(this[to]&1<<eo%this.DB)!=0},l$3.prototype.setBit=function(eo){return this.changeBit(eo,E$2)},l$3.prototype.clearBit=function(eo){return this.changeBit(eo,I$1)},l$3.prototype.flipBit=function(eo){return this.changeBit(eo,w$3)},l$3.prototype.add=function(eo){var to=h$4();return this.addTo(eo,to),to},l$3.prototype.subtract=function(eo){var to=h$4();return this.subTo(eo,to),to},l$3.prototype.multiply=function(eo){var to=h$4();return this.multiplyTo(eo,to),to},l$3.prototype.divide=function(eo){var to=h$4();return this.divRemTo(eo,to,null),to},l$3.prototype.remainder=function(eo){var to=h$4();return this.divRemTo(eo,null,to),to},l$3.prototype.divideAndRemainder=function(eo){var to=h$4(),ro=h$4();return this.divRemTo(eo,to,ro),new Array(to,ro)},l$3.prototype.modPow=function(eo,to){var ro,no,io=eo.bitLength(),oo=y$3(1);if(io<=0)return oo;ro=io<18?1:io<48?3:io<144?4:io<768?5:6,no=io<8?new v$3(to):to.isEven()?new C$2(to):new N$1(to);var ao=new Array,so=3,uo=ro-1,lo=(1<<ro)-1;if(ao[1]=no.convert(this),ro>1){var co=h$4();for(no.sqrTo(ao[1],co);so<=lo;)ao[so]=h$4(),no.mulTo(co,ao[so-2],ao[so]),so+=2}var fo,mo,go=eo.t-1,yo=!0,vo=h$4();for(io=m$4(eo[go])-1;go>=0;){for(io>=uo?fo=eo[go]>>io-uo&lo:(fo=(eo[go]&(1<<io+1)-1)<<uo-io,go>0&&(fo|=eo[go-1]>>this.DB+io-uo)),so=ro;(1&fo)==0;)fo>>=1,--so;if((io-=so)<0&&(io+=this.DB,--go),yo)ao[fo].copyTo(oo),yo=!1;else{for(;so>1;)no.sqrTo(oo,vo),no.sqrTo(vo,oo),so-=2;so>0?no.sqrTo(oo,vo):(mo=oo,oo=vo,vo=mo),no.mulTo(vo,ao[fo],oo)}for(;go>=0&&(eo[go]&1<<io)==0;)no.sqrTo(oo,vo),mo=oo,oo=vo,vo=mo,--io<0&&(io=this.DB-1,--go)}return no.revert(oo)},l$3.prototype.modInverse=function(eo){var to=eo.isEven();if(this.isEven()&&to||eo.signum()==0)return l$3.ZERO;for(var ro=eo.clone(),no=this.clone(),io=y$3(1),oo=y$3(0),ao=y$3(0),so=y$3(1);ro.signum()!=0;){for(;ro.isEven();)ro.rShiftTo(1,ro),to?(io.isEven()&&oo.isEven()||(io.addTo(this,io),oo.subTo(eo,oo)),io.rShiftTo(1,io)):oo.isEven()||oo.subTo(eo,oo),oo.rShiftTo(1,oo);for(;no.isEven();)no.rShiftTo(1,no),to?(ao.isEven()&&so.isEven()||(ao.addTo(this,ao),so.subTo(eo,so)),ao.rShiftTo(1,ao)):so.isEven()||so.subTo(eo,so),so.rShiftTo(1,so);ro.compareTo(no)>=0?(ro.subTo(no,ro),to&&io.subTo(ao,io),oo.subTo(so,oo)):(no.subTo(ro,no),to&&ao.subTo(io,ao),so.subTo(oo,so))}return no.compareTo(l$3.ONE)!=0?l$3.ZERO:so.compareTo(eo)>=0?so.subtract(eo):so.signum()<0?(so.addTo(eo,so),so.signum()<0?so.add(eo):so):so},l$3.prototype.pow=function(eo){return this.exp(eo,new j$1)},l$3.prototype.gcd=function(eo){var to=this.s<0?this.negate():this.clone(),ro=eo.s<0?eo.negate():eo.clone();if(to.compareTo(ro)<0){var no=to;to=ro,ro=no}var io=to.getLowestSetBit(),oo=ro.getLowestSetBit();if(oo<0)return to;for(io<oo&&(oo=io),oo>0&&(to.rShiftTo(oo,to),ro.rShiftTo(oo,ro));to.signum()>0;)(io=to.getLowestSetBit())>0&&to.rShiftTo(io,to),(io=ro.getLowestSetBit())>0&&ro.rShiftTo(io,ro),to.compareTo(ro)>=0?(to.subTo(ro,to),to.rShiftTo(1,to)):(ro.subTo(to,ro),ro.rShiftTo(1,ro));return oo>0&&ro.lShiftTo(oo,ro),ro},l$3.prototype.isProbablePrime=function(eo){var to,ro=this.abs();if(ro.t==1&&ro[0]<=b$3[b$3.length-1]){for(to=0;to<b$3.length;++to)if(ro[0]==b$3[to])return!0;return!1}if(ro.isEven())return!1;for(to=1;to<b$3.length;){for(var no=b$3[to],io=to+1;io<b$3.length&&no<S$1;)no*=b$3[io++];for(no=ro.modInt(no);to<io;)if(no%b$3[to++]==0)return!1}return ro.millerRabin(eo)},l$3.prototype.square=function(){var eo=h$4();return this.squareTo(eo),eo};/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */var L$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function O$1(eo){var to,ro,no="";for(to=0;to+3<=eo.length;to+=3)ro=parseInt(eo.substring(to,to+3),16),no+=L$1.charAt(ro>>6)+L$1.charAt(63&ro);for(to+1==eo.length?(ro=parseInt(eo.substring(to,to+1),16),no+=L$1.charAt(ro<<2)):to+2==eo.length&&(ro=parseInt(eo.substring(to,to+2),16),no+=L$1.charAt(ro>>2)+L$1.charAt((3&ro)<<4));(3&no.length)>0;)no+="=";return no}function B$1(eo){var to,ro,no,io="",oo=0;for(to=0;to<eo.length&&eo.charAt(to)!="=";++to)(no=L$1.indexOf(eo.charAt(to)))<0||(oo==0?(io+=M$1(no>>2),ro=3&no,oo=1):oo==1?(io+=M$1(ro<<2|no>>4),ro=15&no,oo=2):oo==2?(io+=M$1(ro),io+=M$1(no>>2),ro=3&no,oo=3):(io+=M$1(ro<<2|no>>4),io+=M$1(15&no),oo=0));return oo==1&&(io+=M$1(ro<<2)),io}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function Q(){this.i=0,this.j=0,this.S=new Array}Q.prototype.init=function(eo){var to,ro,no;for(to=0;to<256;++to)this.S[to]=to;for(ro=0,to=0;to<256;++to)ro=ro+this.S[to]+eo[to%eo.length]&255,no=this.S[to],this.S[to]=this.S[ro],this.S[ro]=no;this.i=0,this.j=0},Q.prototype.next=function(){var eo;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,eo=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=eo,this.S[eo+this.S[this.i]&255]};var k$3,P$1,U;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function R$1(){var eo;eo=new Date().getTime(),P$1[U++]^=255&eo,P$1[U++]^=eo>>8&255,P$1[U++]^=eo>>16&255,P$1[U++]^=eo>>24&255,U>=256&&(U-=256)}if(P$1==null){var _$2;if(P$1=new Array,U=0,typeof window!="undefined"&&(window.crypto!==void 0||window.msCrypto!==void 0)){var Y=window.crypto||window.msCrypto;if(Y.getRandomValues){var F$2=new Uint8Array(32);for(Y.getRandomValues(F$2),_$2=0;_$2<32;++_$2)P$1[U++]=F$2[_$2]}else if(typeof navigator!="undefined"&&navigator.appName=="Netscape"&&navigator.appVersion<"5"){var H$1=window.crypto.random(32);for(_$2=0;_$2<H$1.length;++_$2)P$1[U++]=255&H$1.charCodeAt(_$2)}}for(;U<256;)_$2=Math.floor(65536*Math.random()),P$1[U++]=_$2>>>8,P$1[U++]=255&_$2;U=0,R$1()}function V$1(){if(k$3==null){for(R$1(),(k$3=new Q).init(P$1),U=0;U<P$1.length;++U)P$1[U]=0;U=0}return k$3.next()}function G$1(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/ */function K(eo,to){return new l$3(eo,to)}function q$3(eo,to,ro){for(var no="",io=0;no.length<to;)no+=ro(String.fromCharCode.apply(String,eo.concat([(4278190080&io)>>24,(16711680&io)>>16,(65280&io)>>8,255&io]))),io+=1;return no}function W$1(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function X(eo,to,ro){for(var no="",io=0;no.length<to;)no+=ro(eo+String.fromCharCode.apply(String,[(4278190080&io)>>24,(16711680&io)>>16,(65280&io)>>8,255&io])),io+=1;return no}function Z(eo){for(var to="",ro=0;ro<eo.length;ro++){var no=eo[ro].toString(16);no.length==1&&(no="0"+no),to+=no}return to}function J(eo){return Z(function(to){for(var ro=new Array,no=0;no<to.length;no++)ro[no]=to.charCodeAt(no);return ro}(eo))}function $(eo){return eo.length%4==2?eo+="==":eo.length%4==3&&(eo+="="),eo=(eo=eo.replace(/-/g,"+")).replace(/_/g,"/")}function ee(eo){return eo.length%2==1&&(eo="0"+eo),function(to){return(to=(to=to.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}(O$1(eo))}function te(eo){return B$1($(eo))}function ie(eo){return function(to){return to.replace(/%/g,"")}(function(to){for(var ro=encodeURIComponent(to),no="",io=0;io<ro.length;io++)ro[io]=="%"?(no+=ro.substr(io,3),io+=2):no=no+"%"+J(ro[io]);return no}(eo))}function ne(eo){return decodeURIComponent(function(to){return to.replace(/(..)/g,"%$1")}(eo))}function re(eo){for(var to="",ro=0;ro<eo.length-1;ro+=2)to+=String.fromCharCode(parseInt(eo.substr(ro,2),16));return to}function se(eo){for(var to="",ro=0;ro<eo.length;ro++)to+=("0"+eo.charCodeAt(ro).toString(16)).slice(-2);return to}function oe(eo){var to=function(ro){return O$1(ro)}(eo).replace(/(.{64})/g,`$1\r
`);return to=to.replace(/\r\n$/,"")}function ae(eo,to){return"-----BEGIN "+to+`-----\r
`+oe(eo)+`\r
-----END `+to+`-----\r
`}function ue(eo,to){if(eo.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+to;return function(ro){return B$1(ro.replace(/[^0-9A-Za-z\/+=]*/g,""))}(eo=to!==void 0?(eo=eo.replace(new RegExp("^[^]*-----BEGIN "+to+"-----"),"")).replace(new RegExp("-----END "+to+"-----[^]*$"),""):(eo=eo.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function ce(eo){var to="malformed hex value";if(!eo.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw to;if(eo.length!=8)return eo.length==32?function(ro){if(!ro.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var no=(ro=ro.toLowerCase()).match(/.{1,4}/g),io=0;io<8;io++)no[io]=no[io].replace(/^0+/,""),no[io]==""&&(no[io]="0");var oo=(ro=":"+no.join(":")+":").match(/:(0:){2,}/g);if(oo===null)return ro.slice(1,-1);var ao="";for(io=0;io<oo.length;io++)oo[io].length>ao.length&&(ao=oo[io]);return(ro=ro.replace(ao,"::")).slice(1,-1)}(eo):eo;try{return parseInt(eo.substr(0,2),16)+"."+parseInt(eo.substr(2,2),16)+"."+parseInt(eo.substr(4,2),16)+"."+parseInt(eo.substr(6,2),16)}catch{throw to}}function Ae(eo){return eo.match(/.{4}/g).map(function(to){var ro=parseInt(to.substr(0,2),16),no=parseInt(to.substr(2),16);if(ro==0&no<128)return String.fromCharCode(no);if(ro<8){var io=128|63&no;return ne((192|(7&ro)<<3|(192&no)>>6).toString(16)+io.toString(16))}io=128|(15&ro)<<2|(192&no)>>6;var oo=128|63&no;return ne((224|(240&ro)>>4).toString(16)+io.toString(16)+oo.toString(16))}).join("")}function le(eo){return!(eo.length%2!=0||!eo.match(/^[0-9a-f]+$/)&&!eo.match(/^[0-9A-F]+$/))}function he(eo){return eo.length%2==1?"0"+eo:eo.substr(0,1)>"7"?"00"+eo:eo}G$1.prototype.nextBytes=function(eo){var to;for(to=0;to<eo.length;++to)eo[to]=V$1()},W$1.prototype.doPublic=function(eo){return eo.modPowInt(this.e,this.n)},W$1.prototype.setPublic=function(eo,to){if(this.isPublic=!0,this.isPrivate=!1,typeof eo!="string")this.n=eo,this.e=to;else{if(!(eo!=null&&to!=null&&eo.length>0&&to.length>0))throw"Invalid RSA public key";this.n=K(eo,16),this.e=parseInt(to,16)}},W$1.prototype.encrypt=function(eo){var to=function(io,oo){if(oo<io.length+11)throw"Message too long for RSA";for(var ao=new Array,so=io.length-1;so>=0&&oo>0;){var uo=io.charCodeAt(so--);uo<128?ao[--oo]=uo:uo>127&&uo<2048?(ao[--oo]=63&uo|128,ao[--oo]=uo>>6|192):(ao[--oo]=63&uo|128,ao[--oo]=uo>>6&63|128,ao[--oo]=uo>>12|224)}ao[--oo]=0;for(var lo=new G$1,co=new Array;oo>2;){for(co[0]=0;co[0]==0;)lo.nextBytes(co);ao[--oo]=co[0]}return ao[--oo]=2,ao[--oo]=0,new l$3(ao)}(eo,this.n.bitLength()+7>>3);if(to==null)return null;var ro=this.doPublic(to);if(ro==null)return null;var no=ro.toString(16);return(1&no.length)==0?no:"0"+no},W$1.prototype.encryptOAEP=function(eo,to,ro){var no=function(ao,so,uo,lo){var co=u$2.crypto.MessageDigest,fo=u$2.crypto.Util,mo=null;if(uo||(uo="sha1"),typeof uo=="string"&&(mo=co.getCanonicalAlgName(uo),lo=co.getHashLength(mo),uo=function(wo){return re(fo.hashHex(se(wo),mo))}),ao.length+2*lo+2>so)throw"Message too long for RSA";var go,yo="";for(go=0;go<so-ao.length-2*lo-2;go+=1)yo+="\0";var vo=uo("")+yo+""+ao,Ao=new Array(lo);new G$1().nextBytes(Ao);var ho=q$3(Ao,vo.length,uo),po=[];for(go=0;go<vo.length;go+=1)po[go]=vo.charCodeAt(go)^ho.charCodeAt(go);var Mo=q$3(po,Ao.length,uo),xo=[0];for(go=0;go<Ao.length;go+=1)xo[go+1]=Ao[go]^Mo.charCodeAt(go);return new l$3(xo.concat(po))}(eo,this.n.bitLength()+7>>3,to,ro);if(no==null)return null;var io=this.doPublic(no);if(io==null)return null;var oo=io.toString(16);return(1&oo.length)==0?oo:"0"+oo},W$1.prototype.type="RSA",W$1.prototype.doPrivate=function(eo){if(this.p==null||this.q==null)return eo.modPow(this.d,this.n);for(var to=eo.mod(this.p).modPow(this.dmp1,this.p),ro=eo.mod(this.q).modPow(this.dmq1,this.q);to.compareTo(ro)<0;)to=to.add(this.p);return to.subtract(ro).multiply(this.coeff).mod(this.p).multiply(this.q).add(ro)},W$1.prototype.setPrivate=function(eo,to,ro){if(this.isPrivate=!0,typeof eo!="string")this.n=eo,this.e=to,this.d=ro;else{if(!(eo!=null&&to!=null&&eo.length>0&&to.length>0))throw"Invalid RSA private key";this.n=K(eo,16),this.e=parseInt(to,16),this.d=K(ro,16)}},W$1.prototype.setPrivateEx=function(eo,to,ro,no,io,oo,ao,so){if(this.isPrivate=!0,this.isPublic=!1,eo==null)throw"RSASetPrivateEx N == null";if(to==null)throw"RSASetPrivateEx E == null";if(eo.length==0)throw"RSASetPrivateEx N.length == 0";if(to.length==0)throw"RSASetPrivateEx E.length == 0";if(!(eo!=null&&to!=null&&eo.length>0&&to.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=K(eo,16),this.e=parseInt(to,16),this.d=K(ro,16),this.p=K(no,16),this.q=K(io,16),this.dmp1=K(oo,16),this.dmq1=K(ao,16),this.coeff=K(so,16)},W$1.prototype.generate=function(eo,to){var ro=new G$1,no=eo>>1;this.e=parseInt(to,16);for(var io=new l$3(to,16);;){for(;this.p=new l$3(eo-no,1,ro),this.p.subtract(l$3.ONE).gcd(io).compareTo(l$3.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new l$3(no,1,ro),this.q.subtract(l$3.ONE).gcd(io).compareTo(l$3.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var oo=this.p;this.p=this.q,this.q=oo}var ao=this.p.subtract(l$3.ONE),so=this.q.subtract(l$3.ONE),uo=ao.multiply(so);if(uo.gcd(io).compareTo(l$3.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==eo)){this.d=io.modInverse(uo),this.dmp1=this.d.mod(ao),this.dmq1=this.d.mod(so),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0},W$1.prototype.decrypt=function(eo){if(eo.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var to=K(eo,16),ro=this.doPrivate(to);return ro==null?null:function(no,io){for(var oo=no.toByteArray(),ao=0;ao<oo.length&&oo[ao]==0;)++ao;if(oo.length-ao!=io-1||oo[ao]!=2)return null;for(++ao;oo[ao]!=0;)if(++ao>=oo.length)return null;for(var so="";++ao<oo.length;){var uo=255&oo[ao];uo<128?so+=String.fromCharCode(uo):uo>191&&uo<224?(so+=String.fromCharCode((31&uo)<<6|63&oo[ao+1]),++ao):(so+=String.fromCharCode((15&uo)<<12|(63&oo[ao+1])<<6|63&oo[ao+2]),ao+=2)}return so}(ro,this.n.bitLength()+7>>3)},W$1.prototype.decryptOAEP=function(eo,to,ro){if(eo.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var no=K(eo,16),io=this.doPrivate(no);return io==null?null:function(oo,ao,so,uo){var lo=u$2.crypto.MessageDigest,co=u$2.crypto.Util,fo=null;for(so||(so="sha1"),typeof so=="string"&&(fo=lo.getCanonicalAlgName(so),uo=lo.getHashLength(fo),so=function(xo){return re(co.hashHex(se(xo),fo))}),oo=oo.toByteArray(),mo=0;mo<oo.length;mo+=1)oo[mo]&=255;for(;oo.length<ao;)oo.unshift(0);if((oo=String.fromCharCode.apply(String,oo)).length<2*uo+2)throw"Cipher too short";var mo,go=oo.substr(1,uo),yo=oo.substr(uo+1),vo=X(yo,uo,so),Ao=[];for(mo=0;mo<go.length;mo+=1)Ao[mo]=go.charCodeAt(mo)^vo.charCodeAt(mo);var ho=X(String.fromCharCode.apply(String,Ao),oo.length-uo,so),po=[];for(mo=0;mo<yo.length;mo+=1)po[mo]=yo.charCodeAt(mo)^ho.charCodeAt(mo);if((po=String.fromCharCode.apply(String,po)).substr(0,uo)!==so(""))throw"Hash mismatch";var Mo=(po=po.substr(uo)).indexOf("");if((Mo!=-1?po.substr(0,Mo).lastIndexOf("\0"):-1)+1!=Mo)throw"Malformed data";return po.substr(Mo+1)}(io,this.n.bitLength()+7>>3,to,ro)},u$2.lang!==void 0&&u$2.lang||(u$2.lang={}),u$2.lang.String=function(){},u$2.lang.String.isInteger=function(eo){return!!eo.match(/^[0-9]+$/)||!!eo.match(/^-[0-9]+$/)},u$2.lang.String.isHex=function(eo){return le(eo)},u$2.lang.String.isBase64=function(eo){return!(!(eo=eo.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||eo.length%4!=0)},u$2.lang.String.isBase64URL=function(eo){return!eo.match(/[+/=]/)&&(eo=$(eo),u$2.lang.String.isBase64(eo))},u$2.lang.String.isIntegerArray=function(eo){return!!(eo=eo.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},u$2.lang.String.isPrintable=function(eo){return eo.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},u$2.lang.String.isIA5=function(eo){return eo.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},u$2.lang.String.isMail=function(eo){return eo.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var de=function(eo,to,ro){return ro==null&&(ro="0"),eo.length>=to?eo:new Array(to-eo.length+1).join(ro)+eo};function ge(eo,to){var ro=function(){};ro.prototype=to.prototype,eo.prototype=new ro,eo.prototype.constructor=eo,eo.superclass=to.prototype,to.prototype.constructor==Object.prototype.constructor&&(to.prototype.constructor=to)}u$2.crypto!==void 0&&u$2.crypto||(u$2.crypto={}),u$2.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:A$3.algo.MD5,sha1:A$3.algo.SHA1,sha224:A$3.algo.SHA224,sha256:A$3.algo.SHA256,sha384:A$3.algo.SHA384,sha512:A$3.algo.SHA512,ripemd160:A$3.algo.RIPEMD160},this.getDigestInfoHex=function(eo,to){if(this.DIGESTINFOHEAD[to]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+to;return this.DIGESTINFOHEAD[to]+eo},this.getPaddedDigestInfoHex=function(eo,to,ro){var no=this.getDigestInfoHex(eo,to),io=ro/4;if(no.length+22>io)throw"key is too short for SigAlg: keylen="+ro+","+to;for(var oo="0001",ao="00"+no,so="",uo=io-oo.length-ao.length,lo=0;lo<uo;lo+=2)so+="ff";return oo+so+ao},this.hashString=function(eo,to){return new u$2.crypto.MessageDigest({alg:to}).digestString(eo)},this.hashHex=function(eo,to){return new u$2.crypto.MessageDigest({alg:to}).digestHex(eo)},this.sha1=function(eo){return this.hashString(eo,"sha1")},this.sha256=function(eo){return this.hashString(eo,"sha256")},this.sha256Hex=function(eo){return this.hashHex(eo,"sha256")},this.sha512=function(eo){return this.hashString(eo,"sha512")},this.sha512Hex=function(eo){return this.hashHex(eo,"sha512")},this.isKey=function(eo){return eo instanceof W$1||eo instanceof u$2.crypto.DSA||eo instanceof u$2.crypto.ECDSA}},u$2.crypto.Util.md5=function(eo){return new u$2.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(eo)},u$2.crypto.Util.ripemd160=function(eo){return new u$2.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(eo)},u$2.crypto.Util.SECURERANDOMGEN=new G$1,u$2.crypto.Util.getRandomHexOfNbytes=function(eo){var to=new Array(eo);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(to),Z(to)},u$2.crypto.Util.getRandomBigIntegerOfNbytes=function(eo){return new l$3(u$2.crypto.Util.getRandomHexOfNbytes(eo),16)},u$2.crypto.Util.getRandomHexOfNbits=function(eo){var to=eo%8,ro=new Array((eo-to)/8+1);return u$2.crypto.Util.SECURERANDOMGEN.nextBytes(ro),ro[0]=(255<<to&255^255)&ro[0],Z(ro)},u$2.crypto.Util.getRandomBigIntegerOfNbits=function(eo){return new l$3(u$2.crypto.Util.getRandomHexOfNbits(eo),16)},u$2.crypto.Util.getRandomBigIntegerZeroToMax=function(eo){for(var to=eo.bitLength();;){var ro=u$2.crypto.Util.getRandomBigIntegerOfNbits(to);if(eo.compareTo(ro)!=-1)return ro}},u$2.crypto.Util.getRandomBigIntegerMinToMax=function(eo,to){var ro=eo.compareTo(to);if(ro==1)throw"biMin is greater than biMax";if(ro==0)return eo;var no=to.subtract(eo);return u$2.crypto.Util.getRandomBigIntegerZeroToMax(no).add(eo)},u$2.crypto.MessageDigest=function(eo){this.setAlgAndProvider=function(to,ro){if((to=u$2.crypto.MessageDigest.getCanonicalAlgName(to))!==null&&ro===void 0&&(ro=u$2.crypto.Util.DEFAULTPROVIDER[to]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(to)!=-1&&ro=="cryptojs"){try{this.md=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[to].create()}catch(no){throw"setAlgAndProvider hash alg set fail alg="+to+"/"+no}this.updateString=function(no){this.md.update(no)},this.updateHex=function(no){var io=A$3.enc.Hex.parse(no);this.md.update(io)},this.digest=function(){return this.md.finalize().toString(A$3.enc.Hex)},this.digestString=function(no){return this.updateString(no),this.digest()},this.digestHex=function(no){return this.updateHex(no),this.digest()}}if(":sha256:".indexOf(to)!=-1&&ro=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(no){throw"setAlgAndProvider hash alg set fail alg="+to+"/"+no}this.updateString=function(no){this.md.update(no)},this.updateHex=function(no){var io=sjcl.codec.hex.toBits(no);this.md.update(io)},this.digest=function(){var no=this.md.finalize();return sjcl.codec.hex.fromBits(no)},this.digestString=function(no){return this.updateString(no),this.digest()},this.digestHex=function(no){return this.updateHex(no),this.digest()}}},this.updateString=function(to){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(to){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(to){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(to){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},eo!==void 0&&eo.alg!==void 0&&(this.algName=eo.alg,eo.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},u$2.crypto.MessageDigest.getCanonicalAlgName=function(eo){return typeof eo=="string"&&(eo=(eo=eo.toLowerCase()).replace(/-/,"")),eo},u$2.crypto.MessageDigest.getHashLength=function(eo){var to=u$2.crypto.MessageDigest,ro=to.getCanonicalAlgName(eo);if(to.HASHLENGTH[ro]===void 0)throw"not supported algorithm: "+eo;return to.HASHLENGTH[ro]},u$2.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},u$2.crypto.Mac=function(eo){this.setAlgAndProvider=function(to,ro){if((to=to.toLowerCase())==null&&(to="hmacsha1"),(to=to.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+to;ro===void 0&&(ro=u$2.crypto.Util.DEFAULTPROVIDER[to]),this.algProv=to+"/"+ro;var no=to.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(no)!=-1&&ro=="cryptojs"){try{var io=u$2.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[no];this.mac=A$3.algo.HMAC.create(io,this.pass)}catch(oo){throw"setAlgAndProvider hash alg set fail hashAlg="+no+"/"+oo}this.updateString=function(oo){this.mac.update(oo)},this.updateHex=function(oo){var ao=A$3.enc.Hex.parse(oo);this.mac.update(ao)},this.doFinal=function(){return this.mac.finalize().toString(A$3.enc.Hex)},this.doFinalString=function(oo){return this.updateString(oo),this.doFinal()},this.doFinalHex=function(oo){return this.updateHex(oo),this.doFinal()}}},this.updateString=function(to){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(to){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(to){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(to){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(to){if(typeof to=="string"){var ro=to;return to.length%2!=1&&to.match(/^[0-9A-Fa-f]+$/)||(ro=se(to)),void(this.pass=A$3.enc.Hex.parse(ro))}if(typeof to!="object")throw"KJUR.crypto.Mac unsupported password type: "+to;if(ro=null,to.hex!==void 0){if(to.hex.length%2!=0||!to.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+to.hex;ro=to.hex}if(to.utf8!==void 0&&(ro=ie(to.utf8)),to.rstr!==void 0&&(ro=se(to.rstr)),to.b64!==void 0&&(ro=B$1(to.b64)),to.b64u!==void 0&&(ro=te(to.b64u)),ro==null)throw"KJUR.crypto.Mac unsupported password type: "+to;this.pass=A$3.enc.Hex.parse(ro)},eo!==void 0&&(eo.pass!==void 0&&this.setPassword(eo.pass),eo.alg!==void 0&&(this.algName=eo.alg,eo.prov===void 0&&(this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},u$2.crypto.Signature=function(eo){var to=null;if(this._setAlgNames=function(){var ro=this.algName.match(/^(.+)with(.+)$/);ro&&(this.mdAlgName=ro[1].toLowerCase(),this.pubkeyAlgName=ro[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(ro,no){for(var io="",oo=no/4-ro.length,ao=0;ao<oo;ao++)io+="0";return io+ro},this.setAlgAndProvider=function(ro,no){if(this._setAlgNames(),no!="cryptojs/jsrsa")throw new Error("provider not supported: "+no);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new u$2.crypto.MessageDigest({alg:this.mdAlgName})}catch(io){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+io)}this.init=function(io,oo){var ao=null;try{ao=oo===void 0?Ee.getKey(io):Ee.getKey(io,oo)}catch(so){throw"init failed:"+so}if(ao.isPrivate===!0)this.prvKey=ao,this.state="SIGN";else{if(ao.isPublic!==!0)throw"init failed.:"+ao;this.pubKey=ao,this.state="VERIFY"}},this.updateString=function(io){this.md.updateString(io)},this.updateHex=function(io){this.md.updateHex(io)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.prvKey=new u$2.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof W$1&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof W$1&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof u$2.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof u$2.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(io){return this.updateString(io),this.sign()},this.signHex=function(io){return this.updateHex(io),this.sign()},this.verify=function(io){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&u$2.crypto.ECDSA!==void 0&&(this.pubKey=new u$2.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof W$1&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,io,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof W$1&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,io);if(u$2.crypto.ECDSA!==void 0&&this.pubKey instanceof u$2.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,io);if(u$2.crypto.DSA!==void 0&&this.pubKey instanceof u$2.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,io);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(ro,no){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(ro){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(ro){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(ro){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(ro){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(ro){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=eo,eo!==void 0&&(eo.alg!==void 0&&(this.algName=eo.alg,eo.prov===void 0?this.provName=u$2.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=eo.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),eo.psssaltlen!==void 0&&(this.pssSaltLen=eo.psssaltlen),eo.prvkeypem!==void 0)){if(eo.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{to=Ee.getKey(eo.prvkeypem),this.init(to)}catch(ro){throw"fatal error to load pem private key: "+ro}}},u$2.crypto.Cipher=function(eo){},u$2.crypto.Cipher.encrypt=function(eo,to,ro){if(to instanceof W$1&&to.isPublic){var no=u$2.crypto.Cipher.getAlgByKeyAndName(to,ro);if(no==="RSA")return to.encrypt(eo);if(no==="RSAOAEP")return to.encryptOAEP(eo,"sha1");var io=no.match(/^RSAOAEP(\d+)$/);if(io!==null)return to.encryptOAEP(eo,"sha"+io[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+ro}throw"Cipher.encrypt: unsupported key or algorithm"},u$2.crypto.Cipher.decrypt=function(eo,to,ro){if(to instanceof W$1&&to.isPrivate){var no=u$2.crypto.Cipher.getAlgByKeyAndName(to,ro);if(no==="RSA")return to.decrypt(eo);if(no==="RSAOAEP")return to.decryptOAEP(eo,"sha1");var io=no.match(/^RSAOAEP(\d+)$/);if(io!==null)return to.decryptOAEP(eo,"sha"+io[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+ro}throw"Cipher.decrypt: unsupported key or algorithm"},u$2.crypto.Cipher.getAlgByKeyAndName=function(eo,to){if(eo instanceof W$1){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(to)!=-1)return to;if(to==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+to}throw"getAlgByKeyAndName: not supported algorithm name: "+to},u$2.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};var pe,Me,fe,ye,me,ve,Ne,De,Ee=(pe=function(eo,to,ro){return Me(A$3.AES,eo,to,ro)},Me=function(eo,to,ro,no){var io=A$3.enc.Hex.parse(to),oo=A$3.enc.Hex.parse(ro),ao=A$3.enc.Hex.parse(no),so={};so.key=oo,so.iv=ao,so.ciphertext=io;var uo=eo.decrypt(so,oo,{iv:ao});return A$3.enc.Hex.stringify(uo)},fe=function(eo,to,ro){return ye(A$3.AES,eo,to,ro)},ye=function(eo,to,ro,no){var io=A$3.enc.Hex.parse(to),oo=A$3.enc.Hex.parse(ro),ao=A$3.enc.Hex.parse(no),so=eo.encrypt(io,oo,{iv:ao}),uo=A$3.enc.Hex.parse(so.toString());return A$3.enc.Base64.stringify(uo)},me={"AES-256-CBC":{proc:pe,eproc:fe,keylen:32,ivlen:16},"AES-192-CBC":{proc:pe,eproc:fe,keylen:24,ivlen:16},"AES-128-CBC":{proc:pe,eproc:fe,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(eo,to,ro){return Me(A$3.TripleDES,eo,to,ro)},eproc:function(eo,to,ro){return ye(A$3.TripleDES,eo,to,ro)},keylen:24,ivlen:8},"DES-CBC":{proc:function(eo,to,ro){return Me(A$3.DES,eo,to,ro)},eproc:function(eo,to,ro){return ye(A$3.DES,eo,to,ro)},keylen:8,ivlen:8}},ve=function(eo){var to={},ro=eo.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));ro&&(to.cipher=ro[1],to.ivsalt=ro[2]);var no=eo.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));no&&(to.type=no[1]);var io=-1,oo=0;eo.indexOf(`\r
\r
`)!=-1&&(io=eo.indexOf(`\r
\r
`),oo=2),eo.indexOf(`

`)!=-1&&(io=eo.indexOf(`

`),oo=1);var ao=eo.indexOf("-----END");if(io!=-1&&ao!=-1){var so=eo.substring(io+2*oo,ao-oo);so=so.replace(/\s+/g,""),to.data=so}return to},Ne=function(eo,to,ro){for(var no=ro.substring(0,16),io=A$3.enc.Hex.parse(no),oo=A$3.enc.Utf8.parse(to),ao=me[eo].keylen+me[eo].ivlen,so="",uo=null;;){var lo=A$3.algo.MD5.create();if(uo!=null&&lo.update(uo),lo.update(oo),lo.update(io),uo=lo.finalize(),(so+=A$3.enc.Hex.stringify(uo)).length>=2*ao)break}var co={};return co.keyhex=so.substr(0,2*me[eo].keylen),co.ivhex=so.substr(2*me[eo].keylen,2*me[eo].ivlen),co},De=function(eo,to,ro,no){var io=A$3.enc.Base64.parse(eo),oo=A$3.enc.Hex.stringify(io);return(0,me[to].proc)(oo,ro,no)},{version:"1.0.0",parsePKCS5PEM:function(eo){return ve(eo)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(eo,to,ro){return Ne(eo,to,ro)},decryptKeyB64:function(eo,to,ro,no){return De(eo,to,ro,no)},getDecryptedKeyHex:function(eo,to){var ro=ve(eo);ro.type;var no=ro.cipher,io=ro.ivsalt,oo=ro.data,ao=Ne(no,to,io).keyhex;return De(oo,no,ao,io)},getEncryptedPKCS5PEMFromPrvKeyHex:function(eo,to,ro,no,io){var oo="";if(no!==void 0&&no!=null||(no="AES-256-CBC"),me[no]===void 0)throw"KEYUTIL unsupported algorithm: "+no;io!==void 0&&io!=null||(io=function(so){var uo=A$3.lib.WordArray.random(so);return A$3.enc.Hex.stringify(uo)}(me[no].ivlen).toUpperCase());var ao=function(so,uo,lo,co){return(0,me[uo].eproc)(so,lo,co)}(to,no,Ne(no,ro,io).keyhex,io);return oo="-----BEGIN "+eo+` PRIVATE KEY-----\r
`,oo+=`Proc-Type: 4,ENCRYPTED\r
`,oo+="DEK-Info: "+no+","+io+`\r
`,oo+=`\r
`,oo+=ao.replace(/(.{64})/g,`$1\r
`),oo+=`\r
-----END `+eo+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(eo){var to=we,ro=to.getChildIdx,no=to.getV,io={},oo=ro(eo,0);if(oo.length!=2)throw"malformed format: SEQUENCE(0).items != 2: "+oo.length;io.ciphertext=no(eo,oo[1]);var ao=ro(eo,oo[0]);if(ao.length!=2)throw"malformed format: SEQUENCE(0.0).items != 2: "+ao.length;if(no(eo,ao[0])!="2a864886f70d01050d")throw"this only supports pkcs5PBES2";var so=ro(eo,ao[1]);if(ao.length!=2)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+so.length;var uo=ro(eo,so[1]);if(uo.length!=2)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+uo.length;if(no(eo,uo[0])!="2a864886f70d0307")throw"this only supports TripleDES";io.encryptionSchemeAlg="TripleDES",io.encryptionSchemeIV=no(eo,uo[1]);var lo=ro(eo,so[0]);if(lo.length!=2)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+lo.length;if(no(eo,lo[0])!="2a864886f70d01050c")throw"this only supports pkcs5PBKDF2";var co=ro(eo,lo[1]);if(co.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+co.length;io.pbkdf2Salt=no(eo,co[0]);var fo=no(eo,co[1]);try{io.pbkdf2Iter=parseInt(fo,16)}catch{throw"malformed format pbkdf2Iter: "+fo}return io},getPBKDF2KeyHexFromParam:function(eo,to){var ro=A$3.enc.Hex.parse(eo.pbkdf2Salt),no=eo.pbkdf2Iter,io=A$3.PBKDF2(to,ro,{keySize:6,iterations:no});return A$3.enc.Hex.stringify(io)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(eo,to){var ro=ue(eo,"ENCRYPTED PRIVATE KEY"),no=this.parseHexOfEncryptedPKCS8(ro),io=Ee.getPBKDF2KeyHexFromParam(no,to),oo={};oo.ciphertext=A$3.enc.Hex.parse(no.ciphertext);var ao=A$3.enc.Hex.parse(io),so=A$3.enc.Hex.parse(no.encryptionSchemeIV),uo=A$3.TripleDES.decrypt(oo,ao,{iv:so});return A$3.enc.Hex.stringify(uo)},getKeyFromEncryptedPKCS8PEM:function(eo,to){var ro=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(eo,to);return this.getKeyFromPlainPrivatePKCS8Hex(ro)},parsePlainPrivatePKCS8Hex:function(eo){var to=we,ro=to.getChildIdx,no=to.getV,io={algparam:null};if(eo.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var oo=ro(eo,0);if(oo.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(eo.substr(oo[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var ao=ro(eo,oo[1]);if(ao.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(eo.substr(ao[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(io.algoid=no(eo,ao[0]),eo.substr(ao[1],2)=="06"&&(io.algparam=no(eo,ao[1])),eo.substr(oo[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return io.keyidx=to.getVidx(eo,oo[2]),io},getKeyFromPlainPrivatePKCS8PEM:function(eo){var to=ue(eo,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(to)},getKeyFromPlainPrivatePKCS8Hex:function(eo){var to,ro=this.parsePlainPrivatePKCS8Hex(eo);if(ro.algoid=="2a864886f70d010101")to=new W$1;else if(ro.algoid=="2a8648ce380401")to=new u$2.crypto.DSA;else{if(ro.algoid!="2a8648ce3d0201")throw"unsupported private key algorithm";to=new u$2.crypto.ECDSA}return to.readPKCS8PrvKeyHex(eo),to},_getKeyFromPublicPKCS8Hex:function(eo){var to,ro=we.getVbyList(eo,0,[0,0],"06");if(ro==="2a864886f70d010101")to=new W$1;else if(ro==="2a8648ce380401")to=new u$2.crypto.DSA;else{if(ro!=="2a8648ce3d0201")throw"unsupported PKCS#8 public key hex";to=new u$2.crypto.ECDSA}return to.readPKCS8PubKeyHex(eo),to},parsePublicRawRSAKeyHex:function(eo){var to=we,ro=to.getChildIdx,no=to.getV,io={};if(eo.substr(0,2)!="30")throw"malformed RSA key(code:001)";var oo=ro(eo,0);if(oo.length!=2)throw"malformed RSA key(code:002)";if(eo.substr(oo[0],2)!="02")throw"malformed RSA key(code:003)";if(io.n=no(eo,oo[0]),eo.substr(oo[1],2)!="02")throw"malformed RSA key(code:004)";return io.e=no(eo,oo[1]),io},parsePublicPKCS8Hex:function(eo){var to=we,ro=to.getChildIdx,no=to.getV,io={algparam:null},oo=ro(eo,0);if(oo.length!=2)throw"outer DERSequence shall have 2 elements: "+oo.length;var ao=oo[0];if(eo.substr(ao,2)!="30")throw"malformed PKCS8 public key(code:001)";var so=ro(eo,ao);if(so.length!=2)throw"malformed PKCS8 public key(code:002)";if(eo.substr(so[0],2)!="06")throw"malformed PKCS8 public key(code:003)";if(io.algoid=no(eo,so[0]),eo.substr(so[1],2)=="06"?io.algparam=no(eo,so[1]):eo.substr(so[1],2)=="30"&&(io.algparam={},io.algparam.p=to.getVbyList(eo,so[1],[0],"02"),io.algparam.q=to.getVbyList(eo,so[1],[1],"02"),io.algparam.g=to.getVbyList(eo,so[1],[2],"02")),eo.substr(oo[1],2)!="03")throw"malformed PKCS8 public key(code:004)";return io.key=no(eo,oo[1]).substr(2),io}});Ee.getKey=function(eo,to,ro){var no=(Ao=we).getChildIdx;Ao.getV;var io=Ao.getVbyList,oo=u$2.crypto,ao=oo.ECDSA,so=oo.DSA,uo=W$1,lo=ue,co=Ee;if(uo!==void 0&&eo instanceof uo||ao!==void 0&&eo instanceof ao||so!==void 0&&eo instanceof so)return eo;if(eo.curve!==void 0&&eo.xy!==void 0&&eo.d===void 0)return new ao({pub:eo.xy,curve:eo.curve});if(eo.curve!==void 0&&eo.d!==void 0)return new ao({prv:eo.d,curve:eo.curve});if(eo.kty===void 0&&eo.n!==void 0&&eo.e!==void 0&&eo.d===void 0)return(Co=new uo).setPublic(eo.n,eo.e),Co;if(eo.kty===void 0&&eo.n!==void 0&&eo.e!==void 0&&eo.d!==void 0&&eo.p!==void 0&&eo.q!==void 0&&eo.dp!==void 0&&eo.dq!==void 0&&eo.co!==void 0&&eo.qi===void 0)return(Co=new uo).setPrivateEx(eo.n,eo.e,eo.d,eo.p,eo.q,eo.dp,eo.dq,eo.co),Co;if(eo.kty===void 0&&eo.n!==void 0&&eo.e!==void 0&&eo.d!==void 0&&eo.p===void 0)return(Co=new uo).setPrivate(eo.n,eo.e,eo.d),Co;if(eo.p!==void 0&&eo.q!==void 0&&eo.g!==void 0&&eo.y!==void 0&&eo.x===void 0)return(Co=new so).setPublic(eo.p,eo.q,eo.g,eo.y),Co;if(eo.p!==void 0&&eo.q!==void 0&&eo.g!==void 0&&eo.y!==void 0&&eo.x!==void 0)return(Co=new so).setPrivate(eo.p,eo.q,eo.g,eo.y,eo.x),Co;if(eo.kty==="RSA"&&eo.n!==void 0&&eo.e!==void 0&&eo.d===void 0)return(Co=new uo).setPublic(te(eo.n),te(eo.e)),Co;if(eo.kty==="RSA"&&eo.n!==void 0&&eo.e!==void 0&&eo.d!==void 0&&eo.p!==void 0&&eo.q!==void 0&&eo.dp!==void 0&&eo.dq!==void 0&&eo.qi!==void 0)return(Co=new uo).setPrivateEx(te(eo.n),te(eo.e),te(eo.d),te(eo.p),te(eo.q),te(eo.dp),te(eo.dq),te(eo.qi)),Co;if(eo.kty==="RSA"&&eo.n!==void 0&&eo.e!==void 0&&eo.d!==void 0)return(Co=new uo).setPrivate(te(eo.n),te(eo.e),te(eo.d)),Co;if(eo.kty==="EC"&&eo.crv!==void 0&&eo.x!==void 0&&eo.y!==void 0&&eo.d===void 0){var fo=(Po=new ao({curve:eo.crv})).ecparams.keylen/4,mo="04"+("0000000000"+te(eo.x)).slice(-fo)+("0000000000"+te(eo.y)).slice(-fo);return Po.setPublicKeyHex(mo),Po}if(eo.kty==="EC"&&eo.crv!==void 0&&eo.x!==void 0&&eo.y!==void 0&&eo.d!==void 0){fo=(Po=new ao({curve:eo.crv})).ecparams.keylen/4,mo="04"+("0000000000"+te(eo.x)).slice(-fo)+("0000000000"+te(eo.y)).slice(-fo);var go=("0000000000"+te(eo.d)).slice(-fo);return Po.setPublicKeyHex(mo),Po.setPrivateKeyHex(go),Po}if(ro==="pkcs5prv"){var yo,vo=eo,Ao=we;if((yo=no(vo,0)).length===9)(Co=new uo).readPKCS5PrvKeyHex(vo);else if(yo.length===6)(Co=new so).readPKCS5PrvKeyHex(vo);else{if(!(yo.length>2&&vo.substr(yo[1],2)==="04"))throw"unsupported PKCS#1/5 hexadecimal key";(Co=new ao).readPKCS5PrvKeyHex(vo)}return Co}if(ro==="pkcs8prv")return Co=co.getKeyFromPlainPrivatePKCS8Hex(eo);if(ro==="pkcs8pub")return co._getKeyFromPublicPKCS8Hex(eo);if(ro==="x509pub")return je.getPublicKeyFromCertHex(eo);if(eo.indexOf("-END CERTIFICATE-",0)!=-1||eo.indexOf("-END X509 CERTIFICATE-",0)!=-1||eo.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return je.getPublicKeyFromCertPEM(eo);if(eo.indexOf("-END PUBLIC KEY-")!=-1){var ho=ue(eo,"PUBLIC KEY");return co._getKeyFromPublicPKCS8Hex(ho)}if(eo.indexOf("-END RSA PRIVATE KEY-")!=-1&&eo.indexOf("4,ENCRYPTED")==-1){var po=lo(eo,"RSA PRIVATE KEY");return co.getKey(po,null,"pkcs5prv")}if(eo.indexOf("-END DSA PRIVATE KEY-")!=-1&&eo.indexOf("4,ENCRYPTED")==-1){var Mo=io(Ro=lo(eo,"DSA PRIVATE KEY"),0,[1],"02"),xo=io(Ro,0,[2],"02"),wo=io(Ro,0,[3],"02"),bo=io(Ro,0,[4],"02"),_o=io(Ro,0,[5],"02");return(Co=new so).setPrivate(new l$3(Mo,16),new l$3(xo,16),new l$3(wo,16),new l$3(bo,16),new l$3(_o,16)),Co}if(eo.indexOf("-END EC PRIVATE KEY-")!=-1&&eo.indexOf("4,ENCRYPTED")==-1)return po=lo(eo,"EC PRIVATE KEY"),co.getKey(po,null,"pkcs5prv");if(eo.indexOf("-END PRIVATE KEY-")!=-1)return co.getKeyFromPlainPrivatePKCS8PEM(eo);if(eo.indexOf("-END RSA PRIVATE KEY-")!=-1&&eo.indexOf("4,ENCRYPTED")!=-1){var To=co.getDecryptedKeyHex(eo,to),No=new W$1;return No.readPKCS5PrvKeyHex(To),No}if(eo.indexOf("-END EC PRIVATE KEY-")!=-1&&eo.indexOf("4,ENCRYPTED")!=-1){var Po,Co=io(Ro=co.getDecryptedKeyHex(eo,to),0,[1],"04"),Do=io(Ro,0,[2,0],"06"),zo=io(Ro,0,[3,0],"03").substr(2);if(u$2.crypto.OID.oidhex2name[Do]===void 0)throw"undefined OID(hex) in KJUR.crypto.OID: "+Do;return(Po=new ao({curve:u$2.crypto.OID.oidhex2name[Do]})).setPublicKeyHex(zo),Po.setPrivateKeyHex(Co),Po.isPublic=!1,Po}if(eo.indexOf("-END DSA PRIVATE KEY-")!=-1&&eo.indexOf("4,ENCRYPTED")!=-1){var Ro;return Mo=io(Ro=co.getDecryptedKeyHex(eo,to),0,[1],"02"),xo=io(Ro,0,[2],"02"),wo=io(Ro,0,[3],"02"),bo=io(Ro,0,[4],"02"),_o=io(Ro,0,[5],"02"),(Co=new so).setPrivate(new l$3(Mo,16),new l$3(xo,16),new l$3(wo,16),new l$3(bo,16),new l$3(_o,16)),Co}if(eo.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return co.getKeyFromEncryptedPKCS8PEM(eo,to);throw new Error("not supported argument")},Ee.generateKeypair=function(eo,to){if(eo=="RSA"){var ro=to;(ao=new W$1).generate(ro,"10001"),ao.isPrivate=!0,ao.isPublic=!0;var no=new W$1,io=ao.n.toString(16),oo=ao.e.toString(16);return no.setPublic(io,oo),no.isPrivate=!1,no.isPublic=!0,(so={}).prvKeyObj=ao,so.pubKeyObj=no,so}if(eo=="EC"){var ao,so,uo=to,lo=new u$2.crypto.ECDSA({curve:uo}).generateKeyPairHex();return(ao=new u$2.crypto.ECDSA({curve:uo})).setPublicKeyHex(lo.ecpubhex),ao.setPrivateKeyHex(lo.ecprvhex),ao.isPrivate=!0,ao.isPublic=!1,(no=new u$2.crypto.ECDSA({curve:uo})).setPublicKeyHex(lo.ecpubhex),no.isPrivate=!1,no.isPublic=!0,(so={}).prvKeyObj=ao,so.pubKeyObj=no,so}throw"unknown algorithm: "+eo},Ee.getPEM=function(eo,to,ro,no,io,oo){var ao=u$2,so=ao.asn1,uo=so.DERObjectIdentifier,lo=so.DERInteger,co=so.ASN1Util.newObject,fo=so.x509.SubjectPublicKeyInfo,mo=ao.crypto,go=mo.DSA,yo=mo.ECDSA,vo=W$1;function Ao(Po){return co({seq:[{int:0},{int:{bigint:Po.n}},{int:Po.e},{int:{bigint:Po.d}},{int:{bigint:Po.p}},{int:{bigint:Po.q}},{int:{bigint:Po.dmp1}},{int:{bigint:Po.dmq1}},{int:{bigint:Po.coeff}}]})}function ho(Po){return co({seq:[{int:1},{octstr:{hex:Po.prvKeyHex}},{tag:["a0",!0,{oid:{name:Po.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Po.pubKeyHex}}]}]})}function po(Po){return co({seq:[{int:0},{int:{bigint:Po.p}},{int:{bigint:Po.q}},{int:{bigint:Po.g}},{int:{bigint:Po.y}},{int:{bigint:Po.x}}]})}if((vo!==void 0&&eo instanceof vo||go!==void 0&&eo instanceof go||yo!==void 0&&eo instanceof yo)&&eo.isPublic==1&&(to===void 0||to=="PKCS8PUB"))return ae(bo=new fo(eo).getEncodedHex(),"PUBLIC KEY");if(to=="PKCS1PRV"&&vo!==void 0&&eo instanceof vo&&(ro===void 0||ro==null)&&eo.isPrivate==1)return ae(bo=Ao(eo).getEncodedHex(),"RSA PRIVATE KEY");if(to=="PKCS1PRV"&&yo!==void 0&&eo instanceof yo&&(ro===void 0||ro==null)&&eo.isPrivate==1){var Mo=new uo({name:eo.curveName}).getEncodedHex(),xo=ho(eo).getEncodedHex(),wo="";return wo+=ae(Mo,"EC PARAMETERS"),wo+=ae(xo,"EC PRIVATE KEY")}if(to=="PKCS1PRV"&&go!==void 0&&eo instanceof go&&(ro===void 0||ro==null)&&eo.isPrivate==1)return ae(bo=po(eo).getEncodedHex(),"DSA PRIVATE KEY");if(to=="PKCS5PRV"&&vo!==void 0&&eo instanceof vo&&ro!==void 0&&ro!=null&&eo.isPrivate==1){var bo=Ao(eo).getEncodedHex();return no===void 0&&(no="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",bo,ro,no,oo)}if(to=="PKCS5PRV"&&yo!==void 0&&eo instanceof yo&&ro!==void 0&&ro!=null&&eo.isPrivate==1)return bo=ho(eo).getEncodedHex(),no===void 0&&(no="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",bo,ro,no,oo);if(to=="PKCS5PRV"&&go!==void 0&&eo instanceof go&&ro!==void 0&&ro!=null&&eo.isPrivate==1)return bo=po(eo).getEncodedHex(),no===void 0&&(no="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",bo,ro,no,oo);var _o=function(Po,Co){var Do=To(Po,Co);return new co({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Do.pbkdf2Salt}},{int:Do.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Do.encryptionSchemeIV}}]}]}]},{octstr:{hex:Do.ciphertext}}]}).getEncodedHex()},To=function(Po,Co){var Do=A$3.lib.WordArray.random(8),zo=A$3.lib.WordArray.random(8),Ro=A$3.PBKDF2(Co,Do,{keySize:6,iterations:100}),Lo=A$3.enc.Hex.parse(Po),$o=A$3.TripleDES.encrypt(Lo,Ro,{iv:zo})+"",jo={};return jo.ciphertext=$o,jo.pbkdf2Salt=A$3.enc.Hex.stringify(Do),jo.pbkdf2Iter=100,jo.encryptionSchemeAlg="DES-EDE3-CBC",jo.encryptionSchemeIV=A$3.enc.Hex.stringify(zo),jo};if(to=="PKCS8PRV"&&vo!=null&&eo instanceof vo&&eo.isPrivate==1){var No=Ao(eo).getEncodedHex();return bo=co({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:No}}]}).getEncodedHex(),ro===void 0||ro==null?ae(bo,"PRIVATE KEY"):ae(xo=_o(bo,ro),"ENCRYPTED PRIVATE KEY")}if(to=="PKCS8PRV"&&yo!==void 0&&eo instanceof yo&&eo.isPrivate==1)return No=new co({seq:[{int:1},{octstr:{hex:eo.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+eo.pubKeyHex}}]}]}).getEncodedHex(),bo=co({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:eo.curveName}}]},{octstr:{hex:No}}]}).getEncodedHex(),ro===void 0||ro==null?ae(bo,"PRIVATE KEY"):ae(xo=_o(bo,ro),"ENCRYPTED PRIVATE KEY");if(to=="PKCS8PRV"&&go!==void 0&&eo instanceof go&&eo.isPrivate==1)return No=new lo({bigint:eo.x}).getEncodedHex(),bo=co({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:eo.p}},{int:{bigint:eo.q}},{int:{bigint:eo.g}}]}]},{octstr:{hex:No}}]}).getEncodedHex(),ro===void 0||ro==null?ae(bo,"PRIVATE KEY"):ae(xo=_o(bo,ro),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ee.getKeyFromCSRPEM=function(eo){var to=ue(eo,"CERTIFICATE REQUEST");return Ee.getKeyFromCSRHex(to)},Ee.getKeyFromCSRHex=function(eo){var to=Ee.parseCSRHex(eo);return Ee.getKey(to.p8pubkeyhex,null,"pkcs8pub")},Ee.parseCSRHex=function(eo){var to=we,ro=to.getChildIdx,no=to.getTLV,io={},oo=eo;if(oo.substr(0,2)!="30")throw"malformed CSR(code:001)";var ao=ro(oo,0);if(ao.length<1)throw"malformed CSR(code:002)";if(oo.substr(ao[0],2)!="30")throw"malformed CSR(code:003)";var so=ro(oo,ao[0]);if(so.length<3)throw"malformed CSR(code:004)";return io.p8pubkeyhex=no(oo,so[2]),io},Ee.getKeyID=function(eo){var to=Ee,ro=we;typeof eo=="string"&&eo.indexOf("BEGIN ")!=-1&&(eo=to.getKey(eo));var no=ue(to.getPEM(eo)),io=ro.getIdxbyList(no,0,[1]),oo=ro.getV(no,io).substring(2);return u$2.crypto.Util.hashHex(oo,"sha1")},Ee.getJWKFromKey=function(eo){var to={};if(eo instanceof W$1&&eo.isPrivate)return to.kty="RSA",to.n=ee(eo.n.toString(16)),to.e=ee(eo.e.toString(16)),to.d=ee(eo.d.toString(16)),to.p=ee(eo.p.toString(16)),to.q=ee(eo.q.toString(16)),to.dp=ee(eo.dmp1.toString(16)),to.dq=ee(eo.dmq1.toString(16)),to.qi=ee(eo.coeff.toString(16)),to;if(eo instanceof W$1&&eo.isPublic)return to.kty="RSA",to.n=ee(eo.n.toString(16)),to.e=ee(eo.e.toString(16)),to;if(eo instanceof u$2.crypto.ECDSA&&eo.isPrivate){if((no=eo.getShortNISTPCurveName())!=="P-256"&&no!=="P-384")throw"unsupported curve name for JWT: "+no;var ro=eo.getPublicKeyXYHex();return to.kty="EC",to.crv=no,to.x=ee(ro.x),to.y=ee(ro.y),to.d=ee(eo.prvKeyHex),to}if(eo instanceof u$2.crypto.ECDSA&&eo.isPublic){var no;if((no=eo.getShortNISTPCurveName())!=="P-256"&&no!=="P-384")throw"unsupported curve name for JWT: "+no;return ro=eo.getPublicKeyXYHex(),to.kty="EC",to.crv=no,to.x=ee(ro.x),to.y=ee(ro.y),to}throw"not supported key object"},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.ASN1Util=new function(){this.integerToByteHex=function(eo){var to=eo.toString(16);return to.length%2==1&&(to="0"+to),to},this.bigIntToMinTwosComplementsHex=function(eo){var to=eo.toString(16);if(to.substr(0,1)!="-")to.length%2==1?to="0"+to:to.match(/^[0-7]/)||(to="00"+to);else{var ro=to.substr(1).length;ro%2==1?ro+=1:to.match(/^[0-7]/)||(ro+=2);for(var no="",io=0;io<ro;io++)no+="f";to=new l$3(no,16).xor(eo).add(l$3.ONE).toString(16).replace(/^-/,"")}return to},this.getPEMStringFromHex=function(eo,to){return ae(eo,to)},this.newObject=function(eo){var to=u$2.asn1,ro=to.ASN1Object,no=to.DERBoolean,io=to.DERInteger,oo=to.DERBitString,ao=to.DEROctetString,so=to.DERNull,uo=to.DERObjectIdentifier,lo=to.DEREnumerated,co=to.DERUTF8String,fo=to.DERNumericString,mo=to.DERPrintableString,go=to.DERTeletexString,yo=to.DERIA5String,vo=to.DERUTCTime,Ao=to.DERGeneralizedTime,ho=to.DERVisibleString,po=to.DERBMPString,Mo=to.DERSequence,xo=to.DERSet,wo=to.DERTaggedObject,bo=to.ASN1Util.newObject;if(eo instanceof to.ASN1Object)return eo;var _o=Object.keys(eo);if(_o.length!=1)throw new Error("key of param shall be only one.");var To=_o[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+To+":")==-1)throw new Error("undefined key: "+To);if(To=="bool")return new no(eo[To]);if(To=="int")return new io(eo[To]);if(To=="bitstr")return new oo(eo[To]);if(To=="octstr")return new ao(eo[To]);if(To=="null")return new so(eo[To]);if(To=="oid")return new uo(eo[To]);if(To=="enum")return new lo(eo[To]);if(To=="utf8str")return new co(eo[To]);if(To=="numstr")return new fo(eo[To]);if(To=="prnstr")return new mo(eo[To]);if(To=="telstr")return new go(eo[To]);if(To=="ia5str")return new yo(eo[To]);if(To=="utctime")return new vo(eo[To]);if(To=="gentime")return new Ao(eo[To]);if(To=="visstr")return new ho(eo[To]);if(To=="bmpstr")return new po(eo[To]);if(To=="asn1")return new ro(eo[To]);if(To=="seq"){for(var No=eo[To],Po=[],Co=0;Co<No.length;Co++){var Do=bo(No[Co]);Po.push(Do)}return new Mo({array:Po})}if(To=="set"){for(No=eo[To],Po=[],Co=0;Co<No.length;Co++)Do=bo(No[Co]),Po.push(Do);return new xo({array:Po})}if(To=="tag"){var zo=eo[To];if(Object.prototype.toString.call(zo)==="[object Array]"&&zo.length==3){var Ro=bo(zo[2]);return new wo({tag:zo[0],explicit:zo[1],obj:Ro})}return new wo(zo)}},this.jsonToASN1HEX=function(eo){return this.newObject(eo).getEncodedHex()}},u$2.asn1.ASN1Util.oidHexToInt=function(eo){for(var to="",ro=parseInt(eo.substr(0,2),16),no=(to=Math.floor(ro/40)+"."+ro%40,""),io=2;io<eo.length;io+=2){var oo=("00000000"+parseInt(eo.substr(io,2),16).toString(2)).slice(-8);no+=oo.substr(1,7),oo.substr(0,1)=="0"&&(to=to+"."+new l$3(no,2).toString(10),no="")}return to},u$2.asn1.ASN1Util.oidIntToHex=function(eo){var to=function(so){var uo=so.toString(16);return uo.length==1&&(uo="0"+uo),uo},ro=function(so){var uo="",lo=new l$3(so,10).toString(2),co=7-lo.length%7;co==7&&(co=0);for(var fo="",mo=0;mo<co;mo++)fo+="0";for(lo=fo+lo,mo=0;mo<lo.length-1;mo+=7){var go=lo.substr(mo,7);mo!=lo.length-7&&(go="1"+go),uo+=to(parseInt(go,2))}return uo};if(!eo.match(/^[0-9.]+$/))throw"malformed oid string: "+eo;var no="",io=eo.split("."),oo=40*parseInt(io[0])+parseInt(io[1]);no+=to(oo),io.splice(0,2);for(var ao=0;ao<io.length;ao++)no+=ro(io[ao]);return no},u$2.asn1.ASN1Object=function(eo){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+0+",v="+this.hV);var to=this.hV.length/2,ro=to.toString(16);if(ro.length%2==1&&(ro="0"+ro),to<128)return ro;var no=ro.length/2;if(no>15)throw"ASN.1 length too long to represent by 8x: n = "+to.toString(16);return(128+no).toString(16)+ro},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(to){this.params=to},eo!=null&&eo.tlv!=null&&(this.hTLV=eo.tlv,this.isModified=!1)},u$2.asn1.DERAbstractString=function(eo){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(to){this.hTLV=null,this.isModified=!0,this.s=to,this.hV=ie(this.s).toLowerCase()},this.setStringHex=function(to){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=to},this.getFreshValueHex=function(){return this.hV},eo!==void 0&&(typeof eo=="string"?this.setString(eo):eo.str!==void 0?this.setString(eo.str):eo.hex!==void 0&&this.setStringHex(eo.hex))},c$3.lang.extend(u$2.asn1.DERAbstractString,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractTime=function(eo){u$2.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(to){var ro=to.getTime()+6e4*to.getTimezoneOffset();return new Date(ro)},this.formatDate=function(to,ro,no){var io=this.zeroPadding,oo=this.localDateToUTC(to),ao=String(oo.getFullYear());ro=="utc"&&(ao=ao.substr(2,2));var so=ao+io(String(oo.getMonth()+1),2)+io(String(oo.getDate()),2)+io(String(oo.getHours()),2)+io(String(oo.getMinutes()),2)+io(String(oo.getSeconds()),2);if(no===!0){var uo=oo.getMilliseconds();if(uo!=0){var lo=io(String(uo),3);so=so+"."+(lo=lo.replace(/[0]+$/,""))}}return so+"Z"},this.zeroPadding=function(to,ro){return to.length>=ro?to:new Array(ro-to.length+1).join("0")+to},this.getString=function(){return this.s},this.setString=function(to){this.hTLV=null,this.isModified=!0,this.s=to,this.hV=J(to)},this.setByDateValue=function(to,ro,no,io,oo,ao){var so=new Date(Date.UTC(to,ro-1,no,io,oo,ao,0));this.setByDate(so)},this.getFreshValueHex=function(){return this.hV}},c$3.lang.extend(u$2.asn1.DERAbstractTime,u$2.asn1.ASN1Object),u$2.asn1.DERAbstractStructured=function(eo){u$2.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(to){this.hTLV=null,this.isModified=!0,this.asn1Array=to},this.appendASN1Object=function(to){this.hTLV=null,this.isModified=!0,this.asn1Array.push(to)},this.asn1Array=new Array,eo!==void 0&&eo.array!==void 0&&(this.asn1Array=eo.array)},c$3.lang.extend(u$2.asn1.DERAbstractStructured,u$2.asn1.ASN1Object),u$2.asn1.DERBoolean=function(eo){u$2.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=eo==0?"010100":"0101ff"},c$3.lang.extend(u$2.asn1.DERBoolean,u$2.asn1.ASN1Object),u$2.asn1.DERInteger=function(eo){u$2.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(to){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(to)},this.setByInteger=function(to){var ro=new l$3(String(to),10);this.setByBigInteger(ro)},this.setValueHex=function(to){this.hV=to},this.getFreshValueHex=function(){return this.hV},eo!==void 0&&(eo.bigint!==void 0?this.setByBigInteger(eo.bigint):eo.int!==void 0?this.setByInteger(eo.int):typeof eo=="number"?this.setByInteger(eo):eo.hex!==void 0&&this.setValueHex(eo.hex))},c$3.lang.extend(u$2.asn1.DERInteger,u$2.asn1.ASN1Object),u$2.asn1.DERBitString=function(eo){if(eo!==void 0&&eo.obj!==void 0){var to=u$2.asn1.ASN1Util.newObject(eo.obj);eo.hex="00"+to.getEncodedHex()}u$2.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(ro){this.hTLV=null,this.isModified=!0,this.hV=ro},this.setUnusedBitsAndHexValue=function(ro,no){if(ro<0||7<ro)throw"unused bits shall be from 0 to 7: u = "+ro;var io="0"+ro;this.hTLV=null,this.isModified=!0,this.hV=io+no},this.setByBinaryString=function(ro){var no=8-(ro=ro.replace(/0+$/,"")).length%8;no==8&&(no=0);for(var io=0;io<=no;io++)ro+="0";var oo="";for(io=0;io<ro.length-1;io+=8){var ao=ro.substr(io,8),so=parseInt(ao,2).toString(16);so.length==1&&(so="0"+so),oo+=so}this.hTLV=null,this.isModified=!0,this.hV="0"+no+oo},this.setByBooleanArray=function(ro){for(var no="",io=0;io<ro.length;io++)ro[io]==1?no+="1":no+="0";this.setByBinaryString(no)},this.newFalseArray=function(ro){for(var no=new Array(ro),io=0;io<ro;io++)no[io]=!1;return no},this.getFreshValueHex=function(){return this.hV},eo!==void 0&&(typeof eo=="string"&&eo.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(eo):eo.hex!==void 0?this.setHexValueIncludingUnusedBits(eo.hex):eo.bin!==void 0?this.setByBinaryString(eo.bin):eo.array!==void 0&&this.setByBooleanArray(eo.array))},c$3.lang.extend(u$2.asn1.DERBitString,u$2.asn1.ASN1Object),u$2.asn1.DEROctetString=function(eo){if(eo!==void 0&&eo.obj!==void 0){var to=u$2.asn1.ASN1Util.newObject(eo.obj);eo.hex=to.getEncodedHex()}u$2.asn1.DEROctetString.superclass.constructor.call(this,eo),this.hT="04"},c$3.lang.extend(u$2.asn1.DEROctetString,u$2.asn1.DERAbstractString),u$2.asn1.DERNull=function(){u$2.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},c$3.lang.extend(u$2.asn1.DERNull,u$2.asn1.ASN1Object),u$2.asn1.DERObjectIdentifier=function(eo){u$2.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(to){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=to},this.setValueOidString=function(to){var ro=function(no){var io=function(co){var fo=co.toString(16);return fo.length==1&&(fo="0"+fo),fo},oo=function(co){var fo="",mo=parseInt(co,10).toString(2),go=7-mo.length%7;go==7&&(go=0);for(var yo="",vo=0;vo<go;vo++)yo+="0";for(mo=yo+mo,vo=0;vo<mo.length-1;vo+=7){var Ao=mo.substr(vo,7);vo!=mo.length-7&&(Ao="1"+Ao),fo+=io(parseInt(Ao,2))}return fo};try{if(!no.match(/^[0-9.]+$/))return null;var ao="",so=no.split("."),uo=40*parseInt(so[0],10)+parseInt(so[1],10);ao+=io(uo),so.splice(0,2);for(var lo=0;lo<so.length;lo++)ao+=oo(so[lo]);return ao}catch{return null}}(to);if(ro==null)throw new Error("malformed oid string: "+to);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=ro},this.setValueName=function(to){var ro=u$2.asn1.x509.OID.name2oid(to);if(ro==="")throw new Error("DERObjectIdentifier oidName undefined: "+to);this.setValueOidString(ro)},this.setValueNameOrOid=function(to){to.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(to):this.setValueName(to)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(to){typeof to=="string"?this.setValueNameOrOid(to):to.oid!==void 0?this.setValueNameOrOid(to.oid):to.name!==void 0?this.setValueNameOrOid(to.name):to.hex!==void 0&&this.setValueHex(to.hex)},eo!==void 0&&this.setByParam(eo)},c$3.lang.extend(u$2.asn1.DERObjectIdentifier,u$2.asn1.ASN1Object),u$2.asn1.DEREnumerated=function(eo){u$2.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(to){this.hTLV=null,this.isModified=!0,this.hV=u$2.asn1.ASN1Util.bigIntToMinTwosComplementsHex(to)},this.setByInteger=function(to){var ro=new l$3(String(to),10);this.setByBigInteger(ro)},this.setValueHex=function(to){this.hV=to},this.getFreshValueHex=function(){return this.hV},eo!==void 0&&(eo.int!==void 0?this.setByInteger(eo.int):typeof eo=="number"?this.setByInteger(eo):eo.hex!==void 0&&this.setValueHex(eo.hex))},c$3.lang.extend(u$2.asn1.DEREnumerated,u$2.asn1.ASN1Object),u$2.asn1.DERUTF8String=function(eo){u$2.asn1.DERUTF8String.superclass.constructor.call(this,eo),this.hT="0c"},c$3.lang.extend(u$2.asn1.DERUTF8String,u$2.asn1.DERAbstractString),u$2.asn1.DERNumericString=function(eo){u$2.asn1.DERNumericString.superclass.constructor.call(this,eo),this.hT="12"},c$3.lang.extend(u$2.asn1.DERNumericString,u$2.asn1.DERAbstractString),u$2.asn1.DERPrintableString=function(eo){u$2.asn1.DERPrintableString.superclass.constructor.call(this,eo),this.hT="13"},c$3.lang.extend(u$2.asn1.DERPrintableString,u$2.asn1.DERAbstractString),u$2.asn1.DERTeletexString=function(eo){u$2.asn1.DERTeletexString.superclass.constructor.call(this,eo),this.hT="14"},c$3.lang.extend(u$2.asn1.DERTeletexString,u$2.asn1.DERAbstractString),u$2.asn1.DERIA5String=function(eo){u$2.asn1.DERIA5String.superclass.constructor.call(this,eo),this.hT="16"},c$3.lang.extend(u$2.asn1.DERIA5String,u$2.asn1.DERAbstractString),u$2.asn1.DERVisibleString=function(eo){u$2.asn1.DERIA5String.superclass.constructor.call(this,eo),this.hT="1a"},c$3.lang.extend(u$2.asn1.DERVisibleString,u$2.asn1.DERAbstractString),u$2.asn1.DERBMPString=function(eo){u$2.asn1.DERBMPString.superclass.constructor.call(this,eo),this.hT="1e"},c$3.lang.extend(u$2.asn1.DERBMPString,u$2.asn1.DERAbstractString),u$2.asn1.DERUTCTime=function(eo){u$2.asn1.DERUTCTime.superclass.constructor.call(this,eo),this.hT="17",this.setByDate=function(to){this.hTLV=null,this.isModified=!0,this.date=to,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=J(this.s)),this.hV},eo!==void 0&&(eo.str!==void 0?this.setString(eo.str):typeof eo=="string"&&eo.match(/^[0-9]{12}Z$/)?this.setString(eo):eo.hex!==void 0?this.setStringHex(eo.hex):eo.date!==void 0&&this.setByDate(eo.date))},c$3.lang.extend(u$2.asn1.DERUTCTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERGeneralizedTime=function(eo){u$2.asn1.DERGeneralizedTime.superclass.constructor.call(this,eo),this.hT="18",this.withMillis=!1,this.setByDate=function(to){this.hTLV=null,this.isModified=!0,this.date=to,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=J(this.s)),this.hV},eo!==void 0&&(eo.str!==void 0?this.setString(eo.str):typeof eo=="string"&&eo.match(/^[0-9]{14}Z$/)?this.setString(eo):eo.hex!==void 0?this.setStringHex(eo.hex):eo.date!==void 0&&this.setByDate(eo.date),eo.millis===!0&&(this.withMillis=!0))},c$3.lang.extend(u$2.asn1.DERGeneralizedTime,u$2.asn1.DERAbstractTime),u$2.asn1.DERSequence=function(eo){u$2.asn1.DERSequence.superclass.constructor.call(this,eo),this.hT="30",this.getFreshValueHex=function(){for(var to="",ro=0;ro<this.asn1Array.length;ro++)to+=this.asn1Array[ro].getEncodedHex();return this.hV=to,this.hV}},c$3.lang.extend(u$2.asn1.DERSequence,u$2.asn1.DERAbstractStructured),u$2.asn1.DERSet=function(eo){u$2.asn1.DERSet.superclass.constructor.call(this,eo),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var to=new Array,ro=0;ro<this.asn1Array.length;ro++){var no=this.asn1Array[ro];to.push(no.getEncodedHex())}return this.sortFlag==1&&to.sort(),this.hV=to.join(""),this.hV},eo!==void 0&&eo.sortflag!==void 0&&eo.sortflag==0&&(this.sortFlag=!1)},c$3.lang.extend(u$2.asn1.DERSet,u$2.asn1.DERAbstractStructured),u$2.asn1.DERTaggedObject=function(eo){u$2.asn1.DERTaggedObject.superclass.constructor.call(this);var to=u$2.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(ro,no,io){this.hT=no,this.isExplicit=ro,this.asn1Object=io,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=io.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,no),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(ro){ro.tag!=null&&(this.hT=ro.tag),ro.explicit!=null&&(this.isExplicit=ro.explicit),ro.tage!=null&&(this.hT=ro.tage,this.isExplicit=!0),ro.tagi!=null&&(this.hT=ro.tagi,this.isExplicit=!1),ro.obj!=null&&(ro.obj instanceof to.ASN1Object?(this.asn1Object=ro.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):typeof ro.obj=="object"&&(this.asn1Object=to.ASN1Util.newObject(ro.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},eo!=null&&this.setByParam(eo)},c$3.lang.extend(u$2.asn1.DERTaggedObject,u$2.asn1.ASN1Object);var we=new function(){};function Ie(eo,to){for(var ro="",no=to/4-eo.length,io=0;io<no;io++)ro+="0";return ro+eo}function Te(eo,to,ro){for(var no="",io=0;no.length<to;)no+=re(ro(se(eo+String.fromCharCode.apply(String,[(4278190080&io)>>24,(16711680&io)>>16,(65280&io)>>8,255&io])))),io+=1;return no}function xe(eo){for(var to in u$2.crypto.Util.DIGESTINFOHEAD){var ro=u$2.crypto.Util.DIGESTINFOHEAD[to],no=ro.length;if(eo.substring(0,no)==ro)return[to,eo.substring(no)]}return[]}function je(eo){var to,ro=we,no=ro.getChildIdx,io=ro.getV,oo=ro.getTLV,ao=ro.getVbyList,so=ro.getVbyListEx,uo=ro.getTLVbyList,lo=ro.getTLVbyListEx,co=ro.getIdxbyList,fo=ro.getIdxbyListEx,mo=ro.getVidx,go=ro.getInt,yo=ro.oidname,vo=ro.hextooidstr,Ao=ue;try{to=u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var ho=uo(this.hex,0,[0,0]);if(ho.substr(0,2)=="a0"){var po=uo(ho,0,[0]),Mo=go(po,0);if(Mo<0||2<Mo)throw new Error("malformed version field");return this.version=Mo+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return so(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var ho=lo(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(ho)},this.getAlgorithmIdentifierName=function(ho){for(var po in to)if(ho===to[po])return po;return yo(so(ho,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return uo(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return uo(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var ho=ao(this.hex,0,[0,4+this.foffset,0]);return ho=ho.replace(/(..)/g,"%$1"),ho=decodeURIComponent(ho)},this.getNotAfter=function(){var ho=ao(this.hex,0,[0,4+this.foffset,1]);return ho=ho.replace(/(..)/g,"%$1"),ho=decodeURIComponent(ho)},this.getPublicKeyHex=function(){return ro.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return co(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var ho=this.getPublicKeyIdx();return co(this.hex,ho,[1,0],"30")},this.getPublicKey=function(){return Ee.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var ho=uo(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(ho)},this.getSignatureValueHex=function(){return ao(this.hex,0,[2],"03",!0)},this.verifySignature=function(ho){var po=this.getSignatureAlgorithmField(),Mo=this.getSignatureValueHex(),xo=uo(this.hex,0,[0],"30"),wo=new u$2.crypto.Signature({alg:po});return wo.init(ho),wo.updateHex(xo),wo.verify(Mo)},this.parseExt=function(ho){var po,Mo,xo;if(ho===void 0){if(xo=this.hex,this.version!==3)return-1;po=co(xo,0,[0,7,0],"30"),Mo=no(xo,po)}else{xo=ue(ho);var wo=co(xo,0,[0,3,0,0],"06");if(io(xo,wo)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);po=co(xo,0,[0,3,0,1,0],"30"),Mo=no(xo,po),this.hex=xo}this.aExtInfo=new Array;for(var bo=0;bo<Mo.length;bo++){var _o={critical:!1},To=0;no(xo,Mo[bo]).length===3&&(_o.critical=!0,To=1),_o.oid=ro.hextooidstr(ao(xo,Mo[bo],[0],"06"));var No=co(xo,Mo[bo],[1+To]);_o.vidx=mo(xo,No),this.aExtInfo.push(_o)}},this.getExtInfo=function(ho){var po=this.aExtInfo,Mo=ho;if(ho.match(/^[0-9.]+$/)||(Mo=u$2.asn1.x509.OID.name2oid(ho)),Mo!==""){for(var xo=0;xo<po.length;xo++)if(po[xo].oid===Mo)return po[xo]}},this.getExtBasicConstraints=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("basicConstraints");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"basicConstraints"};if(po&&(xo.critical=!0),ho==="3000")return xo;if(ho==="30030101ff")return xo.cA=!0,xo;if(ho.substr(0,12)==="30060101ff02"){var wo=io(ho,10),bo=parseInt(wo,16);return xo.cA=!0,xo.pathLen=bo,xo}throw new Error("hExtV parse error: "+ho)},this.getExtKeyUsage=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("keyUsage");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"keyUsage"};return po&&(xo.critical=!0),xo.names=this.getExtKeyUsageString(ho).split(","),xo},this.getExtKeyUsageBin=function(ho){if(ho===void 0){var po=this.getExtInfo("keyUsage");if(po===void 0)return"";ho=oo(this.hex,po.vidx)}if(ho.length!=8&&ho.length!=10)throw new Error("malformed key usage value: "+ho);var Mo="000000000000000"+parseInt(ho.substr(6),16).toString(2);return ho.length==8&&(Mo=Mo.slice(-8)),ho.length==10&&(Mo=Mo.slice(-16)),(Mo=Mo.replace(/0+$/,""))==""&&(Mo="0"),Mo},this.getExtKeyUsageString=function(ho){for(var po=this.getExtKeyUsageBin(ho),Mo=new Array,xo=0;xo<po.length;xo++)po.substr(xo,1)=="1"&&Mo.push(je.KEYUSAGE_NAME[xo]);return Mo.join(",")},this.getExtSubjectKeyIdentifier=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("subjectKeyIdentifier");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"subjectKeyIdentifier"};po&&(xo.critical=!0);var wo=io(ho,0);return xo.kid={hex:wo},xo},this.getExtAuthorityKeyIdentifier=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("authorityKeyIdentifier");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"authorityKeyIdentifier"};po&&(xo.critical=!0);for(var wo=no(ho,0),bo=0;bo<wo.length;bo++){var _o=ho.substr(wo[bo],2);if(_o==="80"&&(xo.kid={hex:io(ho,wo[bo])}),_o==="a1"){var To=oo(ho,wo[bo]),No=this.getGeneralNames(To);xo.issuer=No[0].dn}_o==="82"&&(xo.sn={hex:io(ho,wo[bo])})}return xo},this.getExtExtKeyUsage=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("extKeyUsage");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"extKeyUsage",array:[]};po&&(xo.critical=!0);for(var wo=no(ho,0),bo=0;bo<wo.length;bo++)xo.array.push(yo(io(ho,wo[bo])));return xo},this.getExtExtKeyUsageName=function(){var ho=this.getExtInfo("extKeyUsage");if(ho===void 0)return ho;var po=new Array,Mo=oo(this.hex,ho.vidx);if(Mo==="")return po;for(var xo=no(Mo,0),wo=0;wo<xo.length;wo++)po.push(yo(io(Mo,xo[wo])));return po},this.getExtSubjectAltName=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("subjectAltName");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"subjectAltName",array:[]};return po&&(xo.critical=!0),xo.array=this.getGeneralNames(ho),xo},this.getExtIssuerAltName=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("issuerAltName");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"issuerAltName",array:[]};return po&&(xo.critical=!0),xo.array=this.getGeneralNames(ho),xo},this.getGeneralNames=function(ho){for(var po=no(ho,0),Mo=[],xo=0;xo<po.length;xo++){var wo=this.getGeneralName(oo(ho,po[xo]));wo!==void 0&&Mo.push(wo)}return Mo},this.getGeneralName=function(ho){var po=ho.substr(0,2),Mo=io(ho,0),xo=re(Mo);return po=="81"?{rfc822:xo}:po=="82"?{dns:xo}:po=="86"?{uri:xo}:po=="87"?{ip:ce(Mo)}:po=="a4"?{dn:this.getX500Name(Mo)}:void 0},this.getExtSubjectAltName2=function(){var ho,po,Mo,xo=this.getExtInfo("subjectAltName");if(xo===void 0)return xo;for(var wo=new Array,bo=oo(this.hex,xo.vidx),_o=no(bo,0),To=0;To<_o.length;To++)Mo=bo.substr(_o[To],2),ho=io(bo,_o[To]),Mo==="81"&&(po=ne(ho),wo.push(["MAIL",po])),Mo==="82"&&(po=ne(ho),wo.push(["DNS",po])),Mo==="84"&&(po=je.hex2dn(ho,0),wo.push(["DN",po])),Mo==="86"&&(po=ne(ho),wo.push(["URI",po])),Mo==="87"&&(po=ce(ho),wo.push(["IP",po]));return wo},this.getExtCRLDistributionPoints=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("cRLDistributionPoints");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"cRLDistributionPoints",array:[]};po&&(xo.critical=!0);for(var wo=no(ho,0),bo=0;bo<wo.length;bo++){var _o=oo(ho,wo[bo]);xo.array.push(this.getDistributionPoint(_o))}return xo},this.getDistributionPoint=function(ho){for(var po={},Mo=no(ho,0),xo=0;xo<Mo.length;xo++){var wo=ho.substr(Mo[xo],2),bo=oo(ho,Mo[xo]);wo=="a0"&&(po.dpname=this.getDistributionPointName(bo))}return po},this.getDistributionPointName=function(ho){for(var po={},Mo=no(ho,0),xo=0;xo<Mo.length;xo++){var wo=ho.substr(Mo[xo],2),bo=oo(ho,Mo[xo]);wo=="a0"&&(po.full=this.getGeneralNames(bo))}return po},this.getExtCRLDistributionPointsURI=function(){var ho=this.getExtInfo("cRLDistributionPoints");if(ho===void 0)return ho;for(var po=new Array,Mo=no(this.hex,ho.vidx),xo=0;xo<Mo.length;xo++)try{var wo=ne(ao(this.hex,Mo[xo],[0,0,0],"86"));po.push(wo)}catch{}return po},this.getExtAIAInfo=function(){var ho=this.getExtInfo("authorityInfoAccess");if(ho===void 0)return ho;for(var po={ocsp:[],caissuer:[]},Mo=no(this.hex,ho.vidx),xo=0;xo<Mo.length;xo++){var wo=ao(this.hex,Mo[xo],[0],"06"),bo=ao(this.hex,Mo[xo],[1],"86");wo==="2b06010505073001"&&po.ocsp.push(ne(bo)),wo==="2b06010505073002"&&po.caissuer.push(ne(bo))}return po},this.getExtAuthorityInfoAccess=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("authorityInfoAccess");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"authorityInfoAccess",array:[]};po&&(xo.critical=!0);for(var wo=no(ho,0),bo=0;bo<wo.length;bo++){var _o=so(ho,wo[bo],[0],"06"),To=ne(ao(ho,wo[bo],[1],"86"));if(_o=="2b06010505073001")xo.array.push({ocsp:To});else{if(_o!="2b06010505073002")throw new Error("unknown method: "+_o);xo.array.push({caissuer:To})}}return xo},this.getExtCertificatePolicies=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("certificatePolicies");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"certificatePolicies",array:[]};po&&(xo.critical=!0);for(var wo=no(ho,0),bo=0;bo<wo.length;bo++){var _o=oo(ho,wo[bo]),To=this.getPolicyInformation(_o);xo.array.push(To)}return xo},this.getPolicyInformation=function(ho){var po={},Mo=ao(ho,0,[0],"06");po.policyoid=yo(Mo);var xo=fo(ho,0,[1],"30");if(xo!=-1){po.array=[];for(var wo=no(ho,xo),bo=0;bo<wo.length;bo++){var _o=oo(ho,wo[bo]),To=this.getPolicyQualifierInfo(_o);po.array.push(To)}}return po},this.getPolicyQualifierInfo=function(ho){var po={},Mo=ao(ho,0,[0],"06");if(Mo==="2b06010505070201"){var xo=so(ho,0,[1],"16");po.cps=re(xo)}else if(Mo==="2b06010505070202"){var wo=uo(ho,0,[1],"30");po.unotice=this.getUserNotice(wo)}return po},this.getUserNotice=function(ho){for(var po={},Mo=no(ho,0),xo=0;xo<Mo.length;xo++){var wo=oo(ho,Mo[xo]);wo.substr(0,2)!="30"&&(po.exptext=this.getDisplayText(wo))}return po},this.getDisplayText=function(ho){var po={};return po.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[ho.substr(0,2)],po.str=re(io(ho,0)),po},this.getExtCRLNumber=function(ho,po){var Mo={extname:"cRLNumber"};if(po&&(Mo.critical=!0),ho.substr(0,2)=="02")return Mo.num={hex:io(ho,0)},Mo;throw new Error("hExtV parse error: "+ho)},this.getExtCRLReason=function(ho,po){var Mo={extname:"cRLReason"};if(po&&(Mo.critical=!0),ho.substr(0,2)=="0a")return Mo.code=parseInt(io(ho,0),16),Mo;throw new Error("hExtV parse error: "+ho)},this.getExtOcspNonce=function(ho,po){var Mo={extname:"ocspNonce"};po&&(Mo.critical=!0);var xo=io(ho,0);return Mo.hex=xo,Mo},this.getExtOcspNoCheck=function(ho,po){var Mo={extname:"ocspNoCheck"};return po&&(Mo.critical=!0),Mo},this.getExtAdobeTimeStamp=function(ho,po){if(ho===void 0&&po===void 0){var Mo=this.getExtInfo("adobeTimeStamp");if(Mo===void 0)return;ho=oo(this.hex,Mo.vidx),po=Mo.critical}var xo={extname:"adobeTimeStamp"};po&&(xo.critical=!0);var wo=no(ho,0);if(wo.length>1){var bo=oo(ho,wo[1]),_o=this.getGeneralName(bo);_o.uri!=null&&(xo.uri=_o.uri)}if(wo.length>2){var To=oo(ho,wo[2]);To=="0101ff"&&(xo.reqauth=!0),To=="010100"&&(xo.reqauth=!1)}return xo},this.getX500NameRule=function(ho){for(var po=null,Mo=[],xo=0;xo<ho.length;xo++)for(var wo=ho[xo],bo=0;bo<wo.length;bo++)Mo.push(wo[bo]);for(xo=0;xo<Mo.length;xo++){var _o=Mo[xo],To=_o.ds,No=_o.value,Po=_o.type;if(To!="prn"&&To!="utf8"&&To!="ia5")return"mixed";if(To=="ia5"){if(Po!="CN")return"mixed";if(u$2.lang.String.isMail(No))continue;return"mixed"}if(Po=="C"){if(To=="prn")continue;return"mixed"}if(po==null)po=To;else if(po!==To)return"mixed"}return po==null?"prn":po},this.getX500Name=function(ho){var po=this.getX500NameArray(ho);return{array:po,str:this.dnarraytostr(po)}},this.getX500NameArray=function(ho){for(var po=[],Mo=no(ho,0),xo=0;xo<Mo.length;xo++)po.push(this.getRDN(oo(ho,Mo[xo])));return po},this.getRDN=function(ho){for(var po=[],Mo=no(ho,0),xo=0;xo<Mo.length;xo++)po.push(this.getAttrTypeAndValue(oo(ho,Mo[xo])));return po},this.getAttrTypeAndValue=function(ho){var po={type:null,value:null,ds:null},Mo=no(ho,0),xo=ao(ho,Mo[0],[],"06"),wo=ao(ho,Mo[1],[]),bo=u$2.asn1.ASN1Util.oidHexToInt(xo);return po.type=u$2.asn1.x509.OID.oid2atype(bo),po.ds=this.HEX2STAG[ho.substr(Mo[1],2)],po.ds!="bmp"?po.value=ne(wo):po.value=Ae(wo),po},this.readCertPEM=function(ho){this.readCertHex(Ao(ho))},this.readCertHex=function(ho){this.hex=ho,this.getVersion();try{co(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var ho={};return ho.version=this.getVersion(),ho.serial={hex:this.getSerialNumberHex()},ho.sigalg=this.getSignatureAlgorithmField(),ho.issuer=this.getIssuer(),ho.notbefore=this.getNotBefore(),ho.notafter=this.getNotAfter(),ho.subject=this.getSubject(),ho.sbjpubkey=ae(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(ho.ext=this.getExtParamArray()),ho.sighex=this.getSignatureValueHex(),ho},this.getExtParamArray=function(ho){ho==null&&fo(this.hex,0,[0,"[3]"])!=-1&&(ho=lo(this.hex,0,[0,"[3]",0],"30"));for(var po=[],Mo=no(ho,0),xo=0;xo<Mo.length;xo++){var wo=oo(ho,Mo[xo]),bo=this.getExtParam(wo);bo!=null&&po.push(bo)}return po},this.getExtParam=function(ho){var po=no(ho,0).length;if(po!=2&&po!=3)throw new Error("wrong number elements in Extension: "+po+" "+ho);var Mo=vo(ao(ho,0,[0],"06")),xo=!1;po==3&&uo(ho,0,[1])=="0101ff"&&(xo=!0);var wo=uo(ho,0,[po-1,0]),bo=void 0;if(Mo=="2.5.29.14"?bo=this.getExtSubjectKeyIdentifier(wo,xo):Mo=="2.5.29.15"?bo=this.getExtKeyUsage(wo,xo):Mo=="2.5.29.17"?bo=this.getExtSubjectAltName(wo,xo):Mo=="2.5.29.18"?bo=this.getExtIssuerAltName(wo,xo):Mo=="2.5.29.19"?bo=this.getExtBasicConstraints(wo,xo):Mo=="2.5.29.31"?bo=this.getExtCRLDistributionPoints(wo,xo):Mo=="2.5.29.32"?bo=this.getExtCertificatePolicies(wo,xo):Mo=="2.5.29.35"?bo=this.getExtAuthorityKeyIdentifier(wo,xo):Mo=="2.5.29.37"?bo=this.getExtExtKeyUsage(wo,xo):Mo=="1.3.6.1.5.5.7.1.1"?bo=this.getExtAuthorityInfoAccess(wo,xo):Mo=="2.5.29.20"?bo=this.getExtCRLNumber(wo,xo):Mo=="2.5.29.21"?bo=this.getExtCRLReason(wo,xo):Mo=="1.3.6.1.5.5.7.48.1.2"?bo=this.getExtOcspNonce(wo,xo):Mo=="1.3.6.1.5.5.7.48.1.5"?bo=this.getExtOcspNoCheck(wo,xo):Mo=="1.2.840.113583.1.1.9.1"&&(bo=this.getExtAdobeTimeStamp(wo,xo)),bo!=null)return bo;var _o={extname:Mo,extn:wo};return xo&&(_o.critical=!0),_o},this.findExt=function(ho,po){for(var Mo=0;Mo<ho.length;Mo++)if(ho[Mo].extname==po)return ho[Mo];return null},this.updateExtCDPFullURI=function(ho,po){var Mo=this.findExt(ho,"cRLDistributionPoints");if(Mo!=null&&Mo.array!=null){for(var xo=Mo.array,wo=0;wo<xo.length;wo++)if(xo[wo].dpname!=null&&xo[wo].dpname.full!=null)for(var bo=xo[wo].dpname.full,_o=0;_o<bo.length;_o++){var To=bo[wo];To.uri!=null&&(To.uri=po)}}},this.updateExtAIAOCSP=function(ho,po){var Mo=this.findExt(ho,"authorityInfoAccess");if(Mo!=null&&Mo.array!=null)for(var xo=Mo.array,wo=0;wo<xo.length;wo++)xo[wo].ocsp!=null&&(xo[wo].ocsp=po)},this.updateExtAIACAIssuer=function(ho,po){var Mo=this.findExt(ho,"authorityInfoAccess");if(Mo!=null&&Mo.array!=null)for(var xo=Mo.array,wo=0;wo<xo.length;wo++)xo[wo].caissuer!=null&&(xo[wo].caissuer=po)},this.dnarraytostr=function(ho){return"/"+ho.map(function(po){return function(Mo){return Mo.map(function(xo){return function(wo){return wo.type+"="+wo.value}(xo).replace(/\+/,"\\+")}).join("+")}(po).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var ho,po,Mo,xo,wo=function(Ro){for(var Lo="",$o=Ro.array,jo=0;jo<$o.length;jo++){var Wo=$o[jo];if(Lo+="    policy oid: "+Wo.policyoid+`
`,Wo.array!==void 0)for(var Ko=0;Ko<Wo.array.length;Ko++){var Jo=Wo.array[Ko];Jo.cps!==void 0&&(Lo+="    cps: "+Jo.cps+`
`)}}return Lo},bo=function(Ro){for(var Lo="",$o=Ro.array,jo=0;jo<$o.length;jo++){var Wo=$o[jo];try{Wo.dpname.full[0].uri!==void 0&&(Lo+="    "+Wo.dpname.full[0].uri+`
`)}catch{}try{Wo.dname.full[0].dn.hex!==void 0&&(Lo+="    "+je.hex2dn(Wo.dpname.full[0].dn.hex)+`
`)}catch{}}return Lo},_o=function(Ro){for(var Lo="",$o=Ro.array,jo=0;jo<$o.length;jo++){var Wo=$o[jo];Wo.caissuer!==void 0&&(Lo+="    caissuer: "+Wo.caissuer+`
`),Wo.ocsp!==void 0&&(Lo+="    ocsp: "+Wo.ocsp+`
`)}return Lo};if(ho=`Basic Fields
`,ho+="  serial number: "+this.getSerialNumberHex()+`
`,ho+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,ho+="  issuer: "+this.getIssuerString()+`
`,ho+="  notBefore: "+this.getNotBefore()+`
`,ho+="  notAfter: "+this.getNotAfter()+`
`,ho+="  subject: "+this.getSubjectString()+`
`,ho+=`  subject public key info: 
`,ho+="    key algorithm: "+(po=this.getPublicKey()).type+`
`,po.type==="RSA"&&(ho+="    n="+he(po.n.toString(16)).substr(0,16)+`...
`,ho+="    e="+he(po.e.toString(16))+`
`),(Mo=this.aExtInfo)!=null){ho+=`X509v3 Extensions:
`;for(var To=0;To<Mo.length;To++){var No=Mo[To],Po=u$2.asn1.x509.OID.oid2name(No.oid);Po===""&&(Po=No.oid);var Co="";if(No.critical===!0&&(Co="CRITICAL"),ho+="  "+Po+" "+Co+`:
`,Po==="basicConstraints"){var Do=this.getExtBasicConstraints();Do.cA===void 0?ho+=`    {}
`:(ho+="    cA=true",Do.pathLen!==void 0&&(ho+=", pathLen="+Do.pathLen),ho+=`
`)}else if(Po==="keyUsage")ho+="    "+this.getExtKeyUsageString()+`
`;else if(Po==="subjectKeyIdentifier")ho+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Po==="authorityKeyIdentifier"){var zo=this.getExtAuthorityKeyIdentifier();zo.kid!==void 0&&(ho+="    kid="+zo.kid.hex+`
`)}else Po==="extKeyUsage"?ho+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:Po==="subjectAltName"?ho+="    "+(xo=this.getExtSubjectAltName(),JSON.stringify(xo.array).replace(/[\[\]\{\}\"]/g,""))+`
`:Po==="cRLDistributionPoints"?ho+=bo(this.getExtCRLDistributionPoints()):Po==="authorityInfoAccess"?ho+=_o(this.getExtAuthorityInfoAccess()):Po==="certificatePolicies"&&(ho+=wo(this.getExtCertificatePolicies()))}}return ho+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,ho+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof eo=="string"&&(eo.indexOf("-----BEGIN")!=-1?this.readCertPEM(eo):u$2.lang.String.isHex(eo)&&this.readCertHex(eo))}function ze(eo){return A$3.SHA256(eo).toString()}we.getLblen=function(eo,to){if(eo.substr(to+2,1)!="8")return 1;var ro=parseInt(eo.substr(to+3,1));return ro==0?-1:0<ro&&ro<10?ro+1:-2},we.getL=function(eo,to){var ro=we.getLblen(eo,to);return ro<1?"":eo.substr(to+2,2*ro)},we.getVblen=function(eo,to){var ro;return(ro=we.getL(eo,to))==""?-1:(ro.substr(0,1)==="8"?new l$3(ro.substr(2),16):new l$3(ro,16)).intValue()},we.getVidx=function(eo,to){var ro=we.getLblen(eo,to);return ro<0?ro:to+2*(ro+1)},we.getV=function(eo,to){var ro=we.getVidx(eo,to),no=we.getVblen(eo,to);return eo.substr(ro,2*no)},we.getTLV=function(eo,to){return eo.substr(to,2)+we.getL(eo,to)+we.getV(eo,to)},we.getTLVblen=function(eo,to){return 2+2*we.getLblen(eo,to)+2*we.getVblen(eo,to)},we.getNextSiblingIdx=function(eo,to){return we.getVidx(eo,to)+2*we.getVblen(eo,to)},we.getChildIdx=function(eo,to){var ro,no,io,oo=we,ao=[];ro=oo.getVidx(eo,to),no=2*oo.getVblen(eo,to),eo.substr(to,2)=="03"&&(ro+=2,no-=2),io=0;for(var so=ro;io<=no;){var uo=oo.getTLVblen(eo,so);if((io+=uo)<=no&&ao.push(so),so+=uo,io>=no)break}return ao},we.getNthChildIdx=function(eo,to,ro){return we.getChildIdx(eo,to)[ro]},we.getIdxbyList=function(eo,to,ro,no){var io,oo,ao=we;return ro.length==0?no!==void 0&&eo.substr(to,2)!==no?-1:to:(io=ro.shift())>=(oo=ao.getChildIdx(eo,to)).length?-1:ao.getIdxbyList(eo,oo[io],ro,no)},we.getIdxbyListEx=function(eo,to,ro,no){var io,oo,ao=we;if(ro.length==0)return no!==void 0&&eo.substr(to,2)!==no?-1:to;io=ro.shift(),oo=ao.getChildIdx(eo,to);for(var so=0,uo=0;uo<oo.length;uo++){var lo=eo.substr(oo[uo],2);if(typeof io=="number"&&!ao.isContextTag(lo)&&so==io||typeof io=="string"&&ao.isContextTag(lo,io))return ao.getIdxbyListEx(eo,oo[uo],ro,no);ao.isContextTag(lo)||so++}return-1},we.getTLVbyList=function(eo,to,ro,no){var io=we,oo=io.getIdxbyList(eo,to,ro,no);return oo==-1||oo>=eo.length?null:io.getTLV(eo,oo)},we.getTLVbyListEx=function(eo,to,ro,no){var io=we,oo=io.getIdxbyListEx(eo,to,ro,no);return oo==-1?null:io.getTLV(eo,oo)},we.getVbyList=function(eo,to,ro,no,io){var oo,ao,so=we;return(oo=so.getIdxbyList(eo,to,ro,no))==-1||oo>=eo.length?null:(ao=so.getV(eo,oo),io===!0&&(ao=ao.substr(2)),ao)},we.getVbyListEx=function(eo,to,ro,no,io){var oo,ao,so=we;return(oo=so.getIdxbyListEx(eo,to,ro,no))==-1?null:(ao=so.getV(eo,oo),eo.substr(oo,2)=="03"&&io!==!1&&(ao=ao.substr(2)),ao)},we.getInt=function(eo,to,ro){ro==null&&(ro=-1);try{var no=eo.substr(to,2);if(no!="02"&&no!="03")return ro;var io=we.getV(eo,to);return no=="02"?parseInt(io,16):function(oo){try{var ao=oo.substr(0,2);if(ao=="00")return parseInt(oo.substr(2),16);var so=parseInt(ao,16),uo=oo.substr(2),lo=parseInt(uo,16).toString(2);return lo=="0"&&(lo="00000000"),lo=lo.slice(0,0-so),parseInt(lo,2)}catch{return-1}}(io)}catch{return ro}},we.getOID=function(eo,to,ro){ro==null&&(ro=null);try{return eo.substr(to,2)!="06"?ro:function(no){if(!le(no))return null;try{var io=[],oo=no.substr(0,2),ao=parseInt(oo,16);io[0]=new String(Math.floor(ao/40)),io[1]=new String(ao%40);for(var so=no.substr(2),uo=[],lo=0;lo<so.length/2;lo++)uo.push(parseInt(so.substr(2*lo,2),16));var co=[],fo="";for(lo=0;lo<uo.length;lo++)128&uo[lo]?fo+=de((127&uo[lo]).toString(2),7):(fo+=de((127&uo[lo]).toString(2),7),co.push(new String(parseInt(fo,2))),fo="");var mo=io.join(".");return co.length>0&&(mo=mo+"."+co.join(".")),mo}catch{return null}}(we.getV(eo,to))}catch{return ro}},we.getOIDName=function(eo,to,ro){ro==null&&(ro=null);try{var no=we.getOID(eo,to,ro);if(no==ro)return ro;var io=u$2.asn1.x509.OID.oid2name(no);return io==""?no:io}catch{return ro}},we.getString=function(eo,to,ro){ro==null&&(ro=null);try{return re(we.getV(eo,to))}catch{return ro}},we.hextooidstr=function(eo){var to=function(fo,mo){return fo.length>=mo?fo:new Array(mo-fo.length+1).join("0")+fo},ro=[],no=eo.substr(0,2),io=parseInt(no,16);ro[0]=new String(Math.floor(io/40)),ro[1]=new String(io%40);for(var oo=eo.substr(2),ao=[],so=0;so<oo.length/2;so++)ao.push(parseInt(oo.substr(2*so,2),16));var uo=[],lo="";for(so=0;so<ao.length;so++)128&ao[so]?lo+=to((127&ao[so]).toString(2),7):(lo+=to((127&ao[so]).toString(2),7),uo.push(new String(parseInt(lo,2))),lo="");var co=ro.join(".");return uo.length>0&&(co=co+"."+uo.join(".")),co},we.dump=function(eo,to,ro,no){var io=we,oo=io.getV,ao=io.dump,so=io.getChildIdx,uo=eo;eo instanceof u$2.asn1.ASN1Object&&(uo=eo.getEncodedHex());var lo=function(_o,To){return _o.length<=2*To?_o:_o.substr(0,To)+"..(total "+_o.length/2+"bytes).."+_o.substr(_o.length-To,To)};to===void 0&&(to={ommit_long_octet:32}),ro===void 0&&(ro=0),no===void 0&&(no="");var co,fo=to.ommit_long_octet;if((co=uo.substr(ro,2))=="01")return(mo=oo(uo,ro))=="00"?no+`BOOLEAN FALSE
`:no+`BOOLEAN TRUE
`;if(co=="02")return no+"INTEGER "+lo(mo=oo(uo,ro),fo)+`
`;if(co=="03"){var mo=oo(uo,ro);if(io.isASN1HEX(mo.substr(2))){var go=no+`BITSTRING, encapsulates
`;return go+=ao(mo.substr(2),to,0,no+"  ")}return no+"BITSTRING "+lo(mo,fo)+`
`}if(co=="04")return mo=oo(uo,ro),io.isASN1HEX(mo)?(go=no+`OCTETSTRING, encapsulates
`,go+=ao(mo,to,0,no+"  ")):no+"OCTETSTRING "+lo(mo,fo)+`
`;if(co=="05")return no+`NULL
`;if(co=="06"){var yo=oo(uo,ro),vo=u$2.asn1.ASN1Util.oidHexToInt(yo),Ao=u$2.asn1.x509.OID.oid2name(vo),ho=vo.replace(/\./g," ");return Ao!=""?no+"ObjectIdentifier "+Ao+" ("+ho+`)
`:no+"ObjectIdentifier ("+ho+`)
`}if(co=="0a")return no+"ENUMERATED "+parseInt(oo(uo,ro))+`
`;if(co=="0c")return no+"UTF8String '"+ne(oo(uo,ro))+`'
`;if(co=="13")return no+"PrintableString '"+ne(oo(uo,ro))+`'
`;if(co=="14")return no+"TeletexString '"+ne(oo(uo,ro))+`'
`;if(co=="16")return no+"IA5String '"+ne(oo(uo,ro))+`'
`;if(co=="17")return no+"UTCTime "+ne(oo(uo,ro))+`
`;if(co=="18")return no+"GeneralizedTime "+ne(oo(uo,ro))+`
`;if(co=="1a")return no+"VisualString '"+ne(oo(uo,ro))+`'
`;if(co=="1e")return no+"BMPString '"+Ae(oo(uo,ro))+`'
`;if(co=="30"){if(uo.substr(ro,4)=="3000")return no+`SEQUENCE {}
`;go=no+`SEQUENCE
`;var po=to;if(((wo=so(uo,ro)).length==2||wo.length==3)&&uo.substr(wo[0],2)=="06"&&uo.substr(wo[wo.length-1],2)=="04"){Ao=io.oidname(oo(uo,wo[0]));var Mo=JSON.parse(JSON.stringify(to));Mo.x509ExtName=Ao,po=Mo}for(var xo=0;xo<wo.length;xo++)go+=ao(uo,po,wo[xo],no+"  ");return go}if(co=="31"){go=no+`SET
`;var wo=so(uo,ro);for(xo=0;xo<wo.length;xo++)go+=ao(uo,to,wo[xo],no+"  ");return go}if((128&(co=parseInt(co,16)))!=0){var bo=31&co;if((32&co)!=0){for(go=no+"["+bo+`]
`,wo=so(uo,ro),xo=0;xo<wo.length;xo++)go+=ao(uo,to,wo[xo],no+"  ");return go}if(mo=oo(uo,ro),we.isASN1HEX(mo)){var go=no+"["+bo+`]
`;return go+=ao(mo,to,0,no+"  ")}return(mo.substr(0,8)=="68747470"||to.x509ExtName==="subjectAltName"&&bo==2)&&(mo=ne(mo)),go=no+"["+bo+"] "+mo+`
`}return no+"UNKNOWN("+co+") "+oo(uo,ro)+`
`},we.isContextTag=function(eo,to){var ro,no;eo=eo.toLowerCase();try{ro=parseInt(eo,16)}catch{return-1}if(to===void 0)return(192&ro)==128;try{return to.match(/^\[[0-9]+\]$/)!=null&&!((no=parseInt(to.substr(1,to.length-1),10))>31)&&(192&ro)==128&&(31&ro)==no}catch{return!1}},we.isASN1HEX=function(eo){var to=we;if(eo.length%2==1)return!1;var ro=to.getVblen(eo,0),no=eo.substr(0,2),io=to.getL(eo,0);return eo.length-no.length-io.length==2*ro},we.checkStrictDER=function(eo,to,ro,no,io){var oo=we;if(ro===void 0){if(typeof eo!="string")throw new Error("not hex string");if(eo=eo.toLowerCase(),!u$2.lang.String.isHex(eo))throw new Error("not hex string");ro=eo.length,io=(no=eo.length/2)<128?1:Math.ceil(no.toString(16))+1}if(oo.getL(eo,to).length>2*io)throw new Error("L of TLV too long: idx="+to);var ao=oo.getVblen(eo,to);if(ao>no)throw new Error("value of L too long than hex: idx="+to);var so=oo.getTLV(eo,to),uo=so.length-2-oo.getL(eo,to).length;if(uo!==2*ao)throw new Error("V string length and L's value not the same:"+uo+"/"+2*ao);if(to===0&&eo.length!=so.length)throw new Error("total length and TLV length unmatch:"+eo.length+"!="+so.length);var lo=eo.substr(to,2);if(lo==="02"){var co=oo.getVidx(eo,to);if(eo.substr(co,2)=="00"&&eo.charCodeAt(co+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(lo,16)){for(var fo=oo.getVblen(eo,to),mo=0,go=oo.getChildIdx(eo,to),yo=0;yo<go.length;yo++)mo+=oo.getTLV(eo,go[yo]).length,oo.checkStrictDER(eo,go[yo],ro,no,io);if(2*fo!=mo)throw new Error("sum of children's TLV length and L unmatch: "+2*fo+"!="+mo)}},we.oidname=function(eo){var to=u$2.asn1;u$2.lang.String.isHex(eo)&&(eo=to.ASN1Util.oidHexToInt(eo));var ro=to.x509.OID.oid2name(eo);return ro===""&&(ro=eo),ro},u$2.asn1!==void 0&&u$2.asn1||(u$2.asn1={}),u$2.asn1.x509!==void 0&&u$2.asn1.x509||(u$2.asn1.x509={}),u$2.asn1.x509.Certificate=function(eo){u$2.asn1.x509.Certificate.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERBitString,no=to.DERSequence,io=to.x509,oo=io.TBSCertificate,ao=io.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(so){this.params=so},this.sign=function(){var so=this.params,uo=so.sigalg;so.sigalg.name!=null&&(uo=so.sigalg.name);var lo=so.tbsobj.getEncodedHex(),co=new u$2.crypto.Signature({alg:uo});co.init(so.cakey),co.updateHex(lo),so.sighex=co.sign()},this.getPEM=function(){return ae(this.getEncodedHex(),"CERTIFICATE")},this.getEncodedHex=function(){var so=this.params;if(so.tbsobj!=null&&so.tbsobj!=null||(so.tbsobj=new oo(so)),so.sighex==null&&so.cakey!=null&&this.sign(),so.sighex==null)throw new Error("sighex or cakey parameter not defined");var uo=[];return uo.push(so.tbsobj),uo.push(new ao({name:so.sigalg})),uo.push(new ro({hex:"00"+so.sighex})),new no({array:uo}).getEncodedHex()},eo!=null&&(this.params=eo)},ge(u$2.asn1.x509.Certificate,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertificate=function(eo){u$2.asn1.x509.TBSCertificate.superclass.constructor.call(this);var to=u$2.asn1,ro=to.x509,no=to.DERTaggedObject,io=to.DERInteger,oo=to.DERSequence,ao=ro.AlgorithmIdentifier,so=ro.Time,uo=ro.X500Name,lo=ro.Extensions,co=ro.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(fo){this.params=fo},this.getEncodedHex=function(){var fo=[],mo=this.params;if(mo.version!=null||mo.version!=1){var go=2;mo.version!=null&&(go=mo.version-1);var yo=new no({obj:new io({int:go})});fo.push(yo)}return fo.push(new io(mo.serial)),fo.push(new ao({name:mo.sigalg})),fo.push(new uo(mo.issuer)),fo.push(new oo({array:[new so(mo.notbefore),new so(mo.notafter)]})),fo.push(new uo(mo.subject)),fo.push(new co(Ee.getKey(mo.sbjpubkey))),mo.ext!==void 0&&mo.ext.length>0&&fo.push(new no({tag:"a3",obj:new lo(mo.ext)})),new u$2.asn1.DERSequence({array:fo}).getEncodedHex()},eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.TBSCertificate,u$2.asn1.ASN1Object),u$2.asn1.x509.Extensions=function(eo){u$2.asn1.x509.Extensions.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERSequence,no=to.x509;this.aParam=[],this.setByParam=function(io){this.aParam=io},this.getEncodedHex=function(){for(var io=[],oo=0;oo<this.aParam.length;oo++){var ao=this.aParam[oo],so=ao.extname,uo=null;if(ao.extn!=null)uo=new no.PrivateExtension(ao);else if(so=="subjectKeyIdentifier")uo=new no.SubjectKeyIdentifier(ao);else if(so=="keyUsage")uo=new no.KeyUsage(ao);else if(so=="subjectAltName")uo=new no.SubjectAltName(ao);else if(so=="issuerAltName")uo=new no.IssuerAltName(ao);else if(so=="basicConstraints")uo=new no.BasicConstraints(ao);else if(so=="cRLDistributionPoints")uo=new no.CRLDistributionPoints(ao);else if(so=="certificatePolicies")uo=new no.CertificatePolicies(ao);else if(so=="authorityKeyIdentifier")uo=new no.AuthorityKeyIdentifier(ao);else if(so=="extKeyUsage")uo=new no.ExtKeyUsage(ao);else if(so=="authorityInfoAccess")uo=new no.AuthorityInfoAccess(ao);else if(so=="cRLNumber")uo=new no.CRLNumber(ao);else if(so=="cRLReason")uo=new no.CRLReason(ao);else if(so=="ocspNonce")uo=new no.OCSPNonce(ao);else if(so=="ocspNoCheck")uo=new no.OCSPNoCheck(ao);else if(so=="adobeTimeStamp")uo=new no.AdobeTimeStamp(ao);else{if(so!="subjectDirectoryAttributes")throw new Error("extension not supported:"+JSON.stringify(ao));uo=new no.SubjectDirectoryAttributes(ao)}uo!=null&&io.push(uo)}return new ro({array:io}).getEncodedHex()},eo!=null&&this.setByParam(eo)},ge(u$2.asn1.x509.Extensions,u$2.asn1.ASN1Object),u$2.asn1.x509.Extension=function(eo){u$2.asn1.x509.Extension.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERObjectIdentifier,no=to.DEROctetString;to.DERBitString;var io=to.DERBoolean,oo=to.DERSequence;this.getEncodedHex=function(){var ao=new ro({oid:this.oid}),so=new no({hex:this.getExtnValueHex()}),uo=new Array;return uo.push(ao),this.critical&&uo.push(new io),uo.push(so),new oo({array:uo}).getEncodedHex()},this.critical=!1,eo!==void 0&&eo.critical!==void 0&&(this.critical=eo.critical)},ge(u$2.asn1.x509.Extension,u$2.asn1.ASN1Object),u$2.asn1.x509.KeyUsage=function(eo){u$2.asn1.x509.KeyUsage.superclass.constructor.call(this,eo);var to=je.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",eo!==void 0&&(eo.bin!==void 0&&(this.asn1ExtnValue=new u$2.asn1.DERBitString(eo)),eo.names!==void 0&&eo.names.length!==void 0)){for(var ro=eo.names,no="000000000",io=0;io<ro.length;io++)for(var oo=0;oo<to.length;oo++)ro[io]===to[oo]&&(no=no.substring(0,oo)+"1"+no.substring(oo+1,no.length));this.asn1ExtnValue=new u$2.asn1.DERBitString({bin:no})}},ge(u$2.asn1.x509.KeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.BasicConstraints=function(eo){u$2.asn1.x509.BasicConstraints.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.DERBoolean,no=to.DERInteger,io=to.DERSequence;this.getExtnValueHex=function(){var oo=new Array;this.cA&&oo.push(new ro),this.pathLen>-1&&oo.push(new no({int:this.pathLen}));var ao=new io({array:oo});return this.asn1ExtnValue=ao,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,eo!==void 0&&(eo.cA!==void 0&&(this.cA=eo.cA),eo.pathLen!==void 0&&(this.pathLen=eo.pathLen))},ge(u$2.asn1.x509.BasicConstraints,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLDistributionPoints=function(eo){u$2.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(no){for(var io=[],oo=0;oo<no.length;oo++)if(no[oo]instanceof u$2.asn1.ASN1Object)io.push(no[oo]);else{var ao=new ro.DistributionPoint(no[oo]);io.push(ao)}this.asn1ExtnValue=new to.DERSequence({array:io})},this.setByOneURI=function(no){var io=new ro.DistributionPoint({fulluri:no});this.setByDPArray([io])},this.oid="2.5.29.31",eo!==void 0&&(eo.array!==void 0?this.setByDPArray(eo.array):eo.uri!==void 0&&this.setByOneURI(eo.uri))},ge(u$2.asn1.x509.CRLDistributionPoints,u$2.asn1.x509.Extension),u$2.asn1.x509.DistributionPoint=function(eo){u$2.asn1.x509.DistributionPoint.superclass.constructor.call(this);var to=u$2.asn1,ro=to.x509.DistributionPointName;this.getEncodedHex=function(){var no=new to.DERSequence;if(this.asn1DP!=null){var io=new to.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});no.appendASN1Object(io)}return this.hTLV=no.getEncodedHex(),this.hTLV},eo!==void 0&&(eo.dpobj!==void 0?this.asn1DP=eo.dpobj:eo.dpname!==void 0?this.asn1DP=new ro(eo.dpname):eo.fulluri!==void 0&&(this.asn1DP=new ro({full:[{uri:eo.fulluri}]})))},ge(u$2.asn1.x509.DistributionPoint,u$2.asn1.ASN1Object),u$2.asn1.x509.DistributionPointName=function(eo){u$2.asn1.x509.DistributionPointName.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERTaggedObject;if(this.getEncodedHex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new ro({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},eo!==void 0)if(to.x509.GeneralNames.prototype.isPrototypeOf(eo))this.type="full",this.tag="a0",this.asn1V=eo;else{if(eo.full===void 0)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new to.x509.GeneralNames(eo.full)}},ge(u$2.asn1.x509.DistributionPointName,u$2.asn1.ASN1Object),u$2.asn1.x509.CertificatePolicies=function(eo){u$2.asn1.x509.CertificatePolicies.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.x509,no=to.DERSequence,io=ro.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var oo=[],ao=0;ao<this.params.array.length;ao++)oo.push(new io(this.params.array[ao]));var so=new no({array:oo});return this.asn1ExtnValue=so,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",eo!==void 0&&(this.params=eo)},ge(u$2.asn1.x509.CertificatePolicies,u$2.asn1.x509.Extension),u$2.asn1.x509.PolicyInformation=function(eo){u$2.asn1.x509.PolicyInformation.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.DERSequence,no=to.DERObjectIdentifier,io=to.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var oo=[new no(this.params.policyoid)];if(this.params.array!==void 0){for(var ao=[],so=0;so<this.params.array.length;so++)ao.push(new io(this.params.array[so]));ao.length>0&&oo.push(new ro({array:ao}))}return new ro({array:oo}).getEncodedHex()},eo!==void 0&&(this.params=eo)},ge(u$2.asn1.x509.PolicyInformation,u$2.asn1.ASN1Object),u$2.asn1.x509.PolicyQualifierInfo=function(eo){u$2.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.DERSequence,no=to.DERIA5String,io=to.DERObjectIdentifier,oo=to.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return this.params.cps!==void 0?new ro({array:[new io({oid:"1.3.6.1.5.5.7.2.1"}),new no({str:this.params.cps})]}).getEncodedHex():this.params.unotice!=null?new ro({array:[new io({oid:"1.3.6.1.5.5.7.2.2"}),new oo(this.params.unotice)]}).getEncodedHex():void 0},eo!==void 0&&(this.params=eo)},ge(u$2.asn1.x509.PolicyQualifierInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.UserNotice=function(eo){u$2.asn1.x509.UserNotice.superclass.constructor.call(this,eo);var to=u$2.asn1.DERSequence;u$2.asn1.DERInteger;var ro=u$2.asn1.x509.DisplayText,no=u$2.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var io=[];return this.params.noticeref!==void 0&&io.push(new no(this.params.noticeref)),this.params.exptext!==void 0&&io.push(new ro(this.params.exptext)),new to({array:io}).getEncodedHex()},eo!==void 0&&(this.params=eo)},ge(u$2.asn1.x509.UserNotice,u$2.asn1.ASN1Object),u$2.asn1.x509.NoticeReference=function(eo){u$2.asn1.x509.NoticeReference.superclass.constructor.call(this,eo);var to=u$2.asn1.DERSequence,ro=u$2.asn1.DERInteger,no=u$2.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var io=[];if(this.params.org!==void 0&&io.push(new no(this.params.org)),this.params.noticenum!==void 0){for(var oo=[],ao=this.params.noticenum,so=0;so<ao.length;so++)oo.push(new ro(ao[so]));io.push(new to({array:oo}))}if(io.length==0)throw new Error("parameter is empty");return new to({array:io}).getEncodedHex()},eo!==void 0&&(this.params=eo)},ge(u$2.asn1.x509.NoticeReference,u$2.asn1.ASN1Object),u$2.asn1.x509.DisplayText=function(eo){u$2.asn1.x509.DisplayText.superclass.constructor.call(this,eo),this.hT="0c",eo!==void 0&&(eo.type==="ia5"?this.hT="16":eo.type==="vis"?this.hT="1a":eo.type==="bmp"&&(this.hT="1e"))},ge(u$2.asn1.x509.DisplayText,u$2.asn1.DERAbstractString),u$2.asn1.x509.ExtKeyUsage=function(eo){u$2.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,eo);var to=u$2.asn1;this.setPurposeArray=function(ro){this.asn1ExtnValue=new to.DERSequence;for(var no=0;no<ro.length;no++){var io=new to.DERObjectIdentifier(ro[no]);this.asn1ExtnValue.appendASN1Object(io)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",eo!==void 0&&eo.array!==void 0&&this.setPurposeArray(eo.array)},ge(u$2.asn1.x509.ExtKeyUsage,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityKeyIdentifier=function(eo){u$2.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,eo);var to=u$2,ro=to.asn1,no=ro.DERTaggedObject,io=ro.x509.GeneralNames;to.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var oo=new Array;this.asn1KID&&oo.push(new no({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&oo.push(new no({explicit:!1,tag:"a1",obj:new io([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&oo.push(new no({explicit:!1,tag:"82",obj:this.asn1CertSN}));var ao=new ro.DERSequence({array:oo});return this.asn1ExtnValue=ao,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(oo){if(oo.str!==void 0||oo.hex!==void 0)this.asn1KID=new u$2.asn1.DEROctetString(oo);else if(typeof oo=="object"&&u$2.crypto.Util.isKey(oo)||typeof oo=="string"&&oo.indexOf("BEGIN ")!=-1){var ao=oo;typeof oo=="string"&&(ao=Ee.getKey(oo));var so=Ee.getKeyID(ao);this.asn1KID=new u$2.asn1.DEROctetString({hex:so})}},this.setCertIssuerByParam=function(oo){oo.str!==void 0||oo.ldapstr!==void 0||oo.hex!==void 0||oo.certsubject!==void 0||oo.certissuer!==void 0?this.asn1CertIssuer=new u$2.asn1.x509.X500Name(oo):typeof oo=="string"&&oo.indexOf("BEGIN ")!=-1&&oo.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new u$2.asn1.x509.X500Name({certissuer:oo}))},this.setCertSNByParam=function(oo){if(oo.str!==void 0||oo.bigint!==void 0||oo.hex!==void 0)this.asn1CertSN=new u$2.asn1.DERInteger(oo);else if(typeof oo=="string"&&oo.indexOf("BEGIN ")!=-1&&oo.indexOf("CERTIFICATE")){var ao=new je;ao.readCertPEM(oo);var so=ao.getSerialNumberHex();this.asn1CertSN=new u$2.asn1.DERInteger({hex:so})}},this.oid="2.5.29.35",eo!==void 0&&(eo.kid!==void 0&&this.setKIDByParam(eo.kid),eo.issuer!==void 0&&this.setCertIssuerByParam(eo.issuer),eo.sn!==void 0&&this.setCertSNByParam(eo.sn),eo.issuersn!==void 0&&typeof eo.issuersn=="string"&&eo.issuersn.indexOf("BEGIN ")!=-1&&eo.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(eo.issuersn),this.setCertIssuerByParam(eo.issuersn)))},ge(u$2.asn1.x509.AuthorityKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectKeyIdentifier=function(eo){u$2.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,eo);var to=u$2.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(ro){if(ro.str!==void 0||ro.hex!==void 0)this.asn1KID=new to(ro);else if(typeof ro=="object"&&u$2.crypto.Util.isKey(ro)||typeof ro=="string"&&ro.indexOf("BEGIN")!=-1){var no=ro;typeof ro=="string"&&(no=Ee.getKey(ro));var io=Ee.getKeyID(no);this.asn1KID=new u$2.asn1.DEROctetString({hex:io})}},this.oid="2.5.29.14",eo!==void 0&&eo.kid!==void 0&&this.setKIDByParam(eo.kid)},ge(u$2.asn1.x509.SubjectKeyIdentifier,u$2.asn1.x509.Extension),u$2.asn1.x509.AuthorityInfoAccess=function(eo){u$2.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,eo),this.setAccessDescriptionArray=function(to){for(var ro=new Array,no=u$2.asn1,io=no.DERSequence,oo=no.DERObjectIdentifier,ao=no.x509.GeneralName,so=0;so<to.length;so++){var uo,lo=to[so];if(lo.ocsp!==void 0)uo=new io({array:[new oo({oid:"1.3.6.1.5.5.7.48.1"}),new ao({uri:lo.ocsp})]});else{if(lo.caissuer===void 0)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(lo));uo=new io({array:[new oo({oid:"1.3.6.1.5.5.7.48.2"}),new ao({uri:lo.caissuer})]})}ro.push(uo)}this.asn1ExtnValue=new io({array:ro})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",eo!==void 0&&eo.array!==void 0&&this.setAccessDescriptionArray(eo.array)},ge(u$2.asn1.x509.AuthorityInfoAccess,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectAltName=function(eo){u$2.asn1.x509.SubjectAltName.superclass.constructor.call(this,eo),this.setNameArray=function(to){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(to)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",eo!==void 0&&eo.array!==void 0&&this.setNameArray(eo.array)},ge(u$2.asn1.x509.SubjectAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.IssuerAltName=function(eo){u$2.asn1.x509.IssuerAltName.superclass.constructor.call(this,eo),this.setNameArray=function(to){this.asn1ExtnValue=new u$2.asn1.x509.GeneralNames(to)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",eo!==void 0&&eo.array!==void 0&&this.setNameArray(eo.array)},ge(u$2.asn1.x509.IssuerAltName,u$2.asn1.x509.Extension),u$2.asn1.x509.SubjectDirectoryAttributes=function(eo){u$2.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.DERSequence,no=to.ASN1Util.newObject,io=to.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var oo=[],ao=0;ao<this.params.array.length;ao++){var so=this.params.array[ao],uo={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(so.attr=="dateOfBirth")uo.seq[0].oid=io(so.attr),uo.seq[1].set[0]={gentime:so.str};else if(so.attr=="placeOfBirth")uo.seq[0].oid=io(so.attr),uo.seq[1].set[0]={utf8str:so.str};else if(so.attr=="gender")uo.seq[0].oid=io(so.attr),uo.seq[1].set[0]={prnstr:so.str};else if(so.attr=="countryOfCitizenship")uo.seq[0].oid=io(so.attr),uo.seq[1].set[0]={prnstr:so.str};else{if(so.attr!="countryOfResidence")throw new Error("unsupported attribute: "+so.attr);uo.seq[0].oid=io(so.attr),uo.seq[1].set[0]={prnstr:so.str}}oo.push(new no(uo))}var lo=new ro({array:oo});return this.asn1ExtnValue=lo,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.9",eo!==void 0&&(this.params=eo)},ge(u$2.asn1.x509.SubjectDirectoryAttributes,u$2.asn1.x509.Extension),u$2.asn1.x509.PrivateExtension=function(eo){u$2.asn1.x509.PrivateExtension.superclass.constructor.call(this,eo);var to=u$2,ro=to.lang.String.isHex,no=to.asn1,io=no.x509.OID.name2oid,oo=no.ASN1Util.newObject;this.params=null,this.setByParam=function(ao){this.oid=io(ao.extname),this.params=ao},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var ao=this.params.extn;if(typeof ao=="string"&&ro(ao))return ao;if(typeof ao=="object")try{return oo(ao).getEncodedHex()}catch{}throw new Error("unsupported extn value")},eo!=null&&this.setByParam(eo)},ge(u$2.asn1.x509.PrivateExtension,u$2.asn1.x509.Extension),u$2.asn1.x509.CRL=function(eo){u$2.asn1.x509.CRL.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERSequence,no=to.DERBitString,io=to.x509,oo=io.AlgorithmIdentifier,ao=io.TBSCertList;this.params=void 0,this.setByParam=function(so){this.params=so},this.sign=function(){var so=new ao(this.params).getEncodedHex(),uo=new u$2.crypto.Signature({alg:this.params.sigalg});uo.init(this.params.cakey),uo.updateHex(so);var lo=uo.sign();this.params.sighex=lo},this.getPEM=function(){return ae(this.getEncodedHex(),"X509 CRL")},this.getEncodedHex=function(){var so=this.params;if(so.tbsobj==null&&(so.tbsobj=new ao(so)),so.sighex==null&&so.cakey!=null&&this.sign(),so.sighex==null)throw new Error("sighex or cakey parameter not defined");var uo=[];return uo.push(so.tbsobj),uo.push(new oo({name:so.sigalg})),uo.push(new no({hex:"00"+so.sighex})),new ro({array:uo}).getEncodedHex()},eo!=null&&(this.params=eo)},ge(u$2.asn1.x509.CRL,u$2.asn1.ASN1Object),u$2.asn1.x509.TBSCertList=function(eo){u$2.asn1.x509.TBSCertList.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERInteger,no=to.DERSequence,io=to.DERTaggedObject;to.DERObjectIdentifier;var oo=to.x509,ao=oo.AlgorithmIdentifier,so=oo.Time,uo=oo.Extensions,lo=oo.X500Name;this.params=null,this.setByParam=function(co){this.params=co},this.getRevCertSequence=function(){for(var co=[],fo=this.params.revcert,mo=0;mo<fo.length;mo++){var go=[new ro(fo[mo].sn),new so(fo[mo].date)];fo[mo].ext!=null&&go.push(new uo(fo[mo].ext)),co.push(new no({array:go}))}return new no({array:co})},this.getEncodedHex=function(){var co=[],fo=this.params;if(fo.version!=null){var mo=fo.version-1,go=new ro({int:mo});co.push(go)}if(co.push(new ao({name:fo.sigalg})),co.push(new lo(fo.issuer)),co.push(new so(fo.thisupdate)),fo.nextupdate!=null&&co.push(new so(fo.nextupdate)),fo.revcert!=null&&co.push(this.getRevCertSequence()),fo.ext!=null){var yo=new uo(fo.ext);co.push(new io({tag:"a0",explicit:!0,obj:yo}))}return new no({array:co}).getEncodedHex()},eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.TBSCertList,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLEntry=function(eo){u$2.asn1.x509.CRLEntry.superclass.constructor.call(this);var to=u$2.asn1;this.setCertSerial=function(ro){this.sn=new to.DERInteger(ro)},this.setRevocationDate=function(ro){this.time=new to.x509.Time(ro)},this.getEncodedHex=function(){var ro=new to.DERSequence({array:[this.sn,this.time]});return this.TLV=ro.getEncodedHex(),this.TLV},eo!==void 0&&(eo.time!==void 0&&this.setRevocationDate(eo.time),eo.sn!==void 0&&this.setCertSerial(eo.sn))},ge(u$2.asn1.x509.CRLEntry,u$2.asn1.ASN1Object),u$2.asn1.x509.CRLNumber=function(eo){u$2.asn1.x509.CRLNumber.superclass.constructor.call(this,eo),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERInteger(this.params.num),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.20",eo!=null&&(this.params=eo)},ge(u$2.asn1.x509.CRLNumber,u$2.asn1.x509.Extension),u$2.asn1.x509.CRLReason=function(eo){u$2.asn1.x509.CRLReason.superclass.constructor.call(this,eo),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.21",eo!=null&&(this.params=eo)},ge(u$2.asn1.x509.CRLReason,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNonce=function(eo){u$2.asn1.x509.OCSPNonce.superclass.constructor.call(this,eo),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DEROctetString(this.params),this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.2",eo!=null&&(this.params=eo)},ge(u$2.asn1.x509.OCSPNonce,u$2.asn1.x509.Extension),u$2.asn1.x509.OCSPNoCheck=function(eo){u$2.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,eo),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new u$2.asn1.DERNull,this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.48.1.5",eo!=null&&(this.params=eo)},ge(u$2.asn1.x509.OCSPNoCheck,u$2.asn1.x509.Extension),u$2.asn1.x509.AdobeTimeStamp=function(eo){u$2.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,eo);var to=u$2.asn1,ro=to.DERInteger,no=to.DERBoolean,io=to.DERSequence,oo=to.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var ao=this.params,so=[new ro(1)];return so.push(new oo({uri:ao.uri})),ao.reqauth!=null&&so.push(new no(ao.reqauth)),this.asn1ExtnValue=new io({array:so}),this.asn1ExtnValue.getEncodedHex()},this.oid="1.2.840.113583.1.1.9.1",eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.AdobeTimeStamp,u$2.asn1.x509.Extension),u$2.asn1.x509.X500Name=function(eo){u$2.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var to=u$2.asn1,ro=to.x509,no=ro.RDN;this.setByString=function(io,oo){oo!==void 0&&(this.sRule=oo);var ao=io.split("/");ao.shift();for(var so=[],uo=0;uo<ao.length;uo++)if(ao[uo].match(/^[^=]+=.+$/))so.push(ao[uo]);else{var lo=so.length-1;so[lo]=so[lo]+"/"+ao[uo]}for(uo=0;uo<so.length;uo++)this.asn1Array.push(new no({str:so[uo],rule:this.sRule}))},this.setByLdapString=function(io,oo){oo!==void 0&&(this.sRule=oo);var ao=ro.X500Name.ldapToCompat(io);this.setByString(ao,oo)},this.setByObject=function(io,oo){for(var ao in oo!==void 0&&(this.sRule=oo),io)if(io.hasOwnProperty(ao)){var so=new no({str:ao+"="+io[ao],rule:this.sRule});this.asn1Array?this.asn1Array.push(so):this.asn1Array=[so]}},this.setByParam=function(io){var oo;io.rule!==void 0&&(this.sRule=io.rule),io.array!==void 0?this.paramArray=io.array:io.str!==void 0?this.setByString(io.str):io.ldapstr!==void 0?this.setByLdapString(io.ldapstr):io.hex!==void 0?this.hTLV=io.hex:io.certissuer!==void 0?((oo=new je).readCertPEM(io.certissuer),this.hTLV=oo.getIssuerHex()):io.certsubject!==void 0?((oo=new je).readCertPEM(io.certsubject),this.hTLV=oo.getSubjectHex()):typeof io=="object"&&io.certsubject===void 0&&io.certissuer===void 0&&this.setByObject(io)},this.getEncodedHex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var io=0;io<this.paramArray.length;io++){var oo={array:this.paramArray[io]};this.sRule!="utf8"&&(oo.rule=this.sRule);var ao=new no(oo);this.asn1Array.push(ao)}var so=new to.DERSequence({array:this.asn1Array});return this.hTLV=so.getEncodedHex(),this.hTLV},eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.X500Name,u$2.asn1.ASN1Object),u$2.asn1.x509.X500Name.compatToLDAP=function(eo){if(eo.substr(0,1)!=="/")throw"malformed input";var to=(eo=eo.substr(1)).split("/");return to.reverse(),(to=to.map(function(ro){return ro.replace(/,/,"\\,")})).join(",")},u$2.asn1.x509.X500Name.onelineToLDAP=function(eo){return u$2.asn1.x509.X500Name.compatToLDAP(eo)},u$2.asn1.x509.X500Name.ldapToCompat=function(eo){for(var to=eo.split(","),ro=!1,no=[],io=0;to.length>0;io++){var oo=to.shift();if(ro===!0){var ao=(no.pop()+","+oo).replace(/\\,/g,",");no.push(ao),ro=!1}else no.push(oo);oo.substr(-1,1)==="\\"&&(ro=!0)}return(no=no.map(function(so){return so.replace("/","\\/")})).reverse(),"/"+no.join("/")},u$2.asn1.x509.X500Name.ldapToOneline=function(eo){return u$2.asn1.x509.X500Name.ldapToCompat(eo)},u$2.asn1.x509.RDN=function(eo){u$2.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var to=u$2.asn1.x509.AttributeTypeAndValue;this.setByParam=function(ro){ro.rule!==void 0&&(this.sRule=ro.rule),ro.str!==void 0&&this.addByMultiValuedString(ro.str),ro.array!==void 0&&(this.paramArray=ro.array)},this.addByString=function(ro){this.asn1Array.push(new u$2.asn1.x509.AttributeTypeAndValue({str:ro,rule:this.sRule}))},this.addByMultiValuedString=function(ro){for(var no=u$2.asn1.x509.RDN.parseString(ro),io=0;io<no.length;io++)this.addByString(no[io])},this.getEncodedHex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var ro=0;ro<this.paramArray.length;ro++){var no=this.paramArray[ro];no.rule!==void 0&&this.sRule!="utf8"&&(no.rule=this.sRule);var io=new to(no);this.asn1Array.push(io)}var oo=new u$2.asn1.DERSet({array:this.asn1Array});return this.TLV=oo.getEncodedHex(),this.TLV},eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.RDN,u$2.asn1.ASN1Object),u$2.asn1.x509.RDN.parseString=function(eo){for(var to=eo.split(/\+/),ro=!1,no=[],io=0;to.length>0;io++){var oo=to.shift();if(ro===!0){var ao=(no.pop()+"+"+oo).replace(/\\\+/g,"+");no.push(ao),ro=!1}else no.push(oo);oo.substr(-1,1)==="\\"&&(ro=!0)}var so=!1,uo=[];for(io=0;no.length>0;io++){if(oo=no.shift(),so===!0){var lo=uo.pop();oo.match(/"$/)?(ao=(lo+"+"+oo).replace(/^([^=]+)="(.*)"$/,"$1=$2"),uo.push(ao),so=!1):uo.push(lo+"+"+oo)}else uo.push(oo);oo.match(/^[^=]+="/)&&(so=!0)}return uo},u$2.asn1.x509.AttributeTypeAndValue=function(eo){u$2.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var to=u$2,ro=to.asn1,no=ro.DERSequence,io=ro.DERUTF8String,oo=ro.DERPrintableString,ao=ro.DERTeletexString,so=ro.DERIA5String,uo=ro.DERVisibleString,lo=ro.DERBMPString,co=to.lang.String.isMail,fo=to.lang.String.isPrintable;this.setByParam=function(mo){if(mo.rule!==void 0&&(this.sRule=mo.rule),mo.ds!==void 0&&(this.dsType=mo.ds),mo.value===void 0&&mo.str!==void 0){var go=mo.str.match(/^([^=]+)=(.+)$/);if(!go)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=go[1],this.sValue=go[2]}else this.sType=mo.type,this.sValue=mo.value},this.setByString=function(mo,go){go!==void 0&&(this.sRule=go);var yo=mo.match(/^([^=]+)=(.+)$/);if(!yo)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(yo[1],yo[2])},this._getDsType=function(){var mo=this.sType,go=this.sValue,yo=this.sRule;return yo==="prn"?mo=="CN"&&co(go)?"ia5":fo(go)?"prn":"utf8":yo==="utf8"?mo=="CN"&&co(go)?"ia5":mo=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(mo,go,yo){yo!==void 0&&(this.sRule=yo),this.sType=mo,this.sValue=go},this.getValueObj=function(mo,go){if(mo=="utf8")return new io({str:go});if(mo=="prn")return new oo({str:go});if(mo=="tel")return new ao({str:go});if(mo=="ia5")return new so({str:go});if(mo=="vis")return new uo({str:go});if(mo=="bmp")return new lo({str:go});throw new Error("unsupported directory string type: type="+mo+" value="+go)},this.getEncodedHex=function(){this.dsType==null&&(this.dsType=this._getDsType());var mo=u$2.asn1.x509.OID.atype2obj(this.sType),go=this.getValueObj(this.dsType,this.sValue),yo=new no({array:[mo,go]});return this.TLV=yo.getEncodedHex(),this.TLV},eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.AttributeTypeAndValue,u$2.asn1.ASN1Object),u$2.asn1.x509.SubjectPublicKeyInfo=function(eo){u$2.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var to=u$2,ro=to.asn1,no=ro.DERInteger,io=ro.DERBitString,oo=ro.DERObjectIdentifier,ao=ro.DERSequence,so=ro.ASN1Util.newObject,uo=ro.x509.AlgorithmIdentifier,lo=to.crypto;lo.ECDSA,lo.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";return new ao({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var co=this.getASN1Object();return this.hTLV=co.getEncodedHex(),this.hTLV},this.setPubKey=function(co){try{if(co instanceof W$1){var fo=so({seq:[{int:{bigint:co.n}},{int:{int:co.e}}]}).getEncodedHex();this.asn1AlgId=new uo({name:"rsaEncryption"}),this.asn1SubjPKey=new io({hex:"00"+fo})}}catch{}try{if(co instanceof u$2.crypto.ECDSA){var mo=new oo({name:co.curveName});this.asn1AlgId=new uo({name:"ecPublicKey",asn1params:mo}),this.asn1SubjPKey=new io({hex:"00"+co.pubKeyHex})}}catch{}try{if(co instanceof u$2.crypto.DSA){mo=new so({seq:[{int:{bigint:co.p}},{int:{bigint:co.q}},{int:{bigint:co.g}}]}),this.asn1AlgId=new uo({name:"dsa",asn1params:mo});var go=new no({bigint:co.y});this.asn1SubjPKey=new io({hex:"00"+go.getEncodedHex()})}}catch{}},eo!==void 0&&this.setPubKey(eo)},ge(u$2.asn1.x509.SubjectPublicKeyInfo,u$2.asn1.ASN1Object),u$2.asn1.x509.Time=function(eo){u$2.asn1.x509.Time.superclass.constructor.call(this);var to=u$2.asn1,ro=to.DERUTCTime,no=to.DERGeneralizedTime;this.setTimeParams=function(io){this.timeParams=io},this.getEncodedHex=function(){var io=null;return io=this.timeParams!=null?this.type=="utc"?new ro(this.timeParams):new no(this.timeParams):this.type=="utc"?new ro:new no,this.TLV=io.getEncodedHex(),this.TLV},this.type="utc",eo!==void 0&&(eo.type!==void 0?this.type=eo.type:eo.str!==void 0&&(eo.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),eo.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=eo)},ge(u$2.asn1.x509.Time,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier=function(eo){u$2.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var to=u$2.asn1,ro=to.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.getEncodedHex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var io=null;for(var oo in ro)oo===this.nameAlg&&(io=ro[oo]);if(io!==null)return this.hTLV=io,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=to.x509.OID.name2obj(this.nameAlg));var ao=[this.asn1Alg];this.asn1Params!==null&&ao.push(this.asn1Params);var so=new to.DERSequence({array:ao});return this.hTLV=so.getEncodedHex(),this.hTLV},eo!==void 0&&(eo.name!==void 0&&(this.nameAlg=eo.name),eo.asn1params!==void 0&&(this.asn1Params=eo.asn1params),eo.paramempty!==void 0&&(this.paramEmpty=eo.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var no=this.nameAlg.toLowerCase();no.substr(-7,7)!=="withdsa"&&no.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new to.DERNull)}},ge(u$2.asn1.x509.AlgorithmIdentifier,u$2.asn1.ASN1Object),u$2.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},u$2.asn1.x509.GeneralName=function(eo){u$2.asn1.x509.GeneralName.superclass.constructor.call(this);var to={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},ro=u$2.asn1;ro.DERSequence;var no=ro.DEROctetString,io=ro.DERIA5String,oo=ro.DERTaggedObject,ao=ro.ASN1Object,so=ro.x509.X500Name,uo=ue;this.explicit=!1,this.setByParam=function(lo){var co=null;if(lo!==void 0){if(lo.rfc822!==void 0&&(this.type="rfc822",co=new io({str:lo[this.type]})),lo.dns!==void 0&&(this.type="dns",co=new io({str:lo[this.type]})),lo.uri!==void 0&&(this.type="uri",co=new io({str:lo[this.type]})),lo.dn!==void 0&&(this.type="dn",this.explicit=!0,co=typeof lo.dn=="string"?new so({str:lo.dn}):lo.dn instanceof u$2.asn1.x509.X500Name?lo.dn:new so(lo.dn)),lo.ldapdn!==void 0&&(this.type="dn",this.explicit=!0,co=new so({ldapstr:lo.ldapdn})),lo.certissuer!==void 0){this.type="dn",this.explicit=!0;var fo=null;if((go=lo.certissuer).match(/^[0-9A-Fa-f]+$/),go.indexOf("-----BEGIN ")!=-1&&(fo=uo(go)),fo==null)throw"certissuer param not cert";(yo=new je).hex=fo;var mo=yo.getIssuerHex();(co=new ao).hTLV=mo}if(lo.certsubj!==void 0){this.type="dn",this.explicit=!0;var go,yo;if(fo=null,(go=lo.certsubj).match(/^[0-9A-Fa-f]+$/),go.indexOf("-----BEGIN ")!=-1&&(fo=uo(go)),fo==null)throw"certsubj param not cert";(yo=new je).hex=fo,mo=yo.getSubjectHex(),(co=new ao).hTLV=mo}if(lo.ip!==void 0){this.type="ip",this.explicit=!1;var vo,Ao=lo.ip,ho="malformed IP address";if(Ao.match(/^[0-9.]+[.][0-9.]+$/)){if((vo=function(po){po=(po=(po=po.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return po.split(/,/).map(function(Mo,xo,wo){var bo=parseInt(Mo);if(bo<0||255<bo)throw"integer not in range 0-255";return("00"+bo.toString(16)).slice(-2)}).join("")}catch(Mo){throw"malformed integer array string: "+Mo}}("["+Ao.split(".").join(",")+"]")).length!==8)throw ho}else if(Ao.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))vo=function(po){var Mo="malformed IPv6 address";if(!po.match(/^[0-9A-Fa-f:]+$/))throw Mo;var xo=(po=po.toLowerCase()).split(":").length-1;if(xo<2)throw Mo;var wo=":".repeat(7-xo+2),bo=(po=po.replace("::",wo)).split(":");if(bo.length!=8)throw Mo;for(var _o=0;_o<8;_o++)bo[_o]=("0000"+bo[_o]).slice(-4);return bo.join("")}(Ao);else{if(!Ao.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw ho;vo=Ao}co=new no({hex:vo})}if(this.type==null)throw"unsupported type in params="+lo;this.asn1Obj=new oo({explicit:this.explicit,tag:to[this.type],obj:co})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},eo!==void 0&&this.setByParam(eo)},ge(u$2.asn1.x509.GeneralName,u$2.asn1.ASN1Object),u$2.asn1.x509.GeneralNames=function(eo){u$2.asn1.x509.GeneralNames.superclass.constructor.call(this);var to=u$2.asn1;this.setByParamArray=function(ro){for(var no=0;no<ro.length;no++){var io=new to.x509.GeneralName(ro[no]);this.asn1Array.push(io)}},this.getEncodedHex=function(){return new to.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,eo!==void 0&&this.setByParamArray(eo)},ge(u$2.asn1.x509.GeneralNames,u$2.asn1.ASN1Object),u$2.asn1.x509.OID=new function(eo){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.objCache={},this.name2obj=function(to){if(this.objCache[to]!==void 0)return this.objCache[to];if(this.name2oidList[to]===void 0)throw"Name of ObjectIdentifier not defined: "+to;var ro=this.name2oidList[to],no=new u$2.asn1.DERObjectIdentifier({oid:ro});return this.objCache[to]=no,no},this.atype2obj=function(to){if(this.objCache[to]!==void 0)return this.objCache[to];var ro;if(to.match(/^\d+\.\d+\.[0-9.]+$/))ro=to;else if(this.atype2oidList[to]!==void 0)ro=this.atype2oidList[to];else{if(this.name2oidList[to]===void 0)throw"AttributeType name undefined: "+to;ro=this.name2oidList[to]}var no=new u$2.asn1.DERObjectIdentifier({oid:ro});return this.objCache[to]=no,no}},u$2.asn1.x509.OID.oid2name=function(eo){var to=u$2.asn1.x509.OID.name2oidList;for(var ro in to)if(to[ro]==eo)return ro;return""},u$2.asn1.x509.OID.oid2atype=function(eo){var to=u$2.asn1.x509.OID.atype2oidList;for(var ro in to)if(to[ro]==eo)return ro;return eo},u$2.asn1.x509.OID.name2oid=function(eo){if(eo.match(/^[0-9.]+$/))return eo;var to=u$2.asn1.x509.OID.name2oidList;return to[eo]===void 0?"":to[eo]},u$2.asn1.x509.X509Util={},u$2.asn1.x509.X509Util.newCertPEM=function(eo){var to=u$2.asn1.x509;return to.TBSCertificate,new to.Certificate(eo).getPEM()},W$1.getPosArrayOfChildrenFromHex=function(eo){return we.getChildIdx(eo,0)},W$1.getHexValueArrayOfChildrenFromHex=function(eo){var to,ro=we.getV,no=ro(eo,(to=W$1.getPosArrayOfChildrenFromHex(eo))[0]),io=ro(eo,to[1]),oo=ro(eo,to[2]),ao=ro(eo,to[3]),so=ro(eo,to[4]),uo=ro(eo,to[5]),lo=ro(eo,to[6]),co=ro(eo,to[7]),fo=ro(eo,to[8]);return(to=new Array).push(no,io,oo,ao,so,uo,lo,co,fo),to},W$1.prototype.readPrivateKeyFromPEMString=function(eo){var to=ue(eo),ro=W$1.getHexValueArrayOfChildrenFromHex(to);this.setPrivateEx(ro[1],ro[2],ro[3],ro[4],ro[5],ro[6],ro[7],ro[8])},W$1.prototype.readPKCS5PrvKeyHex=function(eo){var to=W$1.getHexValueArrayOfChildrenFromHex(eo);this.setPrivateEx(to[1],to[2],to[3],to[4],to[5],to[6],to[7],to[8])},W$1.prototype.readPKCS8PrvKeyHex=function(eo){var to,ro,no,io,oo,ao,so,uo,lo=we,co=lo.getVbyListEx;if(lo.isASN1HEX(eo)===!1)throw new Error("not ASN.1 hex string");try{to=co(eo,0,[2,0,1],"02"),ro=co(eo,0,[2,0,2],"02"),no=co(eo,0,[2,0,3],"02"),io=co(eo,0,[2,0,4],"02"),oo=co(eo,0,[2,0,5],"02"),ao=co(eo,0,[2,0,6],"02"),so=co(eo,0,[2,0,7],"02"),uo=co(eo,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(to,ro,no,io,oo,ao,so,uo)},W$1.prototype.readPKCS5PubKeyHex=function(eo){var to=we,ro=to.getV;if(to.isASN1HEX(eo)===!1)throw new Error("keyHex is not ASN.1 hex string");var no=to.getChildIdx(eo,0);if(no.length!==2||eo.substr(no[0],2)!=="02"||eo.substr(no[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var io=ro(eo,no[0]),oo=ro(eo,no[1]);this.setPublic(io,oo)},W$1.prototype.readPKCS8PubKeyHex=function(eo){var to=we;if(to.isASN1HEX(eo)===!1)throw new Error("not ASN.1 hex string");if(to.getTLVbyListEx(eo,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var ro=to.getTLVbyListEx(eo,0,[1,0]);this.readPKCS5PubKeyHex(ro)},W$1.prototype.readCertPubKeyHex=function(eo,to){var ro,no;(ro=new je).readCertHex(eo),no=ro.getPublicKeyHex(),this.readPKCS8PubKeyHex(no)},W$1.prototype.sign=function(eo,to){var ro,no=(ro=eo,u$2.crypto.Util.hashString(ro,to));return this.signWithMessageHash(no,to)},W$1.prototype.signWithMessageHash=function(eo,to){var ro=K(u$2.crypto.Util.getPaddedDigestInfoHex(eo,to,this.n.bitLength()),16);return Ie(this.doPrivate(ro).toString(16),this.n.bitLength())},W$1.prototype.signPSS=function(eo,to,ro){var no,io=(no=se(eo),u$2.crypto.Util.hashHex(no,to));return ro===void 0&&(ro=-1),this.signWithMessageHashPSS(io,to,ro)},W$1.prototype.signWithMessageHashPSS=function(eo,to,ro){var no,io=re(eo),oo=io.length,ao=this.n.bitLength()-1,so=Math.ceil(ao/8),uo=function(Ao){return u$2.crypto.Util.hashHex(Ao,to)};if(ro===-1||ro===void 0)ro=oo;else if(ro===-2)ro=so-oo-2;else if(ro<-2)throw new Error("invalid salt length");if(so<oo+ro+2)throw new Error("data too long");var lo="";ro>0&&(lo=new Array(ro),new G$1().nextBytes(lo),lo=String.fromCharCode.apply(String,lo));var co=re(uo(se("\0\0\0\0\0\0\0\0"+io+lo))),fo=[];for(no=0;no<so-ro-oo-2;no+=1)fo[no]=0;var mo=String.fromCharCode.apply(String,fo)+""+lo,go=Te(co,mo.length,uo),yo=[];for(no=0;no<mo.length;no+=1)yo[no]=mo.charCodeAt(no)^go.charCodeAt(no);var vo=65280>>8*so-ao&255;for(yo[0]&=~vo,no=0;no<oo;no++)yo.push(co.charCodeAt(no));return yo.push(188),Ie(this.doPrivate(new l$3(yo)).toString(16),this.n.bitLength())},W$1.prototype.verify=function(eo,to){if((to=to.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var ro=K(to,16),no=this.n.bitLength();if(ro.bitLength()>no)return!1;var io=this.doPublic(ro).toString(16);if(io.length+3!=no/4)return!1;var oo=xe(io.replace(/^1f+00/,""));if(oo.length==0)return!1;var ao,so=oo[0];return oo[1]==(ao=eo,u$2.crypto.Util.hashString(ao,so))},W$1.prototype.verifyWithMessageHash=function(eo,to){if(to.length!=Math.ceil(this.n.bitLength()/4))return!1;var ro=K(to,16);if(ro.bitLength()>this.n.bitLength())return 0;var no=xe(this.doPublic(ro).toString(16).replace(/^1f+00/,""));return no.length!=0&&(no[0],no[1]==eo)},W$1.prototype.verifyPSS=function(eo,to,ro,no){var io=function(oo){return u$2.crypto.Util.hashHex(oo,ro)}(se(eo));return no===void 0&&(no=-1),this.verifyWithMessageHashPSS(io,to,ro,no)},W$1.prototype.verifyWithMessageHashPSS=function(eo,to,ro,no){if(to.length!=Math.ceil(this.n.bitLength()/4))return!1;var io,oo=new l$3(to,16),ao=function(po){return u$2.crypto.Util.hashHex(po,ro)},so=re(eo),uo=so.length,lo=this.n.bitLength()-1,co=Math.ceil(lo/8);if(no===-1||no===void 0)no=uo;else if(no===-2)no=co-uo-2;else if(no<-2)throw new Error("invalid salt length");if(co<uo+no+2)throw new Error("data too long");var fo=this.doPublic(oo).toByteArray();for(io=0;io<fo.length;io+=1)fo[io]&=255;for(;fo.length<co;)fo.unshift(0);if(fo[co-1]!==188)throw new Error("encoded message does not end in 0xbc");var mo=(fo=String.fromCharCode.apply(String,fo)).substr(0,co-uo-1),go=fo.substr(mo.length,uo),yo=65280>>8*co-lo&255;if((mo.charCodeAt(0)&yo)!=0)throw new Error("bits beyond keysize not zero");var vo=Te(go,mo.length,ao),Ao=[];for(io=0;io<mo.length;io+=1)Ao[io]=mo.charCodeAt(io)^vo.charCodeAt(io);Ao[0]&=~yo;var ho=co-uo-no-2;for(io=0;io<ho;io+=1)if(Ao[io]!==0)throw new Error("leftmost octets not zero");if(Ao[ho]!==1)throw new Error("0x01 marker not found");return go===re(ao(se("\0\0\0\0\0\0\0\0"+so+String.fromCharCode.apply(String,Ao.slice(-no)))))},W$1.SALT_LEN_HLEN=-1,W$1.SALT_LEN_MAX=-2,W$1.SALT_LEN_RECOVER=-2,je.hex2dn=function(eo,to){to===void 0&&(to=0);var ro=new je;return we.getTLV(eo,to),ro.getX500Name(eo).str},je.hex2rdn=function(eo,to){if(to===void 0&&(to=0),eo.substr(to,2)!=="31")throw new Error("malformed RDN");for(var ro=new Array,no=we.getChildIdx(eo,to),io=0;io<no.length;io++)ro.push(je.hex2attrTypeValue(eo,no[io]));return(ro=ro.map(function(oo){return oo.replace("+","\\+")})).join("+")},je.hex2attrTypeValue=function(eo,to){var ro=we,no=ro.getV;if(to===void 0&&(to=0),eo.substr(to,2)!=="30")throw new Error("malformed attribute type and value");var io=ro.getChildIdx(eo,to);io.length!==2||eo.substr(io[0],2);var oo=no(eo,io[0]),ao=u$2.asn1.ASN1Util.oidHexToInt(oo);return u$2.asn1.x509.OID.oid2atype(ao)+"="+re(no(eo,io[1]))},je.getPublicKeyFromCertHex=function(eo){var to=new je;return to.readCertHex(eo),to.getPublicKey()},je.getPublicKeyFromCertPEM=function(eo){var to=new je;return to.readCertPEM(eo),to.getPublicKey()},je.getPublicKeyInfoPropOfCertPEM=function(eo){var to,ro,no=we.getVbyList,io={};return io.algparam=null,(to=new je).readCertPEM(eo),ro=to.getPublicKeyHex(),io.keyhex=no(ro,0,[1],"03").substr(2),io.algoid=no(ro,0,[0,0],"06"),io.algoid==="2a8648ce3d0201"&&(io.algparam=no(ro,0,[0,1],"06")),io},je.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Ce,be=[(Ce=new je,Ce.readCertPEM(function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVS@	PPNErtNVONtVWNZR}@]nU\0ZaZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\x07\\QN>Z	N\\Q^B[QqnS=\b\\QN>Zwp\\Q^B[QqnZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaPPNvVQ^fWX|gVup[N^ROO^NQttV]NQPPNt|PttVONZU|C\b\\@@e^Xv{[vTtd8`nyO@\x07ebN[bqx=ng?	S^w@|XAz|qUTwfzn]Bu<qs_ae\\y<}u`eRAoE`_\\s\0r|b{rp_o<oC@o=x\bw_cUUZPApQevD\\FxFo\x07FgE=<sq[p<coqyn>TEpP@aSC_YDU8\0|8TB?c>r\\=rp`pcwP}c\0PP_\\RS\\EPVSy8x`\0?R|NP	P>}A^VP}Ex\bU\x07Za=syDw}>Ya\x078wPp[pRnn\brU^dE8U?a\bcW|<FEbbupn^`ZNr	sof[wA}e{\\z}w[YDQ|dt=wC	Nv\x07bR\x07Z@@U|ZAYpFsabCBB\\`wrqxsYW8uFyWdaWezeUeA_8VoVupvY[TD[OYdpO\bC[wX\\O]=[QRpV\0d`\x07N\0RXt^Z}vEpdC=\bY?\x07=V}?^W\bad|qN@Ww>@PycaqANE]asPcE^OB_VA?>wzeftac	Z	guf\bF]\x07DCP?znNYf	uaYu[`\x07=b|v]Bp=RAS``\\PRDW]_`UXdUg=SuqwVFDeB	D8{B>\\sPY\x07bEU	FQXz\0@\x07`zsqgfD\0[WY\bPeZc}	\0bx?Rfed\x07}BUe\x07|Uo\0y?\bsSXZOSBCgbFqf\0Bs?b?d<VE\\Zzns\\d@?dPvf\\{}_\0Sd[<q_YB\x07Y`Ffg=sY>{t<fu]x\x07rFNtZONNTwbQO\\ZO=TN>bqQt^dOOaAFXw=	PCVxsv?{`a\bvS8YQ[aNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aNZOt[cU_ZROaNQN^U<ZN=TP`\0T`Vo@Q^ROPbNNAVPN^P\0{y\0Bs\\8\0R[z]w??qZP?NpgdenSuvv?>|f_?UpYPcQ\\gCb8zxtSvsOQNg>[\\\0\bx\b_o@8\0g`Z<PyUE`8yu}\\g{@`s`zUgErRtve{YdCvoO@>WFDtABNp\0feUWszpQaEYNAc]^xB[@]BDAN8\b}XA=E\x07nO}Pud8TA	?yPrVv{\\>E]o`BO^RE^X[W[rEU?x\bf>V	OUwY=>X[\\E`tW[8}VwpF\x07BQcnrPF}yUtd8<Doe_\b[oOVU\x07ep@pYY\0cegY{r	?\bAbq?ff8}UaXoN_D]_X_8yozYFT`N{`\\{zvu?\bDWT}=_<\x07StX	Nx\x07\0\b	\0aT=c@ucnWfR[vf>RFxAFV}{N`dN^\\<eawBPxx}quT=|{T_R@Fp^Y<ZevRsWaZ]V	CVrRVtAAc[	Qp|d|tqoQ=T|XX	=u\\N8XNCx\\aU>wz	X<e@Vc?dy\\|^FEq|=p`pBdF@bs^d<]vp\\^TZ	P\bZ\b\\YNNSZ_\\w^|TsD8db	_	Y\\o^Cw>Z\0x\\^aN]wWf\bA}	C^d_{\x07ZC@\by]gY@E	BFY?OsaqbDcVgQbZeFc	ovtucxnq|<TnuyXRveYFOegCpAs{YTe|>bE<OXsSqCBWD_SVepfvCCUg]z	ZvQ[\0s|U>pFz\b=OwT``fNJJ:::::R[Q-PR_aVSVPNaR:::::")),Ce)];function Se(eo,to){var ro=eo.getIssuerHex();if(ro===eo.getSubjectHex())return eo.verifySignature(eo.getPublicKey());var no=function(io,oo){for(var ao=0,so=oo;ao<so.length;ao++){var uo=so[ao];if(uo.getSubjectHex()===io)return uo}}(ro,to);return!!no&&eo.verifySignature(no.getPublicKey())!==!1&&Se(no,to)}function Le(eo){return eo.getIssuerHex()!==eo.getSubjectHex()&&Se(eo,be)}(function(eo){var to=new je;typeof eo=="string"?to.readCertPEM(eo):to.readCertHex(eo.hex),Le(to),be.push(to)})(function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}(":::::ORTV[-PR_aVSVPNaR:::::ZVVTU	PPONrtNVONtVWNW=_SVw	VE=ZN=TP`\0T`Vo@Q^ROPbNZVTSZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	R]ZN=TN>bRPtTn?bf?FZ_NQtfQc^^YQNq`gdSp?cyZ^P^fQc^^QQNWQ^aRvZPNTP`\0T`Vo@Q^RWN_fapzFqSFwfbOndSnzyuYz[oaNrS=\bZQNAZaN\\aZ	[QSnS=\b[aNBZQZ\\aZ	[QSnZVTaZ^P^fQc^^TRWQawR^ZNATN>bRPNU^zc}nzyg	R^ZNATN>bROU^zc}nzyg	RbZOVTN>bRPtYoTyuoz}}f`Bwo?=\x07RQN\\Ot[cONZO>Wyfd\x07	gdb\x07RaN]Ot[cONZZPRuupz_@feWyZ`bVfWX|gVup[N^xOSugnec|fdy\x07ndB{^T\x07}fdB\0ndRf?FZVVPVwN[Otx\0uxvTF=ON^RSNN\\PNtENZVVPPtXPNtRN?=?]q[VD|{\\oyo`oOu}F	SA\x07e`tn[t	u\b8^a]qx\bE_^\x07ZN?[QC\0yuOpybY8r\\RPAS=8rUq\0E8>xean^e\bf]Y`XO}{C[Ur^?\0x[SRXvVQ\\CFr}QnAPRQ\x07FO=Yw\0_TePCOFV@|\x07N>ROXcDrT<>bW<ssO?NOT{^s]uU\0gS\bBffsfE\0AfDyQEZR`]XBo|Qw}yYdwwTvOFcBndUz^\\{]	b=^yQYSTQ`]\0?tR{WRUun\\\0bVe_E|VWWV|r	Ao\0	F`fdzCnRtq\br	\b8eBp=Z\\TRaadc}@Eub`\x07quuNqAdF\0aUay{}x>tgVz`	_YBFwu_q?egt8v[o\x008	wTQcrA	<z{DZoEE^rZTrpaZQzqpBY]^zt8[bQv}yEWw	XDYQB\0QB\bx_^X]|uEDtPf[n[r_bpB[bE}?ung|bnU|NYOoedY_tvXySZfYP\x07\x07dWV]OE^\bOFwA}<uXoO}_NDz8aon\x07zWOfcv@?>snfqu@FeEx^\\\bVfuO`\\\0tSg]zDU}QrAT|	OZV|OvpVD<sN@z`<_cSrNCW>?=Au?g_8v{|}}WF>Sr>QBxO	d_D}eBb?Uq^b	[y}x]}{?P|BQtecTB[pQBW>|p|nfv\0zU\x07xOO}WqwE=<PURZy@X8r\\]u=<pPNRNNn\\OtaO<ZOETPdPT`NTT8RVOQ^^`SuO`gdSp?cyVRg\bo?B=VR[OZO=TN>bqQt^dOO`Fy\x07WadZcAD	peXybcW@}Qf\\QNsOt[cU`ZRTQNdtOaAFXw=	PCVxsv?{`a\bvS8YQ[aN]Ot[cU_ZONsEROaNQN^U<ZNTN>bqQ^RNVOOwN[Otx\0uxvTF=ON^SNN\\PNtRNrx	a[}tP_g8FbD\0^\0qt<f88ufuN]^}]gp\bqYudF88Fas_Ef`	?^x>X}esa{>\\r?eE]CC_cZ[vQs		>gX[szONg=^pn=<e]nbSz\bZvac\b[w^nA_`vP|@8w[}nQobe=??oRYf{vpRxcC}yCd>8[NDx{Ne\\t8oou=guC\x07>>g\x07vb}ACd	``Ntq\0yC[Q{|ynpNQqSqzxF<_PFDw<]Bnnu>F<XgU_Zf\\\\A=gu\\codOwQ]oQ<f>gv_pwozwC}xX>C`c]suEdfW?cbeo\b`BbyR@eFTUwSud=t]sS\\onc	XSq	{\0\x07DvAVBbnTqEE[QzDyqF`bF}R=Q?VeDo<Vzb\0w}D}NZ\0t}^?OyFP\bVaVNrTNYqe?[NRYTSQby@yzWvT`wQo}y]c_WgxBYCy	RNRg@\x07NZCaaq8?`	^`?ryD	=obzw?E]Ou\x07]n@>bVzqAQT?@_zo@}CxWVTUsAYdNd?{APQr8{P]]AZ>aR\0[D<z?Tr@`u@X|YDwd_<p<>zWE>]\0=X`\b@uucp|^_Qb@uZouTX^o\0\\{PCq{ug\x078^f[YQAWad8FNqxFQE?ZOo	}RnO\bsQc	xyccn=nxvs>bDBf\b\bW\\TuTnvAO^U\0QXC>xx8FxRFf<tJ:::::R[Q-PR_aVSVPNaR:::::"));var Oe,Be=(Oe="$$FIVE_EVENT$$",typeof Symbol=="undefined"?"$Symbol<".concat(Oe,">$"):Symbol(Oe));function Qe(eo){return eo[Be]||(eo[Be]={}),eo[Be]}var ke=function(){function eo(){}return eo.prototype.hasListener=function(to){var ro=Qe(this);return ro&&ro[to]&&ro[to].length>0},eo.prototype.on=function(to,ro,no){var io=this,oo=Qe(this);return oo[to]||(oo[to]=[]),oo[to].push([ro,no||!1]),function(){return io.off(to,ro)}},eo.prototype.once=function(to,ro){return this.on(to,ro,!0)},eo.prototype.off=function(to,ro){if(to!==void 0){var no,io=Qe(this);if(io[to]||(io[to]=[]),ro!==void 0){for(var oo=0;oo<io[to].length&&io[to][oo][0]!==ro;oo++);oo<io[to].length&&io[to].splice(oo,1)}else io[to].length=0}else(no=this)[Be]||delete no[Be]},eo.prototype.emit=function(to){for(var ro=[],no=1;no<arguments.length;no++)ro[no-1]=arguments[no];for(var io=!1,oo=Qe(this),ao=oo[to]||[],so=0,uo=ao.slice();so<uo.length;so++){var lo=uo[so],co=lo[0],fo=lo[1],mo=fo!==void 0&&fo,go=co.apply(void 0,ro);mo&&this.off(to,co),go===!1&&(io=!0)}return io},eo}();function Pe(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to]}var Ue=typeof performance!="undefined"&&performance.timing!==void 0?performance.timing.navigationStart:Date.now(),Re=typeof performance!="undefined"?function(){return Ue+performance.now()}:function(){return Date.now()};function _e(eo){Object.freeze(eo);var to=typeof eo=="function",ro=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(eo).forEach(function(no){!ro.call(eo,no)||to&&(no==="caller"||no==="callee"||no==="arguments")||eo[no]===null||typeof eo[no]!="object"&&typeof eo[no]!="function"||Object.isFrozen(eo[no])||_e(eo[no])}),eo}var Ye=/^([^.]+)(\.([^.]+))*$/;function Fe(eo){return/^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|$)){4}$/.test(eo)}function He(eo,to){return Ye.test(eo)&&Ye.test(to)&&function(ro,no){if(ro==="*")return!0;var io=ro.split(".").reverse(),oo=no.split(".").reverse();if(io.length<=1)return ro===no;for(var ao=0;ao<io.length;ao++)if(io[ao]!==oo[ao])return!1;return!0}(eo,to)}var Ve=[/\.([0-9a-z]+)\.jsonp([\?\#].*)?$/i,/jsonp_([0-9a-z]+)([\?\#].*)?$/i],Ge=_e(JSON.parse(function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}("h-/y|pnyu|/9-/xr;p|z/9-/yvn{wvn;p|z/9-/rnyrr;p|z/9-/rnyrr;p{/9-/uv;p|z/9-/uv;p{/9-/ywpq{;p|z/9-/pnyp{|qr;vr/9-/rnyrr;w}/9-/rnyrr:pq{;p|z/-j"))),Ke=function(eo){function to(ro,no,io){return eo.call(this,"[NETWORK]: response error(type: ".concat(no,", reason: ").concat(io,"): ").concat(ro))||this}return t$2.__extends(to,eo),to}(Error),qe=function(eo){function to(ro,no,io){var oo=eo.call(this,"[NETWORK]: response error(type: ".concat(no,", status: ").concat(io,"): ").concat(ro))||this;return oo.httpStatus=io,oo}return t$2.__extends(to,eo),to}(Error);(function(eo){function to(ro,no){return eo.call(this,"[NETWORK]: request abort(type: ".concat(no,"): ").concat(ro))||this}t$2.__extends(to,eo)})(Error);var We=function(eo){function to(ro,no,io){return eo.call(this,"[NETWORK]: request timeout(type: ".concat(no,", timeout: ").concat(io,"ms): ").concat(ro))||this}return t$2.__extends(to,eo),to}(Error);function Xe(eo){for(var to=0,ro=Ve;to<ro.length;to++){var no=ro[to],io=eo.match(no);if(io)return"jsonp_"+io[1]}return null}function Ze(eo){return Xe(eo)!==null}function Je(eo){return Ve.reduce(function(to,ro){return to.replace(ro,"")},eo)}function $e(eo){var to=eo.match(/^[0-9a-z]+\:\/\/(([^:/?#]*)(?::[0-9]+)?)/);return to?to[2]:location.hostname}(function(eo){function to(ro,no,io){return eo.call(this,"[NETWORK]: request forbidden(type: ".concat(no,", reason: ").concat(io,"): ").concat(ro))||this}t$2.__extends(to,eo)})(Error);var et=function(eo){function to(){return eo!==null&&eo.apply(this,arguments)||this}return t$2.__extends(to,eo),to}(ke);function tt(eo,to,ro,no,io){return to===void 0&&(to={}),ro===void 0&&(ro=Pe),no===void 0&&(no=Pe),io===void 0&&(io=Pe),new Promise(function(oo,ao){var so,uo=to.allowHosts?Ge.concat(to.allowHosts):Ge.slice(),lo=$e(eo),co=Xe(eo);if(location.hostname.length!==0&&!Fe(location.hostname)&&Ge.filter(function(Po){return He(Po,location.hostname)}).length===0&&!Fe(lo)&&uo.filter(function(Po){return He(Po,lo)}).length===0){var fo=co?"Script":"XMLHttpRequest",mo=new Ke(eo,fo,"request host(".concat(lo,") is not allowed"));return no(mo),ao(mo),void((so=to.networkSubscribe)===null||so===void 0||so.emit("network",eo,fo,"forbidden",mo.message))}if(co){var go=window,yo=null,vo=!1,Ao=Re(),ho=document.createElement("script");go[co]=function(Po){var Co,Do,zo=Re(),Ro=zo-Ao;if(delete go[co],ho.parentNode&&ho.parentNode.removeChild(ho),yo!==null&&(window.clearTimeout(yo),yo=null),vo!==!0){if(Po.indexOf("data:")!==0){var Lo=new qe(eo,"Script",500);return no(Lo),ao(Lo),void((Co=to.networkSubscribe)===null||Co===void 0||Co.emit("network",eo,"Script","error",Lo.message))}var $o=Po.split(","),jo=($o[0].match(/:(.*?);/)||[])[1],Wo=$o[1];if(to.responseType==="arraybuffer"||to.responseType==="blob"){for(var Ko=atob($o[1]),Jo=Ko.length,Go=new Uint8Array(Jo),Xo=0;Xo<Jo;Xo++)Go[Xo]=Ko.charCodeAt(Xo);Wo=to.responseType==="arraybuffer"?Go.buffer:new Blob([Go],{type:jo})}var va={body:Wo,meta:{source:eo,requestTime:Ao,responseTime:zo,costs:Ro,headers:{}}};ro(va),oo(va),(Do=to.networkSubscribe)===null||Do===void 0||Do.emit("network",eo,"Script","ok",JSON.stringify(va.meta)),vo=!0}},ho.src=eo,document.body.appendChild(ho),typeof to.timeout=="number"&&(yo=window.setTimeout(function(){var Po;if(yo=null,vo!==!0){vo=!0;var Co=new We(eo,"Script",to.timeout||NaN);no(Co),ao(Co),(Po=to.networkSubscribe)===null||Po===void 0||Po.emit("network",eo,"Script","timeout",Co.message)}},to.timeout))}else{var po=Re(),Mo=!1,xo=new XMLHttpRequest,wo=function(){xo&&(xo.removeEventListener("timeout",bo,!1),xo.removeEventListener("progress",_o,!1),xo.removeEventListener("load",To,!1),xo.removeEventListener("error",No,!1)),xo=null,wo=Pe},bo=function(){var Po;if(Mo!==!0){Mo=!0,wo();var Co=new We(eo,"XMLHttpRequest",to.timeout||NaN);no(Co),ao(Co),(Po=to.networkSubscribe)===null||Po===void 0||Po.emit("network",eo,"XMLHttpRequest","timeout",Co.message)}},_o=function(Po){Mo!==!0&&Po.lengthComputable&&(Po.total<=0||io(Po.loaded/Po.total))},To=function(Po){var Co;if(Mo!==!0){var Do=this.status;if(Do===0||Do>=200&&Do<400){Mo=!0,wo();var zo=Re(),Ro=zo-po,Lo=function(Wo){if(!Wo)return{};for(var Ko={},Jo=Wo.trim().split(`
`),Go=0;Go<Jo.length;Go++){var Xo=Jo[Go],va=Xo.indexOf(":"),tu=Xo.slice(0,va).trim().toLowerCase(),Zs=Xo.slice(va+1).trim();Zs&&(Ko[tu]?Ko[tu]+=", "+Zs:Ko[tu]=Zs)}return Ko}(this.getAllResponseHeaders()),$o=Po.total,jo={body:this.response,meta:{source:eo,requestTime:po,responseTime:zo,costs:Ro,headers:Lo,size:$o}};ro(jo),oo(jo),(Co=to.networkSubscribe)===null||Co===void 0||Co.emit("network",eo,"XMLHttpRequest","ok",JSON.stringify(jo.meta))}else No.call(this)}},No=function(){var Po;if(Mo!==!0){Mo=!0,wo();var Co=new qe(eo,"XMLHttpRequest",this.status);no(Co),ao(Co),(Po=to.networkSubscribe)===null||Po===void 0||Po.emit("network",eo,"XMLHttpRequest","error",Co.message)}};xo.addEventListener("timeout",bo,!1),xo.addEventListener("progress",_o,!1),xo.addEventListener("load",To,!1),xo.addEventListener("error",No,!1),to.responseType&&(xo.responseType=to.responseType),typeof to.timeout=="number"&&(xo.timeout=to.timeout),xo.open("GET",eo,!0),xo.send(null)}})}var it={};function nt(eo,to,ro,no,io,oo){return to===void 0&&(to={}),ro===void 0&&(ro=Pe),no===void 0&&(no=Pe),io===void 0&&(io=Pe),new Promise(function(ao,so){var uo,lo=to.allowHosts?Ge.concat(to.allowHosts):Ge.slice(),co=$e(eo);if(location.hostname.length!==0&&!Fe(location.hostname)&&Ge.filter(function(Ao){return He(Ao,location.hostname)}).length===0&&!Fe(co)&&lo.filter(function(Ao){return He(Ao,co)}).length===0){var fo=new Ke(eo,"Image","request host(".concat(co,") is not allowed"));return no(fo),so(fo),void((uo=to.networkSubscribe)===null||uo===void 0||uo.emit("network",eo,"Image","forbidden",fo.message))}var mo=oo!=null?oo:new Image,go=Re(),yo=!1,vo=null;typeof to.timeout=="number"&&(vo=window.setTimeout(function(){var Ao;if(mo.onload=Pe,mo.onerror=Pe,vo=null,yo!==!0){yo=!0;var ho=new We(eo,"Image",to.timeout);no(ho),so(ho),(Ao=to.networkSubscribe)===null||Ao===void 0||Ao.emit("network",eo,"Image","timeout",ho.message)}},to.timeout)),mo.onload=function(){var Ao;if(mo.onload=Pe,mo.onerror=Pe,vo!==null&&(clearTimeout(vo),vo=null),yo!==!0){var ho=Re();yo=!0;var po={body:mo,meta:{headers:{},source:eo,requestTime:go,responseTime:ho,costs:ho-go}};io(1),ro(po),ao(po),(Ao=to.networkSubscribe)===null||Ao===void 0||Ao.emit("network",eo,"Image","ok",JSON.stringify(po.meta))}},mo.onerror=function(){var Ao;if(mo.onload=Pe,mo.onerror=Pe,vo!==null&&(clearTimeout(vo),vo=null),yo!==!0){yo=!0;var ho=new qe(eo,"Image",0);no(ho),so(ho),(Ao=to.networkSubscribe)===null||Ao===void 0||Ao.emit("network",eo,"Image","ok",ho.message)}},io(0),mo.src=eo})}var rt=function(){if(typeof window!="undefined"){var eo=window;return eo.requestAnimationFrame||eo.mozRequestAnimationFrame||eo.webkitRequestAnimationFrame||eo.msRequestAnimationFrame||function(to){return setTimeout(to,16)}}return function(to){return setTimeout(to,16)}}(),st=16,ot=function(){function eo(){this.frames=[],this.stoped=!1,this.time=Re(),this.loop=this.loop.bind(this),this.loop()}return Object.defineProperty(eo,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new eo),this.sharedInstance},enumerable:!1,configurable:!0}),eo.getFrameTime=function(){return st},eo.prototype.loop=function(){if(!this.stoped){var to=Re(),ro=to-this.time;this.time=to;var no=[];st=ro;for(var io=0,oo=this.frames;io<oo.length;io++){var ao=oo[io];if(ao.delay>0)ao.delay=ao.delay-1;else{try{ao.callback(to,ro)}catch(so){console.error(so)}ao.once&&no.push(ao)}}no.length>0&&(this.frames=this.frames.filter(function(so){return no.indexOf(so)===-1})),rt(this.loop)}},eo.prototype.remove=function(to){var ro=this.frames.indexOf(to);ro>=0&&this.frames.splice(ro,1)},eo.prototype.add=function(to,ro,no,io){var oo=this;ro===void 0&&(ro=!1),no===void 0&&(no=0),io===void 0&&(io=5);var ao={callback:to,once:ro,delay:no,order:io};return this.frames.push(ao),this.frames.sort(function(so,uo){return so.order-uo.order}),function(){return oo.remove(ao)}},eo.prototype.disponse=function(){this.stoped=!0,this.frames.length=0},eo}(),at="//vrlab-public.ljcdn.com/",ut="//vrlab-image[1-4].ljcdn.com/",ct="//global-public.realsee-cdn.com/",At="//global-image-[1-4].realsee-cdn.com/";function lt(eo,to){var ro,no=eo.split("?")[0],io=no.split(".").pop();if(io==="jpeg"&&(io="jpg"),io!=="png"&&io!=="jpg")return eo;var oo="";if(to.format!==void 0&&to.format!==io&&(oo+="/format/".concat(to.format)),to.cut!==void 0&&(oo+="/cut/".concat(to.cut[2],"x").concat(to.cut[3],"x").concat(to.cut[0],"x").concat(to.cut[1])),to.quality!==void 0){var ao=(ro=to.format)!==null&&ro!==void 0?ro:io;ao&&["jpg","webp","tpg","heif","avif"].indexOf(ao)>=0&&(oo+="/quality/".concat(to.quality))}if(to.size!==void 0){var so=eo.match(/\/cube_(\d+)\//);(so?Number(so[1]):NaN)!==Number(to.size)&&(oo+="/thumbnail/".concat(to.size,"x"))}return oo.length&&(oo="?imageMogr2"+oo),no+oo}function ht(eo,to){return eo.indexOf(at)>=0?(/\.basis(\?|$)/.test(eo)&&to.basisLoaderInitialized!==!0&&(eo=eo.replace(/\.basis(\?|$)/,".jpg$1")),lt(function(no,io){var oo=io.split("."),ao=oo[0],so=oo.slice(1);if(ao==="texture")return no.replace(at,ut.replace("[1-4]","3"));if(ao==="pano"||ao==="pano_luminance")switch(so[0],so[1]){case"front":case"left":case"up":return no.replace(at,ut.replace("[1-4]","1"));case"down":case"right":case"back":return no.replace(at,ut.replace("[1-4]","2"))}else if(ao==="pano_tile"||ao==="pano_tile_luminance"){so[0],so[1];var uo=so[2],lo=so[3],co=so[4],fo=Math.pow(2,Number(uo))*Number(lo)+Number(co);if(!isNaN(fo))return no.replace(at,"//vr-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(fo%2+1)))}return no.replace(at,ut.replace("[1-4]","3"))}(eo,to.key),to)):eo.indexOf(ct)>=0?(/\.basis(\?|$)/.test(eo)&&to.basisLoaderInitialized!==!0&&(eo=eo.replace(/\.basis(\?|$)/,".jpg$1")),lt(function(no,io){var oo=io.split("."),ao=oo[0],so=oo.slice(1);if(ao==="texture")return no.replace(ct,At.replace("[1-4]","3"));if(ao==="pano"||ao==="pano_luminance")switch(so[0],so[1]){case"front":case"left":case"up":return no.replace(ct,At.replace("[1-4]","1"));case"down":case"right":case"back":return no.replace(ct,At.replace("[1-4]","2"))}else if(ao==="pano_tile"||ao==="pano_tile_luminance"){so[0],so[1];var uo=so[2],lo=so[3],co=so[4],fo=Math.pow(2,Number(uo))*Number(lo)+Number(co);if(!isNaN(fo))return no.replace(ct,"//global-tile-[1-2].realsee-cdn.com/".replace("[1-2]",String(fo%2+1)))}return no.replace(ct,At.replace("[1-4]","3"))}(eo,to.key),to)):eo.indexOf("//test-vr-public.realsee-cdn.com/")>=0?(/\.basis(\?|$)/.test(eo)&&to.basisLoaderInitialized!==!0&&(eo=eo.replace(/\.basis(\?|$)/,".jpg$1")),lt((ro=eo,to.key,ro.replace("//test-vr-public.realsee-cdn.com/","//test-vr-image.realsee-cdn.com/")),to)):eo;var ro}var dt=function(eo){function to(){var ro=eo!==null&&eo.apply(this,arguments)||this;return ro.floorIndex=0,ro.needsRender=!0,ro}return t$2.__extends(to,eo),to}(r$3.Mesh),gt=function(eo){function to(){var ro=eo!==null&&eo.apply(this,arguments)||this;return ro.needsRender=!0,ro.enableTransparent=!0,ro}return t$2.__extends(to,eo),to.prototype.getTransparent=function(){return this.enableTransparent},to.prototype.setTransparent=function(ro){this.enableTransparent=ro,this.traverse(function(no){no instanceof dt&&no.material.forEach(function(io){io.transparent=ro})})},to.prototype.getMaterial=function(){var ro=null;return this.traverse(function(no){if(ro===null&&no instanceof dt){var io=no.material[0];ro={pano0:io.pano0,pano1:io.pano1,modelAlpha:io.modelAlpha,progress:io.progress,useBlackTransition:io.useBlackTransition,perspToOrtho:io.perspToOrtho,opacity:io.opacity}}}),ro},to.prototype.setMaterial=function(ro){this.traverse(function(no){no instanceof dt&&no.material.forEach(function(io){ro.pano0!==void 0&&(io.pano0=ro.pano0),ro.pano1!==void 0&&(io.pano1=ro.pano1),ro.modelAlpha!==void 0&&(io.modelAlpha=ro.modelAlpha),ro.progress!==void 0&&(io.progress=ro.progress),ro.useBlackTransition!==void 0&&(io.useBlackTransition=ro.useBlackTransition),ro.perspToOrtho!==void 0&&(io.perspToOrtho=ro.perspToOrtho),ro.opacity!==void 0&&(io.opacity=ro.opacity)})})},to.prototype.disposeMaterial=function(){this.traverse(function(ro){if(ro instanceof dt){var no=[];ro.material.forEach(function(io){var oo=io.uniforms;Object.keys(oo).map(function(ao){if(/^pano\d\_/.test(ao))oo[ao].value=null;else{var so=oo[ao].value;so&&typeof so.dispose=="function"&&no.indexOf(so)===-1&&(oo[ao].value=null,no.push(so))}}),io.dispose()}),no.forEach(function(io){return io.dispose()})}})},to.prototype.disposeGeometry=function(){this.traverse(function(ro){ro instanceof dt&&ro.geometry.dispose()})},to}(r$3.Group),pt=function(eo){function to(){var ro=eo!==null&&eo.apply(this,arguments)||this;return ro.floorIndex=0,ro}return t$2.__extends(to,eo),to}(gt),Mt=function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}(`{vs|z-rp@-z|qryPr{rH{vs|z-sy|n-}r}a|\\u|Hn\bv{t-rp@-[|znyHn\bv{t-rp@-cvr]|vv|{Hn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-Il}nlrr\x07K0v{pyqr-I?l}nlrr\x07K0v{pyqr-Ip|y|l}nlrr\x07K|vq-znv{56-
--0v{pyqr-Ilrr\x07K--0v{pyqr-I?lrr\x07K--0v{pyqr-Ip|y|lrr\x07K--0v{pyqr-Iortv{{|znylrr\x07K--0v{pyqr-Iqrsny{|znylrr\x07K--rpA-n{s|zrq-J-rpA5}|vv|{9->;=6H--rpA-z]|vv|{-J-z|qrycvrZnv\x07-7-n{s|zrqH--[|zny-J-{|znyv	r5n{s|zrq[|zny6H--cvr]|vv|{-J-:z]|vv|{;\x07\b	H--|yq]|vv|{-J-5z|qryZnv\x07-7-n{s|zrq6;\x07\b	H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-n{s|zrqH--<<-\u4FEE\u6B63\u6B63\u4EA4\u76F8\u673A\u6A21\u62DF--rp@-pnzrn[|zny-J-5z|qrycvrZnv\x07-7-rpA5=;=9-=;=9->;=9-=;=66;\x07\b	H--sy|n-|u|Qvn{pr-J-zn\x075=;=>9-q|5pnzrn[|zny9-z|qryPr{r-:-pnzrn]|vv|{66H--tyl]|vv|{;\x07-J-zv\x075-tyl]|vv|{;\x079-tyl]|vv|{;\x07-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H--tyl]|vv|{;\b-J-zv\x075-tyl]|vv|{;\b9-tyl]|vv|{;\b-7-5-tyl]|vv|{;	-<-|u|Qvn{pr-69-}r}a|\\u|-6H\f`),ft=function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}("0qrsv{r-OYNPXlP\\Y\\_-rpA5=;=EC9-=;>=C9-=;>AF9->;=60qrsv{r-aNb-C;?E@>EB?{vs|z-nz}yrPor-}n{|=lzn}H{vs|z-znA-}n{|=lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|=lyzv{n{prZn}H0r{qvs{vs|z-nz}yrPor-}n{|>lzn}H{vs|z-znA-}n{|>lznv\x07H0vs-qrsv{rq5b`RlYbZV[N[PR6{vs|z-nz}yrPor-}n{|>lyzv{n{prZn}H0r{qvs{vs|z-rp@-qvssrH{vs|z-rp@-rzvvrH{vs|z-rp@-}rpynH{vs|z-sy|n-uv{v{rH{vs|z-sy|n-r\x07}|rH{vs|z-sy|n-|}npv\bH{vs|z-sy|n-z|qryNy}unH{vs|z-sy|n-}|trH0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6{vs|z-rp?-}n{|cvqr|lv	rH{vs|z-znA-}n{|cvqr|lznv\x07H{vs|z-sy|n-}n{|cvqr|lny}unH{vs|z-nz}yr?Q-}n{|cvqr|lzn}H0r{qvsn\bv{t-rp@-|yq]|vv|{H0v{pyqr-Ip|zz|{K0v{pyqr-I}npxv{tK0v{pyqr-Ip|y|l}nlsntzr{K0v{pyqr-Il}nlsntzr{K0v{pyqr-I?l}nlsntzr{K0v{pyqr-Izn}l}nlsntzr{K0v{pyqr-Iny}unzn}l}nlsntzr{K0v{pyqr-In|zn}l}nlsntzr{K0v{pyqr-Iyvtuzn}l}nlsntzr{K0v{pyqr-Irzvvrzn}l}nlsntzr{K0v{pyqr-Ir{zn}l}nlsntzr{K0v{pyqr-Itnqvr{zn}l}nlsntzr{K0v{pyqr-Is|tl}nlsntzr{K0v{pyqr-IoqsK0v{pyqr-Iyvtul}nlortv{K0v{pyqr-Iyvtul}u|{tl}nlsntzr{Krp?-|P||q5rp@-rp|6-\n--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-\n--rpA-qvssrP|y|-J-rpA5qvssr;to9-|}npv\b6H--_rsyrprqYvtu-rsyrprqYvtu-J-_rsyrprqYvtu5rp@5=;=69-rp@5=;=69-rp@5=;=69-rp@5=;=66H--rp@-|nyRzvvr_nqvn{pr-J-rzvvrH--0v{pyqr-Izn}lsntzr{K--0v{pyqr-Ip|y|lsntzr{K--0v{pyqr-Iny}unzn}lsntzr{K--0v{pyqr-Iny}unrlsntzr{K--0v{pyqr-I}rpynzn}lsntzr{K--0v{pyqr-I{|znylsntzr{lortv{K--0v{pyqr-I{|znylsntzr{lzn}K--0v{pyqr-Irzvvrzn}lsntzr{K--0v{pyqr-Iyvtul}u|{tlsntzr{K--0v{pyqr-Iyvtulsntzr{lortv{K--<<-\u8C03\u6574\u66DD\u5149\u503C--vnqvn{pr-J-vnqvn{pr-7-r\x07}|rH--0v{pyqr-Iyvtulsntzr{lzn}K--0v{pyqr-Iyvtulsntzr{lr{qK--0v{pyqr-In|zn}lsntzr{K--<<-\u51CF\u5C11\u65B9\u5411\u5149\u5BF9\u6A21\u578B\u7684\u5F71\u54CD--rp@-|t|v{tYvtu-J-5rsyrprqYvtu;qvrpQvssr-7-=;?6-8----rsyrprqYvtu;v{qvrpQvssr-8----rsyrprqYvtu;v{qvrp`}rpyn-8----|nyRzvvr_nqvn{prH--<<-\u4FEE\u590D\u9ED1\u8272\u9762\u7247\u7684\u95EE\u9898--vs-5|t|v{tYvtu;-K-=;=-\v\v-|t|v{tYvtu;t-K-=;=-\v\v-|t|v{tYvtu;o-K-=;=6-\n----tylSntP|y|-J-rpA5|t|v{tYvtu9-qvssrP|y|;n6H--\f-ryr-\n----tylSntP|y|-J-rpA5OYNPXlP\\Y\\_;\x07\b	9-qvssrP|y|;n6H--\f--rp@-}n{|=a|crr\x07-J-5|yq]|vv|{-:-}n{|=lznv\x07h@j;\x07\b	6-7-zn@5}n{|=lznv\x076H--rp@-}n{|>a|crr\x07-J-5|yq]|vv|{-:-}n{|>lznv\x07h@j;\x07\b	6-7-zn@5}n{|>lznv\x076H--rpA-}n{|P|y|H--rpA-}n{|=P|y|-J-r\x07rPor5}n{|=lzn}9-}n{|=a|crr\x076H--rpA-}n{|>P|y|-J-r\x07rPor5}n{|>lzn}9-}n{|>a|crr\x076H--0vs-qrsv{rq5b`RlYbZV[N[PR6----}n{|=P|y|;n-J->;=-:-r\x07rPor5}n{|=lyzv{n{prZn}9-}n{|=a|crr\x076;H----}n{|>P|y|;n-J->;=-:-r\x07rPor5}n{|>lyzv{n{prZn}9-}n{|>a|crr\x076;H--0r{qvs--0vs-qrsv{rq5b`RlOYNPXla_N[`VaV\\[6----sy|n-oynpx]|tr-J-np|5:?;=-7-}|tr-8->;=6H----}n{|P|y|-J-zv\x075}n{|=P|y|9-OYNPXlP\\Y\\_9-zv{5>;=9-oynpx]|tr66H----}n{|P|y|-J-zv\x075}n{|P|y|9-}n{|>P|y|9-zn\x075=;=9-oynpx]|tr-:-?;=66H--0ryr----}n{|P|y|-J-zv\x075}n{|=P|y|9-}n{|>P|y|9-}|tr6H--0r{qvs--0vs-qrsv{rq5b`Rl]N[\\lcVQR\\6----rp@-pnzrna|crr\x07-J-|yq]|vv|{-:-pnzrn]|vv|{H----rpA-zn}P||q-J-rpA5pnzrna|crr\x079->;=6-7-}n{|cvqr|lznv\x07H----rp?--J-rp?5------=;B-8-zn}P||q;\x07-<-zn}P||q;	-<-}n{|cvqr|lv	r;\x079------=;B-:-zn}P||q;\b-<-zn}P||q;	-<-}n{|cvqr|lv	r;\b----6H----rpA-vqr|P|y|-J-r\x07r?Q5}n{|cvqr|lzn}9-6H----sy|n-znpu-J-5>;=-:-r}5=;=9-zn}P||q;	66-7-5>;=-:-r}5=;B9-no5;\x07-:-=;B666-7-5>;=-:-r}5=;B9-no5;\b-:-=;B666H----sy|n-ny}un-J-pynz}5=;=9->;=9-B;=-7-5>;=-:-pynz}5qvn{pr59-rp?5=;B9-=;B66-<-=;BB-9-=;=9->;=666H----}n{|P|y|-J-zv\x075}n{|P|y|9-vqr|P|y|9-znpu-7-ny}un-7-}n{|cvqr|lny}un6H--0r{qvs--tylSntP|y|-J-rpA5tylSntP|y|;to9-|}npv\b6H--tylSntP|y|-J-zv\x075}n{|P|y|9-tylSntP|y|9-z|qryNy}un6H\f");function yt(){return typeof document=="undefined"?{}:document.createElementNS("http://www.w3.org/1999/xhtml","img")}var mt=yt();mt.width=mt.height=8;var vt=new r$3.Texture(mt);vt.name="EMPTY_TEXTURE";var Nt=new r$3.CubeTexture([mt,mt,mt,mt,mt,mt]);Nt.name="EMPTY_CUBE_TEXTURE",vt.dispose=Nt.dispose=function(){};var Dt=Object.assign({modelAlpha:new r$3.Uniform(0),progress:new r$3.Uniform(0),pano0_map:new r$3.Uniform(Nt),pano0_luminanceMap:new r$3.Uniform(null),pano0_matrix:new r$3.Uniform(new r$3.Matrix4),pano1_map:new r$3.Uniform(Nt),pano1_luminanceMap:new r$3.Uniform(null),pano1_matrix:new r$3.Uniform(new r$3.Matrix4),modelCenter:new r$3.Uniform(new r$3.Vector3),perspToOrtho:new r$3.Uniform(0)},{exposure:new r$3.Uniform(1),emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Et=function(eo){function to(ro){var no,io,oo,ao,so,uo,lo;ro===void 0&&(ro={});var co=eo.call(this,{vertexShader:Mt,fragmentShader:ft,uniforms:r$3.UniformsUtils.clone(Dt),defines:{USE_MAP:!0,USE_UV:!0,USE_LUMINANCE:!1,USE_BLACK_TRANSITION:!1,USE_PANO_VIDEO:!1},blending:r$3.NoBlending,lights:!0})||this;return Object.defineProperties(co,{pano0:{get:function(){return this.uniforms.pano0_map.value===Nt?null:{map:this.uniforms.pano0_map.value,luminanceMap:this.uniforms.pano0_luminanceMap.value,matrix:this.uniforms.pano0_matrix.value.clone()}},set:function(fo){fo===null?(this.uniforms.pano0_map.value=Nt,this.uniforms.pano0_luminanceMap.value=null,this.uniforms.pano0_matrix.value.identity()):(this.uniforms.pano0_map.value=fo.map,this.uniforms.pano0_luminanceMap.value=fo.luminanceMap,this.uniforms.pano0_matrix.value.copy(fo.matrix));var mo=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==mo&&(this.defines.USE_LUMINANCE=mo,this.needsUpdate=!0)}},pano1:{get:function(){return this.uniforms.pano1_map.value===Nt?null:{map:this.uniforms.pano1_map.value,luminanceMap:this.uniforms.pano1_luminanceMap.value,matrix:this.uniforms.pano1_matrix.value.clone()}},set:function(fo){fo===null?(this.uniforms.pano1_map.value=Nt,this.uniforms.pano1_luminanceMap.value=null,this.uniforms.pano1_matrix.value.identity()):(this.uniforms.pano1_map.value=fo.map,this.uniforms.pano1_luminanceMap.value=fo.luminanceMap,this.uniforms.pano1_matrix.value.copy(fo.matrix));var mo=this.uniforms.pano0_luminanceMap.value!==null&&this.uniforms.pano1_luminanceMap.value!==null;this.defines.USE_LUMINANCE!==mo&&(this.defines.USE_LUMINANCE=mo,this.needsUpdate=!0)}},modelAlpha:{get:function(){return this.uniforms.modelAlpha.value},set:function(fo){this.uniforms.modelAlpha.value=fo}},progress:{get:function(){return this.uniforms.progress.value},set:function(fo){this.uniforms.progress.value=fo}},useBlackTransition:{get:function(){return this.defines.USE_BLACK_TRANSITION},set:function(fo){this.defines.USE_BLACK_TRANSITION!==fo&&(this.defines.USE_BLACK_TRANSITION=fo,this.needsUpdate=!0)}},opacity:{get:function(){return this.uniforms.opacity.value},set:function(fo){this.uniforms.opacity.value=fo;var mo=fo<1?r$3.NormalBlending:r$3.NoBlending;mo!==this.blending&&(this.blending=mo,this.needsUpdate=!0)}},perspToOrtho:{get:function(){return this.uniforms.perspToOrtho.value},set:function(fo){this.uniforms.perspToOrtho.value=fo}}}),co.pano0=(no=ro.pano0)!==null&&no!==void 0?no:null,co.pano1=(io=ro.pano1)!==null&&io!==void 0?io:null,co.modelAlpha=(oo=ro.modelAlpha)!==null&&oo!==void 0?oo:1,co.progress=(ao=ro.progress)!==null&&ao!==void 0?ao:0,co.useBlackTransition=(so=ro.useBlackTransition)!==null&&so!==void 0&&so,co.perspToOrtho=(uo=ro.perspToOrtho)!==null&&uo!==void 0?uo:0,co.opacity=(lo=ro.opacity)!==null&&lo!==void 0?lo:1,co.originOpacity=1,co}return t$2.__extends(to,eo),to}(r$3.ShaderMaterial),wt=function(eo){function to(ro){var no=ro.preserveDrawingBuffer,io=no===void 0||no,oo=ro.backgroundColor,ao=oo===void 0?1579548:oo,so=ro.backgroundAlpha,uo=so===void 0?1:so,lo=ro.pixelRatio,co=lo===void 0?1:lo,fo=ro.antialias,mo=fo!==void 0&&fo,go=eo.call(this,{antialias:mo,preserveDrawingBuffer:io,alpha:uo<1})||this;return go.setPixelRatio(co),go.setClearColor(ao,uo),go.outputEncoding=r$3.sRGBEncoding,go.autoClear=!0,go}return t$2.__extends(to,eo),to}(r$3.WebGLRenderer),It=function(eo){function to(){return eo!==null&&eo.apply(this,arguments)||this}return t$2.__extends(to,eo),to.prototype.add=function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.prototype.add.apply(this,ro)},to.prototype.remove=function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.prototype.remove.apply(this,ro)},to}(r$3.Scene),Tt=2*Math.PI,xt=Math.PI/2;function jt(eo){return eo>0&&eo<=Tt?eo:(eo%Tt+Tt)%Tt}var zt,Ct,bt,St,Lt=function(eo){function to(ro){var no=eo.call(this,ro,1,.1,1e3)||this;return no.pose={longitude:0,latitude:0,fov:ro,distance:0,offset:new r$3.Vector3},no.computePose(),no}return t$2.__extends(to,eo),to.prototype.computePose=function(){var ro=this.getWorldDirection(new r$3.Vector3);return this.pose.longitude=jt(-Math.atan2(ro.x,-ro.z)),this.pose.latitude=-Math.asin(ro.y/1),this.pose.fov=this.fov,this.pose.distance=0,this.pose.offset.copy(this.position),this},to.prototype.setFromPose=function(ro){var no,io,oo,ao,so,uo=jt((no=ro.longitude)!==null&&no!==void 0?no:this.pose.longitude),lo=Math.max(1e-4-xt,Math.min(xt-1e-4,(io=ro.latitude)!==null&&io!==void 0?io:this.pose.latitude)),co=(oo=ro.fov)!==null&&oo!==void 0?oo:this.pose.fov,fo=(ao=ro.distance)!==null&&ao!==void 0?ao:this.pose.distance,mo=(so=ro.offset)!==null&&so!==void 0?so:this.pose.offset,go=function(yo){var vo=Math.abs(Math.cos(yo.latitude));return new r$3.Vector3(-Math.sin(yo.longitude)*vo,-Math.sin(yo.latitude),-Math.cos(yo.longitude)*vo)}({longitude:uo,latitude:lo}).normalize();return this.position.set(0,0,0),this.lookAt(go),this.position.add(mo).sub(go.clone().setLength(fo)),this.fov!==co&&(this.fov=co,this.updateProjectionMatrix()),this.updateMatrixWorld(),this.pose.longitude=uo,this.pose.latitude=lo,this.pose.fov=co,this.pose.distance=fo,this.pose.offset.copy(mo),this},to.prototype.copyPose=function(){return{longitude:this.pose.longitude,latitude:this.pose.latitude,fov:this.pose.fov,distance:this.pose.distance,offset:this.pose.offset.clone()}},to}(r$3.PerspectiveCamera),Ot=function(){function eo(to,ro,no){this.x=to,this.y=ro,this.z=no}return eo.prototype.copy=function(to){return this.x=to.x,this.y=to.y,this.z=to.z,this},eo.prototype.set=function(to,ro,no){return this.x=to,this.y=ro,this.z=no,this},eo.prototype.fromArray=function(to,ro){return ro===void 0&&(ro=0),this.x=to[ro],this.y=to[ro+1],this.z=to[ro+2],this},eo.prototype.add=function(to){return this.x+=to.x,this.y+=to.y,this.z+=to.z,this},eo.prototype.multiplyScalar=function(to){return this.x*=to,this.y*=to,this.z*=to,this},eo.prototype.subVectors=function(to,ro){return this.x=to.x-ro.x,this.y=to.y-ro.y,this.z=to.z-ro.z,this},eo.prototype.dot=function(to){return this.x*to.x+this.y*to.y+this.z*to.z},eo.prototype.cross=function(to){var ro=this.x,no=this.y,io=this.z;return this.x=no*to.z-io*to.y,this.y=io*to.x-ro*to.z,this.z=ro*to.y-no*to.x,this},eo.prototype.crossVectors=function(to,ro){var no=to.x,io=to.y,oo=to.z,ao=ro.x,so=ro.y,uo=ro.z;return this.x=io*uo-oo*so,this.y=oo*ao-no*uo,this.z=no*so-io*ao,this},eo.prototype.clone=function(){return new eo(this.x,this.y,this.z)},eo}(),Bt=function(eo,to,ro){this.extents=eo,this.startIndex=to,this.endIndex=ro},Qt=function(eo,to){this.triangle=eo,this.intersectionPoint=to},kt=(zt=new Ot(0,0,0),Ct=new Ot(0,0,0),bt=new Ot(0,0,0),St=new Ot(0,0,0),function(eo,to,ro,no,io,oo){Ct.subVectors(to,eo),bt.subVectors(ro,eo),St.crossVectors(Ct,bt);var ao,so=io.dot(St);if(so>0){if(oo)return null;ao=1}else{if(!(so<0))return null;ao=-1,so=-so}zt.subVectors(no,eo);var uo=ao*io.dot(bt.crossVectors(zt,bt));if(uo<0)return null;var lo=ao*io.dot(Ct.cross(zt));if(lo<0||uo+lo>so)return null;var co=-ao*zt.dot(St);if(co<0)return null;var fo=co/so;return new Ot(0,0,0).copy(io).multiplyScalar(fo).add(no)}),Pt=function(eo,to){this.min=eo,this.max=to};function Ut(eo,to,ro){var no=new Pt(0,0);to.x>=0?(no.min=(ro.extents[0]-eo.x)*to.x,no.max=(ro.extents[3]-eo.x)*to.x):(no.min=(ro.extents[3]-eo.x)*to.x,no.max=(ro.extents[0]-eo.x)*to.x);var io=new Pt(0,0);if(to.y>=0?(io.min=(ro.extents[1]-eo.y)*to.y,io.max=(ro.extents[4]-eo.y)*to.y):(io.min=(ro.extents[4]-eo.y)*to.y,io.max=(ro.extents[1]-eo.y)*to.y),no.min>io.max||io.min>no.max)return!1;io.min>no.min&&(no.min=io.min),io.max<no.max&&(no.max=io.max);var oo=new Pt(0,0);return to.z>=0?(oo.min=(ro.extents[2]-eo.z)*to.z,oo.max=(ro.extents[5]-eo.z)*to.z):(oo.min=(ro.extents[5]-eo.z)*to.z,oo.max=(ro.extents[2]-eo.z)*to.z),!(no.min>oo.max||oo.min>no.max)&&(oo.min>no.min&&(no.min=oo.min),oo.max<no.max&&(no.max=oo.max),!(no.max<0))}function Rt(eo,to,ro,no,io){if(ro>=no)return[0,0,0,0,0,0];for(var oo=1/0,ao=1/0,so=1/0,uo=-1/0,lo=-1/0,co=-1/0,fo=ro,mo=void 0,go=void 0;fo<no;fo++)(go=to[mo=6*eo[fo]])<oo&&(oo=go),(go=to[mo+1])<ao&&(ao=go),(go=to[mo+2])<so&&(so=go),(go=to[mo+3])>uo&&(uo=go),(go=to[mo+4])>lo&&(lo=go),(go=to[mo+5])>co&&(co=go);return[oo-io,ao-io,so-io,uo+io,lo+io,co+io]}var _t$1=function(){function eo(){}return eo.prototype.create=function(to){return this.trianglesArray=to,this},eo.prototype.splitNode=function(to){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");for(var ro=this.trianglesArray,no=ro.length/9,io=new Uint32Array(no),oo=new Float32Array(6*no),ao=[],so=1/0,uo=1/0,lo=1/0,co=-1/0,fo=-1/0,mo=-1/0,go=0,yo=0,vo=0,Ao=void 0,ho=void 0,po=void 0,Mo=void 0,xo=void 0,wo=void 0,bo=void 0;go<no;go++,yo+=6,vo+=9)io[go]=go,Ao=Mo=ro[vo],(bo=ro[vo+3])<Ao&&(Ao=bo),bo>Mo&&(Mo=bo),(bo=ro[vo+6])<Ao&&(Ao=bo),bo>Mo&&(Mo=bo),ho=xo=ro[vo+1],(bo=ro[vo+4])<ho&&(ho=bo),bo>xo&&(xo=bo),(bo=ro[vo+7])<ho&&(ho=bo),bo>xo&&(xo=bo),po=wo=ro[vo+2],(bo=ro[vo+5])<po&&(po=bo),bo>wo&&(wo=bo),(bo=ro[vo+8])<po&&(po=bo),bo>wo&&(wo=bo),Ao<so&&(so=Ao),Mo>co&&(co=Mo),ho<uo&&(uo=ho),xo>fo&&(fo=xo),po<lo&&(lo=po),wo>mo&&(mo=wo),oo[yo]=Ao,oo[yo+1]=ho,oo[yo+2]=po,oo[yo+3]=Mo,oo[yo+4]=xo,oo[yo+5]=wo;var _o,To=new Bt([so,uo,lo,co,fo,mo],0,no);function No(Po){for(var Co=Po.startIndex,Do=Po.endIndex,zo=Po.extents,Ro=[zo[3]-zo[0],zo[4]-zo[1],zo[5]-zo[2]],Lo=[0,1,2].sort(function(Zs,ga){return Ro[ga]-Ro[Zs]}),$o=0;$o<3;$o++){for(var jo=Lo[$o],Wo=zo[jo]+zo[jo+3],Ko=Co,Jo=Do-1,Go=-1,Xo=void 0;Ko<Jo;)Go===-1?(Xo=io[Ko],oo[6*Xo+jo]+oo[6*Xo+jo+3]<Wo?Ko++:Go=Xo):(Xo=io[Jo],oo[6*Xo+jo]+oo[6*Xo+jo+3]>=Wo||(io[Ko]=Xo,io[Jo]=Go,Go=-1,Ko++),Jo--);if(Ko>Co){var va=new Bt(Rt(io,oo,Co,Ko,1e-6),Co,Ko);va.endIndex-va.startIndex>to&&ao.push(va);var tu=new Bt(Rt(io,oo,Ko,Do,1e-6),Ko,Do);tu.endIndex-tu.startIndex>to&&ao.push(tu),Po.node0=va,Po.node1=tu,Po.startIndex=0,Po.endIndex=0;break}}}for(ao.push(To);_o=ao.pop();)No(_o);return this.offsetArray=io,this.rootNode=To,this},eo.prototype.intersectRay=function(to,ro,no){if(!this.trianglesArray)throw new Error("bvh-tree never perpared. call `create` to initialize.");if(!this.rootNode||!this.offsetArray)throw new Error("bvh-tree never perpared. call `splitNode` to perpare.");for(var io,oo=this.trianglesArray,ao=this.offsetArray,so=this.rootNode,uo=[],lo=[],co=new Ot(1/ro.x,1/ro.y,1/ro.z),fo=[so];io=fo.pop();)if(Ut(to,co,io)){io.node0&&fo.push(io.node0),io.node1&&fo.push(io.node1);for(var mo=io.startIndex;mo<io.endIndex;mo++)uo.push(ao[mo])}for(var go=new Ot(0,0,0),yo=new Ot(0,0,0),vo=new Ot(0,0,0),Ao=new Ot(to.x,to.y,to.z),ho=new Ot(ro.x,ro.y,ro.z),po=(mo=0,void 0),Mo=uo.length;mo<Mo;mo++){po=9*uo[mo],go.x=oo[po],go.y=oo[po+1],go.z=oo[po+2],yo.x=oo[po+3],yo.y=oo[po+3+1],yo.z=oo[po+3+2],vo.x=oo[po+6],vo.y=oo[po+6+1],vo.z=oo[po+6+2];var xo=kt(go,yo,vo,Ao,ho,no);xo&&lo.push(new Qt([go.clone(),yo.clone(),vo.clone()],xo))}return lo},eo.prototype.dispose=function(){delete this.offsetArray,delete this.rootNode},eo}(),Yt=null,Ft=!1,Ht=[];function Vt(eo){if(eo===void 0&&(eo=!1),eo||!Ft)if(Yt)Ft=!1;else{Ft=!0;var to=Ht.shift();if(to){try{to()}catch{}ot.shared.add(function(){return Vt(!0)},!0,2)}else Ft=!1}}function Gt(){Yt=null,Vt()}function Kt(eo){return new Promise(function(to,ro){Ht.push(function(){try{to(eo())}catch(no){ro(no)}}),Vt()})}function qt(){var eo={OutWindow:function(){this._windowSize=0}};return eo.OutWindow.prototype.create=function(to){this._buffer&&this._windowSize===to||(this._buffer=[]),this._windowSize=to,this._pos=0,this._streamPos=0},eo.OutWindow.prototype.flush=function(){var to=this._pos-this._streamPos;if(to!==0){for(;to--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},eo.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},eo.OutWindow.prototype.setStream=function(to){this.releaseStream(),this._stream=to},eo.OutWindow.prototype.init=function(to){to||(this._streamPos=0,this._pos=0)},eo.OutWindow.prototype.copyBlock=function(to,ro){var no=this._pos-to-1;for(no<0&&(no+=this._windowSize);ro--;)no>=this._windowSize&&(no=0),this._buffer[this._pos++]=this._buffer[no++],this._pos>=this._windowSize&&this.flush()},eo.OutWindow.prototype.putByte=function(to){this._buffer[this._pos++]=to,this._pos>=this._windowSize&&this.flush()},eo.OutWindow.prototype.getByte=function(to){var ro=this._pos-to-1;return ro<0&&(ro+=this._windowSize),this._buffer[ro]},eo.RangeDecoder=function(){},eo.RangeDecoder.prototype.setStream=function(to){this._stream=to},eo.RangeDecoder.prototype.releaseStream=function(){this._stream=null},eo.RangeDecoder.prototype.init=function(){var to=5;for(this._code=0,this._range=-1;to--;)this._code=this._code<<8|this._stream.readByte()},eo.RangeDecoder.prototype.decodeDirectBits=function(to){for(var ro,no=0,io=to;io--;)this._range>>>=1,ro=this._code-this._range>>>31,this._code-=this._range&ro-1,no=no<<1|1-ro,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return no},eo.RangeDecoder.prototype.decodeBit=function(to,ro){var no=to[ro],io=(this._range>>>11)*no;return(2147483648^this._code)<(2147483648^io)?(this._range=io,to[ro]+=2048-no>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=io,this._code-=io,to[ro]-=no>>>5,(4278190080&this._range)==0&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},eo.initBitModels=function(to,ro){for(;ro--;)to[ro]=1024},eo.BitTreeDecoder=function(to){this._models=[],this._numBitLevels=to},eo.BitTreeDecoder.prototype.init=function(){eo.initBitModels(this._models,1<<this._numBitLevels)},eo.BitTreeDecoder.prototype.decode=function(to){for(var ro=1,no=this._numBitLevels;no--;)ro=ro<<1|to.decodeBit(this._models,ro);return ro-(1<<this._numBitLevels)},eo.BitTreeDecoder.prototype.reverseDecode=function(to){for(var ro,no=1,io=0,oo=0;oo<this._numBitLevels;++oo)no=no<<1|(ro=to.decodeBit(this._models,no)),io|=ro<<oo;return io},eo.reverseDecode2=function(to,ro,no,io){for(var oo,ao=1,so=0,uo=0;uo<io;++uo)ao=ao<<1|(oo=no.decodeBit(to,ro+ao)),so|=oo<<uo;return so},eo.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new eo.BitTreeDecoder(8),this._numPosStates=0},eo.LenDecoder.prototype.create=function(to){for(;this._numPosStates<to;++this._numPosStates)this._lowCoder[this._numPosStates]=new eo.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new eo.BitTreeDecoder(3)},eo.LenDecoder.prototype.init=function(){var to=this._numPosStates;for(eo.initBitModels(this._choice,2);to--;)this._lowCoder[to].init(),this._midCoder[to].init();this._highCoder.init()},eo.LenDecoder.prototype.decode=function(to,ro){return to.decodeBit(this._choice,0)===0?this._lowCoder[ro].decode(to):to.decodeBit(this._choice,1)===0?8+this._midCoder[ro].decode(to):16+this._highCoder.decode(to)},eo.Decoder2=function(){this._decoders=[]},eo.Decoder2.prototype.init=function(){eo.initBitModels(this._decoders,768)},eo.Decoder2.prototype.decodeNormal=function(to){var ro=1;do ro=ro<<1|to.decodeBit(this._decoders,ro);while(ro<256);return 255&ro},eo.Decoder2.prototype.decodeWithMatchByte=function(to,ro){var no,io,oo=1;do if(no=ro>>7&1,ro<<=1,oo=oo<<1|(io=to.decodeBit(this._decoders,(1+no<<8)+oo)),no!==io){for(;oo<256;)oo=oo<<1|to.decodeBit(this._decoders,oo);break}while(oo<256);return 255&oo},eo.LiteralDecoder=function(){},eo.LiteralDecoder.prototype.create=function(to,ro){var no;if(!this._coders||this._numPrevBits!==ro||this._numPosBits!==to)for(this._numPosBits=to,this._posMask=(1<<to)-1,this._numPrevBits=ro,this._coders=[],no=1<<this._numPrevBits+this._numPosBits;no--;)this._coders[no]=new eo.Decoder2},eo.LiteralDecoder.prototype.init=function(){for(var to=1<<this._numPrevBits+this._numPosBits;to--;)this._coders[to].init()},eo.LiteralDecoder.prototype.getDecoder=function(to,ro){return this._coders[((to&this._posMask)<<this._numPrevBits)+((255&ro)>>>8-this._numPrevBits)]},eo.Decoder=function(){this._outWindow=new eo.OutWindow,this._rangeDecoder=new eo.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new eo.BitTreeDecoder(4),this._lenDecoder=new eo.LenDecoder,this._repLenDecoder=new eo.LenDecoder,this._literalDecoder=new eo.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new eo.BitTreeDecoder(6),this._posSlotDecoder[1]=new eo.BitTreeDecoder(6),this._posSlotDecoder[2]=new eo.BitTreeDecoder(6),this._posSlotDecoder[3]=new eo.BitTreeDecoder(6)},eo.Decoder.prototype.setDictionarySize=function(to){return!(to<0)&&(this._dictionarySize!==to&&(this._dictionarySize=to,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},eo.Decoder.prototype.setLcLpPb=function(to,ro,no){var io=1<<no;return!(to>8||ro>4||no>4)&&(this._literalDecoder.create(ro,to),this._lenDecoder.create(io),this._repLenDecoder.create(io),this._posStateMask=io-1,!0)},eo.Decoder.prototype.init=function(){var to=4;for(this._outWindow.init(!1),eo.initBitModels(this._isMatchDecoders,192),eo.initBitModels(this._isRep0LongDecoders,192),eo.initBitModels(this._isRepDecoders,12),eo.initBitModels(this._isRepG0Decoders,12),eo.initBitModels(this._isRepG1Decoders,12),eo.initBitModels(this._isRepG2Decoders,12),eo.initBitModels(this._posDecoders,114),this._literalDecoder.init();to--;)this._posSlotDecoder[to].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},eo.Decoder.prototype.decode=function(to,ro,no){var io,oo,ao,so,uo,lo,co=0,fo=0,mo=0,go=0,yo=0,vo=0,Ao=0;for(this._rangeDecoder.setStream(to),this._outWindow.setStream(ro),this.init();no<0||vo<no;)if(io=vo&this._posStateMask,this._rangeDecoder.decodeBit(this._isMatchDecoders,(co<<4)+io)===0)oo=this._literalDecoder.getDecoder(vo++,Ao),Ao=co>=7?oo.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(fo)):oo.decodeNormal(this._rangeDecoder),this._outWindow.putByte(Ao),co=co<4?0:co-(co<10?3:6);else{if(this._rangeDecoder.decodeBit(this._isRepDecoders,co)===1)ao=0,this._rangeDecoder.decodeBit(this._isRepG0Decoders,co)===0?this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(co<<4)+io)===0&&(co=co<7?9:11,ao=1):(this._rangeDecoder.decodeBit(this._isRepG1Decoders,co)===0?so=mo:(this._rangeDecoder.decodeBit(this._isRepG2Decoders,co)===0?so=go:(so=yo,yo=go),go=mo),mo=fo,fo=so),ao===0&&(ao=2+this._repLenDecoder.decode(this._rangeDecoder,io),co=co<7?8:11);else if(yo=go,go=mo,mo=fo,ao=2+this._lenDecoder.decode(this._rangeDecoder,io),co=co<7?7:10,(uo=this._posSlotDecoder[ao<=5?ao-2:3].decode(this._rangeDecoder))>=4){if(fo=(2|1&uo)<<(lo=(uo>>1)-1),uo<14)fo+=eo.reverseDecode2(this._posDecoders,fo-uo-1,this._rangeDecoder,lo);else if(fo+=this._rangeDecoder.decodeDirectBits(lo-4)<<4,(fo+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(fo===-1)break;return!1}}else fo=uo;if(fo>=vo||fo>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(fo,ao),vo+=ao,Ao=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},eo.Decoder.prototype.setDecoderProperties=function(to){var ro,no,io,oo,ao;return!(to.size<5)&&(no=(ro=to.readByte())%9,io=(ro=~~(ro/9))%5,oo=~~(ro/5),!!this.setLcLpPb(no,io,oo)&&(ao=to.readByte(),ao|=to.readByte()<<8,ao|=to.readByte()<<16,ao+=16777216*to.readByte(),this.setDictionarySize(ao)))},eo.decompress=function(to,ro,no,io){var oo=new eo.Decoder;if(!oo.setDecoderProperties(to))throw"Incorrect stream properties";if(!oo.decode(ro,no,io))throw"Error in data stream";return!0},eo.decompressFile=function(to,ro){var no,io=new eo.Decoder;if(!io.setDecoderProperties(to))throw"Incorrect stream properties";if(no=to.readByte(),no|=to.readByte()<<8,no|=to.readByte()<<16,no+=16777216*to.readByte(),to.readByte(),to.readByte(),to.readByte(),to.readByte(),!io.decode(to,ro,no))throw"Error in data stream";return!0},eo}var Wt=qt(),Xt=`
var decodeLZMA = (function() {
  var LZMA = (`.concat(qt.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(eo,to,ro){try{var no={data:to,offset:0,readByte:function(){return this.data[this.offset++]}},io=no.data.length,oo={data:[],offset:0,writeByte:function(uo){var lo=Math.floor(this.offset/io);this.data[lo]||(this.data[lo]=new Uint8Array(io)),this.data[lo][this.offset%io]=uo,this.offset++}};eo.decompressFile(no,oo);for(var ao=new Uint8Array(oo.offset),so=0;so<oo.offset;so++)ao[so]=oo.data[Math.floor(so/io)][so%io];ro(null,ao)}catch(uo){ro(uo)}}.toString(),`)(LZMA, data, callback);
  }
})();

var decodeLZMAWithWASM = (function() {
  var LZMA_WASM = (`).concat(function(){return function(eo){for(var to="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ro=new Uint8Array(256),no=0;no<to.length;no++)ro[to.charCodeAt(no)]=no;var io,oo,ao,so,uo,lo=.75*eo.length,co=eo.length,fo=0;eo[eo.length-1]==="="&&(lo--,eo[eo.length-2]==="="&&lo--);var mo=new ArrayBuffer(lo),go=new Uint8Array(mo);for(io=0;io<co;io+=4)oo=ro[eo.charCodeAt(io)],ao=ro[eo.charCodeAt(io+1)],so=ro[eo.charCodeAt(io+2)],uo=ro[eo.charCodeAt(io+3)],go[fo++]=oo<<2|ao>>4,go[fo++]=(15&ao)<<4|so>>2,go[fo++]=(3&so)<<6|63&uo;return mo}("AGFzbQEAAAABSg1gAABgAX8Bf2ACf38Bf2AEf39/fwBgA39/fwBgAX8AYAJ/fwBgA39/fwF/YAR/f39/AX9gAn9/AGABfwF/YAABf2AEf39/fwF/AhsCA2VudgVhYm9ydAADA2VudgZtZW1vcnkCAAEDJiUBAQkKAgoKCwsLCwsAAgoBAgQKAQYFCAoFBQQEBwgCBwwCAQAABAQBcAABBhoFfwFBAAt/AUEAC38BQQALfwFBAAt/AUEACwc9BgZtZW1vcnkCAAV0YWJsZQEABXJlc2V0AA0KbmV3VThBcnJheQAQCnVucGFja1NpemUAFAZkZWNvZGUAIwgBJAkHAQBBAAsBJQqAViVoAQN/IABBgICAgARLBEAACyMBIgEgAEEBIABBAUsbakEHakF4cSICPwAiA0EQdEsEQCADIAIgAWtB//8DakGAgHxxQRB2IgAgAyAAShtAAEEASARAIABAAEEASARAAAsLCyACJAEgAQsbAQF/QQFBICAAQQdqZ2t0EAEiASAANgIAIAELkQMBAX8gAUUEQA8LIABBADoAACAAIAFqQQFrQQA6AAAgAUECTQRADwsgAEEBakEAOgAAIABBAmpBADoAACAAIAFqIgJBAmtBADoAACACQQNrQQA6AAAgAUEGTQRADwsgAEEDakEAOgAAIAAgAWpBBGtBADoAACABQQhNBEAPC0EAIABrQQNxIgIgAGoiAEEANgIAIAEgAmtBfHEiASAAakEEa0EANgIAIAFBCE0EQA8LIABBBGpBADYCACAAQQhqQQA2AgAgACABaiICQQxrQQA2AgAgAkEIa0EANgIAIAFBGE0EQA8LIABBDGpBADYCACAAQRBqQQA2AgAgAEEUakEANgIAIABBGGpBADYCACAAIAFqIgJBHGtBADYCACACQRhrQQA2AgAgAkEUa0EANgIAIAJBEGtBADYCACAAQQRxQRhqIgIgAGohACABIAJrIQEDQCABQSBPBEAgAEIANwMAIABBCGpCADcDACAAQRBqQgA3AwAgAEEYakIANwMAIAFBIGshASAAQSBqIQAMAQsLC1EBA38gAEH+////AEsEQEEAQSBBLUEnEAAACyAAQQJ0IgMQAiECQQgQASIBQQA2AgAgAUEANgIEIAEgAjYCACABIAA2AgQgAkEIaiADEAMgAQtmAQF/IAFB/P///wFLBEBBAEHAAEEXQSIQAAALIAFBAXQiARACIgJBCGogARADIABFBEBBDBABIQALIABBADYCACAAQQA2AgQgAEEANgIIIAAgAjYCACAAQQA2AgQgACABNgIIIAALCgBBDBABIAAQBQsuAQF/QQgQASIBQQA2AgAgAUEANgIEIAEgADYCBCABQQEgASgCBHQQBjYCACABC6EBAQR/QRAQASIBQQA2AgAgAUEANgIEIAFBADYCCCABQQA2AgxBEBAEIQIDQCAAQRBIBEBBAxAHIQMgAigCACAAQQJ0aiADNgIIIABBAWohAAwBCwsgASACNgIEQRAQBCECQQAhAANAIABBEEgEQEEDEAchAyACKAIAIABBAnRqIAM2AgggAEEBaiEADAELCyABIAI2AgggAUEIEAc2AgwgAQs0AQF/QRQQASIAQQA2AgAgAEEAOgAEIABBADYCCCAAQQA2AgwgAEEANgIQIABBDTYCCCAAC0IBAX9BGRABIgBBADYCACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEANgIUIABBADoAGCAAQQA2AhAgAAu1AgEEf0HQABABIgBBADoAACAAQQA2AgQgAEEANgIIIABBADYCDCAAQQA2AhAgAEEAOgAUIABBADYCGCAAQQA2AhwgAEEANgIgIABBADYCJCAAQQA2AiggAEEANgIsIABBADYCMCAAQQA2AjQgAEEANgI4IABBADYCPCAAQQA2AkAgAEEANgJEIABBADYCSCAAQQA2AkxBBBAEIQIDQCABQQRIBEBBBhAHIQMgAigCACABQQJ0aiADNgIIIAFBAWohAQwBCwsgACACNgIkIABBBBAHNgIoIABB8wAQBjYCLCAAQcABEAY2AjAgAEEMEAY2AjQgAEEMEAY2AjggAEEMEAY2AjwgAEEMEAY2AkAgAEHAARAGNgJEIAAQCDYCSCAAEAg2AkwgABAJNgIEIAAQCjYCCCAACx8BAX9BCBABIgBBADYCACAAQQA2AgQgABALNgIAIAALCgAjACQBEAwkAwthAQF/IAFB+P///wNLBEBBAEHAAEEXQSIQAAALIAEQAiICQQhqIAEQAyAARQRAQQwQASEACyAAQQA2AgAgAEEANgIEIABBADYCCCAAIAI2AgAgAEEANgIEIAAgATYCCCAACwoAQQwQASAAEA4LBgAgABAPCyoAIAEgACgCCE8EQEEAQcAAQSdBPxAAAAsgACgCBCABIAAoAgBqai0ACAssACABIAAoAghPBEBBAEHAAEEyQT8QAAALIAAoAgQgASAAKAIAamogAjoACAtkAQJ/QQ0QDyECA0AgAUENSARAIAIgASAAIAEQEUH/AXEQEiABQQFqIQEMAQsLQQAhAEEAIQEDQCABQQhIBEAgAiABQQVqEBFB/wFxIAFBA3R0IAByIQAgAUEBaiEBDAELCyAACwYAIAAQEwsnACAAIAEQDzYCCCAAQQA2AgwgACABNgIUIABBADoAGCAAQQA2AgALJAAgACgCCCAAKAIYEBUgAEGABiAAKAIMIAAtABRqdBAGNgIgC5UBAQR/IAEhBSAAIgYoAgAhASAAKAIEIQcgACgCCEEBdiEEIAJBAEgEfyACIARqIgBBACAAQQBKGwUgAiIAIAQgACAESBsLIQIgA0EASAR/IAMgBGoiAEEAIABBAEobBSADIgAgBCAAIARIGwshAwNAIAIgA05FBEAgAkEBdCABaiAHaiAFOwEIIAJBAWohAgwBCwsgBgssAQF/AkACQAJAIwRBAWsOAwEBAgALAAtB/////wchAQsgAEGACEEAIAEQFwvBAQECfyAAQQIQBjYCACAAKAIAIgEoAgAgASgCBGpBgAg7AQggACgCACICKAIAIQEgAigCBCABQQJqakGACDsBCCAAKAIMKAIAQQEkBBAYGkEAIQIDQCACQRBIBEAgAiAAKAIEKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAiAAKAIIKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACygCAEEBJAQQGBogAkEBaiECDAELCwuHAgEFfyAAIQJBgAYgACgCDCAALQAUanQhAQNAIAMgAUgEQCACKAIgIgQoAgAhBSAEKAIEIANBAXQgBWpqQYAIOwEIIANBAWohAwwBCwsgAiEBQQAhAgNAIAJBBEkEQCACIAEoAiQoAgAiAygCAEECdkkEfyACQQJ0IANqKAIIBQALKAIAQQEkBBAYGiACQQFqIQIMAQsLIAEoAigoAgBBASQEEBgaIAEoAixBASQEEBgaIAAoAjBBASQEEBgaIAAoAjRBASQEEBgaIAAoAjhBASQEEBgaIAAoAjxBASQEEBgaIAAoAkBBASQEEBgaIAAoAkRBASQEEBgaIAAoAkgQGSAAKAJMEBkLyAwBA38DQCABQQNxIAIgAhsEQCAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAgAkEBayECDAELCyAAQQNxRQRAA0AgAkEQTwRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAEEIaiABQQhqKAIANgIAIABBDGogAUEMaigCADYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsgAkEIcQRAIAAgASgCADYCACAAQQRqIAFBBGooAgA2AgAgAUEIaiEBIABBCGohAAsgAkEEcQRAIAAgASgCADYCACABQQRqIQEgAEEEaiEACyACQQJxBEAgACABLwEAOwEAIAFBAmohASAAQQJqIQALIAJBAXEEQCAAIAEtAAA6AAALDwsgAkEgTwRAAkACQAJAIABBA3EiA0EBRwRAIANBAkYNASADQQNGDQIMAwsgASgCACEFIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAAIAJBA2shAgNAIAJBEU8EQCAAIAFBAWooAgAiA0EIdCAFQRh2cjYCACAAQQRqIAFBBWooAgAiBUEIdCADQRh2cjYCACAAQQhqIAFBCWooAgAiA0EIdCAFQRh2cjYCACAAQQxqIAFBDWooAgAiBUEIdCADQRh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsMAgsgASgCACEFIAAgAS0AADoAACAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAAgAkECayECA0AgAkESTwRAIAAgAUECaigCACIDQRB0IAVBEHZyNgIAIABBBGogAUEGaigCACIFQRB0IANBEHZyNgIAIABBCGogAUEKaigCACIDQRB0IAVBEHZyNgIAIABBDGogAUEOaigCACIFQRB0IANBEHZyNgIAIAFBEGohASAAQRBqIQAgAkEQayECDAELCwwBCyABKAIAIQUgACIEQQFqIQAgASIDQQFqIQEgBCADLQAAOgAAIAJBAWshAgNAIAJBE08EQCAAIAFBA2ooAgAiA0EYdCAFQQh2cjYCACAAQQRqIAFBB2ooAgAiBUEYdCADQQh2cjYCACAAQQhqIAFBC2ooAgAiA0EYdCAFQQh2cjYCACAAQQxqIAFBD2ooAgAiBUEYdCADQQh2cjYCACABQRBqIQEgAEEQaiEAIAJBEGshAgwBCwsLCyACQRBxBEAgACABIgMtAAA6AAAgAEEBaiIBIAEgA0EBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEIcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiAyADIAFBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgMgAyABQQFqIgEtAAA6AABBAWoiBEEBaiEAIAFBAWoiA0EBaiEBIAQgAy0AADoAAAsgAkEEcQRAIAAgASIDLQAAOgAAIABBAWoiASABIANBAWoiAS0AADoAAEEBaiIDIAMgAUEBaiIBLQAAOgAAQQFqIgRBAWohACABQQFqIgNBAWohASAEIAMtAAA6AAALIAJBAnEEQCAAIAEtAAA6AAAgAEEBaiIEQQFqIQAgAUEBaiIDQQFqIQEgBCADLQAAOgAACyACQQFxBEAgACABLQAAOgAACwvVAgECfyAAIAFGBEAPCyABIAJqIABNIgNFBEAgACACaiABTSEDCyADBEAgACABIAIQGw8LIAAgAUkEQCABQQdxIABBB3FGBEADQCAAQQdxBEAgAkUEQA8LIAJBAWshAiAAIgRBAWohACABIgNBAWohASAEIAMtAAA6AAAMAQsLA0AgAkEITwRAIAAgASkDADcDACACQQhrIQIgAEEIaiEAIAFBCGohAQwBCwsLA0AgAgRAIAAiBEEBaiEAIAEiA0EBaiEBIAQgAy0AADoAACACQQFrIQIMAQsLBSABQQdxIABBB3FGBEADQCAAIAJqQQdxBEAgAkUEQA8LIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwNAIAJBCE8EQCACQQhrIgIgAGogASACaikDADcDAAwBCwsLA0AgAgRAIAJBAWsiAiAAaiABIAJqLQAAOgAADAELCwsL4AoBCH8gACgCACIGIgQoAgAgBCgCBGovAQgiCCABIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAhrQf//A3FBBXYgCGohCCAHIAQ2AgxBAAUgCCAIQf//A3FBBXZrIQggByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyAGKAIEIAYoAgBqIAg7AQggByIFKAIMIwJJBEAgBSAFKAIMQQh0NgIMIAUoAhBBCHQhByAFKAIAIQYgBSAFKAIIIglBAWo2AgggBSAGIAkQEUH/AXEgB3I2AhALQf//A3FFBEAgAiAAKAIEKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEDIAEhBEEBIQgDQCAKIAMoAgRJBEAgAygCACIHKAIAIQEgBCgCECAHKAIEIAgiBUEBdCIIIAFqai8BCCIGIAQoAgxBC3ZsIglJBH9BgBAgBmtB//8DcUEFdiAGaiEGIAQgCTYCDEEABSAGIAZB//8DcUEFdmshBiAEIAQoAhAgCWs2AhAgBCAEKAIMIAlrNgIMQQELIAcoAgQgBygCACAFQQF0amogBjsBCCAEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhACAEKAIAIQUgBCAEKAIIIgFBAWo2AgggBCAFIAEQEUH/AXEgAHI2AhALQf//A3EgCGohCCAKQQFqIQoMAQsLIAhBASADKAIEdGsPCyAAKAIAIgooAgAhCCAFKAIQIAooAgQgCEECamovAQgiBCABKAIMQQt2bCIDSQR/IAUgAzYCDEEAIQlBgBAgBGtB//8DcUEFdiAEagUgBSAFKAIQIANrNgIQIAUgBSgCDCADazYCDEEBIQkgBCAEQf//A3FBBXZrCyEEIAoiBygCBCAHKAIAQQJqaiAEOwEIIAUiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQUgBigCACEHIAYgBigCCCIIQQFqNgIIIAYgByAIEBFB/wFxIAVyNgIQCyAJQf//A3FFBEAgAiAAKAIIKAIAIgAoAgBBAnZJBH8gAkECdCAAaigCCAUACyEJIAEhA0EBIQRBACECA0AgAiAJKAIESQRAIAMoAhAgCSgCACIFKAIEIAQiBkEBdCIEIAUoAgBqai8BCCIHIAMoAgxBC3ZsIghJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAMgCDYCDEEABSAHIAdB//8DcUEFdmshByADIAMoAhAgCGs2AhAgAyADKAIMIAhrNgIMQQELIAUoAgQgBSgCACAGQQF0amogBzsBCCADKAIMIwJJBEAgAyADKAIMQQh0NgIMIAMoAhBBCHQhBSADKAIAIQcgAyADKAIIIgZBAWo2AgggAyAHIAYQEUH/AXEgBXI2AhALQf//A3EgBGohBCACQQFqIQIMAQsLIARBASAJKAIEdGtBCGoPCyAAKAIMIQQgASEDQQEhCUEAIQIDQCACIAQoAgRJBEAgBCgCACIIKAIAIQogAygCECAIKAIEIAogCSIHQQF0IgFqai8BCCIFIAMoAgxBC3ZsIgZJBH8gAyAGNgIMQQAhBkGAECAFa0H//wNxQQV2IAVqBSADIAMoAhAgBms2AhAgAyADKAIMIAZrNgIMQQEhBiAFIAVB//8DcUEFdmsLIQUgCCgCBCAIKAIAIAdBAXRqaiAFOwEIIAMoAgwjAkkEQCADIAMoAgxBCHQ2AgwgAygCEEEIdCEAIAMoAgAhBSADIAMoAggiCkEBajYCCCADIAUgChARQf8BcSAAcjYCEAsgBkH//wNxIAFqIQkgAkEBaiECDAELCyAJQQEgBCgCBHRrQRBqC5YCAQh/QQEhBwNAAkAgBiABTg0AIAIoAhAgACgCBCAAKAIAIAMgB2oiCUEBdGpqLwEIIgQgAigCDEELdmwiBUkEfyACIAU2AgxBACEFQYAQIARrQf//A3FBBXYgBGoFIAIgAigCECAFazYCECACIAIoAgwgBWs2AgxBASEFIAQgBEH//wNxQQV2awshBCAAKAIEIAAoAgAgCUEBdGpqIAQ7AQggAiIEKAIMIwJJBEAgBCAEKAIMQQh0NgIMIAQoAhBBCHQhCiAEKAIAIQsgBCAEKAIIIglBAWo2AgggBCALIAkQEUH/AXEgCnI2AhALIAVB//8DcSIEIAdBAXRqIQcgBCAGdCAIciEIIAZBAWohBgwBCwsgCAvwBAEIf0EDIAEgAUEDSxsiAiAAKAIkKAIAIgEoAgBBAnZJBH8gAkECdCABaigCCAUACyEEIAAoAgQhAkEBIQEDQCAHIAQoAgRJBEAgBCgCACIFKAIAIQMgAigCECAFKAIEIAFBAXQiCSADamovAQgiAyACKAIMQQt2bCIGSQR/IAIgBjYCDEEAIQhBgBAgA2tB//8DcUEFdiADagUgAiACKAIQIAZrNgIQIAIgAigCDCAGazYCDEEBIQggAyADQf//A3FBBXZrCyEDIAUoAgQgBSgCACABQQF0amogAzsBCCACKAIMIwJJBEAgAiACKAIMQQh0NgIMIAIoAhBBCHQhBiACKAIAIQUgAiACKAIIIgNBAWo2AgggAiAFIAMQEUH/AXEgBnI2AhALIAhB//8DcSAJaiEBIAdBAWohBwwBCwsgAUEBIAQoAgR0ayIBQQRJBEAgAQ8LIAFBAXFBAnIgAUEBdkEBayICdCEDIAFBDkkEfyAAKAIsIAIgACgCBCADIAFrEB4gA2oFIAAoAgQhASACQQRrIQJBACEEA0AgASABKAIMQQF2NgIMIAEgASgCECABKAIMazYCECABIAEoAhBBACABKAIQQR92ayIHIAEoAgxxajYCECABKAIQIAEoAgxGBEAgAUEBOgAECyABKAIMIwJJBEAgASABKAIMQQh0NgIMIAEoAhBBCHQhBSABKAIAIQggASABKAIIIgZBAWo2AgggASAIIAYQEUH/AXEgBXI2AhALIAdBAWogBEEBdGohBCACQQFrIgINAAsgBEEEdCADaiAAKAIoIgQoAgAgBCgCBCAAKAIEQQAQHmoLC9AcAQ9/IAAQGiAAKAIEIgdBADoABCAHKAIAIAcgBygCCCIDQQFqNgIIIAMQEUH/AXEEQCAHQQE6AAQLIAdBfzYCDCAHQQA2AhBBACEDA0AgA0EESARAIAcoAhBBCHQhBSAHKAIAIQwgByAHKAIIIghBAWo2AgggByAMIAgQEUH/AXEgBXI2AhAgA0EBaiEDDAELCyAHKAIQIAcoAgxGBEAgB0EBOgAECyABBEAgACgCCCACEA82AgQFIAAoAghBBBAPNgIEC0EAIQwDQAJAIAJFIAEgARsiBwR/IAAtAABFBSAHCwRAIAAoAgQoAhBFBEBBAw8LCyAAKAIwIgUoAgAhByAFKAIEIAAoAggoAgBBASAAKAIQdEEBa3EiCyAMQQR0Qf8BcWoiBkEBdCAHamovAQghAyAGIQcgACgCBCIEKAIMQQt2IANsIQggBCgCECAISQR/IAQgCDYCDEEAIQlBgBAgA2tB//8DcUEFdiADagUgBCAEKAIQIAhrNgIQIAQgBCgCDCAIazYCDEEBIQkgAyADQf//A3FBBXZrCyEIIAUiAygCBCADKAIAIAdBAXRqaiAIOwEIIAQiBigCDCMCSQRAIAYgBigCDEEIdDYCDCAGKAIQQQh0IQggBigCACEDIAYgBigCCCIHQQFqNgIIIAYgAyAHEBFB/wFxIAhyNgIQCyAJQf//A3FFBEAgAkUgASABGw0BIAwhCEEAIQYgACgCCCIFKAIMRSIEBH8gBS0AGEUFIAQLRQRAIAAoAggiBSgCCCIGKAIEQQEgBSgCDEwEfyAFKAIMQQFrBSAFKAIMIAUoAhRBAWtqCyAGKAIAamotAAghBgtBASEEIAAoAggoAgBBASAALQAUdEEBa3EgACgCDHQgBkEIIAAoAgxrdmpBgAZsIQcgCEEHTwRAIAAoAggiBigCCCIJKAIEIA5BAWoiDSAGKAIMTAR/IAYoAgwgDWsFIAYoAgwgBigCFCANa2oLIAkoAgBqai0ACCENA0ACQCANQf8BcUEHdiEGIA1BAXQhDSAAKAIgIgkoAgAhCyAJKAIEIAZBAWpBCHQgB2ogBGoiDEEBdCALamovAQgiCyAAKAIEIgMoAgxBC3ZsIQogAygCECAKSQR/QYAQIAtrQf//A3FBBXYgC2ohCyADIAo2AgxBAAUgCyALQf//A3FBBXZrIQsgAyADKAIQIAprNgIQIAMgAygCDCAKazYCDEEBCyEFIAkoAgQgCSgCACAMQQF0amogCzsBCCADIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEDIAooAgAhDCAKIAooAggiC0EBajYCCCAKIAwgCxARQf8BcSADcjYCEAsgBEEBdCAFciEEIAVB//8DcSAGRw0AIARB//8DcUGAAkkNAQsLCwNAIARBgAJJBEAgBEEBdCEJIAAoAiAiBSgCACEMIAUoAgQgBCAHaiIGQQF0IAxqai8BCCILIAAoAgQiDSgCDEELdmwhCiANKAIQIApJBH9BgBAgC2tB//8DcUEFdiALaiELIA0gCjYCDEEABSALIAtB//8DcUEFdmshCyANIA0oAhAgCms2AhAgDSANKAIMIAprNgIMQQELIAUoAgQgBSgCACAGQQF0amogCzsBCCANIgooAgwjAkkEQCAKIAooAgxBCHQ2AgwgCigCEEEIdCEGIAooAgAhBSAKIAooAggiDEEBajYCCCAKIAUgDBARQf8BcSAGcjYCEAsgCXIhBAwBCwsgACgCCCIDIAMoAgBBAWo2AgAgAygCCCELIAMgAygCDCIGQQFqNgIMIAsoAgQgCygCACAGamogBEGAAmsiCjoACCADKAIMIAMoAhRGBEAgA0EANgIMIANBAToAGAsgAygCBCgCCCADKAIQRgRAIAMgAygCBCIGKAIIQQF0EA82AgQgAygCBCgCACADKAIEKAIEakEIaiAGKAIAIAYoAgRqQQhqIAYoAggQHCAGKAIAGgsgAygCBCEJIAMgAygCECIMQQFqNgIQIAkoAgQgCSgCACAMamogCjoACCAIIgVBBEkEf0EABSAFQQNrIAVBBmsgBUEKSRsLIQwgAkEBayECDAILIAAoAjQiBigCACEFIAYoAgQgDCIDQQF0IAVqai8BCCIHIAAoAgQiCigCDEELdmwhBCAKKAIQIARJBH9BgBAgB2tB//8DcUEFdiAHaiEHIAogBDYCDEEABSAHIAdB//8DcUEFdmshByAKIAooAhAgBGs2AhAgCiAKKAIMIARrNgIMQQELIAMhBSAGIgMoAgAhDSADKAIEIAVBAXQgDWpqIAc7AQggCiIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhBiAJKAIAIQMgCSAJKAIIIgVBAWo2AgggCSADIAUQEUH/AXEgBnI2AhALQf//A3EEQCACRSABIAEbDQEgACgCCCIIKAIMRSIEBH8gCC0AGEUFIAQLDQEgACgCOCIDKAIAIQggAygCBCAMQQF0IAhqai8BCCIEIAAoAgQiBSgCDEELdmwhByAFKAIQIAdJBH9BgBAgBGtB//8DcUEFdiAEaiEEIAUgBzYCDEEABSAEIARB//8DcUEFdmshBCAFIAUoAhAgB2s2AhAgBSAFKAIMIAdrNgIMQQELIAMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEFIAkoAgAhAyAJIAkoAggiCEEBajYCCCAJIAMgCBARQf8BcSAFcjYCEAtB//8DcQRAIAAoAjwiCCgCACEHIAgoAgQgDEEBdCAHamovAQgiBCAAKAIEIgUoAgxBC3ZsIQYgBSgCECAGSQR/QYAQIARrQf//A3FBBXYgBGohBCAFIAY2AgxBAAUgBCAEQf//A3FBBXZrIQQgBSAFKAIQIAZrNgIQIAUgBSgCDCAGazYCDEEBCyAIIgMoAgQgAygCACAMQQF0amogBDsBCCAFIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiB0EBajYCCCAJIAMgBxARQf8BcSAIcjYCEAtB//8DcQRAIAAoAkAiAygCACEKIAMoAgQgDEEBdCAKamovAQgiBiAAKAIEIgcoAgxBC3ZsIQQgBygCECAESQR/QYAQIAZrQf//A3FBBXYgBmohBiAHIAQ2AgxBAAUgBiAGQf//A3FBBXZrIQYgByAHKAIQIARrNgIQIAcgBygCDCAEazYCDEEBCyADKAIEIAMoAgAgDEEBdGpqIAY7AQggByIJKAIMIwJJBEAgCSAJKAIMQQh0NgIMIAkoAhBBCHQhCCAJKAIAIQMgCSAJKAIIIgpBAWo2AgggCSADIAoQEUH/AXEgCHI2AhALQf//A3EEQCARIQMgDyERBSAPIQMLIBAhDwUgECEDCyAOIRAgAyEOBSAAKAJEIgYoAgAhCiAGKAIEIAxBBHRB/wFxIAtqIgNBAXQgCmpqLwEIIgcgACgCBCIIKAIMQQt2bCEEIAgoAhAgBEkEf0GAECAHa0H//wNxQQV2IAdqIQcgCCAENgIMQQAFIAcgB0H//wNxQQV2ayEHIAggCCgCECAEazYCECAIIAgoAgwgBGs2AgxBAQsgAyEKIAYiAygCACENIAMoAgQgCkEBdCANamogBzsBCCAIIgkoAgwjAkkEQCAJIAkoAgxBCHQ2AgwgCSgCEEEIdCEIIAkoAgAhAyAJIAkoAggiCkEBajYCCCAJIAMgChARQf8BcSAIcjYCEAtB//8DcUUEQEEJQQsgDEEHSRshDCAAKAIIIQQgACgCCCIFKAIIIgMoAgQgDkEBaiIHIAUoAgxMBH8gBSgCDCAHawUgBSgCDCAFKAIUIAdragsgAygCAGpqLQAIIQcgBCAEKAIAQQFqNgIAIAQoAgghBSAEIAQoAgwiBkEBajYCDCAFKAIEIAUoAgAgBmpqIAc6AAggBCgCDCAEKAIURgRAIARBADYCDCAEQQE6ABgLIAQoAgQoAgggBCgCEEYEQCAEIAQoAgQiBigCCEEBdBAPNgIEIAQoAgQoAgAgBCgCBCgCBGpBCGogBigCACAGKAIEakEIaiAGKAIIEBwgBigCABoLIAQoAgQhAyAEIAQoAhAiCEEBajYCECADKAIEIAMoAgAgCGpqIAc6AAggAkEBayECDAQLCyAAKAJMIAAoAgQgCxAdIQtBCEELIAxBB0kbIQwFIA8hESAQIQ8gDiEQQQdBCiAMQQdJGyEMIAAgACgCSCAAKAIEIAsQHSILEB8iDkF/RgRAIAAoAgQoAhAEf0EBBUECCw8LIAJFIAEgARsNASAOIAAoAhhPIgUEfyAFBSAOIAAoAggiBCgCDEwiBgR/IAYFIAQtABgLRQsNAQtBACENIAAoAgghBSAOQQFqIQQgAiALQQJqIgtIIAEgARsEQEEBIQ0gAiELCyALIQYDQCAGQQBKBEAgBSIIKAIIIgkoAgQgBCAFKAIMTAR/IAUoAgwgBGsFIAUoAgwgBSgCFCAEa2oLIAkoAgBqai0ACCEHIAggCCgCAEEBajYCACAIKAIIIQMgCCAIKAIMIgpBAWo2AgwgAygCBCADKAIAIApqaiAHOgAIIAgoAgwgCCgCFEYEQCAIQQA2AgwgCEEBOgAYCyAIKAIEKAIIIAgoAhBGBEAgCCAIKAIEIgMoAghBAXQQDzYCBCAIKAIEKAIAIAgoAgQoAgRqQQhqIAMoAgAgAygCBGpBCGogAygCCBAcIAMoAgAaCyAIKAIEIQkgCCAIKAIQIgNBAWo2AhAgCSgCBCAJKAIAIANqaiAHOgAIIAZBAWshBgwBCwsgAiALayECIA1FDQELC0EBCyYBAX9BEBABIgQgADYCACAEIAE2AgQgBCACNgIIIAQgAzYCDCAEC7YEAQZ/IAAgATYCBEENEA8hAgNAAkAgA0ENTg0AIAIgAyABIAMQEUH/AXEQEiADQQFqIQMMAQsLIAAoAgAhBCACIQZBBBAPIgIoAgQgAigCAGogBigCBCAGKAIAai0ACCIDOgAIIANB/wFxQeEBTwRAQQBBgAFBoQFBDBAAAAsgAigCBCACKAIAQQFqaiADQf8BcUEJcCIHOgAIIAIoAgQgAigCAGogA0H/AXFBCW4iAzoACCADQQVwIQUgAigCBCACKAIAQQJqaiADQQVuIgM6AAggAigCBCACKAIAQQNqaiAFOgAIIAQgBzYCDCAEIAM2AhAgBCAFOgAUIARBADYCHEEAIQIDQAJAIAJBBE8NACAEIAQoAhwgBigCBCAGKAIAIAJBAWpqai0ACCACQQN0dHI2AhwgAkEBaiECDAELCyAEIAQoAhw2AhggBCgCGEGAIEkEQCAEQYAgNgIYC0EAIQJBACEFQQAhAwNAAkAgA0EITg0AIAYgA0EFahARQf8BcSIEQf8BRwRAQQEhBQsgBCADQQN0dCACciECIANBAWohAwwBCwsgACgCACAFRToAACAAKAIAKAIEIAE2AgAgACgCABAWAkAgACgCACAFIAIQICIBQQFGDQAgAUEDRwRAIAFBAkYEQCAFBEAgACgCACgCCCgCECACRw0DCwUMAgsLIAAoAgAoAgQtAAQaQQFBACAAKAIAKAIIKAIQIAAoAgAoAggoAgQQIQ8LQQBBAUEAQQAQIQsIACMDIAAQIgsWAEG4ASQAIwAkAUGAgIAIJAIQDCQDCwMAAQsLtwEEAEEICxcKAAAAdQBzAGUAIABzAHQAcgBpAGMAdABBIAsdDQAAAH4AbABpAGIALwBhAHIAcgBhAHkALgB0AHMAQcAACzkbAAAAfgBsAGkAYgAvAGkAbgB0AGUAcgBuAGEAbAAvAHQAeQBwAGUAZABhAHIAcgBhAHkALgB0AHMAQYABCzMYAAAAcwByAGMALwBsAHoAbQBhAC8AbAB6AG0AYQAtAGQAZQBjAG8AZABlAHIALgB0AHM=")}.toString(),`)();
  return function(data, callback) {
    return (`).concat(function(eo,to,ro){try{var no=new WebAssembly.Memory({initial:16}),io=new WebAssembly.Module(eo),oo=new WebAssembly.Instance(io,{env:{memory:no,abort:function(){ro(new Error("webAssembly abort"))}}}).exports,ao=oo.newU8Array(to.length);new Uint8Array(no.buffer,ao+24,to.length).set(to);var so=oo.decode(ao),uo=new Uint32Array(no.buffer,so,4),lo=uo[0],co=uo[2],fo=uo[3];lo?ro(null,new Uint8Array(no.buffer,fo+24,co).slice(0,co)):ro(new Error("lzma deocder error"))}catch(mo){ro(mo)}}.toString(),`)(LZMA_WASM, data, callback);
  }
})();

self.onmessage = function(event) {
  var packet = event.data;
  if (!packet.id) {
    postMessage({ id: packet.id, error: "No incoming id." });
    return;
  }
  if (!packet.data) {
    postMessage({ id: packet.id, error: "No input data." });
    return;
  }
  if (packet.type == "decompress") {
    if (packet.data.constructor !== Uint8Array) {
      postMessage({ id: packet.id, error: "Input data is not Uint8Array." });
    }
    const callback = function(error, result) {
      if (error) {
        postMessage({ id: packet.id, error: error.toString() });
      } else {
        postMessage({ id: packet.id, result: result, error: null }, [ result.buffer ]);
      }
    }
    if (typeof WebAssembly !== "undefined" && WebAssembly.instantiate) {
      decodeLZMAWithWASM(packet.data, callback);
    } else {
      decodeLZMA(packet.data, callback);
    }
    return;
  }
  postMessage({ id: packet.id, error: "type never matched." });
};
`),Zt=typeof Worker!="undefined"&&typeof Blob!="undefined",Jt="";if(Zt)try{var $t=new Blob([Xt],{type:"text/javascript"});Jt=URL.createObjectURL($t)}catch(eo){}var ei=function(){function eo(){var to=this;if(!Zt)throw new Error("LZMAWorker cannot work in this broswer.");this.callCounter=0,this.requests={};var ro=this.worker=new Worker(Jt);ro.onmessage=function(no){var io=no.data,oo=io.id,ao=io.result,so=io.error,uo=to.getKey(oo);to.requests[uo]&&(so?to.requests[uo](new Error(so)):to.requests[uo](null,ao),delete to.requests[uo])},ro.onerror=function(no){return console.error(no)}}return eo.prototype.getKey=function(to){return"key_"+String(to)},eo.prototype.decompress=function(to,ro){var no=++this.callCounter;this.requests[this.getKey(no)]=ro,this.worker.postMessage({type:"decompress",id:no,data:to},[to.buffer])},eo.prototype.terminate=function(){this.worker.terminate()},eo.support=Zt,eo}();function ti(eo){return Array.prototype.reduce.call(eo,function(to,ro,no){return to|ro<<8*no},0)}function ii(eo){var to=new Uint8Array(eo),ro=ti(to.slice(0,4));if(ro>10)return Promise.reject(new Error("LZMA got too many sub chunks."));for(var no=[],io=[],oo=4+4*ro,ao=0;ao<ro;ao++)io[ao]=ti(to.slice(4+4*ao,8+4*ao)),no[ao]=ao===ro-1?to.subarray(oo,oo+io[ao]):to.slice(oo,oo+io[ao]),oo+=io[ao];return ei.support?function(so){for(var uo=[],lo=so.length,co=function(mo){uo.push(new Promise(function(go,yo){var vo=new ei;vo.decompress(so[mo],function(Ao,ho){if(vo.terminate(),Ao)return yo(Ao);go(ho)})}))},fo=0;fo<lo;fo++)co(fo);return Promise.all(uo)}(no):Promise.resolve(function(so){for(var uo,lo=[],co=so.length,fo=function(go){var yo={data:so[go],offset:0,readByte:function(){return this.data[this.offset++]}},vo=yo.data.length,Ao={data:[],offset:0,writeByte:function(po){var Mo=Math.floor(this.offset/vo);this.data[Mo]||(this.data[Mo]=new Uint8Array(vo)),this.data[Mo][this.offset%vo]=po,this.offset++}};Wt.decompressFile(yo,Ao),uo=new Uint8Array(Ao.offset);for(var ho=0;ho<Ao.offset;ho++)uo[ho]=Ao.data[Math.floor(ho/vo)][ho%vo];lo.push(uo)},mo=0;mo<co;mo++)fo(mo);return lo}(no))}function ni(eo,to){for(var ro={},no=0,io=to;no<io.length;no++){var oo=io[no];oo in eo&&(ro[oo]=eo[oo])}return ro}var ri=!1;try{ri=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(eo){}var si=[];function oi(){var eo=this.src;this.onerror=this.onload=Pe,this.removeAttribute("src"),/^blob\:/.test(eo)&&URL.revokeObjectURL(eo),this.close=Pe}function ai(){si.push(this)}function ui(){return Object.assign(new Image,{crossOrigin:"",close:oi})}function ci(eo){return new Promise(function(to,ro){var no=ui();no.onload=function(){no.onload=no.onerror=Pe,setTimeout(function(){return to(no)},30)},no.onerror=function(){var io=no.src;no.onload=no.onerror=Pe,no.close(),ro(new Error("image load error: ".concat(io)))},no.src=URL.createObjectURL(eo)})}function Ai(eo,to){if(to&&(eo.width>to.width||eo.height>to.height)){var ro=function(uo,lo){var co=si.shift();if(co)return co.width=uo,co.height=lo,co;if(ri){var fo=new OffscreenCanvas(uo,lo);return Object.assign(fo,{close:ai})}return fo=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),Object.assign(fo,{close:ai})}(Math.min(eo.width,to.width),Math.min(eo.height,to.height)),no=ro.getContext("2d");no.clearRect(0,0,ro.width,ro.height),no.drawImage(eo,0,0,ro.width,ro.height),eo.close();var io=new r$3.Texture(ro);io.needsUpdate=!0,io.flipY=!0;var oo=io.dispose;return io.dispose=function(){ro.close(),oo.call(io),delete io.dispose},io}var ao=new r$3.Texture(eo);ao.needsUpdate=!0,ao.flipY=!0;var so=ao.dispose;return ao.dispose=function(){eo.close(),so.call(ao),delete ao.dispose},ao}var li=new r$3.WebGLRenderTarget(1,1),hi=new r$3.OrthographicCamera(-1,1,1,-1,0,1),di=new r$3.BufferGeometry;di.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),di.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var gi=new r$3.Mesh(di),pi=new r$3.Scene;pi.add(gi);var Mi,fi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform sampler2D map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0));
    }
  `}),yi=new r$3.RawShaderMaterial({uniforms:{map:{value:null}},vertexShader:`
    void main() {
      gl_Position = vec4(0, 0, 0, 0);
    }
  `,fragmentShader:`
    uniform samplerCube map;
    void main() {
      gl_FragColor = textureCube(map, vec3(0, 0, 0));
    }
  `});function mi(eo,to,ro){return to.flipY!==void 0&&(eo.flipY=to.flipY),to.format!==void 0&&(eo.format=to.format),to.encoding!==void 0&&(eo.encoding=to.encoding),to.minFilter!==void 0&&(eo.minFilter=to.minFilter),to.magFilter!==void 0&&(eo.magFilter=to.magFilter),ro?new Promise(function(no){ot.shared.add(function(){try{var io=ro.getRenderTarget();ro.setRenderTarget(li),eo instanceof r$3.CubeTexture?(gi.material=yi,yi.uniforms.map.value=eo,ro.render(pi,hi),yi.uniforms.map.value=null):(gi.material=fi,fi.uniforms.map.value=eo,ro.render(pi,hi),yi.uniforms.map.value=null),ro.setRenderTarget(io),no(eo)}catch{no(eo)}},!0,1)}):Promise.resolve(eo)}var vi=`
var config, transcoderPending, _BasisFile;
self.onmessage = function(e) {
  var message = e.data;
  switch (message.type) {
    case "init":
      config = message.config;
      init(message.transcoderBinary);
      break;
    case "transcode":
      transcoderPending.then(function() {
        try {
          var result = transcode(message.buffer);
          var width = result.width;
          var height = result.height;
          var hasAlpha = result.hasAlpha;
          var mipmaps = result.mipmaps;
          var format = result.format;
          var buffers = [];
          for (var i = 0; i < mipmaps.length; ++i) {
            buffers.push(mipmaps[i].data.buffer);
          }
          self.postMessage({ type: "transcode", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);
        } catch (error) {
          console.error(error);
          self.postMessage({ type: "error", id: message.id, error: error.message });
        }
      });
      break;
    default: break;
  }
};

function init(wasmBinary) {
  var BasisModule;
  transcoderPending = new Promise(function(resolve) {
    BasisModule = { wasmBinary, onRuntimeInitialized: resolve };
    BASIS(BasisModule); // eslint-disable-line no-undef
  }).then(function() {
    _BasisFile = BasisModule.BasisFile;
    BasisModule.initializeBasis();
    self.postMessage({ type: "initialized" });
  });
}

function transcode(buffer) {
  var basisFile = new _BasisFile(new Uint8Array(buffer));
  var width = basisFile.getImageWidth(0, 0);
  var height = basisFile.getImageHeight(0, 0);
  var levels = basisFile.getNumLevels(0);
  var hasAlpha = basisFile.getHasAlpha();
  function cleanup() {
    basisFile.close();
    basisFile.delete();
  }
  if (!hasAlpha) {
    switch (config.format) {
      case 9: // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA
        config.format = 8; // Hardcoded: BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB;
        break;
      default: break;
    }
  }
  if (!width || !height || !levels) {
    cleanup();
    throw new Error("BasisTextureLoader:  Invalid .basis file");
  }
  if (!basisFile.startTranscoding()) {
    cleanup();
    throw new Error("BasisTextureLoader: .startTranscoding failed");
  }
  var mipmaps = [];
  for (var mip = 0; mip < levels; mip++) {
    var mipWidth = basisFile.getImageWidth(0, mip);
    var mipHeight = basisFile.getImageHeight(0, mip);
    var dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, config.format));
    var status = basisFile.transcodeImage(dst, 0, mip, config.format, 0, hasAlpha);
    if (!status) {
      cleanup();
      throw new Error("BasisTextureLoader: .transcodeImage failed.");
    }
    mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });
  }
  cleanup();
  return { width, height, hasAlpha, mipmaps, format: config.format };
}
`,Ni={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},Di={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},Ei=((Mi={})[Ni.cTFBC1]=Di.COMPRESSED_RGB_S3TC_DXT1_EXT,Mi[Ni.cTFBC3]=Di.COMPRESSED_RGBA_S3TC_DXT5_EXT,Mi),wi=function(){function eo(){}return eo.setTranscoderPath=function(to){return this.transcoderPath=to,this},eo.setWorkerLimit=function(to){return this.workerLimit=to,this},eo.isInitialized=function(){return this.workerPool.filter(function(to){return to._initialized}).length!==0},eo.detectSupport=function(to){var ro=this.workerConfig;if(ro.astcSupported=!!to.extensions.get("WEBGL_compressed_texture_astc"),ro.bptcSupported=!!to.extensions.get("EXT_texture_compression_bptc"),ro.etcSupported=!!to.extensions.get("WEBGL_compressed_texture_etc1"),ro.dxtSupported=!!to.extensions.get("WEBGL_compressed_texture_s3tc"),ro.pvrtcSupported=!!to.extensions.get("WEBGL_compressed_texture_pvrtc")||!!to.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),ro.astcSupported)ro.format=eo.BASIS_FORMAT.cTFASTC_4x4;else if(ro.bptcSupported)ro.format=eo.BASIS_FORMAT.cTFBC7_M5;else if(ro.dxtSupported)ro.format=eo.BASIS_FORMAT.cTFBC3;else if(ro.pvrtcSupported)ro.format=eo.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!ro.etcSupported)throw new Error("BasisTextureLoader: No suitable compressed texture format found.");ro.format=eo.BASIS_FORMAT.cTFETC1}return this},eo.createTexture=function(to){var ro,no,io=this,oo=to.byteLength,ao=this._allocateWorker(oo).then(function(so){return ro=so,no=io.workerNextTaskID++,new Promise(function(uo,lo){ro._callbacks[no]={resolve:uo,reject:lo},ro.postMessage({type:"transcode",id:no,buffer:to},[to])})}).then(function(so){var uo,lo=io.workerConfig,co=so.width,fo=so.height,mo=so.mipmaps;switch(so.format){case Ni.cTFASTC_4x4:uo=new r$3.CompressedTexture(mo,co,fo,r$3.RGBA_ASTC_4x4_Format);break;case Ni.cTFBC1:case Ni.cTFBC3:uo=new r$3.CompressedTexture(mo,co,fo,Ei[lo.format],r$3.UnsignedByteType);break;case Ni.cTFETC1:uo=new r$3.CompressedTexture(mo,co,fo,r$3.RGB_ETC1_Format);break;case Ni.cTFPVRTC1_4_RGB:uo=new r$3.CompressedTexture(mo,co,fo,r$3.RGB_PVRTC_4BPPV1_Format);break;case Ni.cTFPVRTC1_4_RGBA:uo=new r$3.CompressedTexture(mo,co,fo,r$3.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("BasisTextureLoader: No supported format available.")}return uo.minFilter=mo.length===1?r$3.LinearFilter:r$3.LinearMipmapLinearFilter,uo.magFilter=r$3.LinearFilter,uo.generateMipmaps=!1,uo.needsUpdate=!0,uo});return ao.catch(function(){return!0}).then(function(){ro&&no&&(ro._taskLoad-=oo,delete ro._callbacks[no])}),ao},eo._initTranscoder=function(){var to=this;if(!this.transcoderPending){var ro=new r$3.FileLoader;ro.setPath(this.transcoderPath);var no=new Promise(function(ao,so){ro.load("basis_transcoder.js",ao,void 0,so)}),io=new r$3.FileLoader;io.setPath(this.transcoderPath),io.setResponseType("arraybuffer");var oo=new Promise(function(ao,so){io.load("basis_transcoder.wasm",ao,void 0,so)});this.transcoderPending=Promise.all([no,oo]).then(function(ao){var so=ao[0],uo=ao[1],lo=["/* basis_transcoder.js */",so,"/* worker */",vi].join(`
`);to.workerSourceURL=URL.createObjectURL(new Blob([lo])),to.transcoderBinary=uo})}return this.transcoderPending},eo._allocateWorker=function(to){var ro=this;return this._initTranscoder().then(function(){if(ro.workerPool.length<ro.workerLimit){var no=function(oo){var ao=new Worker(oo);return Object.assign(ao,{_callbacks:{},_initialized:!1,_taskLoad:0})}(ro.workerSourceURL);no._callbacks={},no._initialized=!1,no._taskLoad=0,no.postMessage({type:"init",config:ro.workerConfig,transcoderBinary:ro.transcoderBinary}),no.onmessage=function(oo){var ao=oo.data;switch(ao.type){case"initialized":no._initialized=!0,console.info("BasisTextureLoader: basis loader initialized");break;case"transcode":no._callbacks[ao.id].resolve(ao);break;case"error":no._callbacks[ao.id].reject(ao);break;default:console.error('BasisTextureLoader: Unexpected message, "'.concat(ao.type,'"'))}},ro.workerPool.push(no)}else ro.workerPool.sort(function(oo,ao){return oo._taskLoad>ao._taskLoad?-1:1});var io=ro.workerPool[ro.workerPool.length-1];return io._taskLoad+=to,io})},eo.prototype.dispose=function(){for(var to=0;to<eo.workerPool.length;to++)eo.workerPool[to].terminate();return eo.workerPool.length=0,this},eo.BASIS_FORMAT=Ni,eo.DXT_FORMAT=Di,eo.DXT_FORMAT_MAP=Ei,eo.transcoderPath="https://vrlab-public.ljcdn.com/release/static/image/release/five/basis/",eo.transcoderBinary=null,eo.transcoderPending=null,eo.workerLimit=1,eo.workerPool=[],eo.workerNextTaskID=1,eo.workerSourceURL="",eo.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1},eo}();function Ii(eo){var to=eo.match(/^([0-9a-z]+\:)\/\/(([^:/?#]*)(?::[0-9]+)?)/);return to?to[1]:location.protocol}var Ti=function(){function eo(to){this.timeout=to.timeout,this.allowHosts=to.allowHosts,this.networkSubscribe=to.networkSubscribe}return eo.prototype.setAllowHosts=function(to){this.allowHosts=to},eo.prototype.setNetworkSubscribe=function(to){this.networkSubscribe=to},eo.prototype.load=function(to,ro,no,io,oo,ao){var so;ro===void 0&&(ro={}),no===void 0&&(no=Pe),io===void 0&&(io=Pe),oo===void 0&&(oo=Pe);var uo=Ii(to),lo={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},co=(so=ro.viaAjax)!==null&&so!==void 0&&so,fo=Ze(to),mo=/^https?:$/.test(uo),go=/\.basis$/.test(Je(to).split("?")[0]);if(fo?co=!0:mo||(co=!1),co){if(go){var yo=null,vo="arraybuffer";return ro.flipY===!0?Promise.reject(new Error(".basis cannnot set flipY: true.")):tt(to,t$2.__assign(t$2.__assign({},lo),{responseType:vo}),void 0,void 0,oo).then(function(Mo){return yo=Mo.meta,wi.createTexture(Mo.body)}).then(function(Mo){return ro.preInit!==!1?mi(Mo,t$2.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ni(ro,["wrapS","wrapT"])),ao):Mo}).then(function(Mo){var xo={meta:yo,body:Mo};return no(xo),xo}).catch(function(Mo){return io(Mo),Promise.reject(Mo)})}return vo="blob",tt(to,t$2.__assign(t$2.__assign({},lo),{responseType:vo}),void 0,void 0,oo).then(function(Mo){return ci(Mo.body)}).then(function(Mo){return Ai(Mo,ro.maxSize)}).then(function(Mo){return ro.preInit!==!1?mi(Mo,t$2.__assign({flipY:!0,encoding:r$3.sRGBEncoding},ro),ao):Mo}).then(function(Mo){var xo={meta:null,body:Mo};return no(xo),xo}).catch(function(Mo){return io(Mo),Promise.reject(Mo)})}if(go){var Ao=new Error("cannot load basis texture via image");return io(Ao),Promise.reject(Ao)}var ho=null,po=ui();return nt(to,lo,void 0,void 0,oo,po).then(function(Mo){return ho=Mo.meta,Ai(Mo.body,ro.maxSize)}).then(function(Mo){return ro.preInit!==!1?mi(Mo,t$2.__assign({flipY:!0,encoding:r$3.sRGBEncoding},ro),ao):Mo}).then(function(Mo){var xo={meta:ho,body:Mo};return no(xo),xo}).catch(function(Mo){return po.close(),io(Mo),Promise.reject(Mo)})},eo.prototype.loadCube=function(to,ro,no,io,oo,ao){var so;ro===void 0&&(ro={}),no===void 0&&(no=Pe),io===void 0&&(io=Pe),oo===void 0&&(oo=Pe),Array.isArray(to)||(to=[to.right,to.left,to.up,to.down,to.front,to.back]);for(var uo={timeout:this.timeout,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe},lo=[],co=[0,0,0,0,0,0],fo=[],mo=function(vo){var Ao=to[vo],ho=Ii(Ao),po=function(Co){co[vo]=Co,oo(co.reduce(function(Do,zo){return Do+zo},0)/6)},Mo=(so=ro.viaAjax)!==null&&so!==void 0&&so,xo=/^https?:$/.test(ho),wo=Ze(Ao),bo=/\.basis$/.test(Je(Ao).split("?")[0]);if(wo?Mo=!0:xo||(Mo=!1),Mo)if(bo){var _o="arraybuffer",To=tt(Ao,t$2.__assign(t$2.__assign({},uo),{responseType:_o}),void 0,void 0,po).then(function(Co){return fo[vo]=Co.meta,wi.createTexture(Co.body)});lo.push(To)}else _o="blob",To=tt(Ao,t$2.__assign(t$2.__assign({},uo),{responseType:_o}),void 0,void 0,po).then(function(Co){return fo[vo]=Co.meta,ci(Co.body)}),lo.push(To);else{if(bo){var No=new Error("cannot load basis texture via image");return io(No),{value:Promise.reject(No)}}var Po=ui();To=nt(Ao,uo,void 0,void 0,po,Po).then(function(Co){return fo[vo]=Co.meta,Co.body}).catch(function(Co){return Po.close(),Promise.reject(Co)}),lo.push(To)}},go=0;go<6;go++){var yo=mo(go);if(typeof yo=="object")return yo.value}return Promise.all(lo).then(function(vo){return vo[0]instanceof r$3.CompressedTexture?function(Ao){var ho=new r$3.CubeTexture(Ao);ho.needsUpdate=!0;var po=ho.dispose;return ho.dispose=function(){for(var Mo=0,xo=Ao;Mo<xo.length;Mo++)xo[Mo].dispose();po.call(ho),delete ho.dispose},ho.isCompressedTexture=!0,ho.format=Ao[0].format,ho.minFilter=Ao[0].minFilter,ho.magFilter=Ao[0].magFilter,ho}(vo):function(Ao){var ho=new r$3.CubeTexture(Ao);ho.needsUpdate=!0,ho.flipY=!1;var po=ho.dispose;return ho.dispose=function(){for(var Mo=0,xo=Ao;Mo<xo.length;Mo++)xo[Mo].close();po.call(ho),delete ho.dispose},ho}(vo)}).then(function(vo){return ro.preInit!==!1?vo.isCompressedTexture?mi(vo,t$2.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ni(ro,["wrapS","wrapT"])),ao):mi(vo,t$2.__assign({flipY:!1,encoding:r$3.sRGBEncoding},ro),ao):vo}).then(function(vo){var Ao={body:vo,meta:fo};return no(Ao),Ao}).catch(function(vo){for(var Ao=0,ho=lo;Ao<ho.length;Ao++)ho[Ao].then(function(po){po instanceof r$3.Texture?po.dispose():po.close()}).catch(Pe);return io(vo),Promise.reject(vo)})},eo}();const xi=s$1.Reader,ji=s$1.util,zi=s$1.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]||(s$1.roots["@REALSEE/FIVE:five/loaders/model/proto/pbm.proto"]={}),Ci=zi.Model=(()=>{function eo(to){if(this.chunks=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.chunks=ji.emptyArray,eo.decode=function(to,ro){to instanceof xi||(to=xi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new zi.Model;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.chunks&&io.chunks.length||(io.chunks=[]),io.chunks.push(zi.Chunk.decode(to,to.uint32()));break;default:to.skipType(7&oo)}}return io},eo})();function bi(eo){var to,ro,no=new r$3.Matrix4().set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);function io(pu){var ou=pu.match(/(group|floor)-?(\d+)/);return ou?parseInt(ou[2],10):0}function oo(pu){var ou=pu.match(/(chunk)-?(\d+)/);return ou?parseInt(ou[2],10):0}function ao(pu){return 1e6*io(pu.name)+1e3*oo(pu.name)+function(ou){var qo=ou.match(/(sub)-?(\d+)/);return qo?parseInt(qo[2],10):0}(pu.name)}for(var so=[],uo=0,lo=((to=eo.chunks)!==null&&to!==void 0?to:[]).sort(function(pu,ou){return ao(pu)-ao(ou)});uo<lo.length;uo++){var co=io((Lo=lo[uo]).name);so[co]||(so[co]=[]),so[co].push(Lo)}for(var fo=[],mo=0;mo<so.length;mo++){var go=so[mo];if(go){for(var yo=0,vo=0,Ao=0;Ao<go.length;Ao++)vo+=(Lo=go[Ao]).vertices.xyz.length/3,yo+=Lo.faces.indices.length;for(var ho=3*vo,po=2*vo,Mo=3*vo,xo=yo,wo=new ArrayBuffer(4*ho+4*po+4*Mo+4*xo),bo=new Float32Array(wo,0,ho),_o=new Float32Array(wo,4*ho,po),To=new Float32Array(wo,4*ho+4*po,Mo),No=new Uint32Array(wo,4*ho+4*po+4*Mo,xo),Po=[],Co=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Do=0,zo=0,Ro=0;Ro<go.length;Ro++){var Lo,$o=(Lo=go[Ro]).vertices.xyz,jo=Lo.vertices.uvs,Wo=Lo.faces.indices,Ko=$o.length/3,Jo=Wo.length,Go=[1/0,1/0,1/0,-1/0,-1/0,-1/0];for(Ao=0;Ao<Ko;Ao++){var Xo=$o[3*Ao],va=$o[3*Ao+1],tu=$o[3*Ao+2],Zs=no.elements,ga=1/(Zs[3]*Xo+Zs[7]*va+Zs[11]*tu+Zs[15]),qs=(Zs[0]*Xo+Zs[4]*va+Zs[8]*tu+Zs[12])*ga,su=(Zs[1]*Xo+Zs[5]*va+Zs[9]*tu+Zs[13])*ga,uu=(Zs[2]*Xo+Zs[6]*va+Zs[10]*tu+Zs[14])*ga;bo[3*zo+3*Ao]=qs,bo[3*zo+3*Ao+1]=su,bo[3*zo+3*Ao+2]=uu,_o[2*zo+2*Ao]=jo[2*Ao],_o[2*zo+2*Ao+1]=jo[2*Ao+1],qs<Go[0]&&(Go[0]=qs),su<Go[1]&&(Go[1]=su),uu<Go[2]&&(Go[2]=uu),qs>Go[3]&&(Go[3]=qs),su>Go[4]&&(Go[4]=su),uu>Go[5]&&(Go[5]=uu)}for(Go[0]<Co[0]&&(Co[0]=Go[0]),Go[1]<Co[1]&&(Co[1]=Go[1]),Go[2]<Co[2]&&(Co[2]=Go[2]),Go[3]>Co[3]&&(Co[3]=Go[3]),Go[4]>Co[4]&&(Co[4]=Go[4]),Go[5]>Co[5]&&(Co[5]=Go[5]),Ao=0;Ao<Jo;Ao++)No[Do+Ao]=zo+Wo[Ao];Po.push({materialIndex:Ro,name:Lo.name,chunkName:oo(Lo.name),start:Do,count:Lo.faces.indices.length,texture:(ro=Lo.texture)!==null&&ro!==void 0?ro:void 0}),zo+=Ko,Do+=Jo}for(Ao=0;Ao<yo;Ao+=3){var Js,Xs,iu,hu,yu,Ru,ku,Fo,Vo,lu,au,Tu,mu,gu,Fu,zu,Iu,du,xu;Js=3*No[Ao],Xs=3*No[Ao+1],iu=3*No[Ao+2],hu=bo[Js],yu=bo[Js+1],Ru=bo[Js+2],ku=bo[Xs],Fo=bo[Xs+1],Vo=bo[Xs+2],lu=bo[iu],Iu=(Tu=bo[iu+1]-Fo)*(zu=Ru-Vo)-(mu=bo[iu+2]-Vo)*(Fu=yu-Fo),du=mu*(gu=hu-ku)-(au=lu-ku)*zu,xu=au*Fu-Tu*gu,To[Js]+=Iu,To[Js+1]+=du,To[Js+2]+=xu,To[Xs]+=Iu,To[Xs+1]+=du,To[Xs+2]+=xu,To[iu]+=Iu,To[iu+1]+=du,To[iu+2]+=xu}fo.push({floorIndex:mo,vertices:bo,uvs:_o,indices:No,normals:To,groups:Po,extents:Co})}}return fo}function Si(eo,to,ro,no){var io=t$2.__assign({key:"texture.pbm",basisLoaderInitialized:wi.isInitialized()},ni(to,["format","quality","size"]));return eo=to.transform?to.transform(eo,io):ht(eo,io),new Ti({allowHosts:ro,networkSubscribe:no}).load(eo,{wrapS:r$3.ClampToEdgeWrapping,wrapT:r$3.ClampToEdgeWrapping,minFilter:r$3.LinearFilter,maxSize:typeof io.size=="number"?new r$3.Vector2(io.size,io.size):void 0,preInit:!0}).then(function(oo){var ao=oo.body;return ao.needsUpdate=!0,ao})}function Li(eo,to,ro,no,io,oo,ao){io===void 0&&(io={});for(var so=[],uo=0,lo=bi(eo);uo<lo.length;uo++){var co=lo[uo],fo=co.floorIndex,mo=co.vertices,go=co.uvs,yo=co.indices,vo=co.normals,Ao=co.groups,ho=co.extents,po=new r$3.Box3;po.min.x=ho[0],po.min.y=ho[1],po.min.z=ho[2],po.max.x=ho[3],po.max.y=ho[4],po.max.z=ho[5];var Mo=new r$3.BufferGeometry;Mo.setAttribute("position",new r$3.BufferAttribute(mo,3)),Mo.setAttribute("uv",new r$3.BufferAttribute(go,2)),Mo.setAttribute("normal",new r$3.BufferAttribute(vo,3)),Mo.setIndex(new r$3.BufferAttribute(yo,1)),Mo.boundingBox=po,Mo.boundingSphere=po.getBoundingSphere(new r$3.Sphere);for(var xo=0,wo=Ao;xo<wo.length;xo++){var bo=wo[xo];Mo.addGroup(bo.start,bo.count,bo.materialIndex)}for(var _o=[],To=function(Do){var zo=ro[Do.chunkName]||(Do.texture?to+Do.texture:void 0),Ro=new Et;if(_o.push(Ro),zo){var Lo=void 0;zo in io?Lo=io[zo]:(Lo=Si(zo,no,oo,ao),io[zo]=Lo),Lo.then(function($o){Ro.uniforms.map.value=$o,Ro.uniforms.exposure.value=3.3},function(){Ro.defines.USE_MAP=!1,Ro.uniforms.color.value=new r$3.Color(16777215)})}else Ro.defines.USE_MAP=!1,Ro.uniforms.color.value=new r$3.Color(16777215)},No=0,Po=Ao;No<Po.length;No++)To(bo=Po[No]);var Co=new dt(Mo,_o);Co.name="model_floor_"+fo,Co.floorIndex=fo,so.push(Co)}return{objects:so,texturePromise:Promise.all(Object.keys(io).map(function(Do){return io[Do].catch(Pe)})).then(Pe)}}function Oi(eo,to){return(eo=Object.assign({},eo)).autoResize!==!1&&(eo.size=to>96?Math.min(eo.size||1/0,100):to>48?Math.min(eo.size||1/0,200):to>24?Math.min(eo.size||1/0,400):to>12?Math.min(eo.size||1/0,800):Math.min(eo.size||1/0,1024)),eo}function Bi(eo){return eo.indexOf("//")===0||/^[0-9a-z]+\:\/\//i.test(eo)}zi.Chunk=(()=>{function eo(to){if(to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.vertices=null,eo.prototype.faces=null,eo.prototype.name="",eo.prototype.texture="",eo.decode=function(to,ro){to instanceof xi||(to=xi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new zi.Chunk;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.vertices=zi.Vertices.decode(to,to.uint32());break;case 2:io.faces=zi.Faces.decode(to,to.uint32());break;case 3:io.name=to.string();break;case 4:io.texture=to.string();break;default:to.skipType(7&oo)}}if(!io.hasOwnProperty("vertices"))throw ji.ProtocolError("missing required 'vertices'",{instance:io});if(!io.hasOwnProperty("faces"))throw ji.ProtocolError("missing required 'faces'",{instance:io});if(!io.hasOwnProperty("name"))throw ji.ProtocolError("missing required 'name'",{instance:io});return io},eo})(),zi.Vertices=(()=>{function eo(to){if(this.xyz=[],this.uvs=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.xyz=ji.emptyArray,eo.prototype.uvs=ji.emptyArray,eo.decode=function(to,ro){to instanceof xi||(to=xi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new zi.Vertices;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.xyz&&io.xyz.length||(io.xyz=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.xyz.push(to.float())}else io.xyz.push(to.float());break;case 2:if(io.uvs&&io.uvs.length||(io.uvs=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.uvs.push(to.float())}else io.uvs.push(to.float());break;default:to.skipType(7&oo)}}return io},eo})(),zi.Faces=(()=>{function eo(to){if(this.indices=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.indices=ji.emptyArray,eo.decode=function(to,ro){to instanceof xi||(to=xi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new zi.Faces;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.indices&&io.indices.length||(io.indices=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.indices.push(to.uint32())}else io.indices.push(to.uint32());break;default:to.skipType(7&oo)}}return io},eo})();const Qi=s$1.Reader,ki=s$1.util,Pi=s$1.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]||(s$1.roots["@REALSEE/FIVE:five/loaders/model/proto/dome.proto"]={}),Ui=Pi.Model=(()=>{function eo(to){if(this.meshes=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.meshes=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Model;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.meshes&&io.meshes.length||(io.meshes=[]),io.meshes.push(Pi.Mesh.decode(to,to.uint32()));break;default:to.skipType(7&oo)}}return io},eo})();function Ri(eo){for(var to=[0,0,0],ro=0;ro<eo.attributes.normal.array.length/9;ro++)to[0]=eo.attributes.normal.array[9*ro],to[1]=eo.attributes.normal.array[9*ro+1],to[2]=eo.attributes.normal.array[9*ro+2],eo.attributes.normal.array[9*ro]=eo.attributes.normal.array[9*ro+6],eo.attributes.normal.array[9*ro+1]=eo.attributes.normal.array[9*ro+7],eo.attributes.normal.array[9*ro+2]=eo.attributes.normal.array[9*ro+8],eo.attributes.normal.array[9*ro+6]=to[0],eo.attributes.normal.array[9*ro+7]=to[1],eo.attributes.normal.array[9*ro+8]=to[2];for(ro=0;ro<eo.attributes.position.array.length/9;ro++)to[0]=eo.attributes.position.array[9*ro],to[1]=eo.attributes.position.array[9*ro+1],to[2]=eo.attributes.position.array[9*ro+2],eo.attributes.position.array[9*ro]=eo.attributes.position.array[9*ro+6],eo.attributes.position.array[9*ro+1]=eo.attributes.position.array[9*ro+7],eo.attributes.position.array[9*ro+2]=eo.attributes.position.array[9*ro+8],eo.attributes.position.array[9*ro+6]=to[0],eo.attributes.position.array[9*ro+7]=to[1],eo.attributes.position.array[9*ro+8]=to[2];for(ro=0;ro<eo.attributes.uv.array.length/6;ro++)to[0]=eo.attributes.uv.array[6*ro],to[1]=eo.attributes.uv.array[6*ro+1],eo.attributes.uv.array[6*ro]=eo.attributes.uv.array[6*ro+4],eo.attributes.uv.array[6*ro+1]=eo.attributes.uv.array[6*ro+5],eo.attributes.uv.array[6*ro+4]=to[0],eo.attributes.uv.array[6*ro+5]=to[1];eo.attributes.normal.needsUpdate=!0,eo.attributes.position.needsUpdate=!0,eo.attributes.uv.needsUpdate=!0}function _i(eo){var to=eo.position,ro=eo.normal,no=eo.uv,io=eo.uv2,oo=eo.groups,ao=new r$3.BufferGeometry;ao.setAttribute("position",new r$3.BufferAttribute(new Float32Array(to.array),3)),ro&&ao.setAttribute("normal",new r$3.BufferAttribute(new Float32Array(ro.array),3)),no&&ao.setAttribute("uv",new r$3.BufferAttribute(new Float32Array(no.array),2)),io&&ao.setAttribute("uv2",new r$3.BufferAttribute(new Float32Array(io.array),2));for(var so=0,uo=oo;so<uo.length;so++){var lo=uo[so];ao.addGroup(lo.start,lo.count,lo.materialIndex)}return ao}function Yi(eo,to,ro,no,io,oo){if(oo.hasOwnProperty(eo))return oo[eo];Bi(eo=eo.split("?")[0])||(eo=to+eo),(eo=eo.replace(/\/\/vrlab-image\d*.ljcdn.com\//,"//vrlab-public.ljcdn.com/")).indexOf("//")===0&&(eo="https:"+eo);var ao=t$2.__assign({key:"texture.dome",size:64,basisLoaderInitialized:wi.isInitialized()},ni(ro,["quality","format"]));return oo[eo=ro.transform?ro.transform(eo,ao):ht(eo,ao)]=io.load(eo,{wrapS:r$3.RepeatWrapping,wrapT:r$3.RepeatWrapping,preInit:!0}).then(function(so){var uo=so.body;return no&&uo.repeat.copy(no),uo.needsUpdate=!0,uo.updateMatrix(),uo})}function Fi(eo,to,ro,no,io){var oo=[],ao=new Et,so=ao.uniforms;so.exposure.value=4.3;var uo=ao.defines;if(uo.USE_MAP=!1,uo.USE_UV=!1,eo.kd&&(so.diffuse.value=new r$3.Color().fromArray(eo.kd.rgb)),eo.mapkd){var lo=null;if(eo.mapkdrepeat){var co=eo.mapkdrepeat.split(/\s+/).map(function(yo){return Number(yo)}),fo=co[0],mo=co[1];lo=new r$3.Vector2(fo,mo)}oo.push(Yi(eo.mapkd,to,ro,lo,no,io).then(function(yo){uo.USE_MAP=!0,uo.USE_UV=!0,so.map.value=yo,so.uvTransform.value=yo.matrix}).catch(Pe))}if(eo.ks&&(so.specular.value=new r$3.Color().fromArray(eo.ks.rgb)),eo.mapks&&oo.push(Yi(eo.mapks,to,ro,null,no,io).then(function(yo){so.specularMap.value=yo}).catch(Pe)),eo.ke&&(so.emissive.value=new r$3.Color().fromArray(eo.ke.rgb)),eo.mapke&&oo.push(Yi(eo.mapke,to,ro,null,no,io).then(function(yo){so.emissiveMap.value=yo}).catch(Pe)),eo.norm&&oo.push(Yi(eo.norm,to,ro,null,no,io).then(function(yo){so.normalMap.value=yo}).catch(Pe)),eo.mapbump&&oo.push(Yi(eo.mapbump,to,ro,null,no,io).then(function(yo){so.bumpMap.value=yo}).catch(Pe)),eo.bump&&oo.push(Yi(eo.bump,to,ro,null,no,io).then(function(yo){so.bumpMap.value=yo}).catch(Pe)),typeof eo.ns=="number"&&(so.shininess.value=eo.ns),typeof eo.d=="number"){var go=eo.d;go>0&&go<1&&(ao.originOpacity=go,ao.opacity=go)}return{material:ao,textureReady:Promise.all(oo).then(Pe)}}function Hi(eo,to,ro,no,io){for(var oo,ao=[],so=[],uo=(oo=eo,Ui.decode(oo).meshes),lo=new Ti({allowHosts:no,networkSubscribe:io}),co=new r$3.Matrix4,fo=new r$3.Vector3,mo=new r$3.Quaternion,go=new r$3.Vector3,yo={},vo=0,Ao=uo;vo<Ao.length;vo++){var ho=Ao[vo],po=ho.name,Mo=ho.chunks,xo=ho.matrix;if(po!=="Ceiling"&&po!=="CeilingDrop")for(var wo=0,bo=xo;wo<bo.length;wo++){var _o=bo[wo];co.elements=_o.elements;var To=new pt;To.renderOrder=-3;for(var No=0;No<Mo.length;No++){var Po=_i(Mo[No].geometry);Po.applyMatrix4(co),co.decompose(fo,mo,go),go.x*go.y*go.z<0&&Po.attributes.normal&&Po.attributes.position&&Po.attributes.uv&&Ri(Po);for(var Co=[],Do=0,zo=Mo[No].material;Do<zo.length;Do++){var Ro=Fi(zo[Do],to,ro,lo,yo),Lo=Ro.material,$o=Ro.textureReady;so.push($o),Co.push(Lo)}var jo=new dt(Po,Co);jo.name="chunk_"+No,To.add(jo)}To.floorIndex=0,To.name=po,ao.push(To)}}return{objects:ao,texturePromise:Promise.all(so).catch(Pe)}}function Vi(eo){return eo==null}Pi.Mesh=(()=>{function eo(to){if(this.chunks=[],this.matrix=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.name="",eo.prototype.chunks=ki.emptyArray,eo.prototype.matrix=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Mesh;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.name=to.string();break;case 2:io.chunks&&io.chunks.length||(io.chunks=[]),io.chunks.push(Pi.Chunk.decode(to,to.uint32()));break;case 3:io.matrix&&io.matrix.length||(io.matrix=[]),io.matrix.push(Pi.Matrix.decode(to,to.uint32()));break;default:to.skipType(7&oo)}}if(!io.hasOwnProperty("name"))throw ki.ProtocolError("missing required 'name'",{instance:io});return io},eo})(),Pi.Matrix=(()=>{function eo(to){if(this.elements=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.elements=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Matrix;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.elements&&io.elements.length||(io.elements=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.elements.push(to.float())}else io.elements.push(to.float());break;default:to.skipType(7&oo)}}return io},eo})(),Pi.Chunk=(()=>{function eo(to){if(this.material=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.geometry=null,eo.prototype.material=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Chunk;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 2:io.geometry=Pi.Geometry.decode(to,to.uint32());break;case 3:io.material&&io.material.length||(io.material=[]),io.material.push(Pi.Material.decode(to,to.uint32()));break;default:to.skipType(7&oo)}}if(!io.hasOwnProperty("geometry"))throw ki.ProtocolError("missing required 'geometry'",{instance:io});return io},eo})(),Pi.Geometry=(()=>{function eo(to){if(this.groups=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.position=null,eo.prototype.uv=null,eo.prototype.uv2=null,eo.prototype.normal=null,eo.prototype.groups=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Geometry;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.position=Pi.Position.decode(to,to.uint32());break;case 2:io.uv=Pi.UV.decode(to,to.uint32());break;case 3:io.uv2=Pi.UV.decode(to,to.uint32());break;case 4:io.normal=Pi.Normal.decode(to,to.uint32());break;case 5:io.groups&&io.groups.length||(io.groups=[]),io.groups.push(Pi.Group.decode(to,to.uint32()));break;default:to.skipType(7&oo)}}if(!io.hasOwnProperty("position"))throw ki.ProtocolError("missing required 'position'",{instance:io});if(!io.hasOwnProperty("normal"))throw ki.ProtocolError("missing required 'normal'",{instance:io});return io},eo})(),Pi.Position=(()=>{function eo(to){if(this.array=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.array=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Position;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.array&&io.array.length||(io.array=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.array.push(to.float())}else io.array.push(to.float());break;default:to.skipType(7&oo)}}return io},eo})(),Pi.UV=(()=>{function eo(to){if(this.array=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.array=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.UV;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.array&&io.array.length||(io.array=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.array.push(to.float())}else io.array.push(to.float());break;default:to.skipType(7&oo)}}return io},eo})(),Pi.Normal=(()=>{function eo(to){if(this.array=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.array=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Normal;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.array&&io.array.length||(io.array=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.array.push(to.float())}else io.array.push(to.float());break;default:to.skipType(7&oo)}}return io},eo})(),Pi.Group=(()=>{function eo(to){if(to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.start=0,eo.prototype.count=0,eo.prototype.materialIndex=0,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Group;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.start=to.uint32();break;case 2:io.count=to.uint32();break;case 3:io.materialIndex=to.uint32();break;default:to.skipType(7&oo)}}if(!io.hasOwnProperty("start"))throw ki.ProtocolError("missing required 'start'",{instance:io});if(!io.hasOwnProperty("count"))throw ki.ProtocolError("missing required 'count'",{instance:io});if(!io.hasOwnProperty("materialIndex"))throw ki.ProtocolError("missing required 'materialIndex'",{instance:io});return io},eo})(),Pi.Material=(()=>{function eo(to){if(to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.kd=null,eo.prototype.ks=null,eo.prototype.ke=null,eo.prototype.mapkd="",eo.prototype.mapks="",eo.prototype.mapke="",eo.prototype.norm="",eo.prototype.mapbump="",eo.prototype.bump="",eo.prototype.mapd="",eo.prototype.ns=0,eo.prototype.d=0,eo.prototype.tr=0,eo.prototype.mapkdrepeat="",eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Material;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:io.kd=Pi.Color.decode(to,to.uint32());break;case 2:io.ks=Pi.Color.decode(to,to.uint32());break;case 3:io.ke=Pi.Color.decode(to,to.uint32());break;case 4:io.mapkd=to.string();break;case 5:io.mapks=to.string();break;case 6:io.mapke=to.string();break;case 7:io.norm=to.string();break;case 8:io.mapbump=to.string();break;case 9:io.bump=to.string();break;case 10:io.mapd=to.string();break;case 11:io.ns=to.float();break;case 12:io.d=to.float();break;case 13:io.tr=to.float();break;case 14:io.mapkdrepeat=to.string();break;default:to.skipType(7&oo)}}return io},eo})(),Pi.Color=(()=>{function eo(to){if(this.rgb=[],to)for(let ro=Object.keys(to),no=0;no<ro.length;++no)to[ro[no]]!=null&&(this[ro[no]]=to[ro[no]])}return eo.prototype.rgb=ki.emptyArray,eo.decode=function(to,ro){to instanceof Qi||(to=Qi.create(to));let no=ro===void 0?to.len:to.pos+ro,io=new Pi.Color;for(;to.pos<no;){let oo=to.uint32();switch(oo>>>3){case 1:if(io.rgb&&io.rgb.length||(io.rgb=[]),(7&oo)==2){let ao=to.uint32()+to.pos;for(;to.pos<ao;)io.rgb.push(to.float())}else io.rgb.push(to.float());break;default:to.skipType(7&oo)}}return io},eo})();var Gi=function(eo,to){to===void 0&&(to=1e-4),to=Math.max(to,Number.EPSILON);for(var ro={},no=eo.getIndex(),io=eo.getAttribute("position"),oo=no?no.count:io.count,ao=0,so=Object.keys(eo.attributes),uo={},lo={},co=[],fo=["getX","getY","getZ","getW"],mo=0,go=so.length;mo<go;mo++)uo[Mo=so[mo]]=[],(_o=eo.morphAttributes[Mo])&&(lo[Mo]=new Array(_o.length).fill().map(function(){return[]}));var yo=Math.log10(1/to),vo=Math.pow(10,yo);for(mo=0;mo<oo;mo++){var Ao=no?no.getX(mo):mo,ho="",po=0;for(go=so.length;po<go;po++)for(var Mo=so[po],xo=(bo=eo.getAttribute(Mo)).itemSize,wo=0;wo<xo;wo++)ho+="".concat(~~(bo[fo[wo]](Ao)*vo),",");if(ho in ro)co.push(ro[ho]);else{for(po=0,go=so.length;po<go;po++){Mo=so[po];var bo=eo.getAttribute(Mo),_o=eo.morphAttributes[Mo],To=(xo=bo.itemSize,uo[Mo]),No=lo[Mo];for(wo=0;wo<xo;wo++){var Po=fo[wo];if(To.push(bo[Po](Ao)),_o)for(var Co=0,Do=_o.length;Co<Do;Co++)No[Co].push(_o[Co][Po](Ao))}}ro[ho]=ao,co.push(ao),ao++}}var zo=eo.clone();for(mo=0,go=so.length;mo<go;mo++){Mo=so[mo];var Ro=eo.getAttribute(Mo),Lo=new Ro.array.constructor(uo[Mo]);if(bo=new r$3.BufferAttribute(Lo,Ro.itemSize,Ro.normalized),zo.setAttribute(Mo,bo),Mo in lo)for(po=0;po<lo[Mo].length;po++){var $o=eo.morphAttributes[Mo][po],jo=(Lo=new $o.array.constructor(lo[Mo][po]),new r$3.BufferAttribute(Lo,$o.itemSize,$o.normalized));zo.morphAttributes[Mo][po]=jo}}return zo.setIndex(co),zo};function Ki(eo){var to;return new((to=r$3.Triangle).bind.apply(to,t$2.__spreadArray([void 0],eo.map(function(ro){return new r$3.Vector3(ro.x,ro.y,ro.z)}),!1)))}var qi={at3d:function(eo,to){for(var ro=Oi(to.textureOptions,eo.textures.length),no={},io=0,oo=eo.textures;io<oo.length;io++){var ao=oo[io];no[ao]=Si(ao,ro,to.allowHosts,to.networkSubscribe)}return Promise.resolve().then(function(){return tt(eo.file,{responseType:"arraybuffer",allowHosts:to.allowHosts,networkSubscribe:to.networkSubscribe})}).then(function(so){return ii(so.body)}).then(function(so){return Kt(function(){for(var uo,lo={chunks:[]},co=0,fo=so;co<fo.length;co++){var mo=fo[co],go=Ci.decode(mo);go.chunks.length&&(uo=lo.chunks).push.apply(uo,go.chunks)}return lo})}).then(function(so){return Kt(function(){return Li(so,eo.textureBase,eo.textures.slice(),ro,no,to.allowHosts,to.networkSubscribe)})})},pbm:function(eo,to){for(var ro=Oi(to.textureOptions,eo.textures.length),no={},io=0,oo=eo.textures;io<oo.length;io++){var ao=oo[io];no[ao]=Si(ao,ro,to.allowHosts,to.networkSubscribe)}return Promise.resolve().then(function(){return tt(eo.file,{responseType:"arraybuffer",allowHosts:to.allowHosts,networkSubscribe:to.networkSubscribe})}).then(function(so){return Kt(function(){var uo=new Uint8Array(so.body);return Ci.decode(uo)})}).then(function(so){return Kt(function(){return Li(so,eo.textureBase,eo.textures.slice(),ro,no,to.allowHosts,to.networkSubscribe)})})},dome:function(eo,to){return Promise.resolve().then(function(){return tt(eo.file,{responseType:"arraybuffer",allowHosts:to.allowHosts,networkSubscribe:to.networkSubscribe})}).then(function(ro){return Hi(new Uint8Array(ro.body),eo.textureBase,to.textureOptions,to.allowHosts,to.networkSubscribe)})},domez:function(eo,to){return Promise.resolve().then(function(){return tt(eo.file,{responseType:"arraybuffer",allowHosts:to.allowHosts,networkSubscribe:to.networkSubscribe})}).then(function(ro){return ii(ro.body)}).then(function(ro){var no=ro.reduce(function(ao,so){return ao+so.length},0),io=new Uint8Array(no),oo=0;return ro.forEach(function(ao){io.set(ao,oo),oo+=ao.length}),io}).then(function(ro){return Hi(ro,eo.textureBase,to.textureOptions,to.allowHosts,to.networkSubscribe)})}},Wi=function(eo){function to(ro){ro===void 0&&(ro={});var no=eo.call(this)||this;return no.empty=!0,no.name="model",no.loaded=!1,no.bvhs=Object.assign([],{loaded:!1}),no.bounding=new r$3.Box3,no.shownFloor=null,no.floorLength=0,no.networkSubscribe=ro.networkSubscribe,no.allowHosts=ro.allowHosts,no.renderOrder=-3,no}return t$2.__extends(to,eo),Object.defineProperty(to.prototype,"shownfloor",{get:function(){return this.shownFloor},enumerable:!1,configurable:!0}),to.prototype.getEdges=function(ro){var no;ro===void 0&&(ro=30/180*Math.PI);for(var io=Math.cos(ro),oo=[],ao=0,so=this.children;ao<so.length;ao++){var uo=so[ao];if(uo instanceof dt){for(var lo={},co=["a","b","c"],fo=Gi(uo.geometry),mo=fo.getAttribute("position").array,go=((no=fo.getIndex())===null||no===void 0?void 0:no.array)||[],yo=[],vo=[],Ao=0,ho=mo.length;Ao<ho;Ao+=3)yo.push(new r$3.Vector3(mo[Ao],mo[Ao+1],mo[Ao+2]));for(Ao=0,ho=go.length;Ao<ho;Ao+=3){var po=go[Ao],Mo=go[Ao+1],xo=go[Ao+2],wo=new r$3.Vector3().crossVectors(yo[Mo].clone().sub(yo[po]),yo[xo].clone().sub(yo[po])).normalize();vo.push({a:po,b:Mo,c:xo,normal:wo})}for(Ao=0,ho=vo.length;Ao<ho;Ao++)for(var bo=vo[Ao],_o=0;_o<3;_o++){var To=bo[co[_o]],No=bo[co[(_o+1)%3]],Po=[Math.min(To,No),Math.max(To,No)];lo[Co=Po[0]+"-"+Po[1]]===void 0?lo[Co]={index1:Po[0],index2:Po[1],face1:Ao}:lo[Co].face2=Ao}for(var Co in lo){var Do=lo[Co];if(Do.face2===void 0||vo[Do.face1].normal.dot(vo[Do.face2].normal)<=io){var zo=yo[Do.index1],Ro=yo[Do.index2];oo.push(new r$3.Line3(zo,Ro))}}fo.dispose(),yo.length=0,vo.length=0}}return oo},to.prototype.hasFloors=function(){return this.hasFloors_()},to.prototype.hasFloors_=function(){var ro=[];return this.traverse(function(no){no instanceof dt&&(ro[no.floorIndex]=!0)}),ro.length},to.prototype.show=function(){for(var ro,no=[],io=0;io<arguments.length;io++)no[io]=arguments[io];var oo=this.shownFloor,ao=null,so=1,uo=(ro=no[1])!==null&&ro!==void 0?ro:.1,lo=no.length!==0;this.shownFloor=ao=lo?no[0]:null,this.traverse(function(co){co instanceof dt&&co.material.forEach(function(fo){ao===null||ao===co.floorIndex?fo.opacity=fo.originOpacity*so:fo.opacity=fo.originOpacity*uo})}),oo!==this.shownFloor&&this.emit("shownFloorChange",this.shownFloor,this.floorLength),this.needsRender=!0},to.prototype.intersectRaycaster=function(ro,no){var io=ro.ray,oo=io.origin,ao=io.direction;if(Vi(no))if(Vi(this.shownFloor)){var so=this.floorLength;no=[];for(var uo=-1;uo<so;uo++)no.push(uo)}else no=[this.shownFloor];var lo=[],co=[];Array.isArray(no)?co.push.apply(co,no):co.push(no);for(var fo=function(vo){var Ao=mo.bvhs&&mo.bvhs[vo];if(Ao){var ho=new Ot(oo.x,oo.y,oo.z),po=new Ot(ao.x,ao.y,ao.z);(Mo=Ao.intersectRay(ho,po,!0).map(function(wo){var bo=wo.intersectionPoint,_o=wo.triangle,To=new r$3.Vector3(bo.x,bo.y,bo.z);return{point:To,face:{normal:Ki(_o).getNormal(new r$3.Vector3)},distance:oo.distanceTo(To)}})).length&&lo.push.apply(lo,Mo)}else{var Mo,xo=[];mo.traverse(function(wo){wo instanceof dt&&wo.floorIndex===vo&&xo.push(wo)}),(Mo=ro.intersectObjects(xo).map(function(wo){return{face:wo.face?{normal:wo.face.normal}:void 0,point:wo.point,distance:wo.distance}})).length&&lo.push.apply(lo,Mo)}},mo=this,go=0,yo=co;go<yo.length;go++)fo(yo[go]);return lo.filter(function(vo){var Ao=vo.distance;return Ao<=ro.far&&Ao>=ro.near}).sort(function(vo,Ao){return vo.distance-Ao.distance})},to.prototype.buildBVH=function(){if(!this.bvhs.loaded){var ro=[];this.traverse(function(wo){wo instanceof dt&&(ro[wo.floorIndex]=ro[wo.floorIndex]||[],ro[wo.floorIndex].push(wo.geometry))}),this.bvhs.length=0;for(var no=0,io=ro;no<io.length;no++){for(var oo=io[no],ao=0,so=0,uo=oo;so<uo.length;so++)ao+=(go=uo[so]).index?go.index.array.length:go.attributes.position.array.length;for(var lo=new Float32Array(3*ao),co=0,fo=0,mo=oo;fo<mo.length;fo++){var go,yo=(go=mo[fo]).attributes.position.array,vo=go.index?go.index.array:null;if(vo){for(var Ao=vo.length,ho=0,po=void 0,Mo=void 0;ho<Ao;ho++)po=3*(co+ho),Mo=3*vo[ho],lo[po]=yo[Mo],lo[po+1]=yo[Mo+1],lo[po+2]=yo[Mo+2];co+=Ao}else{for(Ao=yo.length/3,ho=0,po=void 0,Mo=void 0;ho<Ao;ho++)Mo=3*ho,lo[po=3*(co+ho)]=yo[Mo],lo[po+1]=yo[Mo+1],lo[po+2]=yo[Mo+2];co+=Ao}}var xo=new _t$1().create(lo).splitNode(50);this.bvhs.push(xo)}this.bvhs.loaded=!0,this.emit("bvhLoaded")}},to.prototype.load=function(ro,no){var io=this;if(no===void 0&&(no={}),this.loaded===!0)throw new Error("[MODEL LOAD ERROR]: model cannot load twice.");var oo=function(so,uo){uo===void 0&&(uo=[]);var lo=/([0-9a-z\.\_\-]+)([\?\#].*)?$/i.exec(so);if(!lo)return"";for(var co=0,fo=String(lo[1]).trim().split(".").slice(1).reverse();co<fo.length;co++){var mo=fo[co],go=uo.indexOf(mo);if(go>=0)return uo[go]}return""}(ro.file,Object.keys(qi)),ao=qi[oo];if(!ao)throw new Error("[MODEL LOAD ERROR]: file type(".concat(oo,") does not support."));return this.name=ro.file,ao(ro,{textureOptions:no,allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}).then(function(so){var uo=so.objects,lo=so.texturePromise;io.bounding.makeEmpty();for(var co=0,fo=uo;co<fo.length;co++)(vo=fo[co]).traverse(function(Ao){if(Ao instanceof dt){var ho=Ao.geometry;ho.boundingBox||ho.computeBoundingBox(),ho.boundingSphere||ho.computeBoundingSphere(),io.bounding.union(ho.boundingBox)}}),io.add(vo);for(var mo=io.bounding.getCenter(new r$3.Vector3),go=0,yo=uo;go<yo.length;go++){var vo;(vo=yo[go]).traverse(function(Ao){if(Ao instanceof dt)for(var ho=0,po=Ao.material;ho<po.length;ho++)po[ho].uniforms.modelCenter.value=mo})}io.floorLength=io.hasFloors_(),io.empty=!1,io.loaded=!0,Kt(function(){io.emit("geometryLoaded"),lo.then(function(){io.emit("materialLoaded"),io.emit("loaded")})})}).catch(function(so){return io.name="",io.emit("error",so),Promise.reject(so)})},to.prototype.dispose=function(){for(this.off(),this.disposeGeometry(),this.disposeMaterial();this.children.length;)this.remove(this.children[0]);this.bvhs.length=0,this.bvhs.loaded=!1},to}(gt);Object.assign(Wi.prototype,{on:ke.prototype.on,once:ke.prototype.once,off:ke.prototype.off,emit:ke.prototype.emit,hasListener:ke.prototype.hasListener});var Xi=function(){function eo(){this.name="",this.workCode="",this.expire=new Date,this.allowHosts=[],this.initial={mode:"Panorama",latitude:0,longitude:0,panoIndex:0,fov:80},this.observers=[],this.issuer="none",this.raw={work:null,option:{}}}return eo.prototype.toJSON=function(){return this.raw.work},eo}();function Zi(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=[];eo=eo.map(function(so){return so.trim()}).filter(function(so){return so.length>0&&!/^\/+$/.test(so)});for(var no=0;no<eo.length;no++){var io=no===0,oo=no===eo.length-1,ao=eo[no];io||(ao=ao.replace(/^\/+/,"")),oo||(ao=ao.replace(/\/+$/,"")),ro.push(ao)}return ro.join("/")}function Ji(eo){return eo instanceof Error}function $i(eo,to){if(eo===to)return!0;if(eo&&to&&typeof eo=="object"&&typeof to=="object"){if(eo.constructor!==to.constructor)return!1;var ro,no,io;if(Array.isArray(eo)){if((ro=eo.length)!=to.length)return!1;for(no=ro;no--!=0;)if(!$i(eo[no],to[no]))return!1;return!0}if(eo.constructor===RegExp)return eo.source===to.source&&eo.flags===to.flags;if(eo.valueOf!==Object.prototype.valueOf)return eo.valueOf()===to.valueOf();if(eo.toString!==Object.prototype.toString)return eo.toString()===to.toString();if((ro=(io=Object.keys(eo)).length)!==Object.keys(to).length)return!1;for(no=ro;no--!=0;)if(!Object.prototype.hasOwnProperty.call(to,io[no]))return!1;for(no=ro;no--!=0;){var oo=io[no];if(!$i(eo[oo],to[oo]))return!1}return!0}return eo!=eo&&to!=to}function en(eo){return typeof eo=="number"}function tn(eo){return(eo&eo-1)==0&&eo!==0}function nn(eo,to){to===void 0&&(to=!1);var ro=typeof eo;if(ro==="string")return JSON.stringify(eo);if(eo===!0)return"true";if(eo===!1)return"false";if(eo===null)return"null";if(eo instanceof Array){for(var no="[",io=eo.length-1,oo=0;oo<io;oo++)no+=nn(eo[oo],!1)+",";return io>-1&&(no+=nn(eo[oo],!1)),no+"]"}if(eo instanceof Object){if(typeof eo.toJSON=="function")return nn(eo.toJSON(),to);var ao=Object.keys(eo).sort(),so=ao.length;for(no="",oo=0;oo<so;){var uo=ao[oo],lo=nn(eo[uo],!0);lo!==void 0&&(oo&&no!==""&&(no+=","),no+=JSON.stringify(uo)+":"+lo),oo++}return"{"+no+"}"}switch(ro){case"function":case"undefined":return to?void 0:null;case"number":return 0;default:return isFinite(eo)?eo:null}}function rn(eo){return String(nn(eo,!1))}function sn(eo){var to,ro,no,io=JSON.parse(eo),oo=typeof location!="undefined"?location.hostname:"",ao=Date.now();if(typeof io!="object")return new Error("input is not an object");if(oo.length===0||Fe(oo)||Ge.filter(function(go){return He(go,oo)}).length>0){var so=String((to=io.certificate)!==null&&to!==void 0?to:"");if(so){var uo=new je;return uo.readCertPEM(so),{issuer:uo.getSubjectString()}}return{issuer:"none"}}var lo=String((ro=io.certificate)!==null&&ro!==void 0?ro:"");if(!lo)return new Error("certificate is not existed.");var co=new je;co.readCertPEM(lo);var fo=String((no=io._signature)!==null&&no!==void 0?no:"");if(!fo)return new Error("signature is not existed.");if(function(go,yo,vo){var Ao=new je;if(typeof vo=="string"?Ao.readCertPEM(vo):Ao.readCertHex(vo.hex),Le(Ao)===!1)return!1;var ho=new W$1;return ho.readCertPubKeyHex(Ao.hex,6),!!ho.verify(go,B$1(yo))}(rn(function(go,yo){for(var vo={},Ao=0,ho=Object.keys(go);Ao<ho.length;Ao++){var po=ho[Ao];yo.indexOf(po)===-1&&(vo[po]=go[po])}return vo}(io,["_signature"])),fo,co)===!1)return new Error("signature verify failed.");var mo=new Date(typeof io.expire_at=="string"&&/^\d+$/.test(io.expire_at)?Number(io.expire_at):io.expire_at);return ao<mo.getTime()?(Array.isArray(io.allow_hosts)?io.allow_hosts:[]).filter(function(go){return He(go,oo)}).length===0?function(go){return new Error("host(".concat(JSON.stringify(go),") is not allowed."))}(oo):{issuer:co.getSubjectString()}:function(go){return new Error("date(".concat(go.toString(),") expired."))}(mo)}var on=new WeakMap;function an(eo,to,ro){var no,io=JSON.stringify(to),oo=JSON.stringify(eo),ao=sn(oo);eo=JSON.parse(oo),to=JSON.parse(io);var so=new Xi;so.issuer=ao instanceof Error?"none":ao.issuer,so.raw={work:eo,options:to};var uo=(no=eo.base_url)!==null&&no!==void 0?no:"";uo&&uo[uo.length-1]!=="/"&&(uo+="/");var lo=function(iu,hu){return iu.indexOf(hu)===0},co=function(iu,hu){var yu,Ru=iu;if(to.jsonp===!0){Ru=iu.replace(/([\?\#].*)?$/i,"");var ku=ze("".concat(Ru)).slice(0,7);Ru="".concat(Ru,".").concat(ku,".jsonp")}if(to.shortPath===!0){var Fo=Ru.replace(uo,"").split("."),Vo=(yu=Fo.shift())!==null&&yu!==void 0?yu:"",lu=Fo.join(".");Ru=Zi(uo,ze(Vo))+(lu?"."+lu:"")}var au=Ru.replace(uo,"");return to.baseURL&&(Ru=Zi(to.baseURL,au)),ro&&ro(iu,Ru,au,hu),Ru},fo=function(iu,hu){var yu,Ru,ku,Fo,Vo,lu,au=iu;if(!Bi(iu)){var Tu=(lu=(Fo=(Ru=(yu=eo.panorama)===null||yu===void 0?void 0:yu.pano_high_cube_base_url)!==null&&Ru!==void 0?Ru:(ku=eo.panorama)===null||ku===void 0?void 0:ku.pano_cube_base_url)!==null&&Fo!==void 0?Fo:(Vo=eo.panorama)===null||Vo===void 0?void 0:Vo.base_url)!==null&&lu!==void 0?lu:"";Tu&&(Tu=Zi(Tu,String(hu))),au=Zi(Tu,au)}return Bi(au)||(au=Zi(uo,au)),lo(au,uo)||console.warn("".concat(au," is not start with base_url(").concat(uo,").")),co(au,"panorama")},mo=function(iu){var hu=iu;return Bi(hu)||(hu=Zi(uo,iu)),lo(hu,uo)||console.warn("".concat(hu," is not start with base_url(").concat(uo,").")),co(hu,"model")},go=function(iu,hu){hu===void 0&&(hu="");var yu=iu;return Bi(yu)||(yu=Zi(hu,yu)),Bi(yu)||(yu=Zi(uo,yu)),lo(yu,uo)||console.warn("".concat(yu," is not start with base_url(").concat(uo,").")),co(yu,"texture")};if(so.workCode=String(eo.work_code||eo.code||eo.vr_code||eo.workCode),so.name=String(eo.name),so.expire=new Date(typeof eo.expire_at=="string"&&/^\d+$/.test(eo.expire_at)?Number(eo.expire_at):eo.expire_at),so.allowHosts=eo.allow_hosts||[],Ji(ao)||(eo.initial&&(eo.initial.mode!=="Floorplan"&&eo.initial.mode!=="Topview"&&eo.initial.mode!=="Panorama"&&eo.initial.mode!=="VRPanorama"&&eo.initial.mode!=="Model"&&eo.initial.mode!=="DepthPanorama"||(so.initial.mode=eo.initial.mode),en(eo.initial.latitude)&&(so.initial.latitude=eo.initial.latitude),en(eo.initial.longitude)?so.initial.longitude=eo.initial.longitude:en(eo.initial.heading)&&(so.initial.longitude=-(360*(eo.initial.heading-.25)+90)/180*Math.PI),en(eo.initial.fov)&&(so.initial.fov=eo.initial.fov),en(eo.initial.panoIndex)?so.initial.panoIndex=eo.initial.panoIndex:en(eo.initial.pano_index)?so.initial.panoIndex=eo.initial.pano_index:en(eo.initial.pano)&&(so.initial.panoIndex=eo.initial.pano)),Ji(ao)))return ao;if(eo.model){var yo={bvh:!0,async:!1,textureBase:"",textures:[]};typeof to.modelBvh=="boolean"?yo.bvh=to.modelBvh:typeof eo.model.bvh=="boolean"?yo.bvh=eo.model.bvh:typeof eo.bvh=="boolean"&&(yo.bvh=eo.bvh),eo.model.file?yo.file=mo(eo.model.file):eo.model.file_url&&(yo.file=mo(eo.model.file_url)),eo.model.textureBase?yo.textureBase=eo.model.textureBase:eo.model.material_base_url&&(yo.textureBase=eo.model.material_base_url),Array.isArray(eo.model.textures)?yo.textures=eo.model.textures.map(function(iu){return go(iu,yo.textureBase)}):Array.isArray(eo.model.material_textures)&&(yo.textures=eo.model.material_textures.map(function(iu){return go(iu,yo.textureBase)})),yo.file&&(so.model=yo)}if(Ji(ao))return ao;if(eo.observers&&Array.isArray(eo.observers)){var vo=[];eo.panorama&&(Array.isArray(eo.panorama)?vo=eo.panorama:Array.isArray(eo.panorama.list)?vo=eo.panorama.list:Array.isArray(eo.panorama.info)&&(vo=eo.panorama.info));for(var Ao=0;Ao<eo.observers.length;Ao++){var ho={},po=eo.observers[Ao];if(!po)break;var Mo=vo[Ao]||{};po=Object.assign({},po,Mo,{active:po.active!==!1&&Mo.active!==!1}),ho.panoIndex=Ao,ho.active=po.active!==!1,ho.loadable=po.loadable===!0,ho.images={up:fo(po.images?po.images.up:po.up,Ao),down:fo(po.images?po.images.down:po.down,Ao),right:fo(po.images?po.images.right:po.right,Ao),left:fo(po.images?po.images.left:po.left,Ao),front:fo(po.images?po.images.front:po.front,Ao),back:fo(po.images?po.images.back:po.back,Ao)};var xo=po.images?po.images.depth:po.depth;xo&&(ho.images.depth=fo(xo,Ao));var wo=po.images?po.images.luminance:po.luminance;wo&&(ho.images.luminance={up:fo(wo.up,Ao),down:fo(wo.down,Ao),right:fo(wo.right,Ao),left:fo(wo.left,Ao),front:fo(wo.front,Ao),back:fo(wo.back,Ao)});var bo=po.images?po.images.tiles:po.tiles;if(bo){for(var _o=[],To=function(iu){var hu=iu.match(/\/cube_(\d+)\//);if(hu){var yu=Number(hu[1]);if(tn(yu))return yu}return!1},No=function(iu,hu){return iu.replace(/\/cube_(\d+)\//,function(){return"/cube_".concat(hu,"/")})},Po=0,Co=bo;Po<Co.length;Po++){var Do=Co[Po];if(typeof Do=="number"){var zo=Do,Ro=To(ho.images.front);if(Ro===!1)continue;if((Go=Math.max(Ro,512*Math.pow(2,zo)))>2048){var Lo=No(ho.images.up,Go),$o=No(ho.images.down,Go),jo=No(ho.images.right,Go),Wo=No(ho.images.left,Go),Ko=No(ho.images.front,Go),Jo=No(ho.images.back,Go);_o.push({level:zo,size:Go,up:Lo,down:$o,right:jo,left:Wo,front:Ko,back:Jo})}else Lo=ho.images.up,$o=ho.images.down,jo=ho.images.right,Wo=ho.images.left,Ko=ho.images.front,Jo=ho.images.back,_o.push({level:zo,size:Go,up:Lo,down:$o,right:jo,left:Wo,front:Ko,back:Jo})}else{var Go;if(typeof(zo=Do.level)!="number"||typeof(Go=Do.size)!="number")continue;Lo=fo(Do.up,Ao),$o=fo(Do.down,Ao),jo=fo(Do.right,Ao),Wo=fo(Do.left,Ao),Ko=fo(Do.front,Ao),Jo=fo(Do.back,Ao),_o.push({level:zo,size:Go,up:Lo,down:$o,right:jo,left:Wo,front:Ko,back:Jo})}}_o.sort(function(iu,hu){return iu.level-hu.level}),ho.images.tiles=_o}if(po.position instanceof r$3.Vector3)ho.position=po.position.clone();else{if(!Array.isArray(po.position))break;ho.position=new r$3.Vector3().fromArray(po.position)}if(po.standingPosition instanceof r$3.Vector3)ho.standingPosition=po.standingPosition.clone();else if(Array.isArray(po.standingPosition))ho.standingPosition=new r$3.Vector3().fromArray(po.standingPosition);else if(po.standing_position instanceof r$3.Vector3)ho.standingPosition=po.standing_position.clone();else{if(!Array.isArray(po.standing_position))break;ho.standingPosition=new r$3.Vector3().fromArray(po.standing_position)}if(po.quaternion instanceof r$3.Quaternion)ho.quaternion=po.quaternion.clone();else if(Array.isArray(po.quaternion))ho.quaternion=new r$3.Quaternion().fromArray(po.quaternion);else{if(!po.quaternion)break;var Xo=po.quaternion,va=Xo.x,tu=Xo.y,Zs=Xo.z,ga=Xo.w;ho.quaternion=new r$3.Quaternion(va,tu,Zs,ga)}if(Array.isArray(po.accessibleNodes)?ho.accessibleNodes=po.accessibleNodes.slice():Array.isArray(po.accessible_nodes)&&(ho.accessibleNodes=po.accessible_nodes.slice()),Array.isArray(po.visibleNodes)?ho.visibleNodes=po.visibleNodes.slice():Array.isArray(po.visible_nodes)&&(ho.visibleNodes=po.visible_nodes.slice()),en(po.floorIndex)?ho.floorIndex=po.floorIndex:en(po.floor_index)?ho.floorIndex=po.floor_index:ho.floorIndex=0,po.video){var qs={};typeof po.video.source=="string"&&(qs.source=po.video.source),po.video.matrix instanceof r$3.Matrix4?qs.matrix=po.video.matrix.clone():Array.isArray(po.video.matrix)&&(qs.matrix=new r$3.Matrix4().fromArray(po.video.matrix)),po.video.size instanceof r$3.Vector2?qs.size=po.video.size.clone():Array.isArray(po.video.size)&&(qs.size=new r$3.Vector2().fromArray(po.video.size)),qs.source&&qs.matrix&&qs.size&&(ho.video=qs)}so.observers[Ao]=ho}}if(Ji(ao))return ao;for(var su=0,uu=so.observers;su<uu.length;su++){if(!(ho=uu[su]).accessibleNodes){ho.accessibleNodes=[];for(var Js=0;Js<so.observers.length;Js++)so.observers[Js]!==ho&&ho.accessibleNodes.push(Js)}if(!ho.visibleNodes)for(ho.visibleNodes=[],Js=0;Js<so.observers.length;Js++)so.observers[Js]!==ho&&ho.visibleNodes.push(Js)}if(Ji(ao))return ao;var Xs=_e(so);return on.set(Xs,{work:oo,options:io}),Xs}function un(eo,to,ro){typeof eo=="string"&&eo.trim()[0]==="{"&&(eo=JSON.parse(eo));var no=on.get(eo);if(no){if(to&&!$i(JSON.parse(no.options),to))throw new Error("[PARSE FAILED]: work is parsed with different options.");return eo}var io=an(eo,to!=null?to:{},ro);if(Ji(io))throw new Error("[PARSE FAILED]: "+io.message);return io}function cn(eo,to,ro){return Math.max(to,Math.min(ro,eo))}function An(eo,to,ro){return eo+(to-eo)*ro}function ln(eo,to){var ro=to[1]-to[0];return eo<to[0]?ln(eo+ro,to):eo>=to[1]?ln(eo-ro,to):eo}function hn(eo,to,ro,no){return no?function(io,oo,ao,so){var uo=so[1]-so[0];return io=ln(io,so),An((oo=ln(oo,so))-io>uo/2?io+uo:io-oo>uo/2?io-uo:io,oo,ao)}(eo,to,ro,no):An(eo,to,ro)}var dn=function(){function eo(to){for(var ro in this.config={},this.progress=1,this.ended=!0,this.value={},this.startTime=Re(),this.startVelocity=0,this.duration=0,this.keyframes=[],to){var no=to[ro];typeof no=="number"?(this.value[ro]=no,this.config[ro]={circle:!1}):(this.value[ro]=no.value,this.config[ro]={circle:no.circle})}this.keyframes=[{progress:0,value:t$2.__assign({},this.value)},{progress:1,value:t$2.__assign({},this.value)}]}return eo.prototype.getProgress=function(to){var ro=to-this.startTime;return ro<0?0:ro>=this.duration?1:1-function(no,io,oo,ao){var so=(io*oo+2*no)/Math.pow(oo,3),uo=-(2*io*oo+3*no)/Math.pow(oo,2),lo=io,co=no;return so*Math.pow(ao,3)+uo*Math.pow(ao,2)+lo*ao+co}(1,this.startVelocity,this.duration,ro)},eo.prototype.getValue=function(to){for(var ro=1;ro<this.keyframes.length;ro++)if(this.keyframes[ro].progress>to){var no=this.keyframes[ro-1],io=this.keyframes[ro],oo={};for(var ao in this.config){var so=(to-no.progress)/(io.progress-no.progress);oo[ao]=hn(no.value[ao],io.value[ao],so,this.config[ao].circle)}return oo}return t$2.__assign({},this.keyframes[this.keyframes.length-1].value)},eo.prototype.getProgressVelocity=function(to){var ro=to-this.startTime;return ro>=this.duration?0:function(no,io,oo,ao){var so=(io*oo+2*no)/Math.pow(oo,3),uo=-(2*io*oo+3*no)/Math.pow(oo,2),lo=io;return 3*so*Math.pow(ao,2)+2*uo*ao+lo}(1,this.startVelocity,this.duration,ro)},eo.prototype.update=function(to){return!!this.ended||(this.progress=Math.min(1,Math.max(0,this.progress,this.getProgress(to))),this.value=this.getValue(this.progress),this.ended=this.progress>=1,this.ended&&this.callbacks&&(this.callbacks[0](),this.callbacks=void 0),this.ended)},eo.prototype.getKeyFrameSegment=function(to){for(var ro=this.getProgress(to),no=1;no<this.keyframes.length;no++)if(this.keyframes[no].progress>ro)return[this.keyframes[no-1],this.keyframes[no]];return[this.keyframes[this.keyframes.length-2],this.keyframes[this.keyframes.length-1]]},eo.prototype.getTargetKeyframe=function(){return this.keyframes[this.keyframes.length-1]},eo.prototype.set=function(to,ro,no,io){var oo;no===void 0&&(no=0),io=io!=null?io:Re();var ao=this.getProgress(io),so=this.getValue(ao),uo={};for(var lo in this.config)uo[lo]=(oo=to[lo])!==null&&oo!==void 0?oo:so[lo];var co=[{progress:0,value:so},{progress:1,value:uo}];return this.setKeyframes(co,ro,no,io)},eo.prototype.setKeyframes=function(to,ro,no,io){var oo=this;if(no===void 0&&(no=0),to.length<2)throw new Error("keyframes invalid.");return this.callbacks&&(this.callbacks[1](new Error("motion aborted.")),this.callbacks=void 0),new Promise(function(ao,so){io=io!=null?io:Re(),oo.progress=0,oo.ended=!1,oo.startTime=io,oo.startVelocity=no,oo.keyframes=to,oo.duration=ro,ro===0?(oo.progress=1,oo.value=t$2.__assign({},to[to.length-1].value)):oo.value=t$2.__assign({},to[0].value),oo.callbacks=[ao,so]})},eo.prototype.dispose=function(){this.callbacks&&(this.callbacks[1](new Error("motion dispose.")),this.callbacks=void 0)},eo}(),gn=yt(),pn=new r$3.Texture(gn);gn.onload=function(){return pn.needsUpdate=!0},gn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC";var Mn=new r$3.RingBufferGeometry(.06,.07,32).rotateX(-Math.PI/2),fn=new r$3.MeshBasicMaterial({map:pn,transparent:!0});function yn(){if(typeof document=="undefined"){var eo=new r$3.Texture;return Object.assign(eo,{draw:function(co){},retain:!1,pool:!1})}var to=document.createElement("canvas"),ro=512,no=256,io=190;to.setAttribute("width",String(ro)),to.setAttribute("height",String(ro));var oo=new r$3.Texture(to),ao=to.getContext("2d");if(!ao)throw Error("cannot create canvas context");var so=ao.createRadialGradient(no,no,150,no,no,0);function uo(){var co=Math.PI/12,fo=2*Math.PI/3;ao&&(ao.beginPath(),ao.arc(no,no,io,0*fo,1*fo-co),ao.stroke(),ao.beginPath(),ao.arc(no,no,io,1*fo,2*fo-co),ao.stroke(),ao.beginPath(),ao.arc(no,no,io,2*fo,3*fo-co),ao.stroke())}function lo(co){ao&&(ao.clearRect(0,0,ro,ro),ao.lineWidth=20,co!==-1&&(ao.globalCompositeOperation="source-over",ao.strokeStyle="rgba(255, 255, 255, 1)",uo(),ao.globalCompositeOperation="source-in",ao.beginPath(),ao.arc(no,no,io,0,2*Math.PI*co),ao.strokeStyle="rgba(255, 255, 255, 1)",ao.stroke(),ao.globalCompositeOperation="source-over",ao.strokeStyle="rgba(255, 255, 255, "+(co?.5:1)+")",uo()),ao.beginPath(),ao.arc(no,no,150,0,2*Math.PI),ao.closePath(),ao.fillStyle=so,ao.fill(),ao.fillStyle="rgba(255, 255, 255, 0.01)",ao.fillRect(0,0,ro,ro),oo.needsUpdate=!0)}return so.addColorStop(0,"rgba(255, 255, 255, 1)"),so.addColorStop(.15,"rgba(255, 255, 255, 1)"),so.addColorStop(.15,"rgba(255, 255, 255, 0.5)"),so.addColorStop(.4,"rgba(255, 255, 255, 0.0)"),so.addColorStop(1,"rgba(255, 255, 255, 0.0)"),lo(0),Object.assign(oo,{draw:lo,retain:!1,pool:!1})}var mn=[],vn=yn();vn.draw(0);var Nn=yn();Nn.draw(1);var Dn=yn();Dn.draw(-1);var En=new r$3.CircleBufferGeometry(.12,32).rotateX(-Math.PI/2);function wn(){return new r$3.Mesh(En,new r$3.MeshBasicMaterial({map:vn,transparent:!0}))}function In(eo,to){var ro=eo.map;to===0||to===1?(ro.pool===!0&&(ro.retain=!1),to===0&&(eo.map=vn),to===1&&(eo.map=Nn)):(ro.pool!==!0&&(eo.map=function(){for(var no=0,io=mn;no<io.length;no++){var oo=io[no];if(oo.retain===!1)return oo}var ao=yn();return ao.pool=!0,ao.retain=!0,mn.push(ao),ao}()),eo.map.draw(to))}var Tn=function(eo){function to(){var ro=eo.call(this)||this;return ro.loading=!1,ro.disabled=!1,ro.current=!1,ro.progress=0,ro.opacity=0,ro.centerMesh=wn(),ro.centerMesh.position.y+=.01,ro.add(ro.centerMesh),ro.loadingMesh=new r$3.Mesh(Mn,fn),ro.loadingMesh.position.y+=.011,ro.progressMotion=new dn({progress:ro.progress}),ro.opacityMotion=new dn({opacity:ro.opacity}),ro.needsRender=!0,ro.renderOrder=-2,ro}return t$2.__extends(to,eo),to.prototype.setLoading=function(ro){var no=this;this.loading=ro,this.stopInterval&&this.stopInterval(),ro?(this.add(this.loadingMesh),this.stopInterval=ot.shared.add(function(){no.loadingMesh.rotateOnAxis(new r$3.Vector3(0,1,0),.1),no.needsRender=!0})):this.remove(this.loadingMesh),this.needsRender=!0},to.prototype.setDisabled=function(ro){this.disabled=ro,function(no,io){var oo=no.map;oo.pool===!0&&(oo.retain=!1),no.map=io?Dn:vn}(this.centerMesh.material,ro),this.needsRender=!0},to.prototype.setProgress=function(ro){this.setLoading(!1),this.setDisabled(!1),this.progress=ro=cn(ro,0,1),ro!==this.progressMotion.getTargetKeyframe().value.progress&&this.progressMotion.set({progress:ro},120).catch(Pe)},to.prototype.setOpacity=function(ro){this.opacity=ro=cn(ro,0,1),this.current&&(ro=1),ro!==this.opacityMotion.getTargetKeyframe().value.opacity&&this.opacityMotion.set({opacity:ro},500).catch(Pe)},to.prototype.setCurrent=function(ro){this.current!==ro&&(this.current=ro,this.setOpacity(this.opacity))},to.prototype.updateTime=function(ro,no){this.opacityMotion.ended||(this.opacityMotion.update(ro),this.centerMesh.material.opacity=this.opacityMotion.value.opacity,this.needsRender=!0),this.progressMotion.ended||(this.progressMotion.update(ro),In(this.centerMesh.material,this.progressMotion.value.progress),this.needsRender=!0)},to.prototype.dispose=function(){this.setLoading(!1),this.remove(this.centerMesh),this.remove(this.loadingMesh),this.centerMesh.material.dispose()},to}(r$3.Object3D),xn=new Float32Array([-.15,0,-.15,.15,0,-.15,-.15,0,.15,.15,0,.15]),jn=new Float32Array([0,1,1,1,0,0,1,0]),zn=new Uint8Array([0,2,1,2,3,1]),Cn=new r$3.BufferGeometry;Cn.setAttribute("position",new r$3.BufferAttribute(xn,3)),Cn.setAttribute("uv",new r$3.BufferAttribute(jn,2)),Cn.setIndex(new r$3.BufferAttribute(zn,1));var bn,Sn,Ln=(bn=yt(),Sn=new r$3.Texture,bn.onload=function(){if(typeof document!="undefined"){var eo=256,to=document.createElement("canvas");to.setAttribute("width",String(eo)),to.setAttribute("height",String(eo));var ro=to.getContext("2d");if(ro){ro.drawImage(bn,0,0,eo,eo),ro.globalCompositeOperation="source-out";var no=128;ro.beginPath(),ro.lineWidth=29.952,ro.arc(no,no,84.48,0,2*Math.PI),ro.strokeStyle="rgba(255, 255, 255, 1)",ro.closePath(),ro.stroke(),Sn.image=to,Sn.needsUpdate=!0}}},bn.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAR9JREFUOBF10kFOAzEMBdCZFhCbrrgAN+NqHIULsWKDKO3gF+VHoZpa+rXjfH87nq7btr0ty3KZ8FsxnHeQPL748lA/x0Jsq+AwYe0X8nDtGA33BEJUHIEKW/EorHOLI7BHNlkEbju38YkQAIRZxFkHz2HOirKDxNcIzG+fu/6oLiNmqc5ZrlwTeKyAgJF14tMZmSn87pBrxeX/CRABgk/dl1s+C18dio2Pp9nmCQru2UtdvN+7lI9AFsgb3zNMcSp8FF4LYs3UhLfOAvkDJffci8q1J/ByRLKnQ8gUJUFOd2SeZYliCxwiyJCxCbhUGFKF4zPm61hiq7sVyJnPmATyR5IzLSNyDNEFRCDnkAmA8U2RfCsIefYhDeKOQLv7A+l1ZTyjymNxAAAAAElFTkSuQmCC",Sn),On=function(){if(typeof document!="undefined"){var eo=document.createElement("canvas");eo.setAttribute("width",String(512)),eo.setAttribute("height",String(512));var to=eo.getContext("2d");if(to){var ro=256,no=199.68;return to.beginPath(),to.arc(ro,ro,no,0,2*Math.PI),to.fillStyle="rgba(255, 255, 255, 0.1)",to.closePath(),to.fill(),to.save(),to.beginPath(),to.arc(ro,ro,no,0,2*Math.PI),to.strokeStyle="rgba(255, 255, 255, 0.5)",to.lineWidth=10.24,to.closePath(),to.stroke(),new r$3.CanvasTexture(eo)}}return null}(),Bn=function(){if(typeof document!="undefined"){var eo=document.createElement("canvas");eo.setAttribute("width",String(512)),eo.setAttribute("height",String(512));var to=eo.getContext("2d");if(to){var ro=256,no=138.24,io=to.createLinearGradient(ro-Math.cos(Math.PI/4)*no,ro-Math.sin(Math.PI/4)*no,ro+Math.cos(Math.PI/4)*no,ro+Math.sin(Math.PI/4)*no);return io.addColorStop(0,"rgba(255, 255, 255, 1)"),io.addColorStop(.5,"rgba(255, 255, 255, 0.6)"),io.addColorStop(1,"rgba(255, 255, 255, 1)"),to.beginPath(),to.lineWidth=33.28,to.arc(ro,ro,no,0,2*Math.PI),to.strokeStyle=io,to.shadowBlur=38.4,to.shadowColor="rgba(0, 0, 0, 0.3)",to.closePath(),to.stroke(),new r$3.CanvasTexture(eo)}}return null}(),Qn=function(){if(typeof document!="undefined"){var eo=document.createElement("canvas");eo.setAttribute("width",String(512)),eo.setAttribute("height",String(512));var to=eo.getContext("2d");if(to){var ro=256,no=199.68,io=to.createLinearGradient(ro+Math.cos(Math.PI/4)*no,ro-Math.sin(Math.PI/4)*no,ro-Math.cos(Math.PI/4)*no,ro+Math.sin(Math.PI/4)*no);return io.addColorStop(0,"rgba(255, 255, 255, 0.5)"),io.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),io.addColorStop(1,"rgba(255, 255, 255, 0.5)"),to.beginPath(),to.lineWidth=15.36,to.arc(ro,ro,no,0,2*Math.PI),to.strokeStyle=io,to.shadowBlur=25.6,to.shadowColor="rgba(0, 0, 0, 0.5)",to.closePath(),to.stroke(),new r$3.CanvasTexture(eo)}}return null}(),kn=function(eo,to){var ro=128;eo.clearRect(0,0,256,256),eo.beginPath(),eo.lineWidth=29.44,eo.arc(ro,ro,84.48,0,2*Math.PI*to),eo.strokeStyle="rgba(255, 255, 255, 0.2)",eo.stroke()},Pn=function(){if(typeof document!="undefined"){var eo=document.createElement("canvas");eo.setAttribute("width",String(256)),eo.setAttribute("height",String(256));var to=eo.getContext("2d");to&&kn(to,2*Math.PI);var ro=new r$3.CanvasTexture(eo);return Object.assign(ro,{setProgress:function(no){to&&(kn(to,no),ro.needsUpdate=!0)}})}return null},Un=[],Rn=Pn(),_n=function(eo){function to(){var ro=eo.call(this)||this;ro.progress=0,ro.opacity=0,ro.loading=!1,ro.current=!1,ro.disabled=!1,ro.ringRotateMotion=new dn({angle:0}),ro.tapMotion=new dn({scale:1,opacity:1}),ro.progressMotion=new dn({progress:0}),ro.progressOpacityMotion=new dn({opacity:0}),ro.opacityMotion=new dn({opacity:0});var no={blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor,depthWrite:!1};return ro.centerMesh=new r$3.Mesh(Cn,new r$3.MeshBasicMaterial(t$2.__assign(t$2.__assign({},no),{map:Bn}))),ro.ringMesh=new r$3.Mesh(Cn,new r$3.MeshBasicMaterial(t$2.__assign(t$2.__assign({},no),{map:Qn}))),ro.loadingMesh=new r$3.Mesh(Cn,new r$3.MeshBasicMaterial(t$2.__assign(t$2.__assign({},no),{map:Ln,opacity:.5}))),ro.disableMesh=new r$3.Mesh(Cn,new r$3.MeshBasicMaterial(t$2.__assign(t$2.__assign({},no),{map:On}))),ro.progressMesh=new r$3.Mesh(Cn,new r$3.MeshBasicMaterial(t$2.__assign(t$2.__assign({},no),{map:Rn,opacity:0}))),ro.loadingMesh.visible=!1,ro.disableMesh.visible=!1,ro.ringMesh.position.y=.003,ro.disableMesh.position.y=.002,ro.centerMesh.position.y=.002,ro.loadingMesh.position.y=.005,ro.progressMesh.position.y=.004,ro.centerMesh.frustumCulled=!1,ro.ringMesh.frustumCulled=!1,ro.progressMesh.frustumCulled=!1,ro.loadingMesh.frustumCulled=!1,ro.disableMesh.frustumCulled=!1,ro.add(ro.centerMesh),ro.add(ro.ringMesh),ro.add(ro.progressMesh),ro.add(ro.loadingMesh),ro.add(ro.disableMesh),ro.needsRender=!0,ro}return t$2.__extends(to,eo),to.prototype.setProgress=function(ro){this.setDisabled(!1),this.setLoading(!1),this.progress!==ro&&(ro=cn(ro,0,1),this.tapMotion.ended&&(this.progress===0&&this.progressOpacityMotion.set({opacity:1},300).catch(Pe),ro===0?(this.progressOpacityMotion.set({opacity:0},300).catch(Pe),this.progressMotion.set({progress:cn(1.2*ro,0,1)},0).catch(Pe)):this.progressMotion.set({progress:cn(1.2*ro,0,1)},100).catch(Pe)),this.progress=ro)},to.prototype.setOpacity=function(ro){this.opacity!==ro&&(this.opacity=ro=cn(ro,0,1),this.opacityMotion.set({opacity:ro},500).catch(Pe))},to.prototype.setCurrent=function(ro){if(this.current!==ro){if(ro===!0&&this.ringRotateMotion.ended){var no=[{progress:0,value:{angle:0}},{progress:1,value:{angle:2*Math.PI}}];this.ringRotateMotion.setKeyframes(no,4e3).catch(Pe)}this.current=ro}},to.prototype.setLoading=function(ro){this.loading!==ro&&(this.loading=ro,this.disabled===!0&&this.setDisabled(!1),this.loadingMesh.visible=ro,this.needsRender=!0)},to.prototype.setDisabled=function(ro){this.disabled!==ro&&(this.disabled=ro,this.loading===!0&&this.setLoading(!1),this.disableMesh.visible=ro,this.ringMesh.visible=!ro,this.centerMesh.visible=!ro,this.needsRender=!0)},to.prototype.tap=function(){var ro=this;return this.tapMotion.ended?(this.progressOpacityMotion.set({opacity:0},0).catch(Pe),this.progressMotion.set({progress:0},0).catch(Pe),this.tapMotion.setKeyframes([{progress:0,value:{scale:1,opacity:1}},{progress:.3,value:{scale:.85,opacity:.5}},{progress:.8,value:{scale:1.05,opacity:.6}},{progress:1,value:{scale:1,opacity:1}}],600).then(function(){ro.progressOpacityMotion.set({opacity:ro.progress>0?1:0},300).catch(Pe),ro.progressMotion.set({progress:ro.progress},120).catch(Pe)}).catch(Pe)):Promise.resolve()},to.prototype.updateTime=function(ro,no){var io;if(!this.progressMotion.ended){this.progressMotion.update(ro);var oo=this.progressMotion.value.progress;if(this.progressMesh.material.map!==null)if(oo===0)this.progressMesh.material.map!==Rn&&(Un.push(this.progressMesh.material.map),this.progressMesh.material.map=Rn);else if(oo===1)this.progressMesh.material.map!==Rn&&(Un.push(this.progressMesh.material.map),this.progressMesh.material.map=Rn);else{if(this.progressMesh.material.map===Rn){var ao=Un.pop()||Pn();this.progressMesh.material.map=ao}(io=this.progressMesh.material.map)===null||io===void 0||io.setProgress(oo)}this.needsRender=!0}if(!this.progressOpacityMotion.ended){this.progressOpacityMotion.update(ro);var so=this.progressOpacityMotion.value.opacity;this.progressMesh.material.opacity=so,this.needsRender=!0}if(this.opacityMotion.ended||(this.opacityMotion.update(ro),so=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=so,this.ringMesh.material.opacity=so,this.disableMesh.material.opacity=so,this.loadingMesh.material.opacity=so,this.needsRender=!0),this.loadingMesh.visible===!0&&(this.loadingMesh.rotateY(-no/120),this.needsRender=!0),!this.tapMotion.ended){this.tapMotion.update(ro);var uo=this.tapMotion.value.scale;this.centerMesh.scale.set(uo,uo,uo),this.ringMesh.scale.set(uo,uo,uo),this.progressMesh.scale.set(uo,uo,uo),so=this.opacityMotion.value.opacity*this.tapMotion.value.opacity,this.centerMesh.material.opacity=so,this.ringMesh.material.opacity=so,this.disableMesh.material.opacity=so,this.loadingMesh.material.opacity=so,this.needsRender=!0}this.ringRotateMotion.ended||(this.ringRotateMotion.update(ro),this.ringMesh.quaternion.setFromEuler(new r$3.Euler(0,this.ringRotateMotion.value.angle,0)),this.needsRender=!0)},to.prototype.dispose=function(){this.ringRotateMotion.dispose(),this.tapMotion.dispose(),this.progressMotion.dispose(),this.progressOpacityMotion.dispose(),this.opacityMotion.dispose(),this.progressMesh.material.map!==Rn&&(Un.push(this.progressMesh.material.map),this.progressMesh.material.map=null),this.ringMesh.material.dispose(),this.disableMesh.material.dispose(),this.centerMesh.material.dispose(),this.loadingMesh.material.dispose(),this.progressMesh.material.dispose()},to}(r$3.Object3D),Yn=new Float32Array([-.15,-.15,0,.15,-.15,0,-.15,.15,0,.15,.15,0]),Fn=new Float32Array([0,0,1,0,0,1,1,1]),Hn=new Uint8Array([0,1,2,1,3,2]),Vn=new r$3.BufferGeometry;Vn.setAttribute("position",new r$3.BufferAttribute(Yn,3)),Vn.setAttribute("uv",new r$3.BufferAttribute(Fn,2)),Vn.setIndex(new r$3.BufferAttribute(Hn,1));var Gn=function(){if(typeof document!="undefined"){var eo=document.createElement("canvas");eo.setAttribute("width",String(512)),eo.setAttribute("height",String(512));var to=eo.getContext("2d");if(to){var ro=256;return to.beginPath(),to.lineWidth=76.8,to.arc(ro,ro,138.24,0,2*Math.PI),to.strokeStyle="rgba(18, 255, 251, 0.8)",to.shadowBlur=25.6,to.shadowColor="rgba(0, 0, 0, 0.4)",to.closePath(),to.stroke(),new r$3.CanvasTexture(eo)}}return null}(),Kn=new r$3.MeshBasicMaterial({map:Gn,transparent:!0}),qn=function(eo){function to(){var ro=eo.call(this)||this;return ro.ringMesh=new r$3.Mesh(Vn,Kn),ro.ringMesh.renderOrder=100,ro.add(ro.ringMesh),ro}return t$2.__extends(to,eo),to.prototype.dispose=function(){this.remove(this.ringMesh)},to}(r$3.Object3D);function Wn(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function Xn(){return(Wn()+Wn()+"-"+Wn()+"-4"+Wn().substr(0,3)+"-"+Wn()+"-"+Wn()+Wn()+Wn()).toLowerCase()}function Zn(eo,to,ro){var no=Math.abs(eo-to);return no<.001||ro!==void 0&&Math.abs(ro-no)<.001}function Jn(eo,to,ro){return!Zn(eo,to,ro)}function $n(eo,to){return eo.distanceTo(to)<.001}function er(eo,to){return!$n(eo,to)}var tr=new r$3.Vector3(0,0,0),ir=function(eo){function to(ro,no){no===void 0&&(no=tr);var io=eo.call(this)||this,oo=new r$3.BoxBufferGeometry(ro.max.x-ro.min.x+2*no.x,ro.max.y-ro.min.y+2*no.y,ro.max.z-ro.min.z+2*no.z,1,1);oo.groups.length=0,oo.groups.push({start:0,count:36,materialIndex:0}),oo.applyMatrix4(new r$3.Matrix4().makeScale(-1,1,1));var ao=new Et;ao.defines.USE_MAP=!1,ao.defines.USE_UV=!1,ao.uniforms.diffuse.value=new r$3.Color(16777215);var so=new dt(oo,[ao]);return so.floorIndex=-1,so.position.copy(ro.getCenter(new r$3.Vector3)),so.frustumCulled=!1,io.renderOrder=-3,io.add(so),io.boundingBox=new r$3.Box3,io.computeBoundingBox(),io}return t$2.__extends(to,eo),to.prototype.computeBoundingBox=function(){this.boundingBox.setFromObject(this)},to.prototype.dispose=function(){this.disposeMaterial(),this.disposeGeometry()},to}(pt);function nr(eo,to){return to===void 0&&(to=tr),new ir(eo,to)}var rr=2*Math.PI;function sr(eo){return(eo%rr+rr)%rr}var or=Math.PI,ar=2*or;function ur(eo,to,ro){if(eo===to)return to;var no=to-eo;return Math.abs(no)<=ro?to:eo+(no>0?1:-1)*ro}function cr(eo,to){eo.mode=to.mode,eo.panoIndex=to.panoIndex,eo.longitude=to.longitude,eo.latitude=to.latitude,eo.fov=to.fov,eo.offset.copy(to.offset)}function Ar(eo,to){return eo.panoIndex===to.panoIndex&&eo.mode===to.mode&&Zn(eo.longitude,to.longitude,2*Math.PI)&&Zn(eo.latitude,to.latitude)&&Zn(eo.fov,to.fov)&&$n(eo.offset,to.offset)}var lr=function(eo){return Number(eo)};function hr(eo,to,ro){var no;to===void 0&&(to=lr),ro===void 0&&(ro=!1);for(var io,oo=1/0,ao=0,so=eo;ao<so.length;ao++){var uo=so[ao],lo=to(uo);lo<=oo&&(io=(no=[uo,lo])[0],oo=no[1])}return ro?[io,oo]:io}function dr(eo){for(var to in eo)return!1;return!0}function gr(eo){return{longitude:eo.longitude,latitude:eo.latitude,fov:eo.fov,offset:eo.offset.clone()}}/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var pr=function(eo,to,ro,no){var io,oo=["","webkit","Moz","MS","ms","o"],ao=to.createElement?to.createElement("div"):no,so=Math.round,uo=Math.abs,lo=Date.now;function co(Bo,Uo,Yo){return setTimeout(ho(Bo,Yo),Uo)}function fo(Bo,Uo,Yo){return!!Array.isArray(Bo)&&(mo(Bo,Yo[Uo],Yo),!0)}function mo(Bo,Uo,Yo){var Zo;if(Bo)if(Bo.forEach)Bo.forEach(Uo,Yo);else if(Bo.length!==no)for(Zo=0;Zo<Bo.length;)Uo.call(Yo,Bo[Zo],Zo,Bo),Zo++;else for(Zo in Bo)Bo.hasOwnProperty(Zo)&&Uo.call(Yo,Bo[Zo],Zo,Bo)}function go(Bo,Uo,Yo){var Zo="DEPRECATED METHOD: "+Uo+`
`+Yo+` AT 
`;return function(){var ru=new Error("get-stack-trace"),Cu=ru&&ru.stack?ru.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Du=eo.console&&(eo.console.warn||eo.console.log);return Du&&Du.call(eo.console,Zo,Cu),Bo.apply(this,arguments)}}io=typeof Object.assign!="function"?function(Bo){if(Bo===no||Bo===null)throw new TypeError("Cannot convert undefined or null to object");for(var Uo=Object(Bo),Yo=1;Yo<arguments.length;Yo++){var Zo=arguments[Yo];if(Zo!==no&&Zo!==null)for(var ru in Zo)Zo.hasOwnProperty(ru)&&(Uo[ru]=Zo[ru])}return Uo}:Object.assign;var yo=go(function(Bo,Uo,Yo){for(var Zo=Object.keys(Uo),ru=0;ru<Zo.length;)(!Yo||Yo&&Bo[Zo[ru]]===no)&&(Bo[Zo[ru]]=Uo[Zo[ru]]),ru++;return Bo},"extend","Use `assign`."),vo=go(function(Bo,Uo){return yo(Bo,Uo,!0)},"merge","Use `assign`.");function Ao(Bo,Uo,Yo){var Zo,ru=Uo.prototype;(Zo=Bo.prototype=Object.create(ru)).constructor=Bo,Zo._super=ru,Yo&&io(Zo,Yo)}function ho(Bo,Uo){return function(){return Bo.apply(Uo,arguments)}}function po(Bo,Uo){return typeof Bo=="function"?Bo.apply(Uo&&Uo[0]||no,Uo):Bo}function Mo(Bo,Uo){return Bo===no?Uo:Bo}function xo(Bo,Uo,Yo){mo(To(Uo),function(Zo){Bo.addEventListener(Zo,Yo,!1)})}function wo(Bo,Uo,Yo){mo(To(Uo),function(Zo){Bo.removeEventListener(Zo,Yo,!1)})}function bo(Bo,Uo){for(;Bo;){if(Bo==Uo)return!0;Bo=Bo.parentNode}return!1}function _o(Bo,Uo){return Bo.indexOf(Uo)>-1}function To(Bo){return Bo.trim().split(/\s+/g)}function No(Bo,Uo,Yo){if(Bo.indexOf&&!Yo)return Bo.indexOf(Uo);for(var Zo=0;Zo<Bo.length;){if(Yo&&Bo[Zo][Yo]==Uo||!Yo&&Bo[Zo]===Uo)return Zo;Zo++}return-1}function Po(Bo){return Array.prototype.slice.call(Bo,0)}function Co(Bo,Uo,Yo){for(var Zo=[],ru=[],Cu=0;Cu<Bo.length;){var Du=Uo?Bo[Cu][Uo]:Bo[Cu];No(ru,Du)<0&&Zo.push(Bo[Cu]),ru[Cu]=Du,Cu++}return Yo&&(Zo=Uo?Zo.sort(function(el,Su){return el[Uo]>Su[Uo]}):Zo.sort()),Zo}function Do(Bo,Uo){for(var Yo,Zo,ru=Uo[0].toUpperCase()+Uo.slice(1),Cu=0;Cu<oo.length;){if((Zo=(Yo=oo[Cu])?Yo+ru:Uo)in Bo)return Zo;Cu++}return no}var zo=1;function Ro(Bo){var Uo=Bo.ownerDocument||Bo;return Uo.defaultView||Uo.parentWindow||eo}var Lo="ontouchstart"in eo,$o=Do(eo,"PointerEvent")!==no,jo=Lo&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Wo="touch",Ko="mouse",Jo=24,Go=["x","y"],Xo=["clientX","clientY"];function va(Bo,Uo){var Yo=this;this.manager=Bo,this.callback=Uo,this.element=Bo.element,this.target=Bo.options.inputTarget,this.domHandler=function(Zo){po(Bo.options.enable,[Bo])&&Yo.handler(Zo)},this.init()}function tu(Bo,Uo,Yo){var Zo=Yo.pointers.length,ru=Yo.changedPointers.length,Cu=1&Uo&&Zo-ru==0,Du=12&Uo&&Zo-ru==0;Yo.isFirst=!!Cu,Yo.isFinal=!!Du,Cu&&(Bo.session={}),Yo.eventType=Uo,function(el,Su){var rl=el.session,ml=Su.pointers,Ml=ml.length;rl.firstInput||(rl.firstInput=Zs(Su)),Ml>1&&!rl.firstMultiple?rl.firstMultiple=Zs(Su):Ml===1&&(rl.firstMultiple=!1);var El=rl.firstInput,xl=rl.firstMultiple,Ol=xl?xl.center:El.center,Pl=Su.center=ga(ml);Su.timeStamp=lo(),Su.deltaTime=Su.timeStamp-El.timeStamp,Su.angle=Js(Ol,Pl),Su.distance=uu(Ol,Pl),function(dl,Zu){var Ku=Zu.center,Eo=dl.offsetDelta||{},So=dl.prevDelta||{},Io=dl.prevInput||{};Zu.eventType!==1&&Io.eventType!==4||(So=dl.prevDelta={x:Io.deltaX||0,y:Io.deltaY||0},Eo=dl.offsetDelta={x:Ku.x,y:Ku.y}),Zu.deltaX=So.x+(Ku.x-Eo.x),Zu.deltaY=So.y+(Ku.y-Eo.y)}(rl,Su),Su.offsetDirection=su(Su.deltaX,Su.deltaY);var yl=qs(Su.deltaTime,Su.deltaX,Su.deltaY);Su.overallVelocityX=yl.x,Su.overallVelocityY=yl.y,Su.overallVelocity=uo(yl.x)>uo(yl.y)?yl.x:yl.y,Su.scale=xl?function(dl,Zu){return uu(Zu[0],Zu[1],Xo)/uu(dl[0],dl[1],Xo)}(xl.pointers,ml):1,Su.rotation=xl?function(dl,Zu){return Js(Zu[1],Zu[0],Xo)+Js(dl[1],dl[0],Xo)}(xl.pointers,ml):0,Su.maxPointers=rl.prevInput?Su.pointers.length>rl.prevInput.maxPointers?Su.pointers.length:rl.prevInput.maxPointers:Su.pointers.length,function(dl,Zu){var Ku,Eo,So,Io,Oo=dl.lastInterval||Zu,Qo=Zu.timeStamp-Oo.timeStamp;if(Zu.eventType!=8&&(Qo>25||Oo.velocity===no)){var Ho=Zu.deltaX-Oo.deltaX,$s=Zu.deltaY-Oo.deltaY,nu=qs(Qo,Ho,$s);Eo=nu.x,So=nu.y,Ku=uo(nu.x)>uo(nu.y)?nu.x:nu.y,Io=su(Ho,$s),dl.lastInterval=Zu}else Ku=Oo.velocity,Eo=Oo.velocityX,So=Oo.velocityY,Io=Oo.direction;Zu.velocity=Ku,Zu.velocityX=Eo,Zu.velocityY=So,Zu.direction=Io}(rl,Su);var qu=el.element;bo(Su.srcEvent.target,qu)&&(qu=Su.srcEvent.target),Su.target=qu}(Bo,Yo),Bo.emit("hammer.input",Yo),Bo.recognize(Yo),Bo.session.prevInput=Yo}function Zs(Bo){for(var Uo=[],Yo=0;Yo<Bo.pointers.length;)Uo[Yo]={clientX:so(Bo.pointers[Yo].clientX),clientY:so(Bo.pointers[Yo].clientY)},Yo++;return{timeStamp:lo(),pointers:Uo,center:ga(Uo),deltaX:Bo.deltaX,deltaY:Bo.deltaY}}function ga(Bo){var Uo=Bo.length;if(Uo===1)return{x:so(Bo[0].clientX),y:so(Bo[0].clientY)};for(var Yo=0,Zo=0,ru=0;ru<Uo;)Yo+=Bo[ru].clientX,Zo+=Bo[ru].clientY,ru++;return{x:so(Yo/Uo),y:so(Zo/Uo)}}function qs(Bo,Uo,Yo){return{x:Uo/Bo||0,y:Yo/Bo||0}}function su(Bo,Uo){return Bo===Uo?1:uo(Bo)>=uo(Uo)?Bo<0?2:4:Uo<0?8:16}function uu(Bo,Uo,Yo){Yo||(Yo=Go);var Zo=Uo[Yo[0]]-Bo[Yo[0]],ru=Uo[Yo[1]]-Bo[Yo[1]];return Math.sqrt(Zo*Zo+ru*ru)}function Js(Bo,Uo,Yo){Yo||(Yo=Go);var Zo=Uo[Yo[0]]-Bo[Yo[0]],ru=Uo[Yo[1]]-Bo[Yo[1]];return 180*Math.atan2(ru,Zo)/Math.PI}va.prototype={handler:function(){},init:function(){this.evEl&&xo(this.element,this.evEl,this.domHandler),this.evTarget&&xo(this.target,this.evTarget,this.domHandler),this.evWin&&xo(Ro(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&wo(this.element,this.evEl,this.domHandler),this.evTarget&&wo(this.target,this.evTarget,this.domHandler),this.evWin&&wo(Ro(this.element),this.evWin,this.domHandler)}};var Xs={mousedown:1,mousemove:2,mouseup:4},iu="mousedown",hu="mousemove mouseup";function yu(){this.evEl=iu,this.evWin=hu,this.pressed=!1,va.apply(this,arguments)}Ao(yu,va,{handler:function(Bo){var Uo=Xs[Bo.type];1&Uo&&Bo.button===0&&(this.pressed=!0),2&Uo&&Bo.which!==1&&(Uo=4),this.pressed&&(4&Uo&&(this.pressed=!1),this.callback(this.manager,Uo,{pointers:[Bo],changedPointers:[Bo],pointerType:Ko,srcEvent:Bo}))}});var Ru={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ku={2:Wo,3:"pen",4:Ko,5:"kinect"},Fo="pointerdown",Vo="pointermove pointerup pointercancel";function lu(){this.evEl=Fo,this.evWin=Vo,va.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}eo.MSPointerEvent&&!eo.PointerEvent&&(Fo="MSPointerDown",Vo="MSPointerMove MSPointerUp MSPointerCancel"),Ao(lu,va,{handler:function(Bo){var Uo=this.store,Yo=!1,Zo=Bo.type.toLowerCase().replace("ms",""),ru=Ru[Zo],Cu=ku[Bo.pointerType]||Bo.pointerType,Du=Cu==Wo,el=No(Uo,Bo.pointerId,"pointerId");1&ru&&(Bo.button===0||Du)?el<0&&(Uo.push(Bo),el=Uo.length-1):12&ru&&(Yo=!0),el<0||(Uo[el]=Bo,this.callback(this.manager,ru,{pointers:Uo,changedPointers:[Bo],pointerType:Cu,srcEvent:Bo}),Yo&&Uo.splice(el,1))}});var au={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Tu="touchstart",mu="touchstart touchmove touchend touchcancel";function gu(){this.evTarget=Tu,this.evWin=mu,this.started=!1,va.apply(this,arguments)}function Fu(Bo,Uo){var Yo=Po(Bo.touches),Zo=Po(Bo.changedTouches);return 12&Uo&&(Yo=Co(Yo.concat(Zo),"identifier",!0)),[Yo,Zo]}Ao(gu,va,{handler:function(Bo){var Uo=au[Bo.type];if(Uo===1&&(this.started=!0),this.started){var Yo=Fu.call(this,Bo,Uo);12&Uo&&Yo[0].length-Yo[1].length==0&&(this.started=!1),this.callback(this.manager,Uo,{pointers:Yo[0],changedPointers:Yo[1],pointerType:Wo,srcEvent:Bo})}}});var zu={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Iu="touchstart touchmove touchend touchcancel";function du(){this.evTarget=Iu,this.targetIds={},va.apply(this,arguments)}function xu(Bo,Uo){var Yo=Po(Bo.touches),Zo=this.targetIds;if(3&Uo&&Yo.length===1)return Zo[Yo[0].identifier]=!0,[Yo,Yo];var ru,Cu,Du=Po(Bo.changedTouches),el=[],Su=this.target;if(Cu=Yo.filter(function(rl){return bo(rl.target,Su)}),Uo===1)for(ru=0;ru<Cu.length;)Zo[Cu[ru].identifier]=!0,ru++;for(ru=0;ru<Du.length;)Zo[Du[ru].identifier]&&el.push(Du[ru]),12&Uo&&delete Zo[Du[ru].identifier],ru++;return el.length?[Co(Cu.concat(el),"identifier",!0),el]:void 0}Ao(du,va,{handler:function(Bo){var Uo=zu[Bo.type],Yo=xu.call(this,Bo,Uo);Yo&&this.callback(this.manager,Uo,{pointers:Yo[0],changedPointers:Yo[1],pointerType:Wo,srcEvent:Bo})}});function pu(){va.apply(this,arguments);var Bo=ho(this.handler,this);this.touch=new du(this.manager,Bo),this.mouse=new yu(this.manager,Bo),this.primaryTouch=null,this.lastTouches=[]}function ou(Bo,Uo){1&Bo?(this.primaryTouch=Uo.changedPointers[0].identifier,qo.call(this,Uo)):12&Bo&&qo.call(this,Uo)}function qo(Bo){var Uo=Bo.changedPointers[0];if(Uo.identifier===this.primaryTouch){var Yo={x:Uo.clientX,y:Uo.clientY};this.lastTouches.push(Yo);var Zo=this.lastTouches;setTimeout(function(){var ru=Zo.indexOf(Yo);ru>-1&&Zo.splice(ru,1)},2500)}}function vu(Bo){for(var Uo=Bo.srcEvent.clientX,Yo=Bo.srcEvent.clientY,Zo=0;Zo<this.lastTouches.length;Zo++){var ru=this.lastTouches[Zo],Cu=Math.abs(Uo-ru.x),Du=Math.abs(Yo-ru.y);if(Cu<=25&&Du<=25)return!0}return!1}Ao(pu,va,{handler:function(Bo,Uo,Yo){var Zo=Yo.pointerType==Wo,ru=Yo.pointerType==Ko;if(!(ru&&Yo.sourceCapabilities&&Yo.sourceCapabilities.firesTouchEvents)){if(Zo)ou.call(this,Uo,Yo);else if(ru&&vu.call(this,Yo))return;this.callback(Bo,Uo,Yo)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Mu=ao?Do(ao.style,"touchAction"):no,Lu=Mu!==no,Au="compute",Nu="auto",Vu="manipulation",Wu="none",ol="pan-x",bu="pan-y",tl=function(){if(!Lu)return!1;var Bo={},Uo=eo.CSS&&eo.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Yo){Bo[Yo]=!Uo||eo.CSS.supports("touch-action",Yo)}),Bo}();function al(Bo,Uo){this.manager=Bo,this.set(Uo)}al.prototype={set:function(Bo){Bo==Au&&(Bo=this.compute()),Lu&&this.manager.element.style&&tl[Bo]&&(this.manager.element.style[Mu]=Bo),this.actions=Bo.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Bo=[];return mo(this.manager.recognizers,function(Uo){po(Uo.options.enable,[Uo])&&(Bo=Bo.concat(Uo.getTouchAction()))}),function(Uo){if(_o(Uo,Wu))return Wu;var Yo=_o(Uo,ol),Zo=_o(Uo,bu);return Yo&&Zo?Wu:Yo||Zo?Yo?ol:bu:_o(Uo,Vu)?Vu:Nu}(Bo.join(" "))},preventDefaults:function(Bo){var Uo=Bo.srcEvent,Yo=Bo.offsetDirection;if(this.manager.session.prevented)Uo.preventDefault();else{var Zo=this.actions,ru=_o(Zo,Wu)&&!tl.none,Cu=_o(Zo,bu)&&!tl["pan-y"],Du=_o(Zo,ol)&&!tl["pan-x"];if(ru){var el=Bo.pointers.length===1,Su=Bo.distance<2,rl=Bo.deltaTime<250;if(el&&Su&&rl)return}if(!Du||!Cu)return ru||Cu&&6&Yo||Du&&Yo&Jo?this.preventSrc(Uo):void 0}},preventSrc:function(Bo){this.manager.session.prevented=!0,Bo.preventDefault()}};var nl=32;function ul(Bo){this.options=io({},this.defaults,Bo||{}),this.id=zo++,this.manager=null,this.options.enable=Mo(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Xu(Bo){return 16&Bo?"cancel":8&Bo?"end":4&Bo?"move":2&Bo?"start":""}function Al(Bo){return Bo==16?"down":Bo==8?"up":Bo==2?"left":Bo==4?"right":""}function ko(Bo,Uo){var Yo=Uo.manager;return Yo?Yo.get(Bo):Bo}function Ws(){ul.apply(this,arguments)}function _a(){Ws.apply(this,arguments),this.pX=null,this.pY=null}function eu(){Ws.apply(this,arguments)}function fu(){ul.apply(this,arguments),this._timer=null,this._input=null}function Pu(){Ws.apply(this,arguments)}function Eu(){Ws.apply(this,arguments)}function _u(){ul.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ou(Bo,Uo){return(Uo=Uo||{}).recognizers=Mo(Uo.recognizers,Ou.defaults.preset),new ju(Bo,Uo)}ul.prototype={defaults:{},set:function(Bo){return io(this.options,Bo),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Bo){if(fo(Bo,"recognizeWith",this))return this;var Uo=this.simultaneous;return Uo[(Bo=ko(Bo,this)).id]||(Uo[Bo.id]=Bo,Bo.recognizeWith(this)),this},dropRecognizeWith:function(Bo){return fo(Bo,"dropRecognizeWith",this)||(Bo=ko(Bo,this),delete this.simultaneous[Bo.id]),this},requireFailure:function(Bo){if(fo(Bo,"requireFailure",this))return this;var Uo=this.requireFail;return No(Uo,Bo=ko(Bo,this))===-1&&(Uo.push(Bo),Bo.requireFailure(this)),this},dropRequireFailure:function(Bo){if(fo(Bo,"dropRequireFailure",this))return this;Bo=ko(Bo,this);var Uo=No(this.requireFail,Bo);return Uo>-1&&this.requireFail.splice(Uo,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Bo){return!!this.simultaneous[Bo.id]},emit:function(Bo){var Uo=this,Yo=this.state;function Zo(ru){Uo.manager.emit(ru,Bo)}Yo<8&&Zo(Uo.options.event+Xu(Yo)),Zo(Uo.options.event),Bo.additionalEvent&&Zo(Bo.additionalEvent),Yo>=8&&Zo(Uo.options.event+Xu(Yo))},tryEmit:function(Bo){if(this.canEmit())return this.emit(Bo);this.state=nl},canEmit:function(){for(var Bo=0;Bo<this.requireFail.length;){if(!(33&this.requireFail[Bo].state))return!1;Bo++}return!0},recognize:function(Bo){var Uo=io({},Bo);if(!po(this.options.enable,[this,Uo]))return this.reset(),void(this.state=nl);56&this.state&&(this.state=1),this.state=this.process(Uo),30&this.state&&this.tryEmit(Uo)},process:function(Bo){},getTouchAction:function(){},reset:function(){}},Ao(Ws,ul,{defaults:{pointers:1},attrTest:function(Bo){var Uo=this.options.pointers;return Uo===0||Bo.pointers.length===Uo},process:function(Bo){var Uo=this.state,Yo=Bo.eventType,Zo=6&Uo,ru=this.attrTest(Bo);return Zo&&(8&Yo||!ru)?16|Uo:Zo||ru?4&Yo?8|Uo:2&Uo?4|Uo:2:nl}}),Ao(_a,Ws,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var Bo=this.options.direction,Uo=[];return 6&Bo&&Uo.push(bu),Bo&Jo&&Uo.push(ol),Uo},directionTest:function(Bo){var Uo=this.options,Yo=!0,Zo=Bo.distance,ru=Bo.direction,Cu=Bo.deltaX,Du=Bo.deltaY;return ru&Uo.direction||(6&Uo.direction?(ru=Cu===0?1:Cu<0?2:4,Yo=Cu!=this.pX,Zo=Math.abs(Bo.deltaX)):(ru=Du===0?1:Du<0?8:16,Yo=Du!=this.pY,Zo=Math.abs(Bo.deltaY))),Bo.direction=ru,Yo&&Zo>Uo.threshold&&ru&Uo.direction},attrTest:function(Bo){return Ws.prototype.attrTest.call(this,Bo)&&(2&this.state||!(2&this.state)&&this.directionTest(Bo))},emit:function(Bo){this.pX=Bo.deltaX,this.pY=Bo.deltaY;var Uo=Al(Bo.direction);Uo&&(Bo.additionalEvent=this.options.event+Uo),this._super.emit.call(this,Bo)}}),Ao(eu,Ws,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Wu]},attrTest:function(Bo){return this._super.attrTest.call(this,Bo)&&(Math.abs(Bo.scale-1)>this.options.threshold||2&this.state)},emit:function(Bo){if(Bo.scale!==1){var Uo=Bo.scale<1?"in":"out";Bo.additionalEvent=this.options.event+Uo}this._super.emit.call(this,Bo)}}),Ao(fu,ul,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Nu]},process:function(Bo){var Uo=this.options,Yo=Bo.pointers.length===Uo.pointers,Zo=Bo.distance<Uo.threshold,ru=Bo.deltaTime>Uo.time;if(this._input=Bo,!Zo||!Yo||12&Bo.eventType&&!ru)this.reset();else if(1&Bo.eventType)this.reset(),this._timer=co(function(){this.state=8,this.tryEmit()},Uo.time,this);else if(4&Bo.eventType)return 8;return nl},reset:function(){clearTimeout(this._timer)},emit:function(Bo){this.state===8&&(Bo&&4&Bo.eventType?this.manager.emit(this.options.event+"up",Bo):(this._input.timeStamp=lo(),this.manager.emit(this.options.event,this._input)))}}),Ao(Pu,Ws,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Wu]},attrTest:function(Bo){return this._super.attrTest.call(this,Bo)&&(Math.abs(Bo.rotation)>this.options.threshold||2&this.state)}}),Ao(Eu,Ws,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return _a.prototype.getTouchAction.call(this)},attrTest:function(Bo){var Uo,Yo=this.options.direction;return 30&Yo?Uo=Bo.overallVelocity:6&Yo?Uo=Bo.overallVelocityX:Yo&Jo&&(Uo=Bo.overallVelocityY),this._super.attrTest.call(this,Bo)&&Yo&Bo.offsetDirection&&Bo.distance>this.options.threshold&&Bo.maxPointers==this.options.pointers&&uo(Uo)>this.options.velocity&&4&Bo.eventType},emit:function(Bo){var Uo=Al(Bo.offsetDirection);Uo&&this.manager.emit(this.options.event+Uo,Bo),this.manager.emit(this.options.event,Bo)}}),Ao(_u,ul,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Vu]},process:function(Bo){var Uo=this.options,Yo=Bo.pointers.length===Uo.pointers,Zo=Bo.distance<Uo.threshold,ru=Bo.deltaTime<Uo.time;if(this.reset(),1&Bo.eventType&&this.count===0)return this.failTimeout();if(Zo&&ru&&Yo){if(Bo.eventType!=4)return this.failTimeout();var Cu=!this.pTime||Bo.timeStamp-this.pTime<Uo.interval,Du=!this.pCenter||uu(this.pCenter,Bo.center)<Uo.posThreshold;if(this.pTime=Bo.timeStamp,this.pCenter=Bo.center,Du&&Cu?this.count+=1:this.count=1,this._input=Bo,this.count%Uo.taps===0)return this.hasRequireFailures()?(this._timer=co(function(){this.state=8,this.tryEmit()},Uo.interval,this),2):8}return nl},failTimeout:function(){return this._timer=co(function(){this.state=nl},this.options.interval,this),nl},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ou.VERSION="2.0.7",Ou.defaults={domEvents:!1,touchAction:Au,enable:!0,inputTarget:null,inputClass:null,preset:[[Pu,{enable:!1}],[eu,{enable:!1},["rotate"]],[Eu,{direction:6}],[_a,{direction:6},["swipe"]],[_u],[_u,{event:"doubletap",taps:2},["tap"]],[fu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ju(Bo,Uo){var Yo;this.options=io({},Ou.defaults,Uo||{}),this.options.inputTarget=this.options.inputTarget||Bo,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Bo,this.input=new((Yo=this).options.inputClass||($o?lu:jo?du:Lo?pu:yu))(Yo,tu),this.touchAction=new al(this,this.options.touchAction),Yu(this,!0),mo(this.options.recognizers,function(Zo){var ru=this.add(new Zo[0](Zo[1]));Zo[2]&&ru.recognizeWith(Zo[2]),Zo[3]&&ru.requireFailure(Zo[3])},this)}function Yu(Bo,Uo){var Yo,Zo=Bo.element;Zo.style&&(mo(Bo.options.cssProps,function(ru,Cu){Yo=Do(Zo.style,Cu),Uo?(Bo.oldCssProps[Yo]=Zo.style[Yo],Zo.style[Yo]=ru):Zo.style[Yo]=Bo.oldCssProps[Yo]||""}),Uo||(Bo.oldCssProps={}))}return ju.prototype={set:function(Bo){return io(this.options,Bo),Bo.touchAction&&this.touchAction.update(),Bo.inputTarget&&(this.input.destroy(),this.input.target=Bo.inputTarget,this.input.init()),this},stop:function(Bo){this.session.stopped=Bo?2:1},recognize:function(Bo){var Uo=this.session;if(!Uo.stopped){var Yo;this.touchAction.preventDefaults(Bo);var Zo=this.recognizers,ru=Uo.curRecognizer;(!ru||ru&&8&ru.state)&&(ru=Uo.curRecognizer=null);for(var Cu=0;Cu<Zo.length;)Yo=Zo[Cu],Uo.stopped===2||ru&&Yo!=ru&&!Yo.canRecognizeWith(ru)?Yo.reset():Yo.recognize(Bo),!ru&&14&Yo.state&&(ru=Uo.curRecognizer=Yo),Cu++}},get:function(Bo){if(Bo instanceof ul)return Bo;for(var Uo=this.recognizers,Yo=0;Yo<Uo.length;Yo++)if(Uo[Yo].options.event==Bo)return Uo[Yo];return null},add:function(Bo){if(fo(Bo,"add",this))return this;var Uo=this.get(Bo.options.event);return Uo&&this.remove(Uo),this.recognizers.push(Bo),Bo.manager=this,this.touchAction.update(),Bo},remove:function(Bo){if(fo(Bo,"remove",this))return this;if(Bo=this.get(Bo)){var Uo=this.recognizers,Yo=No(Uo,Bo);Yo!==-1&&(Uo.splice(Yo,1),this.touchAction.update())}return this},on:function(Bo,Uo){if(Bo!==no&&Uo!==no){var Yo=this.handlers;return mo(To(Bo),function(Zo){Yo[Zo]=Yo[Zo]||[],Yo[Zo].push(Uo)}),this}},off:function(Bo,Uo){if(Bo!==no){var Yo=this.handlers;return mo(To(Bo),function(Zo){Uo?Yo[Zo]&&Yo[Zo].splice(No(Yo[Zo],Uo),1):delete Yo[Zo]}),this}},emit:function(Bo,Uo){this.options.domEvents&&function(ru,Cu){var Du=to.createEvent("Event");Du.initEvent(ru,!0,!0),Du.gesture=Cu,Cu.target.dispatchEvent(Du)}(Bo,Uo);var Yo=this.handlers[Bo]&&this.handlers[Bo].slice();if(Yo&&Yo.length){Uo.type=Bo,Uo.preventDefault=function(){Uo.srcEvent.preventDefault()};for(var Zo=0;Zo<Yo.length;)Yo[Zo](Uo),Zo++}},destroy:function(){this.element&&Yu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},io(Ou,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:nl,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:Jo,DIRECTION_ALL:30,Manager:ju,Input:va,TouchAction:al,TouchInput:du,MouseInput:yu,PointerEventInput:lu,TouchMouseInput:pu,SingleTouchInput:gu,Recognizer:ul,AttrRecognizer:Ws,Tap:_u,Pan:_a,Swipe:Eu,Pinch:eu,Rotate:Pu,Press:fu,on:xo,off:wo,each:mo,merge:vo,extend:yo,assign:io,inherit:Ao,bindFn:ho,prefixed:Do}),Ou}(typeof window!="undefined"?window:{},typeof document!="undefined"?document:{});function Mr(eo,to){var ro=document.mozFullScreen?"DOMMouseScroll":"mousewheel",no=!!window.addEventListener,io=!!window.attachEvent,oo=function(ao,so){var uo=document.mozFullScreen?"DOMMouseScroll":"mousewheel",lo=!!window.addEventListener,co=!!window.attachEvent;return so.__mouseWheelWrapper=function(fo){if(fo=fo||window.event,lo&&fo.preventDefault(),co&&(fo.returnValue=!1),uo=="DOMMouseScroll"||uo=="mousewheel"){var mo=fo.wheelDelta;fo.delta=mo?mo/120:-(fo.delta||0)/3}so.call(ao,fo)}}(eo,to);no?eo.addEventListener(ro,oo,!1):io&&eo.attachEvent("on"+ro,oo)}function fr(eo,to,ro){var no=to.offsetWidth,io=to.offsetHeight,oo=to.getBoundingClientRect(),ao=oo.top,so=oo.left;return ro&&(so+=no*ro.left,ao+=io*(1-ro.bottom-ro.height),no*=ro.width,io*=ro.height),new r$3.Vector2((eo.x-so)/no*2-1,-(eo.y-ao)/io*2+1)}(function(){try{var eo=document.createElement("canvas");!window.WebGLRenderingContext||!eo.getContext("webgl")&&eo.getContext("experimental-webgl")}catch{return!1}})();var yr=new r$3.OrthographicCamera(-1,1,1,-1,0,1),mr=new r$3.BufferGeometry;mr.setAttribute("position",new r$3.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),mr.setAttribute("uv",new r$3.Float32BufferAttribute([0,2,0,0,2,0],2));var vr=new r$3.Mesh(mr),Nr=new r$3.Scene;Nr.add(vr);var Dr=function(){function eo(to,ro){var no;this.renderer=to,this.material=new r$3.ShaderMaterial({vertexShader:(no=ro.vertex)!==null&&no!==void 0?no:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:ro.fragment,uniforms:Object.assign({inputBuffer:new r$3.Uniform(null)},ro.uniforms),defines:Object.assign({},ro.defines),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return eo.prototype.render=function(to,ro){var no=this.renderer.getRenderTarget(),io=vr.material;this.material.uniforms.inputBuffer.value=to.texture,vr.material=this.material,this.renderer.setRenderTarget(ro||null),this.renderer.render(Nr,yr),this.renderer.setRenderTarget(no),vr.material=io},eo.prototype.dispose=function(){this.material.dispose()},eo}(),Er=function(){function eo(to){this.renderer=to,this.material=new r$3.ShaderMaterial({vertexShader:`
void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
uniform vec3 inputValue;
void main() {
  gl_FragColor = vec4(inputValue, 1.0);
}
`,uniforms:Object.assign({inputValue:new r$3.Uniform(new r$3.Vector3)}),blending:r$3.NoBlending,depthWrite:!1,depthTest:!1})}return eo.prototype.render=function(to,ro){var no=this.renderer.getRenderTarget(),io=vr.material;this.material.uniforms.inputValue.value.copy(to),vr.material=this.material,this.renderer.setRenderTarget(ro||null),this.renderer.render(Nr,yr),this.renderer.setRenderTarget(no),vr.material=io},eo.prototype.dispose=function(){this.material.dispose()},eo}(),wr=function(eo){function to(ro){return eo.call(this,ro,{fragment:`
uniform sampler2D inputBuffer;
varying vec2 vUv;
void main() {
  gl_FragColor = texture2D(inputBuffer, vUv);
}
`})||this}return t$2.__extends(to,eo),to}(Dr),Ir=function(){function eo(to){this.enable=!0,this.renderer=to,this.copyPass=new wr(this.renderer)}return eo.prototype.render=function(to,ro,no){this.copyPass.render(to,ro)},eo.prototype.dispose=function(){this.copyPass.dispose()},eo}(),Tr=function(eo){function to(ro){var no,io=eo.call(this)||this,oo=to.parseArgs(ro);return io.pending=!0,io.userAction=oo.initial[3],io.destroyed=!1,io.ident=oo.ident,io.scene=oo.scene,io.helper=oo.helper,io.camera=oo.camera,io.renderer=oo.renderer,io.scissor=oo.scissor,io.element=oo.element,io.model=oo.model,io.enableIOSEDR=(no=oo.enableIOSEDR)!==null&&no!==void 0&&no,io.work=oo.work,io.imageOptions=oo.imageOptions,io.videoTexture=oo.videoTexture,io.networkSubscribe=oo.networkSubscribe,io.needsRender=!0,io.maxFov=120,io.minFov=40,io.maxLatitude=+Math.PI/2,io.minLatitude=-Math.PI/2,io.cameraMotion=new dn({longitude:{value:io.camera.pose.longitude,circle:[0,2*Math.PI]},latitude:io.camera.pose.latitude,fov:io.camera.pose.fov}),io.eventUnbinds=[oo.element].concat(oo.extraElements||[]).map(function(ao){return io.bindEvents(ao)}),ot.shared.add(function(){return io.initAnimation.apply(io,oo.initial)},!0),io}return t$2.__extends(to,eo),to.parseArgs=function(ro){return t$2.__assign({},ro)},to.initAnimationEndState=function(ro){var no=this.parseArgs(ro);return{longitude:no.camera.pose.longitude,latitude:no.camera.pose.latitude,fov:no.camera.pose.fov,offset:no.camera.pose.offset.clone()}},to.prototype.destroy=function(){var ro;this.destroyed=!0,this.off(),this.cameraMotion.dispose();for(var no=0,io=this.eventUnbinds;no<io.length;no++)(0,io[no])();this.effect&&(this.effect.dispose(),delete this.effect),delete this.panState,(ro=this.pressState)===null||ro===void 0||ro.stop(),delete this.pressState},to.prototype.isReady=function(){return this.pending===!1&&this.cameraMotion.ended===!0},to.prototype.bindExtraElement=function(ro){for(var no=0,io=this.eventUnbinds;no<io.length;no++)if(io[no].element===ro)return;this.eventUnbinds.push(this.bindEvents(ro))},to.prototype.unbindExtraElement=function(ro){for(var no=0,io=this.eventUnbinds;no<io.length&&io[no].element!==ro;no++);},to.prototype.updateRenderSize=function(){this.needsRender=!0},to.prototype.updateModel=function(ro){this.model=ro,this.needsRender=!0},to.prototype.updateWork=function(ro,no,io,oo,ao){return this.work=ro,this.userAction=ao,!1},to.prototype.updateTime=function(ro,no){if(!this.destroyed){var io={};this.cameraMotion.ended&&(this.cameraMotion.update(ro),io.longitude=this.cameraMotion.value.longitude,io.latitude=this.cameraMotion.value.latitude,io.fov=this.cameraMotion.value.fov),dr(io)&&this.setCamera(io)}},to.prototype.render=function(ro){this.renderer.render(this.scene,this.camera)},to.prototype.postProcessing=function(ro,no,io){this.destroyed||(this.effect||(this.effect=new Ir(this.renderer)),this.effect.render(ro,no,io))},to.prototype.updateCamera=function(ro,no,io){return this.userAction=io,this.cameraMotion.set(ro,no)},to.prototype.getTargetPose=function(){var ro=this.cameraMotion.getKeyFrameSegment(Re())[1];return{longitude:ro.value.longitude,latitude:ro.value.latitude,fov:ro.value.fov,offset:this.camera.pose.offset.clone()}},to.prototype.moveToPano=function(ro,no,io){no===void 0&&(no={}),this.userAction=io;var oo={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset.clone()};no.moveStartCallback&&no.moveStartCallback(ro,oo),this.emit("moveToPano",ro,this.userAction),this.emit("panoWillArrive",ro,oo,this.userAction),this.emit("panoArrived",ro,oo,this.userAction),no.moveEndCallback&&no.moveEndCallback(ro,oo)},to.prototype.initAnimation=function(ro,no,io,oo){this.pending=!1,this.userAction=oo},to.prototype.setCamera=function(ro){var no,io,oo,ao,so;ro===void 0&&(ro={});var uo=(no=ro.longitude)!==null&&no!==void 0?no:this.camera.pose.longitude,lo=(io=ro.latitude)!==null&&io!==void 0?io:this.camera.pose.latitude,co=(oo=ro.fov)!==null&&oo!==void 0?oo:this.camera.pose.fov,fo=(ao=ro.distance)!==null&&ao!==void 0?ao:this.camera.pose.distance,mo=(so=ro.offset)!==null&&so!==void 0?so:this.camera.pose.offset,go=this.camera.position.clone(),yo=Jn(uo,this.camera.pose.longitude,2*Math.PI)||Jn(lo,this.camera.pose.latitude),vo=Jn(co,this.camera.pose.fov),Ao=Jn(fo,this.camera.pose.distance),ho=er(mo,this.camera.pose.offset);this.camera.setFromPose({longitude:uo,latitude:lo,fov:co,distance:fo,offset:mo});var po=er(go,this.camera.position);vo&&this.emit("cameraFovUpdate",co,this.userAction),yo&&this.emit("cameraDirectionUpdate",{longitude:uo,latitude:lo},this.userAction),po&&this.emit("cameraPositionUpdate",this.camera.position.clone(),this.userAction),(vo||yo||ho||Ao)&&this.emit("cameraUpdate",{longitude:uo,latitude:lo,fov:co,offset:mo},this.userAction),this.needsRender=!0,(Yt||Ht.length!==0)&&(Yt&&clearTimeout(Yt),Yt=window.setTimeout(Gt,200))},to.prototype.onPanGesture=function(ro){var no=this.panState,io=ro.pointers.length;if(ro.isFinal?delete this.panState:this.panState={pointerLength:io,x:ro.center.x,y:ro.center.y},no!==void 0&&no.pointerLength===io){var oo=ro.pointers.map(function(ao){return ni(ao,["x","y"])});this.emit("wantsGesture","pan",oo,ro.isFinal)||this.emit("gesture","pan",oo,ro.isFinal)}},to.prototype.onTapGesture=function(ro){var no=ro.pointers.map(function(io){return ni(io,["x","y"])});this.emit("wantsGesture","tap",no,!0)||this.emit("gesture","tap",no,!0)},to.prototype.onPressGesture=function(ro,no){var io,oo=[ro];if(this.emit("wantsGesture","press",oo,no))return(io=this.pressState)===null||io===void 0||io.stop(),void delete this.pressState;this.emit("gesture","press",oo,no)},to.prototype.onPinchGesture=function(ro){var no=ro.pointers.map(function(io){return ni(io,["x","y"])});this.emit("wantsGesture","pinch",no,ro.isFinal)||this.emit("gesture","pinch",no,ro.isFinal)},to.prototype.onMouseWheel=function(ro){var no=[{x:ro.clientX,y:ro.clientY,delta:ro.delta}];this.emit("wantsGesture","mouseWheel",no,!1)||this.emit("gesture","mouseWheel",no,!1)},to.prototype.onMouseMove=function(ro){},to.prototype.onMouseOut=function(){},to.prototype.relativeClientPosition=function(ro){return fr(ro,this.element,this.scissor)},to.prototype.bindEvents=function(ro){var no=this,io=function(vo){var Ao=fr(vo,no.element,no.scissor);return!(Math.abs(Ao.x)>1||Math.abs(Ao.y)>1)},oo=new pr.Manager(ro),ao=function(vo){return vo.session.firstInput||null};oo.add(new pr.Pan({threshold:10,pointers:0})),oo.add(new pr.Tap({interval:410})),oo.add(new pr.Pinch({threshold:0,pointers:2}).recognizeWith(oo.get("pan"))),oo.on("panstart pan",function(vo){var Ao=ao(oo);Ao&&!io(Ao.center)||(no.onPanGesture(vo),go())}),oo.on("tap",function(vo){var Ao=ao(oo);Ao&&!io(Ao.center)||(no.onTapGesture(vo),go())}),oo.on("pinchstart pinch pinchend",function(vo){var Ao=ao(oo);Ao&&!io(Ao.center)||(no.onPinchGesture(vo),go())});var so=function(vo){var Ao={x:vo.clientX,y:vo.clientY};io(Ao)&&(no.onMouseWheel(vo),go())},uo=function(vo){if(!((Ao=typeof navigator!="undefined"?navigator.userAgent.toLowerCase():"node").match(/android/i)||Ao.match(/webos/i)||Ao.match(/ipad|iphone|ipod/i)||Ao.match(/iemobile/i)||Ao.match(/opera mini/i)||Ao.match(/blackberry/i)||Ao.match(/windows phone/i))){var Ao,ho={x:vo.clientX,y:vo.clientY};io(ho)?(no.onMouseMove(vo),no.pressState&&Math.abs(vo.clientX-no.pressState.x)>10&&Math.abs(vo.clientY-no.pressState.y)>10&&go()):no.onMouseOut()}},lo=function(){no.onMouseOut(),go()},co=function(vo,Ao){if(io(vo)){no.pressState={x:vo.x,y:vo.y,time:no.pressState?no.pressState.time:Ao,stop:Pe};var ho=Ao-no.pressState.time;no.onPressGesture({x:vo.x,y:vo.y,delta:ho},!1),no.pressState&&(no.pressState.stop=ot.shared.add(function(po){return co({x:vo.x,y:vo.y},po)},!0,1))}else go()},fo=function(vo){go(),vo.touches.length>1||vo.changedTouches.length<=0||co({x:vo.changedTouches[0].clientX,y:vo.changedTouches[0].clientY},Re())},mo=function(vo){go(),co({x:vo.clientX,y:vo.clientY},Re())},go=function(){var vo;if(no.pressState){var Ao=Re()-no.pressState.time;no.onPressGesture({x:no.pressState.x,y:no.pressState.y,delta:Ao},!0),(vo=no.pressState)===null||vo===void 0||vo.stop(),delete no.pressState}},yo=function(vo){if(vo&&typeof vo.preventDefault=="function"&&vo.currentTarget===ro&&vo.preventDefault(),typeof getSelection=="function"){var Ao=getSelection();Ao&&Ao.focusNode&&(Ao.removeAllRanges&&Ao.removeAllRanges(),Ao.empty&&Ao.empty())}};return Mr(ro,so),pr.on(ro,"mousemove",uo),pr.on(ro,"mouseout",lo),pr.on(ro,"touchstart",fo),pr.on(ro,"touchend",go),pr.on(ro,"touchcancel",go),pr.on(ro,"mousedown",mo),pr.on(ro,"mouseup",go),pr.on(ro,"touchstart",yo),Object.assign(function(){oo.destroy(),function(vo,Ao){var ho=document.mozFullScreen?"DOMMouseScroll":"mousewheel",po=!!window.addEventListener,Mo=!!window.attachEvent;Ao.__mouseWheelWrapper&&(po?vo.removeEventListener(ho,Ao.__mouseWheelWrapper,!1):Mo&&vo.detachEvent("on"+ho,Ao.__mouseWheelWrapper),delete Ao.__mouseWheelWrapper)}(ro,so),pr.off(ro,"mousemove",uo),pr.off(ro,"mouseout",lo),pr.off(ro,"touchstart",fo),pr.off(ro,"touchend",go),pr.off(ro,"touchcancel",go),pr.off(ro,"mousedown",mo),pr.off(ro,"mouseup",go),pr.off(ro,"touchstart",yo)},{element:ro})},to}(ke),xr=function(eo){function to(ro){var no,io,oo,ao,so=this,uo=to.parseArgs(ro);return(so=eo.call(this,uo)||this).defaultLongitude=uo.defaultLongitude,so.defaultLatitude=uo.defaultLatitude,so.defaultFov=uo.defaultFov,so.maxFov=uo.maxFov,so.minFov=uo.minFov,so.maxLatitude=uo.maxLatitude,so.minLatitude=uo.minLatitude,so.locationMotion=new dn({x:so.camera.pose.offset.x,y:so.camera.pose.offset.y,z:so.camera.pose.offset.z,distance:so.camera.pose.distance,modelAlpha:(io=(no=so.model.getMaterial())===null||no===void 0?void 0:no.modelAlpha)!==null&&io!==void 0?io:0,perspToOrtho:(ao=(oo=so.model.getMaterial())===null||oo===void 0?void 0:oo.perspToOrtho)!==null&&ao!==void 0?ao:0}),so}return t$2.__extends(to,eo),to.parseArgs=function(ro){var no,io,oo,ao,so,uo,lo,co=eo.parseArgs.call(this,ro);return t$2.__assign(t$2.__assign({},co),{defaultLongitude:(no=ro.defaultLongitude)!==null&&no!==void 0?no:Math.PI/4,defaultLatitude:(io=ro.defaultLatitude)!==null&&io!==void 0?io:Math.PI/4,defaultFov:(oo=ro.defaultFov)!==null&&oo!==void 0?oo:80,maxFov:(ao=ro.maxFov)!==null&&ao!==void 0?ao:120,minFov:(so=ro.minFov)!==null&&so!==void 0?so:40,maxLatitude:(uo=ro.maxLatitude)!==null&&uo!==void 0?uo:+Math.PI/2,minLatitude:(lo=ro.minLatitude)!==null&&lo!==void 0?lo:-Math.PI/2})},to.initAnimationEndPose=function(ro){var no,io,oo,ao=this.parseArgs(ro),so=ro.initial[1];return{longitude:(no=so.longitude)!==null&&no!==void 0?no:ao.defaultLongitude,latitude:cn((io=so.latitude)!==null&&io!==void 0?io:ao.defaultLatitude,ao.minLatitude,ao.maxLatitude),fov:(oo=so.fov)!==null&&oo!==void 0?oo:ao.defaultFov,offset:ro.model.bounding.getCenter(new r$3.Vector3)}},to.prototype.destroy=function(){eo.prototype.destroy.call(this),this.locationMotion.dispose(),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.panState},to.prototype.isReady=function(){return this.locationMotion.ended!==!1&&eo.prototype.isReady.call(this)},to.prototype.updateWork=function(ro,no,io,oo,ao){return this.work=ro,!0},to.prototype.updateModel=function(ro){eo.prototype.updateModel.call(this,ro);var no=ro.bounding.getCenter(new r$3.Vector3),io=this.cameraDistance(ro);this.locationMotion.set({x:no.x,y:no.y,z:no.z,distance:io},0).catch(Pe)},to.prototype.updateTime=function(ro,no){if(!this.destroyed){var io={},oo={};this.locationMotion.ended||(this.locationMotion.update(ro),io.modelAlpha=this.locationMotion.value.modelAlpha,io.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),oo.distance=this.locationMotion.value.distance,oo.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z)),this.cameraMotion.ended||(this.cameraMotion.update(ro),oo.longitude=this.cameraMotion.value.longitude,oo.latitude=this.cameraMotion.value.latitude,oo.fov=this.cameraMotion.value.fov),dr(io)||this.model.setMaterial(io),dr(oo)||this.setCamera(oo)}},to.prototype.getTargetPose=function(){var ro=this.cameraMotion.getKeyFrameSegment(Re())[1],no=this.locationMotion.getKeyFrameSegment(Re())[1];return{longitude:ro.value.longitude,latitude:ro.value.latitude,fov:ro.value.fov,offset:new r$3.Vector3(no.value.x,no.value.y,no.value.z)}},to.prototype.initAnimation=function(ro,no,io,oo){var ao,so,uo,lo=this;if(!this.destroyed){this.pending=!1,this.userAction=oo;var co=this.model.bounding.getCenter(new r$3.Vector3),fo={longitude:(ao=no.longitude)!==null&&ao!==void 0?ao:this.defaultLongitude,latitude:cn((so=no.latitude)!==null&&so!==void 0?so:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((uo=no.fov)!==null&&uo!==void 0?uo:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3)},mo=this.cameraDistance(this.model),go=ni(fo,["longitude","latitude","fov"]),yo={x:co.x,y:co.y,z:co.z,distance:mo,modelAlpha:1,perspToOrtho:0};this.emit("initAnimationWillStart",ro,fo,this.userAction),this.cameraMotion.set(go,io).catch(Pe),this.locationMotion.set(yo,io).then(function(){lo.emit("initAnimationEnded",ro,fo,lo.userAction)},function(vo){var Ao=gr(lo.camera.pose);lo.emit("initAnimationEnded",ro,Ao,lo.userAction)})}},to.prototype.updateRenderSize=function(){this.locationMotion.set({distance:this.cameraDistance(this.model)},0)},to.prototype.cameraDistance=function(ro){var no=ro.bounding,io=this.camera.aspect,oo=Math.pow(Math.pow(no.max.x-no.min.x+1,2)+Math.pow(no.max.y-no.min.y+1,2)+Math.pow(no.max.z-no.min.z+1,2),.5),ao=oo/2/Math.tan(Math.PI*this.defaultFov/360);return io<1&&(ao/=io),isNaN(ao)?oo:ao},to.prototype.getForwardPanoIndexOrNot=function(ro){var no=this.work.observers.filter(function(so){return so.active}),io=this.model.intersectRaycaster(ro)[0];if(!io)return null;var oo=hr(no,function(so){return so.standingPosition.distanceTo(io.point)},!0),ao=oo[0];return oo[1]<5?this.work.observers.indexOf(ao):null},to.prototype.coordinatesChangeWithOffset=function(ro,no){var io=this.element,oo=this.camera,ao=io.offsetWidth,so=io.offsetHeight,uo=2*no.x/ao*oo.fov/30,lo=2*no.y/so*oo.fov/30;return{longitude:sr(ro.longitude+uo),latitude:cn(ro.latitude+lo,this.minLatitude,this.maxLatitude)}},to.prototype.requestInteriaMovement=function(ro){var no=this;if(this.interiaMovement!==!1){var io=this.coordinatesChangeWithOffset({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude},ro),oo=io.longitude,ao=io.latitude,so={longitude:oo,latitude:ao,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset};this.cameraMotion.set({longitude:oo,latitude:ao},0).catch(Pe);var uo=Math.abs(ro.x)>1||Math.abs(ro.y)>1;this.emit("interiaPan",so,!uo),uo?ot.shared.add(function(){no.requestInteriaMovement({x:.8*ro.x,y:.8*ro.y})},!0,1):this.interiaMovement=!1}},to.prototype.onPanGesture=function(ro){var no=this.panState,io=ro.pointers.length;if(ro.isFinal?delete this.panState:this.panState={pointerLength:io,x:ro.center.x,y:ro.center.y},no!==void 0&&no.pointerLength===io){var oo=ro.pointers.map(function(vo){return ni(vo,["x","y"])});if(!this.emit("wantsGesture","pan",oo,ro.isFinal)){var ao={x:ro.center.x-no.x,y:ro.center.y-no.y},so=this.relativeClientPosition(ro.center),uo=this.camera.pose.latitude<Math.PI/6||so.y<0?-1:1;ao.x*=uo;var lo=this.coordinatesChangeWithOffset({longitude:this.cameraMotion.value.longitude,latitude:this.cameraMotion.value.latitude},ao),co={longitude:lo.longitude,latitude:lo.latitude,fov:this.camera.pose.fov,offset:this.camera.pose.offset};if(!this.emit("wantsPanGesture",co,ro.isFinal)&&(this.emit("gesture","pan",oo,ro.isFinal),this.emit("panGesture",co,ro.isFinal),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({longitude:co.longitude,latitude:co.latitude,fov:co.fov},0).catch(Pe),ro.isFinal&&!this.emit("wantsInteriaPan",co))){this.interiaMovement=!0;var fo=ot.getFrameTime(),mo=ro.velocityX*fo*uo,go=ro.velocityY*fo,yo=Math.sqrt(mo*mo+go*go);yo>100&&(mo=mo/yo*100,go=go/yo*100),this.requestInteriaMovement({x:mo,y:go})}}}},to.prototype.onPinchGesture=function(ro){var no,io=(no=this.pinchState)===null||no===void 0?void 0:no.fov,oo=!1;if(ro.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(ro.type==="pinchend"&&(oo=!0,delete this.panState,delete this.pinchState),io!==void 0){var ao=ro.pointers.map(function(uo){return ni(uo,["x","y"])});if(!this.emit("wantsGesture","pinch",ao,oo)){var so=cn(io/ro.scale,this.minFov,this.maxFov);this.emit("wantsPinchGesture",ro.scale,so,oo)||this.emit("wantsChangeCameraFov",so)||(this.emit("gesture","pinch",ao,oo),this.emit("pinchGesture",ro.scale,so,oo),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:so},0).catch(Pe))}}},to.prototype.onMouseWheel=function(ro){var no=this,io=ro.delta,oo=[{x:ro.clientX,y:ro.clientY}];if(!this.emit("wantsGesture","mouseWheel",oo,!1)){var ao=this.minFov,so=this.maxFov,uo=cn(this.camera.fov-io,ao,so);this.emit("wantsMouseWheel",io,uo,!1)||this.emit("wantsChangeCameraFov",uo)||(this.emit("gesture","mouseWheel",oo,!1),this.emit("mouseWheel",io,uo,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:uo},0).catch(Pe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete no.mouseWheelState,no.emit("wantsGesture","mouseWheel",oo,!0)||no.emit("wantsMouseWheel",io,uo,!0)||(no.emit("gesture","mouseWheel",oo,!0),no.emit("mouseWheel",0,uo,!0))},200)})}},to.prototype.onTapGesture=function(ro){var no=ro.pointers.map(function(uo){return ni(uo,["x","y"])});if(!this.emit("wantsGesture","tap",no,!0)){var io=this.relativeClientPosition(ro.center),oo=new r$3.Raycaster;if(oo.setFromCamera(io,this.camera),!this.emit("wantsTapGesture",oo,io,!0)){this.emit("gesture","tap",no,!0),this.emit("tapGesture",oo,io,!0),this.interiaMovement=!1;var ao=this.getForwardPanoIndexOrNot(oo);if(!Vi(ao)){this.emit("panoSelected",ao);var so={longitude:this.camera.pose.longitude,latitude:0};this.emit("wantsMoveToPano",ao,so,!0)}}}},to.prototype.onPressGesture=function(ro,no){var io,oo,ao=[ro];if(this.emit("wantsGesture","press",ao,no))return(io=this.pressState)===null||io===void 0||io.stop(),void delete this.pressState;var so=this.relativeClientPosition(ro),uo=new r$3.Raycaster;if(uo.setFromCamera(so,this.camera),this.emit("wantsPressGesture",uo,so,ro.delta,no))return(oo=this.pressState)===null||oo===void 0||oo.stop(),void delete this.pressState;this.emit("gesture","press",ao,no),this.emit("pressGesture",uo,so,ro.delta,no)},to}(Tr),jr=function(eo){function to(ro){var no=to.parseArgs(ro);return eo.call(this,no)||this}return t$2.__extends(to,eo),to.parseArgs=function(ro){var no=[ro.initial[0],t$2.__assign(t$2.__assign({},ro.initial[1]),{longitude:0,latitude:Math.PI/2}),ro.initial[2],ro.initial[3]],io=t$2.__assign(t$2.__assign({},ro),{initial:no,maxLatitude:Math.PI/2,minLatitude:Math.PI/2,defaultLongitude:0,defaultLatitude:Math.PI/2});return eo.parseArgs.call(this,io)},to.initAnimationEndPose=function(ro){var no=this.parseArgs(ro);return eo.initAnimationEndPose.call(this,no)},to.prototype.updateModel=function(ro){this.model=ro,this.needsRender=!0;var no=ro.bounding.getCenter(new r$3.Vector3);this.locationMotion.set({x:no.x,y:no.y,z:no.z,distance:this.cameraDistance(ro)},0).catch(Pe)},to.prototype.initAnimation=function(ro,no,io,oo){var ao,so=this;if(!this.destroyed){this.pending=!1,this.userAction=oo;var uo=this.model.bounding.getCenter(new r$3.Vector3),lo={longitude:0,latitude:Math.PI/2,fov:cn((ao=no.fov)!==null&&ao!==void 0?ao:this.defaultFov,this.minFov,this.maxFov),offset:this.model.bounding.getCenter(new r$3.Vector3)},co=this.cameraDistance(this.model),fo=ni(lo,["longitude","latitude","fov"]),mo={x:uo.x,y:uo.y,z:uo.z,distance:co,modelAlpha:1,perspToOrtho:1};this.cameraMotion.set(fo,io).catch(Pe),this.locationMotion.set(mo,io).then(function(){so.emit("initAnimationEnded",ro,lo,so.userAction)},function(go){var yo=gr(so.camera.pose);so.emit("initAnimationEnded",ro,yo,so.userAction)})}},to.prototype.getZoomOffsetFromFov=function(ro,no,io){var oo=new r$3.Vector3(0,-1,0),ao=Math.tan(io/2*Math.PI/180),so=Math.tan(no.fov/2*Math.PI/180),uo=(so-ao)/so,lo=new r$3.Raycaster;lo.setFromCamera(ro,no);var co=lo.ray.direction,fo=co.angleTo(oo),mo=this.cameraDistance(this.model),go=mo*Math.tan(fo),yo=co.clone().setLength(mo*Math.cos(fo)).projectOnPlane(oo),vo=yo.length(),Ao=uo/vo*yo.x*go,ho=uo/vo*yo.z*go;return new r$3.Vector3(Ao,0,ho)},to.prototype.requestInteriaMovement=function(ro){},to.prototype.onPanGesture=function(ro){var no=this.renderer.getSize(new r$3.Vector2),io=this.panState,oo=ro.pointers.length;if(ro.isFinal?delete this.panState:this.panState={pointerLength:oo,x:ro.center.x,y:ro.center.y},io!==void 0&&io.pointerLength===oo){var ao=ro.pointers.map(function(Ao){return ni(Ao,["x","y"])});if(!this.emit("wantsGesture","pan",ao,ro.isFinal)){var so=ro.center.x-io.x,uo=ro.center.y-io.y,lo=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),co=this.camera.position.y*Math.tan(this.camera.fov/2*Math.PI/180);lo.add(function(Ao,ho){var po=new r$3.Vector3;return po.setFromMatrixColumn(ho,0),po.multiplyScalar(-Ao),po}(2*so*co/no.y,this.camera.matrix)),lo.add(function(Ao,ho,po){var Mo=new r$3.Vector3;return Mo.setFromMatrixColumn(po,0),Mo.crossVectors(ho,Mo),Mo.multiplyScalar(Ao),Mo}(2*uo*co/no.y,this.camera.up,this.camera.matrix));var fo=this.model.bounding,mo=fo.getCenter(new r$3.Vector3),go=(fo.max.x-fo.min.x)/this.defaultFov*this.cameraMotion.value.fov,yo=(fo.max.y,fo.min.y,this.defaultFov,this.cameraMotion.value.fov,(fo.max.z-fo.min.z)/this.defaultFov*this.cameraMotion.value.fov);lo.x=cn(lo.x,mo.x-go,mo.x+go),lo.z=cn(lo.z,mo.z-yo,mo.z+yo),lo.y=mo.y;var vo={longitude:0,latitude:Math.PI/2,fov:this.cameraMotion.value.fov,offset:lo};this.emit("wantsPanGesture",vo,ro.isFinal)||(this.emit("gesture","pan",ao,ro.isFinal),this.emit("panGesture",vo,ro.isFinal),this.userAction=!0,this.locationMotion.set({x:lo.x,y:lo.y,z:lo.z},0).catch(Pe))}}},to.prototype.onPinchGesture=function(ro){var no,io=(no=this.pinchState)===null||no===void 0?void 0:no.fov,oo=!1;if(ro.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(ro.type==="pinchend"&&(oo=!0,delete this.panState,delete this.pinchState),io!==void 0){var ao=ro.pointers.map(function(fo){return ni(fo,["x","y"])});if(!this.emit("wantsGesture","pinch",ao,oo)){var so=cn(io/ro.scale,this.minFov,this.maxFov),uo=this.relativeClientPosition({x:ro.center.x,y:ro.center.y}),lo=this.getZoomOffsetFromFov(uo,this.camera,so),co=this.camera.pose.offset.clone().add(lo);this.emit("wantsPinchGesture",ro.scale,so,oo)||this.emit("wantsChangeCameraFov",so)||(this.emit("gesture","pinch",ao,oo),this.emit("pinchGesture",ro.scale,so,oo),this.userAction=!0,this.locationMotion.set({x:co.x,y:co.y,z:co.z},0).catch(Pe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:so},0).catch(Pe))}}},to.prototype.onMouseWheel=function(ro){var no=this,io=ro.delta,oo=[{x:ro.clientX,y:ro.clientY}];if(!this.emit("wantsGesture","mouseWheel",oo,!1)){var ao=cn(this.cameraMotion.value.fov-io,this.minFov,this.maxFov),so=this.relativeClientPosition({x:ro.clientX,y:ro.clientY}),uo=this.getZoomOffsetFromFov(so,this.camera,ao),lo=this.camera.pose.offset.clone().add(uo);this.emit("wantsMouseWheel",io,ao,!1)||this.emit("wantsChangeCameraFov",ao)||(this.emit("gesture","mouseWheel",oo,!1),this.emit("mouseWheel",io,ao,!1),this.userAction=!0,this.locationMotion.set({x:lo.x,y:lo.y,z:lo.z},0).catch(Pe),this.cameraMotion.set({longitude:0,latitude:Math.PI/2,fov:ao},0).catch(Pe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete no.mouseWheelState,no.emit("wantsGesture","mouseWheel",oo,!0)||no.emit("wantsMouseWheel",io,ao,!0)||no.emit("wantsChangeCameraFov",ao)||(no.emit("gesture","mouseWheel",oo,!0),no.emit("mouseWheel",0,ao,!0))},200)})}},to}(xr);function zr(eo,to){to===void 0&&(to=!1);var ro=typeof eo;if(ro==="string")return JSON.stringify(eo);if(eo===!0)return"true";if(eo===!1)return"false";if(eo===null)return"null";if(eo instanceof Array){for(var no="[",io=eo.length-1,oo=0;oo<io;oo++)no+=zr(eo[oo],!1)+",";return io>-1&&(no+=zr(eo[oo],!1)),no+"]"}if(eo instanceof Object){if(typeof eo.toJSON=="function")return zr(eo.toJSON(),to);var ao=Object.keys(eo).sort(),so=ao.length;for(no="",oo=0;oo<so;){var uo=ao[oo],lo=zr(eo[uo],!0);lo!==void 0&&(oo&&no!==""&&(no+=","),no+=JSON.stringify(uo)+":"+lo),oo++}return"{"+no+"}"}switch(ro){case"function":case"undefined":return to?void 0:null;case"number":return eo;default:return isFinite(eo)?eo:null}}function Cr(eo){return ze(String(zr(eo,!1)))}var br,Sr=function(eo){function to(ro){var no=this,io=to.parseArgs(ro);return(no=eo.call(this,io)||this).defaultLongitude=io.defaultLongitude,no.defaultLatitude=io.defaultLongitude,no.defaultFov=io.defaultFov,no.maxFov=io.maxFov,no.minFov=io.minFov,no.maxLatitude=io.maxLatitude,no.minLatitude=io.minLatitude,no.moveSpeed=io.moveSpeed,no.intersectMeshCreator=io.intersectMeshCreator,no.interiaMovement=!1,no.intersectMesh=no.intersectMeshCreator(),no.intersectMesh.name="intersect",no.intersectMesh.visible=!1,no.helper.add(no.intersectMesh),no}return t$2.__extends(to,eo),to.parseArgs=function(ro){var no,io,oo,ao,so,uo,lo,co,fo,mo=eo.parseArgs.call(this,ro);return t$2.__assign(t$2.__assign({},mo),{defaultLongitude:(no=ro.defaultLongitude)!==null&&no!==void 0?no:0,defaultLatitude:(io=ro.defaultLatitude)!==null&&io!==void 0?io:0,defaultFov:(oo=ro.defaultFov)!==null&&oo!==void 0?oo:90,maxFov:(ao=ro.maxFov)!==null&&ao!==void 0?ao:120,minFov:(so=ro.minFov)!==null&&so!==void 0?so:40,maxLatitude:(uo=ro.maxLatitude)!==null&&uo!==void 0?uo:+Math.PI/2,minLatitude:(lo=ro.minLatitude)!==null&&lo!==void 0?lo:-Math.PI/2,moveSpeed:(co=ro.moveSpeed)!==null&&co!==void 0?co:3.2,intersectMeshCreator:(fo=ro.intersectMeshCreator)!==null&&fo!==void 0?fo:function(){return new qn}})},to.initAnimationEndPose=function(ro){var no,io,oo,ao=this.parseArgs(ro),so=ro.initial,uo=so[0],lo=so[1];return{longitude:(no=lo.longitude)!==null&&no!==void 0?no:ao.defaultLongitude,latitude:cn((io=lo.latitude)!==null&&io!==void 0?io:ao.defaultLatitude,ao.minLatitude,ao.maxLatitude),fov:cn((oo=lo.fov)!==null&&oo!==void 0?oo:ao.defaultFov,ao.minFov,ao.maxFov),offset:ao.work.observers[uo].position.clone()}},to.prototype.destroy=function(){eo.prototype.destroy.call(this),this.interiaMovement=!1,this.intersectMesh&&(this.helper.remove(this.intersectMesh),this.intersectMesh.dispose()),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),delete this.mouseWheelState,delete this.mouseMoveState,delete this.panState},to.prototype.isReady=function(){return!this.interiaMovement&&!this.panState&&!this.pinchState&&!this.mouseWheelState&&eo.prototype.isReady.call(this)},to.prototype.calculateMovingDuration=function(ro,no){switch(typeof ro){case"function":return ro(no,this.moveSpeed);case"number":return ro;case"string":return Number(ro);default:return Math.floor(Math.max(Math.min(no/this.moveSpeed*1e3,1500),500))}},to.prototype.hideIntersectMesh=function(){this.intersectMesh.visible=!1,this.emit("intersectionHidden"),this.needsRender=!0},to.prototype.coordinatesForOffset=function(ro){var no=this.cameraMotion.value.fov,io=this.camera.aspect,oo=this.renderer.getSize(new r$3.Vector2);return{longitude:2*ro.x/oo.x*no/95*io,latitude:-2*ro.y/oo.y*no/95}},to.prototype.cameraBounce=function(){var ro=this.cameraMotion.value,no=ro.longitude,io=ro.latitude,oo=ro.fov,ao=[{progress:0,value:{longitude:no,latitude:io,fov:oo}},{progress:.5,value:{longitude:no,latitude:io,fov:.98*oo}},{progress:1,value:{longitude:no,latitude:io,fov:oo}}];this.cameraMotion.setKeyframes(ao,500).catch(Pe)},to.prototype.requestInteriaMovement=function(ro){var no=this;if(this.interiaMovement!==!1){var io=this.coordinatesForOffset(ro),oo=sr(this.cameraMotion.value.longitude+io.longitude),ao=cn(this.cameraMotion.value.latitude+io.latitude,this.minLatitude,this.maxLatitude),so={longitude:oo,latitude:ao,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};this.cameraMotion.set({longitude:oo,latitude:ao},0).catch(Pe);var uo=Math.abs(ro.x)>1||Math.abs(ro.y)>1;this.emit("interiaPan",so,!uo),uo?ot.shared.add(function(lo,co){var fo=Math.min(.05625*co,1),mo={x:ro.x*fo,y:ro.y*fo*.7};no.requestInteriaMovement(mo)},!0,1):this.interiaMovement=!1}},to.prototype.onPanGesture=function(ro){var no=this.panState,io=ro.pointers.length;if(ro.isFinal?delete this.panState:this.panState={pointerLength:io,x:ro.center.x,y:ro.center.y},no!==void 0&&no.pointerLength===io){var oo=ro.pointers.map(function(Ao){return ni(Ao,["x","y"])});if(!this.emit("wantsGesture","pan",oo,ro.isFinal)){var ao={x:ro.center.x-no.x,y:ro.center.y-no.y},so=this.coordinatesForOffset(ao),uo=sr(this.cameraMotion.value.longitude+so.longitude),lo=cn(this.cameraMotion.value.latitude+so.latitude,this.minLatitude,this.maxLatitude);this.camera.aspect<1&&Math.abs(ro.overallVelocityX)>.2&&Math.atan2(Math.abs(ro.overallVelocityY),Math.abs(ro.overallVelocityX))<Math.PI/6.923&&(lo=this.cameraMotion.value.latitude);var co={longitude:uo,latitude:lo,fov:this.cameraMotion.value.fov,offset:this.camera.pose.offset.clone()};if(!this.emit("wantsPanGesture",co,ro.isFinal)){this.emit("gesture","pan",oo,ro.isFinal),this.emit("panGesture",co,ro.isFinal),this.userAction=!0,this.interiaMovement=!1,this.hideIntersectMesh();var fo={longitude:co.longitude,latitude:co.latitude,fov:co.fov};if(this.cameraMotion.set(fo,0).catch(Pe),ro.isFinal&&!this.emit("wantsInteriaPan",co)){var mo=ot.getFrameTime();this.interiaMovement=!0;var go=ro.velocityX*mo,yo=ro.velocityY*mo,vo=Math.sqrt(go*go+yo*yo);vo>100&&(go=go/vo*100,yo=yo/vo*100),Math.abs(yo/go)<Math.tan(20/180*Math.PI)&&(yo=0),this.requestInteriaMovement({x:go,y:yo})}}}}},to.prototype.onPinchGesture=function(ro){var no,io=(no=this.pinchState)===null||no===void 0?void 0:no.fov,oo=ro.scale,ao=!1;if(ro.type==="pinchstart")return this.pinchState={fov:this.cameraMotion.value.fov},void delete this.panState;if(ro.type==="pinchend"&&(ao=!0,delete this.panState,delete this.pinchState),io!==void 0){var so=ro.pointers.map(function(lo){return ni(lo,["x","y"])});if(!this.emit("wantsGesture","pinch",so,ao)){var uo=cn(io/oo,this.minFov,this.maxFov);this.emit("wantsPinchGesture",oo,uo,ao)||this.emit("wantsChangeCameraFov",uo)||(this.emit("gesture","pinch",so,ao),this.emit("pinchGesture",oo,uo,ao),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:uo},0).catch(Pe))}}},to.prototype.onMouseWheel=function(ro){var no=this,io=ro.delta,oo=[{x:ro.clientX,y:ro.clientY}];if(!this.emit("wantsGesture","mouseWheel",oo,!1)){var ao=cn(this.cameraMotion.value.fov-io,this.minFov,this.maxFov);this.emit("wantsMouseWheel",io,ao,!1)||this.emit("wantsChangeCameraFov",ao)||(this.emit("gesture","mouseWheel",oo,!1),this.emit("mouseWheel",io,ao,!1),this.userAction=!0,this.interiaMovement=!1,this.cameraMotion.set({fov:ao},0).catch(Pe),this.mouseWheelState&&clearTimeout(this.mouseWheelState.timer),this.mouseWheelState={timer:window.setTimeout(function(){delete no.mouseWheelState,no.emit("wantsGesture","mouseWheel",oo,!0)||no.emit("wantsMouseWheel",io,ao,!0)||no.emit("wantsChangeCameraFov",ao)||(no.emit("gesture","mouseWheel",oo,!0),no.emit("mouseWheel",0,ao,!0))},200)})}},to.prototype.onMouseMove=function(ro){if(this.intersectMesh.parent&&!this.model.empty&&this.model.bvhs&&this.model.bvhs.loaded===!0&&!this.panState){var no=this.relativeClientPosition({x:ro.clientX,y:ro.clientY}),io=new r$3.Raycaster;if(io.setFromCamera(no,this.camera),this.emit("wantsShowIntersectionOnModel",io))this.hideIntersectMesh();else{var oo=this.model.intersectRaycaster(io)[0];if(oo&&oo.face){var ao=oo.face.normal,so=ao.clone().multiplyScalar(.05),uo=oo.point.clone().add(so);this.intersectMesh.position.copy(uo);var lo=uo.clone().add(so);if(this.intersectMesh.lookAt(lo),Math.abs(ao.y)>.99){var co=this.camera.position.clone().sub(uo);this.intersectMesh.rotation.z=-Math.atan2(co.z,co.x)}this.intersectMesh.visible=!0,this.needsRender=!0,this.emit("intersectionOnModelUpdate",oo,this.intersectMesh)}else this.hideIntersectMesh();this.mouseMoveState={clientX:ro.clientX,clientY:ro.clientY}}}},to.prototype.onMouseOut=function(){this.intersectMesh.parent&&this.intersectMesh.visible===!0&&this.hideIntersectMesh()},to.prototype.onPressGesture=function(ro,no){var io,oo,ao=[ro];if(this.emit("wantsGesture","press",ao,no))return(io=this.pressState)===null||io===void 0||io.stop(),void delete this.pressState;var so=this.relativeClientPosition(ro),uo=new r$3.Raycaster;if(uo.setFromCamera(so,this.camera),this.emit("wantsPressGesture",uo,so,ro.delta,no))return(oo=this.pressState)===null||oo===void 0||oo.stop(),void delete this.pressState;this.emit("gesture","press",ao,no),this.emit("pressGesture",uo,so,ro.delta,no)},to}(Tr),Lr,Or=function(eo){function to(ro,no){return no===void 0&&(no=.5),eo.call(this,ro,{uniforms:{inputBuffer:new r$3.Uniform(null),scale:new r$3.Uniform(no)},fragment:`
#include <common>
uniform sampler2D inputBuffer;
uniform float scale;
varying vec2 vUv;

void main() {
  float u = (vUv.x - 0.5) * scale + 0.5;
  float v = (vUv.y - 0.5) * scale + 0.5;
  vec3 rgb = texture2D(inputBuffer, vec2(u, v)).rgb;
  float luminance = clamp(linearToRelativeLuminance(rgb), 0.1, 0.9);
  gl_FragColor = vec4(luminance);
}
`})||this}return t$2.__extends(to,eo),to}(Dr),Br=function(eo){function to(ro,no){no===void 0&&(no=.002);var io=eo.call(this,ro,{uniforms:{targetBuffer:new r$3.Uniform(null),inputBuffer:new r$3.Uniform(null),step:new r$3.Uniform(no)},fragment:`
        uniform sampler2D targetBuffer;
        uniform sampler2D inputBuffer;
        uniform float step;
        varying vec2 vUv;
        void main() {

          #ifdef GL_EXT_shader_texture_lod
            #if __VERSION__ < 300
              float target = texture2DLodEXT(targetBuffer, vUv, 5.0).r;
            #else
              float target = textureLod(targetBuffer, vUv, 5.0).r;
            #endif
          #else
            float target = texture2D(targetBuffer, vUv).r;
          #endif
          float current = texture2D(inputBuffer, vUv).r;

          float result;
          if (abs(target - current) < step) {
            result = target;
          } else if (target - current > 0.0) {
            result = current + step;
          } else {
            result = current - step;
          }
          gl_FragColor = vec4(result, result, result, 1.0);
        }
      `})||this;return io.material.extensions.shaderTextureLOD=!0,io}return t$2.__extends(to,eo),Object.defineProperty(to.prototype,"targetBuffer",{get:function(){return this.material.uniforms.targetBuffer.value},set:function(ro){this.material.uniforms.targetBuffer.value=ro},enumerable:!1,configurable:!0}),Object.defineProperty(to.prototype,"step",{get:function(){return this.material.uniforms.step.value},set:function(ro){this.material.uniforms.step.value=ro},enumerable:!1,configurable:!0}),to}(Dr),Qr=function(eo){function to(ro){var no=eo.call(this,ro,{uniforms:{inputBuffer:new r$3.Uniform(null),luminanceAdaptiveBuffer:new r$3.Uniform(null),progress:new r$3.Uniform(0)},fragment:`
        #include <common>
        uniform sampler2D inputBuffer;
        uniform sampler2D luminanceAdaptiveBuffer;
        uniform float progress;
        varying vec2 vUv;

        void main() {
          float middleGrey = 0.8;
          float whitePoint = 8.0;
          float exposure = 1.5;
          vec4 inputColor = texture2D(inputBuffer, vUv);
          vec3 rgb = inputColor.rgb * exposure;
          float alpha = inputColor.a;
          float luminance = linearToRelativeLuminance(rgb);
          float lumAvg = texture2D(luminanceAdaptiveBuffer, vec2(0.5)).r;
          float lumScaled = (luminance * middleGrey) / max(lumAvg, 1e-6);
          float lumCompressed = lumScaled * (1.0 + lumScaled / (whitePoint * whitePoint));
          lumCompressed /= (1.0 + lumScaled);
          rgb = clamp(lumCompressed * rgb, 0.0, 1.0);
          gl_FragColor = mix(inputColor, vec4(rgb, alpha), progress * 0.9);
        }
      `})||this;return no.material.transparent=!0,no}return t$2.__extends(to,eo),Object.defineProperty(to.prototype,"luminanceAdaptiveBuffer",{get:function(){return this.material.uniforms.luminanceAdaptiveBuffer.value},set:function(ro){this.material.uniforms.luminanceAdaptiveBuffer.value=ro},enumerable:!1,configurable:!0}),Object.defineProperty(to.prototype,"progress",{get:function(){return this.material.uniforms.progress.value},set:function(ro){this.material.uniforms.progress.value=ro},enumerable:!1,configurable:!0}),to}(Dr),kr=function(eo){function to(ro){var no=eo.call(this,ro)||this;return no.enableTime=Re(),no.renderer=ro,no.valuePass=new Er(no.renderer),no.luminancePass=new Or(no.renderer,.75),no.nextStepPass=new Br(no.renderer,.002),no.luminanceAdaptivePass=new Qr(no.renderer),no}return t$2.__extends(to,eo),to.prototype.render=function(ro,no,io){if(!this.enable)return this.enableTime=null,void this.copyPass.render(ro);this.enableTime===null&&(this.enableTime=Re()),this.luminanceTargetBuffer||(this.luminanceTargetBuffer=new r$3.WebGLRenderTarget(128,128,{minFilter:r$3.LinearMipmapLinearFilter,magFilter:r$3.LinearFilter,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1,format:r$3.RGBAFormat,generateMipmaps:!0}),this.nextStepPass.targetBuffer=this.luminanceTargetBuffer.texture),this.luminancePass.render(ro,this.luminanceTargetBuffer),this.luminancePrevBuffer||(this.luminancePrevBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminancePrevBuffer)),this.luminanceNextBuffer||(this.luminanceNextBuffer=new r$3.WebGLRenderTarget(1,1,{minFilter:r$3.NearestFilter,magFilter:r$3.NearestFilter,type:r$3.HalfFloatType,encoding:this.renderer.outputEncoding,stencilBuffer:!1,depthBuffer:!1}),this.valuePass.render(new r$3.Vector3(.5,.5,.5),this.luminanceNextBuffer),this.luminanceAdaptivePass.luminanceAdaptiveBuffer=this.luminanceNextBuffer.texture),this.copyPass.render(this.luminanceNextBuffer,this.luminancePrevBuffer),this.nextStepPass.render(this.luminancePrevBuffer,this.luminanceNextBuffer),this.luminanceAdaptivePass.progress=Math.min((Re()-this.enableTime)/3e3,1),this.luminanceAdaptivePass.render(ro,no)},to.prototype.dispose=function(){var ro,no,io;(ro=this.luminanceTargetBuffer)===null||ro===void 0||ro.dispose(),(no=this.luminancePrevBuffer)===null||no===void 0||no.dispose(),(io=this.luminanceNextBuffer)===null||io===void 0||io.dispose(),this.copyPass.dispose(),this.luminancePass.dispose(),this.nextStepPass.dispose(),this.luminanceAdaptivePass.dispose()},to}(Ir),Pr=["up","down","left","right","front","back"],Ur=(Lr=Math.SQRT1_2)!==null&&Lr!==void 0?Lr:Math.sqrt(2),Rr={up:new r$3.Quaternion(Ur,0,0,Ur),down:new r$3.Quaternion(-Ur,0,0,Ur),left:new r$3.Quaternion(0,Ur,0,Ur),right:new r$3.Quaternion(0,-Ur,0,Ur),front:new r$3.Quaternion(0,0,0,1),back:new r$3.Quaternion(0,1,0,0)},_r=new r$3.Quaternion().setFromAxisAngle(new r$3.Vector3(0,1,0),Math.PI),Yr=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),Fr=new Float32Array([0,0,1,0,0,1,1,1]),Hr=new Uint8Array([0,1,2,1,3,2]),Vr=new r$3.BufferGeometry;Vr.setAttribute("position",new r$3.BufferAttribute(Yr,3)),Vr.setAttribute("uv",new r$3.BufferAttribute(Fr,2)),Vr.setIndex(new r$3.BufferAttribute(Hr,1));var Gr=function(eo){function to(){var ro=eo.call(this,{uniforms:{map:{value:null},luminanceMap:{value:null}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader:`
#if defined(USE_LUMINANCE)
uniform sampler2D luminanceMap;
#endif
uniform sampler2D map;
varying vec2 vUv;

void main() {
  gl_FragColor = texture2D(map, vUv);
  #if defined(USE_LUMINANCE)
  gl_FragColor.a = 1.0 - texture2D(luminanceMap, vUv).r;
  #endif
}
`})||this;return ro.depthTest=!1,ro.depthWrite=!1,ro.blending=r$3.NoBlending,ro.map=ro.uniforms.map.value,ro.luminanceMap=ro.uniforms.luminanceMap.value,Object.defineProperties(ro,{map:{get:function(){return this.uniforms.map.value},set:function(no){this.uniforms.map.value=no}},luminanceMap:{get:function(){return this.uniforms.luminanceMap.value},set:function(no){this.uniforms.luminanceMap.value=no,this.defines.USE_LUMINANCE=no!==null,this.needsUpdate=!0}}}),ro}return t$2.__extends(to,eo),to}(r$3.ShaderMaterial),Kr=function(eo){function to(){var ro=eo!==null&&eo.apply(this,arguments)||this;return ro.level=0,ro.sideCount=0,ro.col=0,ro.row=0,ro.index=0,ro.type="up",ro}return t$2.__extends(to,eo),to}(r$3.Box3),qr=function(eo){function to(ro,no){var io=this,oo=new Gr;return oo.visible=!1,(io=eo.call(this,Vr,oo)||this).position.copy(ro.getCenter(new r$3.Vector3)),io.quaternion.copy(Rr[ro.type]),io.scale.setScalar(1/Math.pow(2,ro.level)),io.level=ro.level,io.activeTime=-1,io.disposed=!1,io.needsRender=!1,io.frustumCulled=!1,no.then(function(ao){var so=ao[0],uo=ao[1];io.disposed?(so.dispose(),uo==null||uo.dispose()):(io.material.map=so,io.material.luminanceMap=uo,io.material.needsUpdate=!0,io.material.visible=!0)}).catch(Pe),io}return t$2.__extends(to,eo),to.getBox=function(ro,no,io){var oo=new Kr,ao=Math.pow(2,ro),so=1/ao,uo=io%ao,lo=Math.floor(io/ao);switch(oo.level=ro,oo.index=io,oo.sideCount=ao,oo.row=lo,oo.col=uo,oo.type=no,no){case"up":oo.min.y=.5,oo.max.y=.5,oo.min.x=+uo*so-.5,oo.max.x=+uo*so-.5+so,oo.min.z=-lo*so+.5-so,oo.max.z=-lo*so+.5;break;case"down":oo.min.y=-.5,oo.max.y=-.5,oo.min.x=+uo*so-.5,oo.max.x=+uo*so-.5+so,oo.min.z=+lo*so-.5,oo.max.z=+lo*so-.5+so;break;case"left":oo.min.x=-.5,oo.max.x=-.5,oo.min.z=-uo*so+.5-so,oo.max.z=-uo*so+.5,oo.min.y=-lo*so+.5-so,oo.max.y=-lo*so+.5;break;case"right":oo.min.x=.5,oo.max.x=.5,oo.min.z=+uo*so-.5,oo.max.z=+uo*so-.5+so,oo.min.y=-lo*so+.5-so,oo.max.y=-lo*so+.5;break;case"front":oo.min.z=-.5,oo.max.z=-.5,oo.min.x=+uo*so-.5,oo.max.x=+uo*so-.5+so,oo.min.y=-lo*so+.5-so,oo.max.y=-lo*so+.5;break;case"back":oo.min.z=.5,oo.max.z=.5,oo.min.x=-uo*so+.5-so,oo.max.x=-uo*so+.5,oo.min.y=-lo*so+.5-so,oo.max.y=-lo*so+.5}return oo},to.prototype.updateTime=function(ro){},to.prototype.dispose=function(){var ro;this.disposed=!0,this.material.map&&(this.material.map.dispose(),(ro=this.material.luminanceMap)===null||ro===void 0||ro.dispose()),this.material.dispose()},to}(r$3.Mesh),Wr=function(eo){function to(){var ro=eo.call(this)||this;return ro.needsRender=!1,ro.name="tiling",ro}return t$2.__extends(to,eo),to}(r$3.Group),Xr=function(){function eo(to,ro){this.disposed=!1,this.textureLoader=new Ti(to),this.level=0,this.panoIndex=0,this.tiles=[],this.resource=[],this.luminance=null,this.imageOptions=ro,this.object=new Wr}return eo.prototype.setAllowHosts=function(to){this.textureLoader.setAllowHosts(to)},eo.prototype.setNetworkSubscribe=function(to){this.textureLoader.setNetworkSubscribe(to)},eo.prototype.cleanup=function(){for(var to=0;to<this.tiles.length;to++)if(this.tiles[to]){var ro=this.tiles[to],no="level-group:"+to,io=this.object.getObjectByName(no);for(var oo in ro){var ao=ro[oo];ao.dispose(),io.remove(ao),delete ro[oo],this.object.needsRender=!0}}},eo.prototype.setRotation=function(to){if(!this.disposed){var ro=new r$3.Quaternion().multiplyQuaternions(to,_r);this.object.quaternion.equals(ro)||(this.object.quaternion.copy(ro),this.object.needsRender=!0)}},eo.prototype.setPosition=function(to){this.disposed||this.object.position.equals(to)||(this.object.position.copy(to),this.object.needsRender=!0)},eo.prototype.setResource=function(to){if(!this.disposed&&this.resource!==to){this.cleanup(),this.resource=to;for(var ro=0;ro<to.length;ro++){var no=to[ro].level;this.tiles[no]={};var io="level-group:"+no,oo=this.object.getObjectByName(io);oo||((oo=new r$3.Group).name=io,oo.renderOrder=-2),this.object.add(oo)}this.object.needsRender=!0}},eo.prototype.setLuminance=function(to){this.luminance=to},eo.prototype.getTileResources=function(to){for(var ro,no=(ro=this.imageOptions.size)!==null&&ro!==void 0?ro:2048,io=[],oo=this.resource.length-1;oo>=0;oo--)this.resource[oo].level<=to&&512*Math.pow(2,this.resource[oo].level)>no&&io.unshift(this.resource[oo]);return io},eo.prototype.update=function(to,ro,no){var io=this;if(!this.disposed){this.level=ro;var oo=new r$3.PerspectiveCamera().copy(to);oo.position.set(0,0,0),oo.quaternion.premultiply(this.object.quaternion.clone().inverse()),oo.updateMatrixWorld(!0),oo.updateProjectionMatrix();for(var ao=oo.getWorldDirection(new r$3.Vector3),so=new r$3.Frustum().setFromProjectionMatrix(new r$3.Matrix4().multiplyMatrices(oo.projectionMatrix,oo.matrixWorldInverse)),uo=this.getTileResources(ro),lo=function(Ao){if(Ao){for(var ho=[],po=Ao.level,Mo=Math.pow(2,po),xo=Mo*Mo,wo=co.object.getObjectByName("level-group:"+po),bo=0,_o=Pr;bo<_o.length;bo++)for(var To=_o[bo],No=0;No<xo;No++){var Po=qr.getBox(po,To,No);so.intersectsBox(Po)&&ho.push(Po)}ho.sort(function(Ru,ku){return Ru.getCenter(new r$3.Vector3).angleTo(ao)-ku.getCenter(new r$3.Vector3).angleTo(ao)});for(var Co=[],Do=0,zo=ho;Do<zo.length;Do++){var Ro=(Po=zo[Do]).sideCount,Lo=Po.row,$o=Po.col,jo=(To=Po.type,"tile-level:".concat(po,"-face:").concat(To,"-row:").concat(Lo,"-col:").concat($o));if(!co.tiles[po][jo]){var Wo=Ao[To],Ko=Ao.size,Jo=Ko/Ro,Go=[Jo*$o,Jo*Lo,Jo,Jo],Xo=t$2.__assign({key:"pano_tile.".concat(co.panoIndex,".").concat(To,".").concat(po,".").concat(Lo,".").concat($o),basisLoaderInitialized:wi.isInitialized(),cut:Go},ni(co.imageOptions,["format"]));po<=1&&(Xo.format==="jpg"||/\.jpg$/.test(Wo))?(Jo!==1024&&(Xo.size=1024),Xo.quality=70):Jo!==512&&(Xo.size=512);var va=co.imageOptions.transform?co.imageOptions.transform(Wo,Xo):ht(Wo,Xo),tu=co.textureLoader.load(va,{preInit:!0}).then(function(Ru){return Ru.body}),Zs=null;if(co.luminance){var ga=co.luminance[To],qs=ga.match(/\/cube_(\d+)\//),su=!!qs&&Number(qs[1]);if(su!==!1){var uu=Ko/su,Js=t$2.__assign(t$2.__assign({},Xo),{size:256,cut:[Go[0]/uu,Go[1]/uu,Go[2]/uu,Go[3]/uu],key:"pano_tile_luminance.".concat(co.panoIndex,".").concat(To,".").concat(po,".").concat(Lo,".").concat($o)}),Xs=co.imageOptions.transform?co.imageOptions.transform(ga,Js):ht(ga,Js);Zs=co.textureLoader.load(Xs,{format:r$3.LuminanceFormat,preInit:!0}).then(function(Ru){return Ru.body}).catch(function(){return null})}}(yu=co.tiles[po][jo]=new qr(Po,Promise.all([tu,Zs]))).name=jo,yu.renderOrder=po,wo.add(yu)}co.tiles[po][jo].activeTime=no,Co.push(jo)}for(var iu=0,hu=Object.keys(co.tiles[po]).sort(function(Ru,ku){return io.tiles[po][ku].activeTime-io.tiles[po][Ru].activeTime}).slice(Math.max(24,Co.length));iu<hu.length;iu++){jo=hu[iu];var yu=co.tiles[po][jo];wo.remove(yu),yu.dispose(),delete co.tiles[po][jo],co.object.needsRender=!0}}},co=this,fo=0,mo=uo;fo<mo.length;fo++)lo(mo[fo]);for(var go=0;go<this.tiles.length;go++)if(this.tiles[go]){var yo=uo.length>0&&go<=uo[uo.length-1].level;for(var vo in this.tiles[go])this.tiles[go][vo].visible!==yo&&(this.tiles[go][vo].visible=yo,this.tiles[go][vo].needsRender=!0),this.tiles[go][vo].updateTime(no)}}},eo.prototype.dispose=function(){this.cleanup(),this.resource=[],this.disposed=!0},eo}(),Zr=new Float32Array([-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1]),Jr=new Uint8Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,18,17,18,19,17,20,22,21,22,23,21]),$r=new r$3.BufferGeometry;$r.setAttribute("position",new r$3.BufferAttribute(Zr,3)),$r.setIndex(new r$3.BufferAttribute(Jr,1));var es=function(){function eo(){this.material=new r$3.ShaderMaterial({vertexShader:`
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
void main() {
  vec4 transformed = vec4(position, 1.0);
  #if defined(USE_PANO_VIDEO)
  worldPosition = (modelMatrix * transformed).xyz;
  #endif
  gl_Position = projectionMatrix * modelViewMatrix * transformed;
}
`,fragmentShader:`
uniform vec2 size;
uniform mat4 matrix;
uniform float alpha;
uniform sampler2D map;
#if defined(USE_PANO_VIDEO)
varying vec3 worldPosition;
#endif
#include <common>
void main() {
  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
  #if defined(USE_PANO_VIDEO)
  vec3 cameraToVertex = worldPosition - cameraPosition;
  vec4 mapCoods = vec4(cameraToVertex, 1.0) * matrix;
  vec2 uv = vec2(
    0.5 + mapCoods.x / mapCoods.z / size.x,
    0.5 - mapCoods.y / mapCoods.z / size.y
  );
  vec4 videoColor = texture2D(map, uv);
  float match = (1.0 - step(0.0, mapCoods.z)) * (1.0 - step(0.5, abs(uv.x - 0.5))) * (1.0 - step(0.5, abs(uv.y - 0.5)));
  float blendAlpha = clamp(0.0, 1.0, 5.0 * (1.0 - clamp(distance(uv, vec2(0.5, 0.5)) / 0.55 , 0.0, 1.0)));
  gl_FragColor = vec4(videoColor.rgb, match * blendAlpha * alpha);
  #endif
}
`,uniforms:{size:new r$3.Uniform(null),matrix:new r$3.Uniform(null),alpha:new r$3.Uniform(null),map:new r$3.Uniform(null)},depthTest:!1,depthWrite:!1,defines:{USE_PANO_VIDEO:!1},blending:r$3.CustomBlending,blendSrc:r$3.SrcAlphaFactor,blendDst:r$3.OneMinusSrcAlphaFactor,blendSrcAlpha:r$3.OneFactor,blendDstAlpha:r$3.OneMinusSrcAlphaFactor}),this.object=new r$3.Mesh($r,this.material),this.object.visible=!1,this.object.renderOrder=-1,this.object.frustumCulled=!1,this.alphaMotion=new dn({alpha:0})}return eo.prototype.setMaterial=function(to){to?(this.material.uniforms.size.value=to.size,this.material.uniforms.matrix.value=to.matrix,this.material.uniforms.map.value=to.map,this.alphaMotion.set({alpha:to.alpha},500).catch(Pe),this.material.uniforms.alpha.value=to.alpha):(this.material.uniforms.size.value=null,this.material.uniforms.matrix.value=null,this.material.uniforms.map.value=null,this.alphaMotion.set({alpha:0},0).catch(Pe));var ro=to!==null;ro!==this.material.defines.USE_PANO_VIDEO&&(this.material.defines.USE_PANO_VIDEO=ro,this.material.needsUpdate=!0,this.object.visible=to!==null)},eo.prototype.updateTime=function(to){this.alphaMotion.ended||(this.alphaMotion.update(to),this.material.uniforms.alpha.value=this.alphaMotion.value.alpha)},eo.prototype.dispose=function(){this.material.dispose()},eo}(),ts=new r$3.Matrix4().makeRotationAxis(new r$3.Vector3(0,1,0),Math.PI),is=new r$3.Vector3(-1,1,1),ns=function(eo){function to(ro){var no,io,oo,ao,so,uo,lo,co=this,fo=to.parseArgs(ro);(co=eo.call(this,fo)||this).initAnimationed=!1,co.currentPanoIndex=fo.initial[0],co.maxAccessibleDistance=fo.maxAccessibleDistance,co.panoTapTriggerRadius=fo.panoTapTriggerRadius,co.panoCircleMeshCreator=fo.panoCircleMeshCreator,co.tileLevelForFov=fo.tileLevelForFov;var mo=co.model.getMaterial()||{},go=mo.pano0,yo=mo.pano1;go&&(yo==null?void 0:yo.map)!==go.map&&(co.model.setMaterial({pano0:yo}),go.map.dispose(),(no=go.luminanceMap)===null||no===void 0||no.dispose()),co.boundingMesh=co.generateBoundingMesh(),co.boundingMesh.setMaterial(co.model.getMaterial()||{}),co.boundingMesh.visible=!1,co.scene.add(co.boundingMesh),co.panoMeshes=[],co.updatePanoMeshes(),co.locationMotion=new dn({count:0,distance:co.camera.pose.distance,modelAlpha:(oo=(io=co.model.getMaterial())===null||io===void 0?void 0:io.modelAlpha)!==null&&oo!==void 0?oo:0,perspToOrtho:(so=(ao=co.model.getMaterial())===null||ao===void 0?void 0:ao.perspToOrtho)!==null&&so!==void 0?so:0}),co.panoResources={},co.panoResources[co.locationMotion.keyframes[0].key=co.locationMotion.keyframes[1].key=Xn()]={panoIndex:co.currentPanoIndex,workCode:co.work.workCode,panoPicture:(lo=(uo=co.model.getMaterial())===null||uo===void 0?void 0:uo.pano1)!==null&&lo!==void 0?lo:null,position:co.camera.pose.offset.clone(),effect:"fly"};var vo={allowHosts:co.work.allowHosts,networkSubscribe:co.networkSubscribe};return co.textureLoader=new Ti(vo),co.tiling=new Xr(vo,co.imageOptions),co.scene.add(co.tiling.object),co.panoVideo=new es,co.scene.add(co.panoVideo.object),co}return t$2.__extends(to,eo),to.parseArgs=function(ro){var no,io,oo,ao,so=eo.parseArgs.call(this,ro);return t$2.__assign(t$2.__assign({},so),{maxAccessibleDistance:(no=ro.maxAccessibleDistance)!==null&&no!==void 0?no:5,panoTapTriggerRadius:(io=ro.panoTapTriggerRadius)!==null&&io!==void 0?io:.5,panoCircleMeshCreator:(oo=ro.panoCircleMeshCreator)!==null&&oo!==void 0?oo:function(){return new _n},tileLevelForFov:(ao=ro.tileLevelForFov)!==null&&ao!==void 0?ao:function(uo,lo){var co=2*Math.atan(Math.tan(uo/180*Math.PI/2)*(lo.width/lo.height))/Math.PI*180,fo=Math.max(lo.width/co,lo.height/uo),mo=so.imageOptions.size;if(mo===void 0&&so.work.observers[0]){var go=so.work.observers[0].images.up.match(/\/cube_(\d+)\//);go&&(mo=Number(go[1]))}return mo===void 0&&(mo=2048),mo<8192&&fo>40?4:mo<4096&&fo>24?3:mo<2048&&fo>10?2:mo<1024&&fo>6?1:0}})},to.initAnimationEndPose=function(ro){var no=this.parseArgs(ro);return eo.initAnimationEndPose.call(this,no)},to.prototype.destroy=function(){var ro,no,io=this;eo.prototype.destroy.call(this),this.scene.remove(this.tiling.object),this.tiling.dispose(),this.locationMotion.dispose(),delete this.pendingTextureTask,this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(yo){io.helper.remove(yo),yo.dispose()}),this.panoMeshes.length=0),this.interiaMovement=!1;var oo=this.videoTexture.image;oo.pause(),oo.oncanplay=function(){},oo.ontimeupdate=function(){},this.scene.remove(this.panoVideo.object),this.panoVideo.setMaterial(null),this.panoVideo.dispose();for(var ao=(ro=this.model.getMaterial())!==null&&ro!==void 0?ro:{},so=ao.pano0,uo=ao.pano1,lo=0,co=Object.keys(this.panoResources);lo<co.length;lo++){var fo=co[lo],mo=this.panoResources[fo];if(mo.panoPicture){var go=mo.panoPicture.map;go&&go!==(so==null?void 0:so.map)&&go!==(uo==null?void 0:uo.map)&&(go.dispose(),(no=mo.panoPicture.luminanceMap)===null||no===void 0||no.dispose(),mo.panoPicture=null)}delete this.panoResources[fo]}},to.prototype.isReady=function(){return this.locationMotion.ended===!0&&eo.prototype.isReady.call(this)},to.prototype.updateWork=function(ro,no,io,oo,ao){var so=this;this.userAction=ao,this.work=ro,this.currentPanoIndex=no,this.textureLoader.setAllowHosts(this.work.allowHosts),this.tiling.setAllowHosts(this.work.allowHosts),this.tiling.cleanup(),this.initAnimationed=!1;var uo={},lo=!0;this.boundingMesh&&(uo=this.boundingMesh.getMaterial()||{},lo=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=lo,this.boundingMesh.setMaterial(uo),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var co=0,fo=this.panoMeshes;co<fo.length;co++)fo[co].visible=!1;return this.moveToPano(no,{effect:"fade",duration:oo,longitude:io.longitude,latitude:io.latitude,fov:io.fov,moveEndCallback:function(){so.initAnimationed=!0},moveCancelCallback:function(){so.initAnimationed=!0}},ao),!0},to.prototype.updateModel=function(ro){this.model=ro;var no={},io=!0;this.boundingMesh&&(no=this.boundingMesh.getMaterial()||{},io=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(),this.boundingMesh.visible=io,this.boundingMesh.name="bounding",this.boundingMesh.setMaterial(no),this.scene.add(this.boundingMesh),this.updatePanoMeshes()},to.prototype.updateTime=function(ro,no){var io,oo,ao,so,uo,lo,co;if(!this.destroyed){var fo={},mo={},go=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),yo=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]);if(this.locationMotion.ended===!1){this.locationMotion.update(ro);var vo=this.locationMotion.getKeyFrameSegment(ro),Ao=vo[0],ho=vo[1],po=this.panoResourceFromLocationMotionKeyframe(Ao),Mo=this.panoResourceFromLocationMotionKeyframe(ho),xo=new r$3.Vector3().copy(po.position),wo=new r$3.Vector3().copy(Mo.position),bo=this.locationMotion.value.count-ho.value.count+1;fo.modelAlpha=this.locationMotion.value.modelAlpha,fo.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),fo.useBlackTransition=Mo.effect==="instant",Mo.panoPicture&&(bo<1?po.panoPicture&&(fo.pano0=po.panoPicture):fo.pano0=Mo.panoPicture,fo.pano1=Mo.panoPicture),Mo.effect==="fade"&&(fo.pano0&&po.panoPicture&&(fo.pano0={map:fo.pano0.map,luminanceMap:fo.pano0.luminanceMap,matrix:po.panoPicture.matrix.clone().setPosition(Mo.position)}),xo.copy(wo)),fo.progress=bo,mo.distance=this.locationMotion.value.distance,mo.offset=new r$3.Vector3(xo.x+(wo.x-xo.x)*bo,xo.y+(wo.y-xo.y)*bo,xo.z+(wo.z-xo.z)*bo);for(var _o=[],To=[],No=0,Po=this.locationMotion.keyframes;No<Po.length;No++){var Co=Po[No],Do=Co.key,zo=Co.progress;Do!==void 0&&(_o.push(Do),zo>=this.locationMotion.progress&&To.push(Do))}for(var Ro=0,Lo=Object.keys(this.panoResources);Ro<Lo.length;Ro++){var $o=Lo[Ro];if(!(To.indexOf($o)>=0)){var jo=this.panoResources[$o];if(jo.panoPicture){var Wo=jo.panoPicture.map;if(Wo){if(Wo===((io=fo.pano0)===null||io===void 0?void 0:io.map)||Wo===((oo=fo.pano1)===null||oo===void 0?void 0:oo.map))continue;Wo.dispose(),(ao=jo.panoPicture.luminanceMap)===null||ao===void 0||ao.dispose(),jo.panoPicture=null}}_o.indexOf($o)>=0||delete this.panoResources[$o]}}po.workCode===Mo.workCode?this.currentPanoIndex=bo<.5?po.panoIndex:Mo.panoIndex:this.currentPanoIndex=Mo.panoIndex,this.emit("movingToPano",yo.panoIndex,go.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(ro),mo.longitude=this.cameraMotion.value.longitude,mo.latitude=this.cameraMotion.value.latitude,mo.fov=this.cameraMotion.value.fov),dr(fo)===!1&&(this.model.setMaterial(fo),this.boundingMesh.setMaterial(fo)),dr(mo)===!1&&this.setCamera(mo),this.camera.pose.distance>.1)for(var Ko=0;Ko<this.work.observers.length;Ko++)(va=this.panoMeshes[Ko])&&(va.visible=!1);else{var Jo=this.work.observers[this.currentPanoIndex];if(Jo){var Go=Jo.visibleNodes.concat(this.currentPanoIndex),Xo=this.getForwardPanoIndexOrNot();for(Ko=0;Ko<this.work.observers.length;Ko++){var va,tu=this.work.observers[Ko];if(va=this.panoMeshes[Ko])if(tu.loadable||tu.active)if(Go.indexOf(Ko)!==-1){va.visible=!0;var Zs=va.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);va.setCurrent(Xo===Ko),va.setOpacity(Zs<.01?0:cn(2/Zs,.5,1)),va.updateTime&&va.updateTime(ro,no)}else va.visible=!1;else va.visible=!1}}}this.boundingMesh.visible=Boolean((so=this.boundingMesh.getMaterial())===null||so===void 0?void 0:so.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position);var ga=this.tiling.object.visible;if(this.tileLevelForFov!==!1&&this.initAnimationed){var qs=yo.panoIndex,su=this.work.observers[qs];if(su)if($n(this.camera.position,su.position)){this.tiling.object.visible=!0,this.enableIOSEDR&&this.tiling.setLuminance((uo=su.images.luminance)!==null&&uo!==void 0?uo:null),this.tiling.panoIndex!==qs&&this.tiling.cleanup(),this.tiling.panoIndex=qs,this.tiling.setResource((co=(lo=su.images)===null||lo===void 0?void 0:lo.tiles)!==null&&co!==void 0?co:[]),this.tiling.setRotation(su.quaternion),this.tiling.setPosition(su.position);var uu=this.renderer.getSize(new r$3.Vector2);uu.width*=this.scissor.width,uu.height*=this.scissor.height,this.tiling.update(this.camera,this.tileLevelForFov(this.camera.fov,uu),ro)}else this.tiling.object.visible=!1;else this.tiling.object.visible=!1}else this.tiling.object.visible=!1;ga!==this.tiling.object.visible&&(this.tiling.object.needsRender=!0),this.panoVideo.object.position.copy(this.camera.position),this.panoVideo.updateTime(ro)}},to.prototype.render=function(ro){var no=this.work.observers[this.currentPanoIndex];no&&no.video&&(this.needsRender=!0),eo.prototype.render.call(this,ro)},to.prototype.postProcessing=function(ro,no,io){if(!this.destroyed)return this.effect||(this.effect=new kr(this.renderer)),this.effect.render(ro,no,io)},to.prototype.getTargetPose=function(){var ro=this.cameraMotion.getKeyFrameSegment(Re())[1],no=this.locationMotion.getKeyFrameSegment(Re())[1],io=this.panoResourceFromLocationMotionKeyframe(no),oo=this.work.observers[io.panoIndex];return{longitude:ro.value.longitude,latitude:ro.value.latitude,fov:ro.value.fov,offset:oo?oo.position.clone():this.camera.position.clone()}},to.prototype.moveToPano=function(ro,no,io){var oo,ao,so,uo=this,lo=this.work.observers[ro],co=t$2.__assign({key:"pano.".concat(ro),basisLoaderInitialized:wi.isInitialized()},ni(this.imageOptions,["format","size","quality"])),fo=(oo=this.imageOptions.transform)!==null&&oo!==void 0?oo:ht,mo={right:fo(lo.images.right,t$2.__assign(t$2.__assign({},co),{key:"".concat(co.key,".right")})),left:fo(lo.images.left,t$2.__assign(t$2.__assign({},co),{key:"".concat(co.key,".left")})),up:fo(lo.images.up,t$2.__assign(t$2.__assign({},co),{key:"".concat(co.key,".up")})),down:fo(lo.images.down,t$2.__assign(t$2.__assign({},co),{key:"".concat(co.key,".down")})),front:fo(lo.images.front,t$2.__assign(t$2.__assign({},co),{key:"".concat(co.key,".front")})),back:fo(lo.images.back,t$2.__assign(t$2.__assign({},co),{key:"".concat(co.key,".back")}))},go={key:"pano_luminance.".concat(ro),basisLoaderInitialized:wi.isInitialized(),size:co.size?co.size/2:1024},yo=this.enableIOSEDR&&lo.images.luminance?{right:fo(lo.images.luminance.right,t$2.__assign(t$2.__assign({},go),{key:"".concat(go.key,".right")})),left:fo(lo.images.luminance.left,t$2.__assign(t$2.__assign({},go),{key:"".concat(go.key,".left")})),up:fo(lo.images.luminance.up,t$2.__assign(t$2.__assign({},go),{key:"".concat(go.key,".up")})),down:fo(lo.images.luminance.down,t$2.__assign(t$2.__assign({},go),{key:"".concat(go.key,".down")})),front:fo(lo.images.luminance.front,t$2.__assign(t$2.__assign({},go),{key:"".concat(go.key,".front")})),back:fo(lo.images.luminance.back,t$2.__assign(t$2.__assign({},go),{key:"".concat(go.key,".back")}))}:null,vo="pano:"+Cr(mo);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===vo)return;var Ao=this.pendingTextureTask.panoIndex;(ao=this.panoMeshes[Ao])===null||ao===void 0||ao.setProgress(0),this.emit("textureAbort",Ao,lo),this.pendingTextureTask.onError(new Error("texture aborted"))}var ho,po=this.model.getMaterial()||{},Mo=po.pano0,xo=po.pano1;if(Mo&&Mo.map.name===vo&&Mo.luminanceMap!==null===this.enableIOSEDR?ho=Mo:(xo==null?void 0:xo.map.name)===vo&&xo.luminanceMap!==null===this.enableIOSEDR&&(ho=xo),ho){var wo={panoIndex:ro,workCode:this.work.workCode,effect:(so=no.effect)!==null&&so!==void 0?so:"fly",panoPicture:{map:ho.map,luminanceMap:ho.luminanceMap,matrix:new r$3.Matrix4().compose(lo.position,lo.quaternion,is)},position:lo.position.clone()};this.doMoveToPano(ro,wo,no,io)}else{this.pending=!0,this.pendingTextureTask={panoIndex:ro,hash:vo,onLoad:function(_o,To){var No,Po;if(uo.pending=!1,uo.destroyed)_o.body.dispose();else{_o.body.name=vo,uo.emit("panoLoaded",ro);var Co={panoIndex:ro,workCode:uo.work.workCode,effect:(No=no.effect)!==null&&No!==void 0?No:"fly",panoPicture:{map:_o.body,luminanceMap:(Po=To==null?void 0:To.body)!==null&&Po!==void 0?Po:null,matrix:new r$3.Matrix4().compose(lo.position,lo.quaternion,is)},position:lo.position.clone()};uo.doMoveToPano(ro,Co,no,io)}},onError:function(_o){uo.pending=!1,no.moveCancelCallback&&no.moveCancelCallback(),uo.emit("panoLoadError",_o,ro),uo.emit("moveToPanoCanceled",ro)}};var bo=this.panoMeshes[ro];bo&&bo.tap&&bo.tap(),Promise.all([this.textureLoader.loadCube(mo,{format:r$3.RGBFormat,viaAjax:!0},void 0,void 0,function(_o){var To,No;uo.emit("textureLoading",_o,ro,lo),((To=uo.pendingTextureTask)===null||To===void 0?void 0:To.hash)===vo&&((No=uo.panoMeshes[ro])===null||No===void 0||No.setProgress(_o))},this.renderer),yo?this.textureLoader.loadCube(yo,{format:r$3.LuminanceFormat}).catch(function(){return null}):Promise.resolve(null)]).then(function(_o){var To,No,Po=_o[0],Co=_o[1];((To=uo.pendingTextureTask)===null||To===void 0?void 0:To.hash)===vo?(uo.pendingTextureTask.onLoad(Po,Co),(No=uo.panoMeshes[ro])===null||No===void 0||No.setProgress(0),delete uo.pendingTextureTask,uo.emit("textureLoaded",ro,lo,Po.meta)):(Po.body.dispose(),Co==null||Co.body.dispose())}).catch(function(_o){var To,No;((To=uo.pendingTextureTask)===null||To===void 0?void 0:To.hash)===vo&&(uo.pendingTextureTask.onError(_o),(No=uo.panoMeshes[ro])===null||No===void 0||No.setProgress(0),delete uo.pendingTextureTask,uo.emit("textureError",_o,ro,lo),uo.emit("error",_o))}),this.emit("textureStartLoad",ro,lo)}},to.prototype.initAnimation=function(ro,no,io,oo){var ao,so,uo,lo=this;if(!this.destroyed){var co=!1;this.pending=!1,this.userAction=oo,this.moveToPano(ro,{longitude:(ao=no.longitude)!==null&&ao!==void 0?ao:this.defaultLongitude,latitude:cn((so=no.latitude)!==null&&so!==void 0?so:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((uo=no.fov)!==null&&uo!==void 0?uo:this.defaultFov,this.minFov,this.maxFov),duration:io,moveStartCallback:function(fo,mo){co=!0,lo.emit("initAnimationWillStart",fo,mo,lo.userAction)},moveEndCallback:function(fo,mo){lo.emit("initAnimationEnded",fo,mo,lo.userAction),lo.initAnimationed=!0},moveCancelCallback:function(){var fo={longitude:lo.camera.pose.longitude,latitude:lo.camera.pose.latitude,fov:lo.camera.pose.fov,offset:lo.camera.pose.offset.clone()};co===!1&&lo.emit("initAnimationWillStart",lo.currentPanoIndex,fo,lo.userAction),lo.emit("initAnimationEnded",lo.currentPanoIndex,fo,lo.userAction),lo.initAnimationed=!0}},oo)}},to.prototype.panoResourceFromLocationMotionKeyframe=function(ro){return this.panoResources[ro.key]},to.prototype.locationMotionKeyframesLength=function(ro){for(var no=0,io=1;io<ro.length;io++){var oo=this.panoResourceFromLocationMotionKeyframe(ro[io-1]).position,ao=this.panoResourceFromLocationMotionKeyframe(ro[io]).position;no+=oo.distanceTo(ao)*(ro[io].value.count-ro[io-1].value.count)}return no},to.prototype.updatePanoMeshes=function(ro){ro===void 0&&(ro=!0);for(var no={},io=0,oo=this.panoMeshes;io<oo.length;io++)no[(lo=oo[io]).name]=lo;this.panoMeshes.length=0;for(var ao=0;ao<this.work.observers.length;ao++){var so="panoCircle_".concat(this.work.workCode,"_").concat(ao),uo=this.work.observers[ao],lo=void 0;if(no[so]?(lo=no[so],delete no[so]):((lo=this.panoCircleMeshCreator()).name=so,this.helper.add(lo)),lo.position.copy(uo.standingPosition),ro&&this.model.loaded&&this.model.bvhs.loaded){var co=new r$3.Vector3(0,-1,0),fo=new r$3.Vector3(0,.1,0).add(lo.position),mo=new r$3.Raycaster(fo,co,0,.1),go=this.model.intersectRaycaster(mo)[0];go&&go.point.distanceTo(lo.position)>.01&&lo.position.copy(go.point)}this.panoMeshes[ao]=lo}for(var yo=0,vo=Object.keys(no);yo<vo.length;yo++){var Ao=vo[yo];this.helper.remove(no[Ao]),no[Ao].dispose(),delete no[Ao]}},to.prototype.generateBoundingMesh=function(ro){ro===void 0&&(ro=!1);for(var no=this.model.bounding.clone(),io=0,oo=this.work.observers;io<oo.length;io++){var ao=oo[io];no.expandByPoint(ao.standingPosition),no.expandByPoint(new r$3.Vector3().fromArray([ao.position.x,2*ao.position.y-ao.standingPosition.y,ao.position.z]))}ro&&no.expandByPoint(this.camera.position);var so=nr(no,new r$3.Vector3(1,0,1));return so.name="panorama_bounding",so},to.prototype.doMoveToPano=function(ro,no,io,oo){var ao,so,uo,lo=this;io===void 0&&(io={}),this.userAction=oo;var co=Re(),fo=Xn();this.tiling.cleanup(),this.panoResources[fo]=no;var mo,go,yo;if(this.locationMotion.ended){var vo=this.locationMotion.getKeyFrameSegment(co);vo[0];var Ao=vo[1],ho=this.locationMotion.value,po=this.panoResourceFromLocationMotionKeyframe(Ao).position,Mo=no.position;mo=Math.max(po.distanceTo(Mo),1),go=[{key:Ao.key,progress:0,value:t$2.__assign(t$2.__assign({},ho),{count:0})},{key:fo,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],yo=0}else{var xo=this.locationMotion.getKeyFrameSegment(co),wo=xo[0],bo=(Ao=xo[1],ho=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(wo).position),_o=(po=this.panoResourceFromLocationMotionKeyframe(Ao).position,Mo=no.position,Ao.value.count-ho.count),To=Math.max(bo.distanceTo(po),1)*_o;mo=To+Math.max(po.distanceTo(Mo),1),go=[{key:wo.key,progress:0,value:t$2.__assign({},ho)},{key:Ao.key,progress:To/mo,value:Ao.value},{key:fo,progress:1,value:{count:Ao.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var No=this.locationMotionKeyframesLength(this.locationMotion.keyframes),Po=this.locationMotionKeyframesLength(go);yo=this.locationMotion.getProgressVelocity(co)*No/Po}var Co=this.calculateMovingDuration(io.duration,mo),Do={longitude:io.longitude,latitude:io.latitude,fov:io.fov},zo={longitude:(ao=Do.longitude)!==null&&ao!==void 0?ao:this.camera.pose.longitude,latitude:(so=Do.latitude)!==null&&so!==void 0?so:this.camera.pose.latitude,fov:(uo=Do.fov)!==null&&uo!==void 0?uo:this.camera.pose.fov,offset:no.position.clone()};io.moveStartCallback&&io.moveStartCallback(ro,zo),this.emit("panoWillArrive",ro,zo,this.userAction),this.videoTexture&&this.videoTexture.image instanceof HTMLVideoElement&&this.videoTexture.image.getAttribute("src")&&(this.videoTexture.image.pause(),this.videoTexture.image.removeAttribute("uuid"),this.videoTexture.image.removeAttribute("src"),this.videoTexture.image.oncanplay=Pe,this.videoTexture.needsUpdate=!0),this.panoVideo.setMaterial(null),this.cameraMotion.set(Do,Co).catch(Pe),this.locationMotion.setKeyframes(go,Co,yo).then(function(){var Ro,Lo,$o,jo={longitude:lo.camera.pose.longitude,latitude:lo.camera.pose.latitude,fov:lo.camera.pose.fov,offset:lo.camera.pose.offset.clone()};io.moveEndCallback&&io.moveEndCallback(ro,jo),lo.emit("panoArrived",ro,jo,oo);var Wo=lo.work.observers[lo.currentPanoIndex];if(Wo&&Wo.video&&lo.videoTexture&&lo.videoTexture.image instanceof HTMLVideoElement){var Ko=ts.clone().multiply(($o=(Lo=(Ro=lo.model.getMaterial())===null||Ro===void 0?void 0:Ro.pano1)===null||Lo===void 0?void 0:Lo.matrix)!==null&&$o!==void 0?$o:new r$3.Matrix4).multiply(Wo.video.matrix),Jo={map:lo.videoTexture,size:Wo.video.size,matrix:Ko,alpha:1},Go=Xn(),Xo=lo.videoTexture.image;Xo.setAttribute("uuid",Go),(br||(br=new Promise(function(va){var tu,Zs=document.createElement("video");Zs.muted=!0,Zs.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw",Zs.addEventListener("timeupdate",function ga(){Zs.removeEventListener("timeupdate",ga,!1),clearTimeout(tu);var qs=document.createElement("canvas");qs.width=qs.height=1;var su=qs.getContext("2d");su?(su.drawImage(Zs,0,0,1,1),su.getImageData(0,0,1,1).data[3]>10?va(!0):va(!1)):va(!1)},!1),Zs.addEventListener("canplay",function ga(){Zs.removeEventListener("canplay",ga,!1),Zs.play()},!1),tu=window.setTimeout(function(){return va(!1)},1e3)}))).then(function(va){va&&Wo.video&&Xo.getAttribute("uuid")===Go&&(Xo.oncanplay=function(){Xo.oncanplay=Pe,Xo.play()},Xo.ontimeupdate=function(){Xo.currentTime>.5&&(Xo.ontimeupdate=Pe,lo.panoVideo.setMaterial(Jo))},Xo.src=Wo.video.source)}).catch(function(){Xo.removeAttribute("uuid")})}},function(){io.moveCancelCallback&&io.moveCancelCallback(),lo.emit("moveToPanoCanceled",ro)})},to.prototype.getForwardPanoIndexOrNot=function(ro){var no=this,io=this.camera.getWorldDirection(new r$3.Vector3),oo=this.camera.position.clone(),ao=this.work.observers[this.currentPanoIndex];if(!ao)return null;var so=ao.accessibleNodes.filter(function(ho){if(ho===no.currentPanoIndex)return!1;var po=no.work.observers[ho],Mo=po.standingPosition.clone().sub(oo);return Mo.length()!==0&&!(Mo.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(po.loadable||po.active)}),uo=(ro?ro.ray.direction.clone():io.clone()).setY(0);if(uo.length()===0)return null;for(var lo=so.slice().sort(function(ho,po){var Mo=no.work.observers[ho].position.clone().setY(oo.y),xo=no.work.observers[po].position.clone().setY(oo.y);return Mo.distanceTo(oo)-xo.distanceTo(oo)}),co=0,fo=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];co<fo.length;co++)for(var mo=fo[co],go=0,yo=lo;go<yo.length;go++){var vo=yo[go],Ao=this.work.observers[vo].position.clone().setY(oo.y).sub(oo);if(Ao.length()!==0&&uo.angleTo(Ao)<mo)return vo}return null},to.prototype.onTapGesture=function(ro){var no=this,io=ro.pointers.map(function(jo){return ni(jo,["x","y"])});if(!this.emit("wantsGesture","tap",io,!0)){var oo=this.relativeClientPosition(ro.center),ao=new r$3.Raycaster;if(ao.setFromCamera(oo,this.camera),!this.emit("wantsTapGesture",ao,oo,!0)){this.emit("gesture","tap",io,!0),this.emit("tapGesture",ao,oo,!0),this.interiaMovement=!1;var so=this.camera.getWorldDirection(new r$3.Vector3).setY(0),uo=null,lo=this.work.observers[this.currentPanoIndex];if(lo){var co=lo.accessibleNodes.filter(function(jo){if(jo===no.currentPanoIndex)return!1;var Wo=no.work.observers[jo];return!(Wo.position.distanceTo(no.camera.position)>no.maxAccessibleDistance)&&(Wo.loadable||Wo.active)}),fo=this.model.intersectRaycaster(ao)[0];if(fo){var mo=hr(co,function(jo){var Wo=no.work.observers[jo].standingPosition.clone();return Wo.clone().sub(no.camera.position).setY(0).angleTo(so)>Math.PI/2?1/0:Wo.distanceTo(fo.point)},!0),go=mo[0];mo[1]<this.panoTapTriggerRadius&&(uo=go)}Vi(uo)&&(uo=this.getForwardPanoIndexOrNot(ao));for(var yo=0,vo=this.locationMotion.keyframes;yo<vo.length;yo++){var Ao=vo[yo],ho=this.panoResourceFromLocationMotionKeyframe(Ao);if(!(Ao.progress<this.locationMotion.progress)&&ho.panoIndex===uo){uo=null;break}}if(this.emit("panoSelected",uo),Vi(uo))this.locationMotion.ended===!0&&this.cameraBounce();else{var po=this.work.observers[uo];if(po.active){for(var Mo={},xo=Math.PI/6,wo=Math.PI/12,bo=new r$3.Vector3(0,1,0),_o=po.position.clone().setY(0).sub(lo.position.clone().setY(0)).normalize(),To=_o.clone().applyAxisAngle(bo,xo),No=_o.clone().applyAxisAngle(bo,-xo),Po=[],Co=[],Do=[],zo=0,Ro=po.accessibleNodes;zo<Ro.length;zo++)if((go=Ro[zo])!==this.currentPanoIndex&&go!==uo){var Lo=this.work.observers[go].position.clone().sub(po.position).setY(0);_o.angleTo(Lo)<xo?Do.push(Lo):To.angleTo(Lo)<xo?Po.push(Lo):No.angleTo(Lo)<xo&&Co.push(Lo)}var $o=(Do.length>0?Do:t$2.__spreadArray(t$2.__spreadArray([],Po,!0),Co,!0)).slice().sort(function(jo,Wo){return jo.angleTo(_o)-Wo.angleTo(_o)})[0];$o&&$o.angleTo(so)>wo&&(Mo.longitude=Math.atan2(-$o.x,-$o.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Mo.latitude=cn(0,this.minLatitude,this.maxLatitude)),this.cameraMotion.value.fov<60&&(Mo.fov=this.defaultFov),this.emit("wantsMoveToPano",uo,Mo,!0)}else this.panoMeshes[uo]&&(this.panoMeshes[uo].setDisabled(!1),this.panoMeshes[uo].setLoading(!0))}}}}},to}(Sr),rs=function(eo,to){var ro=eo!==void 0?eo:typeof commonjsGlobal!="undefined"?commonjsGlobal:typeof self!="undefined"?self:{};function no(yo){return yo&&yo.__esModule&&Object.prototype.hasOwnProperty.call(yo,"default")?yo.default:yo}function io(yo,vo){return yo(vo={exports:{}},vo.exports),vo.exports}var oo=function(){return/Android/i.test(to.userAgent)||/iPhone|iPad|iPod/i.test(to.userAgent)},ao=function(yo,vo){for(var Ao=0,ho=yo.length;Ao<ho;Ao++)vo[Ao]=yo[Ao]},so=function(yo,vo){for(var Ao in vo)vo.hasOwnProperty(Ao)&&(yo[Ao]=vo[Ao]);return yo},uo=no(io(function(yo,vo){/**
         * @license
         * cardboard-vr-display
         * Copyright (c) 2015-2017 Google
         * Licensed under the Apache License, Version 2.0 (the "License");
         * you may not use this file except in compliance with the License.
         * You may obtain a copy of the License at
         *
         * http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing, software
         * distributed under the License is distributed on an "AS IS" BASIS,
         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         * See the License for the specific language governing permissions and
         * limitations under the License.
         *//**
         * @license
         * gl-preserve-state
         * Copyright (c) 2016, Brandon Jones.
         *
         * Permission is hereby granted, free of charge, to any person obtaining a copy
         * of this software and associated documentation files (the "Software"), to deal
         * in the Software without restriction, including without limitation the rights
         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         * copies of the Software, and to permit persons to whom the Software is
         * furnished to do so, subject to the following conditions:
         *
         * The above copyright notice and this permission notice shall be included in
         * all copies or substantial portions of the Software.
         *
         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
         * THE SOFTWARE.
         *//**
         * @license
         * webvr-polyfill-dpdb
         * Copyright (c) 2015-2017 Google
         * Licensed under the Apache License, Version 2.0 (the "License");
         * you may not use this file except in compliance with the License.
         * You may obtain a copy of the License at
         *
         * http://www.apache.org/licenses/LICENSE-2.0
         *
         * Unless required by applicable law or agreed to in writing, software
         * distributed under the License is distributed on an "AS IS" BASIS,
         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         * See the License for the specific language governing permissions and
         * limitations under the License.
         *//**
         * @license
         * nosleep.js
         * Copyright (c) 2017, Rich Tibbett
         *
         * Permission is hereby granted, free of charge, to any person obtaining a copy
         * of this software and associated documentation files (the "Software"), to deal
         * in the Software without restriction, including without limitation the rights
         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         * copies of the Software, and to permit persons to whom the Software is
         * furnished to do so, subject to the following conditions:
         *
         * The above copyright notice and this permission notice shall be included in
         * all copies or substantial portions of the Software.
         *
         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
         * THE SOFTWARE.
         */(function(Ao,ho){yo.exports=ho()})(0,function(){var Ao,ho=function(Eo,So){if(!(Eo instanceof So))throw new TypeError("Cannot call a class as a function")},po=function(){function Eo(So,Io){for(var Oo=0;Oo<Io.length;Oo++){var Qo=Io[Oo];Qo.enumerable=Qo.enumerable||!1,Qo.configurable=!0,"value"in Qo&&(Qo.writable=!0),Object.defineProperty(So,Qo.key,Qo)}}return function(So,Io,Oo){return Io&&Eo(So.prototype,Io),Oo&&Eo(So,Oo),So}}(),Mo=function(){function Eo(So,Io){var Oo=[],Qo=!0,Ho=!1,$s=void 0;try{for(var nu,cu=So[Symbol.iterator]();!(Qo=(nu=cu.next()).done)&&(Oo.push(nu.value),!Io||Oo.length!==Io);Qo=!0);}catch(Gs){Ho=!0,$s=Gs}finally{try{!Qo&&cu.return&&cu.return()}finally{if(Ho)throw $s}}return Oo}return function(So,Io){if(Array.isArray(So))return So;if(Symbol.iterator in Object(So))return Eo(So,Io);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xo=.001,wo=1,bo=function(Eo,So){return"data:"+Eo+","+encodeURIComponent(So)},_o=function(Eo,So,Io){return Eo+(So-Eo)*Io},To=function(){var Eo=/iPad|iPhone|iPod/.test(to.platform);return function(){return Eo}}(),No=function(){var Eo=to.userAgent.indexOf("Version")!==-1&&to.userAgent.indexOf("Android")!==-1&&to.userAgent.indexOf("Chrome")!==-1;return function(){return Eo}}(),Po=function(){var Eo=/^((?!chrome|android).)*safari/i.test(to.userAgent);return function(){return Eo}}(),Co=function(){var Eo=to.userAgent.indexOf("Firefox")!==-1&&to.userAgent.indexOf("Android")!==-1;return function(){return Eo}}(),Do=function(){var Eo=to.userAgent.match(/.*Chrome\/([0-9]+)/),So=Eo?parseInt(Eo[1],10):null;return function(){return So}}(),zo=function(){var Eo=!1;return Eo=To()&&Po()&&to.userAgent.indexOf("13_4")!==-1,function(){return Eo}}(),Ro=function(){var Eo=!1;if(Do()===65){var So=to.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(So){var Io=So[1].split("."),Oo=Mo(Io,4);Oo[0],Oo[1];var Qo=Oo[2],Ho=Oo[3];Eo=parseInt(Qo,10)===3325&&parseInt(Ho,10)<148}}return function(){return Eo}}(),Lo=function(){var Eo=to.userAgent.indexOf("R7 Build")!==-1;return function(){return Eo}}(),$o=function(){var Eo=eo.orientation==90||eo.orientation==-90;return Lo()?!Eo:Eo},jo=function(Eo){return!(isNaN(Eo)||Eo<=xo||Eo>wo)},Wo=function(){return Math.max(eo.screen.width,eo.screen.height)*eo.devicePixelRatio},Ko=function(){return Math.min(eo.screen.width,eo.screen.height)*eo.devicePixelRatio},Jo=function(Eo){if(No())return!1;if(Eo.requestFullscreen)Eo.requestFullscreen();else if(Eo.webkitRequestFullscreen)Eo.webkitRequestFullscreen();else if(Eo.mozRequestFullScreen)Eo.mozRequestFullScreen();else{if(!Eo.msRequestFullscreen)return!1;Eo.msRequestFullscreen()}return!0},Go=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},Xo=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},va=function(Eo,So,Io,Oo){var Qo=Eo.createShader(Eo.VERTEX_SHADER);Eo.shaderSource(Qo,So),Eo.compileShader(Qo);var Ho=Eo.createShader(Eo.FRAGMENT_SHADER);Eo.shaderSource(Ho,Io),Eo.compileShader(Ho);var $s=Eo.createProgram();for(var nu in Eo.attachShader($s,Qo),Eo.attachShader($s,Ho),Oo)Eo.bindAttribLocation($s,Oo[nu],nu);return Eo.linkProgram($s),Eo.deleteShader(Qo),Eo.deleteShader(Ho),$s},tu=function(Eo,So){for(var Io={},Oo=Eo.getProgramParameter(So,Eo.ACTIVE_UNIFORMS),Qo="",Ho=0;Ho<Oo;Ho++)Io[Qo=Eo.getActiveUniform(So,Ho).name.replace("[0]","")]=Eo.getUniformLocation(So,Qo);return Io},Zs=function(Eo,So,Io,Oo,Qo,Ho,$s){var nu=1/(So-Io),cu=1/(Oo-Qo),Gs=1/(Ho-$s);return Eo[0]=-2*nu,Eo[1]=0,Eo[2]=0,Eo[3]=0,Eo[4]=0,Eo[5]=-2*cu,Eo[6]=0,Eo[7]=0,Eo[8]=0,Eo[9]=0,Eo[10]=2*Gs,Eo[11]=0,Eo[12]=(So+Io)*nu,Eo[13]=(Qo+Oo)*cu,Eo[14]=($s+Ho)*Gs,Eo[15]=1,Eo},ga=function(){var Eo,So=!1;return Eo=to.userAgent||to.vendor||eo.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Eo)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Eo.substr(0,4)))&&(So=!0),So},qs=function(Eo,So){for(var Io in So)So.hasOwnProperty(Io)&&(Eo[Io]=So[Io]);return Eo},su=function(Eo){if(To()){var So=Eo.style.width,Io=Eo.style.height;Eo.style.width=parseInt(So)+1+"px",Eo.style.height=parseInt(Io)+"px",setTimeout(function(){Eo.style.width=So,Eo.style.height=Io},100)}eo.canvas=Eo},uu=function(){var Eo=Math.PI/180,So=.25*Math.PI;function Io(Gs,Ks,wu,Bu){var $u=Math.tan(Ks?Ks.upDegrees*Eo:So),Uu=Math.tan(Ks?Ks.downDegrees*Eo:So),Gu=Math.tan(Ks?Ks.leftDegrees*Eo:So),Qu=Math.tan(Ks?Ks.rightDegrees*Eo:So),Hu=2/(Gu+Qu),Ju=2/($u+Uu);return Gs[0]=Hu,Gs[1]=0,Gs[2]=0,Gs[3]=0,Gs[4]=0,Gs[5]=Ju,Gs[6]=0,Gs[7]=0,Gs[8]=-(Gu-Qu)*Hu*.5,Gs[9]=($u-Uu)*Ju*.5,Gs[10]=Bu/(wu-Bu),Gs[11]=-1,Gs[12]=0,Gs[13]=0,Gs[14]=Bu*wu/(wu-Bu),Gs[15]=0,Gs}function Oo(Gs,Ks,wu){var Bu=Ks[0],$u=Ks[1],Uu=Ks[2],Gu=Ks[3],Qu=Bu+Bu,Hu=$u+$u,Ju=Uu+Uu,ll=Bu*Qu,il=Bu*Hu,pl=Bu*Ju,gl=$u*Hu,vl=$u*Ju,cl=Uu*Ju,hl=Gu*Qu,fl=Gu*Hu,wl=Gu*Ju;return Gs[0]=1-(gl+cl),Gs[1]=il+wl,Gs[2]=pl-fl,Gs[3]=0,Gs[4]=il-wl,Gs[5]=1-(ll+cl),Gs[6]=vl+hl,Gs[7]=0,Gs[8]=pl+fl,Gs[9]=vl-hl,Gs[10]=1-(ll+gl),Gs[11]=0,Gs[12]=wu[0],Gs[13]=wu[1],Gs[14]=wu[2],Gs[15]=1,Gs}function Qo(Gs,Ks,wu){var Bu,$u,Uu,Gu,Qu,Hu,Ju,ll,il,pl,gl,vl,cl=wu[0],hl=wu[1],fl=wu[2];return Ks===Gs?(Gs[12]=Ks[0]*cl+Ks[4]*hl+Ks[8]*fl+Ks[12],Gs[13]=Ks[1]*cl+Ks[5]*hl+Ks[9]*fl+Ks[13],Gs[14]=Ks[2]*cl+Ks[6]*hl+Ks[10]*fl+Ks[14],Gs[15]=Ks[3]*cl+Ks[7]*hl+Ks[11]*fl+Ks[15]):(Bu=Ks[0],$u=Ks[1],Uu=Ks[2],Gu=Ks[3],Qu=Ks[4],Hu=Ks[5],Ju=Ks[6],ll=Ks[7],il=Ks[8],pl=Ks[9],gl=Ks[10],vl=Ks[11],Gs[0]=Bu,Gs[1]=$u,Gs[2]=Uu,Gs[3]=Gu,Gs[4]=Qu,Gs[5]=Hu,Gs[6]=Ju,Gs[7]=ll,Gs[8]=il,Gs[9]=pl,Gs[10]=gl,Gs[11]=vl,Gs[12]=Bu*cl+Qu*hl+il*fl+Ks[12],Gs[13]=$u*cl+Hu*hl+pl*fl+Ks[13],Gs[14]=Uu*cl+Ju*hl+gl*fl+Ks[14],Gs[15]=Gu*cl+ll*hl+vl*fl+Ks[15]),Gs}function Ho(Gs,Ks){var wu=Ks[0],Bu=Ks[1],$u=Ks[2],Uu=Ks[3],Gu=Ks[4],Qu=Ks[5],Hu=Ks[6],Ju=Ks[7],ll=Ks[8],il=Ks[9],pl=Ks[10],gl=Ks[11],vl=Ks[12],cl=Ks[13],hl=Ks[14],fl=Ks[15],wl=wu*Qu-Bu*Gu,bl=wu*Hu-$u*Gu,_l=wu*Ju-Uu*Gu,Tl=Bu*Hu-$u*Qu,Sl=Bu*Ju-Uu*Qu,Nl=$u*Ju-Uu*Hu,Dl=ll*cl-il*vl,Il=ll*hl-pl*vl,Cl=ll*fl-gl*vl,Ll=il*hl-pl*cl,Bl=il*fl-gl*cl,zl=pl*fl-gl*hl,sl=wl*zl-bl*Bl+_l*Ll+Tl*Cl-Sl*Il+Nl*Dl;return sl?(sl=1/sl,Gs[0]=(Qu*zl-Hu*Bl+Ju*Ll)*sl,Gs[1]=($u*Bl-Bu*zl-Uu*Ll)*sl,Gs[2]=(cl*Nl-hl*Sl+fl*Tl)*sl,Gs[3]=(pl*Sl-il*Nl-gl*Tl)*sl,Gs[4]=(Hu*Cl-Gu*zl-Ju*Il)*sl,Gs[5]=(wu*zl-$u*Cl+Uu*Il)*sl,Gs[6]=(hl*_l-vl*Nl-fl*bl)*sl,Gs[7]=(ll*Nl-pl*_l+gl*bl)*sl,Gs[8]=(Gu*Bl-Qu*Cl+Ju*Dl)*sl,Gs[9]=(Bu*Cl-wu*Bl-Uu*Dl)*sl,Gs[10]=(vl*Sl-cl*_l+fl*wl)*sl,Gs[11]=(il*_l-ll*Sl-gl*wl)*sl,Gs[12]=(Qu*Il-Gu*Ll-Hu*Dl)*sl,Gs[13]=(wu*Ll-Bu*Il+$u*Dl)*sl,Gs[14]=(cl*bl-vl*Tl-hl*wl)*sl,Gs[15]=(ll*Tl-il*bl+pl*wl)*sl,Gs):null}var $s=new Float32Array([0,0,0,1]),nu=new Float32Array([0,0,0]);function cu(Gs,Ks,wu,Bu,$u,Uu){Io(Gs,Bu||null,Uu.depthNear,Uu.depthFar),Oo(Ks,wu.orientation||$s,wu.position||nu),$u&&Qo(Ks,Ks,$u),Ho(Ks,Ks)}return function(Gs,Ks,wu){return!(!Gs||!Ks||(Gs.pose=Ks,Gs.timestamp=Ks.timestamp,cu(Gs.leftProjectionMatrix,Gs.leftViewMatrix,Ks,wu._getFieldOfView("left"),wu._getEyeOffset("left"),wu),cu(Gs.rightProjectionMatrix,Gs.rightViewMatrix,Ks,wu._getFieldOfView("right"),wu._getEyeOffset("right"),wu),0))}}(),Js=function(){var Eo=eo.self!==eo.top,So=Xs(document.referrer),Io=Xs(eo.location.href);return Eo&&So!==Io},Xs=function(Eo){var So,Io=Eo.indexOf("://");So=Io!==-1?Io+3:0;var Oo=Eo.indexOf("/",So);return Oo===-1&&(Oo=Eo.length),Eo.substring(0,Oo)},iu=function(Eo){return Eo.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(Eo.w)},hu=(Ao={},function(Eo,So){Ao[Eo]===void 0&&(console.warn("webvr-polyfill: "+So),Ao[Eo]=!0)}),yu=function(Eo,So){hu(Eo,Eo+" has been deprecated. This may not work on native WebVR displays. "+(So?"Please use "+So+" instead.":""))};function Ru(Eo,So,Io){if(So){for(var Oo=[],Qo=null,Ho=0;Ho<So.length;++Ho)switch($s=So[Ho]){case Eo.TEXTURE_BINDING_2D:case Eo.TEXTURE_BINDING_CUBE_MAP:if((cu=So[++Ho])<Eo.TEXTURE0||cu>Eo.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),Oo.push(null,null);break}Qo||(Qo=Eo.getParameter(Eo.ACTIVE_TEXTURE)),Eo.activeTexture(cu),Oo.push(Eo.getParameter($s),null);break;case Eo.ACTIVE_TEXTURE:Qo=Eo.getParameter(Eo.ACTIVE_TEXTURE),Oo.push(null);break;default:Oo.push(Eo.getParameter($s))}for(Io(Eo),Ho=0;Ho<So.length;++Ho){var $s=So[Ho],nu=Oo[Ho];switch($s){case Eo.ACTIVE_TEXTURE:break;case Eo.ARRAY_BUFFER_BINDING:Eo.bindBuffer(Eo.ARRAY_BUFFER,nu);break;case Eo.COLOR_CLEAR_VALUE:Eo.clearColor(nu[0],nu[1],nu[2],nu[3]);break;case Eo.COLOR_WRITEMASK:Eo.colorMask(nu[0],nu[1],nu[2],nu[3]);break;case Eo.CURRENT_PROGRAM:Eo.useProgram(nu);break;case Eo.ELEMENT_ARRAY_BUFFER_BINDING:Eo.bindBuffer(Eo.ELEMENT_ARRAY_BUFFER,nu);break;case Eo.FRAMEBUFFER_BINDING:Eo.bindFramebuffer(Eo.FRAMEBUFFER,nu);break;case Eo.RENDERBUFFER_BINDING:Eo.bindRenderbuffer(Eo.RENDERBUFFER,nu);break;case Eo.TEXTURE_BINDING_2D:if((cu=So[++Ho])<Eo.TEXTURE0||cu>Eo.TEXTURE31)break;Eo.activeTexture(cu),Eo.bindTexture(Eo.TEXTURE_2D,nu);break;case Eo.TEXTURE_BINDING_CUBE_MAP:var cu;if((cu=So[++Ho])<Eo.TEXTURE0||cu>Eo.TEXTURE31)break;Eo.activeTexture(cu),Eo.bindTexture(Eo.TEXTURE_CUBE_MAP,nu);break;case Eo.VIEWPORT:Eo.viewport(nu[0],nu[1],nu[2],nu[3]);break;case Eo.BLEND:case Eo.CULL_FACE:case Eo.DEPTH_TEST:case Eo.SCISSOR_TEST:case Eo.STENCIL_TEST:nu?Eo.enable($s):Eo.disable($s);break;default:console.log("No GL restore behavior for 0x"+$s.toString(16))}Qo&&Eo.activeTexture(Qo)}}else Io(Eo)}var ku=Ru,Fo=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),Vo=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function lu(Eo,So,Io,Oo){this.gl=Eo,this.cardboardUI=So,this.bufferScale=Io,this.dirtySubmitFrameBindings=Oo,this.ctxAttribs=Eo.getContextAttributes(),this.instanceExt=Eo.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=Eo.drawingBufferWidth,this.bufferHeight=Eo.drawingBufferHeight,this.realBindFramebuffer=Eo.bindFramebuffer,this.realEnable=Eo.enable,this.realDisable=Eo.disable,this.realColorMask=Eo.colorMask,this.realClearColor=Eo.clearColor,this.realViewport=Eo.viewport,To()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(Eo.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(Eo.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=va(Eo,Fo,Vo,this.attribs),this.uniforms=tu(Eo,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=Eo.createBuffer(),this.indexBuffer=Eo.createBuffer(),this.indexCount=0,this.renderTarget=Eo.createTexture(),this.framebuffer=Eo.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=Eo.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=Eo.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=Eo.createRenderbuffer()),this.patch(),this.onResize()}lu.prototype.destroy=function(){var Eo=this.gl;this.unpatch(),Eo.deleteProgram(this.program),Eo.deleteBuffer(this.vertexBuffer),Eo.deleteBuffer(this.indexBuffer),Eo.deleteTexture(this.renderTarget),Eo.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&Eo.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&Eo.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&Eo.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},lu.prototype.onResize=function(){var Eo=this.gl,So=this,Io=[Eo.RENDERBUFFER_BINDING,Eo.TEXTURE_BINDING_2D,Eo.TEXTURE0];ku(Eo,Io,function(Oo){So.realBindFramebuffer.call(Oo,Oo.FRAMEBUFFER,null),So.scissorTest&&So.realDisable.call(Oo,Oo.SCISSOR_TEST),So.realColorMask.call(Oo,!0,!0,!0,!0),So.realViewport.call(Oo,0,0,Oo.drawingBufferWidth,Oo.drawingBufferHeight),So.realClearColor.call(Oo,0,0,0,1),Oo.clear(Oo.COLOR_BUFFER_BIT),So.realBindFramebuffer.call(Oo,Oo.FRAMEBUFFER,So.framebuffer),Oo.bindTexture(Oo.TEXTURE_2D,So.renderTarget),Oo.texImage2D(Oo.TEXTURE_2D,0,So.ctxAttribs.alpha?Oo.RGBA:Oo.RGB,So.bufferWidth,So.bufferHeight,0,So.ctxAttribs.alpha?Oo.RGBA:Oo.RGB,Oo.UNSIGNED_BYTE,null),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MAG_FILTER,Oo.LINEAR),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MIN_FILTER,Oo.LINEAR),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_WRAP_S,Oo.CLAMP_TO_EDGE),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_WRAP_T,Oo.CLAMP_TO_EDGE),Oo.framebufferTexture2D(Oo.FRAMEBUFFER,Oo.COLOR_ATTACHMENT0,Oo.TEXTURE_2D,So.renderTarget,0),So.ctxAttribs.depth&&So.ctxAttribs.stencil?(Oo.bindRenderbuffer(Oo.RENDERBUFFER,So.depthStencilBuffer),Oo.renderbufferStorage(Oo.RENDERBUFFER,Oo.DEPTH_STENCIL,So.bufferWidth,So.bufferHeight),Oo.framebufferRenderbuffer(Oo.FRAMEBUFFER,Oo.DEPTH_STENCIL_ATTACHMENT,Oo.RENDERBUFFER,So.depthStencilBuffer)):So.ctxAttribs.depth?(Oo.bindRenderbuffer(Oo.RENDERBUFFER,So.depthBuffer),Oo.renderbufferStorage(Oo.RENDERBUFFER,Oo.DEPTH_COMPONENT16,So.bufferWidth,So.bufferHeight),Oo.framebufferRenderbuffer(Oo.FRAMEBUFFER,Oo.DEPTH_ATTACHMENT,Oo.RENDERBUFFER,So.depthBuffer)):So.ctxAttribs.stencil&&(Oo.bindRenderbuffer(Oo.RENDERBUFFER,So.stencilBuffer),Oo.renderbufferStorage(Oo.RENDERBUFFER,Oo.STENCIL_INDEX8,So.bufferWidth,So.bufferHeight),Oo.framebufferRenderbuffer(Oo.FRAMEBUFFER,Oo.STENCIL_ATTACHMENT,Oo.RENDERBUFFER,So.stencilBuffer)),!Oo.checkFramebufferStatus(Oo.FRAMEBUFFER)===Oo.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),So.realBindFramebuffer.call(Oo,Oo.FRAMEBUFFER,So.lastBoundFramebuffer),So.scissorTest&&So.realEnable.call(Oo,Oo.SCISSOR_TEST),So.realColorMask.apply(Oo,So.colorMask),So.realViewport.apply(Oo,So.viewport),So.realClearColor.apply(Oo,So.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},lu.prototype.patch=function(){if(!this.isPatched){var Eo=this,So=this.gl.canvas,Io=this.gl;To()||(So.width=Wo()*this.bufferScale,So.height=Ko()*this.bufferScale,Object.defineProperty(So,"width",{configurable:!0,enumerable:!0,get:function(){return Eo.bufferWidth},set:function(Oo){Eo.bufferWidth=Oo,Eo.realCanvasWidth.set.call(So,Oo),Eo.onResize()}}),Object.defineProperty(So,"height",{configurable:!0,enumerable:!0,get:function(){return Eo.bufferHeight},set:function(Oo){Eo.bufferHeight=Oo,Eo.realCanvasHeight.set.call(So,Oo),Eo.onResize()}})),this.lastBoundFramebuffer=Io.getParameter(Io.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(Io.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(Oo,Qo){Eo.lastBoundFramebuffer=Qo||Eo.framebuffer,Eo.realBindFramebuffer.call(Io,Oo,Eo.lastBoundFramebuffer)},this.cullFace=Io.getParameter(Io.CULL_FACE),this.depthTest=Io.getParameter(Io.DEPTH_TEST),this.blend=Io.getParameter(Io.BLEND),this.scissorTest=Io.getParameter(Io.SCISSOR_TEST),this.stencilTest=Io.getParameter(Io.STENCIL_TEST),Io.enable=function(Oo){switch(Oo){case Io.CULL_FACE:Eo.cullFace=!0;break;case Io.DEPTH_TEST:Eo.depthTest=!0;break;case Io.BLEND:Eo.blend=!0;break;case Io.SCISSOR_TEST:Eo.scissorTest=!0;break;case Io.STENCIL_TEST:Eo.stencilTest=!0}Eo.realEnable.call(Io,Oo)},Io.disable=function(Oo){switch(Oo){case Io.CULL_FACE:Eo.cullFace=!1;break;case Io.DEPTH_TEST:Eo.depthTest=!1;break;case Io.BLEND:Eo.blend=!1;break;case Io.SCISSOR_TEST:Eo.scissorTest=!1;break;case Io.STENCIL_TEST:Eo.stencilTest=!1}Eo.realDisable.call(Io,Oo)},this.colorMask=Io.getParameter(Io.COLOR_WRITEMASK),Io.colorMask=function(Oo,Qo,Ho,$s){Eo.colorMask[0]=Oo,Eo.colorMask[1]=Qo,Eo.colorMask[2]=Ho,Eo.colorMask[3]=$s,Eo.realColorMask.call(Io,Oo,Qo,Ho,$s)},this.clearColor=Io.getParameter(Io.COLOR_CLEAR_VALUE),Io.clearColor=function(Oo,Qo,Ho,$s){Eo.clearColor[0]=Oo,Eo.clearColor[1]=Qo,Eo.clearColor[2]=Ho,Eo.clearColor[3]=$s,Eo.realClearColor.call(Io,Oo,Qo,Ho,$s)},this.viewport=Io.getParameter(Io.VIEWPORT),Io.viewport=function(Oo,Qo,Ho,$s){Eo.viewport[0]=Oo,Eo.viewport[1]=Qo,Eo.viewport[2]=Ho,Eo.viewport[3]=$s,Eo.realViewport.call(Io,Oo,Qo,Ho,$s)},this.isPatched=!0,su(So)}},lu.prototype.unpatch=function(){if(this.isPatched){var Eo=this.gl,So=this.gl.canvas;To()||(Object.defineProperty(So,"width",this.realCanvasWidth),Object.defineProperty(So,"height",this.realCanvasHeight)),So.width=this.bufferWidth,So.height=this.bufferHeight,Eo.bindFramebuffer=this.realBindFramebuffer,Eo.enable=this.realEnable,Eo.disable=this.realDisable,Eo.colorMask=this.realColorMask,Eo.clearColor=this.realClearColor,Eo.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&Eo.bindFramebuffer(Eo.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){su(So)},1)}},lu.prototype.setTextureBounds=function(Eo,So){Eo||(Eo=[0,0,.5,1]),So||(So=[.5,0,.5,1]),this.viewportOffsetScale[0]=Eo[0],this.viewportOffsetScale[1]=Eo[1],this.viewportOffsetScale[2]=Eo[2],this.viewportOffsetScale[3]=Eo[3],this.viewportOffsetScale[4]=So[0],this.viewportOffsetScale[5]=So[1],this.viewportOffsetScale[6]=So[2],this.viewportOffsetScale[7]=So[3]},lu.prototype.submitFrame=function(){var Eo=this.gl,So=this,Io=[];if(this.dirtySubmitFrameBindings||Io.push(Eo.CURRENT_PROGRAM,Eo.ARRAY_BUFFER_BINDING,Eo.ELEMENT_ARRAY_BUFFER_BINDING,Eo.TEXTURE_BINDING_2D,Eo.TEXTURE0),ku(Eo,Io,function(Qo){So.realBindFramebuffer.call(Qo,Qo.FRAMEBUFFER,null);var Ho=0,$s=0;So.instanceExt&&(Ho=Qo.getVertexAttrib(So.attribs.position,So.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),$s=Qo.getVertexAttrib(So.attribs.texCoord,So.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),So.cullFace&&So.realDisable.call(Qo,Qo.CULL_FACE),So.depthTest&&So.realDisable.call(Qo,Qo.DEPTH_TEST),So.blend&&So.realDisable.call(Qo,Qo.BLEND),So.scissorTest&&So.realDisable.call(Qo,Qo.SCISSOR_TEST),So.stencilTest&&So.realDisable.call(Qo,Qo.STENCIL_TEST),So.realColorMask.call(Qo,!0,!0,!0,!0),So.realViewport.call(Qo,0,0,Qo.drawingBufferWidth,Qo.drawingBufferHeight),(So.ctxAttribs.alpha||To())&&(So.realClearColor.call(Qo,0,0,0,1),Qo.clear(Qo.COLOR_BUFFER_BIT)),Qo.useProgram(So.program),Qo.bindBuffer(Qo.ELEMENT_ARRAY_BUFFER,So.indexBuffer),Qo.bindBuffer(Qo.ARRAY_BUFFER,So.vertexBuffer),Qo.enableVertexAttribArray(So.attribs.position),Qo.enableVertexAttribArray(So.attribs.texCoord),Qo.vertexAttribPointer(So.attribs.position,2,Qo.FLOAT,!1,20,0),Qo.vertexAttribPointer(So.attribs.texCoord,3,Qo.FLOAT,!1,20,8),So.instanceExt&&(Ho!=0&&So.instanceExt.vertexAttribDivisorANGLE(So.attribs.position,0),$s!=0&&So.instanceExt.vertexAttribDivisorANGLE(So.attribs.texCoord,0)),Qo.activeTexture(Qo.TEXTURE0),Qo.uniform1i(So.uniforms.diffuse,0),Qo.bindTexture(Qo.TEXTURE_2D,So.renderTarget),Qo.uniform4fv(So.uniforms.viewportOffsetScale,So.viewportOffsetScale),Qo.drawElements(Qo.TRIANGLES,So.indexCount,Qo.UNSIGNED_SHORT,0),So.cardboardUI&&So.cardboardUI.renderNoState(),So.realBindFramebuffer.call(So.gl,Qo.FRAMEBUFFER,So.framebuffer),So.ctxAttribs.preserveDrawingBuffer||(So.realClearColor.call(Qo,0,0,0,0),Qo.clear(Qo.COLOR_BUFFER_BIT)),So.dirtySubmitFrameBindings||So.realBindFramebuffer.call(Qo,Qo.FRAMEBUFFER,So.lastBoundFramebuffer),So.cullFace&&So.realEnable.call(Qo,Qo.CULL_FACE),So.depthTest&&So.realEnable.call(Qo,Qo.DEPTH_TEST),So.blend&&So.realEnable.call(Qo,Qo.BLEND),So.scissorTest&&So.realEnable.call(Qo,Qo.SCISSOR_TEST),So.stencilTest&&So.realEnable.call(Qo,Qo.STENCIL_TEST),So.realColorMask.apply(Qo,So.colorMask),So.realViewport.apply(Qo,So.viewport),!So.ctxAttribs.alpha&&So.ctxAttribs.preserveDrawingBuffer||So.realClearColor.apply(Qo,So.clearColor),So.instanceExt&&(Ho!=0&&So.instanceExt.vertexAttribDivisorANGLE(So.attribs.position,Ho),$s!=0&&So.instanceExt.vertexAttribDivisorANGLE(So.attribs.texCoord,$s))}),To()){var Oo=Eo.canvas;Oo.width==So.bufferWidth&&Oo.height==So.bufferHeight||(So.bufferWidth=Oo.width,So.bufferHeight=Oo.height,So.onResize())}},lu.prototype.updateDeviceInfo=function(Eo){var So=this.gl,Io=this,Oo=[So.ARRAY_BUFFER_BINDING,So.ELEMENT_ARRAY_BUFFER_BINDING];ku(So,Oo,function(Qo){var Ho=Io.computeMeshVertices_(Io.meshWidth,Io.meshHeight,Eo);if(Qo.bindBuffer(Qo.ARRAY_BUFFER,Io.vertexBuffer),Qo.bufferData(Qo.ARRAY_BUFFER,Ho,Qo.STATIC_DRAW),!Io.indexCount){var $s=Io.computeMeshIndices_(Io.meshWidth,Io.meshHeight);Qo.bindBuffer(Qo.ELEMENT_ARRAY_BUFFER,Io.indexBuffer),Qo.bufferData(Qo.ELEMENT_ARRAY_BUFFER,$s,Qo.STATIC_DRAW),Io.indexCount=$s.length}})},lu.prototype.computeMeshVertices_=function(Eo,So,Io){for(var Oo=new Float32Array(2*Eo*So*5),Qo=Io.getLeftEyeVisibleTanAngles(),Ho=Io.getLeftEyeNoLensTanAngles(),$s=Io.getLeftEyeVisibleScreenRect(Ho),nu=0,cu=0;cu<2;cu++){for(var Gs=0;Gs<So;Gs++)for(var Ks=0;Ks<Eo;Ks++,nu++){var wu=Ks/(Eo-1),Bu=Gs/(So-1),$u=wu,Uu=Bu,Gu=_o(Qo[0],Qo[2],wu),Qu=_o(Qo[3],Qo[1],Bu),Hu=Math.sqrt(Gu*Gu+Qu*Qu),Ju=Io.distortion.distortInverse(Hu),ll=Qu*Ju/Hu;wu=(Gu*Ju/Hu-Ho[0])/(Ho[2]-Ho[0]),Bu=(ll-Ho[3])/(Ho[1]-Ho[3]),wu=2*($s.x+wu*$s.width-.5),Bu=2*($s.y+Bu*$s.height-.5),Oo[5*nu+0]=wu,Oo[5*nu+1]=Bu,Oo[5*nu+2]=$u,Oo[5*nu+3]=Uu,Oo[5*nu+4]=cu}var il=Qo[2]-Qo[0];Qo[0]=-(il+Qo[0]),Qo[2]=il-Qo[2],il=Ho[2]-Ho[0],Ho[0]=-(il+Ho[0]),Ho[2]=il-Ho[2],$s.x=1-($s.x+$s.width)}return Oo},lu.prototype.computeMeshIndices_=function(Eo,So){for(var Io=new Uint16Array(2*(Eo-1)*(So-1)*6),Oo=Eo/2,Qo=So/2,Ho=0,$s=0,nu=0;nu<2;nu++)for(var cu=0;cu<So;cu++)for(var Gs=0;Gs<Eo;Gs++,Ho++)Gs!=0&&cu!=0&&(Gs<=Oo==cu<=Qo?(Io[$s++]=Ho,Io[$s++]=Ho-Eo-1,Io[$s++]=Ho-Eo,Io[$s++]=Ho-Eo-1,Io[$s++]=Ho,Io[$s++]=Ho-1):(Io[$s++]=Ho-1,Io[$s++]=Ho-Eo,Io[$s++]=Ho,Io[$s++]=Ho-Eo,Io[$s++]=Ho-1,Io[$s++]=Ho-Eo-1));return Io},lu.prototype.getOwnPropertyDescriptor_=function(Eo,So){var Io=Object.getOwnPropertyDescriptor(Eo,So);return Io.get!==void 0&&Io.set!==void 0||(Io.configurable=!0,Io.enumerable=!0,Io.get=function(){return this.getAttribute(So)},Io.set=function(Oo){this.setAttribute(So,Oo)}),Io};var au=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),Tu=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),mu=Math.PI/180,gu=60,Fu=12,zu=20,Iu=1,du=.75,xu=.3125,pu=4,ou=28,qo=1.5;function vu(Eo){this.gl=Eo,this.attribs={position:0},this.program=va(Eo,au,Tu,this.attribs),this.uniforms=tu(Eo,this.program),this.vertexBuffer=Eo.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function Mu(Eo){this.coefficients=Eo}vu.prototype.destroy=function(){var Eo=this.gl;this.listener&&Eo.canvas.removeEventListener("click",this.listener,!1),Eo.deleteProgram(this.program),Eo.deleteBuffer(this.vertexBuffer)},vu.prototype.listen=function(Eo,So){var Io=this.gl.canvas;this.listener=function(Oo){var Qo=Io.clientWidth/2,Ho=ou*qo;Oo.clientX>Qo-Ho&&Oo.clientX<Qo+Ho&&Oo.clientY>Io.clientHeight-Ho?Eo(Oo):Oo.clientX<Ho&&Oo.clientY<Ho&&So(Oo)},Io.addEventListener("click",this.listener,!1)},vu.prototype.onResize=function(){var Eo=this.gl,So=this,Io=[Eo.ARRAY_BUFFER_BINDING];ku(Eo,Io,function(Oo){var Qo=[],Ho=Oo.drawingBufferWidth/2,$s=Math.max(screen.width,screen.height)*eo.devicePixelRatio,nu=Oo.drawingBufferWidth/$s*eo.devicePixelRatio,cu=pu*nu/2,Gs=ou*qo*nu,Ks=ou*nu/2,wu=(ou*qo-ou)*nu;function Bu(Hu,Ju){var ll=(90-Hu)*mu,il=Math.cos(ll),pl=Math.sin(ll);Qo.push(xu*il*Ks+Ho,xu*pl*Ks+Ks),Qo.push(Ju*il*Ks+Ho,Ju*pl*Ks+Ks)}Qo.push(Ho-cu,Gs),Qo.push(Ho-cu,Oo.drawingBufferHeight),Qo.push(Ho+cu,Gs),Qo.push(Ho+cu,Oo.drawingBufferHeight),So.gearOffset=Qo.length/2;for(var $u=0;$u<=6;$u++){var Uu=$u*gu;Bu(Uu,Iu),Bu(Uu+Fu,Iu),Bu(Uu+zu,du),Bu(Uu+(gu-zu),du),Bu(Uu+(gu-Fu),Iu)}function Gu(Hu,Ju){Qo.push(wu+Hu,Oo.drawingBufferHeight-wu-Ju)}So.gearVertexCount=Qo.length/2-So.gearOffset,So.arrowOffset=Qo.length/2;var Qu=cu/Math.sin(45*mu);Gu(0,Ks),Gu(Ks,0),Gu(Ks+Qu,Qu),Gu(Qu,Ks+Qu),Gu(Qu,Ks-Qu),Gu(0,Ks),Gu(Ks,2*Ks),Gu(Ks+Qu,2*Ks-Qu),Gu(Qu,Ks-Qu),Gu(0,Ks),Gu(Qu,Ks-cu),Gu(ou*nu,Ks-cu),Gu(Qu,Ks+cu),Gu(ou*nu,Ks+cu),So.arrowVertexCount=Qo.length/2-So.arrowOffset,Oo.bindBuffer(Oo.ARRAY_BUFFER,So.vertexBuffer),Oo.bufferData(Oo.ARRAY_BUFFER,new Float32Array(Qo),Oo.STATIC_DRAW)})},vu.prototype.render=function(){var Eo=this.gl,So=this,Io=[Eo.CULL_FACE,Eo.DEPTH_TEST,Eo.BLEND,Eo.SCISSOR_TEST,Eo.STENCIL_TEST,Eo.COLOR_WRITEMASK,Eo.VIEWPORT,Eo.CURRENT_PROGRAM,Eo.ARRAY_BUFFER_BINDING];ku(Eo,Io,function(Oo){Oo.disable(Oo.CULL_FACE),Oo.disable(Oo.DEPTH_TEST),Oo.disable(Oo.BLEND),Oo.disable(Oo.SCISSOR_TEST),Oo.disable(Oo.STENCIL_TEST),Oo.colorMask(!0,!0,!0,!0),Oo.viewport(0,0,Oo.drawingBufferWidth,Oo.drawingBufferHeight),So.renderNoState()})},vu.prototype.renderNoState=function(){var Eo=this.gl;Eo.useProgram(this.program),Eo.bindBuffer(Eo.ARRAY_BUFFER,this.vertexBuffer),Eo.enableVertexAttribArray(this.attribs.position),Eo.vertexAttribPointer(this.attribs.position,2,Eo.FLOAT,!1,8,0),Eo.uniform4f(this.uniforms.color,1,1,1,1),Zs(this.projMat,0,Eo.drawingBufferWidth,0,Eo.drawingBufferHeight,.1,1024),Eo.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),Eo.drawArrays(Eo.TRIANGLE_STRIP,0,4),Eo.drawArrays(Eo.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),Eo.drawArrays(Eo.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},Mu.prototype.distortInverse=function(Eo){for(var So=0,Io=1,Oo=Eo-this.distort(So);Math.abs(Io-So)>1e-4;){var Qo=Eo-this.distort(Io),Ho=Io-Qo*((Io-So)/(Qo-Oo));So=Io,Io=Ho,Oo=Qo}return Io},Mu.prototype.distort=function(Eo){for(var So=Eo*Eo,Io=0,Oo=0;Oo<this.coefficients.length;Oo++)Io=So*(Io+this.coefficients[Oo]);return(Io+1)*Eo};var Lu=Math.PI/180,Au=180/Math.PI,Nu=function(Eo,So,Io){this.x=Eo||0,this.y=So||0,this.z=Io||0};Nu.prototype={constructor:Nu,set:function(Eo,So,Io){return this.x=Eo,this.y=So,this.z=Io,this},copy:function(Eo){return this.x=Eo.x,this.y=Eo.y,this.z=Eo.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var Eo=this.length();if(Eo!==0){var So=1/Eo;this.multiplyScalar(So)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(Eo){this.x*=Eo,this.y*=Eo,this.z*=Eo},applyQuaternion:function(Eo){var So=this.x,Io=this.y,Oo=this.z,Qo=Eo.x,Ho=Eo.y,$s=Eo.z,nu=Eo.w,cu=nu*So+Ho*Oo-$s*Io,Gs=nu*Io+$s*So-Qo*Oo,Ks=nu*Oo+Qo*Io-Ho*So,wu=-Qo*So-Ho*Io-$s*Oo;return this.x=cu*nu+wu*-Qo+Gs*-$s-Ks*-Ho,this.y=Gs*nu+wu*-Ho+Ks*-Qo-cu*-$s,this.z=Ks*nu+wu*-$s+cu*-Ho-Gs*-Qo,this},dot:function(Eo){return this.x*Eo.x+this.y*Eo.y+this.z*Eo.z},crossVectors:function(Eo,So){var Io=Eo.x,Oo=Eo.y,Qo=Eo.z,Ho=So.x,$s=So.y,nu=So.z;return this.x=Oo*nu-Qo*$s,this.y=Qo*Ho-Io*nu,this.z=Io*$s-Oo*Ho,this}};var Vu,Wu,ol,bu=function(Eo,So,Io,Oo){this.x=Eo||0,this.y=So||0,this.z=Io||0,this.w=Oo!==void 0?Oo:1};function tl(Eo){this.width=Eo.width||Wo(),this.height=Eo.height||Ko(),this.widthMeters=Eo.widthMeters,this.heightMeters=Eo.heightMeters,this.bevelMeters=Eo.bevelMeters}bu.prototype={constructor:bu,set:function(Eo,So,Io,Oo){return this.x=Eo,this.y=So,this.z=Io,this.w=Oo,this},copy:function(Eo){return this.x=Eo.x,this.y=Eo.y,this.z=Eo.z,this.w=Eo.w,this},setFromEulerXYZ:function(Eo,So,Io){var Oo=Math.cos(Eo/2),Qo=Math.cos(So/2),Ho=Math.cos(Io/2),$s=Math.sin(Eo/2),nu=Math.sin(So/2),cu=Math.sin(Io/2);return this.x=$s*Qo*Ho+Oo*nu*cu,this.y=Oo*nu*Ho-$s*Qo*cu,this.z=Oo*Qo*cu+$s*nu*Ho,this.w=Oo*Qo*Ho-$s*nu*cu,this},setFromEulerYXZ:function(Eo,So,Io){var Oo=Math.cos(Eo/2),Qo=Math.cos(So/2),Ho=Math.cos(Io/2),$s=Math.sin(Eo/2),nu=Math.sin(So/2),cu=Math.sin(Io/2);return this.x=$s*Qo*Ho+Oo*nu*cu,this.y=Oo*nu*Ho-$s*Qo*cu,this.z=Oo*Qo*cu-$s*nu*Ho,this.w=Oo*Qo*Ho+$s*nu*cu,this},setFromAxisAngle:function(Eo,So){var Io=So/2,Oo=Math.sin(Io);return this.x=Eo.x*Oo,this.y=Eo.y*Oo,this.z=Eo.z*Oo,this.w=Math.cos(Io),this},multiply:function(Eo){return this.multiplyQuaternions(this,Eo)},multiplyQuaternions:function(Eo,So){var Io=Eo.x,Oo=Eo.y,Qo=Eo.z,Ho=Eo.w,$s=So.x,nu=So.y,cu=So.z,Gs=So.w;return this.x=Io*Gs+Ho*$s+Oo*cu-Qo*nu,this.y=Oo*Gs+Ho*nu+Qo*$s-Io*cu,this.z=Qo*Gs+Ho*cu+Io*nu-Oo*$s,this.w=Ho*Gs-Io*$s-Oo*nu-Qo*cu,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var Eo=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return Eo===0?(this.x=0,this.y=0,this.z=0,this.w=1):(Eo=1/Eo,this.x=this.x*Eo,this.y=this.y*Eo,this.z=this.z*Eo,this.w=this.w*Eo),this},slerp:function(Eo,So){if(So===0)return this;if(So===1)return this.copy(Eo);var Io=this.x,Oo=this.y,Qo=this.z,Ho=this.w,$s=Ho*Eo.w+Io*Eo.x+Oo*Eo.y+Qo*Eo.z;if($s<0?(this.w=-Eo.w,this.x=-Eo.x,this.y=-Eo.y,this.z=-Eo.z,$s=-$s):this.copy(Eo),$s>=1)return this.w=Ho,this.x=Io,this.y=Oo,this.z=Qo,this;var nu=Math.acos($s),cu=Math.sqrt(1-$s*$s);if(Math.abs(cu)<.001)return this.w=.5*(Ho+this.w),this.x=.5*(Io+this.x),this.y=.5*(Oo+this.y),this.z=.5*(Qo+this.z),this;var Gs=Math.sin((1-So)*nu)/cu,Ks=Math.sin(So*nu)/cu;return this.w=Ho*Gs+this.w*Ks,this.x=Io*Gs+this.x*Ks,this.y=Oo*Gs+this.y*Ks,this.z=Qo*Gs+this.z*Ks,this},setFromUnitVectors:(ol=1e-6,function(Eo,So){return Vu===void 0&&(Vu=new Nu),(Wu=Eo.dot(So)+1)<ol?(Wu=0,Math.abs(Eo.x)>Math.abs(Eo.z)?Vu.set(-Eo.y,Eo.x,0):Vu.set(0,-Eo.z,Eo.y)):Vu.crossVectors(Eo,So),this.x=Vu.x,this.y=Vu.y,this.z=Vu.z,this.w=Wu,this.normalize(),this})};var al=new tl({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),nl=new tl({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),ul={CardboardV1:new Al({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Al({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Xu(Eo,So){this.viewer=ul.CardboardV2,this.updateDeviceParams(Eo),this.distortion=new Mu(this.viewer.distortionCoefficients);for(var Io=0;Io<So.length;Io++){var Oo=So[Io];ul[Oo.id]=new Al(Oo)}}function Al(Eo){this.id=Eo.id,this.label=Eo.label,this.fov=Eo.fov,this.interLensDistance=Eo.interLensDistance,this.baselineLensDistance=Eo.baselineLensDistance,this.screenLensDistance=Eo.screenLensDistance,this.distortionCoefficients=Eo.distortionCoefficients,this.inverseCoefficients=Eo.inverseCoefficients}Xu.prototype.updateDeviceParams=function(Eo){this.device=this.determineDevice_(Eo)||this.device},Xu.prototype.getDevice=function(){return this.device},Xu.prototype.setViewer=function(Eo){this.viewer=Eo,this.distortion=new Mu(this.viewer.distortionCoefficients)},Xu.prototype.determineDevice_=function(Eo){if(!Eo)return To()?(console.warn("Using fallback iOS device measurements."),nl):(console.warn("Using fallback Android device measurements."),al);var So=.0254,Io=So/Eo.xdpi,Oo=So/Eo.ydpi;return new tl({widthMeters:Io*Wo(),heightMeters:Oo*Ko(),bevelMeters:.001*Eo.bevelMm})},Xu.prototype.getDistortedFieldOfViewLeftEye=function(){var Eo=this.viewer,So=this.device,Io=this.distortion,Oo=Eo.screenLensDistance,Qo=(So.widthMeters-Eo.interLensDistance)/2,Ho=Eo.interLensDistance/2,$s=Eo.baselineLensDistance-So.bevelMeters,nu=So.heightMeters-$s,cu=Au*Math.atan(Io.distort(Qo/Oo)),Gs=Au*Math.atan(Io.distort(Ho/Oo)),Ks=Au*Math.atan(Io.distort($s/Oo)),wu=Au*Math.atan(Io.distort(nu/Oo));return{leftDegrees:Math.min(cu,Eo.fov),rightDegrees:Math.min(Gs,Eo.fov),downDegrees:Math.min(Ks,Eo.fov),upDegrees:Math.min(wu,Eo.fov)}},Xu.prototype.getLeftEyeVisibleTanAngles=function(){var Eo=this.viewer,So=this.device,Io=this.distortion,Oo=Math.tan(-Lu*Eo.fov),Qo=Math.tan(Lu*Eo.fov),Ho=Math.tan(Lu*Eo.fov),$s=Math.tan(-Lu*Eo.fov),nu=So.widthMeters/4,cu=So.heightMeters/2,Gs=Eo.baselineLensDistance-So.bevelMeters-cu,Ks=Eo.interLensDistance/2-nu,wu=-Gs,Bu=Eo.screenLensDistance,$u=Io.distort((Ks-nu)/Bu),Uu=Io.distort((wu+cu)/Bu),Gu=Io.distort((Ks+nu)/Bu),Qu=Io.distort((wu-cu)/Bu),Hu=new Float32Array(4);return Hu[0]=Math.max(Oo,$u),Hu[1]=Math.min(Qo,Uu),Hu[2]=Math.min(Ho,Gu),Hu[3]=Math.max($s,Qu),Hu},Xu.prototype.getLeftEyeNoLensTanAngles=function(){var Eo=this.viewer,So=this.device,Io=this.distortion,Oo=new Float32Array(4),Qo=Io.distortInverse(Math.tan(-Lu*Eo.fov)),Ho=Io.distortInverse(Math.tan(Lu*Eo.fov)),$s=Io.distortInverse(Math.tan(Lu*Eo.fov)),nu=Io.distortInverse(Math.tan(-Lu*Eo.fov)),cu=So.widthMeters/4,Gs=So.heightMeters/2,Ks=Eo.baselineLensDistance-So.bevelMeters-Gs,wu=Eo.interLensDistance/2-cu,Bu=-Ks,$u=Eo.screenLensDistance,Uu=(wu-cu)/$u,Gu=(Bu+Gs)/$u,Qu=(wu+cu)/$u,Hu=(Bu-Gs)/$u;return Oo[0]=Math.max(Qo,Uu),Oo[1]=Math.min(Ho,Gu),Oo[2]=Math.min($s,Qu),Oo[3]=Math.max(nu,Hu),Oo},Xu.prototype.getLeftEyeVisibleScreenRect=function(Eo){var So=this.viewer,Io=this.device,Oo=So.screenLensDistance,Qo=(Io.widthMeters-So.interLensDistance)/2,Ho=So.baselineLensDistance-Io.bevelMeters,$s=(Eo[0]*Oo+Qo)/Io.widthMeters,nu=(Eo[1]*Oo+Ho)/Io.heightMeters,cu=(Eo[2]*Oo+Qo)/Io.widthMeters,Gs=(Eo[3]*Oo+Ho)/Io.heightMeters;return{x:$s,y:Gs,width:cu-$s,height:nu-Gs}},Xu.prototype.getFieldOfViewLeftEye=function(Eo){return Eo?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Xu.prototype.getFieldOfViewRightEye=function(Eo){var So=this.getFieldOfViewLeftEye(Eo);return{leftDegrees:So.rightDegrees,rightDegrees:So.leftDegrees,upDegrees:So.upDegrees,downDegrees:So.downDegrees}},Xu.prototype.getUndistortedFieldOfViewLeftEye=function(){var Eo=this.getUndistortedParams_();return{leftDegrees:Au*Math.atan(Eo.outerDist),rightDegrees:Au*Math.atan(Eo.innerDist),downDegrees:Au*Math.atan(Eo.bottomDist),upDegrees:Au*Math.atan(Eo.topDist)}},Xu.prototype.getUndistortedViewportLeftEye=function(){var Eo=this.getUndistortedParams_(),So=this.viewer,Io=this.device,Oo=So.screenLensDistance,Qo=Io.widthMeters/Oo,Ho=Io.heightMeters/Oo,$s=Io.width/Qo,nu=Io.height/Ho,cu=Math.round((Eo.eyePosX-Eo.outerDist)*$s),Gs=Math.round((Eo.eyePosY-Eo.bottomDist)*nu);return{x:cu,y:Gs,width:Math.round((Eo.eyePosX+Eo.innerDist)*$s)-cu,height:Math.round((Eo.eyePosY+Eo.topDist)*nu)-Gs}},Xu.prototype.getUndistortedParams_=function(){var Eo=this.viewer,So=this.device,Io=this.distortion,Oo=Eo.screenLensDistance,Qo=Eo.interLensDistance/2/Oo,Ho=So.widthMeters/Oo,$s=So.heightMeters/Oo,nu=Ho/2-Qo,cu=(Eo.baselineLensDistance-So.bevelMeters)/Oo,Gs=Eo.fov,Ks=Io.distortInverse(Math.tan(Lu*Gs)),wu=Math.min(nu,Ks),Bu=Math.min(Qo,Ks),$u=Math.min(cu,Ks);return{outerDist:wu,innerDist:Bu,topDist:Math.min($s-cu,Ks),bottomDist:$u,eyePosX:nu,eyePosY:cu}},Xu.Viewers=ul;var ko={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function Ws(Eo,So){if(this.dpdb=ko,this.recalculateDeviceParams_(),Eo){this.onDeviceParamsUpdated=So;var Io=new XMLHttpRequest,Oo=this;Io.open("GET",Eo,!0),Io.addEventListener("load",function(){Oo.loading=!1,Io.status>=200&&Io.status<=299?(Oo.dpdb=JSON.parse(Io.response),Oo.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),Io.send()}}function _a(Eo){this.xdpi=Eo.xdpi,this.ydpi=Eo.ydpi,this.bevelMm=Eo.bevelMm}function eu(Eo,So){this.set(Eo,So)}function fu(Eo,So){this.kFilter=Eo,this.isDebug=So,this.currentAccelMeasurement=new eu,this.currentGyroMeasurement=new eu,this.previousGyroMeasurement=new eu,To()?this.filterQ=new bu(-1,0,0,1):this.filterQ=new bu(1,0,0,1),this.previousFilterQ=new bu,this.previousFilterQ.copy(this.filterQ),this.accelQ=new bu,this.isOrientationInitialized=!1,this.estimatedGravity=new Nu,this.measuredGravity=new Nu,this.gyroIntegralQ=new bu}function Pu(Eo,So){this.predictionTimeS=Eo,this.isDebug=So,this.previousQ=new bu,this.previousTimestampS=null,this.deltaQ=new bu,this.outQ=new bu}function Eu(Eo,So,Io,Oo){this.yawOnly=Io,this.accelerometer=new Nu,this.gyroscope=new Nu,this.filter=new fu(Eo,Oo),this.posePredictor=new Pu(So,Oo),this.isFirefoxAndroid=Co(),this.isIOS=To();var Qo=Do();this.isDeviceMotionInRadians=!this.isIOS&&Qo&&Qo<66,this.isWithoutDeviceMotion=Ro()||zo(),this.filterToWorldQ=new bu,To()?this.filterToWorldQ.setFromAxisAngle(new Nu(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Nu(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new bu,this.worldToScreenQ=new bu,this.originalPoseAdjustQ=new bu,this.originalPoseAdjustQ.setFromAxisAngle(new Nu(0,0,1),-eo.orientation*Math.PI/180),this.setScreenTransform_(),$o()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new bu,this.orientationOut_=new Float32Array(4),this.start()}Ws.prototype.getDeviceParams=function(){return this.deviceParams},Ws.prototype.recalculateDeviceParams_=function(){var Eo=this.calcDeviceParams_();Eo?(this.deviceParams=Eo,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Ws.prototype.calcDeviceParams_=function(){var Eo=this.dpdb;if(!Eo)return console.error("DPDB not available."),null;if(Eo.format!=1)return console.error("DPDB has unexpected format version."),null;if(!Eo.devices||!Eo.devices.length)return console.error("DPDB does not have a devices section."),null;var So=to.userAgent||to.vendor||eo.opera,Io=Wo(),Oo=Ko();if(!Eo.devices)return console.error("DPDB has no devices section."),null;for(var Qo=0;Qo<Eo.devices.length;Qo++){var Ho=Eo.devices[Qo];if(Ho.rules)if(Ho.type=="ios"||Ho.type=="android"){if(To()==(Ho.type=="ios")){for(var $s=!1,nu=0;nu<Ho.rules.length;nu++){var cu=Ho.rules[nu];if(this.ruleMatches_(cu,So,Io,Oo)){$s=!0;break}}if($s)return new _a({xdpi:Ho.dpi[0]||Ho.dpi,ydpi:Ho.dpi[1]||Ho.dpi,bevelMm:Ho.bw})}}else console.warn("Device["+Qo+"] has invalid type.");else console.warn("Device["+Qo+"] has no rules section.")}return console.warn("No DPDB device match."),null},Ws.prototype.ruleMatches_=function(Eo,So,Io,Oo){if(!Eo.ua&&!Eo.res||(Eo.ua&&Eo.ua.substring(0,2)==="SM"&&(Eo.ua=Eo.ua.substring(0,7)),Eo.ua&&So.indexOf(Eo.ua)<0))return!1;if(Eo.res){if(!Eo.res[0]||!Eo.res[1])return!1;var Qo=Eo.res[0],Ho=Eo.res[1];if(Math.min(Io,Oo)!=Math.min(Qo,Ho)||Math.max(Io,Oo)!=Math.max(Qo,Ho))return!1}return!0},eu.prototype.set=function(Eo,So){this.sample=Eo,this.timestampS=So},eu.prototype.copy=function(Eo){this.set(Eo.sample,Eo.timestampS)},fu.prototype.addAccelMeasurement=function(Eo,So){this.currentAccelMeasurement.set(Eo,So)},fu.prototype.addGyroMeasurement=function(Eo,So){this.currentGyroMeasurement.set(Eo,So);var Io=So-this.previousGyroMeasurement.timestampS;jo(Io)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},fu.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var Eo=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,So=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,Eo);this.gyroIntegralQ.multiply(So),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(So);var Io=new bu;Io.copy(this.filterQ),Io.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Io),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Oo=new bu;Oo.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Oo.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Au*iu(Oo),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Qo=new bu;Qo.copy(this.filterQ),Qo.multiply(Oo),this.filterQ.slerp(Qo,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},fu.prototype.getOrientation=function(){return this.filterQ},fu.prototype.accelToQuaternion_=function(Eo){var So=new Nu;So.copy(Eo),So.normalize();var Io=new bu;return Io.setFromUnitVectors(new Nu(0,0,-1),So),Io.inverse(),Io},fu.prototype.gyroToQuaternionDelta_=function(Eo,So){var Io=new bu,Oo=new Nu;return Oo.copy(Eo),Oo.normalize(),Io.setFromAxisAngle(Oo,Eo.length()*So),Io},Pu.prototype.getPrediction=function(Eo,So,Io){if(!this.previousTimestampS)return this.previousQ.copy(Eo),this.previousTimestampS=Io,Eo;var Oo=new Nu;Oo.copy(So),Oo.normalize();var Qo=So.length();if(Qo<20*Lu)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Au*Qo).toFixed(1)),this.outQ.copy(Eo),this.previousQ.copy(Eo),this.outQ;var Ho=Qo*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Oo,Ho),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(Eo),this.previousTimestampS=Io,this.outQ},Eu.prototype.getPosition=function(){return null},Eu.prototype.getOrientation=function(){var Eo=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Qo=new bu().setFromAxisAngle(new Nu(0,0,-1),0),Ho=new bu;return eo.orientation===-90?Ho.setFromAxisAngle(new Nu(0,1,0),Math.PI/-2):Ho.setFromAxisAngle(new Nu(0,1,0),Math.PI/2),Qo.multiply(Ho)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((So=new bu).setFromAxisAngle(new Nu(1,0,0),-Math.PI/2),So),Eo=this._deviceOrientationQ,(Io=new bu).copy(Eo),Io.multiply(this.deviceOrientationFilterToWorldQ),Io.multiply(this.resetQ),Io.multiply(this.worldToScreenQ),Io.multiplyQuaternions(this.deviceOrientationFixQ,Io),this.yawOnly&&(Io.x=0,Io.z=0,Io.normalize()),this.orientationOut_[0]=Io.x,this.orientationOut_[1]=Io.y,this.orientationOut_[2]=Io.z,this.orientationOut_[3]=Io.w,this.orientationOut_;var So,Io,Oo=this.filter.getOrientation();return Eo=this.posePredictor.getPrediction(Oo,this.gyroscope,this.previousTimestampS),(Io=new bu).copy(this.filterToWorldQ),Io.multiply(this.resetQ),Io.multiply(Eo),Io.multiply(this.worldToScreenQ),this.yawOnly&&(Io.x=0,Io.z=0,Io.normalize()),this.orientationOut_[0]=Io.x,this.orientationOut_[1]=Io.y,this.orientationOut_[2]=Io.z,this.orientationOut_[3]=Io.w,this.orientationOut_},Eu.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),$o()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Eu.prototype.onDeviceOrientation_=function(Eo){this._deviceOrientationQ=this._deviceOrientationQ||new bu;var So=Eo.alpha,Io=Eo.beta,Oo=Eo.gamma;So=(So||0)*Math.PI/180,Io=(Io||0)*Math.PI/180,Oo=(Oo||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(Io,So,-Oo)},Eu.prototype.onDeviceMotion_=function(Eo){this.updateDeviceMotion_(Eo)},Eu.prototype.updateDeviceMotion_=function(Eo){var So=Eo.accelerationIncludingGravity,Io=Eo.rotationRate,Oo=Eo.timeStamp/1e3,Qo=Oo-this.previousTimestampS;return Qo<0?(hu("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Oo)):Qo<=xo||Qo>wo?(hu("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Oo)):(this.accelerometer.set(-So.x,-So.y,-So.z),Io&&(Lo()?this.gyroscope.set(-Io.beta,Io.alpha,Io.gamma):this.gyroscope.set(Io.alpha,Io.beta,Io.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Oo)),this.filter.addAccelMeasurement(this.accelerometer,Oo),void(this.previousTimestampS=Oo))},Eu.prototype.onOrientationChange_=function(Eo){this.setScreenTransform_()},Eu.prototype.onMessage_=function(Eo){var So=Eo.data;So&&So.type&&So.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(So.deviceMotionEvent)},Eu.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),eo.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Nu(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Nu(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Eu.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),To()&&Js()&&eo.addEventListener("message",this.onMessageCallback_),eo.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?eo.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):eo.addEventListener("devicemotion",this.onDeviceMotionCallback_)},Eu.prototype.stop=function(){eo.removeEventListener("devicemotion",this.onDeviceMotionCallback_),eo.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),eo.removeEventListener("orientationchange",this.onOrientationChangeCallback_),eo.removeEventListener("message",this.onMessageCallback_)};var _u=60,Ou=new Nu(1,0,0),ju=new Nu(0,0,1),Yu=new bu;Yu.setFromAxisAngle(Ou,-Math.PI/2),Yu.multiply(new bu().setFromAxisAngle(ju,Math.PI/2));var Bo=function(){function Eo(So){ho(this,Eo),this.config=So,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new bu,this._outQ=new bu,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return po(Eo,[{key:"init",value:function(){var So=null;try{(So=new RelativeOrientationSensor({frequency:_u,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(Io){this.errors.push(Io),Io.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):Io.name==="ReferenceError"?this.useDeviceMotion():console.error(Io)}So&&(this.api="sensor",this.sensor=So,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Eu(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var So=this.sensor.quaternion;this._sensorQ.set(So[0],So[1],So[2],So[3]);var Io=this._outQ;return Io.copy(Yu),Io.multiply(this._sensorQ),this.config.YAW_ONLY&&(Io.x=Io.z=0,Io.normalize()),this._out[0]=Io.x,this._out[1]=Io.y,this._out[2]=Io.z,this._out[3]=Io.w,this._out}},{key:"_onSensorError",value:function(So){this.errors.push(So.error),So.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):So.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(So.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),Eo}(),Uo="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function Yo(){this.loadIcon_();var Eo=document.createElement("div");(Ho=Eo.style).position="fixed",Ho.top=0,Ho.right=0,Ho.bottom=0,Ho.left=0,Ho.backgroundColor="gray",Ho.fontFamily="sans-serif",Ho.zIndex=1e6;var So=document.createElement("img");So.src=this.icon,(Ho=So.style).marginLeft="25%",Ho.marginTop="25%",Ho.width="50%",Eo.appendChild(So);var Io=document.createElement("div");(Ho=Io.style).textAlign="center",Ho.fontSize="16px",Ho.lineHeight="24px",Ho.margin="24px 25%",Ho.width="50%",Io.innerHTML="Place your phone into your Cardboard viewer.",Eo.appendChild(Io);var Oo=document.createElement("div");(Ho=Oo.style).backgroundColor="#CFD8DC",Ho.position="fixed",Ho.bottom=0,Ho.width="100%",Ho.height="48px",Ho.padding="14px 24px",Ho.boxSizing="border-box",Ho.color="#656A6B",Eo.appendChild(Oo);var Qo=document.createElement("div");Qo.style.float="left",Qo.innerHTML="No Cardboard viewer?";var Ho,$s=document.createElement("a");$s.href="https://www.google.com/get/cardboard/get-cardboard/",$s.innerHTML="get one",$s.target="_blank",(Ho=$s.style).float="right",Ho.fontWeight=600,Ho.textTransform="uppercase",Ho.borderLeft="1px solid gray",Ho.paddingLeft="24px",Ho.textDecoration="none",Ho.color="#656A6B",Oo.appendChild(Qo),Oo.appendChild($s),this.overlay=Eo,this.text=Io,this.hide()}Yo.prototype.show=function(Eo){Eo||this.overlay.parentElement?Eo&&(this.overlay.parentElement&&this.overlay.parentElement!=Eo&&this.overlay.parentElement.removeChild(this.overlay),Eo.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var So=this.overlay.querySelector("img").style;$o()?(So.width="20%",So.marginLeft="40%",So.marginTop="3%"):(So.width="50%",So.marginLeft="25%",So.marginTop="25%")},Yo.prototype.hide=function(){this.overlay.style.display="none"},Yo.prototype.showTemporarily=function(Eo,So){this.show(So),this.timer=setTimeout(this.hide.bind(this),Eo)},Yo.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},Yo.prototype.update=function(){this.disableShowTemporarily(),!$o()&&ga()?this.show():this.hide()},Yo.prototype.loadIcon_=function(){this.icon=bo("image/svg+xml",Uo)};var Zo="CardboardV1",ru="WEBVR_CARDBOARD_VIEWER",Cu="webvr-polyfill-viewer-selector";function Du(Eo){try{this.selectedKey=localStorage.getItem(ru)}catch(So){console.error("Failed to load viewer profile: %s",So)}this.selectedKey||(this.selectedKey=Eo||Zo),this.dialog=this.createDialog_(Xu.Viewers),this.root=null,this.onChangeCallbacks_=[]}function el(Eo){return Eo&&Eo.__esModule&&Object.prototype.hasOwnProperty.call(Eo,"default")?Eo.default:Eo}function Su(Eo,So){return Eo(So={exports:{}},So.exports),So.exports}Du.prototype.show=function(Eo){this.root=Eo,Eo.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Du.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Du.prototype.getCurrentViewer=function(){return Xu.Viewers[this.selectedKey]},Du.prototype.getSelectedKey_=function(){var Eo=this.dialog.querySelector("input[name=field]:checked");return Eo?Eo.id:null},Du.prototype.onChange=function(Eo){this.onChangeCallbacks_.push(Eo)},Du.prototype.fireOnChange_=function(Eo){for(var So=0;So<this.onChangeCallbacks_.length;So++)this.onChangeCallbacks_[So](Eo)},Du.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Xu.Viewers[this.selectedKey]){this.fireOnChange_(Xu.Viewers[this.selectedKey]);try{localStorage.setItem(ru,this.selectedKey)}catch(Eo){console.error("Failed to save viewer profile: %s",Eo)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Du.prototype.createDialog_=function(Eo){var So=document.createElement("div");So.classList.add(Cu),So.style.display="none";var Io=document.createElement("div");(Ho=Io.style).position="fixed",Ho.left=0,Ho.top=0,Ho.width="100%",Ho.height="100%",Ho.background="rgba(0, 0, 0, 0.3)",Io.addEventListener("click",this.hide.bind(this));var Oo=280,Qo=document.createElement("div"),Ho=Qo.style;for(var $s in Ho.boxSizing="border-box",Ho.position="fixed",Ho.top="24px",Ho.left="50%",Ho.marginLeft=-Oo/2+"px",Ho.width=Oo+"px",Ho.padding="24px",Ho.overflow="hidden",Ho.background="#fafafa",Ho.fontFamily="'Roboto', sans-serif",Ho.boxShadow="0px 5px 20px #666",Qo.appendChild(this.createH1_("Select your viewer")),Eo)Qo.appendChild(this.createChoice_($s,Eo[$s].label));return Qo.appendChild(this.createButton_("Save",this.onSave_.bind(this))),So.appendChild(Io),So.appendChild(Qo),So},Du.prototype.createH1_=function(Eo){var So=document.createElement("h1"),Io=So.style;return Io.color="black",Io.fontSize="20px",Io.fontWeight="bold",Io.marginTop=0,Io.marginBottom="24px",So.innerHTML=Eo,So},Du.prototype.createChoice_=function(Eo,So){var Io=document.createElement("div");Io.style.marginTop="8px",Io.style.color="black";var Oo=document.createElement("input");Oo.style.fontSize="30px",Oo.setAttribute("id",Eo),Oo.setAttribute("type","radio"),Oo.setAttribute("value",Eo),Oo.setAttribute("name","field");var Qo=document.createElement("label");return Qo.style.marginLeft="4px",Qo.setAttribute("for",Eo),Qo.innerHTML=So,Io.appendChild(Oo),Io.appendChild(Qo),Io},Du.prototype.createButton_=function(Eo,So){var Io=document.createElement("button");Io.innerHTML=Eo;var Oo=Io.style;return Oo.float="right",Oo.textTransform="uppercase",Oo.color="#1094f7",Oo.fontSize="14px",Oo.letterSpacing=0,Oo.border=0,Oo.background="none",Oo.marginTop="16px",Io.addEventListener("click",So),Io};var rl=el(Su(function(Eo,So){(function(Io,Oo){Eo.exports=Oo()})(0,function(){return function(Io){var Oo={};function Qo(Ho){if(Oo[Ho])return Oo[Ho].exports;var $s=Oo[Ho]={i:Ho,l:!1,exports:{}};return Io[Ho].call($s.exports,$s,$s.exports,Qo),$s.l=!0,$s.exports}return Qo.m=Io,Qo.c=Oo,Qo.d=function(Ho,$s,nu){Qo.o(Ho,$s)||Object.defineProperty(Ho,$s,{configurable:!1,enumerable:!0,get:nu})},Qo.n=function(Ho){var $s=Ho&&Ho.__esModule?function(){return Ho.default}:function(){return Ho};return Qo.d($s,"a",$s),$s},Qo.o=function(Ho,$s){return Object.prototype.hasOwnProperty.call(Ho,$s)},Qo.p="",Qo(Qo.s=0)}([function(Io,Oo,Qo){var Ho=function(){function Ks(wu,Bu){for(var $u=0;$u<Bu.length;$u++){var Uu=Bu[$u];Uu.enumerable=Uu.enumerable||!1,Uu.configurable=!0,"value"in Uu&&(Uu.writable=!0),Object.defineProperty(wu,Uu.key,Uu)}}return function(wu,Bu,$u){return Bu&&Ks(wu.prototype,Bu),$u&&Ks(wu,$u),wu}}();function $s(Ks,wu){if(!(Ks instanceof wu))throw new TypeError("Cannot call a class as a function")}var nu=Qo(1),cu=to!==void 0&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(to.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!eo.MSStream,Gs=function(){function Ks(){$s(this,Ks),cu?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",nu),this.noSleepVideo.addEventListener("timeupdate",function(wu){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return Ho(Ks,[{key:"enable",value:function(){cu?(this.disable(),this.noSleepTimer=eo.setInterval(function(){eo.location.href="/",eo.setTimeout(eo.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){cu?this.noSleepTimer&&(eo.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),Ks}();Io.exports=Gs},function(Io,Oo,Qo){Io.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})})),ml=1e3,Ml=[0,0,.5,1],El=[.5,0,.5,1],xl=eo.requestAnimationFrame,Ol=eo.cancelAnimationFrame;function Pl(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function yl(Eo){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:Eo.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:Eo.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:Eo.canPresent},maxLayers:{writable:!1,enumerable:!0,value:Eo.maxLayers},hasOrientation:{enumerable:!0,get:function(){return yu("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),Eo.hasOrientation}}})}function qu(Eo){var So=!("wakelock"in(Eo=Eo||{}))||Eo.wakelock;this.isPolyfilled=!0,this.displayId=ml++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return yu("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new yl({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,So&&ga()&&(this.wakelock_=new rl)}qu.prototype.getFrameData=function(Eo){return uu(Eo,this._getPose(),this)},qu.prototype.getPose=function(){return yu("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},qu.prototype.resetPose=function(){return yu("VRDisplay.prototype.resetPose"),this._resetPose()},qu.prototype.getImmediatePose=function(){return yu("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},qu.prototype.requestAnimationFrame=function(Eo){return xl(Eo)},qu.prototype.cancelAnimationFrame=function(Eo){return Ol(Eo)},qu.prototype.wrapForFullscreen=function(Eo){if(To())return Eo;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var So=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",So.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==Eo)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=Eo,this.originalParent_=Eo.parentElement,this.originalParent_||document.body.appendChild(Eo),!this.fullscreenWrapper_.parentElement){var Io=this.fullscreenElement_.parentElement;Io.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),Io.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var Oo=this;function Qo(){if(Oo.fullscreenElement_){var Ho=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];Oo.fullscreenElement_.setAttribute("style",Ho.join("; ")+";")}}return Qo(),this.fullscreenWrapper_},qu.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var Eo=this.fullscreenElement_;this.fullscreenElementCachedStyle_?Eo.setAttribute("style",this.fullscreenElementCachedStyle_):Eo.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var So=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(Eo),this.originalParent_===So?So.insertBefore(Eo,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(Eo),So.removeChild(this.fullscreenWrapper_),Eo}},qu.prototype.requestPresent=function(Eo){var So=this.isPresenting,Io=this;return Eo instanceof Array||(yu("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),Eo=[Eo]),new Promise(function(Oo,Qo){if(Io.capabilities.canPresent)if(Eo.length==0||Eo.length>Io.capabilities.maxLayers)Qo(new Error("Invalid number of layers."));else{var Ho=Eo[0];if(Ho.source){var $s=Ho.leftBounds||Ml,nu=Ho.rightBounds||El;if(So){var cu=Io.layer_;cu.source!==Ho.source&&(cu.source=Ho.source);for(var Gs=0;Gs<4;Gs++)cu.leftBounds[Gs]=$s[Gs],cu.rightBounds[Gs]=nu[Gs];return Io.wrapForFullscreen(Io.layer_.source),Io.updatePresent_(),void Oo()}if(Io.layer_={predistorted:Ho.predistorted,source:Ho.source,leftBounds:$s.slice(0),rightBounds:nu.slice(0)},Io.waitingForPresent_=!1,Io.layer_&&Io.layer_.source){var Ks=Io.wrapForFullscreen(Io.layer_.source),wu=function(){var $u=Xo();Io.isPresenting=Ks===$u,Io.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(Uu){console.error("screen.orientation.lock() failed due to",Uu.message)}),Io.waitingForPresent_=!1,Io.beginPresent_(),Oo()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Io.removeFullscreenWrapper(),Io.disableWakeLock(),Io.endPresent_(),Io.removeFullscreenListeners_()),Io.fireVRDisplayPresentChange_()},Bu=function(){Io.waitingForPresent_&&(Io.removeFullscreenWrapper(),Io.removeFullscreenListeners_(),Io.disableWakeLock(),Io.waitingForPresent_=!1,Io.isPresenting=!1,Qo(new Error("Unable to present.")))};Io.addFullscreenListeners_(Ks,wu,Bu),Jo(Ks)?(Io.enableWakeLock(),Io.waitingForPresent_=!0):(To()||No())&&(Io.enableWakeLock(),Io.isPresenting=!0,Io.beginPresent_(),Io.fireVRDisplayPresentChange_(),Oo())}Io.waitingForPresent_||To()||(Go(),Qo(new Error("Unable to present.")))}else Oo()}else Qo(new Error("VRDisplay is not capable of presenting."))})},qu.prototype.exitPresent=function(){var Eo=this.isPresenting,So=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(Io,Oo){Eo?(!Go()&&To()&&(So.endPresent_(),So.fireVRDisplayPresentChange_()),No()&&(So.removeFullscreenWrapper(),So.removeFullscreenListeners_(),So.endPresent_(),So.fireVRDisplayPresentChange_()),Io()):Oo(new Error("Was not presenting to VRDisplay."))})},qu.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},qu.prototype.fireVRDisplayPresentChange_=function(){var Eo=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});eo.dispatchEvent(Eo)},qu.prototype.fireVRDisplayConnect_=function(){var Eo=new CustomEvent("vrdisplayconnect",{detail:{display:this}});eo.dispatchEvent(Eo)},qu.prototype.addFullscreenListeners_=function(Eo,So,Io){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=Eo,this.fullscreenChangeHandler_=So,this.fullscreenErrorHandler_=Io,So&&(document.fullscreenEnabled?Eo.addEventListener("fullscreenchange",So,!1):document.webkitFullscreenEnabled?Eo.addEventListener("webkitfullscreenchange",So,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",So,!1):document.msFullscreenEnabled&&Eo.addEventListener("msfullscreenchange",So,!1)),Io&&(document.fullscreenEnabled?Eo.addEventListener("fullscreenerror",Io,!1):document.webkitFullscreenEnabled?Eo.addEventListener("webkitfullscreenerror",Io,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",Io,!1):document.msFullscreenEnabled&&Eo.addEventListener("msfullscreenerror",Io,!1))},qu.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var Eo=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var So=this.fullscreenChangeHandler_;Eo.removeEventListener("fullscreenchange",So,!1),Eo.removeEventListener("webkitfullscreenchange",So,!1),document.removeEventListener("mozfullscreenchange",So,!1),Eo.removeEventListener("msfullscreenchange",So,!1)}if(this.fullscreenErrorHandler_){var Io=this.fullscreenErrorHandler_;Eo.removeEventListener("fullscreenerror",Io,!1),Eo.removeEventListener("webkitfullscreenerror",Io,!1),document.removeEventListener("mozfullscreenerror",Io,!1),Eo.removeEventListener("msfullscreenerror",Io,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},qu.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},qu.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},qu.prototype.beginPresent_=function(){},qu.prototype.endPresent_=function(){},qu.prototype.submitFrame=function(Eo){},qu.prototype.getEyeParameters=function(Eo){return null};var dl={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Zu={LEFT:"left",RIGHT:"right"};function Ku(Eo){var So=qs({},dl);Eo=qs(So,Eo||{}),qu.call(this,{wakelock:Eo.MOBILE_WAKE_LOCK}),this.config=Eo,this.displayName="Cardboard VRDisplay",this.capabilities=new yl({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Bo(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Ws(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Xu(this.dpdb_.getDeviceParams(),Eo.ADDITIONAL_VIEWERS),this.viewerSelector_=new Du(Eo.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new Yo),To()&&eo.addEventListener("resize",this.onResize_.bind(this))}return Ku.prototype=Object.create(qu.prototype),Ku.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Ku.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Ku.prototype._getFieldOfView=function(Eo){var So;if(Eo==Zu.LEFT)So=this.deviceInfo_.getFieldOfViewLeftEye();else{if(Eo!=Zu.RIGHT)return console.error("Invalid eye provided: %s",Eo),null;So=this.deviceInfo_.getFieldOfViewRightEye()}return So},Ku.prototype._getEyeOffset=function(Eo){var So;if(Eo==Zu.LEFT)So=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(Eo!=Zu.RIGHT)return console.error("Invalid eye provided: %s",Eo),null;So=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return So},Ku.prototype.getEyeParameters=function(Eo){var So=this._getEyeOffset(Eo),Io=this._getFieldOfView(Eo),Oo={offset:So,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(Oo,"fieldOfView",{enumerable:!0,get:function(){return yu("VRFieldOfView","VRFrameData's projection matrices"),Io}}),Oo},Ku.prototype.onDeviceParamsUpdated_=function(Eo){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(Eo),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Ku.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Ku.prototype.beginPresent_=function(){var Eo=this.layer_.source.getContext("webgl");Eo||(Eo=this.layer_.source.getContext("experimental-webgl")),Eo||(Eo=this.layer_.source.getContext("webgl2")),Eo&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(Eo.canvas.width=Wo()*this.bufferScale_,Eo.canvas.height=Ko()*this.bufferScale_,this.cardboardUI_=new vu(Eo)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new vu(Eo)),this.distorter_=new lu(Eo,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(So){this.viewerSelector_.show(this.layer_.source.parentElement),So.stopPropagation(),So.preventDefault()}.bind(this),function(So){this.exitPresent(),So.stopPropagation(),So.preventDefault()}.bind(this)),this.rotateInstructions_&&($o()&&ga()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),eo.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),eo.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Ku.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),eo.removeEventListener("orientationchange",this.orientationHandler),eo.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Ku.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Ku.prototype.submitFrame=function(Eo){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var So=this.layer_.source.getContext("webgl");So||(So=this.layer_.source.getContext("experimental-webgl")),So||(So=this.layer_.source.getContext("webgl2"));var Io=So.canvas;Io.width==this.lastWidth&&Io.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=Io.width,this.lastHeight=Io.height,this.cardboardUI_.render()}},Ku.prototype.onOrientationChange_=function(Eo){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Ku.prototype.onResize_=function(Eo){if(this.layer_){var So=this.layer_.source.getContext("webgl");So||(So=this.layer_.source.getContext("experimental-webgl")),So||(So=this.layer_.source.getContext("webgl2"));var Io=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];So.canvas.setAttribute("style",Io.join("; ")+";"),su(So.canvas)}},Ku.prototype.onViewerChanged_=function(Eo){this.deviceInfo_.setViewer(Eo),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Ku.prototype.fireVRDisplayDeviceParamsChange_=function(){var Eo=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});eo.dispatchEvent(Eo)},Ku.VRFrameData=Pl,Ku.VRDisplay=qu,Ku})})),lo="0.10.12",co={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function fo(yo){this.config=so(so({},co),yo),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in to,this.native={},this.native.getVRDisplays=to.getVRDisplays,this.native.VRFrameData=eo.VRFrameData,this.native.VRDisplay=eo.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&oo())&&(this.enable(),this.getVRDisplays().then(function(vo){vo&&vo[0]&&vo[0].fireVRDisplayConnect_&&vo[0].fireVRDisplayConnect_()}))}fo.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(oo()){var yo=new uo({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(yo)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},fo.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var yo=this.native.VRFrameData,vo=new this.native.VRFrameData,Ao=this.native.VRDisplay.prototype.getFrameData;eo.VRDisplay.prototype.getFrameData=function(ho){ho instanceof yo?Ao.call(this,ho):(Ao.call(this,vo),ho.pose=vo.pose,ao(vo.leftProjectionMatrix,ho.leftProjectionMatrix),ao(vo.rightProjectionMatrix,ho.rightProjectionMatrix),ao(vo.leftViewMatrix,ho.leftViewMatrix),ao(vo.rightViewMatrix,ho.rightViewMatrix))}}to.getVRDisplays=this.getVRDisplays.bind(this),eo.VRDisplay=uo.VRDisplay,eo.VRFrameData=uo.VRFrameData},fo.prototype.getVRDisplays=function(){var yo=this;return this.config,this.hasNative?this.native.getVRDisplays.call(to).then(function(vo){return vo.length>0?vo:yo.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},fo.version=lo,fo.VRFrameData=uo.VRFrameData,fo.VRDisplay=uo.VRDisplay;var mo=Object.freeze({default:fo}),go=mo&&fo||mo;return ro!==void 0&&ro.window&&(ro.document||(ro.document=ro.window.document),ro.navigator||(ro.navigator=ro.window.navigator)),go}(typeof window!="undefined"?window:{screen:{width:512,height:512}},typeof navigator!="undefined"?navigator:{userAgent:"node"});function ss(eo,to){var ro,no,io,oo,ao=new r$3.Vector3,so=new r$3.Vector3,uo=null;"VRFrameData"in window&&(uo=new window.VRFrameData),typeof navigator!="undefined"&&navigator.getVRDisplays&&navigator.getVRDisplays().then(function(xo){no=xo,xo.length>0?ro=xo[0]:to&&to(new Error("HMD not available"))}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var lo=this,co=eo.getSize(new r$3.Vector2),fo=!1,mo=eo.getPixelRatio();this.getVRDisplay=function(){return ro},this.setVRDisplay=function(xo){ro=xo},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),no},this.setSize=function(xo,wo,bo){if(co=new r$3.Vector2(xo,wo),fo=bo,lo.isPresenting){var _o=ro.getEyeParameters("left");eo.setPixelRatio(1),eo.setSize(2*_o.renderWidth,_o.renderHeight,!1)}else eo.setPixelRatio(mo),eo.setSize(xo,wo,bo)};var go=eo.domElement,yo=[0,0,.5,1],vo=[.5,0,.5,1];function Ao(){var xo=lo.isPresenting;if(lo.isPresenting=ro!==void 0&&ro.isPresenting,lo.isPresenting){var wo=ro.getEyeParameters("left"),bo=wo.renderWidth,_o=wo.renderHeight;xo||(mo=eo.getPixelRatio(),co=eo.getSize(new r$3.Vector2),eo.setPixelRatio(1),eo.setSize(2*bo,_o,!1))}else xo&&(eo.setPixelRatio(mo),eo.setSize(co.width,co.height,fo))}window.addEventListener("vrdisplaypresentchange",Ao,!1),this.setFullScreen=function(xo){return new Promise(function(wo,bo){ro!==void 0?lo.isPresenting!==xo?xo?(ro.requestPresent([{source:go}]),wo()):(ro.exitPresent(),wo()):wo():bo(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(xo){return ro!==void 0?ro.requestAnimationFrame(xo):window.requestAnimationFrame(xo)},this.cancelAnimationFrame=function(xo){ro!==void 0?ro.cancelAnimationFrame(xo):window.cancelAnimationFrame(xo)},this.submitFrame=function(){ro!==void 0&&lo.isPresenting&&ro.submitFrame()},this.autoSubmitFrame=!0;var ho=new r$3.PerspectiveCamera;ho.layers.enable(1);var po=new r$3.PerspectiveCamera;function Mo(xo,wo,bo,_o){var To=Math.PI/180;return function(No,Po,Co,Do){Co=Co===void 0?.01:Co,Do=Do===void 0?1e4:Do;var zo=(Po=Po===void 0||Po)?-1:1,Ro=new r$3.Matrix4,Lo=Ro.elements,$o=function(jo){var Wo=2/(jo.leftTan+jo.rightTan),Ko=(jo.leftTan-jo.rightTan)*Wo*.5,Jo=2/(jo.upTan+jo.downTan);return{scale:[Wo,Jo],offset:[Ko,(jo.upTan-jo.downTan)*Jo*.5]}}(No);return Lo[0]=$o.scale[0],Lo[1]=0,Lo[2]=$o.offset[0]*zo,Lo[3]=0,Lo[4]=0,Lo[5]=$o.scale[1],Lo[6]=-$o.offset[1]*zo,Lo[7]=0,Lo[8]=0,Lo[9]=0,Lo[10]=Do/(Co-Do)*-zo,Lo[11]=Do*Co/(Co-Do),Lo[12]=0,Lo[13]=0,Lo[14]=zo,Lo[15]=0,Ro.transpose(),Ro}({upTan:Math.tan(xo.upDegrees*To),downTan:Math.tan(xo.downDegrees*To),leftTan:Math.tan(xo.leftDegrees*To),rightTan:Math.tan(xo.rightDegrees*To)},wo,bo,_o)}po.layers.enable(2),this.render=function(xo,wo){var bo,_o;if(ro&&lo.isPresenting){var To=xo.autoUpdate;To&&(xo.updateMatrixWorld(),xo.autoUpdate=!1);var No=ro.getEyeParameters("left"),Po=ro.getEyeParameters("right");ao.fromArray(No.offset),so.fromArray(Po.offset),Array.isArray(xo)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),xo=xo[0]);var Co,Do,zo=eo.getSize(new r$3.Vector2),Ro=ro.getLayers();if(Ro.length){var Lo=Ro[0];Co=Lo.leftBounds!==null&&((bo=Lo.leftBounds)===null||bo===void 0?void 0:bo.length)===4?Lo.leftBounds:yo,Do=Lo.rightBounds!==null&&((_o=Lo.rightBounds)===null||_o===void 0?void 0:_o.length)===4?Lo.rightBounds:vo}else Co=yo,Do=vo;io={x:Math.round(zo.width*Co[0]),y:Math.round(zo.height*Co[1]),width:Math.round(zo.width*Co[2]),height:Math.round(zo.height*Co[3])},oo={x:Math.round(zo.width*Do[0]),y:Math.round(zo.height*Do[1]),width:Math.round(zo.width*Do[2]),height:Math.round(zo.height*Do[3])},eo.setScissorTest(!0),eo.autoClear&&eo.clear(),wo.parent===null&&wo.updateMatrixWorld(),wo.matrixWorld.decompose(ho.position,ho.quaternion,ho.scale),wo.matrixWorld.decompose(po.position,po.quaternion,po.scale);var $o=this.scale;return ho.translateOnAxis(ao,$o),po.translateOnAxis(so,$o),ro.getFrameData&&uo?(ro.depthNear=wo.near,ro.depthFar=wo.far,ro.getFrameData(uo),ho.projectionMatrix.elements=[].slice.call(uo.leftProjectionMatrix),po.projectionMatrix.elements=[].slice.call(uo.rightProjectionMatrix)):(ho.projectionMatrix=Mo(No.fieldOfView,!0,wo.near,wo.far),po.projectionMatrix=Mo(Po.fieldOfView,!0,wo.near,wo.far)),eo.setViewport(io.x,io.y,io.width,io.height),eo.setScissor(io.x,io.y,io.width,io.height),eo.render(xo,ho),eo.setViewport(oo.x,oo.y,oo.width,oo.height),eo.setScissor(oo.x,oo.y,oo.width,oo.height),eo.render(xo,po),eo.setViewport(0,0,zo.width,zo.height),eo.setScissorTest(!1),To&&(xo.autoUpdate=!0),void(lo.autoSubmitFrame&&lo.submitFrame())}eo.render(xo,wo)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",Ao,!1)}}var os=new r$3.SphereBufferGeometry(.1,32,32);function as(eo,to){eo.setValues({color:to})}var us=function(eo){function to(){var ro=eo.call(this)||this,no=new r$3.MeshBasicMaterial({color:8900346,opacity:.5,transparent:!0});return ro.mesh=new r$3.Mesh(os,no),ro.current=!1,ro.add(ro.mesh),ro.loading=!1,ro.disabled=!1,ro.progress=0,ro.opacity=1,ro.needsRender=!0,ro}return t$2.__extends(to,eo),to.prototype.draw=function(){this.progress>0?as(this.mesh.material,16776960):this.current?as(this.mesh.material,65280):as(this.mesh.material,8900346)},to.prototype.setDisabled=function(ro){this.disabled!==ro&&(this.disabled=ro)},to.prototype.setLoading=function(ro){this.loading!==ro&&(this.loading=ro)},to.prototype.setProgress=function(ro){this.progress!==ro&&(this.progress=ro)},to.prototype.setOpacity=function(ro){this.opacity!==ro&&(this.opacity=ro)},to.prototype.setCurrent=function(ro){this.current!==ro&&(this.current=ro,this.draw())},to.prototype.dispose=function(){this.remove(this.mesh),Array.isArray(this.mesh.material)?this.mesh.material.forEach(function(ro){return ro.dispose()}):this.mesh.material.dispose()},to}(r$3.Object3D),cs=null,As=[{zh:"1. \u8FDB\u5165: \u5C06\u624B\u673A\u6A2A\u5C4F\u653E\u5165VR\u773C\u955C\u4E2D",en:"1. Enter: Put your phone<br/> horizontally into the VR glasses",ja:"1. \u5165\u529B\uFF1A\u96FB\u8A71\u3092VR\u30E1\u30AC\u30CD\u306B\u6C34\u5E73\u306B\u7F6E\u304D\u307E\u3059"},{zh:"2. \u524D\u8FDB: \u89C6\u89D2\u4E2D\u5FC3\u5BF9\u51C6\u84DD\u70B9, \u76F4\u81F3\u53D8\u7EFF",en:"2. Forward: align the center of the viewing<br/> angle with the blue dot, until it turns green",ja:"2. \u524D\u65B9\uFF1A\u7DD1\u8272\u306B\u5909\u308F\u308B\u307E\u3067\u3001<br/>\u8996\u91CE\u89D2\u306E\u4E2D\u5FC3\u3092\u9752\u3044\u70B9\u306B\u5408\u308F\u305B\u307E\u3059"},{zh:"3. \u9000\u51FA: \u5C06\u624B\u673A\u7AD6\u5C4F\u518D\u89E6\u78B0\u5C4F\u5E55",en:"3. Exit: Put the phone in portrait<br/> orientation and then touch the screen",ja:"3. \u7D42\u4E86\uFF1A\u96FB\u8A71\u3092\u7E26\u5411\u304D\u306B\u3057\u3066\u304B\u3089<br/>\u753B\u9762\u306B\u30BF\u30C3\u30C1\u3057\u307E\u3059"}],ls=function(eo){function to(ro){var no=this;Vi(cs)&&(cs=new rs(ro.webvrPolyfillConfig||{}));var io=to.parseArgs(ro);return(no=eo.call(this,io)||this).effect=new ss(no.renderer),no.effect.setSize(no.element.offsetWidth,no.element.offsetHeight),no.effect.isPresenting=!0,no.initHelper(no.element),no}return t$2.__extends(to,eo),to.parseArgs=function(ro){var no=t$2.__assign(t$2.__assign({},ro),{maxLatitude:Math.PI/2,minLatitude:-Math.PI/2});return eo.parseArgs.call(this,no)},to.initAnimationEndPose=function(ro){var no=this.parseArgs(ro);return eo.initAnimationEndPose.call(this,no)},to.prototype.destroy=function(){eo.prototype.destroy.call(this),this.destroyHelper();for(var ro=0,no=this.panoMeshes;ro<no.length;ro++){var io=no[ro];this.helper.remove(io),io.dispose()}this.panoMeshes.length=0},to.prototype.isReady=function(){return!1},to.prototype.updateRenderSize=function(){this.effect.isPresenting=!1,this.effect.setSize(this.element.offsetWidth,this.element.offsetHeight),this.effect.isPresenting=!0,this.needsRender=!0,this.setHelperElementSize()},to.prototype.updatePanoMeshes=function(){var ro=this;this.panoMeshes.forEach(function(ao){ro.helper.remove(ao),ao.dispose()}),this.panoMeshes.length=0;for(var no=0;no<this.work.observers.length;no++){var io=this.work.observers[no],oo=new us;oo.name="panoSphere_".concat(this.work.workCode,"_").concat(no),oo.position.copy(io.position),oo.needsRender=!0,this.helper.add(oo),this.panoMeshes[no]=oo}},to.prototype.updateTime=function(ro,no){var io,oo;if(!this.destroyed){this.needsRender=!0,this.intersect(ro);var ao={},so={};if(this.locationMotion.ended===!1){this.locationMotion.update(ro);var uo=this.locationMotion.getKeyFrameSegment(ro),lo=uo[0],co=uo[1],fo=this.panoResourceFromLocationMotionKeyframe(lo),mo=this.panoResourceFromLocationMotionKeyframe(co),go=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),yo=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),vo=fo.position,Ao=mo.position,ho=this.locationMotion.value.count-co.value.count+1;ao.modelAlpha=this.locationMotion.value.modelAlpha,ao.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),ao.useBlackTransition=mo.effect==="instant",mo.panoPicture&&(ho<1?fo.panoPicture&&(ao.pano0=fo.panoPicture):ao.pano0=mo.panoPicture,ao.pano1=mo.panoPicture),mo.effect==="fade"&&(ao.pano0&&fo.panoPicture&&(ao.pano0={map:ao.pano0.map,luminanceMap:ao.pano0.luminanceMap,matrix:fo.panoPicture.matrix.clone().setPosition(mo.position)}),vo.copy(Ao)),ao.progress=ho,so.distance=this.locationMotion.value.distance,so.offset=new r$3.Vector3(vo.x+(Ao.x-vo.x)*ho,vo.y+(Ao.y-vo.y)*ho,vo.z+(Ao.z-vo.z)*ho);for(var po=[],Mo=[],xo=0,wo=this.locationMotion.keyframes;xo<wo.length;xo++){var bo=(jo=wo[xo]).key,_o=jo.progress;bo!==void 0&&(po.push(bo),_o>=this.locationMotion.progress&&Mo.push(bo))}for(var To=0,No=Object.keys(this.panoResources);To<No.length;To++){var Po=No[To];if(!(Mo.indexOf(Po)>=0)){var Co=this.panoResources[Po];if(Co.panoPicture){var Do=Co.panoPicture.map;if(Do){if(Do===((io=ao.pano0)===null||io===void 0?void 0:io.map)||Do===((oo=ao.pano1)===null||oo===void 0?void 0:oo.map))continue;Do.dispose(),Co.panoPicture=null}}po.indexOf(Po)>=0||delete this.panoResources[Po]}}this.currentPanoIndex=ho<.5?fo.panoIndex:mo.panoIndex,this.emit("movingToPano",yo.panoIndex,go.panoIndex,this.locationMotion.progress)}for(var zo=this.work.observers[this.currentPanoIndex].visibleNodes.concat(this.currentPanoIndex),Ro=[],Lo=0,$o=this.locationMotion.keyframes;Lo<$o.length;Lo++){var jo;(jo=$o[Lo]).progress>=this.locationMotion.progress&&Ro.push(this.panoResourceFromLocationMotionKeyframe(jo).panoIndex)}for(var Wo=0;Wo<this.work.observers.length;Wo++){var Ko=this.work.observers[Wo],Jo=this.panoMeshes[Wo];if(Jo.visible=!0,Ro.indexOf(Wo)>=0)Jo.visible=!1;else if(Ko.loadable||Ko.active)if(zo.indexOf(Wo)===-1)Jo.visible=!1;else{Jo.visible=!0;var Go=Jo.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Go<.01?Jo.setOpacity(0):Jo.setOpacity(cn(1.5/Go,0,1))}else Jo.visible=!0}dr(ao)===!1&&(this.model.setMaterial(ao),this.boundingMesh.setMaterial(ao)),so.offset&&this.camera.position.copy(so.offset);var Xo=this.camera.pose.longitude,va=this.camera.pose.latitude,tu=this.effect.getVRDisplay();if(tu){var Zs=tu.getPose();Zs&&Zs.orientation&&this.camera.quaternion.fromArray(Zs.orientation)}this.camera.updateMatrixWorld(),this.camera.computePose(),Xo===this.camera.pose.longitude&&va===this.camera.pose.latitude||(this.cameraMotion.set(ni(this.camera.pose,["longitude","latitude"]),0).catch(Pe),this.emit("cameraDirectionUpdate",ni(this.camera.pose,["longitude","latitude"]),!0),this.emit("cameraUpdate",gr(ni(this.camera.pose,["longitude","latitude","fov","offset"])),!0))}},to.prototype.render=function(){this.effect.render(this.scene,this.camera)},to.prototype.setCamera=function(ro){},to.prototype.initHelper=function(ro){for(var no=this,io="five_webvr_helper_"+Xn(),oo=1,ao=document.getElementsByTagName("meta"),so=0;so<ao.length;so++){var uo=ao[so];if(uo.getAttribute("name")==="viewport"){var lo=(uo.getAttribute("content")||"").match(/initial\-scale\=([\d|\.]+)/);lo&&(oo=Number(lo[1])),isNaN(oo)&&(oo=1)}}var co=document.createElement("style");co.setAttribute("type","text/css");var fo,mo,go=(mo=function(Ao){return Math.floor(Ao*oo)+"px"},`
    .`.concat(fo=io,`{
      font-family:sans-serif;
      background:#394043;color:#ffffff;
      position:absolute;display:none;
      -webkit-tap-highlight-color:rgba(0,0,0,0);
    }
    .`).concat(fo,` img{
      position:absolute;top:50%;left:50%;
      -webkit-transform:translate(-50%,-100%);
      -moz-transform:translate(-50%,-100%);
      transform:translate(-50%,-100%);
      pointer-events:none;
      width:`).concat(mo(132),`;
      height:`).concat(mo(162),`;
    }
    .`).concat(fo,` ol{
      position:absolute;top:50%;left:50%;
      -webkit-transform:translate(-50%,0);
      -moz-transform:translate(-50%,0);
      transform:translate(-50%,0);
      pointer-events:none;
      margin-top:`).concat(mo(38),`;
      font-size:`).concat(mo(16),`;
      line-height:`).concat(mo(30),`;
    }
    .`).concat(fo,` li{
      list-style-type:none;
      white-space:nowrap;
      position:relative;
      padding-left:`).concat(mo(14),`;
      margin-bottom:`).concat(mo(12),`;
    }
    @media screen and (orientation: portrait){
      .`).concat(fo,`{display: block!important}
    }
  `));"styleSheet"in co?co.styleSheet.cssText=go:co.appendChild(document.createTextNode(go));var yo=this.helperElement=document.createElement("div");yo.className=io,yo.innerHTML=`
      <img src="`.concat("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTMycHgiIGhlaWdodD0iMTYycHgiIHZpZXdCb3g9IjAgMCAxMzIgMTYyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0Ni4xICg0NDQ2MykgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cG9seWdvbiBpZD0icGF0aC0xIiBwb2ludHM9IjY1Ljk4NTM0MjMgOTMuMTg5NjU1MiAwIDkzLjE4OTY1NTIgMCAwLjI0NzE1NTE3MiAxMzEuOTcwNjg1IDAuMjQ3MTU1MTcyIDEzMS45NzA2ODUgOTMuMTg5NjU1MiI+PC9wb2x5Z29uPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWKoOi9vemhtS1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE4LjAwMDAwMCwgLTE4NC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTguMDAwMDAwLCAxODQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iUGFnZS0xIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iaXBob25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNS4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi4yMDIzNzg3LDMyLjI2OTE1MzIgQzYyLjIwODU3NTQsMzQuNDI4MDQyOSA2MC42ODkzNDU5LDM3LjA2MDgzNTEgNTguODA3NjA4MiwzOC4xNDI4NjEgTDU1Ljg3MDM2MjMsMzkuODQwMjM3NyBMNTUuMTc5NDI3OSwzOC42Mzc0MTMgTDU1LjEzNTAxOCwyMi4xNTMwMzY0IEw1Ni4zMTM0Mjc5LDIyLjE0Njg0MTYgQzU2LjMxMzQyNzksMjMuNDk1MjQ0MiA1Ny4yNjk3ODg1LDI0LjAzOTM1NDUgNTguNDQ3MTY1NiwyMy4zNTU4NjEgQzU5LjYxODM0NTksMjIuNjc4NTYyMyA2MC41NjIzMTMxLDIxLjAzOTAwMzkgNjAuNTYyMzEzMSwxOS42OTY3OTYxIEw2Mi4xNjQxNjU2LDE5LjY5MDYwMTMgTDYyLjIwMjM3ODcsMzIuMjY5MTUzMiBaIiBpZD0iRmlsbC0xIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi4xMjAxNjg5LDUuMjYzNjIyNzMgTDYyLjE2MzU0NTksMTkuNjkxMzI0IEw2MC41NjI3MjYyLDE5LjY5NjQ4NjQgQzYwLjU1NTQ5NjcsMTguMzQxODg5IDU5LjYwNTMzMjgsMTcuNzk3Nzc4NiA1OC40Mjc5NTU3LDE4LjQ3NTA3NzMgQzU3LjI1Njc3NTQsMTkuMTUyMzc2IDU2LjMwNjYxMTUsMjAuNzk4MTI5MiA1Ni4zMTI4MDgyLDIyLjE0NzU2NDMgTDU1LjEzNTQzMTEsMjIuMTUyNzI2NiBMNTUuMDkxMDIxMyw3LjAxMDU1Nzc5IEw1NC4zOTQ5MjMsNS44MDc3MzMxMiBMNTguNzA2ODA4MiwzLjMxOTQ4NjM2IEM2MC41ODc1MTMxLDIuMjMxMjY1NTggNjIuMTIwMTY4OSwzLjEwNDczMzEyIDYyLjEyMDE2ODksNS4yNjM2MjI3MyIgaWQ9IkZpbGwtMyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjAuMTEyNjM3NywxOS45NTYxNTE5IEM2MC4xMTI2Mzc3LDIxLjAxMzM5ODcgNTkuMzY0OSwyMi4zMTEyMTA0IDU4LjQ0MDU1NTcsMjIuODQyOTMxMiBDNTcuNTE2MjExNSwyMy4zNzU2ODQ0IDU2Ljc2MjI3NywyMi45NDUxNDU1IDU2Ljc2MjI3NywyMS44ODY4NjYyIEM1Ni43NTYwODAzLDIwLjgyMzQyNDcgNTcuNTAzODE4LDE5LjUyNTYxMyA1OC40MzQzNTksMTguOTkzODkyMiBDNTkuMzUyNTA2NiwxOC40NjIxNzE0IDYwLjEwNjQ0MSwxOC44OTI3MTA0IDYwLjExMjYzNzcsMTkuOTU2MTUxOSIgaWQ9IkZpbGwtNyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS4wMTA4NTkwMiw1My4yOTE1MzQ0IEw4Ljk5MTIzNjA3LDQ1LjYxOTI2ODIgQzguOTkxMjM2MDcsNDUuNDc0NzIyNyA4Ljg5MDAyMjk1LDQ1LjQxNjkwNDUgOC43NjQwMjI5NSw0NS40ODYwNzk5IEM4LjYzNjk5MDE2LDQ1LjU2MzUxNDkgOC41NDE5NzM3Nyw0NS43MzM4NzIxIDguNTQxOTczNzcsNDUuODc4NDE3NSBMOC41NjA1NjM5Myw1My41NTE3MTYyIEM4LjU2MDU2MzkzLDUzLjY5MTA5OTQgOC42NjI4MDk4NCw1My43NDY4NTI2IDguNzgyNjEzMTEsNTMuNjc3Njc3MyBDOC45MDk2NDU5LDUzLjYwMjMwNzEgOS4wMTA4NTkwMiw1My40MzE5NSA5LjAxMDg1OTAyLDUzLjI5MTUzNDQgTDkuMDEwODU5MDIsNTMuMjkxNTM0NCBaIE01NS4xNzk1MzExLDM4LjYzNzcyMjcgTDU1Ljg3MDQ2NTYsMzkuODQwNTQ3NCBMOS4xODc0NjU1Nyw2Ni43ODE3NTUyIEM3LjMwNzc5MzQ0LDY3Ljg3MTAwODQgNS43NzUxMzc3LDY2Ljk5NjUwODQgNS43NzUxMzc3LDY0LjgzODY1MTMgTDUuNjkyNTE0NzUsMzcuODMyMzk4MSBDNS42ODYzMTgwMywzNS42NzU1NzM0IDcuMjA1NTQ3NTQsMzMuMDQxNzQ4NyA5LjA4NzI4NTI1LDMxLjk1ODY5MDMgTDU0LjM5NDYxMzEsNS44MDgzNTI2IEw1NS4wOTA3MTE1LDcuMDExMTc3MjcgTDExLjg5ODUzMTEsMzEuOTM5MDczNCBMMTEuOTg3MzUwOCw2My41NjU2MTg4IEw1NS4xNzk1MzExLDM4LjYzNzcyMjcgWiIgaWQ9IkZpbGwtOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTUuMzI1ODc3LDAuMDAwNTE2MjMzNzY2IEM1NC44NjYyODY5LDAuMDAwNTE2MjMzNzY2IDU0LjM0Njc5NTEsMC4xNTAyMjQwMjYgNTMuNzk4Mzg1MiwwLjQ2NzE5MTU1OCBMNC4xNzkxNzIxMywyOS4xMDU3NzYgQzIuMjk5NSwzMC4xOTA4OTk0IDAuNzgwMjcwNDkyLDMyLjgyMTYyNjYgMC43ODU0MzQ0MjYsMzQuOTgxNTQ4NyBMMC44NjI4OTM0NDMsNjEuOTg3ODAxOSBDMC44NjU5OTE4MDMsNjMuMDYwNTM1NyAxLjI0Mzk5MTgsNjMuODE1MjY5NSAxLjg1NTQwMTY0LDY0LjE2OTQwNTggTDYuNzY0MjM3Nyw2Ny4wMjIxMTM2IEM2LjE1Mzg2MDY2LDY2LjY2Njk0NDggNS43NzQ4Mjc4Nyw2NS45MTIyMTEgNS43NzE3Mjk1MSw2NC44Mzk0NzczIEw1LjY5NTMwMzI4LDM3LjgzMzIyNCBDNS42ODkxMDY1NiwzNS42NzQzMzQ0IDcuMjA4MzM2MDcsMzMuMDQyNTc0NyA5LjA4ODAwODIsMzEuOTU3NDUxMyBMNTguNzA3MjIxMywzLjMxODg2Njg4IEM1OS4yNTY2NjM5LDMuMDAxODk5MzUgNTkuNzc1MTIzLDIuODUyMTkxNTYgNjAuMjM0NzEzMSwyLjg1MjE5MTU2IEM2MC41NjgzMDMzLDIuODUyMTkxNTYgNjAuODY5ODc3LDIuOTMwNjU5MDkgNjEuMTMwMTM5MywzLjA4MTM5OTM1IEw1Ni4yMjAyNzA1LDAuMjMwNzU2NDk0IEM1NS45NjEwNDEsMC4wNzg5ODM3NjYyIDU1LjY1ODQzNDQsMC4wMDA1MTYyMzM3NjYgNTUuMzI1ODc3LDAuMDAwNTE2MjMzNzY2IE01NS4zMjU4NzcsMC42MzM0MTg4MzEgQzU1LjU0Mzc5NTEsMC42MzM0MTg4MzEgNTUuNzM3OTU5LDAuNjgxOTQ0ODA1IDU1LjkwMjE3MjEsMC43NzY5MzE4MTggTDU4Ljg5NjIyMTMsMi41MTY2Mzk2MSBDNTguNzI4OTA5OCwyLjU4Nzg3OTg3IDU4LjU2MDU2NTYsMi42NzM1NzQ2OCA1OC4zOTExODg1LDIuNzcxNjU5MDkgTDguNzcxOTc1NDEsMzEuNDEwMjQzNSBDNi42ODQ3MTMxMSwzMi42MTQxMDA2IDUuMDU0OTc1NDEsMzUuNDM2ODY2OSA1LjA2MjIwNDkyLDM3LjgzNTI4OSBMNS4xMzg2MzExNSw2NC44NDE1NDIyIEM1LjEzODYzMTE1LDY1LjAyMTE5MTYgNS4xNDg5NTkwMiw2NS4xOTU2Nzg2IDUuMTY3NTQ5MTgsNjUuMzYyOTM4MyBMMi4xNzM1LDYzLjYyMzIzMDUgQzEuNzM4Njk2NzIsNjMuMzcwMjc2IDEuNDk4MDU3MzgsNjIuNzg3OTY0MyAxLjQ5NTk5MTgsNjEuOTg1NzM3IEwxLjQxOTU2NTU3LDM0Ljk3OTQ4MzggQzEuNDEzMzY4ODUsMzMuMDU5MDk0MiAyLjgyMzEyMjk1LDMwLjYxOTM3MzQgNC40OTUyMDQ5MiwyOS42NTQwMTYyIEw1NC4xMTU0NTA4LDEuMDE0Mzk5MzUgQzU0LjU0ODE4ODUsMC43NjU1NzQ2NzUgNTQuOTY2NDY3MiwwLjYzMzQxODgzMSA1NS4zMjU4NzcsMC42MzM0MTg4MzEiIGlkPSJGaWxsLTM1Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjA4ODUyNDU5LDMyLjI3NDIxMjMgQzkuMDMzNzg2ODksMzIuMjc0MjEyMyA4Ljk4MDA4MTk3LDMyLjI1OTc1NzggOC45Mjk0NzU0MSwzMi4yMzE4ODEyIEw0LjM4OTM0NDI2LDI5LjU5MzkyNjYgQzQuMjM3NTI0NTksMjkuNTA2MTY2OSA0LjE4NTg4NTI1LDI5LjMxMjA2MyA0LjI3MzY3MjEzLDI5LjE2MTMyMjcgQzQuMzYyNDkxOCwyOS4wMDk1NSA0LjU1NjY1NTc0LDI4Ljk1OTk5MTYgNC43MDc0NDI2MiwyOS4wNDY3MTg4IEw5LjI0NzU3Mzc3LDMxLjY4NDY3MzQgQzkuMzk4MzYwNjYsMzEuNzcyNDMzMSA5LjQ1LDMxLjk2NTUwNDUgOS4zNjIyMTMxMSwzMi4xMTcyNzczIEM5LjMwMzM0NDI2LDMyLjIxNzQyNjYgOS4xOTY5NjcyMSwzMi4yNzQyMTIzIDkuMDg4NTI0NTksMzIuMjc0MjEyMyIgaWQ9IkZpbGwtMzciPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTU4LjcwNzYzNDQsMy42MzUzMTgxOCBDNTguNjUyODk2NywzLjYzNTMxODE4IDU4LjU5OTE5MTgsMy42MjE4OTYxIDU4LjU0ODU4NTIsMy41OTI5ODcwMSBMNTMuOTY5MjA4MiwwLjkzMjMxODE4MiBDNTMuODE4NDIxMywwLjg0NDU1ODQ0MiA1My43NjY3ODIsMC42NTA0NTQ1NDUgNTMuODU0NTY4OSwwLjQ5OTcxNDI4NiBDNTMuOTQyMzU1NywwLjM0NjkwOTA5MSA1NC4xMzY1MTk3LDAuMjk4MzgzMTE3IDU0LjI4NzMwNjYsMC4zODUxMTAzOSBMNTguODY2NjgzNiwzLjA0NTc3OTIyIEM1OS4wMTc0NzA1LDMuMTMzNTM4OTYgNTkuMDY5MTA5OCwzLjMyNjYxMDM5IDU4Ljk4MTMyMywzLjQ3ODM4MzEyIEM1OC45MjI0NTQxLDMuNTc5NTY0OTQgNTguODE2MDc3LDMuNjM1MzE4MTggNTguNzA3NjM0NCwzLjYzNTMxODE4IiBpZD0iRmlsbC0zOSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy4zMjA5MjYyMyw2My4zMzk5MjE0IEMyLjc5NjI3MDQ5LDYzLjMzOTkyMTQgMi4zNzA3NjIzLDYyLjkxNTU3NzMgMi4zNzA3NjIzLDYyLjM5MDA1MTMgTDIuMzcwNzYyMyw1OC4xMzAwOTAzIEMyLjM3MDc2MjMsNTcuNjA0NTY0MyAyLjc5NjI3MDQ5LDU3LjE4MDIyMDEgMy4zMjA5MjYyMyw1Ny4xODAyMjAxIEMzLjg0NTU4MTk3LDU3LjE4MDIyMDEgNC4yNzAwNTczOCw1Ny42MDQ1NjQzIDQuMjcwMDU3MzgsNTguMTMwMDkwMyBMNC4yNzAwNTczOCw2Mi4zOTAwNTEzIEM0LjI3MDA1NzM4LDYyLjkxNTU3NzMgMy44NDU1ODE5Nyw2My4zMzk5MjE0IDMuMzIwOTI2MjMsNjMuMzM5OTIxNCIgaWQ9IkZpbGwtNDEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNjguMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbWFzaz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkNsaXAtNDYiPjwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc5Ljg2NTUwNjcsNTEuOTU3Njg5NyBDODAuMzMyNzcwNiw1MC4yNzIxNzI0IDgxLjQ3MTM3MTgsNDguNjk5MjkzMSA4Mi43NjcwNzczLDQ3Ljk1MDUzNDUgQzgzLjM3MDM5MDIsNDcuNjAyMDg2MiA4My45NDIxMjAyLDQ3LjQ3OTcyNDEgODQuMzM4OTMwMSw0Ny42MTUwNTE3IEM4NC42MTI2NDc5LDQ3LjcwNzQzMSA4NC44MTgzNDExLDQ3LjkyNjIyNDEgODQuOTY3MzQ3Miw0OC4yODQzOTY2IEw4OC41NTQwMjIxLDU2LjkxOTQzMSBDODguNTYzNzM5OSw1Ni45NDEzMTAzIDg4LjU3NjY5NjksNTYuOTYwNzU4NiA4OC41ODcyMjQ1LDU2Ljk4MTAxNzIgQzg4LjU5Nzc1MjEsNTcuMDAwNDY1NSA4OC42MDU4NTAzLDU3LjAxOTkxMzggODguNjE3OTk3NSw1Ny4wMzg1NTE3IEM4OC42MzUwMDM3LDU3LjA2NDQ4MjggODguNjU1MjQ5MSw1Ny4wODcxNzI0IDg4LjY3NDY4NDcsNTcuMTA5ODYyMSBDODguNjg1MjEyMyw1Ny4xMjM2Mzc5IDg4LjY5NDkzMDEsNTcuMTM4MjI0MSA4OC43MDYyNjc1LDU3LjE0OTU2OSBDODguNzMyMTgxNiw1Ny4xNzYzMTAzIDg4Ljc2MDUyNTIsNTcuMTk5ODEwMyA4OC43ODk2Nzg1LDU3LjIyMTY4OTcgQzg4Ljc5Nzc3NjcsNTcuMjI4MTcyNCA4OC44MDUwNjUsNTcuMjM1NDY1NSA4OC44MTMxNjMyLDU3LjI0MTk0ODMgQzg5LjAwNzUxOSw1Ny4zNzgwODYyIDg5LjI2MjYxMSw1Ny40MjEwMzQ1IDg5LjQ5OTg4NzEsNTcuMzMyNzA2OSBMODkuODMxMTAxOCw1Ny4yMDc5MTM4IEw5MC4wNzQ4NTY0LDU3LjExODc3NTkgQzkwLjIxMDkwNTUsNTcuMDY4NTM0NSA5MC4zNDc3NjQ0LDU3LjAxODI5MzEgOTAuNDg1NDMzMSw1Ni45Njk2NzI0IEM5MC43ODY2ODQ3LDU2Ljg2MTg5NjYgOTEuMDkwMzY1Niw1Ni43NTk3OTMxIDkxLjM5NDA0NjYsNTYuNjU3Njg5NyBMOTIuMzY1MDE2LDU2LjM0MTY1NTIgQzkyLjgwMjMxNjYsNTYuMjAzMDg2MiA5My4yNDA0MjcsNTYuMDY4NTY5IDkzLjY4MjU4NjUsNTUuOTQwNTM0NSBDOTMuODUxMDI4Miw1NS44OTE5MTM4IDk0LjAxOTQ2OTksNTUuODQ0OTEzOCA5NC4xODc5MTE3LDU1Ljc5NjI5MzEgTDk0LjI3OTQyMDksNTUuNzcxMTcyNCBDOTQuNjg0MzI4OCw1NS42NTc3MjQxIDk1LjA5MDA0NjYsNTUuNTQ5OTQ4MyA5NS40OTczODQsNTUuNDQ2MjI0MSBMOTUuNjA2NzA5Miw1NS40MTcwNTE3IEM5NS43NjMwMDM3LDU1LjM3NjUzNDUgOTUuOTIwMTA4LDU1LjMzNjAxNzIgOTYuMDc3MjEyMyw1NS4yOTc5MzEgQzk2LjU2NjM0MTEsNTUuMTc3MTg5NyA5Ny4wNTU0Njk5LDU1LjA2Mzc0MTQgOTcuNTQ2MjE4NCw1NC45NTUxNTUyIEw5Ny44NTM5NDg1LDU0Ljg4NTQ2NTUgQzk4LjQ0NDMwNDMsNTQuNzU5MDUxNyA5OS4wMzcwODk2LDU0LjY0MjM2MjEgOTkuNjI3NDQ1NCw1NC41MzM3NzU5IEwxMDAuMDIxMDE2LDU0LjQ2NjUxNzIgQzEwMC42MTU0MjEsNTQuMzYxMTcyNCAxMDEuMjA5MDE2LDU0LjI2NjM2MjEgMTAxLjgwNDIzMSw1NC4xNzk2NTUyIEwxMDIuMjY1MDE2LDU0LjExMjM5NjYgQzEwMi45NjA2NDgsNTQuMDE2Nzc1OSAxMDMuNjQ3MzcyLDUzLjkzNDEyMDcgMTA0LjMwNTc1Miw1My44NjYwNTE3IEwxMDQuODM2MTgyLDUzLjgxNzQzMSBDMTA1LjIyNjUxMyw1My43ODE3NzU5IDEwNS42MTUyMjUsNTMuNzQ3NzQxNCAxMDYuMDA0NzQ2LDUzLjcyMDE4OTcgQzEwNi4yMTQ0ODgsNTMuNzA0NzkzMSAxMDYuNDIxODAxLDUzLjY5MjYzNzkgMTA2LjYzMDczNCw1My42Nzk2NzI0IEMxMDcuMDAwMDEsNTMuNjU3NzkzMSAxMDcuMzY2ODU2LDUzLjYzODM0NDggMTA3LjczNTMyMyw1My42MjM3NTg2IEMxMDcuOTUyMzUzLDUzLjYxNDg0NDggMTA4LjE2OTM4NCw1My42MDUxMjA3IDEwOC4zODU2MDUsNTMuNTk4NjM3OSBDMTA4LjY0Nzk4NSw1My41OTIxNTUyIDEwOC45MTAzNjYsNTMuNTg3MjkzMSAxMDkuMTczNTU2LDUzLjU4NDA1MTcgQzEwOS42NzgwNzEsNTMuNTc1OTQ4MyAxMTAuMTc4NTM3LDUzLjU3Njc1ODYgMTEwLjY4MDYyMyw1My41ODQ4NjIxIEwxMTAuNzY0MDM0LDUzLjU4NTY3MjQgQzExMC45ODE4NzUsNTMuNTg4OTEzOCAxMTEuMTk5NzE1LDUzLjU5MjE1NTIgMTExLjQxNTEyNiw1My41OTc4Mjc2IEMxMTEuNjI4MTA4LDUzLjYwNTEyMDcgMTExLjg0MDI4LDUzLjYxNDg0NDggMTEyLjA1MjQ1Miw1My42MjM3NTg2IEMxMTIuMzE0MDIyLDUzLjYzNDI5MzEgMTEyLjU3NDc4Myw1My42NDcyNTg2IDExMi44MzQ3MzQsNTMuNjYyNjU1MiBDMTEzLjA0NDQ3Niw1My42NzQ4MTAzIDExMy4yNTQyMTgsNTMuNjg5Mzk2NiAxMTMuNDYzOTYxLDUzLjcwNDc5MzEgQzExMy43MjQ3MjEsNTMuNzI0MjQxNCAxMTMuOTg1NDgyLDUzLjc0NDUgMTE0LjI0MzgxMyw1My43NjcxODk3IEMxMTQuNDMzMzEsNTMuNzg1MDE3MiAxMTQuNjIxOTk4LDUzLjgwMjg0NDggMTE0LjgwOTA2NSw1My44MjIyOTMxIEMxMTUuMDczODc1LDUzLjg0OTAzNDUgMTE1LjMzNjI1NSw1My44Nzk4Mjc2IDExNS41OTYyMDYsNTMuOTExNDMxIEMxMTUuNzgwMDM0LDUzLjkzMzMxMDMgMTE1Ljk2MzA1Myw1My45NTYgMTE2LjE0NDQ1Miw1My45ODAzMTAzIEMxMTYuNDEyNTAxLDU0LjAxNjc3NTkgMTE2LjY3ODEyLDU0LjA1NzI5MzEgMTE2Ljk0MTMxLDU0LjA5ODYyMDcgTDExNy4wOTExMjYsNTQuMTIxMzEwMyBDMTE3LjIxMDE2OSw1NC4xMzkxMzc5IDExNy4zMjY3ODMsNTQuMTU3Nzc1OSAxMTcuNDQyNTg3LDU0LjE3NjQxMzggQzExNy43MzA4ODEsNTQuMjI1ODQ0OCAxMTguMDE1MTI2LDU0LjI3OTMyNzYgMTE4LjMwMDk5MSw1NC4zMzUyNDE0IEwxMTguNDQ2NzU4LDU0LjM2MTk4MjggQzExOC41MzUwMjgsNTQuMzc4MTg5NyAxMTguNjIzMjk4LDU0LjM5NTIwNjkgMTE4LjcxMjM3OCw1NC40MTMwMzQ1IEMxMTkuMDE3Njc5LDU0LjQ3NDYyMDcgMTE5LjMxNzMxLDU0LjU0NDMxMDMgMTE5LjYxNTMyMyw1NC42MTQgTDExOS45NzE2NDIsNTQuNjk0MjI0MSBDMTIwLjM4NDY0OCw1NC43OTU1MTcyIDEyMC43OTE5ODUsNTQuOTAyNDgyOCAxMjEuMTkyODQ0LDU1LjAxNjc0MTQgQzEyMS42MjkzMzUsNTUuMTQyMzQ0OCAxMjIuMDU2OTE4LDU1LjI3NjA1MTcgMTIyLjQ3ODgzMiw1NS40MTc4NjIxIEMxMjIuNTU0MTQ1LDU1LjQ0MjE3MjQgMTIyLjYyNzAyOCw1NS40Njk3MjQxIDEyMi43MDA3MjEsNTUuNDk1NjU1MiBMMTIyLjg1NjIwNiw1NS41NTMxODk3IEMxMjMuMTQ1MzEsNTUuNjU0NDgyOCAxMjMuNDMyNzk1LDU1Ljc1NjU4NjIgMTIzLjcxNjIzMSw1NS44Njc2MDM0IEMxMjMuNzc2OTY3LDU1Ljg5MTEwMzQgMTIzLjgzNTI3NCw1NS45MTYyMjQxIDEyMy44OTQzOSw1NS45NDA1MzQ1IEwxMjQuMDQwOTY3LDU2LjAwMTMxMDMgQzEyNC40MTc1MzEsNTYuMTU0NDY1NSAxMjQuNzg1MTg4LDU2LjMxNDkxMzggMTI1LjE0MzkzNiw1Ni40ODI2NTUyIEwxMjUuMjMwNTg3LDU2LjUyMzE3MjQgQzEyNS4zMjc3NjQsNTYuNTY3NzQxNCAxMjUuNDI0OTQyLDU2LjYxMzEyMDcgMTI1LjUyMjEyLDU2LjY2MTc0MTQgQzEyNS44NTk4MTMsNTYuODI3MDUxNyAxMjYuMTYwMjU1LDU2Ljk4MTgyNzYgMTI2LjQzNTU5Myw1Ny4xMzA5MzEgQzEyNi40MzU1OTMsNTcuMzczMjI0MSAxMjYuNDM1NTkzLDU3LjY4NjgyNzYgMTI2LjQzNjQwMiw1OC4wMDM2NzI0IEwxMjYuNDM2NDAyLDU4LjAyNzE3MjQgQzExNy40MzUyOTgsNTMuNTMzIDEwMy4wNTg2MzYsNTMuNTYyMTcyNCA5MC4wMjU0NTc3LDU4LjE5ODE1NTIgTDg4LjQ5ODE0NDgsNTguMTg2IEw3OC44MzI5OTE0LDU1LjY4NzcwNjkgTDc5Ljg2NTUwNjcsNTEuOTU3Njg5NyBaIE03Ni4yNDQwMDk4LDU3LjQ1OTkzMSBMNzYuMjQ3MjQ5MSw1Ni40MjI2ODk3IEM3Ni4yNDcyNDkxLDU2LjQxNTM5NjYgNzYuMjQ0ODE5Niw1Ni40MDg5MTM4IDc2LjI0NDgxOTYsNTYuNDAxNjIwNyBDNzYuMjQ0MDA5OCw1Ni4zODg2NTUyIDc2LjI0NTYyOTQsNTYuMzc0ODc5MyA3Ni4yNDQwMDk4LDU2LjM2MTkxMzggTDc2LjI0NDAwOTgsNTYuMjI5MDE3MiBDNzYuMjQ0MDA5OCw1NS45NjI0MTM4IDc2LjEwMjI5Miw1NS43MTY4NzkzIDc1Ljg3MTQ5NDUsNTUuNTgzOTgyOCBDNzUuNzMyMjA2MSw1NS41MDM3NTg2IDc1LjU3MzQ4MjIsNTUuNDc3ODI3NiA3NS40MTg4MDc0LDU1LjQ5NDg0NDggQzc1LjI5MzI4NTksNTUuNDE3ODYyMSA3NS4xNjQ1MjUyLDU1LjM0MzMxMDMgNzUuMDQyMjQyOSw1NS4yNjM4OTY2IEM3NS4wMDQxODE2LDU1LjIzODc3NTkgNzQuOTY4NTQ5Nyw1NS4yMTI4NDQ4IDc0LjkyOTY3ODUsNTUuMTg2OTEzOCBDNzQuNjg5MTYzMiw1NS4wMjgwODYyIDc0LjQ1MjY5NjksNTQuODY1MjA2OSA3NC4yMjY3NTgzLDU0LjY5ODI3NTkgQzc0LjIxMjk5MTQsNTQuNjg3NzQxNCA3NC4xOTkyMjQ1LDU0LjY3NzIwNjkgNzQuMTg1NDU3Nyw1NC42Njc0ODI4IEM3My42Nzc3MDMxLDU0LjI4OTg2MjEgNzMuMjA1NTgwNCw1My44OTQ0MTM4IDcyLjc3Mzk0ODUsNTMuNDgwMzI3NiBDNzMuNDc3Njc4NSw1MS45MzAxMzc5IDczLjg0NjE0NDgsNTAuMzY2OTgyOCA3My44NDIwOTU3LDQ4LjkzMDI0MTQgQzczLjgzNzIzNjgsNDcuMTYyODc5MyA3My4yNDYwNzEyLDQ1Ljc1NTMxMDMgNzIuMTc3MTE0MSw0NC45NjYwMzQ1IEM3MS43MzczODQsNDQuNjQwMjc1OSA3MS4yMjgwMDk4LDQ0LjQzNjg3OTMgNzAuNjc3MzM1LDQ0LjM0NjEyMDcgQzcwLjY4Nzg2MjYsNDQuMzIzNDMxIDcwLjY5ODM5MDIsNDQuMjk3NSA3MC43MDg5MTc4LDQ0LjI3NDgxMDMgQzcwLjcxMDUzNzQsNDQuMjcxNTY5IDcwLjczMzIxMjMsNDQuMjI3IDcwLjczNDgzMTksNDQuMjIzNzU4NiBDNzAuNzk3OTk3NSw0NC4wOTI0ODI4IDcwLjg2NzY0MTcsNDMuOTYyODI3NiA3MC45MzcyODU5LDQzLjgzMDc0MTQgTDcxLjE4MjY2MDEsNDMuMzU2Njg5NyBDNzEuMjM2MTA4LDQzLjI2MjY4OTcgNzEuMjkxOTg1Myw0My4xNjc4NzkzIDcxLjM0ODY3MjQsNDMuMDczMDY5IEw3MS40MTUwNzczLDQyLjk2Mjg2MjEgQzcxLjUzNDkzMDEsNDIuNzYxMDg2MiA3MS42NTg4MzE5LDQyLjU1ODUgNzEuNzkwMDIyMSw0Mi4zNTY3MjQxIEM3MS44NzAxOTM5LDQyLjIzMjc0MTQgNzEuOTUzNjA0OSw0Mi4xMDg3NTg2IDcyLjAzNzgyNTgsNDEuOTg2Mzk2NiBDNzIuMTc1NDk0NSw0MS43ODYyNDE0IDcyLjMxODAyMjEsNDEuNTg2ODk2NiA3Mi40NjU0MDg2LDQxLjM4OTE3MjQgTDcyLjU2MTc3NjcsNDEuMjU3ODk2NiBDNzIuNjU0OTA1NSw0MS4xMzIyOTMxIDcyLjc0ODAzNDQsNDEuMDA1ODc5MyA3Mi44NDUyMTIzLDQwLjg4MjcwNjkgQzcyLjg4NDg5MzMsNDAuODMxNjU1MiA3Mi45MjcwMDM3LDQwLjc4MjIyNDEgNzIuOTY5MTE0MSw0MC43MzExNzI0IEw3My4wNTk4MTM1LDQwLjYyMzM5NjYgQzczLjIwOTYyOTQsNDAuNDQwMjU4NiA3My4zNTk0NDU0LDQwLjI1NzkzMSA3My41MzM1NTU4LDQwLjA1Nzc3NTkgQzczLjc2NTk3MywzOS43OTAzNjIxIDc0LjAxMDUzNzQsMzkuNTI0NTY5IDc0LjI2NDAwOTgsMzkuMjU5NTg2MiBDNzQuMzQ0MTgxNiwzOS4xNzUzMTAzIDc0LjQyNTE2MzIsMzkuMDkxMDM0NSA3NC41MDg1NzQyLDM5LjAwNjc1ODYgQzc0Ljc1NzE4NzcsMzguNzUxNSA3NS4wMTM4OTk0LDM4LjUwMDI5MzEgNzUuMjg1MTg3NywzOC4yNDM0MTM4IEw3NS4zNjEzMTA0LDM4LjE3MTI5MzEgQzc1LjQ1NjA1ODksMzguMDgxMzQ0OCA3NS41NTU2NjYzLDM3Ljk5MzgyNzYgNzUuNjU1MjczNiwzNy45MDM4NzkzIEw3NS44NzM5MjM5LDM3LjcwODU4NjIgQzc2LjAzODMxNjYsMzcuNTYxMTAzNCA3Ni4yMDE4OTk0LDM3LjQxNTI0MTQgNzYuMzcyNzcwNiwzNy4yNjkzNzkzIEM3Ni40NzM5OTc1LDM3LjE4NDI5MzEgNzYuNTc3NjU0LDM3LjA5ODM5NjYgNzYuNjgxMzEwNCwzNy4wMTMzMTAzIEw3Ni43ODkwMTYsMzYuOTIzMzYyMSBDNzcuMDIzODYyNiwzNi43MzEzMTAzIDc3LjI2MDMyODgsMzYuNTM5MjU4NiA3Ny41MDQwODM0LDM2LjM0ODgyNzYgQzc3LjY1NzEzODcsMzYuMjMwNTE3MiA3Ny44MTE4MTM1LDM2LjExMjIwNjkgNzcuOTY3Mjk4MiwzNS45OTQ3MDY5IEM3OC4yMTc1MzEzLDM1LjgwNTg5NjYgNzguNDc1MDUyOCwzNS42MTk1MTcyIDc4LjczNDE5MzksMzUuNDMzOTQ4MyBMNzguODA0NjQ3OSwzNS4zODQ1MTcyIEM3OC45MzkwNzczLDM1LjI4ODg5NjYgNzkuMDc0MzE2NiwzNS4xOTI0NjU1IDc5LjIxMDM2NTYsMzUuMDk3NjU1MiBDNzkuNTAxMDg5NiwzNC44OTgzMTAzIDc5Ljc5OTkxMTcsMzQuNzAwNTg2MiA4MC4xMDAzNTM0LDM0LjUwNTI5MzEgTDgwLjI3Njg5MzMsMzQuMzg4NjAzNCBDODAuMzcwMDIyMSwzNC4zMjc4Mjc2IDgwLjQ2MjM0MTEsMzQuMjY2MjQxNCA4MC41NjExMzg3LDM0LjIwNDY1NTIgTDgwLjgzNDg1NjQsMzQuMDM0NDgyOCBDODEuMTkzNjA0OSwzMy44MTE2Mzc5IDgxLjU1NTU5MjYsMzMuNTkwNDEzOCA4MS45MzA1Mzc0LDMzLjM3MTYyMDcgQzgyLjM0NzU5MjYsMzMuMTI5MzI3NiA4Mi43NzE5MzYyLDMyLjg5MzUxNzIgODMuMjAxMTM4NywzMi42NjA5NDgzIEM4My4yOTAyMTg0LDMyLjYxMzk0ODMgODMuMzc4NDg4MywzMi41NjY5NDgzIDgzLjQ2ODM3NzksMzIuNTIwNzU4NiBMODQuMjAyODgxLDMyLjEzOTA4NjIgQzg0LjMwMjQ4ODMsMzIuMDg3MjI0MSA4NC40MDI5MDU1LDMyLjAzNTM2MjEgODQuNTAxNzAzMSwzMS45ODUxMjA3IEw4NS4yOTM3MDMxLDMxLjYwMTAxNzIgQzg1LjQ3MjY3MjQsMzEuNTEzNSA4NS42NTI0NTE1LDMxLjQyNjc5MzEgODUuODM0NjYwMSwzMS4zNDI1MTcyIEM4Ni4wMTg0ODgzLDMxLjI1NjYyMDcgODYuMjA0NzQ2LDMxLjE3MzE1NTIgODYuMzkxMDAzNywzMS4wODg4NzkzIEM4Ni42NTc0MzMxLDMwLjk2ODk0ODMgODYuOTI1NDgyMiwzMC44NDkwMTcyIDg3LjE5NTE1MDksMzAuNzMzOTQ4MyBDODcuMzg1NDU3NywzMC42NTA0ODI4IDg3LjU3NjU3NDIsMzAuNTcwMjU4NiA4Ny43NzAxMjAyLDMwLjQ5MDAzNDUgQzg4LjAzOTc4OSwzMC4zNzczOTY2IDg4LjMxMTg4NzEsMzAuMjY2Mzc5MyA4OC41ODQ3OTUxLDMwLjE1Nzc5MzEgQzg4Ljc3NjcyMTUsMzAuMDgxNjIwNyA4OC45Njk0NTc3LDMwLjAwNDYzNzkgODkuMTYwNTc0MiwyOS45MzA4OTY2IEM4OS40MTA4MDc0LDI5LjgzNTI3NTkgODkuNjYxMDQwNSwyOS43NDIwODYyIDg5LjkxMjg5MzMsMjkuNjQ5NzA2OSBDODkuOTE1MzIyNywyOS42NDg4OTY2IDkwLjAwNDQwMjUsMjkuNjE1NjcyNCA5MC4wMDYwMjIxLDI5LjYxNDg2MjEgTDkwLjE0NDUwMDYsMjkuNTYzIEM5MC4yODYyMTg0LDI5LjUxMTk0ODMgOTAuNDI3MTI2NCwyOS40NTkyNzU5IDkwLjU3MTI3MzYsMjkuNDA5MDM0NSBDOTAuNjg1NDU3NywyOS4zNjc3MDY5IDkwLjgwMTI2MTMsMjkuMzI4ODEwMyA5MC45MTYyNTUyLDI5LjI4OTkxMzggTDkxLjAyODgxOTYsMjkuMjUxODI3NiBDOTEuMTc5NDQ1NCwyOS4xOTkxNTUyIDkxLjMzMDg4MSwyOS4xNDcyOTMxIDkxLjQ4MzkzNjIsMjkuMDk1NDMxIEw5Mi40NTI0NzYxLDI4Ljc4MDIwNjkgQzkyLjg4OTc3NjcsMjguNjQyNDQ4MyA5My4zMjcwNzczLDI4LjUwNzkzMSA5My43NjY4MDc0LDI4LjM3OTg5NjYgQzkzLjk2NjAyMjEsMjguMzIyMzYyMSA5NC4xNjYwNDY2LDI4LjI2NjQ0ODMgOTQuMzY3NjkwOCwyOC4yMDk3MjQxIEM5NC43NzA5NzkxLDI4LjA5Nzg5NjYgOTUuMTc1ODg3MSwyNy45ODg1IDk1LjU4MzIyNDUsMjcuODgzOTY1NSBMOTUuNzIyNTEyOSwyNy44NDkxMjA3IEM5NS44Njk4OTk0LDI3LjgxMDIyNDEgOTYuMDE2NDc2MSwyNy43NzIxMzc5IDk2LjE2Mzg2MjYsMjcuNzM1NjcyNCBDOTYuNjUyMTgxNiwyNy42MTY1NTE3IDk3LjE0MTMxMDQsMjcuNTAyMjkzMSA5Ny42MzY5MTc4LDI3LjM5MzcwNjkgTDk3Ljk0MDU5ODgsMjcuMzI0ODI3NiBDOTguNTMwOTU0NiwyNy4xOTc2MDM0IDk5LjEyMjkzMDEsMjcuMDgxNzI0MSA5OS43MTQwOTU3LDI2Ljk3MzEzNzkgTDEwMC4xMDc2NjYsMjYuOTA1ODc5MyBDMTAwLjcwMTI2MSwyNi44MDA1MzQ1IDEwMS4yOTQwNDcsMjYuNzA1NzI0MSAxMDEuODg3NjQyLDI2LjYxODIwNjkgTDEwMi4zNTI0NzYsMjYuNTUwOTQ4MyBDMTAzLjAzMjcyMSwyNi40NTY5NDgzIDEwMy43MTk0NDUsMjYuMzc1MTAzNCAxMDQuMzkyNDAyLDI2LjMwNjIyNDEgTDEwNC45MjQ0NTIsMjYuMjU2NzkzMSBDMTA1LjMxMzE2MywyNi4yMjAzMjc2IDEwNS43MDEwNjUsMjYuMTg3MTAzNCAxMDYuMDg5Nzc3LDI2LjE1OTU1MTcgQzEwNi4yOTc4OTksMjYuMTQ0MTU1MiAxMDYuNTA1MjEyLDI2LjEzMTE4OTcgMTA2LjcxODE5NCwyNi4xMTgyMjQxIEMxMDYuOTY1OTk4LDI2LjEwMzYzNzkgMTA3LjIxMjE4MiwyNi4wOTIyOTMxIDEwNy40NTkxNzUsMjYuMDgwOTQ4MyBMMTA3LjUxOTkxMiw0NS4yODQ1IEw4OS42Mjc4MzgsNTUuNjIxMjU4NiBMODYuMzQyNDE0Nyw0Ny43MTMxMDM0IEM4Ni4wMjkwMTYsNDYuOTU3MDUxNyA4NS41MDE4MjU4LDQ2LjQzNTE4OTcgODQuODE3NTMxMyw0Ni4yMDI2MjA3IEM4NC4wMDIwNDY2LDQ1LjkyNTQ4MjggODMuMDEwODMxOSw0Ni4wODgzNjIxIDgyLjAyMjg1NjQsNDYuNjU5NjU1MiBDODAuMzgyMTY5Myw0Ny42MDc3NTg2IDc5LjAwNTQ4MjIsNDkuNDg0NTE3MiA3OC40MzA1MTI5LDUxLjU1OSBMNzYuMjQ0MDA5OCw1OS40NTkwNTE3IEw3Ni4yNDQwMDk4LDU3LjQ1OTkzMSBaIE01OC4wMzEyNDkxLDExLjkwMTUzNDUgTDMuMjI1MzM0OTcsNDMuNjE4NDMxIEwzLjIyNTMzNDk3LDM3Ljc5NTI5MzEgQzMuMjI1MzM0OTcsMzUuMDY3NjcyNCA0LjY5MTEwMTg0LDMyLjUyNTYyMDcgNy4wNTA5MDU1MiwzMS4xNjAxODk3IEw1NC4zMDQ0NzYxLDMuODE0MjkzMSBDNTUuMDgyNzA5MiwzLjM2MjkzMTAzIDU2LjAxMDc1ODMsMy4zNjIxMjA2OSA1Ni43ODgxODE2LDMuODEyNjcyNDEgQzU3LjU2NjQxNDcsNC4yNjE2MDM0NSA1OC4wMzEyNDkxLDUuMDY2Mjc1ODYgNTguMDMxMjQ5MSw1Ljk2NDk0ODI4IEw1OC4wMzEyNDkxLDExLjkwMTUzNDUgWiBNMTI3LjIwOTc3NywyNS40Mzk5NjU1IEMxMjcuMTQ5ODUsMjUuNDA2NzQxNCAxMjcuMDg5OTI0LDI1LjM3NDMyNzYgMTI3LjAyOTk5OCwyNS4zNDI3MjQxIEMxMjYuOTUzMDY1LDI1LjMwMjIwNjkgMTI2Ljg4MDE4MiwyNS4yNjA4NzkzIDEyNi44MDMyNDksMjUuMjIwMzYyMSBDMTI2LjgwMjQzOSwyNS4yMTk1NTE3IDEyNi44MDE2MjksMjUuMjE5NTUxNyAxMjYuODAxNjI5LDI1LjIxOTU1MTcgQzEyNi42NDEyODYsMjUuMTM1Mjc1OSAxMjYuNDc5MzIzLDI1LjA1NDI0MTQgMTI2LjMxNTc0LDI0Ljk3MzIwNjkgQzEyNi4yOTcxMTQsMjQuOTY0MjkzMSAxMjYuMjc5Mjk4LDI0Ljk1NTM3OTMgMTI2LjI2MTQ4MiwyNC45NDU2NTUyIEMxMjYuMTU3ODI2LDI0Ljg5NTQxMzggMTI2LjA1MDkzLDI0Ljg0NTk4MjggMTI1LjkwNjc4MywyNC43Nzg3MjQxIEMxMjUuOTAzNTQ0LDI0Ljc3NjI5MzEgMTI1Ljg2NDY3MiwyNC43NTg0NjU1IDEyNS44NjA2MjMsMjQuNzU2MDM0NSBDMTI1Ljg0MzYxNywyNC43NDc5MzEgMTI1LjgyNDk5MSwyNC43NDE0NDgzIDEyNS44MDc5ODUsMjQuNzMyNTM0NSBDMTI1LjQ5Mjk2NywyNC41ODgyOTMxIDEyNS4xNzE0NywyNC40NDgxMDM0IDEyNC44NDUxMTQsMjQuMzEzNTg2MiBDMTI0Ljc5MjQ3NiwyNC4yOTA4OTY2IDEyNC43NDIyNjcsMjQuMjY2NTg2MiAxMjQuNjg4ODIsMjQuMjQ1NTE3MiBMMTI0LjU2MDg2OSwyNC4xOTEyMjQxIEMxMjQuNDg3OTg1LDI0LjE2MTI0MTQgMTI0LjQxNTEwMiwyNC4xMzEyNTg2IDEyNC4zNDA1OTksMjQuMTAyMDg2MiBDMTI0LjMxOTU0NCwyNC4wOTMxNzI0IDEyNC4yOTYwNTksMjQuMDg1ODc5MyAxMjQuMjc0MTk0LDI0LjA3Nzc3NTkgQzEyNC4yNTIzMjksMjQuMDY4ODYyMSAxMjQuMjI4MDM0LDI0LjA2MDc1ODYgMTI0LjIwNjE2OSwyNC4wNTE4NDQ4IEMxMjMuOTUzNTA3LDIzLjk1NjIyNDEgMTIzLjY5NzYwNSwyMy44NjMwMzQ1IDEyMy40MzkyNzQsMjMuNzcxNDY1NSBMMTIzLjI4NzgzOCwyMy43MTYzNjIxIEMxMjMuMjA1MjM3LDIzLjY4NjM3OTMgMTIzLjEyMTgyNiwyMy42NTYzOTY2IDEyMy4wMzc2MDUsMjMuNjI4MDM0NSBDMTIyLjU5NTQ0NSwyMy40Nzg5MzEgMTIyLjE0NTk5OCwyMy4zMzk1NTE3IDEyMS42ODY4MzIsMjMuMjA3NDY1NSBDMTIxLjI2ODE1NywyMy4wODgzNDQ4IDEyMC44NDMwMDQsMjIuOTc2NTE3MiAxMjAuNDEwNTYyLDIyLjg3MDM2MjEgQzEyMC4zMzM2MjksMjIuODUxNzI0MSAxMjAuMjU1MDc3LDIyLjgzNDcwNjkgMTIwLjE3NzMzNSwyMi44MTY4NzkzIEwxMjAuMDQxMjg2LDIyLjc4Njg5NjYgQzExOS43Mjg2OTcsMjIuNzEzOTY1NSAxMTkuNDE0NDg4LDIyLjY0MTg0NDggMTE5LjA5NDYxMSwyMi41NzYyMDY5IEwxMTguNjY3ODM4LDIyLjQ5NTk4MjggQzExOC4zNzIyNTUsMjIuNDM4NDQ4MyAxMTguMDc2NjcyLDIyLjM4MTcyNDEgMTE3Ljc3NzA0LDIyLjMzMTQ4MjggQzExNy42NTQ3NTgsMjIuMzExMjI0MSAxMTcuNTMxNjY2LDIyLjI5MjU4NjIgMTE3LjQwODU3NCwyMi4yNzMxMzc5IEwxMTcuMjU3MTM5LDIyLjI0OTYzNzkgQzExNi45ODE4MDEsMjIuMjA2Njg5NyAxMTYuNzA3Mjc0LDIyLjE2NDU1MTcgMTE2LjQzMDMxNywyMi4xMjcyNzU5IEMxMTYuMjY1MTE0LDIyLjEwNTM5NjYgMTE2LjA5OTEwMiwyMi4wODUxMzc5IDExNS45MzMwOSwyMi4wNjQwNjkgTDExNS44NjQyNTUsMjIuMDU1OTY1NSBDMTE1LjYwOTE2MywyMi4wMjUxNzI0IDExNS4zNTI0NTIsMjEuOTk1MTg5NyAxMTUuMTEwMzE3LDIxLjk3MDg3OTMgQzExNS4xMDQ2NDgsMjEuOTcwMDY5IDExNS4wNTI4MiwyMS45NjM1ODYyIDExNS4wNDc5NjEsMjEuOTYzNTg2MiBDMTE0Ljg1NTIyNSwyMS45NDQxMzc5IDExNC42NjAwNTksMjEuOTI0Njg5NyAxMTQuNDYzMjc0LDIxLjkwNjg2MjEgQzExNC4xOTY4NDQsMjEuODgzMzYyMSAxMTMuOTI4Nzk1LDIxLjg2MjI5MzEgMTEzLjY1OTEyNiwyMS44NDI4NDQ4IEMxMTMuNDQyMDk2LDIxLjgyNjYzNzkgMTEzLjIyNTA2NSwyMS44MTEyNDE0IDExMy4wMTQ1MTMsMjEuNzk5MDg2MiBMMTEyLjkyMDU3NCwyMS43OTQyMjQxIEMxMTIuNjgxNjc5LDIxLjc4MDQ0ODMgMTEyLjQ0MTE2MywyMS43NjgyOTMxIDExMi4xOTk4MzgsMjEuNzU3NzU4NiBDMTExLjk4MzYxNywyMS43NDg4NDQ4IDExMS43NjY1ODcsMjEuNzM5OTMxIDExMS41NDc5MzYsMjEuNzMzNDQ4MyBDMTExLjMyMzYxNywyMS43MjYxNTUyIDExMS4wOTg0ODgsMjEuNzIyOTEzOCAxMTAuODcyNTUsMjEuNzIwNDgyOCBMMTEwLjc4ODMyOSwyMS43MTg4NjIxIEMxMTAuMjc0MDk2LDIxLjcxMDc1ODYgMTA5Ljc2MTQ4MiwyMS43MDk5NDgzIDEwOS4yMzgzNDEsMjEuNzE3MjQxNCBDMTA4Ljk2ODY3MiwyMS43MjEyOTMxIDEwOC42OTk4MTMsMjEuNzI0NTM0NSAxMDguNDI4NTI1LDIxLjczMzQ0ODMgQzEwOC4yNTQ0MTUsMjEuNzM4MzEwMyAxMDguMDc5NDk0LDIxLjc0NTYwMzQgMTA3LjkwNDU3NCwyMS43NTI4OTY2IEwxMDcuNzU3MTg4LDIxLjc1Nzc1ODYgQzEwNy4zODIyNDMsMjEuNzczOTY1NSAxMDcuMDA1Njc5LDIxLjc5MjYwMzQgMTA2LjYyMDIwNiwyMS44MTY5MTM4IEMxMDYuNDA3MjI1LDIxLjgyOTA2OSAxMDYuMTk1MDUzLDIxLjg0Mjg0NDggMTA1Ljk4MjA3MSwyMS44NTc0MzEgQzEwNS41ODQ0NTIsMjEuODg2NjAzNCAxMDUuMTg2MDIyLDIxLjkyMTQ0ODMgMTA0Ljc4NTE2MywyMS45NTc5MTM4IEwxMDQuMjQwOTY3LDIyLjAwODE1NTIgQzEwMy41NjM5NjEsMjIuMDc3MDM0NSAxMDIuODYwMjMxLDIyLjE2MTMxMDMgMTAyLjE1MDAyMiwyMi4yNjAxNzI0IEwxMDEuNjczMDQsMjIuMzI5MDUxNyBDMTAxLjA2NDg2OSwyMi40MTczNzkzIDEwMC40NTc1MDcsMjIuNTE1NDMxIDk5Ljg0NjA5NTcsMjIuNjIzMjA2OSBMOTkuNDQ2MDQ2NiwyMi42OTIwODYyIEM5OC44Mzk0OTQ1LDIyLjgwMzEwMzQgOTguMjMzNzUyMSwyMi45MjIyMjQxIDk3LjYyMzE1MDksMjMuMDUzNSBMOTcuMzEyMTgxNiwyMy4xMjQgQzk2LjgxMDA5NTcsMjMuMjM1MDE3MiA5Ni4zMDgwMDk4LDIzLjM1MDA4NjIgOTUuODA4MzUzNCwyMy40NzQ4NzkzIEM5NS42MzkxMDE4LDIzLjUxNTM5NjYgOTUuNDcwNjYwMSwyMy41NTkxNTUyIDk1LjMwMjIxODQsMjMuNjAyOTEzOCBMOTUuMjEyMzI4OCwyMy42MjU2MDM0IEM5NC43OTYwODM0LDIzLjczMjU2OSA5NC4zODA2NDc5LDIzLjg0NDM5NjYgOTMuOTY2MDIyMSwyMy45NTk0NjU1IEM5My43NjExMzg3LDI0LjAxNyA5My41NTYyNTUyLDI0LjA3NDUzNDUgOTMuMzUwNTYyLDI0LjEzMzY4OTcgQzkyLjkwMDMwNDMsMjQuMjY0OTY1NSA5Mi40NTE2NjYzLDI0LjQwMjcyNDEgOTIuMDAzODM4LDI0LjU0NDUzNDUgTDkxLjgxNzU4MDQsMjQuNjAyMDY5IEM5MS43MjIwMjIxLDI0LjYzMTI0MTQgOTEuNjI3MjczNiwyNC42NjA0MTM4IDkxLjUzMzMzNSwyNC42OTEyMDY5IEM5MS40MTUxMDE4LDI0LjcyOTI5MzEgOTEuMjk2ODY4NywyNC43Njk4MTAzIDkxLjE3ODYzNTYsMjQuODEwMzI3NiBMOTAuMDc0MDQ2NiwyNS4xODg3NTg2IEM4OS45MjUwNDA1LDI1LjI0MTQzMSA4OS43Nzc2NTQsMjUuMjk1NzI0MSA4OS42MzAyNjc1LDI1LjM1MDAxNzIgTDg5LjM5Nzg1MDMsMjUuNDM1OTEzOCBDODkuMTQwMzI4OCwyNS41MzE1MzQ1IDg4Ljg4MjgwNzQsMjUuNjI2MzQ0OCA4OC42MjYwOTU3LDI1LjcyNTIwNjkgQzg4LjQyNjg4MSwyNS44MDIxODk3IDg4LjIzMDA5NTcsMjUuODc5MTcyNCA4OC4wMzQxMjAyLDI1Ljk1ODU4NjIgQzg3Ljc1MzExNDEsMjYuMDcwNDEzOCA4Ny40NzM3Mjc2LDI2LjE4MzA1MTcgODcuMTk1OTYwNywyNi4yOTk3NDE0IEM4Ny4xMDkzMTA0LDI2LjMzNjIwNjkgODcuMDIyNjYwMSwyNi4zNzI2NzI0IDg2LjkzNjAwOTgsMjYuNDA5OTQ4MyBDODYuODk4NzU4MywyNi40MjUzNDQ4IDg2Ljg2MDY5NjksMjYuNDQxNTUxNyA4Ni44MjI2MzU2LDI2LjQ1Njk0ODMgQzg2Ljc1MDU2MiwyNi40ODc3NDE0IDg2LjY3NzY3ODUsMjYuNTE3NzI0MSA4Ni42MDU2MDQ5LDI2LjU0OTMyNzYgQzg2LjMyNzgzOCwyNi42NjkyNTg2IDg2LjA1MjUwMDYsMjYuNzkxNjIwNyA4NS43Nzg3ODI4LDI2LjkxNTYwMzQgQzg1LjcxMDc1ODMsMjYuOTQ2Mzk2NiA4NS42NDM1NDM2LDI2Ljk3NzE4OTcgODUuNTc1NTE5LDI3LjAwNzE3MjQgQzg1LjQ4NjQzOTMsMjcuMDQ4NSA4NS4zOTY1NDk3LDI3LjA4OTAxNzIgODUuMzA3NDY5OSwyNy4xMjk1MzQ1IEM4NS4yNzM0NTc3LDI3LjE0NTc0MTQgODUuMjM5NDQ1NCwyNy4xNTk1MTcyIDg1LjIwNjI0MjksMjcuMTc1NzI0MSBDODUuMDQxMDQwNSwyNy4yNTI3MDY5IDg0Ljg3ODI2NzUsMjcuMzMxMzEwMyA4NC43MTU0OTQ1LDI3LjQwOTkxMzggTDg0LjIwNzczOTksMjcuNjU0NjM3OSBDODQuMTk1NTkyNiwyNy42NjExMjA3IDg0LjE4MzQ0NTQsMjcuNjY2NzkzMSA4NC4xNzEyOTgyLDI3LjY3MjQ2NTUgQzg0LjA3MDg4MSwyNy43MjE4OTY2IDgzLjk3MDQ2MzgsMjcuNzY5NzA2OSA4My44NzA4NTY0LDI3LjgxOTk0ODMgQzgzLjg1ODcwOTIsMjcuODI2NDMxIDgzLjg0NjU2MiwyNy44MzIxMDM0IDgzLjgzNDQxNDcsMjcuODM3Nzc1OSBDODMuNzI1ODk5NCwyNy44OTI4NzkzIDgzLjYxOTgxMzUsMjcuOTQ3OTgyOCA4My41MTI5MTc4LDI4LjAwMzg5NjYgTDgzLjE1NDk3OTEsMjguMTkwMjc1OSBDODIuOTM2MzI4OCwyOC4zMDQ1MzQ1IDgyLjcxNTI0OTEsMjguNDE1NTUxNyA4Mi40OTkwMjgyLDI4LjUzMjI0MTQgTDgyLjQ5MzM1OTUsMjguNTM1NDgyOCBDODIuMDUxMiwyOC43NzQ1MzQ1IDgxLjYxMzA4OTYsMjkuMDE3NjM3OSA4MS4xODIyNjc1LDI5LjI2ODg0NDggQzgwLjc5NTE3NTUsMjkuNDkzMzEwMyA4MC40MjAyMzA3LDI5LjcyMzQ0ODMgODAuMDUwOTU0NiwyOS45NTI3NzU5IEw3OS43NjI2NjAxLDMwLjEzMTA1MTcgQzc5Ljc1NjE4MTYsMzAuMTM1MTAzNCA3OS43NTA1MTI5LDMwLjEzOTE1NTIgNzkuNzQ0ODQ0MiwzMC4xNDIzOTY2IEM3OS42MDE1MDY3LDMwLjIzMjM0NDggNzkuNDY1NDU3NywzMC4zMjU1MzQ1IDc5LjMyNDU0OTcsMzAuNDE3MTAzNCBMNzkuMjg4MTA4LDMwLjQ0MDYwMzQgQzc5LjIyNzM3MTgsMzAuNDgwMzEwMyA3OS4xNjk4NzQ4LDMwLjUyMDAxNzIgNzkuMTA5OTQ4NSwzMC41NTk3MjQxIEM3Mi4zODkyODU5LDM0Ljk3NzcyNDEgNjguNDQyMjQyOSw0MC4zMjM1NjkgNjguMDcyMTU3MSw0NS41NTY3NzU5IEw2OC4wNTExMDE4LDQ1Ljg0NzY4OTcgQzY4LjA0Nzg2MjYsNDUuOTA5Mjc1OSA2OC4wNTExMDE4LDQ1Ljk3MDg2MjEgNjguMDQ4NjcyNCw0Ni4wMzMyNTg2IEM2OC4wNDU0MzMxLDQ2LjE0ODMyNzYgNjguMDMyNDc2MSw0Ni4yNjQyMDY5IDY4LjAzMjQ3NjEsNDYuMzc4NDY1NSBDNjguMDM4MTQ0OCw1MC4wMjUwMTcyIDY5Ljc5OTQ5NDUsNTMuMjI3NSA3My4xNDU2NTQsNTUuNzUwOTEzOCBDNzMuMTU1MzcxOCw1NS43NTgyMDY5IDczLjE2NTg5OTQsNTUuNzY2MzEwMyA3My4xNzY0MjcsNTUuNzczNjAzNCBDNzMuMzYxODc0OCw1NS45MTI5ODI4IDczLjU1MDU2Miw1Ni4wNDk5MzEgNzMuNzQ1NzI3Niw1Ni4xODUyNTg2IEM3My43ODM3ODksNTYuMjExMTg5NyA3My44MjE4NTAzLDU2LjIzNzkzMSA3My44NTk5MTE3LDU2LjI2Mzg2MjEgQzczLjg3NDQ4ODMsNTYuMjczNTg2MiA3My44ODY2MzU2LDU2LjI4MzMxMDMgNzMuOTAwNDAyNSw1Ni4yOTMwMzQ1IEw3My4xODkzODQsNTYuNzAzMDY5IEwzOC41NjQ4OTMzLDM2LjY5OTcwNjkgTDY4LjIyODQ1MTUsMTkuNTMzMzYyMSBDNjguMjMyNTAwNiwxOS41MzA5MzEgNjguMjM3MzU5NSwxOS41Mjc2ODk3IDY4LjI0MTQwODYsMTkuNTI2MDY5IEw5My4zNzY0NzYxLDQuOTc5NTY4OTcgTDEyOC4wMDAxNTcsMjQuOTgzNzQxNCBMMTI3LjIwOTc3NywyNS40Mzk5NjU1IFogTTEyOC4wMDUwMTYsMjkuMjMzMTg5NyBDMTI4LjAxMzkyNCwyOS4xNzI0MTM4IDEyOC4wMTIzMDQsMjkuMTEwODI3NiAxMjguMDA1MDE2LDI5LjA0OTI0MTQgTDEyOC4wMTE0OTQsMjYuNjk3NjIwNyBMMTI4Ljc0NDM3OCwyNi4yNzQ2MjA3IEwxMjguNzQ0Mzc4LDU3Ljc0MTkzMSBMMTI3LjkyOTcwMyw1OC4yMTM1NTE3IEwxMjguMDA1MDE2LDI5LjIzMzE4OTcgWiBNMTA4LjI2NjU2Miw0Ni41NzM3NTg2IEwxMTkuNDkyMjMxLDUzLjA1OTc1ODYgQzExOS4zMzE4ODcsNTMuMDIzMjkzMSAxMTkuMTczMTYzLDUyLjk4NjAxNzIgMTE5LjAxMDM5LDUyLjk1Mjc5MzEgQzExOC45MTQwMjIsNTIuOTMyNTM0NSAxMTguODE2MDM0LDUyLjkxNDcwNjkgMTE4LjcxODA0Nyw1Mi44OTYwNjkgTDExOC41ODExODgsNTIuODcwOTQ4MyBDMTE4LjI4NjQxNSw1Mi44MTQyMjQxIDExNy45OTI0NTIsNTIuNzU4MzEwMyAxMTcuNjkyMDEsNTIuNzA3MjU4NiBDMTE3LjU2ODEwOCw1Mi42ODYxODk3IDExNy40NDI1ODcsNTIuNjY3NTUxNyAxMTcuMzE3ODc1LDUyLjY0ODEwMzQgTDExNy4xNjk2NzksNTIuNjI0NjAzNCBDMTE2Ljg5NTk2MSw1Mi41ODI0NjU1IDExNi42MjE0MzMsNTIuNTQxMTM3OSAxMTYuMzQyODU2LDUyLjUwMzA1MTcgQzExNi4xNTQ5NzksNTIuNDc4NzQxNCAxMTUuOTY2MjkyLDUyLjQ1NDQzMSAxMTUuNzc1OTg1LDUyLjQzMTc0MTQgQzExNS41MDU1MDcsNTIuMzk5MzI3NiAxMTUuMjM1MDI4LDUyLjM2NzcyNDEgMTE0Ljk2MDUwMSw1Mi4zMzkzNjIxIEMxMTQuNzY3NzY0LDUyLjMxOTEwMzQgMTE0LjU3MjU5OSw1Mi4zMDEyNzU5IDExNC4zNzgyNDMsNTIuMjgyNjM3OSBDMTE0LjExMTgxMyw1Mi4yNTkxMzc5IDExMy44NDIxNDUsNTIuMjM4MDY5IDExMy41NzI0NzYsNTIuMjE3ODEwMyBDMTEzLjM1NjI1NSw1Mi4yMDI0MTM4IDExMy4xMzkyMjUsNTIuMTg3MDE3MiAxMTIuOTIyMTk0LDUyLjE3NDg2MjEgQzExMi42NTQxNDUsNTIuMTU4NjU1MiAxMTIuMzg0NDc2LDUyLjE0NTY4OTcgMTEyLjExNTYxNyw1Mi4xMzQzNDQ4IEMxMTEuODk4NTg3LDUyLjEyNDYyMDcgMTExLjY4MDc0Niw1Mi4xMTU3MDY5IDExMS40NjA0NzYsNTIuMTA5MjI0MSBDMTExLjIzNjE1Nyw1Mi4xMDE5MzEgMTExLjAxMTAyOCw1Mi4wOTg2ODk3IDExMC43ODY3MDksNTIuMDk1NDQ4MyBMMTEwLjcwMjQ4OCw1Mi4wOTM4Mjc2IEMxMTAuMTg2NjM2LDUyLjA4NjUzNDUgMTA5LjY2ODM1Myw1Mi4wODU3MjQxIDEwOS4xNTI1MDEsNTIuMDkzMDE3MiBDMTA4Ljg4MjgzMiw1Mi4wOTcwNjkgMTA4LjYxMzE2Myw1Mi4xMDExMjA3IDEwOC4zNDI2ODUsNTIuMTA5MjI0MSBDMTA4LjExOTk4NSw1Mi4xMTU3MDY5IDEwNy44OTY0NzYsNTIuMTI0NjIwNyAxMDcuNjczNzc3LDUyLjEzNDM0NDggQzEwNy4yOTcyMTIsNTIuMTQ4OTMxIDEwNi45MTk4MzgsNTIuMTY4Mzc5MyAxMDYuNTQxNjU0LDUyLjE5MTg3OTMgQzEwNi4zMjcwNTMsNTIuMjA0ODQ0OCAxMDYuMTEyNDUyLDUyLjIxNzgxMDMgMTA1Ljg5Nzg1LDUyLjIzNDAxNzIgQzEwNS40OTg2MTEsNTIuMjYyMzc5MyAxMDUuMDk4NTYyLDUyLjI5NjQxMzggMTA0LjY5OTMyMyw1Mi4zMzM2ODk3IEwxMDQuNTIzNTkzLDUyLjM0OTA4NjIgQzEwNC40MDA1MDEsNTIuMzYwNDMxIDEwNC4yNzc0MDksNTIuMzcxNzc1OSAxMDQuMTUzNTA3LDUyLjM4MzkzMSBDMTAzLjQ3ODkzLDUyLjQ1MjgxMDMgMTAyLjc3NTIsNTIuNTM3ODk2NiAxMDIuMDYwMTMzLDUyLjYzNTk0ODMgTDEwMS41ODk2MjksNTIuNzA0ODI3NiBDMTAwLjk4MDY0OCw1Mi43OTMxNTUyIDEwMC4zNzE2NjYsNTIuODkwMzk2NiA5OS43NjI2ODQ3LDUyLjk5ODE3MjQgTDk5LjM1OTM5NjMsNTMuMDY3ODYyMSBDOTguNzUzNjU0LDUzLjE3OTY4OTcgOTguMTQ3MTAxOCw1My4yOTggOTcuNTQxMzU5NSw1My40Mjc2NTUyIEw5Ny4yMjcxNTA5LDUzLjQ5OTc3NTkgQzk2LjcyMzQ0NTQsNTMuNjA5OTgyOCA5Ni4yMjIxNjkzLDUzLjcyNjY3MjQgOTUuNzIwODkzMyw1My44NTA2NTUyIEM5NS42OTE3Mzk5LDUzLjg1NzEzNzkgOTUuNjYyNTg2NSw1My44NjUyNDE0IDk1LjYzNDI0MjksNTMuODcxNzI0MSBMMTA4LjI2NjU2Miw0Ni41NzM3NTg2IFogTTEwOS4wMDkxNjMsNDUuMjgyODc5MyBMMTA4Ljk0ODQyNywyNi4wMjkwODYyIEMxMDkuMDUyODkzLDI2LjAyNjY1NTIgMTA5LjE1NjU1LDI2LjAyNDIyNDEgMTA5LjI2MDIwNiwyNi4wMjI2MDM0IEMxMDkuNzY1NTMxLDI2LjAxNTMxMDMgMTEwLjI2NTk5OCwyNi4wMTUzMTAzIDExMC43NjY0NjQsMjYuMDIzNDEzOCBMMTEwLjg0OTg3NSwyNi4wMjQyMjQxIEMxMTEuMDY4NTI1LDI2LjAyODI3NTkgMTExLjI4NzE3NSwyNi4wMzE1MTcyIDExMS41MDI1ODcsMjYuMDM4IEMxMTEuNzE0NzU4LDI2LjA0MzY3MjQgMTExLjkyNTMxLDI2LjA1MzM5NjYgMTEyLjEzNzQ4MiwyNi4wNjMxMjA3IEMxMTIuMzcxNTE5LDI2LjA3MjAzNDUgMTEyLjYwMzEyNiwyNi4wODMzNzkzIDExMi44Mzk1OTMsMjYuMDk3MTU1MiBDMTEyLjg0MTIxMiwyNi4wOTcxNTUyIDExMi45MTgxNDUsMjYuMTAxMjA2OSAxMTIuOTE5NzY0LDI2LjEwMTIwNjkgQzExMy4xMzExMjYsMjYuMTEzMzYyMSAxMTMuMzQwODY5LDI2LjEyNzk0ODMgMTEzLjU1MDYxMSwyNi4xNDQxNTUyIEMxMTMuODExMzcyLDI2LjE2Mjc5MzEgMTE0LjA3MTMyMywyNi4xODMwNTE3IDExNC4zMzA0NjQsMjYuMjA3MzYyMSBDMTE0LjUxOTE1MSwyNi4yMjM1NjkgMTE0LjcwNjIxOCwyNi4yNDEzOTY2IDExNC45NDEwNjUsMjYuMjY2NTE3MiBDMTE1LjE5MDQ4OCwyNi4yOTI0NDgzIDExNS40Mzc0ODIsMjYuMzIgMTE1LjY4Mjg1NiwyNi4zNDk5ODI4IEMxMTUuODY2Njg1LDI2LjM3MjY3MjQgMTE2LjA0ODg5MywyNi4zOTUzNjIxIDExNi4yMjk0ODIsMjYuNDE4ODYyMSBDMTE2LjQ5NzUzMSwyNi40NTUzMjc2IDExNi43NjMxNTEsMjYuNDk1ODQ0OCAxMTcuMDI5NTgsMjYuNTM3OTgyOCBMMTE3LjE0NTM4NCwyNi41NTU4MTAzIEMxMTcuMjczMzM1LDI2LjU3NTI1ODYgMTE3LjQwMjA5NiwyNi41OTQ3MDY5IDExNy41MzAwNDcsMjYuNjE2NTg2MiBDMTE3LjgxNzUzMSwyNi42NjUyMDY5IDExOC4xMDE3NzcsMjYuNzE4Njg5NyAxMTguMzg1MjEyLDI2Ljc3Mzc5MzEgTDExOC43OTc0MDksMjYuODUyMzk2NiBDMTE5LjEwMjcwOSwyNi45MTQ3OTMxIDExOS40MDMxNTEsMjYuOTgzNjcyNCAxMTkuNzAyNzgzLDI3LjA1NDE3MjQgTDEyMC4wNTgyOTIsMjcuMTMzNTg2MiBDMTIwLjQ3MTI5OCwyNy4yMzQwNjkgMTIwLjg3NzgyNiwyNy4zNDE4NDQ4IDEyMS4yNzc4NzUsMjcuNDU2MTAzNCBDMTIxLjcxNDM2NiwyNy41ODA4OTY2IDEyMi4xNDM1NjgsMjcuNzE0NjAzNCAxMjIuNTY0NjcyLDI3Ljg1NjQxMzggQzEyMi42MzUxMjYsMjcuODc5OTEzOCAxMjIuNzA1NTgsMjcuOTA1MDM0NSAxMjIuNzc1MjI1LDI3LjkzMTc3NTkgTDEyMi45NDUyODYsMjcuOTkyNTUxNyBDMTIzLjIzMjc3MSwyOC4wOTQ2NTUyIDEyMy41MjAyNTUsMjguMTk2NzU4NiAxMjMuNzk5NjQyLDI4LjMwNTM0NDggQzEyMy44NjExODgsMjguMzI5NjU1MiAxMjMuOTIwMzA0LDI4LjM1Mzk2NTUgMTIzLjk4MDIzMSwyOC4zNzkwODYyIEwxMjQuMTI3NjE3LDI4LjQ0MDY3MjQgQzEyNC41MDMzNzIsMjguNTkzODI3NiAxMjQuODcxODM4LDI4Ljc1NDI3NTkgMTI1LjIzMzAxNiwyOC45MjM2Mzc5IEwxMjUuNjA2MzQxLDI5LjA5OTQ4MjggQzEyNS43Nzk2NDIsMjkuMTg0NTY5IDEyNS45NTA1MTMsMjkuMjcyMDg2MiAxMjYuMTE3MzM1LDI5LjM1NzE3MjQgQzEyNi4yNTE3NjQsMjkuNDI3NjcyNCAxMjYuMzgyMTQ1LDI5LjUwMTQxMzggMTI2LjUxNDE0NSwyOS41NzI3MjQxIEwxMjYuNDQ3NzQsNTUuMzU3MDg2MiBMMTA5LjAwOTE2Myw0NS4yODI4NzkzIFogTTc5LjEwOTEzODcsMzIuMzU0NjM3OSBDNzkuMTM3NDgyMiwzMi4zMzUxODk3IDc5LjE2NDIwNjEsMzIuMzE1NzQxNCA3OS4xOTE3Mzk5LDMyLjI5NjI5MzEgQzc5LjU4NzczOTksMzIuMDIxNTg2MiA3OS45OTUwNzczLDMxLjc1MjU1MTcgODAuNDEyMTMyNSwzMS40ODU5NDgzIEM4MC40NTUwNTI4LDMxLjQ1NzU4NjIgODAuNDk4NzgyOCwzMS40MjkyMjQxIDgwLjU0MjUxMjksMzEuNDAxNjcyNCBDODAuOTkzNTgwNCwzMS4xMTQ4MTAzIDgxLjQ1NTk4NTMsMzAuODM0NDMxIDgxLjkzMDUzNzQsMzAuNTU4MTAzNCBDODIuMzUwMDIyMSwzMC4zMTMzNzkzIDgyLjc3Njc5NTEsMzAuMDc1OTQ4MyA4My4yMDY4MDc0LDI5Ljg0MzM3OTMgTDg0LjAxODI0MjksMjkuNDIwMzc5MyBDODQuMTcwNDg4MywyOS4zNDI1ODYyIDg0LjMyMTExNDEsMjkuMjYxNTUxNyA4NC40NzQxNjkzLDI5LjE4NDU2OSBMODQuNTAxNzAzMSwyOS4xNzA3OTMxIEw4NS4zMDUwNDA1LDI4Ljc4MDIwNjkgQzg1LjQ4NDgxOTYsMjguNjk0MzEwMyA4NS42NjI5NzkxLDI4LjYwNjc5MzEgODUuODQ0Mzc3OSwyOC41MjI1MTcyIEM4Ni4wMjQ5NjY5LDI4LjQzOTA1MTcgODYuMjA3OTg1MywyOC4zNTYzOTY2IDg2LjM5MTAwMzcsMjguMjczNzQxNCBDODYuNjU3NDMzMSwyOC4xNTM4MTAzIDg2LjkyNTQ4MjIsMjguMDM0Njg5NyA4Ny4xOTUxNTA5LDI3LjkxODgxMDMgQzg3LjM4NjI2NzUsMjcuODM2MTU1MiA4Ny41NzgxOTM5LDI3Ljc1NTEyMDcgODcuNzcwMTIwMiwyNy42NzQwODYyIEM4OC4wMzk3ODksMjcuNTYyMjU4NiA4OC4zMTE4ODcxLDI3LjQ1MjA1MTcgODguNTg0Nzk1MSwyNy4zNDM0NjU1IEM4OC43NzY3MjE1LDI3LjI2NjQ4MjggODguOTY5NDU3NywyNy4xOTExMjA3IDg5LjE2MDU3NDIsMjcuMTE2NTY5IEM4OS40MTA4MDc0LDI3LjAyMDk0ODMgODkuNjYxMDQwNSwyNi45MjY5NDgzIDg5LjkxMjg5MzMsMjYuODM0NTY5IEM4OS45MTUzMjI3LDI2LjgzMzc1ODYgOTAuMDA0NDAyNSwyNi44MDA1MzQ1IDkwLjAwNjAyMjEsMjYuNzk5NzI0MSBMOTAuMTQ0NTAwNiwyNi43NDk0ODI4IEM5MC4yODYyMTg0LDI2LjY5NjgxMDMgOTAuNDI3MTI2NCwyNi42NDQ5NDgzIDkwLjU3MTI3MzYsMjYuNTkzODk2NiBMOTEuNjU0ODA3NCwyNi4yMjI3NTg2IEM5MS43NjczNzE4LDI2LjE4Mzg2MjEgOTEuODc5OTM2MiwyNi4xNDQ5NjU1IDkxLjk5NTczOTksMjYuMTA4NSBMOTIuNDUyNDc2MSwyNS45NjU4NzkzIEM5Mi44ODk3NzY3LDI1LjgyNzMxMDMgOTMuMzI3MDc3MywyNS42OTM2MDM0IDkzLjc2NjgwNzQsMjUuNTY1NTY5IEM5My45NjY4MzE5LDI1LjUwNzIyNDEgOTQuMTY2ODU2NCwyNS40NTEzMTAzIDk0LjM2NzY5MDgsMjUuMzk1Mzk2NiBDOTQuNzcwOTc5MSwyNS4yODE5NDgzIDk1LjE3NjY5NjksMjUuMTczMzYyMSA5NS41ODMyMjQ1LDI1LjA2ODgyNzYgTDk1LjY3MzkyMzksMjUuMDQ2MTM3OSBDOTUuODM3NTA2NywyNS4wMDQgOTYuMDAwMjc5OCwyNC45NjE4NjIxIDk2LjE2Mzg2MjYsMjQuOTIxMzQ0OCBDOTYuNjUyMTgxNiwyNC44MDE0MTM4IDk3LjE0MTMxMDQsMjQuNjg3MTU1MiA5Ny42MzA0MzkzLDI0LjU4MDE4OTcgTDk3Ljk0MDU5ODgsMjQuNTA5Njg5NyBDOTguNTMwOTU0NiwyNC4zODMyNzU5IDk5LjEyMjkzMDEsMjQuMjY2NTg2MiA5OS43MTQwOTU3LDI0LjE1OCBMMTAwLjEwNjg1NiwyNC4wODk5MzEgQzEwMC43MDEyNjEsMjMuOTg1Mzk2NiAxMDEuMjk0MDQ3LDIzLjg5MDU4NjIgMTAxLjg4NzY0MiwyMy44MDM4NzkzIEwxMDIuMzUyNDc2LDIzLjczNjYyMDcgQzEwMy4wNDY0ODgsMjMuNjQxIDEwMy43MzI0MDIsMjMuNTU4MzQ0OCAxMDQuMzkyNDAyLDIzLjQ5MTA4NjIgTDEwNC45MjI4MzIsMjMuNDQyNDY1NSBDMTA1LjMxMjM1MywyMy40MDYgMTA1LjcwMTA2NSwyMy4zNzI3NzU5IDEwNi4wODk3NzcsMjMuMzQ0NDEzOCBDMTA2LjI5Nzg5OSwyMy4zMjk4Mjc2IDEwNi41MDUyMTIsMjMuMzE2MDUxNyAxMDYuNzE5MDA0LDIzLjMwMzg5NjYgQzEwNy4wODc0NywyMy4yODEyMDY5IDEwNy40NTM1MDcsMjMuMjYyNTY5IDEwNy44MTc5MjQsMjMuMjQ3MTcyNCBMMTA3Ljk2NTMxLDIzLjI0MTUgQzEwOC4xMzM3NTIsMjMuMjM1MDE3MiAxMDguMzAzMDA0LDIzLjIyNzcyNDEgMTA4LjQ3MjI1NSwyMy4yMjI4NjIxIEMxMDguNzM1NDQ1LDIzLjIxNTU2OSAxMDguOTk3ODI2LDIzLjIxMTUxNzIgMTA5LjI2MDIwNiwyMy4yMDc0NjU1IEMxMDkuNzY1NTMxLDIzLjIwMDk4MjggMTEwLjI2NTk5OCwyMy4yMDE3OTMxIDExMC43NjY0NjQsMjMuMjA4Mjc1OSBMMTEwLjg0OTg3NSwyMy4yMDkwODYyIEMxMTEuMDY4NTI1LDIzLjIxMzEzNzkgMTExLjI4NzE3NSwyMy4yMTYzNzkzIDExMS41MDQyMDYsMjMuMjIyODYyMSBDMTExLjcxNjM3OCwyMy4yMjkzNDQ4IDExMS45MjYxMiwyMy4yMzkwNjkgMTEyLjEzNTg2MywyMy4yNDcxNzI0IEMxMTIuMzY5ODk5LDIzLjI1Njg5NjYgMTEyLjYwMzEyNiwyMy4yNjkwNTE3IDExMi44Mzk1OTMsMjMuMjgyMDE3MiBDMTEyLjg0MTIxMiwyMy4yODIwMTcyIDExMi45MTgxNDUsMjMuMjg2MDY5IDExMi45MTk3NjQsMjMuMjg2MDY5IEMxMTMuMTMxMTI2LDIzLjI5OTAzNDUgMTEzLjM0MDg2OSwyMy4zMTM2MjA3IDExMy41NTA2MTEsMjMuMzI5MDE3MiBDMTEzLjgxMTM3MiwyMy4zNDc2NTUyIDExNC4wNzEzMjMsMjMuMzY5NTM0NSAxMTQuMzMyMDgzLDIzLjM5MjIyNDEgQzExNC41MTk5NjEsMjMuNDA5MjQxNCAxMTQuNzA3MDI4LDIzLjQyNzA2OSAxMTQuOTQxMDY1LDIzLjQ1MTM3OTMgQzExNS4xOTA0ODgsMjMuNDc3MzEwMyAxMTUuNDM3NDgyLDIzLjUwNTY3MjQgMTE1LjY4Mjg1NiwyMy41MzU2NTUyIEwxMTUuNzUxNjkxLDIzLjU0NDU2OSBDMTE1LjkxMTIyNSwyMy41NjMyMDY5IDExNi4wNzA3NTgsMjMuNTgyNjU1MiAxMTYuMjI5NDgyLDIzLjYwNDUzNDUgQzExNi40OTgzNDEsMjMuNjQxODEwMyAxMTYuNzYzOTYxLDIzLjY4MTUxNzIgMTE3LjAyNzk2MSwyMy43MjIwMzQ1IEwxMTcuMTgxODI2LDIzLjc0NzE1NTIgQzExNy4yOTg0MzksMjMuNzY0MTcyNCAxMTcuNDE0MjQzLDIzLjc4MTE4OTcgMTE3LjUzMDA0NywyMy44MDE0NDgzIEMxMTcuODE3NTMxLDIzLjg1MDA2OSAxMTguMTAxNzc3LDIzLjkwNDM2MjEgMTE4LjM4NzY0MiwyMy45NTk0NjU1IEwxMTguNzk3NDA5LDI0LjAzNzI1ODYgQzExOS4xMDI3MDksMjQuMDk5NjU1MiAxMTkuNDAzMTUxLDI0LjE2OTM0NDggMTE5LjcwNTIxMiwyNC4yMzkwMzQ1IEwxMjAuMDU3NDgyLDI0LjMxODQ0ODMgQzEyMC40NzA0ODgsMjQuNDE5NzQxNCAxMjAuODc3ODI2LDI0LjUyNTg5NjYgMTIxLjI3Nzg3NSwyNC42NDA5NjU1IEMxMjEuNzE0MzY2LDI0Ljc2NTc1ODYgMTIyLjE0Mjc1OCwyNC44OTg2NTUyIDEyMi41NjQ2NzIsMjUuMDQxMjc1OSBDMTIyLjYzNTEyNiwyNS4wNjQ3NzU5IDEyMi43MDU1OCwyNS4wOTA3MDY5IDEyMi43NzUyMjUsMjUuMTE2NjM3OSBMMTIyLjk0NjA5NiwyNS4xNzgyMjQxIEMxMjMuMjMzNTgsMjUuMjc4NzA2OSAxMjMuNTIwMjU1LDI1LjM4MTYyMDcgMTIzLjc5OTY0MiwyNS40OTEwMTcyIEMxMjMuODYyODA3LDI1LjUxNDUxNzIgMTIzLjkyMjczNCwyNS41NDA0NDgzIDEyMy45ODM0NywyNS41NjYzNzkzIEwxMjQuMTI3NjE3LDI1LjYyNjM0NDggQzEyNC41MDQxODIsMjUuNzc4Njg5NyAxMjQuODcyNjQ4LDI1Ljk0MDc1ODYgMTI1LjI1NjUwMSwyNi4xMTkwMzQ1IEMxMjUuMjYwNTUsMjYuMTIwNjU1MiAxMjUuMzEzOTk4LDI2LjE0NjU4NjIgMTI1LjMxODA0NywyNi4xNDgyMDY5IEMxMjUuNDE2MDM0LDI2LjE5MzU4NjIgMTI1LjUxMzIxMiwyNi4yMzk3NzU5IDEyNS42MDc5NjEsMjYuMjg1MTU1MiBDMTI1Ljc4MDQ1MiwyNi4zNzAyNDE0IDEyNS45NTEzMjMsMjYuNDU2OTQ4MyAxMjYuMTE3MzM1LDI2LjU0MzY1NTIgQzEyNi4xMTk3NjQsMjYuNTQ0NDY1NSAxMjYuMTIzMDA0LDI2LjU0NjA4NjIgMTI2LjEyNTQzMywyNi41NDc3MDY5IEMxMjYuMjU5MDUzLDI2LjYxNzM5NjYgMTI2LjM5MTA1MywyNi42ODg3MDY5IDEyNi41MjIyNDMsMjYuNzYxNjM3OSBMMTI2LjUxOTAwNCwyNy44OTEyNTg2IEMxMjYuNDMzMTYzLDI3Ljg0NzUgMTI2LjM0ODk0MiwyNy44MDM3NDE0IDEyNi4yNjE0ODIsMjcuNzYwNzkzMSBMMTI1Ljg2MTQzMywyNy41NzExNzI0IEMxMjUuNDc5MiwyNy4zOTM3MDY5IDEyNS4wODgwNTksMjcuMjIzNTM0NSAxMjQuNjg4ODIsMjcuMDU5ODQ0OCBMMTI0LjU1ODQzOSwyNy4wMDYzNjIxIEMxMjQuNDg3MTc1LDI2Ljk3NjM3OTMgMTI0LjQxNDI5MiwyNi45NDU1ODYyIDEyNC4zNDA1OTksMjYuOTE3MjI0MSBDMTI0LjA0NjYzNiwyNi44MDEzNDQ4IDEyMy43NDQ1NzQsMjYuNjkzNTY5IDEyMy40MzkyNzQsMjYuNTg1NzkzMSBMMTIzLjI4NzgzOCwyNi41MzE1IEMxMjMuMjA1MjM3LDI2LjUwMTUxNzIgMTIzLjEyMTgyNiwyNi40NzA3MjQxIDEyMy4wMzc2MDUsMjYuNDQyMzYyMSBDMTIyLjU5NDYzNiwyNi4yOTQwNjkgMTIyLjE0NTk5OCwyNi4xNTM4NzkzIDEyMS42ODY4MzIsMjYuMDIyNjAzNCBDMTIxLjI2NzM0NywyNS45MDI2NzI0IDEyMC44NDMwMDQsMjUuNzkwODQ0OCAxMjAuNDEwNTYyLDI1LjY4NTUgQzEyMC4zMzg0ODgsMjUuNjY4NDgyOCAxMjAuMjYzOTg1LDI1LjY1MTQ2NTUgMTIwLjE4OTQ4MiwyNS42MzYwNjkgTDEyMC4wNDEyODYsMjUuNjAyMDM0NSBDMTE5LjcyODY5NywyNS41MjkxMDM0IDExOS40MTQ0ODgsMjUuNDU2OTgyOCAxMTkuMDk0NjExLDI1LjM5MTM0NDggTDExOC42Njc4MzgsMjUuMzEwMzEwMyBDMTE4LjM3MjI1NSwyNS4yNTI3NzU5IDExOC4wNzY2NzIsMjUuMTk2ODYyMSAxMTcuNzc3MDQsMjUuMTQ1ODEwMyBDMTE3LjY0MTgwMSwyNS4xMjM5MzEgMTE3LjUwNTc1MiwyNS4xMDIwNTE3IDExNy4zNjk3MDMsMjUuMDgyNjAzNCBMMTE3LjI1Nzk0OCwyNS4wNjM5NjU1IEMxMTYuOTgyNjExLDI1LjAyMTgyNzYgMTE2LjcwNzI3NCwyNC45Nzk2ODk3IDExNi40Mjc4ODcsMjQuOTQyNDEzOCBDMTE2LjI0MTYyOSwyNC45MTcyOTMxIDExNi4wNTM3NTIsMjQuODk0NjAzNCAxMTUuODY0MjU1LDI0Ljg3MDI5MzEgQzExNS42MDgzNTMsMjQuODM5NSAxMTUuMzUyNDUyLDI0LjgxMDMyNzYgMTE1LjA0Nzk2MSwyNC43Nzg3MjQxIEMxMTQuODU1MjI1LDI0Ljc1OTI3NTkgMTE0LjY2MDA1OSwyNC43Mzk4Mjc2IDExNC40NjQwODMsMjQuNzIyODEwMyBDMTE0LjE5NzY1NCwyNC42OTc2ODk3IDExMy45Mjg3OTUsMjQuNjc3NDMxIDExMy42NTkxMjYsMjQuNjU3MTcyNCBDMTEzLjQ0MjA5NiwyNC42NDE3NzU5IDExMy4yMjUwNjUsMjQuNjI1NTY5IDExMy4wMTQ1MTMsMjQuNjE0MjI0MSBMMTEyLjkyMDU3NCwyNC42MDkzNjIxIEMxMTIuNjgwODY5LDI0LjU5NDc3NTkgMTEyLjQ0MDM1MywyNC41ODM0MzEgMTEyLjE5OTgzOCwyNC41NzI4OTY2IEMxMTEuOTgzNjE3LDI0LjU2Mzk4MjggMTExLjc2NzM5NiwyNC41NTUwNjkgMTExLjU0NzkzNiwyNC41NDc3NzU5IEMxMTEuMzIzNjE3LDI0LjU0MTI5MzEgMTExLjA5ODQ4OCwyNC41MzgwNTE3IDExMC44NzI1NSwyNC41MzQgTDExMC43ODgzMjksMjQuNTMyMzc5MyBDMTEwLjI3NDA5NiwyNC41MjUwODYyIDEwOS43NjE0ODIsMjQuNTI0Mjc1OSAxMDkuMjM4MzQxLDI0LjUzMTU2OSBDMTA4Ljk2ODY3MiwyNC41MzU2MjA3IDEwOC42OTk4MTMsMjQuNTQwNDgyOCAxMDguNDI4NTI1LDI0LjU0ODU4NjIgQzEwOC40MTMxMzksMjQuNTQ5Mzk2NiAxMDguMzk2OTQyLDI0LjU1MDIwNjkgMTA4LjM4MTU1NiwyNC41NTAyMDY5IEMxMDguMzIzMjQ5LDI0LjUzNTYyMDcgMTA4LjI2MzMyMywyNC41MjUwODYyIDEwOC4yMDA5NjcsMjQuNTI1MDg2MiBMMTA4LjE5ODUzNywyNC41MjUwODYyIEMxMDguMTE5MTc1LDI0LjUyNTg5NjYgMTA4LjA0Mzg2MywyNC41NDIxMDM0IDEwNy45NzI1OTksMjQuNTY0NzkzMSBDMTA3LjkwMTMzNSwyNC41NjgwMzQ1IDEwNy44MjkyNjEsMjQuNTcwNDY1NSAxMDcuNzU3OTk4LDI0LjU3Mjg5NjYgQzEwNy4zODMwNTMsMjQuNTg5MTAzNCAxMDcuMDA3Mjk4LDI0LjYwNzc0MTQgMTA2LjYyMDIwNiwyNC42MzA0MzEgQzEwNi40MDcyMjUsMjQuNjQ0MjA2OSAxMDYuMTk1MDUzLDI0LjY1NzE3MjQgMTA1Ljk4MjA3MSwyNC42NzI1NjkgQzEwNS41ODQ0NTIsMjQuNzAwOTMxIDEwNS4xODUyMTIsMjQuNzM1Nzc1OSAxMDQuNzg2NzgzLDI0Ljc3MjI0MTQgTDEwNC42MTEwNTMsMjQuNzg5MjU4NiBDMTA0LjQ4Nzk2MSwyNC43OTg5ODI4IDEwNC4zNjQwNTksMjQuODEwMzI3NiAxMDQuMjQwMTU3LDI0LjgyMzI5MzEgQzEwMy41NTAxOTQsMjQuODk0NjAzNCAxMDIuODQ2NDY0LDI0Ljk3ODA2OSAxMDIuMTUwMDIyLDI1LjA3NDUgTDEwMS42NzMwNCwyNS4xNDMzNzkzIEMxMDEuMDY0ODY5LDI1LjIzMjUxNzIgMTAwLjQ1NjY5NywyNS4zMzA1NjkgOTkuODQ5MzM1LDI1LjQzNjcyNDEgTDk5LjQ0NTIzNjgsMjUuNTA2NDEzOCBDOTguODM5NDk0NSwyNS42MTgyNDE0IDk4LjIzMzc1MjEsMjUuNzM4MTcyNCA5Ny42Mjk2Mjk0LDI1Ljg2NzAxNzIgTDk3LjMxMjE4MTYsMjUuOTM5MTM3OSBDOTYuODEwMDk1NywyNi4wNDg1MzQ1IDk2LjMwODgxOTYsMjYuMTY2MDM0NSA5NS44MDgzNTM0LDI2LjI4ODM5NjYgQzk1LjY1NTI5ODIsMjYuMzI2NDgyOCA5NS41MDIyNDI5LDI2LjM2NjE4OTcgOTUuMzQ5MTg3NywyNi40MDU4OTY2IEw5NS4yMTM5NDg1LDI2LjQ0MDc0MTQgQzk0Ljc5NjA4MzQsMjYuNTQ3NzA2OSA5NC4zODA2NDc5LDI2LjY1ODcyNDEgOTMuOTY3NjQxNywyNi43NzQ2MDM0IEM5My43NjE5NDg1LDI2LjgzMTMyNzYgOTMuNTU2MjU1MiwyNi44ODg4NjIxIDkzLjM1MDU2MiwyNi45NDg4Mjc2IEM5Mi45MDAzMDQzLDI3LjA4MDEwMzQgOTIuNDUxNjY2MywyNy4yMTc4NjIxIDkyLjAwMzgzOCwyNy4zNTk2NzI0IEw5MS4wMDkzODQsMjcuNjgzIEM5MC44NTE0Njk5LDI3LjczNDg2MjEgOTAuNjk1OTg1MywyNy43ODk5NjU1IDkwLjU0NDU0OTcsMjcuODQyNjM3OSBMOTAuNDM5MjczNiwyNy44Nzc0ODI4IEM5MC4zMTY5OTE0LDI3LjkxOTYyMDcgOTAuMTk0NzA5MiwyNy45NjA5NDgzIDkwLjA3NDA0NjYsMjguMDAzMDg2MiBDODkuOTI1MDQwNSwyOC4wNTU3NTg2IDg5Ljc3NzY1NCwyOC4xMTAwNTE3IDg5LjYzMDI2NzUsMjguMTY1MTU1MiBMODkuMzk3ODUwMywyOC4yNTAyNDE0IEM4OS4xNDAzMjg4LDI4LjM0NTA1MTcgODguODgyODA3NCwyOC40NDA2NzI0IDg4LjYyNjA5NTcsMjguNTQwMzQ0OCBDODguNDI2ODgxLDI4LjYxNjUxNzIgODguMjMwMDk1NywyOC42OTQzMTAzIDg4LjAzNDEyMDIsMjguNzczNzI0MSBDODcuNzUzMTE0MSwyOC44ODQ3NDE0IDg3LjQ3MzcyNzYsMjguOTk4MTg5NyA4Ny4xOTc1ODA0LDI5LjExNDg3OTMgQzg2Ljk5OTE3NTUsMjkuMTk1OTEzOCA4Ni44MDE1ODA0LDI5LjI4MDE4OTcgODYuNjA1NjA0OSwyOS4zNjM2NTUyIEM4Ni4zMjc4MzgsMjkuNDg0Mzk2NiA4Ni4wNTI1MDA2LDI5LjYwNTk0ODMgODUuNzc4NzgyOCwyOS43Mjk5MzEgQzg1LjU4NjA0NjYsMjkuODE2NjM3OSA4NS4zOTQ5MzAxLDI5LjkwMjUzNDUgODUuMjA2MjQyOSwyOS45OTE2NzI0IEM4NS4wMTY3NDYsMzAuMDc5MTg5NyA4NC44MzA0ODgzLDMwLjE2OTEzNzkgODQuNjQzNDIwOSwzMC4yNTk4OTY2IEw4NC4yMDc3Mzk5LDMwLjQ2ODk2NTUgQzg0LjA4MzAyODIsMzAuNTMwNTUxNyA4My45NTkxMjY0LDMwLjU5MDUxNzIgODMuODM0NDE0NywzMC42NTI5MTM4IEM4My43MjU4OTk0LDMwLjcwNzIwNjkgODMuNjE5ODEzNSwzMC43NjMxMjA3IDgzLjUxMjkxNzgsMzAuODE5MDM0NSBMODIuNzgyNDYzOCwzMS4xOTc0NjU1IEM4Mi42ODUyODU5LDMxLjI0NzcwNjkgODIuNTg4MTA4LDMxLjI5ODc1ODYgODIuNDkzMzU5NSwzMS4zNDk4MTAzIEM4Mi4wNTEyLDMxLjU4ODg2MjEgODEuNjEzMDg5NiwzMS44MzI3NzU5IDgxLjE4MTQ1NzcsMzIuMDgzOTgyOCBDODAuNzk0MzY1NiwzMi4zMDkyNTg2IDgwLjQxOTQyMDksMzIuNTM3Nzc1OSA4MC4wNDg1MjUyLDMyLjc2ODcyNDEgTDc5Ljc2MzQ2OTksMzIuOTQ1Mzc5MyBDNzkuNjU5ODEzNSwzMy4wMTEwMTcyIDc5LjU1ODU4NjUsMzMuMDc3NDY1NSA3OS40NTczNTk1LDMzLjE0MzkxMzggTDc5LjI4ODEwOCwzMy4yNTU3NDE0IEM3OC45NzYzMjg4LDMzLjQ1OTEzNzkgNzguNjY2OTc5MSwzMy42NjMzNDQ4IDc4LjM2NTcyNzYsMzMuODcwNzkzMSBDNzguMjIxNTgwNCwzMy45NzA0NjU1IDc4LjA4MDY3MjQsMzQuMDcwMTM3OSA3Ny45Mzk3NjQ0LDM0LjE3MDYyMDcgTDc3Ljg2OTMxMDQsMzQuMjIwODYyMSBDNzcuNTk4ODMxOSwzNC40MTQ1MzQ1IDc3LjMzMDc4MjgsMzQuNjA4MjA2OSA3Ny4wNzAwMjIxLDM0LjgwNTEyMDcgQzc2LjkwODA1ODksMzQuOTI3NDgyOCA3Ni43NDc3MTUzLDM1LjA0OTg0NDggNzYuNTg5ODAxMiwzNS4xNzMwMTcyIEM3Ni4zMzQ3MDkyLDM1LjM3MTU1MTcgNzYuMDg2MDk1NywzNS41NzA4OTY2IDc1Ljg0MTUzMTMsMzUuNzczNDgyOCBMNzUuNzMzODI1OCwzNS44NjI2MjA3IEM3NS42MjQ1MDA2LDM1Ljk1MjU2OSA3NS41MTQzNjU2LDM2LjA0MjUxNzIgNzUuNDA3NDY5OSwzNi4xMzQwODYyIEM3NS4yMjc2OTA4LDM2LjI4ODA1MTcgNzUuMDU0MzkwMiwzNi40NDI4Mjc2IDc0Ljg4MTA4OTYsMzYuNTk2NzkzMSBMNzQuNjYyNDM5MywzNi43OTI4OTY2IEM3NC41NTQ3MzM3LDM2Ljg4OTMyNzYgNzQuNDQ3ODM4LDM2Ljk4NDk0ODMgNzQuMzM0NDYzOCwzNy4wOTAyOTMxIEw3NC4yNTc1MzEzLDM3LjE2NDg0NDggQzczLjk3NzMzNSwzNy40MjkwMTcyIDczLjcwNjA0NjYsMzcuNjk1NjIwNyA3My40NDUyODU5LDM3Ljk2MjIyNDEgQzczLjM1NzAxNiwzOC4wNTIxNzI0IDczLjI2OTU1NTgsMzguMTQyMTIwNyA3My4xODUzMzUsMzguMjMyMDY5IEM3Mi45MTY0NzYxLDM4LjUxMzI1ODYgNzIuNjU3MzM1LDM4Ljc5NTI1ODYgNzIuMzkzMzM1LDM5LjA5NzUxNzIgQzcyLjIyNDg5MzMsMzkuMjkxMTg5NyA3Mi4wNjUzNTk1LDM5LjQ4NDg2MjEgNzEuOTA3NDQ1NCwzOS42NzkzNDQ4IEw3MS44MjcyNzM2LDM5Ljc3NDk2NTUgQzcxLjc3NjI1NTIsMzkuODM1NzQxNCA3MS43MjYwNDY2LDM5Ljg5NTcwNjkgNzEuNjc3NDU3NywzOS45NTcyOTMxIEM3MS41NjgxMzI1LDQwLjA5NTg2MjEgNzEuNDY2MDk1Nyw0MC4yMzM2MjA3IDcxLjM2NDA1ODksNDAuMzcxMzc5MyBMNzEuMjcwMTIwMiw0MC40OTk0MTM4IEM3MS4yMTE4MTM1LDQwLjU3NzIwNjkgNzEuMTU5MTc1NSw0MC42NTU4MTAzIDcxLjEwMjQ4ODMsNDAuNzMzNjAzNCBDNzIuNjkxMzQ3MiwzNy44MDk4NzkzIDc1LjQyNzcxNTMsMzQuOTIxODEwMyA3OS4xMDkxMzg3LDMyLjM1NDYzNzkgTDc5LjEwOTEzODcsMzIuMzU0NjM3OSBaIE03MS42NjIwNzEyLDUyLjI3ODU4NjIgQzcxLjYxODM0MTEsNTIuMjI0MjkzMSA3MS41NzM4MDEyLDUyLjE3MTYyMDcgNzEuNTMyNTAwNiw1Mi4xMTczMjc2IEM3MS40MzA0NjM4LDUxLjk4NTI0MTQgNzEuMzM1NzE1Myw1MS44NTE1MzQ1IDcxLjI0MTc3NjcsNTEuNzE3MDE3MiBDNzEuMTk2NDI3LDUxLjY1MjE4OTcgNzEuMTQ5NDU3Nyw1MS41ODgxNzI0IDcxLjEwNjUzNzQsNTEuNTIzMzQ0OCBDNzEuMDE3NDU3Nyw1MS4zODk2Mzc5IDcwLjkzNDA0NjYsNTEuMjU0MzEwMyA3MC44NTMwNjUsNTEuMTE4MTcyNCBDNzAuODEwOTU0Niw1MS4wNDg0ODI4IDcwLjc2ODAzNDQsNTAuOTc4NzkzMSA3MC43MjgzNTM0LDUwLjkwODI5MzEgQzcwLjY1Mzg1MDMsNTAuNzc2MjA2OSA3MC41ODMzOTYzLDUwLjY0MjUgNzAuNTE1MzcxOCw1MC41MDc5ODI4IEM3MC40NzU2OTA4LDUwLjQzMDE4OTcgNzAuNDM2MDA5OCw1MC4zNTMyMDY5IDcwLjM5OTU2ODEsNTAuMjc0NjAzNCBDNzAuMzM4ODMxOSw1MC4xNDY1NjkgNzAuMjgyOTU0Niw1MC4wMTY5MTM4IDcwLjIyODY5NjksNDkuODg3MjU4NiBDNzAuMTkxNDQ1NCw0OS43OTgxMjA3IDcwLjE1NDE5MzksNDkuNzA4MTcyNCA3MC4xMjAxODE2LDQ5LjYxNzQxMzggQzcwLjA3NDgzMTksNDkuNDk4MjkzMSA3MC4wMzI3MjE1LDQ5LjM3NzU1MTcgNjkuOTkyMjMwNyw0OS4yNTY4MTAzIEM2OS45NTc0MDg2LDQ5LjE1MDY1NTIgNjkuOTIzMzk2Myw0OS4wNDQ1IDY5Ljg5MTgxMzUsNDguOTM4MzQ0OCBDNjkuODYwMjMwNyw0OC44MzEzNzkzIDY5LjgzMTg4NzEsNDguNzIyNzkzMSA2OS44MDQzNTM0LDQ4LjYxNDIwNjkgQzY5Ljc3Mjc3MDYsNDguNDg4NjAzNCA2OS43NDI4MDc0LDQ4LjM2MTM3OTMgNjkuNzE2ODkzMyw0OC4yMzMzNDQ4IEM2OS42OTgyNjc1LDQ4LjE0MzM5NjYgNjkuNjgwNDUxNSw0OC4wNTM0NDgzIDY5LjY2NTA2NSw0Ny45NjE4NzkzIEM2OS42NTI5MTc4LDQ3Ljg5MzgxMDMgNjkuNjQ0ODE5Niw0Ny44MjQ5MzEgNjkuNjM1MTAxOCw0Ny43NTY4NjIxIEM2OS42NTA0ODgzLDQ3LjY0NTg0NDggNjkuNjY5MTE0MSw0Ny41Mjk5NjU1IDY5LjY5MzQwODYsNDcuMzkxMzk2NiBDNjkuNzEzNjU0LDQ3LjI3NzEzNzkgNjkuNzMzODk5NCw0Ny4xNjIwNjkgNjkuNzU4MTkzOSw0Ny4wNDk0MzEgQzY5Ljc5Nzg3NDgsNDYuODYwNjIwNyA2OS44NDY0NjM4LDQ2LjY3MTgxMDMgNjkuODk2NjcyNCw0Ni40ODM4MTAzIEw2OS45MjkwNjUsNDYuMzYzMDY5IEM2OS45NDYwNzEyLDQ2LjI5NSA2OS45NjM4ODcxLDQ2LjIyNjkzMSA2OS45ODgxODE2LDQ2LjE1MDc1ODYgTDcwLjAzNTk2MDcsNDYuMDAyNDY1NSBDNzAuMDU4NjM1Niw0NS45MzExNTUyIDcwLjA4MzczOTksNDUuODU3NDEzOCA3MC4xMDg4NDQyLDQ1Ljc4NDQ4MjggQzcwLjU2MDcyMTUsNDUuNzk1ODI3NiA3MC45NjIzOTAyLDQ1LjkxOTgxMDMgNzEuMjkyNzk1MSw0Ni4xNjUzNDQ4IEM3MS45NzIyMzA3LDQ2LjY2Njk0ODMgNzIuMzQ4Nzk1MSw0Ny42NTE1MTcyIDcyLjM1Mjg0NDIsNDguOTM0MjkzMSBDNzIuMzU1MjczNiw0OS45NjQyNDE0IDcyLjExMTUxOSw1MS4xMjMwMzQ1IDcxLjY2MjA3MTIsNTIuMjc4NTg2MiBMNzEuNjYyMDcxMiw1Mi4yNzg1ODYyIFogTTc0LjAyMTg3NDgsNTcuOTQzNzA2OSBMNzQuNzU0NzU4Myw1Ny41MTk4OTY2IEw3NC43NTQ3NTgzLDU3LjUyOTYyMDcgTDc0LjczNTMyMjcsNjQuNTQ4MDE3MiBMNzQuNzM1MzIyNyw2NC41NDg4Mjc2IEM3NC43MzQ1MTI5LDY0LjYwNjM2MjEgNzQuNzQyNjExLDY0LjY2MjI3NTkgNzQuNzU0NzU4Myw2NC43MTU3NTg2IEw3NC43NTQ3NTgzLDg4Ljk4ODAxNzIgTDczLjkzOTI3MzYsODkuNDU4ODI3NiBMNzQuMDIxODc0OCw1Ny45NDM3MDY5IFogTTM3Ljc0MDUwMDYsNjkuMjE5NjU1MiBMMzcuODIyMjkyLDM3Ljk5MjIwNjkgTDcyLjUzMTgxMzUsNTguMDQ1IEw3Mi40NTQwNzEyLDg3LjgyMTkzMSBDNzIuNDQ2NzgyOCw4Ny44NjQwNjkgNzIuNDQ0MzUzNCw4Ny45MDUzOTY2IDcyLjQ0NDM1MzQsODcuOTQ3NTM0NSBDNzIuNDQ1MTYzMiw4OC4wMDUwNjkgNzIuNDQ1MTYzMiw4OC42MjgyMjQxIDcyLjQ0NTk3Myw4OS4yNTA1NjkgTDcyLjQ0NTk3Myw4OS4yNjkyMDY5IEwzNy43NDA1MDA2LDY5LjIxOTY1NTIgWiBNNTguNzMzMzU5NSwxMy4yMTc1MzQ1IEw2Ni41MjI5NzkxLDE4Ljc5ODM3OTMgTDM2LjcwNzk4NTMsMzYuMDUyMjQxNCBDMzYuNzAwNjk2OSwzNi4wNTcxMDM0IDM2LjY5NDIxODQsMzYuMDYyNzc1OSAzNi42ODc3Mzk5LDM2LjA2NzYzNzkgQzM2LjY3NzIxMjMsMzYuMDczMzEwMyAzNi42NjY2ODQ3LDM2LjA3ODk4MjggMzYuNjU2OTY2OSwzNi4wODYyNzU5IEMzNi42MzUxMDE4LDM2LjEwMTY3MjQgMzYuNjE0MDQ2NiwzNi4xMTcwNjkgMzYuNTkzODAxMiwzNi4xMzU3MDY5IEMzNi41ODczMjI3LDM2LjE0MDU2OSAzNi41ODE2NTQsMzYuMTQ2MjQxNCAzNi41NzUxNzU1LDM2LjE1MTkxMzggQzM2LjU3MTEyNjQsMzYuMTU1OTY1NSAzNi41NjcwNzczLDM2LjE2MDAxNzIgMzYuNTYyMjE4NCwzNi4xNjQwNjkgQzM2LjU1ODk3OTEsMzYuMTY3MzEwMyAzNi41NTU3Mzk5LDM2LjE3MDU1MTcgMzYuNTUyNTAwNiwzNi4xNzI5ODI4IEMzNi41Mjk4MjU4LDM2LjE5NTY3MjQgMzYuNTA4NzcwNiwzNi4yMTk5ODI4IDM2LjQ4OTMzNSwzNi4yNDUxMDM0IEMzNi40ODY5MDU1LDM2LjI0ODM0NDggMzYuNDg1Mjg1OSwzNi4yNTE1ODYyIDM2LjQ4Mjg1NjQsMzYuMjU0ODI3NiBDMzYuNDc3MTg3NywzNi4yNjIxMjA3IDM2LjQ3MjMyODgsMzYuMjY5NDEzOCAzNi40NjY2NjAxLDM2LjI3NTg5NjYgQzM2LjQ2NTg1MDMsMzYuMjc4MzI3NiAzNi40NjQyMzA3LDM2LjI3OTk0ODMgMzYuNDYyNjExLDM2LjI4MjM3OTMgQzM2LjQ1MjA4MzQsMzYuMjk3Nzc1OSAzNi40Mzk5MzYyLDM2LjMxMDc0MTQgMzYuNDMwMjE4NCwzNi4zMjY5NDgzIEMzNi4zNTAwNDY2LDM2LjQ2NzEzNzkgMzYuMzIwODkzMywzNi42MjE5MTM4IDM2LjMzNTQ2OTksMzYuNzcxODI3NiBMMzYuMjUzNjc4NSw2OC4xODk3MDY5IEwzLjg1Mzc1MjE1LDQ0Ljk3ODE4OTcgTDU4LjczMzM1OTUsMTMuMjE3NTM0NSBaIE0xMzAuNzI5MjM3LDIyLjgzMTQ2NTUgTDk0LjYxNzExNDEsMS45NjgzMjc1OSBDOTQuMjMzMjYxMywxLjc0NjI5MzEgOTMuODA0MDU4OSwxLjYzNTI3NTg2IDkzLjM3NTY2NjMsMS42MzUyNzU4NiBDOTIuOTQ2NDYzOCwxLjYzNTI3NTg2IDkyLjUxNzI2MTMsMS43NDYyOTMxIDkyLjEzMjU5ODgsMS45NjkxMzc5MyBMNjguMDM4MTQ0OCwxNS45MTM1NTE3IEw2MS4yNjA3OTUxLDExLjA1NTUzNDUgTDYxLjI2MDc5NTEsNS45NjI1MTcyNCBDNjEuMjYwNzk1MSwyLjgxMTg5NjU1IDU4LjY5NjEwOCwwLjI0NzE1NTE3MiA1NS41NDM0OTQ1LDAuMjQ3MTU1MTcyIEM1NC41NDgyMzA3LDAuMjQ3MTU1MTcyIDUzLjU2MTA2NSwwLjUxNTM3OTMxIDUyLjY4NzI3MzYsMS4wMjE4NDQ4MyBMNS40MzUzMjI3LDI4LjM2NjkzMSBDMi4wODM0OTQ0OCwzMC4zMDI4NDQ4IC0wLjAwMDE2MTk2MzE5LDMzLjkxNjE3MjQgLTAuMDAwMTYxOTYzMTksMzcuNzk1MjkzMSBMLTAuMDAwMTYxOTYzMTksNDQuOTEwOTMxIEMtMC4wMDAxNjE5NjMxOSw0NS43MTE1NTE3IDAuMzg2MTIwMjQ1LDQ2LjQ2NDM2MjEgMS4wMzcyMTIyNyw0Ni45MzAzMTAzIEwzNS41NDk5NDg1LDcxLjY2Mjg0NDggQzM1LjU2MjkwNTUsNzEuNjcyNTY5IDM1LjU3NjY3MjQsNzEuNjgyMjkzMSAzNS41ODk2Mjk0LDcxLjY5MTIwNjkgTDM1LjY2ODk5MTQsNzEuNzQ1NSBDMzUuNzIyNDM5Myw3MS43ODI3NzU5IDM1Ljc3NzUwNjcsNzEuODE3NjIwNyAzNS44MzQxOTM5LDcxLjg1MDAzNDUgTDcxLjUyNTIxMjMsOTIuNDY2MDE3MiBDNzEuOTk0OTA1NSw5Mi45MzUyMDY5IDcyLjYzMDYxMSw5My4xODk2NTUyIDczLjI3OTI3MzYsOTMuMTg5NjU1MiBDNzMuNzAwMzc3OSw5My4xODk2NTUyIDc0LjEyNzk2MDcsOTMuMDgxODc5MyA3NC41MTkxMDE4LDkyLjg1NTc5MzEgTDc2Ljc0MzY2NjMsOTEuNTY4OTY1NSBDNzcuNTExMzcxOCw5MS4xMjQ4OTY2IDc3Ljk4MzQ5NDUsOTAuMzA0ODI3NiA3Ny45ODM0OTQ1LDg5LjQxODMxMDMgTDc3Ljk4MzQ5NDUsNjUuMjQ4OTY1NSBDNzguMDA1MzU5NSw2NS4xODkgNzguMDI1NjA0OSw2NS4xMjc0MTM4IDc4LjA0MjYxMSw2NS4wNjUwMTcyIEw3OS42NTY1NzQyLDU5LjIzMzc3NTkgTDc5LjgxNjEwOCw1OS4yNzUxMDM0IEw4Ny43NzkwMjgyLDYxLjMzNjYyMDcgQzg3Ljk3NTAwMzcsNjEuMzg3NjcyNCA4OC4xNzY2NDc5LDYxLjQxNDQxMzggODguMzc5OTExNyw2MS40MTYwMzQ1IEw5MC4xMjc0OTQ1LDYxLjQzMDYyMDcgTDkwLjE0ODU0OTcsNjEuNDMwNjIwNyBDOTAuNDMzNjA0OSw2MS40MzA2MjA3IDkwLjcxNjIzMDcsNjEuMzgyIDkwLjk4NTA4OTYsNjEuMjg1NTY5IEM5Ny4wMjA2NDc5LDU5LjEyMzU2OSAxMDMuNzcyMDgzLDU3LjkzMjM2MjEgMTA5Ljk5NDcwOSw1Ny45MzIzNjIxIEMxMTYuMTk5NTE5LDU3LjkzMjM2MjEgMTIxLjc0OTE4OCw1OS4xMTU0NjU1IDEyNS42NzE5MzYsNjEuMjY5MzYyMSBDMTI1Ljk1NzgwMSw2MS41MjYyNDE0IDEyNi4zMDE5NzMsNjEuNzE0MjQxNCAxMjYuNjgwMTU3LDYxLjgxNjM0NDggQzEyNi44OTMxMzksNjEuODczODc5MyAxMjcuMTEwOTc5LDYxLjkwMjI0MTQgMTI3LjMyODAxLDYxLjkwMjI0MTQgQzEyNy43NTk2NDIsNjEuOTAyMjQxNCAxMjguMTg4MDM0LDYxLjc5MDQxMzggMTI4LjU2ODY0OCw2MS41NyBMMTMwLjcyODQyNyw2MC4zMjI4NzkzIEMxMzEuNDk2OTQyLDU5Ljg3OTYyMDcgMTMxLjk3MDY4NSw1OS4wNTk1NTE3IDEzMS45NzA2ODUsNTguMTcxNDEzOCBMMTMxLjk3MDY4NSwyNC45ODIxMjA3IEMxMzEuOTcwNjg1LDI0LjA5NDc5MzEgMTMxLjQ5Njk0MiwyMy4yNzQ3MjQxIDEzMC43MjkyMzcsMjIuODMxNDY1NSBMMTMwLjcyOTIzNywyMi44MzE0NjU1IFoiIGlkPSJGaWxsLTQ1IiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTk3LjUyODgwNzQsMjkuMzM4NDUzNCBDOTguMjg1OTg1MywyOC45MDA4NjcyIDk5LjAwMDI0MjksMjguNjc5NjQzMSA5OS42MjYyMzA3LDI4LjY3OTY0MzEgQzEwMC4wMjMwNCwyOC42Nzk2NDMxIDEwMC4zODM0MDksMjguNzY4NzgxIDEwMC42OTU5OTgsMjguOTQ5NDg3OSBDMTAxLjQ5MjA0NywyOS40MDczMzI4IDEwMS45MzMzOTYsMzAuNDM1NjYwMyAxMDEuOTM3NDQ1LDMxLjg0MjQxOSBDMTAxLjk0NjM1MywzNS4wOTUxNDMxIDk5LjY1MDUyNTIsMzkuMDcxNTA1MiA5Ni44MjAyMTg0LDQwLjcwNTk3MDcgQzk1LjU4MjgxOTYsNDEuNDE5ODg0NSA5NC40NTk2MDQ5LDQxLjU1NzY0MzEgOTMuNjU2MjY3NSw0MS4wOTQ5MzYyIEM5Mi44NTk0MDg2LDQwLjYzNTQ3MDcgOTIuNDE4MDU4OSwzOS42MDc5NTM0IDkyLjQxNDgxOTYsMzguMjAxMTk0OCBDOTIuNDA1MTAxOCwzNC45NDg0NzA3IDk0LjY5OTMxMDQsMzAuOTczNzI5MyA5Ny41Mjg4MDc0LDI5LjMzODQ1MzQgTTkyLjkxMzY2NjMsNDIuMzg3NDM2MiBDOTMuNDU4NjcyNCw0Mi43MDAyMjkzIDk0LjA2ODQ2MzgsNDIuODU2NjI1OSA5NC43MjExNzU1LDQyLjg1NjYyNTkgQzk1LjYwODczMzcsNDIuODU2NjI1OSA5Ni41NzY0NjM4LDQyLjU2NzMzMjggOTcuNTY0NDM5Myw0MS45OTY4NSBDMTAwLjg2MjAxLDQwLjA5MjUzOTcgMTAzLjQzNzIyNSwzNS42Mjk5NzA3IDEwMy40MjY2OTcsMzEuODM4MzY3MiBDMTAzLjQyMTAyOCwyOS44NzY1MjI0IDEwMi43MTQ4NjksMjguMzkxOTcwNyAxMDEuNDM4NTk5LDI3LjY1Njk4NzkgQzEwMC4xNTQyMzEsMjYuOTE3MTQzMSA5OC41MDEzOTYzLDI3LjA1NjUyMjQgOTYuNzgzNzc2NywyOC4wNDc1NzQxIEM5My40ODc4MjU4LDI5Ljk1MTg4NDUgOTAuOTE0MjMwNywzNC40MTQ0NTM0IDkwLjkyNTU2ODEsMzguMjA0NDM2MiBDOTAuOTMwNDI3LDQwLjE2NTQ3MDcgOTEuNjM3Mzk2Myw0MS42NTE2NDMxIDkyLjkxMzY2NjMsNDIuMzg3NDM2MiIgaWQ9IkZpbGwtNDMiIGZpbGw9IiNGRkZGRkYiIG1hc2s9InVybCgjbWFzay0yKSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03NC42MjY2OTc1LDU0LjgyNTc1MjggTDc3LjA0MDEwMDIsNTkuMDQ5MjA3NSBMNzcuMDQwMTAwMiw1OS4wNDkyMDc1IEM3Ny4zMDY0OTY4LDU5LjUxNTQwMTUgNzcuMTU3MTc5OCw2MC4xMDg3NjczIDc2LjcwMTg1Niw2MC4zOTMzNDQ3IEw3MS44NzUwNTA3LDYzLjQxMDA5OCBMNzEuODc1MDUwNyw2My40MTAwOTggQzcxLjQwNjcxNDEsNjMuNzAyODA4NCA3MC43ODk3NjM4LDYzLjU2MDQzNTIgNzAuNDk3MDUzNCw2My4wOTIwOTg3IEM3MC4zMzg5NjQ1LDYyLjgzOTE1NjMgNzAuMzAyMDQzNSw2Mi41Mjg4NDY4IDcwLjM5NjM2ODQsNjIuMjQ1ODcyIEw3Mi44MDk3NzExLDU1LjAwNTY2NCBMNzIuODA5NzcxMSw1NS4wMDU2NjQgQzcyLjk4NDQxODksNTQuNDgxNzIwNyA3My41NTA3Mzg4LDU0LjE5ODU2MDcgNzQuMDc0NjgyMiw1NC4zNzMyMDg0IEM3NC4zMDgwOTMxLDU0LjQ1MTAxMjEgNzQuNTA0NjI5MSw1NC42MTIxMzMxIDc0LjYyNjY5NzUsNTQuODI1NzUyOCBaIiBpZD0iVHJpYW5nbGUiIGZpbGwtb3BhY2l0eT0iMC4yNjYwNDk1OTIiIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDczLjc1ODUyMSwgNTguOTQxOTI3KSByb3RhdGUoMTgwLjAwMDAwMCkgdHJhbnNsYXRlKC03My43NTg1MjEsIC01OC45NDE5MjcpICI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",`"/>
      <ol>
        `).concat(As.map(function(Ao){var ho;return"<li>".concat((ho=Ao[navigator.language.split("-")[0]])!==null&&ho!==void 0?ho:Ao.zh,"</li>")}).join(""),`
      </ol>
    `);var vo=new pr(yo);ro.parentNode&&(ro.parentNode.insertBefore(co,ro),ro.parentNode.insertBefore(yo,ro),this.setHelperElementSize(),vo.on("tap",function(){return no.emit("vrWantsToExit")})),this.destroyHelper=function(){vo.destroy(),co.parentNode&&co.parentNode.removeChild(co),yo.parentNode&&yo.parentNode.removeChild(yo)}},to.prototype.destroyHelper=function(){},to.prototype.setHelperElementSize=function(){if(this.helperElement){var ro=new r$3.Vector2(this.element.offsetWidth,this.element.offsetHeight),no=ro.x*this.scissor.left,io=ro.y*(1-this.scissor.bottom-this.scissor.height),oo=ro.x*this.scissor.width,ao=ro.y*this.scissor.height;this.helperElement.style.marginLeft=no+"px",this.helperElement.style.marginTop=io+"px",this.helperElement.style.width=oo+"px",this.helperElement.style.height=ao+"px"}},to.prototype.intersect=function(ro){if(this.locationMotion.ended!==!1){if(this.activePanoMesh&&this.activeTime&&ro-this.activeTime>2e3){var no=this.panoMeshes.indexOf(this.activePanoMesh);return no>=0&&this.moveToPano(no,{},!0),delete this.activePanoMesh,void delete this.activeTime}for(var io=0,oo=this.panoMeshes;io<oo.length;io++)(mo=oo[io]).setCurrent(!1);for(var ao=this.camera.getWorldDirection(new r$3.Vector3),so=new r$3.Raycaster(this.camera.position,ao),uo=void 0,lo=[],co=0,fo=this.panoMeshes;co<fo.length;co++){var mo;if((mo=fo[co]).visible!==!1){var go=so.intersectObject(mo,!0)[0];go&&lo.push({panoMesh:mo,intersection:go})}}var yo=lo.sort(function(Mo,xo){return Mo.intersection.distance-xo.intersection.distance})[0];if(yo&&(uo=yo.intersection,yo.panoMesh.setCurrent(!0),this.activePanoMesh!==yo.panoMesh&&(this.activePanoMesh=yo.panoMesh,this.activeTime=ro)),uo||this.model.empty||(uo=this.model.intersectRaycaster(so)[0]),uo&&uo.face){var vo=uo.face.normal,Ao=new r$3.Quaternion;Ao.setFromUnitVectors(new r$3.Vector3(0,0,-1),vo),this.intersectMesh.quaternion.copy(Ao);var ho=vo.clone().multiplyScalar(.05),po=uo.point.clone().add(ho);this.intersectMesh.position.copy(po),this.intersectMesh.visible=!0,this.emit("intersectionOnModelUpdate",uo,this.intersectMesh)}else this.intersectMesh.visible=!1,this.emit("intersectionHidden")}else this.intersectMesh.visible=!1},to.prototype.onPanGesture=function(){},to.prototype.onTapGesture=function(){},to.prototype.onPinchGesture=function(){},to.prototype.onMouseMove=function(){},to.prototype.onMouseOut=function(){},to}(ns),hs=function(eo){function to(ro){var no,io,oo,ao,so=this,uo=to.parseArgs(ro);return(so=eo.call(this,uo)||this).currentPanoIndex=uo.initial[0],so.locationMotion=new dn({x:so.camera.pose.offset.x,y:so.camera.pose.offset.y,z:so.camera.pose.offset.z,distance:so.camera.pose.distance,modelAlpha:(io=(no=so.model.getMaterial())===null||no===void 0?void 0:no.modelAlpha)!==null&&io!==void 0?io:0,perspToOrtho:(ao=(oo=so.model.getMaterial())===null||oo===void 0?void 0:oo.perspToOrtho)!==null&&ao!==void 0?ao:0}),so}return t$2.__extends(to,eo),to.parseArgs=function(ro){return eo.parseArgs.call(this,ro)},to.initAnimationEndPose=function(ro){var no=this.parseArgs(ro);return eo.initAnimationEndPose.call(this,no)},to.prototype.destroy=function(){eo.prototype.destroy.call(this),this.locationMotion.dispose()},to.prototype.isReady=function(){return this.locationMotion.ended!==!1&&eo.prototype.isReady.call(this)},to.prototype.updateWork=function(ro,no,io,oo,ao){this.work=ro,this.currentPanoIndex=no,this.hideIntersectMesh();var so={duration:0,longitude:io.longitude,latitude:io.latitude,fov:io.fov};return this.moveToPano(no,so,ao),!0},to.prototype.updateTime=function(ro,no){if(!this.destroyed){var io={},oo={};if(!this.locationMotion.ended){this.locationMotion.update(ro),io.modelAlpha=this.locationMotion.value.modelAlpha,io.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),oo.distance=this.locationMotion.value.distance,oo.offset=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z);var ao=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z),so=hr(this.work.observers,function(uo){return uo.position.distanceTo(ao)});this.currentPanoIndex=this.work.observers.indexOf(so)}this.cameraMotion.ended||(this.cameraMotion.update(ro),oo.longitude=this.cameraMotion.value.longitude,oo.latitude=this.cameraMotion.value.latitude,oo.fov=this.cameraMotion.value.fov),dr(io)||this.model.setMaterial(io),dr(oo)||this.setCamera(oo)}},to.prototype.initAnimation=function(ro,no,io,oo){var ao,so,uo,lo=this;this.destroyed||(this.pending=!1,this.userAction=oo,this.moveToPano(ro,{longitude:(ao=no.longitude)!==null&&ao!==void 0?ao:this.defaultLongitude,latitude:cn((so=no.latitude)!==null&&so!==void 0?so:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((uo=no.fov)!==null&&uo!==void 0?uo:this.defaultFov,this.minFov,this.maxFov),duration:io,moveStartCallback:function(co,fo){lo.emit("initAnimationWillStart",co,fo,lo.userAction)},moveEndCallback:function(co,fo){lo.emit("initAnimationEnded",co,fo,lo.userAction)},moveCancelCallback:function(){var co=lo.currentPanoIndex,fo={longitude:lo.camera.pose.longitude,latitude:lo.camera.pose.latitude,fov:lo.camera.pose.fov,offset:lo.camera.pose.offset.clone()};lo.emit("initAnimationEnded",co,fo,lo.userAction)}},oo))},to.prototype.getTargetPose=function(){var ro=this.cameraMotion.getKeyFrameSegment(Re())[1],no=this.locationMotion.getKeyFrameSegment(Re())[1];return{longitude:ro.value.longitude,latitude:ro.value.latitude,fov:ro.value.fov,offset:new r$3.Vector3(no.value.x,no.value.y,no.value.z)}},to.prototype.moveToPano=function(ro,no,io){no===void 0&&(no={});var oo=this.work.observers[ro];oo&&this.moveToPosition(oo.position,no,io)},to.prototype.moveToPosition=function(ro,no,io){var oo,ao,so,uo=this;no===void 0&&(no={}),this.userAction=io;for(var lo=Re(),co=new r$3.Vector3(this.locationMotion.value.x,this.locationMotion.value.y,this.locationMotion.value.z).distanceTo(ro),fo=this.locationMotion.getProgressVelocity(lo),mo=0,go=1;go<this.locationMotion.keyframes.length;go++){var yo=this.locationMotion.keyframes[go-1].value,vo=yo.x,Ao=yo.y,ho=yo.z,po=this.locationMotion.keyframes[go].value,Mo=po.x,xo=po.y,wo=po.z;mo+=Math.sqrt(Math.pow(Mo-vo,2)+Math.pow(xo-Ao,2)+Math.pow(wo-ho,2))}var bo=co===0?0:fo*mo/co,_o=this.calculateMovingDuration(no.duration,co),To={x:ro.x,y:ro.y,z:ro.z,distance:0,modelAlpha:1,perspToOrtho:0},No={longitude:no.longitude,latitude:no.latitude,fov:no.fov},Po={longitude:(oo=No.longitude)!==null&&oo!==void 0?oo:this.camera.pose.longitude,latitude:(ao=No.latitude)!==null&&ao!==void 0?ao:this.camera.pose.latitude,fov:(so=No.fov)!==null&&so!==void 0?so:this.camera.pose.fov,offset:ro.clone()},Co=hr(this.work.observers,function(zo){return zo.position.distanceTo(ro)}),Do=this.work.observers.indexOf(Co);this.emit("moveToPano",Do,this.userAction),no.moveStartCallback&&no.moveStartCallback(Do,Po),this.emit("panoWillArrive",Do,Po,this.userAction),this.cameraMotion.set(No,_o).catch(Pe),this.locationMotion.set(To,_o,bo).then(function(){var zo=gr(uo.camera.pose);no.moveEndCallback&&no.moveEndCallback(Do,zo),uo.emit("panoArrived",Do,zo,uo.userAction)},function(){no.moveCancelCallback&&no.moveCancelCallback(),uo.emit("moveToPanoCanceled",Do)})},to.prototype.onTapGesture=function(ro){var no=ro.pointers.map(function(yo){return ni(yo,["x","y"])});if(!this.emit("wantsGesture","tap",no,!0)){var io=this.relativeClientPosition(ro.center),oo=new r$3.Raycaster;if(oo.setFromCamera(io,this.camera),!this.emit("wantsTapGesture",oo,io,!0)){this.emit("gesture","tap",no,!0),this.emit("tapGesture",oo,io,!0),this.interiaMovement=!1;var ao=this.model.intersectRaycaster(oo)[0];if(ao&&ao.face){var so=ao.face.normal,uo=ao.point;if(new r$3.Vector3(0,1,0).angleTo(so)>Math.PI/3){var lo=this.camera.position.clone().setY(uo.y),co=uo.clone().sub(lo).setLength(.3),fo=uo.clone().sub(co);oo.set(fo,new r$3.Vector3(0,-1,0)),ao=this.model.intersectRaycaster(oo)[0]}}if(ao){var mo=ao.point.clone(),go=hr(this.work.observers.filter(function(yo){return Math.abs(yo.standingPosition.y-mo.y)<1}),function(yo){return yo.standingPosition.distanceTo(mo)});if(go)return mo.y=go.position.y,void this.moveToPosition(mo,{},!0)}this.cameraBounce()}}},to}(Sr),ds=function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}(`{vs|z-rp@-}n{|]|vv|{H{vs|z-znA-}n{|Znv\x07H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}H<<{vs|z-sy|n-pnyrHn\bv{t-rp@-}n{|d|yq]|vv|{H<<-n\bv{t-sy|n-vU|yrHp|{-sy|n-]V-J-@;>A>BF?CHp|{-sy|n-aNb-J-C;?E@>EB?Hp|{-sy|n-pnyr-J->@;>Hrp?-|P||q5rp@-rp|6-
--sy|n--J-yr{tu5rp|6H--sy|n-urn-J-np|5:rp|;\b-<-6H--sy|n-}uv-J-nn{5rp|;\x079-rp|;	6H--r{-rp?5=;B-8-}uv-<-aNb9-urn-<-]V6H\f|vq-znv{56-
--rpA-|yq]|vv|{-J-z|qryZnv\x07-7-rpA5}|vv|{9->;=6H--}n{|d|yq]|vv|{-J-5rpA5|yq]|vv|{;\x07\b	9->;=6-7-}n{|Znv\x076;\x07\b	H--rp?-p||q-J-|P||q5}n{|d|yq]|vv|{6H--sy|n-qvn{pr-J-pnyrH--vs-5p||q;\b-I-=;>B6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-=;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5=;>B-:-p||q;\b66H----qvn{pr-J-pnyrH--\f-ryr-vs-5p||q;\b-KJ-=;>B-33-p||q;\b-IJ-=;EB6-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079-5p||q;\b-:-=;>B6-<-=;D6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----vs5-}n{|Qv}ynprzr{;\x07-JJ-=;=6
------qvn{pr-J-pnyrH----\fryr
------qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----\f--\f-ryr-
----rp?-n{s|zrqP||q-J-rp?5p||q;\x079->;=6H----rpA-}n{|Qv}ynprzr{-J-r\x07r?Q5}n{|Qv}ynprzr{Zn}9-n{s|zrqP||q6H----qvn{pr-J-pnyr-7-}n{|Qv}ynprzr{;\x07H----qvn{pr-J-qvn{pr-7-p|5]V-7-5p||q;\b-:-=;EB66H----qvn{pr-J-pnyrH--\f--rpA-ry]|vv|{-J-rpA5}|vv|{-8-}n{|]|vv|{-8-{|znyv	r5|yq]|vv|{;\x07\b	6-7-qvn{pr9->;=6H--tyl]|vv|{-J-}|wrpv|{Znv\x07-7-z|qrycvrZnv\x07-7-ry]|vv|{H\f`),gs=function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];var ro=113,no=126,io=0,oo="";return arguments[io].split(oo).map(function(ao){return ao.charCodeAt(io)>no?ao:String.fromCharCode((ao.charCodeAt(io)+ro)%no)}).join(oo)}(`{vs|z-sy|n-|}npv\bH{vs|z-nz}yrPor-}n{|Zn}H{vs|z-nz}yr?Q-}n{|Qv}ynprzr{Zn}Hn\bv{t-rp@-}n{|d|yq]|vv|{H|vq-znv{56-
--rpA-}n{|P|y|-J-r\x07rPor5}n{|Zn}9-}n{|d|yq]|vv|{;\x07\b	6H--tylSntP|y|-J-rpA5}n{|P|y|;to9-|}npv\b6H\f`),ps=Object.assign({opacity:new r$3.Uniform(1),scale:new r$3.Uniform(13.1),panoMap:new r$3.Uniform(null),panoDisplacementMap:new r$3.Uniform(null),panoPosition:new r$3.Uniform(new r$3.Vector3),panoMatrix:new r$3.Uniform(new r$3.Matrix4)},{emissive:new r$3.Uniform(new r$3.Color(0)),emissiveMap:new r$3.Uniform(null),specular:new r$3.Uniform(new r$3.Color(1118481)),specularMap:new r$3.Uniform(null),normalMap:new r$3.Uniform(null),bumpMap:new r$3.Uniform(null),shininess:new r$3.Uniform(30)},r$3.UniformsLib.common,r$3.UniformsLib.lights),Ms=new r$3.SphereBufferGeometry(.01,128,128),fs=function(){function eo(to){to===void 0&&(to={}),this.textureLoader=new Ti({allowHosts:this.allowHosts,networkSubscribe:this.networkSubscribe}),this.allowHosts=to.allowHosts,this.networkSubscribe=to.networkSubscribe}return eo.prototype.setAllowHosts=function(to){this.allowHosts=to,this.textureLoader.setAllowHosts(to)},eo.prototype.setNetworkSubscribe=function(to){this.networkSubscribe=to,this.textureLoader.setNetworkSubscribe(to)},eo.prototype.load=function(to,ro,no,io,oo,ao,so,uo){var lo=[0,0],co=function(mo,go){lo[go]=mo,so(.8*lo[0]+.2*lo[1])},fo=[this.textureLoader.load(to,{viaAjax:!0},void 0,void 0,function(mo){return co(mo,1)},uo),this.textureLoader.loadCube(ro,{viaAjax:!0},void 0,void 0,function(mo){return co(mo,0)},uo)];return Promise.all(fo).then(function(mo){var go=mo[0],yo=mo[1],vo={body:function(Ao,ho,po,Mo){var xo=new r$3.ShaderMaterial({side:r$3.BackSide,vertexShader:ds,fragmentShader:gs,transparent:!0,uniforms:r$3.UniformsUtils.clone(ps)}),wo=ho;return wo.needsUpdate=!0,wo.minFilter=r$3.LinearFilter,wo.magFilter=r$3.LinearFilter,Ao.needsUpdate=!0,Ao.minFilter=r$3.LinearFilter,Ao.magFilter=r$3.LinearFilter,xo.uniforms.opacity.value=0,xo.uniforms.panoMap.value=wo,xo.uniforms.panoDisplacementMap.value=Ao,xo.uniforms.panoPosition.value=po,xo.uniforms.panoMatrix.value=Mo,Object.assign(new r$3.Mesh(Ms,xo),{frustumCulled:!1,dispose:function(){this.material instanceof r$3.ShaderMaterial&&(this.material.uniforms.panoDisplacementMap.value.dispose(),this.material.uniforms.panoDisplacementMap.value=null,this.material.dispose())}})}(go.body,yo.body,no,io),meta:t$2.__spreadArray([go.meta],yo.meta,!0)};return oo(vo),vo}).catch(function(mo){for(var go=0,yo=fo;go<yo.length;go++)yo[go].then(function(vo){return vo.body.dispose()}).catch(Pe);return ao(mo),Promise.reject(mo)})},eo}(),ys=new r$3.Vector3(-1,1,1),ms=function(eo){function to(ro){var no,io,oo,ao,so,uo,lo,co=this,fo=to.parseArgs(ro);return(co=eo.call(this,fo)||this).currentPanoIndex=fo.initial[0],co.maxAccessibleDistance=fo.maxAccessibleDistance,co.panoTapTriggerRadius=fo.panoTapTriggerRadius,co.panoCircleMeshCreator=fo.panoCircleMeshCreator,co.boundingMesh=co.generateBoundingMesh(),co.boundingMesh.setMaterial(co.model.getMaterial()||{}),co.boundingMesh.visible=!1,co.scene.add(co.boundingMesh),co.panoModelGroup=new r$3.Group,co.panoModelGroup.name="panoModels",co.scene.add(co.panoModelGroup),co.panoMeshes=[],co.updatePanoMeshes(),co.helper.remove(co.intersectMesh),co.locationMotion=new dn({count:0,distance:co.camera.pose.distance,modelAlpha:(io=(no=co.model.getMaterial())===null||no===void 0?void 0:no.modelAlpha)!==null&&io!==void 0?io:0,perspToOrtho:(ao=(oo=co.model.getMaterial())===null||oo===void 0?void 0:oo.perspToOrtho)!==null&&ao!==void 0?ao:0}),co.panoResources={},co.panoResources[co.locationMotion.keyframes[0].key=co.locationMotion.keyframes[1].key=Xn()]={panoIndex:co.currentPanoIndex,workCode:co.work.workCode,matrix:(lo=(uo=(so=co.model.getMaterial())===null||so===void 0?void 0:so.pano1)===null||uo===void 0?void 0:uo.matrix)!==null&&lo!==void 0?lo:new r$3.Matrix4,position:co.camera.pose.offset.clone(),effect:"fly"},co.depthTextureLoader=new fs({allowHosts:co.work.allowHosts,networkSubscribe:co.networkSubscribe}),co}return t$2.__extends(to,eo),to.parseArgs=function(ro){var no,io,oo,ao=eo.parseArgs.call(this,ro);return t$2.__assign(t$2.__assign({},ao),{maxAccessibleDistance:(no=ro.maxAccessibleDistance)!==null&&no!==void 0?no:5,panoTapTriggerRadius:(io=ro.panoTapTriggerRadius)!==null&&io!==void 0?io:1,panoCircleMeshCreator:(oo=ro.panoCircleMeshCreator)!==null&&oo!==void 0?oo:function(){return new _n}})},to.initAnimationEndPose=function(ro){var no=this.parseArgs(ro);return eo.initAnimationEndPose.call(this,no)},to.prototype.destroy=function(){var ro,no=this;if(eo.prototype.destroy.call(this),this.locationMotion.dispose(),delete this.pendingTextureTask,this.model&&(this.model.visible=!0),this.panoModelGroup){for(var io=0,oo=this.panoModelGroup.children;io<oo.length;io++){var ao=oo[io];typeof ao.dispose=="function"&&ao.dispose()}this.scene.remove(this.panoModelGroup)}this.boundingMesh&&(this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.panoMeshes&&(this.panoMeshes.forEach(function(yo){no.helper.remove(yo),yo.dispose()}),this.panoMeshes.length=0);for(var so=(ro=this.model.getMaterial())!==null&&ro!==void 0?ro:{},uo=so.pano0,lo=so.pano1,co=0,fo=Object.keys(this.panoResources);co<fo.length;co++){var mo=fo[co],go=this.panoResources[mo];go.panoModel&&go.panoModel.material.uniforms.panoMap.value!==(uo==null?void 0:uo.map)&&go.panoModel.material.uniforms.panoMap.value!==(lo==null?void 0:lo.map)&&(this.panoModelGroup.remove(go.panoModel),go.panoModel.material.uniforms.panoMap.value.dispose(),go.panoModel.dispose(),delete go.panoModel),delete this.panoResources[mo]}this.interiaMovement=!1},to.prototype.isReady=function(){return this.locationMotion.ended===!1&&eo.prototype.isReady.call(this)},to.prototype.updateWork=function(ro,no,io,oo,ao){this.userAction=ao,this.work=ro,this.currentPanoIndex=no,this.depthTextureLoader.setAllowHosts(this.work.allowHosts);var so={},uo=!0;this.boundingMesh&&(so=this.boundingMesh.getMaterial()||{},uo=this.boundingMesh.visible,this.scene.remove(this.boundingMesh),this.boundingMesh.dispose()),this.boundingMesh=this.generateBoundingMesh(!0),this.boundingMesh.visible=uo,this.boundingMesh.setMaterial(so),this.scene.add(this.boundingMesh),this.hideIntersectMesh(),this.updatePanoMeshes();for(var lo=0,co=this.panoMeshes;lo<co.length;lo++)co[lo].visible=!1;return this.moveToPano(no,{effect:"fade",duration:oo,longitude:io.longitude,latitude:io.latitude,fov:io.fov},ao),!0},to.prototype.updateTime=function(ro,no){var io,oo,ao;if(!this.destroyed){var so={},uo={};if(this.locationMotion.ended===!1){this.locationMotion.update(ro);var lo=this.locationMotion.getKeyFrameSegment(ro),co=lo[0],fo=lo[1],mo=this.panoResourceFromLocationMotionKeyframe(co),go=this.panoResourceFromLocationMotionKeyframe(fo),yo=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[0]),vo=this.panoResourceFromLocationMotionKeyframe(this.locationMotion.keyframes[this.locationMotion.keyframes.length-1]),Ao=new r$3.Vector3().copy(mo.position),ho=new r$3.Vector3().copy(go.position),po=this.locationMotion.value.count-fo.value.count+1;so.modelAlpha=this.locationMotion.value.modelAlpha,so.perspToOrtho=cn(1-10*(1-this.locationMotion.value.perspToOrtho),0,1),so.useBlackTransition=go.effect==="instant";for(var Mo=0,xo=this.panoModelGroup.children;Mo<xo.length;Mo++){var wo=xo[Mo];wo.visible=wo===mo.panoModel||wo===go.panoModel}mo.panoModel&&(mo.panoModel.material.uniforms.opacity.value=1-po,mo.panoModel.material.depthTest=po!==0),go.panoModel&&(go.panoModel.material.uniforms.opacity.value=po,go.panoModel.material.depthTest=po!==1),go.panoModel&&(po<1?mo.panoModel&&(so.pano0={map:mo.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:mo.matrix}):so.pano0={map:go.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:go.matrix},so.pano1={map:go.panoModel.material.uniforms.panoMap.value,luminanceMap:null,matrix:go.matrix}),go.effect==="fade"&&(so.pano0&&(so.pano0={map:so.pano0.map,luminanceMap:null,matrix:mo.matrix.clone().setPosition(go.position)}),Ao.copy(ho)),so.progress=po,uo.distance=this.locationMotion.value.distance,uo.offset=new r$3.Vector3(Ao.x+(ho.x-Ao.x)*po,Ao.y+(ho.y-Ao.y)*po,Ao.z+(ho.z-Ao.z)*po);for(var bo=[],_o=[],To=0,No=this.locationMotion.keyframes;To<No.length;To++){var Po=No[To],Co=Po.key,Do=Po.progress;Co!==void 0&&(bo.push(Co),Do>=this.locationMotion.progress&&_o.push(Co))}for(var zo=0,Ro=Object.keys(this.panoResources);zo<Ro.length;zo++){var Lo=Ro[zo];if(!(_o.indexOf(Lo)>=0)){var $o=this.panoResources[Lo];if($o.panoModel){if($o.panoModel.material.uniforms.panoMap.value===((io=so.pano0)===null||io===void 0?void 0:io.map)||$o.panoModel.material.uniforms.panoMap.value===((oo=so.pano1)===null||oo===void 0?void 0:oo.map))continue;this.panoModelGroup.remove($o.panoModel),$o.panoModel.material.uniforms.panoMap.value.dispose(),$o.panoModel.dispose(),delete $o.panoModel}bo.indexOf(Lo)>=0||delete this.panoResources[Lo]}}mo.workCode===go.workCode?this.currentPanoIndex=po<.5?mo.panoIndex:go.panoIndex:this.currentPanoIndex=go.panoIndex,this.emit("movingToPano",vo.panoIndex,yo.panoIndex,this.locationMotion.progress)}if(this.cameraMotion.ended===!1&&(this.cameraMotion.update(ro),uo.longitude=this.cameraMotion.value.longitude,uo.latitude=this.cameraMotion.value.latitude,uo.fov=this.cameraMotion.value.fov),dr(so)===!1&&(this.model.setMaterial(so),this.boundingMesh.setMaterial(so)),dr(uo)===!1&&this.setCamera(uo),this.camera.pose.distance>.1)for(var jo=0;jo<this.work.observers.length;jo++)(Go=this.panoMeshes[jo])&&(Go.visible=!1);else{var Wo=this.work.observers[this.currentPanoIndex];if(Wo){var Ko=Wo.visibleNodes.concat(this.currentPanoIndex),Jo=this.getForwardPanoIndexOrNot();for(jo=0;jo<this.work.observers.length;jo++){var Go,Xo=this.work.observers[jo];if(Go=this.panoMeshes[jo])if(Xo.loadable||Xo.active)if(Ko.indexOf(jo)!==-1){Go.visible=!0;var va=Go.position.clone().setY(this.camera.position.y).distanceTo(this.camera.position);Go.setCurrent(Jo===jo),Go.setOpacity(va<.01?0:cn(2/va,.5,1)),Go.updateTime&&Go.updateTime(ro,no)}else Go.visible=!1;else Go.visible=!1}}}this.boundingMesh.visible=Boolean((ao=this.boundingMesh.getMaterial())===null||ao===void 0?void 0:ao.pano0)&&this.boundingMesh.boundingBox.containsPoint(this.camera.position)}},to.prototype.getTargetPose=function(){var ro=this.cameraMotion.getKeyFrameSegment(Re())[1],no=this.locationMotion.getKeyFrameSegment(Re())[1],io=this.panoResourceFromLocationMotionKeyframe(no),oo=this.work.observers[io.panoIndex];return{longitude:ro.value.longitude,latitude:ro.value.latitude,fov:ro.value.fov,offset:oo?oo.position.clone():this.camera.position.clone()}},to.prototype.moveToPano=function(ro,no,io){var oo,ao,so=this;no===void 0&&(no={});var uo=this.work.observers[ro].images.depth,lo=t$2.__assign({key:"pano.".concat(ro),basisLoaderInitialized:wi.isInitialized()},ni(this.imageOptions,["format","size","quality"])),co=(oo=this.imageOptions.transform)!==null&&oo!==void 0?oo:ht,fo={right:co(this.work.observers[ro].images.right,t$2.__assign(t$2.__assign({},lo),{key:"pano.".concat(ro,".right")})),left:co(this.work.observers[ro].images.left,t$2.__assign(t$2.__assign({},lo),{key:"pano.".concat(ro,".left")})),up:co(this.work.observers[ro].images.up,t$2.__assign(t$2.__assign({},lo),{key:"pano.".concat(ro,".up")})),down:co(this.work.observers[ro].images.down,t$2.__assign(t$2.__assign({},lo),{key:"pano.".concat(ro,".down")})),front:co(this.work.observers[ro].images.front,t$2.__assign(t$2.__assign({},lo),{key:"pano.".concat(ro,".front")})),back:co(this.work.observers[ro].images.back,t$2.__assign(t$2.__assign({},lo),{key:"pano.".concat(ro,".back")}))},mo=this.work.observers[ro],go=mo.position,yo=mo.quaternion,vo=new r$3.Matrix4().compose(go,yo,new r$3.Vector3(-1,1,1)),Ao="pano:"+Cr(fo);if(this.pendingTextureTask){if(this.pendingTextureTask.hash===Ao)return;var ho=this.pendingTextureTask.panoIndex;(ao=this.panoMeshes[ho])===null||ao===void 0||ao.setProgress(0),this.emit("textureAbort",ho,this.work.observers[ho]),this.pendingTextureTask.onError(new Error("texture aborted"))}this.pending=!0,this.pendingTextureTask={panoIndex:ro,hash:Ao,onLoad:function(Mo){so.pending=!1,so.destroyed?Mo.body.dispose():(Mo.body.name=Ao,so.emit("panoLoaded",ro),so.doMoveToPano(ro,Mo.body,no,io))},onError:function(Mo){so.pending=!1,no.moveCancelCallback&&no.moveCancelCallback(),so.emit("panoLoadError",Mo,ro),so.emit("moveToPanoCanceled",ro)}};var po=this.panoMeshes[ro];po&&po.tap&&po.tap(),this.depthTextureLoader.load(uo,fo,go,vo,function(Mo){var xo,wo;((xo=so.pendingTextureTask)===null||xo===void 0?void 0:xo.hash)===Ao?(so.pendingTextureTask.onLoad(Mo),(wo=so.panoMeshes[ro])===null||wo===void 0||wo.setProgress(0),delete so.pendingTextureTask,so.emit("textureLoaded",ro,so.work.observers[ro],Mo.meta)):Mo.body.dispose()},function(Mo){var xo,wo;((xo=so.pendingTextureTask)===null||xo===void 0?void 0:xo.hash)===Ao&&(so.pendingTextureTask.onError(Mo),(wo=so.panoMeshes[ro])===null||wo===void 0||wo.setProgress(0),delete so.pendingTextureTask,so.emit("textureError",Mo,ro,so.work.observers[ro]),so.emit("error",Mo))},function(Mo){var xo,wo;so.emit("textureLoading",Mo,ro,so.work.observers[ro]),((xo=so.pendingTextureTask)===null||xo===void 0?void 0:xo.hash)===Ao&&((wo=so.panoMeshes[ro])===null||wo===void 0||wo.setProgress(Mo))},this.renderer),this.emit("textureStartLoad",ro,this.work.observers[ro])},to.prototype.initAnimation=function(ro,no,io,oo){var ao,so,uo,lo=this;if(!this.destroyed){var co=!1;this.pending=!1,this.userAction=oo,this.moveToPano(ro,{longitude:(ao=no.longitude)!==null&&ao!==void 0?ao:this.defaultLongitude,latitude:cn((so=no.latitude)!==null&&so!==void 0?so:this.defaultLatitude,this.minLatitude,this.maxLatitude),fov:cn((uo=no.fov)!==null&&uo!==void 0?uo:this.defaultFov,this.minFov,this.maxFov),duration:io,moveStartCallback:function(fo,mo){co=!0,lo.emit("initAnimationWillStart",fo,mo,lo.userAction)},moveEndCallback:function(fo,mo){lo.emit("initAnimationEnded",fo,mo,lo.userAction)},moveCancelCallback:function(){var fo=gr(lo.camera.pose);co===!1&&lo.emit("initAnimationWillStart",lo.currentPanoIndex,fo,lo.userAction),lo.emit("initAnimationEnded",lo.currentPanoIndex,fo,lo.userAction)}},oo)}},to.prototype.panoResourceFromLocationMotionKeyframe=function(ro){return this.panoResources[ro.key]},to.prototype.locationMotionKeyframesLength=function(ro){for(var no=0,io=1;io<ro.length;io++){var oo=this.panoResourceFromLocationMotionKeyframe(ro[io-1]).position,ao=this.panoResourceFromLocationMotionKeyframe(ro[io]).position;no+=oo.distanceTo(ao)*(ro[io].value.count-ro[io-1].value.count)}return no},to.prototype.updatePanoMeshes=function(){for(var ro={},no=0,io=this.panoMeshes;no<io.length;no++)ro[(uo=io[no]).name]=uo;this.panoMeshes.length=0;for(var oo=0;oo<this.work.observers.length;oo++){var ao="panoCircle_".concat(this.work.workCode,"_").concat(oo),so=this.work.observers[oo],uo=void 0;ro[ao]?(uo=ro[ao],delete ro[ao]):((uo=this.panoCircleMeshCreator()).name=ao,this.helper.add(uo)),uo.position.copy(so.standingPosition),this.panoMeshes[oo]=uo}for(var lo=0,co=Object.keys(ro);lo<co.length;lo++){var fo=co[lo];this.helper.remove(ro[fo]),ro[fo].dispose(),delete ro[fo]}},to.prototype.generateBoundingMesh=function(ro){ro===void 0&&(ro=!1);for(var no=this.model.bounding.clone(),io=0,oo=this.work.observers;io<oo.length;io++){var ao=oo[io];no.expandByPoint(ao.standingPosition),no.expandByPoint(new r$3.Vector3().fromArray([ao.position.x,2*ao.position.y-ao.standingPosition.y,ao.position.z]))}ro&&no.expandByPoint(this.camera.position);var so=nr(no,new r$3.Vector3(1,0,1));return so.name="panorama_bounding",so.frustumCulled=!1,so},to.prototype.doMoveToPano=function(ro,no,io,oo){var ao,so,uo,lo,co=this;io===void 0&&(io={}),this.userAction=oo;var fo=Re(),mo=Xn(),go=this.work.observers[ro],yo=this.panoResources[mo]={panoIndex:ro,workCode:this.work.workCode,effect:(ao=io.effect)!==null&&ao!==void 0?ao:"fly",panoModel:no,matrix:new r$3.Matrix4().compose(go.position,go.quaternion,ys),position:go.position.clone()};no.visible=!1,no.renderOrder=-1,this.panoModelGroup.add(no);var vo,Ao,ho;if(this.locationMotion.ended){var po=this.locationMotion.getKeyFrameSegment(fo);po[0];var Mo=po[1],xo=this.locationMotion.value,wo=this.panoResourceFromLocationMotionKeyframe(Mo).position,bo=yo.position;vo=Math.max(wo.distanceTo(bo),1),Ao=[{key:Mo.key,progress:0,value:t$2.__assign(t$2.__assign({},xo),{count:0})},{key:mo,progress:1,value:{distance:0,perspToOrtho:0,modelAlpha:0,count:1}}],ho=0}else{var _o=this.locationMotion.getKeyFrameSegment(fo),To=_o[0],No=(Mo=_o[1],xo=this.locationMotion.value,this.panoResourceFromLocationMotionKeyframe(To).position),Po=(wo=this.panoResourceFromLocationMotionKeyframe(Mo).position,bo=yo.position,Mo.value.count-xo.count),Co=Math.max(No.distanceTo(wo),1)*Po;vo=Co+Math.max(wo.distanceTo(bo),1),Ao=[{key:To.key,progress:0,value:t$2.__assign({},xo)},{key:Mo.key,progress:Co/vo,value:Mo.value},{key:mo,progress:1,value:{count:Mo.value.count+1,distance:0,perspToOrtho:0,modelAlpha:0}}];var Do=this.locationMotionKeyframesLength(this.locationMotion.keyframes),zo=this.locationMotionKeyframesLength(Ao);ho=this.locationMotion.getProgressVelocity(fo)*Do/zo}var Ro=this.calculateMovingDuration(io.duration,vo),Lo={longitude:io.longitude,latitude:io.latitude,fov:io.fov},$o={longitude:(so=Lo.longitude)!==null&&so!==void 0?so:this.camera.pose.longitude,latitude:(uo=Lo.latitude)!==null&&uo!==void 0?uo:this.camera.pose.latitude,fov:(lo=Lo.fov)!==null&&lo!==void 0?lo:this.camera.pose.fov,offset:go.position.clone()};io.moveStartCallback&&io.moveStartCallback(ro,$o),this.emit("panoWillArrive",ro,$o,this.userAction),this.cameraMotion.set(Lo,Ro).catch(Pe),this.locationMotion.setKeyframes(Ao,Ro,ho).then(function(){var jo={longitude:co.camera.pose.longitude,latitude:co.camera.pose.latitude,fov:co.camera.pose.fov,offset:co.camera.pose.offset.clone()};io.moveEndCallback&&io.moveEndCallback(ro,jo),co.emit("panoArrived",ro,jo,oo)},function(){io.moveCancelCallback&&io.moveCancelCallback(),co.emit("moveToPanoCanceled",ro)})},to.prototype.getForwardPanoIndexOrNot=function(ro){var no=this,io=this.camera.getWorldDirection(new r$3.Vector3),oo=this.camera.position.clone(),ao=this.work.observers[this.currentPanoIndex];if(!ao)return null;var so=ao.accessibleNodes.filter(function(ho){if(ho===no.currentPanoIndex)return!1;var po=no.work.observers[ho],Mo=po.standingPosition.clone().sub(oo);return Mo.length()!==0&&!(Mo.angleTo(new r$3.Vector3(0,-1,0))<Math.PI/12)&&(po.loadable||po.active)}),uo=(ro?ro.ray.direction.clone():io.clone()).setY(0);if(uo.length()===0)return null;for(var lo=so.slice().sort(function(ho,po){var Mo=no.work.observers[ho].position.clone().setY(oo.y),xo=no.work.observers[po].position.clone().setY(oo.y);return Mo.distanceTo(oo)-xo.distanceTo(oo)}),co=0,fo=[Math.PI/8,Math.PI/6,Math.PI/4,Math.PI/3];co<fo.length;co++)for(var mo=fo[co],go=0,yo=lo;go<yo.length;go++){var vo=yo[go],Ao=this.work.observers[vo].position.clone().setY(oo.y).sub(oo);if(Ao.length()!==0&&uo.angleTo(Ao)<mo)return vo}return null},to.prototype.onTapGesture=function(ro){var no=this,io=ro.pointers.map(function(jo){return ni(jo,["x","y"])});if(!this.emit("wantsGesture","tap",io,!0)){var oo=this.relativeClientPosition(ro.center),ao=new r$3.Raycaster;if(ao.setFromCamera(oo,this.camera),!this.emit("wantsTapGesture",ao,oo,!0)){this.emit("gesture","tap",io,!0),this.emit("tapGesture",ao,oo,!0),this.interiaMovement=!1;var so=this.camera.getWorldDirection(new r$3.Vector3).setY(0),uo=null,lo=this.work.observers[this.currentPanoIndex];if(lo){var co=lo.accessibleNodes.filter(function(jo){if(jo===no.currentPanoIndex)return!1;var Wo=no.work.observers[jo];return!(Wo.position.distanceTo(no.camera.position)>no.maxAccessibleDistance)&&(Wo.loadable||Wo.active)}),fo=ao.intersectObject(this.boundingMesh,!0)[0];if(fo){var mo=hr(co,function(jo){var Wo=no.work.observers[jo].standingPosition.clone();return Wo.clone().sub(no.camera.position).setY(0).angleTo(so)>Math.PI/2?1/0:Wo.distanceTo(fo.point)},!0),go=mo[0];mo[1]<this.panoTapTriggerRadius&&(uo=go)}Vi(uo)&&(uo=this.getForwardPanoIndexOrNot(ao));for(var yo=0,vo=this.locationMotion.keyframes;yo<vo.length;yo++){var Ao=vo[yo],ho=this.panoResourceFromLocationMotionKeyframe(Ao);if(!(Ao.progress<this.locationMotion.progress)&&ho.panoIndex===uo){uo=null;break}}if(this.emit("panoSelected",uo),Vi(uo))this.locationMotion.ended===!0&&this.cameraBounce();else{var po=this.work.observers[uo];if(po.active){for(var Mo={},xo=Math.PI/6,wo=Math.PI/12,bo=new r$3.Vector3(0,1,0),_o=po.position.clone().setY(0).sub(lo.position.clone().setY(0)).normalize(),To=_o.clone().applyAxisAngle(bo,xo),No=_o.clone().applyAxisAngle(bo,-xo),Po=[],Co=[],Do=[],zo=0,Ro=po.accessibleNodes;zo<Ro.length;zo++)if((go=Ro[zo])!==this.currentPanoIndex&&go!==uo){var Lo=this.work.observers[go].position.clone().sub(po.position).setY(0);_o.angleTo(Lo)<xo?Do.push(Lo):To.angleTo(Lo)<xo?Po.push(Lo):No.angleTo(Lo)<xo&&Co.push(Lo)}var $o=(Do.length>0?Do:t$2.__spreadArray(t$2.__spreadArray([],Po,!0),Co,!0)).slice().sort(function(jo,Wo){return jo.angleTo(_o)-Wo.angleTo(_o)})[0];$o&&$o.angleTo(so)>wo&&(Mo.longitude=Math.atan2(-$o.x,-$o.z)),this.cameraMotion.value.latitude<-Math.PI/4&&(Mo.latitude=cn(0,this.minLatitude,this.maxLatitude)),this.emit("wantsMoveToPano",uo,Mo,!0)}else this.panoMeshes[uo]&&(this.panoMeshes[uo].setDisabled(!1),this.panoMeshes[uo].setLoading(!0))}}}}},to}(Sr),vs=["Panorama","DepthPanorama","Model"],Ns={Floorplan:xr,Topview:jr,Panorama:ns,VRPanorama:ls,Model:hs,DepthPanorama:ms};function Ds(eo){for(var to=0,ro=vs;to<ro.length;to++){var no=ro[to];if(typeof eo=="string"){if(no===eo)return!0}else if(eo instanceof Tr&&eo instanceof Ns[no])return!0}return!1}var Es=["cameraDirectionUpdate","cameraUpdate","cameraPositionUpdate","panoSelected","moveToPano","moveToPanoCanceled","panoWillArrive","movingToPano","panoArrived","panoWillLoad","panoLoaded","panoLoadError","initAnimationEnded","initAnimationWillStart","wantsGesture","gesture","wantsTapGesture","tapGesture","wantsPressGesture","pressGesture","wantsPanGesture","wantsInteriaPan","panGesture","interiaPan","wantsPinchGesture","pinchGesture","wantsMouseWheel","mouseWheel","wantsShowIntersectionOnModel","intersectionOnModelUpdate","intersectionHidden","textureStartLoad","textureLoading","textureAbort","textureLoaded","textureError"];function ws(eo){for(var to,ro,no={},io=0,oo=eo.split(/(\;|\,)/);io<oo.length;io++){var ao=oo[io].split("="),so=(to=ao[0])===null||to===void 0?void 0:to.trim(),uo=(ro=ao[1])===null||ro===void 0?void 0:ro.trim();so&&uo&&(no[so]=uo)}return no}function Is(){for(var eo,to=document.getElementsByTagName("meta"),ro=0;ro<to.length;ro++){var no=to[ro];if(no.getAttribute("name")==="viewport"){var io=ws((eo=no.getAttribute("content"))!==null&&eo!==void 0?eo:""),oo=Number(io["initial-scale"]);if(!isNaN(oo))return oo}}return 1}var Ts=[351,63],xs=[20,20],js=new Float32Array([-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0]),zs=new Float32Array([0,0,1,0,0,1,1,1]),Cs=new Uint8Array([0,1,2,1,3,2]),bs=new r$3.BufferGeometry;bs.setAttribute("position",new r$3.BufferAttribute(js,3)),bs.setAttribute("uv",new r$3.BufferAttribute(zs,2)),bs.setIndex(new r$3.BufferAttribute(Cs,1));var Ss=new r$3.MeshBasicMaterial({transparent:!0,depthTest:!1}),Ls=new r$3.Mesh(bs,Ss),Os=new r$3.Scene;Os.add(Ls);var Bs=new r$3.OrthographicCamera(-.5,.5,.5,-.5,.1,1);Bs.position.set(0,0,.5),Bs.lookAt(0,0,0);var Qs=new r$3.Vector4,ks=new r$3.Vector4;function Ps(eo){if(Ss.map){var to=eo.getViewport(Qs),ro=eo.getScissor(ks),no=eo.getScissorTest(),io=eo.autoClear;eo.setViewport(ro.x+xs[0]/3,ro.y+xs[1]/3,Ts[0]/3,Ts[1]/3),eo.setScissor(ro.x+xs[0]/3,ro.y+xs[1]/3,Ts[0]/3,Ts[1]/3),eo.setScissorTest(!0),eo.autoClear=!1,eo.render(Os,Bs),eo.setViewport(to),eo.setScissor(ro),eo.setScissorTest(no),eo.autoClear=io}else{var oo=new r$3.Texture,ao=new Image;ao.onload=function(){oo.image=ao,oo.wrapS=r$3.ClampToEdgeWrapping,oo.wrapT=r$3.ClampToEdgeWrapping,oo.minFilter=r$3.LinearFilter,oo.needsUpdate=!0,Ss.needsUpdate=!0,ao.onload=function(){}},ao.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV8AAAA/CAQAAADtPwPkAAAR+0lEQVR4AezYg3LEQACH8d1cbdu23Q5qG9G47z/TN/h6tn2b/H+TUTLc7yjcOXV46OUAnUs6EbUp022ZBXc1NhoZYYd7fjDRvdcHAwrlK2QBVJ4sgoqONmY45RUT23sZ6H42F2hK5CtkMbjhZlDmUUcvq1zyieUVyjbE4I1GBfItwxG56YaUZTQwyh4P6NgJ4YYYvCuQb5kOyI03pORjiqe4Lwpq5pt1vJqfUwKWJVbSMYfppYconG+maNNQOWBZuwHTzicGel75NtFOkxr5apmV8cikcko0DrDQs863AeGl0cE0+1xy573m0/wf0cEKW6H7BWtggiMG8sy3oHRDpJMw4NWb6am/bv9znkqEzjd61t5oo5clTrjhwevO75EJRBKSRt745Z16ZEjcM73sccZplBPm8PyTcxZAkSRdHm/acJ0Z3JZhHB0BxqDHgWFZFmm0ZbCw87twI/zc3e/Cz93vPneXtU/WdQS3oTviXdY/q5PsJKfoGuQjZuO/0in1qsj85cuXrxqeAOJpGqdJOqrUutgVl2Qb0BWqp/RE8AWWVB7t2KrIzY2Wx2fWKl7yfswgxqj8lYummYa3hfwF9MuQRmbfQE4ocPDjtUWQ6Tq1M2w7gC2EcrMGtWS6xlpGKEDDcb1vUQ25zT4lrC2s0dU4gFPppKkbeIYr7NMpqjStuFg5rNU9epGyt8PXyfX4DE1bKLhR/1XPxwJhp5DAV67T9ZPwFdovhBMIGUYoRBN4wim6S3eoXVEHXdLgmwY0x6BQnO4xPJ0Ar5OVxhQF0L9UslRM4yaQQfQImnBegi8vhY2A1k6YLlrj61TwDdNQnIISwiPvpD7TwYQTssZXK47vg8y9Gp2nxRcATkozOEmdCeObSt3IIo+xf/00IDRKAaZ89PBTkHqpkA5LagKeNZKlIhqX8RcQ95GHtdYA62Y6rOg5LLsOSnoyvk4V38hFhytef+V9/3DER1P48W89o1GxE9o5vns2Mk+F7yiftafEN4nhmUv9DKEeyqI0U+l0CQg+B//sZ5+6lOuqKaTgm0LH41RHw/CsLZRk4huiYxrvP2SNr1OSS+Dr1ulBMR+K9SqHa58Oec49VgL3mXHvDr7QfuM7LMNrH1/IS30Moe64SLYBuFVJ+MbnJY7L+GrVQkFcl4ISx/fEll4ZWnz18DpcSzUCX602LqD9svDLzmdaLkP28P1+VsJjsx/4hmh6x/gmm/i6pbrGneCL9iCOg0dQUvF1UwEdVvG19r2uTXxXLz0J37eLjfZoF++tTtPnU/cWp5e8n3An0m/G+U7qjiy4PpHyV16HKx5flCxAV/H9A88nUnZ7l7KN78SBxPcQgzLAepxEScU3l7pZ6fL2+Dot8fXECfj+QRoGYAwlAfBSPrXQXQri0Pd85NJKcVw8XUdt1LZapk7YRhO1RdpmFJwW8ozekYvx2/fjM5Hr5MfQ95HvcY2a/9hoNK4yEntL+dEuGseTdNmxIPqd5v2YRjeaX8pQ8IW2ohuP7+dTN87RMK4aitx8XPsH0r2oBqNRqrv7+gmjjY7uIr6TBxBfL2MlxNRKSVp8S5CTuGgHXxfkFvh69Pq3LD4pkkd2bdRvHaSNC3/l2sQXAccdlIS+lc57qhPJwxPybT7XSxnUrdqnXuHlJHS+mjZfJfUZR9s2FuQR+EQKdSi9Am8UTnsEvlYS+L6TFwW6kl74Vjr6AFHsX89rgg8njRltK0XPOL7NyDL0IurV4VtMwafB1709vu9X4OjWHoP3z1Ii7eaQdG00Lx5n8HXyDSva/dU0Pq2vZnKYxHYMYRo1WY5ov1G7Vh4r3y+kMdgbilxeOrV0aqOFenFl8GGJig7rG0bbPRqiSRpP2AL0w+yon9dHbi43zFetnKcuw9ZLeSa+7kTw/TDfuFu0Z7Vp/uhyHfPkAZ5ufP9wLIfD49E3clR818rR089Lzyy+VRREPneICnYLX9cT8PVKQs36TbQ3i6NcCwYkxEAQ3phN4CjAvC4mFr5vrlKe7AizBKj8cu33s7i9GbeY7BHYujTjjd3Bx54SSyT4m8mxOoYOAGX/DtwvnGE1M+5v5Bgt1hbkJRW9Cxv9X81GL2i5jqaoJ4avBcCsLYp+Ru+VC5sWPpFhXt8/EPvJL2F/alJDEeIjUhcrP5P45rDeATPj+wKl7gBf1fcq+HpVnfHO1vEf//UCHgt/OxfDE3onj5UkfTaThrg3NCGoBUCtZjvgMnwQB0bG5XENeraJ5XEWvtiHkqSVRqN+uQ4lEx2o+69SeY1dC++Wcsj+LCW+H0ZE4KtDWHkGwCtrxstbFqr51e9wbz42E2fpjRQsqEn50PnM4eumO9IbujCi393Hd+3q72TI+p9DPyyfraF+c3rOx0KJyB2z7Fa1yCO8HoHzlDFhPiWD8XoB3aPppRrUQdRp1D8qE9exdgr+Zbpqf8BLfmZ/bMYbh87k58VCSswCjQoLPPw4Jnp4uFi/YQlfKB5eBd/gr6aqB973zbDAF+v5PN+NZEvm+84bSkhxUPE9C9wqbeJ7Hi+gA9Jr5ZM7x9el4mulyK0Bb2xiMTj3/iBtK77Tnii27H/MlCfsjcJY+2oTg2/U4TYWQERE0r+aCouBcx5zEZzEYrqui8JXsQW/X8FLHJ3IVbWXhQV3zAJCjFQst1F25y1arlXwhRR4Bb4rZ3VPy5d+bHEtHIPF27K16ItYuKXM5kHD10M9DKFeSpbqLlOYAlRiC99yCiDmbUf0206jPPO7b/iud71avBkHf+kQP0OrWHBFrhmt75ZyPzbLg5KmWK9oH4Oq1eFZOm0c6n48mdfer46HcLUZU3pGB8R9IDBbJ+N7v1q0J2xhudZ45tcL8PN16vq9WizwtRLwFQtKER+NDypj4QQOdJNY3NC7GEsaGtiSmDsA+CZhyx+hXFHjYrgGGXpZNvDNpn5gWWuiWkUtyEB0UcrO8Y2L9KI9K+cXLmxqruGd6pcKfycj/ij3URVgu6bPUaycN1qXTHD+KoOmjGORnH57q8rh+e9sTHk5r1+7zpEXk36bp7iiXRrBW61e5k/D0fn+EXF/OxYEypFW3ZH1HzPt4Pv5PN2Rd7VJLDZeboGnbpSPwPDcBw5f6AIysadFOR9Hr7vksoFvE91jdbdYvzpYqyIvdQPU87uKL45u3u213CA8qkYPT6H1YgwIfkz7RI5xJdomfjoV4PXjfjgaRkNGhHwG1mNt1oq0y/j+SaZ5pV0LnrlG89Dl1YkmEsc3nKKzMKskJD+fx6NhlFiohdTe5EsZIig5WPgWUYCC9Dx5TG/sA5x15LCBbzXDtx/+uh74VmMZjLDamh8JvhzQtSsoeVTNNXB/Euv96LRR/qjO+By5xTxxJ683/FB00Pj0fZz9F2GPa70Ld2hbbVptWmjWabbGCl/ZAiTsbJa5hQ9OK/eWFE4xva9nG3z1zwCtnFXjYr6c3ykxPn9QiYWEWPhA4uuiDnzBpt4EMcg0QOm28M0gP76hJuELbIdZi4PqaILpJI+RYz4ZV42y+q49wBcxIbyXTmtXgevRWPl3MmjSSJU5vB3J0TA2Uu8mtP+R5/Au4iiF6NrUUiuCieOiJpnJq8gSXzwFLFiLP8X6bV0bYvzt8TXj75eLtKPRauY1RM1HR7GwEHpFbonIWAPwjxpfqJSCyBVUsk/DFOChhC18kyiPHFvwdVGh6XFbmfLx+RRi4jaqYiCnUDO1wc4u4ovo7pfS+XFD32e9GzndwxJiHcbQ/Vz6JrBMDGYyYK5l7YOsfkS2MVePfGkLsNXLGl9hIVbWXAv9fQ5i/j6UFL1RaQffB9qlwn3tS4WxMhaxETCMz6T9ZTqCk5FznoOKL9SEXMMIUwAZW6dNfCEVX61azdxwmIbg4aHdwtcj5KVBeNiqrb2+g5M8hTskSB6exHZ5bMEIF/wCoOT128zvdXziMLbvuDu/Usmh0oG7doMmafKNSmt8hQWUnmzhjJf/RskXCzQL8aYNfLG/QPGLY5KjKtcuNPGsyGytmj0/kPi6qdXwwJCPvOTYI3zTaICCNEh9FGSWM54OX4+A1UI80RV98czWKceJf65ervsleJm164/7ganACHHn+IPz8Nby1ptcnRztRWbipArvp4/gRchodbIFvsBSWPBaW+CHtzWfauFfcmnKRuyr+Fiu1WbzGKtCPWWMHjIgU1/Mgn2B74GKfbkajHwtVIHy3uBbh0Ocj9oplCC+kIJvYuKvI9bbkUUQ2+JaG7AeknwvhLd0YUxx+SZIf4XkGeqHUCNt9N8sQdvYlwtl9H4hMzqI5dHosMIX2taCl2s6LRowaubPyld/IgcvHBJPnKGnHDLh0ArfqzlYtkv5D8++4RsAvPbwTaJzgDcIDzxIRXuEbx4NIsYupjt7gi/6idL3j1AIqPY+OPH5PGO67x/jUS9NvF6hTte7x2kaCvtSZJiMlxjxMSqEtqXr3GPMn/9y4cXUypS/ymPxbIAvmurtYl9o7dqmBV9KdbLOgsik4B3d6xW/lO7w/kfe+yfx7bFuGkwY3/C6sURDj8584rCxJH5QtnYFVrFQVL35HNoQgO0jvt228XVRC4WQPLtANyiEzb1gD/BNoy5kHa5QEnUmiq/uG2fubeXh+kwuNj8IRxAoOqiLIqfTaNw84SfLWsDmqo08k30prHVKbHuYDo7ez6U7EsLX0oJX1ltV2AOg2KfoMPPA/sTx/ZPMqF9YiN11AsHLFrHgaAT3GBvw7hO+U9TH4bX10rgVx7YgMr0p7Pow4tL8XcY3l1kJMfVQmsA3fa/wFQh3JK9eivtV+tCaD4cUjdZvIRI9BfDUDd6PkkbfKhVbOJf/jUpuQcXXlgVNv68ejr4gTflk5AZ71+jR4AvEdPg6PDNpaz6a2AQm2otoWKvVS+LVTyL4OnaE7wSNUjfdpnZb+KbQdcA7Jr5ek0od8MD9dNjiN43t4etk1v0ITfyw6gS+Q4l5XwGwbXli+u/sj6pWGu9XfyYXx75d18+lf6t0tnau/pXKv8+xzorIkltn0l4r2dYCXlO8XDRbu9xw/9g/Zko2FXSFtKPxOxn3q+caluteK5lJsboXwVP/S27cPVz28X3i3/Ll/v8eDVMPDmzwvDbwddMt+NoROhq3yXcC4D7KpmTyA+XnqEzSFQrawDeLrsNemHrEL2+24r7NlENZUMa2vyxkH2DIs628e669ubdsR4VXC7C9u79eIVJtOwgdgO/dOICHGK6jQHaIwdXN4Lwt0LWHr4d6kX8tV+ozqAs+uYCSmO2w+jd4zGNeUYL4nqZxeN5WKVgooSAClmEaYhqhdit89QC7niSbCEM2sdkBuHYxQg9ri5ZjkuhI6DMP+J7cTvEtokEx0aPscyddoFJKpSZqV7G1GTxcpmEthpnw5058c6GfwqpwzGOtGjXSJI3FLYhc+O+jSr9aGhPWQlRshS8AticLX7wnsgbXxt6gsWCpRBa0vRGQM8oB9dhmP3QAwFX4c079dJNq6Qi5xbuyTmpPSJ1Ur4UtF7GoTtmUL3zxaWqMU8P/k3cXSQ1EQRjHGdzdHTa4u7tzBs7CedhykNwF2/5jq56iU11db6Lv2yTj8hs3JoiU9sZZp5/62J5v1z9NjrDHaSbnbFMf52sHrDUVaidDxNG0o9+uLjfosfdb3jT5d5j757riJgst9NIZQ2Pn+ySZll80vjI6Wz/hQJG4vPG0L/H6poQch/dW3vL3B0u8jl0HvVj5PvHCElEF8DUAFikVYTcvmfBdDzQlvvMXSV5lP5zrXj/fJ54zuWaeeuoqkW8AwCIaqeTZKkmYrpPwR2eqN9X72W7EG57vU67OBeuMV8KXLUzv93UTTj42tvaFS++GVsc5JRyLSLJ8nzO555hFBmiSRCqMr4GwrcmGkib5xSvcwmzFK6e8s7DMa2xH4YZdZumSOwsVzFeBWdr37tpIhOpSwXqONNgZq/2KgvBt54znHN1HzlljTO4oVD5fb+prNIJXQNL1ofDKQisbPLJDv3jNSLq9OkYBEIihKIj3v7S1TRQCX5Kdl1ZQlol7LF+E++fwirfiq2sf4cTXxc6hzxffPuLEeqSWrPGWMF58TWr5viyJAP5/4EV4KePiaSE8eNRgjDy8/tyRW+FZjhS+2tlovNJovtJovNJ0uhK6Wo64SDdxEbM//KesjwAAAABJRU5ErkJggg==",Ss.map=oo}}var Us=new r$3.Box3(new r$3.Vector3(-50,-50,-50),new r$3.Vector3(50,50,50)),Rs=new r$3.Vector2,_s=new r$3.Frustum,Ys=new r$3.Matrix4,Fs=new r$3.Clock,Hs=new WeakMap,Vs=function(eo){function to(ro){var no,io,oo,ao,so,uo,lo,co,fo,mo;ro===void 0&&(ro={});var go=eo.call(this)||this;if(go.ident=Xn(),go.renderSwitch01=0,go.panoIndex=0,go.needsRender=!1,go.onlyRenderIfNeeds=(no=ro.onlyRenderIfNeeds)===null||no===void 0||no,go.imageOptions=t$2.__assign({},(io=ro.imageOptions)!==null&&io!==void 0?io:{}),go.textureOptions=t$2.__assign({},(oo=ro.textureOptions)!==null&&oo!==void 0?oo:{}),go.poweredByRealsee=(ao=ro.poweredByRealsee)===null||ao===void 0||ao,go.extraElements=[],go.controllerInits={Panorama:Object.assign({},ro.panorama),Model:Object.assign({},ro.model),Floorplan:Object.assign({},ro.floorplan),Topview:Object.assign({},ro.topview),DepthPanorama:Object.assign({},ro.depthPanorama),VRPanorama:Object.assign({},ro.vrPanorama)},go.fps={testCount:0,testTime:Re()},go.modeChangeDuration=(so=ro.modeChangeDuration)!==null&&so!==void 0?so:1e3,go.panoramaLikeSavedPose={},typeof window!="undefined")if(ro.renderer)ro.renderer instanceof wt&&go.throwError(new Error("cannot render a internal renderer")),go.renderer=ro.renderer;else try{go.renderer=new wt({preserveDrawingBuffer:ro.preserveDrawingBuffer,backgroundColor:ro.backgroundColor,backgroundAlpha:ro.backgroundAlpha,antialias:ro.antialias});var yo=Is();go.renderer.setPixelRatio(yo===1?window.devicePixelRatio:1),go.renderer.setSize(512,512)}catch(_o){_o instanceof Error&&go.throwError(_o)}go.getPixelsRenderTarget=new r$3.WebGLRenderTarget(1,1,{encoding:(lo=(uo=go.renderer)===null||uo===void 0?void 0:uo.outputEncoding)!==null&&lo!==void 0?lo:r$3.sRGBEncoding}),go.scissor=Object.assign({left:0,bottom:0,width:1,height:1},ro.scissor),go.camera=new Lt(80),go.scene=new It,go.lastLoadWorkTask=Promise.resolve(),go.networkSubscribe=new et,go.networkSubscribe.on("network",function(_o,To,No,Po){var Co;go.emit("network",_o,To,No,Po),(Co=go.analysis)===null||Co===void 0||Co.network(go.work,_o,To,No,Po)}),go.model=new Wi({allowHosts:[],networkSubscribe:go.networkSubscribe});var vo=nr(Us);if(vo.name="model_empty",go.model.add(vo),go.model.visible=!1,go.readyCallbacks=[],go.modelPending=!1,go.syncingState=!1,go.scene.add(go.model),go.helperGroup=new r$3.Group,go.helperGroup.name="helper",go.scene.add(go.helperGroup),go.videoTexture=new r$3.VideoTexture(ro.videoInstance||function(){var _o=document.createElement("video");_o.loop=!0,_o.autoplay=!0,_o.playsInline=!0,_o.muted=!0,_o.crossOrigin="";var To=function(){document.removeEventListener("touchstart",To,!1),document.removeEventListener("mousedown",To,!1),_o.muted=!1};return document.addEventListener("touchstart",To,!1),document.addEventListener("mousedown",To,!1),_o}()),function(_o){(To=new r$3.DirectionalLight(16777215,.5)).position.copy(new r$3.Vector3(1,1,1)),_o.add(To);var To=new r$3.DirectionalLight(16777215,.3);_o.add(To),To=new r$3.AmbientLight(16777215,.3),_o.add(To)}(go.scene),go.state={mode:(co=go.currentMode)!==null&&co!==void 0?co:"Panorama",panoIndex:(fo=go.panoIndex)!==null&&fo!==void 0?fo:0,longitude:go.camera.pose.longitude,latitude:go.camera.pose.latitude,fov:go.camera.pose.fov,offset:go.camera.pose.offset.clone()},go.stateSynced=!1,go._enableIOSEDR=!1,go.destroyed=!1,go.paused=!0,typeof window!="undefined"&&(ro.play!==!1&&go.play(),((mo=ro.initialBasisLoader)!==null&&mo!==void 0&&mo)!==!1&&(typeof ro.initialBasisLoader=="string"?go.initBasisLoader(ro.initialBasisLoader):go.initBasisLoader()),go.stopAnimationLoop=ot.shared.add(function(_o,To){go.updateTime(_o,To)},!1,0,10)),go.plugins={},ro.plugins&&ro.plugins.length)for(var Ao=0,ho=ro.plugins;Ao<ho.length;Ao++){var po=ho[Ao];if(typeof po=="function")po(go);else if(Array.isArray(po)){var Mo=po[0],xo=po[1],wo=po[2];if(typeof Mo=="function"){var bo=Mo(go,wo);typeof xo=="string"&&(go.plugins[xo]?go.throwError(new Error("plugin name ".concat(xo," is exists."))):go.plugins[xo]=bo)}}}return go}return t$2.__extends(to,eo),to.prototype.dispose=function(){var ro;if(this.destroyed!==!0){this.emit("dispose"),this.destroyed=!0,this.pause(),this.stopAnimationLoop&&(this.stopAnimationLoop(),delete this.stopAnimationLoop),this.off(),this.networkSubscribe.off(),this.controller&&(this.controller.destroy(),this.controller=void 0);var no=this.getElement();no&&no.parentNode&&no.parentNode.removeChild(no),this.scene.remove(this.model);var io=this.model.getMaterial();io&&(io.pano0&&io.pano0.map.dispose(),io.pano1&&io.pano1.map!==((ro=io.pano0)===null||ro===void 0?void 0:ro.map)&&io.pano1.map.dispose()),this.model.dispose(),this.renderer instanceof wt&&this.renderer.forceContextLoss&&this.renderer.forceContextLoss()}},to.prototype.setScissor=function(ro){Object.assign(this.scissor,ro),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize()},Object.defineProperty(to.prototype,"helperVisible",{get:function(){return this.helperGroup.visible},set:function(ro){this.helperGroup.visible!==ro&&(this.helperGroup.visible=ro,this.emit("helpersVisibleChange",ro),this.needsRender=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(to.prototype,"enableIOSEDR",{get:function(){return this._enableIOSEDR},set:function(ro){this._enableIOSEDR!==ro&&(this._enableIOSEDR=ro,this.currentMode&&this.currentMode==="Panorama"&&this.changeMode(this.currentMode,{},0,!1,!0))},enumerable:!1,configurable:!0}),Object.defineProperty(to.prototype,"enablePostProcessing",{get:function(){return this.screenBuffer!==void 0},set:function(ro){var no,io;if(ro){if(!this.screenBuffer){var oo=this.getDrawingBufferSize(Rs);this.screenBuffer=new r$3.WebGLRenderTarget(oo.x,oo.y,{encoding:(io=(no=this.renderer)===null||no===void 0?void 0:no.outputEncoding)!==null&&io!==void 0?io:r$3.sRGBEncoding})}}else this.screenBuffer&&(this.screenBuffer.dispose(),delete this.screenBuffer);this.needsRender=!0},enumerable:!1,configurable:!0}),to.prototype.updateConfiguration=function(ro){var no=!1;ro.panorama&&(Object.assign(this.controllerInits.Panorama,ro.panorama),this.currentMode==="Panorama"&&(no=!0)),ro.model&&(Object.assign(this.controllerInits.Model,ro.model),this.currentMode==="Model"&&(no=!0)),ro.floorplan&&(Object.assign(this.controllerInits.Floorplan,ro.floorplan),this.currentMode==="Floorplan"&&(no=!0)),ro.topview&&(Object.assign(this.controllerInits.Topview,ro.topview),this.currentMode==="Topview"&&(no=!0)),ro.depthPanorama&&(Object.assign(this.controllerInits.DepthPanorama,ro.depthPanorama),this.currentMode==="DepthPanorama"&&(no=!0)),ro.vrPanorama&&(Object.assign(this.controllerInits.VRPanorama,ro.vrPanorama),this.currentMode==="VRPanorama"&&(no=!0)),ro.imageOptions&&(Object.assign(this.imageOptions,ro.imageOptions),this.currentMode!=="Panorama"&&this.currentMode!=="DepthPanorama"&&this.currentMode!=="VRPanorama"||(no=!0)),no&&this.controller&&this.currentMode&&this.changeMode(this.currentMode,this.getCurrentState(),0,!1,!0)},to.prototype.appendTo=function(ro,no){if(no===void 0&&(no={}),this.renderer)if(this.renderer instanceof wt){var io=this.getElement();if(io){ro.appendChild(io),this.refresh(no);var oo=window.getComputedStyle(ro).position;oo!=="relative"&&oo!=="absolute"&&oo!=="fixed"&&oo!=="sticky"&&(ro.style.position="relative")}}else this.throwError(new Error("cannot call appendTo method when render a external renderer"))},to.prototype.refresh=function(ro,no){if(ro===void 0&&(ro={}),this.renderer){var io=this.getElement();if(io){var oo=io.parentNode;if(oo&&oo.nodeName){var ao=ro.width,so=ao===void 0?oo.offsetWidth:ao,uo=ro.height,lo=uo===void 0?oo.offsetHeight:uo;this.renderer instanceof wt&&(no&&this.renderer.setPixelRatio(no),this.renderer.setSize(so,lo))}var co=this.renderer.getSize(new r$3.Vector2);this.camera.aspect=co.x*this.scissor.width/(co.y*this.scissor.height),this.camera.updateProjectionMatrix(),this.controller&&this.controller.updateRenderSize&&this.controller.updateRenderSize(),this.needsRender=!0}}},to.prototype.addExtraElement=function(ro){var no=this;return this.extraElements.indexOf(ro)===-1&&(this.extraElements.push(ro),this.controller&&this.controller.bindExtraElement(ro)),function(){return no.removeExtraElement(ro)}},to.prototype.removeExtraElement=function(ro){var no=this.extraElements.indexOf(ro);no!==-1&&(this.extraElements.splice(no,1),this.controller&&this.controller.unbindExtraElement(ro))},to.prototype.getPose=function(){var ro=this.camera.copyPose();return{longitude:ro.longitude,latitude:ro.latitude,fov:ro.fov,offset:ro.offset}},to.prototype.getSize=function(ro){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getSize(ro),ro.x*=this.scissor.width,ro.y*=this.scissor.height,ro},to.prototype.getDrawingBufferSize=function(ro){if(!this.renderer)throw new Error("renderer is not initialized");return this.renderer.getDrawingBufferSize(ro),ro.x*=this.scissor.width,ro.y*=this.scissor.height,ro},to.prototype.updateCamera=function(ro,no,io){return io===void 0&&(io=!0),this.controller?this.controller.updateCamera(ro,no,io):Promise.reject(new Error("controller is not initialized."))},to.prototype.getLongitudeAndLatitude=function(){var ro=this.getPose();return{longitude:ro.longitude,latitude:ro.latitude}},to.prototype.getOffset=function(){return this.getPose().offset},to.prototype.getCameraLocal=function(){if(typeof this.panoIndex=="number"&&this.controller&&this.work){var ro=this.work.observers[this.panoIndex],no=new r$3.Object3D;return no.position.copy(ro.position),no.quaternion.copy(ro.quaternion),no.scale.set(1,1,1),no.updateMatrixWorld(!0),function(io,oo){var ao=new r$3.Vector3(0,0,-1);ao.applyQuaternion(io.quaternion);var so=oo.quaternion.clone().inverse();return ao.applyQuaternion(so),{theta:Math.atan2(ao.x,-ao.z),phi:-Math.asin(ao.y),lookAtVector:ao}}(this.camera,no)}},to.prototype.initBasisLoader=function(ro){try{if(!this.renderer)throw new Error("renderer is not initialized.");if(typeof Promise=="undefined"||typeof WeakMap=="undefined"||typeof WebAssembly=="undefined")throw new Error("Basis loader not support.");typeof ro=="string"&&wi.setTranscoderPath(ro),wi.workerConfig.format||wi.detectSupport(this.renderer),wi._allocateWorker(0)}catch(no){no instanceof Error&&this.throwError(no)}},Object.defineProperty(to.prototype,"work",{get:function(){var ro=Hs.get(this);if(ro&&on.get(ro))return ro},enumerable:!1,configurable:!0}),to.prototype.load=function(ro,no,io,oo){var ao=this;if(oo===void 0&&(oo=!0),!this.renderer)throw new Error("renderer is not initialized");var so=this.lastLoadWorkTask.then(function(){return!(uo=ro)||typeof uo!="object"&&typeof uo!="function"||typeof uo.then!="function"?ao.load_(ro,no,io,oo):ro.then(function(lo){return ao.load_(lo,no,io,oo)});var uo});return this.lastLoadWorkTask=so.catch(function(uo){ao.throwError(uo)}),so},to.prototype.load_=function(ro,no,io,oo){var ao,so,uo,lo,co,fo,mo,go,yo,vo=this;oo===void 0&&(oo=!0);var Ao,ho,po,Mo=un(ro),xo=this.work;no===void 0&&(no=xo?"inherit":"initial"),no==="inherit"?(Ao=typeof this.panoIndex=="number"&&Mo.observers[this.panoIndex]?this.panoIndex:Mo.initial.panoIndex,ho=(ao=this.currentMode)!==null&&ao!==void 0?ao:Mo.initial.mode,po={longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):no==="initial"?(ho=(so=this.currentMode)!==null&&so!==void 0?so:Mo.initial.mode,Ao=Mo.initial.panoIndex,po=ho===to.Mode.Panorama||ho===to.Mode.DepthPanorama||ho===to.Mode.Model||ho===to.Mode.VRPanorama?{longitude:Mo.initial.longitude,latitude:Mo.initial.latitude,fov:Mo.initial.fov}:{longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude,fov:this.camera.pose.fov}):(Ao=(uo=no.panoIndex)!==null&&uo!==void 0?uo:Mo.initial.panoIndex,ho=(co=(lo=no.mode)!==null&&lo!==void 0?lo:this.currentMode)!==null&&co!==void 0?co:"Panorama",po={longitude:(fo=no.longitude)!==null&&fo!==void 0?fo:Mo.initial.longitude,latitude:(mo=no.latitude)!==null&&mo!==void 0?mo:Mo.initial.latitude,fov:(go=no.fov)!==null&&go!==void 0?go:Mo.initial.fov}),this.emit("willLoad",ro,Mo,{panoIndex:Ao,mode:ho,longitude:po.longitude,latitude:po.latitude,fov:po.fov});var wo=function(){var _o;vo.panoIndex=Ao,vo.panoramaLikeSavedPose.longitude=Mo.initial.longitude,vo.panoramaLikeSavedPose.latitude=Mo.initial.latitude,vo.panoramaLikeSavedPose.fov=Mo.initial.fov;var To=vo.controller?io!=null?io:vo.modeChangeDuration:0,No=t$2.__assign(t$2.__assign({initial:[Ao,po,To,oo]},vo.commonParams()),vo.controllerInits[ho]);vo.controller?vo.controller.updateWork(Mo,Ao,po,To,oo)===!1&&(vo.controller.destroy(),vo.controller=vo.applyController(ho,No)):vo.controller=vo.applyController(ho,No),vo.emit("load",ro,Mo,{panoIndex:Ao,mode:ho,longitude:po.longitude,latitude:po.latitude,fov:po.fov}),(_o=vo.analysis)===null||_o===void 0||_o.work(Mo)},bo=function(_o){var To;_o===void 0&&(_o=Pe),Mo.model&&(vo.model.name!==((To=Mo.model)===null||To===void 0?void 0:To.file)?(vo.emit("modelWillLoad",Mo.model),vo.loadModel(Mo.model,Mo.allowHosts,_o,!0)):_o&&_o())};return Hs.set(this,Mo),ho===to.Mode.Floorplan||ho===to.Mode.Topview||ho===to.Mode.Model?bo(function(){wo(),vo.needsRender=!0}):(this.controller||(this.camera.setFromPose({distance:0,fov:Mo.initial.fov,longitude:Mo.initial.longitude,latitude:Mo.initial.latitude,offset:Mo.observers[Mo.initial.panoIndex].position}),this.needsRender=!0),wo(),(yo=this.controller)===null||yo===void 0||yo.once("panoLoaded",function(){vo.needsRender=!0,vo.emit("cameraUpdate",vo.camera.copyPose(),oo),bo()})),this.ready().then(function(){vo.emit("loaded",ro,vo.work)})},to.prototype.changeMode=function(ro,no,io,oo,ao){var so=this;if(no===void 0&&(no={}),io===void 0&&(io=this.modeChangeDuration),oo===void 0&&(oo=!0),ao===void 0&&(ao=!1),!this.renderer)throw new Error("renderer is not initialized.");return new Promise(function(uo,lo){if(!to.Mode.hasOwnProperty(ro)){var co=new Error('mode "'.concat(ro,'" is not existed'));return so.throwError(co),void lo(co)}if((ro===to.Mode.Floorplan||ro===to.Mode.Topview||ro===to.Mode.Model)&&(Vi(so.model)||so.model.loaded!==!0))return co=new Error("model is not ready."),so.throwError(co),void lo(co);if(Vi(so.controller))return co=new Error("controller is not ready."),so.throwError(co),void lo(co);var fo=so.controller,mo=so.currentMode,go=function(){var yo,vo,Ao,ho;if(so.emit("wantsChangeMode",ro,mo))lo(new Error("change mode canceled."));else{if(so.controller&&ao===!1&&mo===ro)ro===to.Mode.Panorama||ro===to.Mode.DepthPanorama||ro===to.Mode.Model||ro===to.Mode.VRPanorama?typeof no.panoIndex=="number"&&no.panoIndex!==so.panoIndex?so.controller.moveToPano((vo=(yo=no.panoIndex)!==null&&yo!==void 0?yo:so.panoIndex)!==null&&vo!==void 0?vo:0,t$2.__assign({duration:io},no),oo):so.controller.updateCamera(no,io,oo).catch(Pe):(typeof no.panoIndex=="number"&&no.panoIndex!==so.panoIndex&&(so.panoIndex=no.panoIndex),so.controller.updateCamera(no,io,oo).catch(Pe));else{fo.destroy();var po=(ho=(Ao=no.panoIndex)!==null&&Ao!==void 0?Ao:so.panoIndex)!==null&&ho!==void 0?ho:0,Mo=Ds(ro)?so.panoramaLikeSavedPose:{};typeof no.longitude!="number"&&typeof no.latitude!="number"||(Mo.longitude=no.longitude,Mo.latitude=no.latitude),typeof no.fov=="number"&&(Mo.fov=no.fov);var xo=t$2.__assign(t$2.__assign({initial:[po,Mo,io,oo]},so.commonParams()),so.controllerInits[ro]);so.saveControllerPose(fo),so.controller=so.applyController(ro,xo);var wo=Ns[ro].initAnimationEndPose(xo);so.emit("modeChange",ro,mo,po,wo)}uo()}};ro===to.Mode.VRPanorama?(typeof DeviceOrientationEvent!="undefined"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(yo){if(yo=="granted")return Promise.resolve();var vo=new Error("Request DeviceOrientation Permission denied.");return Promise.reject(vo)}):Promise.resolve()).then(function(){return go()}).catch(function(yo){yo instanceof Error&&(so.throwError(yo),lo(yo))}):go()})},to.prototype.getPixels=function(ro,no,io,oo,ao){if(ao===void 0&&(ao=1),!this.renderer)throw new Error("renderer is not initialized.");var so=this.getPixelsRenderTarget,uo=this.renderer.getSize(new r$3.Vector2);ro=Math.min(Math.max(ro,Math.floor(io/2)),Math.floor(uo.x-io)),no=Math.min(Math.max(no,Math.floor(oo/2)),Math.floor(uo.y-oo)),ro*=ao,no*=ao,io*=ao,oo*=ao,so.setSize(uo.x*ao,uo.y*ao),so.scissor.set(ro,no,io,oo),so.scissorTest=!0,this.renderer.setRenderTarget(so);var lo=new Uint8Array(io*oo*4);return this.controller?this.controller.render(Fs.getDelta()):this.renderer.render(this.scene,this.camera),this.renderer.readRenderTargetPixels(so,ro,no,io,oo,lo),this.renderer.setRenderTarget(null),so.setSize(1,1),so.scissor.set(0,0,0,0),so.scissorTest=!1,lo},to.prototype.getElement=function(){var ro;return(ro=this.renderer)===null||ro===void 0?void 0:ro.domElement},to.prototype.render=function(ro,no){var io=this;if(no===void 0&&(no=!1),!this.renderer)return null;if(no){var oo=this.renderer.getSize(Rs);this.scene.traverseVisible(function(uo){uo.setResolution&&uo.setResolution(oo.x,oo.y)})}var ao=Fs.getDelta();if(this.controller&&this.screenBuffer&&this.renderer.getRenderTarget()===null){var so=this.getDrawingBufferSize(Rs);return this.screenBuffer.setSize(so.x,so.y),this.renderer.setRenderTarget(this.screenBuffer),this.controller.render(ao),this.renderer.setRenderTarget(null),this.poweredByRealsee&&Ps(this.renderer),this.renderer.setRenderTarget(null),ro&&ot.shared.add(ro,!0),this.screenBuffer}return this.aroundScissor(function(){io.renderer&&(io.controller?io.controller.render(ao):io.renderer.render(io.scene,io.camera),io.poweredByRealsee&&Ps(io.renderer)),ro&&ot.shared.add(ro,!0)}),null},to.prototype.updateTime=function(ro,no){var io=this;if(!this.destroyed){this.syncingState=this.syncState(ro,no),this.controller&&this.controller.updateTime(ro,no),this.syncingState=!1;var oo=new r$3.Vector2(512,512),ao=new r$3.Vector2(512,512);this.renderer&&(this.renderer.getSize(oo),oo.x*=this.scissor.width,oo.y*=this.scissor.height,this.renderer.getDrawingBufferSize(ao),ao.x*=this.scissor.width,ao.y*=this.scissor.height);var so=[];if(Ys.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),_s.setFromProjectionMatrix(Ys),this.scene.traverse(function(yo){yo.setResolution&&yo.setResolution(oo.x,oo.y),yo.mixer instanceof r$3.AnimationMixer&&yo.mixer.update(Fs.getDelta()),(yo instanceof r$3.Mesh||yo instanceof r$3.Line||yo instanceof r$3.Points)&&(yo instanceof r$3.ImmediateRenderObject||!yo.frustumCulled||_s.intersectsObject(yo))&&so.push(yo)}),ao.width*ao.height>8388608?this.renderSwitch01=1^this.renderSwitch01:this.renderSwitch01=0,this.renderer&&this.paused===!1&&this.renderSwitch01===0){var uo=void 0;if(this.onlyRenderIfNeeds!==!0)uo=this.render();else{for(var lo=0,co=so;lo<co.length;lo++){var fo=co[lo],mo=function(yo){yo.needsRender===!0?(yo.needsRender=!1,io.needsRender=!0):yo.mixer&&yo.mixer.stats.actions.inUse>0&&(io.needsRender=!0)};mo(fo),fo.traverseAncestors(mo)}this.controller&&this.controller.needsRender===!0&&(this.controller.needsRender=!1,this.needsRender=!0),this.needsRender!==!1&&(uo=this.render())}this.needsRender=!1,this.controller&&this.screenBuffer&&this.aroundScissor(function(){return io.controller.postProcessing(io.screenBuffer,void 0,Fs.getDelta())}),this.hasListener("renderFrame")&&this.emit("renderFrame",uo!==void 0)}if(this.fps.testTime&&ro-this.fps.testTime<1e3)this.fps.testCount++;else if(this.emit("fps",this.fps.testCount),this.fps.testTime=ro,this.fps.testCount=0,this.renderer){var go=function(yo){var vo=yo.getError();if(vo===yo.NO_ERROR)return null;switch(vo){case yo.INVALID_ENUM:return new Error("webgl error: INVALID_ENUM");case yo.INVALID_VALUE:return new Error("webgl error: INVALID_VALUE");case yo.INVALID_OPERATION:return new Error("webgl error: INVALID_OPERATION");case yo.INVALID_FRAMEBUFFER_OPERATION:return new Error("webgl error: INVALID_FRAMEBUFFER_OPERATION");case yo.OUT_OF_MEMORY:return new Error("webgl error: OUT_OF_MEMORY");case yo.CONTEXT_LOST_WEBGL:return new Error("webgl error: CONTEXT_LOST_WEBGL");default:return null}}(this.renderer.getContext());go&&this.throwError(go)}}},to.prototype.pause=function(){this.paused=!0,this.renderer&&this.renderer instanceof wt&&this.renderer.clear(!0,!0,!0)},to.prototype.play=function(){this.needsRender=!0,this.paused=!1},to.prototype.moveToPano=function(ro,no,io){no===void 0&&(no={}),io===void 0&&(io=!0);var oo=this,ao=oo.controller,so=oo.currentMode,uo=oo.renderer;ao?uo?so===to.Mode.Floorplan||so===to.Mode.Topview?Vi(ro)||(this.panoIndex=ro,this.changeMode(to.Mode.Panorama,no,void 0,io)):ao.moveToPano(ro,no,io):this.throwError(new Error("renderer is not initialized.")):this.throwError(new Error("controller is not initialized."))},to.prototype.preloadPano=function(ro,no){var io=this;if(no===void 0&&(no=Pe),!this.work)return Promise.reject(new Error("work never loaded"));var oo=this.work.observers[ro],ao=Re();return Promise.all(["right","left","up","down","front","back"].map(function(so){var uo=t$2.__assign({key:"pano.".concat(ro,".").concat(so),basisLoaderInitialized:wi.isInitialized()},ni(io.imageOptions,["size","format","quality"])),lo=oo.images[so];return function(co,fo){return fo===void 0&&(fo={}),co in it?it[co]:it[co]=new Promise(function(mo,go){var yo=document.createElement("link");yo.href=co,yo.rel=yo.relList&&yo.relList.supports("prefetch")?"prefetch":"preload",yo.as="fetch",yo.crossOrigin="";var vo=Re(),Ao=document.head||document.getElementsByTagName("head")[0];Ao&&Ao.appendChild(yo);var ho=!1;yo.onload=function(){var po;if(ho!==!0){ho=!0,mo();var Mo=Re(),xo={source:co,requestTime:vo,responseTime:Mo,costs:Mo-vo,headers:{}};(po=fo.networkSubscribe)===null||po===void 0||po.emit("network",co,"Link","preload",JSON.stringify(xo))}},yo.onerror=function(po){var Mo;if(ho!==!0){ho=!0;var xo=new qe(co,"Link",0);go(xo),(Mo=fo.networkSubscribe)===null||Mo===void 0||Mo.emit("network",co,"Link","error",xo.message)}}})}(io.imageOptions.transform?io.imageOptions.transform(lo,uo):ht(lo,uo),{networkSubscribe:io.networkSubscribe})})).then(function(){var so=Re()-ao;return no(so),so})},to.prototype.project2d=function(ro,no){if(no===void 0&&(no=!1),!this.renderer)return null;if(this.model.empty===!1&&no){var io=this.camera.position,oo=ro.clone().sub(io),ao=new r$3.Raycaster(io,oo.clone().normalize()),so=this.model.intersectRaycaster(ao)[0];if(so&&so.distance+.01<oo.length())return null}var uo=ro.clone().project(this.camera);if(Math.abs(uo.z)>1)return null;var lo=this.renderer.getSize(new r$3.Vector2),co=lo.x*this.scissor.width,fo=lo.y*this.scissor.height,mo=lo.x*this.scissor.left+(uo.x+1)/2*co,go=lo.y*(1-this.scissor.bottom-this.scissor.height)+(1-uo.y)/2*fo;return new r$3.Vector2(mo,go)},to.prototype.getRenderObjects=function(ro){Ys.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),_s.setFromProjectionMatrix(Ys),ro||(ro=this.scene);var no=[];return ro.traverseVisible(function(io){(io instanceof r$3.Mesh||io instanceof r$3.Line||io instanceof r$3.Points)&&(io instanceof r$3.ImmediateRenderObject||!io.frustumCulled||_s.intersectsObject(io))&&no.push(io)}),no},to.prototype.getCurrentState=function(){return t$2.__assign(t$2.__assign({},this.getPose()),{mode:this.currentMode||to.Mode.Panorama,panoIndex:this.panoIndex||0})},to.prototype.setState=function(ro,no,io){var oo,ao,so,uo,lo,co,fo,mo;no===void 0&&(no=!1),io===void 0&&(io=!0),!(ro=Object.assign({},ro)).offset||ro instanceof r$3.Vector3||(ro.offset=new r$3.Vector3(ro.offset.x,ro.offset.y,ro.offset.z));var go,yo,vo,Ao,ho=(oo=ro.panoIndex)!==null&&oo!==void 0?oo:this.state.panoIndex,po=(ao=ro.mode)!==null&&ao!==void 0?ao:this.state.mode;if(this.work)if(this.work.observers[ho])if(ro.mode!==to.Mode.Floorplan&&ro.mode!==to.Mode.Topview&&ro.mode!==to.Mode.Model||!Vi(this.model)&&this.model.loaded===!0){if(this.state.mode!==po){var Mo=void 0;Mo=Ds(this.state.mode)&&Ds(po)?t$2.__assign({},this.state):Ds(po)?t$2.__assign({},this.panoramaLikeSavedPose):t$2.__assign({},ro),typeof ro.longitude=="number"&&(Mo.longitude=ro.longitude),typeof ro.latitude=="number"&&(Mo.latitude=ro.latitude),typeof ro.fov=="number"&&(Mo.fov=ro.fov);var xo=t$2.__assign(t$2.__assign({initial:[ho,Mo,this.modeChangeDuration,!1]},this.commonParams()),this.controllerInits[po]),wo=Ns[po].initAnimationEndPose(xo);go=wo.longitude,yo=wo.latitude,vo=wo.fov,Ao=wo.offset}else go=(so=ro.longitude)!==null&&so!==void 0?so:this.state.longitude,yo=(uo=ro.latitude)!==null&&uo!==void 0?uo:this.state.latitude,vo=(lo=ro.fov)!==null&&lo!==void 0?lo:this.state.fov,Ao=(co=ro.offset)!==null&&co!==void 0?co:this.state.offset;var bo={panoIndex:ho,mode:po,longitude:go,latitude:yo,fov:vo,offset:Ao};this.emit("setState",bo),Ar(this.state,bo)||(cr(this.state,bo),this.controller&&(this.controller.userAction=io),no&&this.state.mode===bo.mode&&(this.syncingState=this.syncState(Re(),0,no),this.syncingState&&((fo=this.controller)===null||fo===void 0||fo.updateTime(Re(),0),this.syncingState=!1)),this.emit("stateChange",this.state,io),(mo=this.analysis)===null||mo===void 0||mo.state(this.work,this.state))}else this.throwError(new Error("model is not ready."));else this.throwError(new Error("panoIndex not found in work"));else this.throwError(new Error("work never load."))},to.prototype.aroundScissor=function(ro){if(this.renderer){var no=new r$3.Vector2,io=this.scissor.left!==0||this.scissor.bottom!==0||this.scissor.width!==1||this.scissor.height!==1;if(io){this.renderer.getSize(no);var oo=Math.floor(no.x*this.scissor.left),ao=Math.floor(no.y*this.scissor.bottom),so=Math.floor(no.x*this.scissor.width),uo=Math.floor(no.y*this.scissor.height);this.renderer.setViewport(oo,ao,so,uo),this.renderer.setScissor(oo,ao,so,uo),this.renderer.setScissorTest(!0)}ro(),io&&(this.renderer.setViewport(0,0,no.x,no.y),this.renderer.setScissor(0,0,no.x,no.y),this.renderer.setScissorTest(!1))}},to.prototype.syncState=function(ro,no,io){io===void 0&&(io=!1);var oo=this.stateSynced;if(this.stateSynced=!1,!this.controller)return!1;if(this.state.mode!==this.currentMode){var ao={mode:this.state.mode,panoIndex:this.state.panoIndex,longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.changeMode(this.state.mode,ao,this.modeChangeDuration,this.controller.userAction),!0}if(this.controller.isReady()===!1)return!1;if(this.readyCallbacks.length){var so=this.currentMode;if(!(so===to.Mode.Floorplan||so===to.Mode.Topview||so===to.Mode.Model)||!this.modelPending)for(var uo=void 0;uo=this.readyCallbacks.shift();)uo()}if(this.controller instanceof Ns.Model){if(!this.camera.pose.offset.equals(this.state.offset)){var lo={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset};return this.controller.moveToPosition(this.state.offset,lo,!1),!0}}else if(this.state.panoIndex!==this.panoIndex)return lo={longitude:this.state.longitude,latitude:this.state.latitude,fov:this.state.fov,offset:this.state.offset},this.controller.moveToPano(this.state.panoIndex,lo,!1),!0;if(this.controller instanceof Ns.Topview){var co=1,fo=io?this.state.fov:ur(this.camera.pose.fov,this.state.fov,co),mo=io?new r$3.Vector3(this.state.offset.x,this.state.offset.y,this.state.offset.z):new r$3.Vector3(ur(this.camera.pose.offset.x,this.state.offset.x,.2),ur(this.camera.pose.offset.y,this.state.offset.y,.2),ur(this.camera.pose.offset.z,this.state.offset.z,.2));if(Jn(fo,this.camera.pose.fov)||er(mo,this.camera.pose.offset))return this.controller.cameraMotion.set({fov:fo},0).catch(Pe),this.controller.locationMotion.set({x:mo.x,y:mo.y,z:mo.z},0).catch(Pe),!0}else{co=1;var go=Math.PI/45,yo=(fo=io?this.state.fov:ur(this.camera.pose.fov,this.state.fov,co),io?{longitude:this.state.longitude,latitude:this.state.latitude}:function(ho,po,Mo){if(ho.longitude===po.longitude&&ho.latitude===po.latitude)return{longitude:po.longitude,latitude:po.latitude};var xo=sr(ho.longitude),wo=ho.latitude,bo=sr(po.longitude),_o=po.latitude;bo-xo>or?xo+=ar:xo-bo>or&&(xo-=ar);var To=Mo/Math.sqrt(Math.pow(bo-xo,2)+Math.pow(_o-wo,2));return To>=1?{longitude:po.longitude,latitude:po.latitude}:{longitude:xo+(bo-xo)*To,latitude:wo+(_o-wo)*To}}({longitude:this.camera.pose.longitude,latitude:this.camera.pose.latitude},{longitude:this.state.longitude,latitude:this.state.latitude},go)),vo=yo.longitude,Ao=yo.latitude;if(Jn(vo,this.camera.pose.longitude,2*Math.PI)||Jn(Ao,this.camera.pose.latitude)||Jn(fo,this.camera.pose.fov))return this.controller.cameraMotion.set({longitude:vo,latitude:Ao,fov:fo},0).catch(Pe),!0}return this.stateSynced=!0,oo===!1&&this.emit("stateSynced",this.state),!1},to.prototype.ready=function(){var ro=this;return new Promise(function(no){return ro.readyCallbacks.push(no)})},to.prototype.throwError=function(ro){this.hasListener("error")?this.emit("error",ro):console.error(ro)},to.prototype.loadModel=function(ro,no,io,oo){var ao=this,so=ro.file;this.emit("modelWillLoad",ro);var uo=new Wi({allowHosts:no,networkSubscribe:this.networkSubscribe});uo.once("bvhLoaded",function(){var lo,co;ao.destroyed||so===((co=(lo=ao.work)===null||lo===void 0?void 0:lo.model)===null||co===void 0?void 0:co.file)&&ao.emit("modelBvhLoaded",uo)}),uo.once("materialLoaded",function(){var lo,co;ao.destroyed||so===((co=(lo=ao.work)===null||lo===void 0?void 0:lo.model)===null||co===void 0?void 0:co.file)&&ao.emit("modelMaterialLoaded",uo)}),uo.once("geometryLoaded",function(){var lo,co,fo,mo;if(!ao.destroyed&&so===((co=(lo=ao.work)===null||lo===void 0?void 0:lo.model)===null||co===void 0?void 0:co.file)){uo.bounding.max.y-uo.bounding.min.y<1.5&&(uo.bounding.max.y=uo.bounding.min.y+10);var go,yo=ao.model;yo&&(yo.show(),go=yo.getMaterial()||{},ao.scene.remove(yo),yo.dispose(),uo.setTransparent(yo.getTransparent())),go&&uo.setMaterial(go),ro.bvh&&uo.buildBVH(),ao.model=uo,ao.scene.add(uo),(fo=ao.controller)===null||fo===void 0||fo.updateModel(uo),(mo=ao.renderer)===null||mo===void 0||mo.compile(ao.scene,ao.camera),ao.needsRender=!0,ao.modelPending=!1,ao.emit("modelGeometryLoaded",uo)}}),uo.once("loaded",function(){var lo,co;ao.destroyed||so===((co=(lo=ao.work)===null||lo===void 0?void 0:lo.model)===null||co===void 0?void 0:co.file)&&(io(),ao.emit("modelLoaded",uo))}),uo.on("shownFloorChange",function(lo,co){var fo,mo;ao.destroyed||so===((mo=(fo=ao.work)===null||fo===void 0?void 0:fo.model)===null||mo===void 0?void 0:mo.file)&&ao.emit("modelShownFloorChange",lo,co)}),uo.on("error",function(lo){var co,fo,mo,go;if(!ao.destroyed&&so===((fo=(co=ao.work)===null||co===void 0?void 0:co.model)===null||fo===void 0?void 0:fo.file)){uo.bounding.makeEmpty();for(var yo=0,vo=ao.work.observers;yo<vo.length;yo++){var Ao=vo[yo];uo.bounding.expandByPoint(Ao.standingPosition),uo.bounding.expandByPoint(new r$3.Vector3().fromArray([Ao.position.x,2*Ao.position.y-Ao.standingPosition.y,Ao.position.z]))}var ho=nr(uo.bounding,new r$3.Vector3(1,0,1));ho.visible=!0,ho.name="model_empty",uo.add(ho);var po,Mo=ao.model;Mo&&(Mo.show(),po=Mo.getMaterial()||{},ao.scene.remove(Mo),Mo.dispose(),uo.setTransparent(Mo.getTransparent())),po&&uo.setMaterial(po),ao.model=uo,ao.scene.add(uo),(mo=ao.controller)===null||mo===void 0||mo.updateModel(uo),(go=ao.renderer)===null||go===void 0||go.compile(ao.scene,ao.camera),ao.emit("modelLoadError",lo,uo),ao.throwError(lo),ao.modelPending=!1,io()}}),this.modelPending=!0,uo.load(ro,this.textureOptions).catch(Pe)},to.prototype.commonParams=function(){return{ident:this.ident,scene:this.scene,helper:this.helperGroup,camera:this.camera,renderer:this.renderer,scissor:this.scissor,element:this.getElement(),model:this.model,work:this.work,imageOptions:this.imageOptions,enableIOSEDR:this._enableIOSEDR,extraElements:this.extraElements,videoTexture:this.videoTexture,networkSubscribe:this.networkSubscribe}},to.prototype.saveControllerPose=function(ro){ro===void 0&&(ro=this.controller),ro&&Ds(ro)&&(this.panoramaLikeSavedPose.longitude=this.camera.pose.longitude,this.panoramaLikeSavedPose.latitude=this.camera.pose.latitude,this.panoramaLikeSavedPose.fov=this.camera.pose.fov)},to.prototype.applyController=function(ro,no){var io=this;if(!this.renderer)throw new Error("renderer is not initialized.");var oo=Ns[ro];ro===this.currentMode||this.model.empty||this.model.show(),this.model.setTransparent(ro===to.Mode.Floorplan||ro===to.Mode.Topview||ro===to.Mode.Model),this.currentMode=ro;for(var ao=new oo(no),so=function(go){ao.on(go,function(){for(var yo=[],vo=0;vo<arguments.length;vo++)yo[vo]=arguments[vo];var Ao=io.emit.apply(io,t$2.__spreadArray([go],yo,!1));if(Ao)return!1})},uo=0,lo=Es;uo<lo.length;uo++)so(lo[uo]);var co=Ns[ro].initAnimationEndPose(no),fo=no.initial[3],mo={panoIndex:no.initial[0],mode:ro,longitude:co.longitude,latitude:co.latitude,fov:co.fov,offset:co.offset};return Ar(this.state,mo)||(cr(this.state,mo),this.emit("stateChange",this.state,fo)),this.emit("currentStateChange",this.getCurrentState(),fo),ao.on("cameraUpdate",function(go,yo){var vo;if(io.controller){var Ao=t$2.__assign(t$2.__assign({},io.controller.getTargetPose()),{panoIndex:io.panoIndex,mode:ro});yo&&io.syncingState===!1&&io.state.mode===Ao.mode&&!Ar(io.state,Ao)&&(cr(io.state,Ao),io.emit("stateChange",io.state,yo),(vo=io.analysis)===null||vo===void 0||vo.state(io.work,io.state))}io.emit("currentStateChange",io.getCurrentState(),yo)}),ao.on("initAnimationWillStart",function(go,yo,vo){var Ao,ho=t$2.__assign(t$2.__assign({},yo),{panoIndex:go,mode:ro});vo&&io.state.mode===ho.mode&&!Ar(io.state,ho)&&(cr(io.state,ho),io.emit("stateChange",io.state,vo),(Ao=io.analysis)===null||Ao===void 0||Ao.state(io.work,io.state))}),ao.on("initAnimationEnded",function(go,yo,vo){var Ao,ho=t$2.__assign(t$2.__assign({},yo),{panoIndex:go,mode:ro});vo&&io.state.mode===ho.mode&&!Ar(io.state,ho)&&(cr(io.state,ho),io.emit("stateChange",io.state,vo),(Ao=io.analysis)===null||Ao===void 0||Ao.state(io.work,io.state))}),ao.on("panoWillArrive",function(go,yo,vo){var Ao;io.panoIndex=go;var ho=t$2.__assign(t$2.__assign({},yo),{panoIndex:go,mode:ro});vo&&io.state.mode===ho.mode&&!Ar(io.state,ho)&&(cr(io.state,ho),io.emit("stateChange",io.state,vo),(Ao=io.analysis)===null||Ao===void 0||Ao.state(io.work,io.state))}),ao.on("panoArrived",function(go,yo,vo){var Ao,ho=t$2.__assign(t$2.__assign({},yo),{panoIndex:go,mode:ro});vo&&io.state.mode===ho.mode&&!Ar(io.state,ho)&&(cr(io.state,ho),io.emit("stateChange",io.state,vo),(Ao=io.analysis)===null||Ao===void 0||Ao.state(io.work,io.state))}),ao.on("moveToPano",function(go,yo){io.emit("currentStateChange",io.getCurrentState(),yo)}),ao.on("wantsMoveToPano",function(go,yo,vo){var Ao=io.emit("wantsMoveToPano",go,yo,vo);Ao||(Ao=io.emit("wantsToMoveToPano",go,yo,vo)),Ao||io.moveToPano(go,yo,vo)}),ao.on("vrWantsToExit",function(){io.currentMode===to.Mode.VRPanorama&&io.changeMode(to.Mode.Panorama)}),ao.on("error",function(go){return io.throwError(go)}),ao},to.Mode={Panorama:"Panorama",Model:"Model",Floorplan:"Floorplan",Topview:"Topview",DepthPanorama:"DepthPanorama",VRPanorama:"VRPanorama"},to.Line=null,to}(ke);five.AnimationFrameLoop=ot,five.BVH=_t$1,five.BVHIntersect=Qt,five.BVHNode=Bt,five.BVHVector3=Ot,five.Camera=Lt,Five=five.Five=Vs,five.InternalWebGLRenderer=wt,five.IntersectMesh=qn,five.LegacyPanoCircleMesh=Tn,five.Model=Wi,five.NetworkSubscribe=et,five.PBMContainer=gt,five.PBMGroup=pt,five.PBMMaterial=Et,five.PBMMesh=dt,five.PROXY_CONTROLLER_EVENT_NAMES=Es,five.PanoCircleMesh=_n,five.Scene=It,five.Subscribe=ke,five.defaultImageURLTransform=ht,five.getViewportScale=Is,parseWork=five.parseWork=un;var react={},useFiveState,useFiveModelReadyState,useFiveEventCallback,unsafe__useFiveInstance,createFiveProvider,FiveCanvas;Object.defineProperty(react,"__esModule",{value:!0});var e$2=tslib.exports,t$1=react$1.exports,n$3=require$$2$1,r$2=five;function o(eo){if(eo&&eo.__esModule)return eo;var to=Object.create(null);return eo&&Object.keys(eo).forEach(function(ro){if(ro!=="default"){var no=Object.getOwnPropertyDescriptor(eo,ro);Object.defineProperty(to,ro,no.get?no:{enumerable:!0,get:function(){return eo[ro]}})}}),to.default=eo,Object.freeze(to)}var u$1=o(t$1),i=o(n$3),a=[],f$3=u$1.createContext(null);function s(){var eo=u$1.useContext(f$3);if(!eo)throw new Error("FiveProvider never found.");return eo.five}function c$2(){var eo=u$1.useContext(f$3);if(!eo)throw new Error("FiveProvider never found.");return eo.loadWork}var l$2={display:"inline-block",overflow:"hidden"};function d$2(eo,to){var ro=s(),no=[ro];to!==void 0&&(no=no.concat(to)),u$1.useLayoutEffect(function(){return eo(ro.scene)},no)}var v$2=d$2;function p$3(eo){return e$2.__assign({},eo.state)}function h$3(eo){var to=eo.camera.getWorldDirection(new i.Vector3);return new i.Raycaster(eo.camera.position,to)}function m$3(eo){return eo.camera.getWorldDirection(new i.Vector3)}function y$2(eo){return eo.model.empty?"Empty":"Loaded"}function S(eo,to){return to.indexOf(eo)>=0}function g$3(eo,to){for(var ro=0,no=Object.keys(to);ro<no.length;ro++){var io=no[ro];to[io]!==void 0&&(eo[io]=to[io])}}function C$1(eo,to){if(S("loadWork",to))return eo}function b$2(eo,to){if(S("setState",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.setState.apply(eo,ro)}}function w$2(eo,to){if(S("on",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.on.apply(eo,ro)}}function E$1(eo,to){if(S("on",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.once.apply(eo,ro)}}function k$2(eo,to){if(S("off",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.off.apply(eo,ro)}}function x$2(eo,to){if(S("intersectRaycaster",to))return function(){for(var ro,no=[],io=0;io<arguments.length;io++)no[io]=arguments[io];return(ro=eo.model).intersectRaycaster.apply(ro,no)}}function L(eo,to){if(S("project2d",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.project2d.apply(eo,ro)}}function F$1(eo,to){if(S("updateCamera",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.updateCamera.apply(eo,ro)}}function _$1(eo,to){if(S("initBasisLoader",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.initBasisLoader.apply(eo,ro)}}function P(eo,to){if(S("getPixels",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.getPixels.apply(eo,ro)}}function R(eo,to){if(S("render",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.render.apply(eo,ro)}}function V(eo,to){if(S("needsRender",to))return function(){eo.needsRender=!0}}function M(eo,to){if(S("preloadPano",to))return function(){for(var ro=[],no=0;no<arguments.length;no++)ro[no]=arguments[no];return eo.preloadPano.apply(eo,ro)}}function W(eo,to){if(S("showFloor",to))return function(ro){typeof ro=="number"?eo.model.show(ro):eo.model.show()}}function O(eo,to){if(S("toggleHelperVisible",to))return function(ro){eo.helperVisible=ro}}function j(eo,to){for(var ro={},no=to.length,io=-1;++io<no;){var oo=to[io];oo in eo&&(ro[oo]=eo[oo])}return ro}function N(eo,to){for(var ro=0;ro<eo.length;ro++)for(var no=0;no<to.length;no++)if(eo[ro]===to[no])return!0;return!1}var A$2=function(){function eo(to,ro){this.values=to,this.listeners=[],this.onValuesChange=ro}return eo.prototype.on=function(to,ro){var no=this,io=[to,ro];return this.listeners.push(io),function(){var oo=no.listeners.indexOf(io);oo>=0&&no.listeners.splice(oo,1)}},eo.prototype.getValues=function(to){return j(this.values,to)},eo.prototype.setValues=function(to,ro){var no,io,oo=[];for(var ao in ro)to.indexOf(ao)>=0&&(no=ro[ao],io=this.values[ao],!(typeof no=="number"&&typeof io=="number"&&isNaN(no)&&isNaN(io)||no===io))&&oo.push(ao);if(oo.length!==0){for(var so=e$2.__assign({},this.values),uo=0,lo=oo;uo<lo.length;uo++){var co=lo[uo];this.values[co]=ro[co]}this.onValuesChange&&this.onValuesChange(this.values,so);for(var fo=0,mo=this.listeners;fo<mo.length;fo++){var go=mo[fo],yo=go[0],vo=go[1];if(N(yo,oo)){var Ao=j(so,yo);vo(j(this.values,yo),Ao)}}}},eo}();FiveCanvas=react.FiveCanvas=function(eo){var to=eo.width,ro=eo.height,no=s(),io=u$1.createRef(),oo=e$2.__assign({width:to,height:ro},l$2);return u$1.useLayoutEffect(function(){if(io.current&&no.renderer){if(no.renderer.domElement.parentNode!==null&&no.renderer.domElement.parentNode!==io.current)throw new Error("There are more than 2 fiveCanvas in this context.");no.renderer.domElement.parentNode!==io.current&&io.current.appendChild(no.renderer.domElement),no.camera.aspect=to/ro,no.camera.updateProjectionMatrix(),no.renderer.setSize(to,ro),no.needsRender=!0}},[to,ro,io.current]),u$1.createElement("div",{ref:io,style:oo})},react.INJECTION_PROPNAME="$five",react.Store=A$2,react.createFiveFeature=function(){for(var eo=[],to=0;to<arguments.length;to++)eo[to]=arguments[to];return eo},createFiveProvider=react.createFiveProvider=function(eo){return eo===void 0&&(eo={}),function(to){function ro(no){var io,oo=to.call(this,no)||this,ao=function(so){var uo=so===void 0?{}:so,lo=uo.backgroundColor,co=lo===void 0?1579548:lo,fo=uo.backgroundAlpha,mo=fo===void 0?1:fo,go=uo.pixelRatio,yo=go===void 0?1:go;if(typeof window!="undefined"){var vo=a.shift();return vo||((vo=new i.WebGLRenderer({antialias:!1,alpha:!0})).outputEncoding=i.sRGBEncoding),vo.setPixelRatio(yo),vo.setClearColor(co,mo),vo.autoClear=!0,vo}}({pixelRatio:r$2.getViewportScale()===1?window.devicePixelRatio:1});return oo.five=new r$2.Five(e$2.__assign({renderer:ao},eo)),(no.work||no.initialWork)&&oo.five.load(no.work||no.initialWork,no.initialState,void 0,(io=no.initialUserAction)===null||io===void 0||io),oo.five.on("load",function(){var so;oo.props.onWorkChange&&oo.props.onWorkChange((so=oo.five)===null||so===void 0?void 0:so.work)}),oo.five.on("stateChange",function(so,uo){oo.props.onStateChange&&oo.props.onStateChange(so,uo)}),oo.five.on("currentStateChange",function(so,uo){oo.props.onCurrentStateChange&&oo.props.onCurrentStateChange(so,uo)}),oo.five.on("error",function(so){oo.props.onError?oo.props.onError(so):console.warn(so.message)}),oo}return e$2.__extends(ro,to),ro.prototype.loadWork=function(no,io,oo,ao){if(ao===void 0&&(ao=!0),this.props.work)throw new Error("props 'work' is set in fiveProvider, if you need modify work internal, use 'initialWork' instead.");return this.five.load(no,io,oo,ao)},ro.prototype.shouldComponentUpdate=function(no){var io,oo;return no.work&&no.work!==((io=this.five)===null||io===void 0?void 0:io.work)&&((oo=this.five)===null||oo===void 0||oo.load(no.work,no.initialState)),!0},ro.prototype.componentWillUnmount=function(){var no;this.five&&(this.five.dispose(),(no=this.five.renderer)&&a.indexOf(no)===-1&&a.push(no),delete this.five)},ro.prototype.render=function(){var no=this;return u$1.createElement(f$3.Provider,{value:{five:this.five,loadWork:function(){for(var io=[],oo=0;oo<arguments.length;oo++)io[oo]=arguments[oo];return no.loadWork.apply(no,io)}}},this.props.children)},ro}(u$1.Component)},react.createStore=function(eo){var to=u$1.createContext(null);return{useStore:function(ro){var no=u$1.useContext(to);if(no===null)throw new Error("StoreProvider never found.");var io=u$1.useRef(!0),oo=u$1.useState(no.getValues(ro)),ao=oo[0],so=oo[1],uo=e$2.__spreadArray([no],ro,!0);return u$1.useLayoutEffect(function(){return io.current?io.current=!1:so(no.getValues(ro)),no.on(ro,function(lo){return so(lo)})},uo),[ao,u$1.useCallback(function(lo){return no.setValues(ro,lo)},uo)]},useStoreSetter:function(ro){var no=u$1.useContext(to);if(no===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(io){return no.setValues(ro,io)},e$2.__spreadArray([no],ro,!0))},watchStore:function(ro,no,io){var oo=u$1.useContext(to);if(oo===null)throw new Error("StoreProvider never found.");var ao=e$2.__spreadArray([oo],ro,!0);io!==void 0&&(ao=ao.concat(io)),u$1.useLayoutEffect(function(){return oo.on(ro,no)},ao)},useStoreAction:function(ro){var no=u$1.useContext(to);if(no===null)throw new Error("StoreProvider never found.");return u$1.useCallback(function(){for(var io=[],oo=0;oo<arguments.length;oo++)io[oo]=arguments[oo];var ao=eo[ro],so=ao[0],uo=ao.slice(1),lo=function(){return no.getValues(uo)},co=function(fo){return no.setValues(uo,fo)};return so.apply(void 0,e$2.__spreadArray([lo,co],io,!1))},[])},StoreProvider:function(ro){function no(io){var oo=ro.call(this,io)||this;return oo.store=new A$2(io.initialValue,function(){for(var ao,so=[],uo=0;uo<arguments.length;uo++)so[uo]=arguments[uo];oo.props.onValuesChange&&(ao=oo.props).onValuesChange.apply(ao,so)}),oo}return e$2.__extends(no,ro),no.prototype.shouldComponentUpdate=function(io){return io.children!==this.props.children},no.prototype.render=function(){return u$1.createElement(to.Provider,{value:this.store},this.props.children)},no}(u$1.Component)}},unsafe__useFiveInstance=react.unsafe__useFiveInstance=function(){return s()},react.useFiveAction=function(){var eo=s();return{updateCamera:u$1.useCallback(function(to,ro){return eo.updateCamera(to,ro)},[eo]),initBasisLoader:u$1.useCallback(function(to){return eo.initBasisLoader(to)},[eo]),getPixels:u$1.useCallback(function(to,ro,no,io,oo){return eo.getPixels(to,ro,no,io,oo)},[eo]),render:u$1.useCallback(function(to){return eo.render(to)},[eo]),needsRender:u$1.useCallback(function(){return eo.needsRender=!0},[eo]),preloadPano:u$1.useCallback(function(to,ro){return eo.preloadPano(to,ro)},[eo])}},react.useFiveCameraDirection=function(){var eo=s(),to=u$1.useState(function(){return m$3(eo)}),ro=to[0],no=to[1];return u$1.useLayoutEffect(function(){return eo.on("cameraUpdate",function(){return no(m$3(eo))})},[eo]),ro},react.useFiveCameraRaycaster=function(){var eo=s(),to=u$1.useState(function(){return h$3(eo)}),ro=to[0],no=to[1];return u$1.useLayoutEffect(function(){return eo.on("cameraUpdate",function(){return no(h$3(eo))})},[eo]),ro},react.useFiveCurrentObserver=function(){var eo=s(),to=u$1.useState(function(){return eo.getCurrentState()}),ro=to[0],no=to[1];return u$1.useLayoutEffect(function(){return eo.on("currentStateChange",function(){return no(eo.getCurrentState())})},[eo]),eo.work?eo.work.observers[ro.panoIndex]:null},react.useFiveCurrentState=function(){var eo=s(),to=u$1.useState(function(){return eo.getCurrentState()}),ro=to[0],no=to[1],io=u$1.useCallback(function(oo,ao,so){ao===void 0&&(ao=!1),so===void 0&&(so=!0);var uo=typeof oo=="function"?oo(eo.getCurrentState()):oo;eo.setState(uo,ao,so)},[eo]);return u$1.useLayoutEffect(function(){return eo.on("currentStateChange",function(){return no(eo.getCurrentState())})},[eo]),[ro,io]},useFiveEventCallback=react.useFiveEventCallback=function(eo,to,ro){var no=s(),io=[no,eo];ro!==void 0&&(io=io.concat(ro)),u$1.useLayoutEffect(function(){return no.on(eo,to)},io)},react.useFiveFloor=function(){var eo=s(),to=u$1.useState(eo.model.shownFloor),ro=to[0],no=to[1],io=u$1.useState(eo.model.floorLength),oo=io[0],ao=io[1],so=u$1.useCallback(function(uo){typeof uo=="number"?eo.model.show(uo):eo.model.show()},[eo]);return u$1.useLayoutEffect(function(){var uo=[];return uo.push(eo.on("modelShownFloorChange",function(){return no(eo.model.shownFloor)})),uo.push(eo.on("modelLoaded",function(){return ao(eo.model.floorLength)})),function(){for(var lo;lo=uo.shift();)lo()}},[eo]),[ro,oo,so]},react.useFiveHelper=function(){var eo=s(),to=u$1.useState(eo.helperVisible),ro=to[0],no=to[1],io=u$1.useCallback(function(oo){eo.helperVisible=oo},[eo]);return u$1.useLayoutEffect(function(){return eo.on("helpersVisibleChange",function(oo){return no(oo)})},[eo]),[ro,io]},react.useFiveModelIntersectRaycaster=function(){var eo=s();return u$1.useCallback(function(to){return eo.model.intersectRaycaster(to)},[eo])},useFiveModelReadyState=react.useFiveModelReadyState=function(){var eo=s(),to=u$1.useState(function(){return y$2(eo)}),ro=to[0],no=to[1];return u$1.useLayoutEffect(function(){return eo.on("modelLoaded",function(){return no(y$2(eo))})},[eo]),ro},react.useFiveProject2d=function(){var eo=s(),to=u$1.useState(function(){return Symbol()});to[0];var ro=to[1];return u$1.useLayoutEffect(function(){return eo.on("cameraUpdate",function(){return ro(Symbol())})},[eo]),u$1.useCallback(function(no,io){return eo.project2d(no,io)},[eo])},react.useFiveScene=v$2,react.useFiveSceneEffect=d$2,useFiveState=react.useFiveState=function(){var eo=s(),to=u$1.useState(function(){return p$3(eo)}),ro=to[0],no=to[1],io=u$1.useCallback(function(oo,ao,so){ao===void 0&&(ao=!1),so===void 0&&(so=!0);var uo=typeof oo=="function"?oo(eo.getCurrentState()):oo;eo.setState(uo,ao,so)},[eo]);return u$1.useLayoutEffect(function(){return eo.on("stateChange",function(){return no(p$3(eo))})},[eo]),[ro,io]},react.useFiveWork=function(){var eo=s(),to=c$2(),ro=u$1.useState(function(){return eo.work}),no=ro[0],io=ro[1];return u$1.useLayoutEffect(function(){return eo.on("load",function(){return io(eo.work)})},[eo]),[no,to]},react.withFive=function(eo){return function(to){return u$1.forwardRef(function(ro,no){var io=s(),oo=c$2(),ao=function(qs,su){return[S("unsafe__fiveInstance",su)?qs:void 0]}(io,eo)[0],so=function(qs,su){var uu=S("state",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return e$2.__assign({},qs.state)},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("stateChange",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),uo=so[0],lo=so[1],co=function(qs,su){var uu=S("currentState",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.getCurrentState()},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("currentStateChange",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),fo=co[0],mo=co[1],go=function(qs,su){var uu=S("currentObserver",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.getCurrentState()},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("currentStateChange",function(){return iu(Symbol())})},[qs]),[hu?qs.work?qs.work.observers[hu.panoIndex]:null:void 0,Xs]}(io,eo),yo=go[0],vo=go[1],Ao=function(qs,su){var uu=S("work",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.work},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("load",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),ho=Ao[0],po=Ao[1],Mo=function(qs,su){var uu=S("model",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.model},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("modelLoaded",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),xo=Mo[0],wo=Mo[1],bo=function(qs,su){return[S("scene",su)?qs.scene:void 0]}(io,eo)[0],_o=function(qs,su){var uu=S("cameraDirection",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.camera.getWorldDirection(new i.Vector3)},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("cameraUpdate",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),To=_o[0],No=_o[1],Po=function(qs,su){var uu=S("cameraRaycaster",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu){var yu=qs.camera.getWorldDirection(new i.Vector3);return new i.Raycaster(qs.camera.position,yu)}},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("cameraUpdate",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),Co=Po[0],Do=Po[1],zo=function(qs,su){var uu=S("modelReadyState",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.model.empty?"Empty":"Loaded"},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("modelLoaded",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),Ro=zo[0],Lo=zo[1],$o=function(qs,su){var uu=S("shownFloor",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.model.shownFloor},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("modelShownFloorChange",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),jo=$o[0],Wo=$o[1],Ko=function(qs,su){var uu=S("totalFloorLength",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.model.hasFloors()},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("modelLoaded",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),Jo=Ko[0],Go=Ko[1],Xo=function(qs,su){var uu=S("helperVisible",su),Js=u$1.useState(Symbol()),Xs=Js[0],iu=Js[1],hu=u$1.useMemo(function(){if(uu)return qs.helperVisible},[qs,Xs]);return u$1.useLayoutEffect(function(){if(uu)return qs.on("helpersVisibleChange",function(){return iu(Symbol())})},[qs]),[hu,Xs]}(io,eo),va=Xo[0],tu=Xo[1],Zs=u$1.useMemo(function(){var qs={};return g$3(qs,{setState:b$2(io,eo),loadWork:C$1(oo,eo),on:w$2(io,eo),once:E$1(io,eo),off:k$2(io,eo),intersectRaycaster:x$2(io,eo),project2d:L(io,eo),updateCamera:F$1(io,eo),initBasisLoader:_$1(io,eo),getPixels:P(io,eo),render:R(io,eo),needsRender:V(io,eo),preloadPano:M(io,eo),showFloor:W(io,eo),toggleHelperVisible:O(io,eo)}),qs},[io,oo]),ga=u$1.useMemo(function(){var qs=e$2.__assign({},Zs);return g$3(qs,{unsafe__fiveInstance:ao,state:uo,currentState:fo,currentObserver:yo,work:ho,model:xo,scene:bo,cameraDirection:To,cameraRaycaster:Co,modelReadyState:Ro,shownFloor:jo,totalFloorLength:Jo,helperVisible:va}),qs},[io,Zs,lo,mo,vo,po,wo,No,Do,Lo,Wo,Go,tu]);return u$1.createElement(to,e$2.__assign({ref:no,$five:ga},ro))})}};const common={black:"#000",white:"#fff"};var common$1=common;const red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var red$1=red;const purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var purple$1=purple;const blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var blue$1=blue;const lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var lightBlue$1=lightBlue;const green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var green$1=green;const orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var orange$1=orange;const grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var grey$1=grey;function _extends(){return _extends=Object.assign||function(eo){for(var to=1;to<arguments.length;to++){var ro=arguments[to];for(var no in ro)Object.prototype.hasOwnProperty.call(ro,no)&&(eo[no]=ro[no])}return eo},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(eo,to){if(eo==null)return{};var ro={},no=Object.keys(eo),io,oo;for(oo=0;oo<no.length;oo++)io=no[oo],!(to.indexOf(io)>=0)&&(ro[io]=eo[io]);return ro}function memoize$1(eo){var to=Object.create(null);return function(ro){return to[ro]===void 0&&(to[ro]=eo(ro)),to[ro]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(eo){return reactPropsRegex.test(eo)||eo.charCodeAt(0)===111&&eo.charCodeAt(1)===110&&eo.charCodeAt(2)<91});function sheetForTag(eo){if(eo.sheet)return eo.sheet;for(var to=0;to<document.styleSheets.length;to++)if(document.styleSheets[to].ownerNode===eo)return document.styleSheets[to]}function createStyleElement(eo){var to=document.createElement("style");return to.setAttribute("data-emotion",eo.key),eo.nonce!==void 0&&to.setAttribute("nonce",eo.nonce),to.appendChild(document.createTextNode("")),to.setAttribute("data-s",""),to}var StyleSheet=function(){function eo(ro){var no=this;this._insertTag=function(io){var oo;no.tags.length===0?no.insertionPoint?oo=no.insertionPoint.nextSibling:no.prepend?oo=no.container.firstChild:oo=no.before:oo=no.tags[no.tags.length-1].nextSibling,no.container.insertBefore(io,oo),no.tags.push(io)},this.isSpeedy=ro.speedy===void 0?!0:ro.speedy,this.tags=[],this.ctr=0,this.nonce=ro.nonce,this.key=ro.key,this.container=ro.container,this.prepend=ro.prepend,this.insertionPoint=ro.insertionPoint,this.before=null}var to=eo.prototype;return to.hydrate=function(no){no.forEach(this._insertTag)},to.insert=function(no){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var io=this.tags[this.tags.length-1];if(this.isSpeedy){var oo=sheetForTag(io);try{oo.insertRule(no,oo.cssRules.length)}catch{}}else io.appendChild(document.createTextNode(no));this.ctr++},to.flush=function(){this.tags.forEach(function(no){return no.parentNode&&no.parentNode.removeChild(no)}),this.tags=[],this.ctr=0},eo}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(eo,to){return(((to<<2^charat(eo,0))<<2^charat(eo,1))<<2^charat(eo,2))<<2^charat(eo,3)}function trim(eo){return eo.trim()}function match(eo,to){return(eo=to.exec(eo))?eo[0]:eo}function replace(eo,to,ro){return eo.replace(to,ro)}function indexof(eo,to){return eo.indexOf(to)}function charat(eo,to){return eo.charCodeAt(to)|0}function substr(eo,to,ro){return eo.slice(to,ro)}function strlen(eo){return eo.length}function sizeof(eo){return eo.length}function append(eo,to){return to.push(eo),eo}function combine(eo,to){return eo.map(to).join("")}var line=1,column=1,length=0,position$1=0,character=0,characters="";function node(eo,to,ro,no,io,oo,ao){return{value:eo,root:to,parent:ro,type:no,props:io,children:oo,line,column,length:ao,return:""}}function copy(eo,to){return assign(node("",null,null,"",null,null,0),eo,{length:-eo.length},to)}function char(){return character}function prev(){return character=position$1>0?charat(characters,--position$1):0,column--,character===10&&(column=1,line--),character}function next(){return character=position$1<length?charat(characters,position$1++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position$1)}function caret(){return position$1}function slice(eo,to){return substr(characters,eo,to)}function token(eo){switch(eo){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(eo){return line=column=1,length=strlen(characters=eo),position$1=0,[]}function dealloc(eo){return characters="",eo}function delimit(eo){return trim(slice(position$1-1,delimiter(eo===91?eo+2:eo===40?eo+1:eo)))}function whitespace(eo){for(;(character=peek())&&character<33;)next();return token(eo)>2||token(character)>3?"":" "}function escaping(eo,to){for(;--to&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(eo,caret()+(to<6&&peek()==32&&next()==32))}function delimiter(eo){for(;next();)switch(character){case eo:return position$1;case 34:case 39:eo!==34&&eo!==39&&delimiter(character);break;case 40:eo===41&&delimiter(eo);break;case 92:next();break}return position$1}function commenter(eo,to){for(;next()&&eo+character!==47+10;)if(eo+character===42+42&&peek()===47)break;return"/*"+slice(to,position$1-1)+"*"+from(eo===47?eo:next())}function identifier(eo){for(;!token(peek());)next();return slice(eo,position$1)}function compile(eo){return dealloc(parse("",null,null,null,[""],eo=alloc(eo),0,[0],eo))}function parse(eo,to,ro,no,io,oo,ao,so,uo){for(var lo=0,co=0,fo=ao,mo=0,go=0,yo=0,vo=1,Ao=1,ho=1,po=0,Mo="",xo=io,wo=oo,bo=no,_o=Mo;Ao;)switch(yo=po,po=next()){case 40:if(yo!=108&&_o.charCodeAt(fo-1)==58){indexof(_o+=replace(delimit(po),"&","&\f"),"&\f")!=-1&&(ho=-1);break}case 34:case 39:case 91:_o+=delimit(po);break;case 9:case 10:case 13:case 32:_o+=whitespace(yo);break;case 92:_o+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),to,ro),uo);break;default:_o+="/"}break;case 123*vo:so[lo++]=strlen(_o)*ho;case 125*vo:case 59:case 0:switch(po){case 0:case 125:Ao=0;case 59+co:go>0&&strlen(_o)-fo&&append(go>32?declaration(_o+";",no,ro,fo-1):declaration(replace(_o," ","")+";",no,ro,fo-2),uo);break;case 59:_o+=";";default:if(append(bo=ruleset(_o,to,ro,lo,co,io,so,Mo,xo=[],wo=[],fo),oo),po===123)if(co===0)parse(_o,to,bo,bo,xo,oo,fo,so,wo);else switch(mo){case 100:case 109:case 115:parse(eo,bo,bo,no&&append(ruleset(eo,bo,bo,0,0,io,so,Mo,io,xo=[],fo),wo),io,wo,fo,so,no?xo:wo);break;default:parse(_o,bo,bo,bo,[""],wo,0,so,wo)}}lo=co=go=0,vo=ho=1,Mo=_o="",fo=ao;break;case 58:fo=1+strlen(_o),go=yo;default:if(vo<1){if(po==123)--vo;else if(po==125&&vo++==0&&prev()==125)continue}switch(_o+=from(po),po*vo){case 38:ho=co>0?1:(_o+="\f",-1);break;case 44:so[lo++]=(strlen(_o)-1)*ho,ho=1;break;case 64:peek()===45&&(_o+=delimit(next())),mo=peek(),co=fo=strlen(Mo=_o+=identifier(caret())),po++;break;case 45:yo===45&&strlen(_o)==2&&(vo=0)}}return oo}function ruleset(eo,to,ro,no,io,oo,ao,so,uo,lo,co){for(var fo=io-1,mo=io===0?oo:[""],go=sizeof(mo),yo=0,vo=0,Ao=0;yo<no;++yo)for(var ho=0,po=substr(eo,fo+1,fo=abs(vo=ao[yo])),Mo=eo;ho<go;++ho)(Mo=trim(vo>0?mo[ho]+" "+po:replace(po,/&\f/g,mo[ho])))&&(uo[Ao++]=Mo);return node(eo,to,ro,io===0?RULESET:so,uo,lo,co)}function comment(eo,to,ro){return node(eo,to,ro,COMMENT,from(char()),substr(eo,2,-2),0)}function declaration(eo,to,ro,no){return node(eo,to,ro,DECLARATION,substr(eo,0,no),substr(eo,no+1,-1),no)}function prefix(eo,to){switch(hash(eo,to)){case 5103:return WEBKIT+"print-"+eo+eo;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+eo+eo;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+eo+MOZ+eo+MS+eo+eo;case 6828:case 4268:return WEBKIT+eo+MS+eo+eo;case 6165:return WEBKIT+eo+MS+"flex-"+eo+eo;case 5187:return WEBKIT+eo+replace(eo,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+eo;case 5443:return WEBKIT+eo+MS+"flex-item-"+replace(eo,/flex-|-self/,"")+eo;case 4675:return WEBKIT+eo+MS+"flex-line-pack"+replace(eo,/align-content|flex-|-self/,"")+eo;case 5548:return WEBKIT+eo+MS+replace(eo,"shrink","negative")+eo;case 5292:return WEBKIT+eo+MS+replace(eo,"basis","preferred-size")+eo;case 6060:return WEBKIT+"box-"+replace(eo,"-grow","")+WEBKIT+eo+MS+replace(eo,"grow","positive")+eo;case 4554:return WEBKIT+replace(eo,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+eo;case 6187:return replace(replace(replace(eo,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),eo,"")+eo;case 5495:case 3959:return replace(eo,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(eo,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+eo+eo;case 4095:case 3583:case 4068:case 2532:return replace(eo,/(.+)-inline(.+)/,WEBKIT+"$1$2")+eo;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(eo)-1-to>6)switch(charat(eo,to+1)){case 109:if(charat(eo,to+4)!==45)break;case 102:return replace(eo,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(eo,to+3)==108?"$3":"$2-$3"))+eo;case 115:return~indexof(eo,"stretch")?prefix(replace(eo,"stretch","fill-available"),to)+eo:eo}break;case 4949:if(charat(eo,to+1)!==115)break;case 6444:switch(charat(eo,strlen(eo)-3-(~indexof(eo,"!important")&&10))){case 107:return replace(eo,":",":"+WEBKIT)+eo;case 101:return replace(eo,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(eo,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+eo}break;case 5936:switch(charat(eo,to+11)){case 114:return WEBKIT+eo+MS+replace(eo,/[svh]\w+-[tblr]{2}/,"tb")+eo;case 108:return WEBKIT+eo+MS+replace(eo,/[svh]\w+-[tblr]{2}/,"tb-rl")+eo;case 45:return WEBKIT+eo+MS+replace(eo,/[svh]\w+-[tblr]{2}/,"lr")+eo}return WEBKIT+eo+MS+eo+eo}return eo}function serialize(eo,to){for(var ro="",no=sizeof(eo),io=0;io<no;io++)ro+=to(eo[io],io,eo,to)||"";return ro}function stringify(eo,to,ro,no){switch(eo.type){case IMPORT:case DECLARATION:return eo.return=eo.return||eo.value;case COMMENT:return"";case KEYFRAMES:return eo.return=eo.value+"{"+serialize(eo.children,no)+"}";case RULESET:eo.value=eo.props.join(",")}return strlen(ro=serialize(eo.children,no))?eo.return=eo.value+"{"+ro+"}":""}function middleware(eo){var to=sizeof(eo);return function(ro,no,io,oo){for(var ao="",so=0;so<to;so++)ao+=eo[so](ro,no,io,oo)||"";return ao}}function rulesheet(eo){return function(to){to.root||(to=to.return)&&eo(to)}}function prefixer(eo,to,ro,no){if(eo.length>-1&&!eo.return)switch(eo.type){case DECLARATION:eo.return=prefix(eo.value,eo.length);break;case KEYFRAMES:return serialize([copy(eo,{value:replace(eo.value,"@","@"+WEBKIT)})],no);case RULESET:if(eo.length)return combine(eo.props,function(io){switch(match(io,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(eo,{props:[replace(io,/:(read-\w+)/,":"+MOZ+"$1")]})],no);case"::placeholder":return serialize([copy(eo,{props:[replace(io,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(eo,{props:[replace(io,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(eo,{props:[replace(io,/:(plac\w+)/,MS+"input-$1")]})],no)}return""})}}var identifierWithPointTracking=function eo(to,ro,no){for(var io=0,oo=0;io=oo,oo=peek(),io===38&&oo===12&&(ro[no]=1),!token(oo);)next();return slice(to,position$1)},toRules=function eo(to,ro){var no=-1,io=44;do switch(token(io)){case 0:io===38&&peek()===12&&(ro[no]=1),to[no]+=identifierWithPointTracking(position$1-1,ro,no);break;case 2:to[no]+=delimit(io);break;case 4:if(io===44){to[++no]=peek()===58?"&\f":"",ro[no]=to[no].length;break}default:to[no]+=from(io)}while(io=next());return to},getRules=function eo(to,ro){return dealloc(toRules(alloc(to),ro))},fixedElements=new WeakMap,compat=function eo(to){if(!(to.type!=="rule"||!to.parent||to.length<1)){for(var ro=to.value,no=to.parent,io=to.column===no.column&&to.line===no.line;no.type!=="rule";)if(no=no.parent,!no)return;if(!(to.props.length===1&&ro.charCodeAt(0)!==58&&!fixedElements.get(no))&&!io){fixedElements.set(to,!0);for(var oo=[],ao=getRules(ro,oo),so=no.props,uo=0,lo=0;uo<ao.length;uo++)for(var co=0;co<so.length;co++,lo++)to.props[lo]=oo[uo]?ao[uo].replace(/&\f/g,so[co]):so[co]+" "+ao[uo]}}},removeLabel=function eo(to){if(to.type==="decl"){var ro=to.value;ro.charCodeAt(0)===108&&ro.charCodeAt(2)===98&&(to.return="",to.value="")}},defaultStylisPlugins=[prefixer],createCache=function eo(to){var ro=to.key;if(ro==="css"){var no=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(no,function(vo){var Ao=vo.getAttribute("data-emotion");Ao.indexOf(" ")!==-1&&(document.head.appendChild(vo),vo.setAttribute("data-s",""))})}var io=to.stylisPlugins||defaultStylisPlugins,oo={},ao,so=[];ao=to.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+ro+' "]'),function(vo){for(var Ao=vo.getAttribute("data-emotion").split(" "),ho=1;ho<Ao.length;ho++)oo[Ao[ho]]=!0;so.push(vo)});var uo,lo=[compat,removeLabel];{var co,fo=[stringify,rulesheet(function(vo){co.insert(vo)})],mo=middleware(lo.concat(io,fo)),go=function(Ao){return serialize(compile(Ao),mo)};uo=function(Ao,ho,po,Mo){co=po,go(Ao?Ao+"{"+ho.styles+"}":ho.styles),Mo&&(yo.inserted[ho.name]=!0)}}var yo={key:ro,sheet:new StyleSheet({key:ro,container:ao,nonce:to.nonce,speedy:to.speedy,prepend:to.prepend,insertionPoint:to.insertionPoint}),nonce:to.nonce,inserted:oo,registered:{},insert:uo};return yo.sheet.hydrate(so),yo},reactIs$1={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$2=b$1?Symbol.for("react.strict_mode"):60108,g$2=b$1?Symbol.for("react.profiler"):60114,h$2=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$2=b$1?Symbol.for("react.concurrent_mode"):60111,n$2=b$1?Symbol.for("react.forward_ref"):60112,p$2=b$1?Symbol.for("react.suspense"):60113,q$2=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z$1(eo){if(typeof eo=="object"&&eo!==null){var to=eo.$$typeof;switch(to){case c$1:switch(eo=eo.type,eo){case l$1:case m$2:case e$1:case g$2:case f$2:case p$2:return eo;default:switch(eo=eo&&eo.$$typeof,eo){case k$1:case n$2:case t:case r$1:case h$2:return eo;default:return to}}case d$1:return to}}}function A$1(eo){return z$1(eo)===m$2}reactIs_production_min$1.AsyncMode=l$1;reactIs_production_min$1.ConcurrentMode=m$2;reactIs_production_min$1.ContextConsumer=k$1;reactIs_production_min$1.ContextProvider=h$2;reactIs_production_min$1.Element=c$1;reactIs_production_min$1.ForwardRef=n$2;reactIs_production_min$1.Fragment=e$1;reactIs_production_min$1.Lazy=t;reactIs_production_min$1.Memo=r$1;reactIs_production_min$1.Portal=d$1;reactIs_production_min$1.Profiler=g$2;reactIs_production_min$1.StrictMode=f$2;reactIs_production_min$1.Suspense=p$2;reactIs_production_min$1.isAsyncMode=function(eo){return A$1(eo)||z$1(eo)===l$1};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function(eo){return z$1(eo)===k$1};reactIs_production_min$1.isContextProvider=function(eo){return z$1(eo)===h$2};reactIs_production_min$1.isElement=function(eo){return typeof eo=="object"&&eo!==null&&eo.$$typeof===c$1};reactIs_production_min$1.isForwardRef=function(eo){return z$1(eo)===n$2};reactIs_production_min$1.isFragment=function(eo){return z$1(eo)===e$1};reactIs_production_min$1.isLazy=function(eo){return z$1(eo)===t};reactIs_production_min$1.isMemo=function(eo){return z$1(eo)===r$1};reactIs_production_min$1.isPortal=function(eo){return z$1(eo)===d$1};reactIs_production_min$1.isProfiler=function(eo){return z$1(eo)===g$2};reactIs_production_min$1.isStrictMode=function(eo){return z$1(eo)===f$2};reactIs_production_min$1.isSuspense=function(eo){return z$1(eo)===p$2};reactIs_production_min$1.isValidElementType=function(eo){return typeof eo=="string"||typeof eo=="function"||eo===e$1||eo===m$2||eo===g$2||eo===f$2||eo===p$2||eo===q$2||typeof eo=="object"&&eo!==null&&(eo.$$typeof===t||eo.$$typeof===r$1||eo.$$typeof===h$2||eo.$$typeof===k$1||eo.$$typeof===n$2||eo.$$typeof===w$1||eo.$$typeof===x$1||eo.$$typeof===y$1||eo.$$typeof===v$1)};reactIs_production_min$1.typeOf=z$1;reactIs$1.exports=reactIs_production_min$1;var reactIs=reactIs$1.exports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(eo,to,ro){var no="";return ro.split(" ").forEach(function(io){eo[io]!==void 0?to.push(eo[io]+";"):no+=io+" "}),no}var registerStyles=function eo(to,ro,no){var io=to.key+"-"+ro.name;(no===!1||isBrowser===!1)&&to.registered[io]===void 0&&(to.registered[io]=ro.styles)},insertStyles=function eo(to,ro,no){registerStyles(to,ro,no);var io=to.key+"-"+ro.name;if(to.inserted[ro.name]===void 0){var oo=ro;do to.insert(ro===oo?"."+io:"",oo,to.sheet,!0),oo=oo.next;while(oo!==void 0)}};function murmur2(eo){for(var to=0,ro,no=0,io=eo.length;io>=4;++no,io-=4)ro=eo.charCodeAt(no)&255|(eo.charCodeAt(++no)&255)<<8|(eo.charCodeAt(++no)&255)<<16|(eo.charCodeAt(++no)&255)<<24,ro=(ro&65535)*1540483477+((ro>>>16)*59797<<16),ro^=ro>>>24,to=(ro&65535)*1540483477+((ro>>>16)*59797<<16)^(to&65535)*1540483477+((to>>>16)*59797<<16);switch(io){case 3:to^=(eo.charCodeAt(no+2)&255)<<16;case 2:to^=(eo.charCodeAt(no+1)&255)<<8;case 1:to^=eo.charCodeAt(no)&255,to=(to&65535)*1540483477+((to>>>16)*59797<<16)}return to^=to>>>13,to=(to&65535)*1540483477+((to>>>16)*59797<<16),((to^to>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function eo(to){return to.charCodeAt(1)===45},isProcessableValue=function eo(to){return to!=null&&typeof to!="boolean"},processStyleName=memoize$1(function(eo){return isCustomProperty(eo)?eo:eo.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function eo(to,ro){switch(to){case"animation":case"animationName":if(typeof ro=="string")return ro.replace(animationRegex,function(no,io,oo){return cursor={name:io,styles:oo,next:cursor},io})}return unitlessKeys[to]!==1&&!isCustomProperty(to)&&typeof ro=="number"&&ro!==0?ro+"px":ro};function handleInterpolation(eo,to,ro){if(ro==null)return"";if(ro.__emotion_styles!==void 0)return ro;switch(typeof ro){case"boolean":return"";case"object":{if(ro.anim===1)return cursor={name:ro.name,styles:ro.styles,next:cursor},ro.name;if(ro.styles!==void 0){var no=ro.next;if(no!==void 0)for(;no!==void 0;)cursor={name:no.name,styles:no.styles,next:cursor},no=no.next;var io=ro.styles+";";return io}return createStringFromObject(eo,to,ro)}case"function":{if(eo!==void 0){var oo=cursor,ao=ro(eo);return cursor=oo,handleInterpolation(eo,to,ao)}break}}if(to==null)return ro;var so=to[ro];return so!==void 0?so:ro}function createStringFromObject(eo,to,ro){var no="";if(Array.isArray(ro))for(var io=0;io<ro.length;io++)no+=handleInterpolation(eo,to,ro[io])+";";else for(var oo in ro){var ao=ro[oo];if(typeof ao!="object")to!=null&&to[ao]!==void 0?no+=oo+"{"+to[ao]+"}":isProcessableValue(ao)&&(no+=processStyleName(oo)+":"+processStyleValue(oo,ao)+";");else if(Array.isArray(ao)&&typeof ao[0]=="string"&&(to==null||to[ao[0]]===void 0))for(var so=0;so<ao.length;so++)isProcessableValue(ao[so])&&(no+=processStyleName(oo)+":"+processStyleValue(oo,ao[so])+";");else{var uo=handleInterpolation(eo,to,ao);switch(oo){case"animation":case"animationName":{no+=processStyleName(oo)+":"+uo+";";break}default:no+=oo+"{"+uo+"}"}}}return no}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function eo(to,ro,no){if(to.length===1&&typeof to[0]=="object"&&to[0]!==null&&to[0].styles!==void 0)return to[0];var io=!0,oo="";cursor=void 0;var ao=to[0];ao==null||ao.raw===void 0?(io=!1,oo+=handleInterpolation(no,ro,ao)):oo+=ao[0];for(var so=1;so<to.length;so++)oo+=handleInterpolation(no,ro,to[so]),io&&(oo+=ao[so]);labelPattern.lastIndex=0;for(var uo="",lo;(lo=labelPattern.exec(oo))!==null;)uo+="-"+lo[1];var co=murmur2(oo)+uo;return{name:co,styles:oo,next:cursor}},EmotionCacheContext=react$1.exports.createContext(typeof HTMLElement!="undefined"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function eo(to){return react$1.exports.forwardRef(function(ro,no){var io=react$1.exports.useContext(EmotionCacheContext);return to(ro,io,no)})},ThemeContext$2=react$1.exports.createContext({});React$1["useInsertionEffect"]&&React$1["useInsertionEffect"];React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:react$1.exports.useLayoutEffect;function css(){for(var eo=arguments.length,to=new Array(eo),ro=0;ro<eo;ro++)to[ro]=arguments[ro];return serializeStyles(to)}var keyframes=function eo(){var to=css.apply(void 0,arguments),ro="animation-"+to.name;return{name:ro,styles:"@keyframes "+ro+"{"+to.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function eo(to){return to!=="theme"},getDefaultShouldForwardProp=function eo(to){return typeof to=="string"&&to.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function eo(to,ro,no){var io;if(ro){var oo=ro.shouldForwardProp;io=to.__emotion_forwardProp&&oo?function(ao){return to.__emotion_forwardProp(ao)&&oo(ao)}:oo}return typeof io!="function"&&no&&(io=to.__emotion_forwardProp),io},useInsertionEffect=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:function eo(to){to()};function useInsertionEffectMaybe(eo){useInsertionEffect(eo)}var Insertion=function eo(to){var ro=to.cache,no=to.serialized,io=to.isStringTag;return registerStyles(ro,no,io),useInsertionEffectMaybe(function(){return insertStyles(ro,no,io)}),null},createStyled$1=function eo(to,ro){var no=to.__emotion_real===to,io=no&&to.__emotion_base||to,oo,ao;ro!==void 0&&(oo=ro.label,ao=ro.target);var so=composeShouldForwardProps(to,ro,no),uo=so||getDefaultShouldForwardProp(io),lo=!uo("as");return function(){var co=arguments,fo=no&&to.__emotion_styles!==void 0?to.__emotion_styles.slice(0):[];if(oo!==void 0&&fo.push("label:"+oo+";"),co[0]==null||co[0].raw===void 0)fo.push.apply(fo,co);else{fo.push(co[0][0]);for(var mo=co.length,go=1;go<mo;go++)fo.push(co[go],co[0][go])}var yo=withEmotionCache(function(vo,Ao,ho){var po=lo&&vo.as||io,Mo="",xo=[],wo=vo;if(vo.theme==null){wo={};for(var bo in vo)wo[bo]=vo[bo];wo.theme=react$1.exports.useContext(ThemeContext$2)}typeof vo.className=="string"?Mo=getRegisteredStyles(Ao.registered,xo,vo.className):vo.className!=null&&(Mo=vo.className+" ");var _o=serializeStyles(fo.concat(xo),Ao.registered,wo);Mo+=Ao.key+"-"+_o.name,ao!==void 0&&(Mo+=" "+ao);var To=lo&&so===void 0?getDefaultShouldForwardProp(po):uo,No={};for(var Po in vo)lo&&Po==="as"||To(Po)&&(No[Po]=vo[Po]);return No.className=Mo,No.ref=ho,react$1.exports.createElement(react$1.exports.Fragment,null,react$1.exports.createElement(Insertion,{cache:Ao,serialized:_o,isStringTag:typeof po=="string"}),react$1.exports.createElement(po,No))});return yo.displayName=oo!==void 0?oo:"Styled("+(typeof io=="string"?io:io.displayName||io.name||"Component")+")",yo.defaultProps=to.defaultProps,yo.__emotion_real=yo,yo.__emotion_base=io,yo.__emotion_styles=fo,yo.__emotion_forwardProp=so,Object.defineProperty(yo,"toString",{value:function(){return"."+ao}}),yo.withComponent=function(vo,Ao){return eo(vo,_extends({},ro,Ao,{shouldForwardProp:composeShouldForwardProps(yo,Ao,!0)})).apply(void 0,fo)},yo}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(eo){newStyled[eo]=newStyled(eo)});var emStyled=newStyled,jsxRuntime$1={exports:{}},reactJsxRuntime_production_min={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=react$1.exports,g$1=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$1=Symbol.for;g$1=h$1("react.element"),reactJsxRuntime_production_min.Fragment=h$1("react.fragment")}var m$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$1=Object.prototype.hasOwnProperty,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(eo,to,ro){var no,io={},oo=null,ao=null;ro!==void 0&&(oo=""+ro),to.key!==void 0&&(oo=""+to.key),to.ref!==void 0&&(ao=to.ref);for(no in to)n$1.call(to,no)&&!p$1.hasOwnProperty(no)&&(io[no]=to[no]);if(eo&&eo.defaultProps)for(no in to=eo.defaultProps,to)io[no]===void 0&&(io[no]=to[no]);return{$$typeof:g$1,type:eo,key:oo,ref:ao,props:io,_owner:m$1.current}}reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime$1.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime$1.exports.jsx,jsxs=jsxRuntime$1.exports.jsxs,Fragment=jsxRuntime$1.exports.Fragment;var jsxRuntime=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsx,jsxs,Fragment});/** @license MUI v5.4.2
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$2(eo,to){return emStyled(eo,to)}function isPlainObject(eo){return eo!==null&&typeof eo=="object"&&eo.constructor===Object}function deepmerge(eo,to,ro={clone:!0}){const no=ro.clone?_extends({},eo):eo;return isPlainObject(eo)&&isPlainObject(to)&&Object.keys(to).forEach(io=>{io!=="__proto__"&&(isPlainObject(to[io])&&io in eo&&isPlainObject(eo[io])?no[io]=deepmerge(eo[io],to[io],ro):no[io]=to[io])}),no}function formatMuiErrorMessage(eo){let to="https://mui.com/production-error/?code="+eo;for(let ro=1;ro<arguments.length;ro+=1)to+="&args[]="+encodeURIComponent(arguments[ro]);return"Minified MUI error #"+eo+"; visit "+to+" for the full message."}var reactIs_production_min={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=60103,c=60106,d=60107,e=60108,f=60114,g=60109,h=60110,k=60112,l=60113,m=60120,n=60115,p=60116,q=60121,r=60122,u=60117,v=60129,w=60131;if(typeof Symbol=="function"&&Symbol.for){var x=Symbol.for;b=x("react.element"),c=x("react.portal"),d=x("react.fragment"),e=x("react.strict_mode"),f=x("react.profiler"),g=x("react.provider"),h=x("react.context"),k=x("react.forward_ref"),l=x("react.suspense"),m=x("react.suspense_list"),n=x("react.memo"),p=x("react.lazy"),q=x("react.block"),r=x("react.server.block"),u=x("react.fundamental"),v=x("react.debug_trace_mode"),w=x("react.legacy_hidden")}function y(eo){if(typeof eo=="object"&&eo!==null){var to=eo.$$typeof;switch(to){case b:switch(eo=eo.type,eo){case d:case f:case e:case l:case m:return eo;default:switch(eo=eo&&eo.$$typeof,eo){case h:case k:case p:case n:case g:return eo;default:return to}}case c:return to}}}var z=g,A=b,B=k,C=d,D=p,E=n,F=c,G=f,H=e,I=l;reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=z;reactIs_production_min.Element=A;reactIs_production_min.ForwardRef=B;reactIs_production_min.Fragment=C;reactIs_production_min.Lazy=D;reactIs_production_min.Memo=E;reactIs_production_min.Portal=F;reactIs_production_min.Profiler=G;reactIs_production_min.StrictMode=H;reactIs_production_min.Suspense=I;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(eo){return y(eo)===h};reactIs_production_min.isContextProvider=function(eo){return y(eo)===g};reactIs_production_min.isElement=function(eo){return typeof eo=="object"&&eo!==null&&eo.$$typeof===b};reactIs_production_min.isForwardRef=function(eo){return y(eo)===k};reactIs_production_min.isFragment=function(eo){return y(eo)===d};reactIs_production_min.isLazy=function(eo){return y(eo)===p};reactIs_production_min.isMemo=function(eo){return y(eo)===n};reactIs_production_min.isPortal=function(eo){return y(eo)===c};reactIs_production_min.isProfiler=function(eo){return y(eo)===f};reactIs_production_min.isStrictMode=function(eo){return y(eo)===e};reactIs_production_min.isSuspense=function(eo){return y(eo)===l};reactIs_production_min.isValidElementType=function(eo){return typeof eo=="string"||typeof eo=="function"||eo===d||eo===f||eo===v||eo===e||eo===l||eo===m||eo===w||typeof eo=="object"&&eo!==null&&(eo.$$typeof===p||eo.$$typeof===n||eo.$$typeof===g||eo.$$typeof===h||eo.$$typeof===k||eo.$$typeof===u||eo.$$typeof===q||eo[0]===r)};reactIs_production_min.typeOf=y;function capitalize(eo){if(typeof eo!="string")throw new Error(formatMuiErrorMessage(7));return eo.charAt(0).toUpperCase()+eo.slice(1)}function createChainedFunction(...eo){return eo.reduce((to,ro)=>ro==null?to:function(...io){to.apply(this,io),ro.apply(this,io)},()=>{})}function debounce(eo,to=166){let ro;function no(...io){const oo=()=>{eo.apply(this,io)};clearTimeout(ro),ro=setTimeout(oo,to)}return no.clear=()=>{clearTimeout(ro)},no}function deprecatedPropType(eo,to){return()=>null}function isMuiElement(eo,to){return react$1.exports.isValidElement(eo)&&to.indexOf(eo.type.muiName)!==-1}function ownerDocument(eo){return eo&&eo.ownerDocument||document}function ownerWindow(eo){return ownerDocument(eo).defaultView||window}function requirePropFactory(eo,to){return()=>null}function setRef(eo,to){typeof eo=="function"?eo(to):eo&&(eo.current=to)}const useEnhancedEffect=typeof window!="undefined"?react$1.exports.useLayoutEffect:react$1.exports.useEffect;var useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(eo){const[to,ro]=react$1.exports.useState(eo),no=eo||to;return react$1.exports.useEffect(()=>{to==null&&(globalId+=1,ro(`mui-${globalId}`))},[to]),no}const maybeReactUseId=React$1["useId"];function useId(eo){if(maybeReactUseId!==void 0){const to=maybeReactUseId();return eo!=null?eo:to}return useGlobalId(eo)}function unsupportedProp(eo,to,ro,no,io){return null}function useControlled({controlled:eo,default:to,name:ro,state:no="value"}){const{current:io}=react$1.exports.useRef(eo!==void 0),[oo,ao]=react$1.exports.useState(to),so=io?eo:oo,uo=react$1.exports.useCallback(lo=>{io||ao(lo)},[]);return[so,uo]}function useEventCallback(eo){const to=react$1.exports.useRef(eo);return useEnhancedEffect$1(()=>{to.current=eo}),react$1.exports.useCallback((...ro)=>(0,to.current)(...ro),[])}function useForkRef(eo,to){return react$1.exports.useMemo(()=>eo==null&&to==null?null:ro=>{setRef(eo,ro),setRef(to,ro)},[eo,to])}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(eo){const{type:to,tagName:ro}=eo;return!!(ro==="INPUT"&&inputTypesWhitelist[to]&&!eo.readOnly||ro==="TEXTAREA"&&!eo.readOnly||eo.isContentEditable)}function handleKeyDown(eo){eo.metaKey||eo.altKey||eo.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(eo){eo.addEventListener("keydown",handleKeyDown,!0),eo.addEventListener("mousedown",handlePointerDown,!0),eo.addEventListener("pointerdown",handlePointerDown,!0),eo.addEventListener("touchstart",handlePointerDown,!0),eo.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(eo){const{target:to}=eo;try{return to.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(to)}function useIsFocusVisible(){const eo=react$1.exports.useCallback(io=>{io!=null&&prepare(io.ownerDocument)},[]),to=react$1.exports.useRef(!1);function ro(){return to.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),to.current=!1,!0):!1}function no(io){return isFocusVisible(io)?(to.current=!0,!0):!1}return{isFocusVisibleRef:to,onFocus:no,onBlur:ro,ref:eo}}function resolveProps(eo,to){const ro=_extends({},to);return Object.keys(eo).forEach(no=>{ro[no]===void 0&&(ro[no]=eo[no])}),ro}function merge(eo,to){return to?deepmerge(eo,to,{clone:!1}):eo}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:eo=>`@media (min-width:${values$1[eo]}px)`};function handleBreakpoints(eo,to,ro){const no=eo.theme||{};if(Array.isArray(to)){const oo=no.breakpoints||defaultBreakpoints;return to.reduce((ao,so,uo)=>(ao[oo.up(oo.keys[uo])]=ro(to[uo]),ao),{})}if(typeof to=="object"){const oo=no.breakpoints||defaultBreakpoints;return Object.keys(to).reduce((ao,so)=>{if(Object.keys(oo.values||values$1).indexOf(so)!==-1){const uo=oo.up(so);ao[uo]=ro(to[so],so)}else{const uo=so;ao[uo]=to[uo]}return ao},{})}return ro(to)}function createEmptyBreakpointObject(eo={}){var to;return(eo==null||(to=eo.keys)==null?void 0:to.reduce((no,io)=>{const oo=eo.up(io);return no[oo]={},no},{}))||{}}function removeUnusedBreakpoints(eo,to){return eo.reduce((ro,no)=>{const io=ro[no];return(!io||Object.keys(io).length===0)&&delete ro[no],ro},to)}function getPath(eo,to){return!to||typeof to!="string"?null:to.split(".").reduce((ro,no)=>ro&&ro[no]?ro[no]:null,eo)}function getValue$1(eo,to,ro,no=ro){let io;return typeof eo=="function"?io=eo(ro):Array.isArray(eo)?io=eo[ro]||no:io=getPath(eo,ro)||no,to&&(io=to(io)),io}function style$1(eo){const{prop:to,cssProperty:ro=eo.prop,themeKey:no,transform:io}=eo,oo=ao=>{if(ao[to]==null)return null;const so=ao[to],uo=ao.theme,lo=getPath(uo,no)||{};return handleBreakpoints(ao,so,fo=>{let mo=getValue$1(lo,io,fo);return fo===mo&&typeof fo=="string"&&(mo=getValue$1(lo,io,`${to}${fo==="default"?"":capitalize(fo)}`,fo)),ro===!1?mo:{[ro]:mo}})};return oo.propTypes={},oo.filterProps=[to],oo}function compose(...eo){const to=eo.reduce((no,io)=>(io.filterProps.forEach(oo=>{no[oo]=io}),no),{}),ro=no=>Object.keys(no).reduce((io,oo)=>to[oo]?merge(io,to[oo](no)):io,{});return ro.propTypes={},ro.filterProps=eo.reduce((no,io)=>no.concat(io.filterProps),[]),ro}function memoize(eo){const to={};return ro=>(to[ro]===void 0&&(to[ro]=eo(ro)),to[ro])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(eo=>{if(eo.length>2)if(aliases[eo])eo=aliases[eo];else return[eo];const[to,ro]=eo.split(""),no=properties[to],io=directions[ro]||"";return Array.isArray(io)?io.map(oo=>no+oo):[no+io]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],spacingKeys=[...marginKeys,...paddingKeys];function createUnaryUnit(eo,to,ro,no){const io=getPath(eo,to)||ro;return typeof io=="number"?oo=>typeof oo=="string"?oo:io*oo:Array.isArray(io)?oo=>typeof oo=="string"?oo:io[oo]:typeof io=="function"?io:()=>{}}function createUnarySpacing(eo){return createUnaryUnit(eo,"spacing",8)}function getValue(eo,to){if(typeof to=="string"||to==null)return to;const ro=Math.abs(to),no=eo(ro);return to>=0?no:typeof no=="number"?-no:`-${no}`}function getStyleFromPropValue(eo,to){return ro=>eo.reduce((no,io)=>(no[io]=getValue(to,ro),no),{})}function resolveCssProperty(eo,to,ro,no){if(to.indexOf(ro)===-1)return null;const io=getCssProperties(ro),oo=getStyleFromPropValue(io,no),ao=eo[ro];return handleBreakpoints(eo,ao,oo)}function style(eo,to){const ro=createUnarySpacing(eo.theme);return Object.keys(eo).map(no=>resolveCssProperty(eo,to,no,ro)).reduce(merge,{})}function spacing(eo){return style(eo,spacingKeys)}spacing.propTypes={};spacing.filterProps=spacingKeys;function getBorder(eo){return typeof eo!="number"?eo:`${eo}px solid`}const border=style$1({prop:"border",themeKey:"borders",transform:getBorder}),borderTop=style$1({prop:"borderTop",themeKey:"borders",transform:getBorder}),borderRight=style$1({prop:"borderRight",themeKey:"borders",transform:getBorder}),borderBottom=style$1({prop:"borderBottom",themeKey:"borders",transform:getBorder}),borderLeft=style$1({prop:"borderLeft",themeKey:"borders",transform:getBorder}),borderColor=style$1({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$1({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$1({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$1({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$1({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=eo=>{if(eo.borderRadius!==void 0&&eo.borderRadius!==null){const to=createUnaryUnit(eo.theme,"shape.borderRadius",4),ro=no=>({borderRadius:getValue(to,no)});return handleBreakpoints(eo,eo.borderRadius,ro)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];const borders=compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);var borders$1=borders;const displayPrint=style$1({prop:"displayPrint",cssProperty:!1,transform:eo=>({"@media print":{display:eo}})}),displayRaw=style$1({prop:"display"}),overflow=style$1({prop:"overflow"}),textOverflow=style$1({prop:"textOverflow"}),visibility=style$1({prop:"visibility"}),whiteSpace=style$1({prop:"whiteSpace"});var display=compose(displayPrint,displayRaw,overflow,textOverflow,visibility,whiteSpace);const flexBasis=style$1({prop:"flexBasis"}),flexDirection=style$1({prop:"flexDirection"}),flexWrap=style$1({prop:"flexWrap"}),justifyContent=style$1({prop:"justifyContent"}),alignItems=style$1({prop:"alignItems"}),alignContent=style$1({prop:"alignContent"}),order=style$1({prop:"order"}),flex=style$1({prop:"flex"}),flexGrow=style$1({prop:"flexGrow"}),flexShrink=style$1({prop:"flexShrink"}),alignSelf=style$1({prop:"alignSelf"}),justifyItems=style$1({prop:"justifyItems"}),justifySelf=style$1({prop:"justifySelf"}),flexbox=compose(flexBasis,flexDirection,flexWrap,justifyContent,alignItems,alignContent,order,flex,flexGrow,flexShrink,alignSelf,justifyItems,justifySelf);var flexbox$1=flexbox;const gap=eo=>{if(eo.gap!==void 0&&eo.gap!==null){const to=createUnaryUnit(eo.theme,"spacing",8),ro=no=>({gap:getValue(to,no)});return handleBreakpoints(eo,eo.gap,ro)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=eo=>{if(eo.columnGap!==void 0&&eo.columnGap!==null){const to=createUnaryUnit(eo.theme,"spacing",8),ro=no=>({columnGap:getValue(to,no)});return handleBreakpoints(eo,eo.columnGap,ro)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=eo=>{if(eo.rowGap!==void 0&&eo.rowGap!==null){const to=createUnaryUnit(eo.theme,"spacing",8),ro=no=>({rowGap:getValue(to,no)});return handleBreakpoints(eo,eo.rowGap,ro)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"}),grid=compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);var grid$1=grid;const color=style$1({prop:"color",themeKey:"palette"}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette"}),palette=compose(color,bgcolor,backgroundColor);var palette$1=palette;const position=style$1({prop:"position"}),zIndex$2=style$1({prop:"zIndex",themeKey:"zIndex"}),top=style$1({prop:"top"}),right=style$1({prop:"right"}),bottom=style$1({prop:"bottom"}),left=style$1({prop:"left"});var positions=compose(position,zIndex$2,top,right,bottom,left);const boxShadow=style$1({prop:"boxShadow",themeKey:"shadows"});var shadows$2=boxShadow;function transform(eo){return eo<=1&&eo!==0?`${eo*100}%`:eo}const width=style$1({prop:"width",transform}),maxWidth=eo=>{if(eo.maxWidth!==void 0&&eo.maxWidth!==null){const to=ro=>{var no,io,oo;return{maxWidth:((no=eo.theme)==null||(io=no.breakpoints)==null||(oo=io.values)==null?void 0:oo[ro])||values$1[ro]||transform(ro)}};return handleBreakpoints(eo,eo.maxWidth,to)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform}),height=style$1({prop:"height",transform}),maxHeight=style$1({prop:"maxHeight",transform}),minHeight=style$1({prop:"minHeight",transform});style$1({prop:"size",cssProperty:"width",transform});style$1({prop:"size",cssProperty:"height",transform});const boxSizing=style$1({prop:"boxSizing"}),sizing=compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);var sizing$1=sizing;const fontFamily=style$1({prop:"fontFamily",themeKey:"typography"}),fontSize=style$1({prop:"fontSize",themeKey:"typography"}),fontStyle=style$1({prop:"fontStyle",themeKey:"typography"}),fontWeight=style$1({prop:"fontWeight",themeKey:"typography"}),letterSpacing=style$1({prop:"letterSpacing"}),textTransform=style$1({prop:"textTransform"}),lineHeight=style$1({prop:"lineHeight"}),textAlign=style$1({prop:"textAlign"}),typographyVariant=style$1({prop:"typography",cssProperty:!1,themeKey:"typography"}),typography=compose(typographyVariant,fontFamily,fontSize,fontStyle,fontWeight,letterSpacing,lineHeight,textAlign,textTransform);var typography$1=typography;const filterPropsMapping={borders:borders$1.filterProps,display:display.filterProps,flexbox:flexbox$1.filterProps,grid:grid$1.filterProps,positions:positions.filterProps,palette:palette$1.filterProps,shadows:shadows$2.filterProps,sizing:sizing$1.filterProps,spacing:spacing.filterProps,typography:typography$1.filterProps},styleFunctionMapping={borders:borders$1,display,flexbox:flexbox$1,grid:grid$1,positions,palette:palette$1,shadows:shadows$2,sizing:sizing$1,spacing,typography:typography$1},propToStyleFunction=Object.keys(filterPropsMapping).reduce((eo,to)=>(filterPropsMapping[to].forEach(ro=>{eo[ro]=styleFunctionMapping[to]}),eo),{});function objectsHaveSameKeys(...eo){const to=eo.reduce((no,io)=>no.concat(Object.keys(io)),[]),ro=new Set(to);return eo.every(no=>ro.size===Object.keys(no).length)}function callIfFn(eo,to){return typeof eo=="function"?eo(to):eo}function unstable_createStyleFunctionSx(eo=styleFunctionMapping){const to=Object.keys(eo).reduce((io,oo)=>(eo[oo].filterProps.forEach(ao=>{io[ao]=eo[oo]}),io),{});function ro(io,oo,ao){const so={[io]:oo,theme:ao},uo=to[io];return uo?uo(so):{[io]:oo}}function no(io){const{sx:oo,theme:ao={}}=io||{};if(!oo)return null;function so(uo){let lo=uo;if(typeof uo=="function")lo=uo(ao);else if(typeof uo!="object")return uo;if(!lo)return null;const co=createEmptyBreakpointObject(ao.breakpoints),fo=Object.keys(co);let mo=co;return Object.keys(lo).forEach(go=>{const yo=callIfFn(lo[go],ao);if(yo!=null)if(typeof yo=="object")if(to[go])mo=merge(mo,ro(go,yo,ao));else{const vo=handleBreakpoints({theme:ao},yo,Ao=>({[go]:Ao}));objectsHaveSameKeys(vo,yo)?mo[go]=no({sx:yo,theme:ao}):mo=merge(mo,vo)}else mo=merge(mo,ro(go,yo,ao))}),removeUnusedBreakpoints(fo,mo)}return Array.isArray(oo)?oo.map(so):so(oo)}return no}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];var defaultStyleFunctionSx=styleFunctionSx;const _excluded$h=["sx"],splitProps=eo=>{const to={systemProps:{},otherProps:{}};return Object.keys(eo).forEach(ro=>{propToStyleFunction[ro]?to.systemProps[ro]=eo[ro]:to.otherProps[ro]=eo[ro]}),to};function extendSxProp(eo){const{sx:to}=eo,ro=_objectWithoutPropertiesLoose(eo,_excluded$h),{systemProps:no,otherProps:io}=splitProps(ro);let oo;return Array.isArray(to)?oo=[no,...to]:typeof to=="function"?oo=(...ao)=>{const so=to(...ao);return isPlainObject(so)?_extends({},no,so):no}:oo=_extends({},no,to),_extends({},io,{sx:oo})}function toVal(eo){var to,ro,no="";if(typeof eo=="string"||typeof eo=="number")no+=eo;else if(typeof eo=="object")if(Array.isArray(eo))for(to=0;to<eo.length;to++)eo[to]&&(ro=toVal(eo[to]))&&(no&&(no+=" "),no+=ro);else for(to in eo)eo[to]&&(no&&(no+=" "),no+=to);return no}function clsx(){for(var eo=0,to,ro,no="";eo<arguments.length;)(to=arguments[eo++])&&(ro=toVal(to))&&(no&&(no+=" "),no+=ro);return no}const _excluded$g=["values","unit","step"],sortBreakpointsValues=eo=>{const to=Object.keys(eo).map(ro=>({key:ro,val:eo[ro]}))||[];return to.sort((ro,no)=>ro.val-no.val),to.reduce((ro,no)=>_extends({},ro,{[no.key]:no.val}),{})};function createBreakpoints(eo){const{values:to={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:ro="px",step:no=5}=eo,io=_objectWithoutPropertiesLoose(eo,_excluded$g),oo=sortBreakpointsValues(to),ao=Object.keys(oo);function so(mo){return`@media (min-width:${typeof to[mo]=="number"?to[mo]:mo}${ro})`}function uo(mo){return`@media (max-width:${(typeof to[mo]=="number"?to[mo]:mo)-no/100}${ro})`}function lo(mo,go){const yo=ao.indexOf(go);return`@media (min-width:${typeof to[mo]=="number"?to[mo]:mo}${ro}) and (max-width:${(yo!==-1&&typeof to[ao[yo]]=="number"?to[ao[yo]]:go)-no/100}${ro})`}function co(mo){return ao.indexOf(mo)+1<ao.length?lo(mo,ao[ao.indexOf(mo)+1]):so(mo)}function fo(mo){const go=ao.indexOf(mo);return go===0?so(ao[1]):go===ao.length-1?uo(ao[go]):lo(mo,ao[ao.indexOf(mo)+1]).replace("@media","@media not all and")}return _extends({keys:ao,values:oo,up:so,down:uo,between:lo,only:co,not:fo,unit:ro},io)}const shape={borderRadius:4};var shape$1=shape;function createSpacing(eo=8){if(eo.mui)return eo;const to=createUnarySpacing({spacing:eo}),ro=(...no)=>(no.length===0?[1]:no).map(oo=>{const ao=to(oo);return typeof ao=="number"?`${ao}px`:ao}).join(" ");return ro.mui=!0,ro}const _excluded$f=["breakpoints","palette","spacing","shape"];function createTheme$1(eo={},...to){const{breakpoints:ro={},palette:no={},spacing:io,shape:oo={}}=eo,ao=_objectWithoutPropertiesLoose(eo,_excluded$f),so=createBreakpoints(ro),uo=createSpacing(io);let lo=deepmerge({breakpoints:so,direction:"ltr",components:{},palette:_extends({mode:"light"},no),spacing:uo,shape:_extends({},shape$1,oo)},ao);return lo=to.reduce((co,fo)=>deepmerge(co,fo),lo),lo}const ThemeContext=react$1.exports.createContext(null);var ThemeContext$1=ThemeContext;function useTheme$2(){return react$1.exports.useContext(ThemeContext$1)}function isObjectEmpty(eo){return Object.keys(eo).length===0}function useTheme$1(eo=null){const to=useTheme$2();return!to||isObjectEmpty(to)?eo:to}const systemDefaultTheme$1=createTheme$1();function useTheme(eo=systemDefaultTheme$1){return useTheme$1(eo)}const _excluded$e=["className","component"];function createBox(eo={}){const{defaultTheme:to,defaultClassName:ro="MuiBox-root",generateClassName:no,styleFunctionSx:io=defaultStyleFunctionSx}=eo,oo=styled$2("div")(io);return react$1.exports.forwardRef(function(uo,lo){const co=useTheme(to),fo=extendSxProp(uo),{className:mo,component:go="div"}=fo,yo=_objectWithoutPropertiesLoose(fo,_excluded$e);return jsx(oo,_extends({as:go,ref:lo,className:clsx(mo,no?no(ro):ro),theme:co},yo))})}const _excluded$d=["variant"];function isEmpty$1(eo){return eo.length===0}function propsToClassKey(eo){const{variant:to}=eo,ro=_objectWithoutPropertiesLoose(eo,_excluded$d);let no=to||"";return Object.keys(ro).sort().forEach(io=>{io==="color"?no+=isEmpty$1(no)?eo[io]:capitalize(eo[io]):no+=`${isEmpty$1(no)?io:capitalize(io)}${capitalize(eo[io].toString())}`}),no}const _excluded$c=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2=["theme"],_excluded3=["theme"];function isEmpty(eo){return Object.keys(eo).length===0}const getStyleOverrides=(eo,to)=>to.components&&to.components[eo]&&to.components[eo].styleOverrides?to.components[eo].styleOverrides:null,getVariantStyles=(eo,to)=>{let ro=[];to&&to.components&&to.components[eo]&&to.components[eo].variants&&(ro=to.components[eo].variants);const no={};return ro.forEach(io=>{const oo=propsToClassKey(io.props);no[oo]=io.style}),no},variantsResolver=(eo,to,ro,no)=>{var io,oo;const{ownerState:ao={}}=eo,so=[],uo=ro==null||(io=ro.components)==null||(oo=io[no])==null?void 0:oo.variants;return uo&&uo.forEach(lo=>{let co=!0;Object.keys(lo.props).forEach(fo=>{ao[fo]!==lo.props[fo]&&eo[fo]!==lo.props[fo]&&(co=!1)}),co&&so.push(to[propsToClassKey(lo.props)])}),so};function shouldForwardProp(eo){return eo!=="ownerState"&&eo!=="theme"&&eo!=="sx"&&eo!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(eo={}){const{defaultTheme:to=systemDefaultTheme,rootShouldForwardProp:ro=shouldForwardProp,slotShouldForwardProp:no=shouldForwardProp,styleFunctionSx:io=defaultStyleFunctionSx}=eo;return(oo,ao={})=>{const{name:so,slot:uo,skipVariantsResolver:lo,skipSx:co,overridesResolver:fo}=ao,mo=_objectWithoutPropertiesLoose(ao,_excluded$c),go=lo!==void 0?lo:uo&&uo!=="Root"||!1,yo=co||!1;let vo,Ao=shouldForwardProp;uo==="Root"?Ao=ro:uo&&(Ao=no);const ho=styled$2(oo,_extends({shouldForwardProp:Ao,label:vo},mo)),po=(Mo,...xo)=>{const wo=xo?xo.map(No=>typeof No=="function"&&No.__emotion_real!==No?Po=>{let{theme:Co}=Po,Do=_objectWithoutPropertiesLoose(Po,_excluded2);return No(_extends({theme:isEmpty(Co)?to:Co},Do))}:No):[];let bo=Mo;so&&fo&&wo.push(No=>{const Po=isEmpty(No.theme)?to:No.theme,Co=getStyleOverrides(so,Po);if(Co){const Do={};return Object.entries(Co).forEach(([zo,Ro])=>{Do[zo]=typeof Ro=="function"?Ro(No):Ro}),fo(No,Do)}return null}),so&&!go&&wo.push(No=>{const Po=isEmpty(No.theme)?to:No.theme;return variantsResolver(No,getVariantStyles(so,Po),Po,so)}),yo||wo.push(No=>{const Po=isEmpty(No.theme)?to:No.theme;return io(_extends({},No,{theme:Po}))});const _o=wo.length-xo.length;if(Array.isArray(Mo)&&_o>0){const No=new Array(_o).fill("");bo=[...Mo,...No],bo.raw=[...Mo.raw,...No]}else typeof Mo=="function"&&(bo=No=>{let{theme:Po}=No,Co=_objectWithoutPropertiesLoose(No,_excluded3);return Mo(_extends({theme:isEmpty(Po)?to:Po},Co))});return ho(bo,...wo)};return ho.withConfig&&(po.withConfig=ho.withConfig),po}}function getThemeProps(eo){const{theme:to,name:ro,props:no}=eo;return!to||!to.components||!to.components[ro]||!to.components[ro].defaultProps?no:resolveProps(to.components[ro].defaultProps,no)}function useThemeProps$1({props:eo,name:to,defaultTheme:ro}){const no=useTheme(ro);return getThemeProps({theme:no,name:to,props:eo})}function clamp(eo,to=0,ro=1){return Math.min(Math.max(to,eo),ro)}function hexToRgb(eo){eo=eo.substr(1);const to=new RegExp(`.{1,${eo.length>=6?2:1}}`,"g");let ro=eo.match(to);return ro&&ro[0].length===1&&(ro=ro.map(no=>no+no)),ro?`rgb${ro.length===4?"a":""}(${ro.map((no,io)=>io<3?parseInt(no,16):Math.round(parseInt(no,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(eo){if(eo.type)return eo;if(eo.charAt(0)==="#")return decomposeColor(hexToRgb(eo));const to=eo.indexOf("("),ro=eo.substring(0,to);if(["rgb","rgba","hsl","hsla","color"].indexOf(ro)===-1)throw new Error(formatMuiErrorMessage(9,eo));let no=eo.substring(to+1,eo.length-1),io;if(ro==="color"){if(no=no.split(" "),io=no.shift(),no.length===4&&no[3].charAt(0)==="/"&&(no[3]=no[3].substr(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(io)===-1)throw new Error(formatMuiErrorMessage(10,io))}else no=no.split(",");return no=no.map(oo=>parseFloat(oo)),{type:ro,values:no,colorSpace:io}}function recomposeColor(eo){const{type:to,colorSpace:ro}=eo;let{values:no}=eo;return to.indexOf("rgb")!==-1?no=no.map((io,oo)=>oo<3?parseInt(io,10):io):to.indexOf("hsl")!==-1&&(no[1]=`${no[1]}%`,no[2]=`${no[2]}%`),to.indexOf("color")!==-1?no=`${ro} ${no.join(" ")}`:no=`${no.join(", ")}`,`${to}(${no})`}function hslToRgb(eo){eo=decomposeColor(eo);const{values:to}=eo,ro=to[0],no=to[1]/100,io=to[2]/100,oo=no*Math.min(io,1-io),ao=(lo,co=(lo+ro/30)%12)=>io-oo*Math.max(Math.min(co-3,9-co,1),-1);let so="rgb";const uo=[Math.round(ao(0)*255),Math.round(ao(8)*255),Math.round(ao(4)*255)];return eo.type==="hsla"&&(so+="a",uo.push(to[3])),recomposeColor({type:so,values:uo})}function getLuminance(eo){eo=decomposeColor(eo);let to=eo.type==="hsl"?decomposeColor(hslToRgb(eo)).values:eo.values;return to=to.map(ro=>(eo.type!=="color"&&(ro/=255),ro<=.03928?ro/12.92:((ro+.055)/1.055)**2.4)),Number((.2126*to[0]+.7152*to[1]+.0722*to[2]).toFixed(3))}function getContrastRatio(eo,to){const ro=getLuminance(eo),no=getLuminance(to);return(Math.max(ro,no)+.05)/(Math.min(ro,no)+.05)}function alpha(eo,to){return eo=decomposeColor(eo),to=clamp(to),(eo.type==="rgb"||eo.type==="hsl")&&(eo.type+="a"),eo.type==="color"?eo.values[3]=`/${to}`:eo.values[3]=to,recomposeColor(eo)}function darken(eo,to){if(eo=decomposeColor(eo),to=clamp(to),eo.type.indexOf("hsl")!==-1)eo.values[2]*=1-to;else if(eo.type.indexOf("rgb")!==-1||eo.type.indexOf("color")!==-1)for(let ro=0;ro<3;ro+=1)eo.values[ro]*=1-to;return recomposeColor(eo)}function lighten(eo,to){if(eo=decomposeColor(eo),to=clamp(to),eo.type.indexOf("hsl")!==-1)eo.values[2]+=(100-eo.values[2])*to;else if(eo.type.indexOf("rgb")!==-1)for(let ro=0;ro<3;ro+=1)eo.values[ro]+=(255-eo.values[ro])*to;else if(eo.type.indexOf("color")!==-1)for(let ro=0;ro<3;ro+=1)eo.values[ro]+=(1-eo.values[ro])*to;return recomposeColor(eo)}function composeClasses(eo,to,ro){const no={};return Object.keys(eo).forEach(io=>{no[io]=eo[io].reduce((oo,ao)=>(ao&&(ro&&ro[ao]&&oo.push(ro[ao]),oo.push(to(ao))),oo),[]).join(" ")}),no}const defaultGenerator=eo=>eo,createClassNameGenerator=()=>{let eo=defaultGenerator;return{configure(to){eo=to},generate(to){return eo(to)},reset(){eo=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();var ClassNameGenerator$1=ClassNameGenerator;const globalStateClassesMapping={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function generateUtilityClass(eo,to){return globalStateClassesMapping[to]||`${ClassNameGenerator$1.generate(eo)}-${to}`}function generateUtilityClasses(eo,to){const ro={};return to.forEach(no=>{ro[no]=generateUtilityClass(eo,no)}),ro}function createMixins(eo,to,ro){return _extends({toolbar:{minHeight:56,[`${eo.up("xs")} and (orientation: landscape)`]:{minHeight:48},[eo.up("sm")]:{minHeight:64}}},ro)}const _excluded$b=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(eo,to,ro,no){const io=no.light||no,oo=no.dark||no*1.5;eo[to]||(eo.hasOwnProperty(ro)?eo[to]=eo[ro]:to==="light"?eo.light=lighten(eo.main,io):to==="dark"&&(eo.dark=darken(eo.main,oo)))}function getDefaultPrimary(eo="light"){return eo==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(eo="light"){return eo==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(eo="light"){return eo==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(eo="light"){return eo==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(eo="light"){return eo==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(eo="light"){return eo==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(eo){const{mode:to="light",contrastThreshold:ro=3,tonalOffset:no=.2}=eo,io=_objectWithoutPropertiesLoose(eo,_excluded$b),oo=eo.primary||getDefaultPrimary(to),ao=eo.secondary||getDefaultSecondary(to),so=eo.error||getDefaultError(to),uo=eo.info||getDefaultInfo(to),lo=eo.success||getDefaultSuccess(to),co=eo.warning||getDefaultWarning(to);function fo(vo){return getContrastRatio(vo,dark.text.primary)>=ro?dark.text.primary:light.text.primary}const mo=({color:vo,name:Ao,mainShade:ho=500,lightShade:po=300,darkShade:Mo=700})=>{if(vo=_extends({},vo),!vo.main&&vo[ho]&&(vo.main=vo[ho]),!vo.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Ao?` (${Ao})`:"",ho));if(typeof vo.main!="string")throw new Error(formatMuiErrorMessage(12,Ao?` (${Ao})`:"",JSON.stringify(vo.main)));return addLightOrDark(vo,"light",po,no),addLightOrDark(vo,"dark",Mo,no),vo.contrastText||(vo.contrastText=fo(vo.main)),vo},go={dark,light};return deepmerge(_extends({common:common$1,mode:to,primary:mo({color:oo,name:"primary"}),secondary:mo({color:ao,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:mo({color:so,name:"error"}),warning:mo({color:co,name:"warning"}),info:mo({color:uo,name:"info"}),success:mo({color:lo,name:"success"}),grey:grey$1,contrastThreshold:ro,getContrastText:fo,augmentColor:mo,tonalOffset:no},go[to]),io)}const _excluded$a=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(eo){return Math.round(eo*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(eo,to){const ro=typeof to=="function"?to(eo):to,{fontFamily:no=defaultFontFamily,fontSize:io=14,fontWeightLight:oo=300,fontWeightRegular:ao=400,fontWeightMedium:so=500,fontWeightBold:uo=700,htmlFontSize:lo=16,allVariants:co,pxToRem:fo}=ro,mo=_objectWithoutPropertiesLoose(ro,_excluded$a),go=io/14,yo=fo||(ho=>`${ho/lo*go}rem`),vo=(ho,po,Mo,xo,wo)=>_extends({fontFamily:no,fontWeight:ho,fontSize:yo(po),lineHeight:Mo},no===defaultFontFamily?{letterSpacing:`${round(xo/po)}em`}:{},wo,co),Ao={h1:vo(oo,96,1.167,-1.5),h2:vo(oo,60,1.2,-.5),h3:vo(ao,48,1.167,0),h4:vo(ao,34,1.235,.25),h5:vo(ao,24,1.334,0),h6:vo(so,20,1.6,.15),subtitle1:vo(ao,16,1.75,.15),subtitle2:vo(so,14,1.57,.1),body1:vo(ao,16,1.5,.15),body2:vo(ao,14,1.43,.15),button:vo(so,14,1.75,.4,caseAllCaps),caption:vo(ao,12,1.66,.4),overline:vo(ao,12,2.66,1,caseAllCaps)};return deepmerge(_extends({htmlFontSize:lo,pxToRem:yo,fontFamily:no,fontSize:io,fontWeightLight:oo,fontWeightRegular:ao,fontWeightMedium:so,fontWeightBold:uo},Ao),mo,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...eo){return[`${eo[0]}px ${eo[1]}px ${eo[2]}px ${eo[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${eo[4]}px ${eo[5]}px ${eo[6]}px ${eo[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${eo[8]}px ${eo[9]}px ${eo[10]}px ${eo[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)];var shadows$1=shadows;const _excluded$9=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(eo){return`${Math.round(eo)}ms`}function getAutoHeightDuration(eo){if(!eo)return 0;const to=eo/36;return Math.round((4+15*to**.25+to/5)*10)}function createTransitions(eo){const to=_extends({},easing,eo.easing),ro=_extends({},duration,eo.duration);return _extends({getAutoHeightDuration,create:(io=["all"],oo={})=>{const{duration:ao=ro.standard,easing:so=to.easeInOut,delay:uo=0}=oo;return _objectWithoutPropertiesLoose(oo,_excluded$9),(Array.isArray(io)?io:[io]).map(lo=>`${lo} ${typeof ao=="string"?ao:formatMs(ao)} ${so} ${typeof uo=="string"?uo:formatMs(uo)}`).join(",")}},eo,{easing:to,duration:ro})}const zIndex={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var zIndex$1=zIndex;const _excluded$8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(eo={},...to){const{mixins:ro={},palette:no={},transitions:io={},typography:oo={}}=eo,ao=_objectWithoutPropertiesLoose(eo,_excluded$8),so=createPalette(no),uo=createTheme$1(eo);let lo=deepmerge(uo,{mixins:createMixins(uo.breakpoints,uo.spacing,ro),palette:so,shadows:shadows$1.slice(),typography:createTypography(so,oo),transitions:createTransitions(io),zIndex:_extends({},zIndex$1)});return lo=deepmerge(lo,ao),lo=to.reduce((co,fo)=>deepmerge(co,fo),lo),lo}const defaultTheme$1=createTheme();var defaultTheme$2=defaultTheme$1;function useThemeProps({props:eo,name:to}){return useThemeProps$1({props:eo,name:to,defaultTheme:defaultTheme$2})}const rootShouldForwardProp=eo=>shouldForwardProp(eo)&&eo!=="classes",styled=createStyled({defaultTheme:defaultTheme$2,rootShouldForwardProp});var styled$1=styled;function getSvgIconUtilityClass(eo){return generateUtilityClass("MuiSvgIcon",eo)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$6=eo=>{const{color:to,fontSize:ro,classes:no}=eo,io={root:["root",to!=="inherit"&&`color${capitalize(to)}`,`fontSize${capitalize(ro)}`]};return composeClasses(io,getSvgIconUtilityClass,no)},SvgIconRoot=styled$1("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(eo,to)=>{const{ownerState:ro}=eo;return[to.root,ro.color!=="inherit"&&to[`color${capitalize(ro.color)}`],to[`fontSize${capitalize(ro.fontSize)}`]]}})(({theme:eo,ownerState:to})=>{var ro,no,io,oo,ao,so,uo,lo,co,fo,mo,go,yo,vo,Ao,ho,po;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(ro=eo.transitions)==null||(no=ro.create)==null?void 0:no.call(ro,"fill",{duration:(io=eo.transitions)==null||(oo=io.duration)==null?void 0:oo.shorter}),fontSize:{inherit:"inherit",small:((ao=eo.typography)==null||(so=ao.pxToRem)==null?void 0:so.call(ao,20))||"1.25rem",medium:((uo=eo.typography)==null||(lo=uo.pxToRem)==null?void 0:lo.call(uo,24))||"1.5rem",large:((co=eo.typography)==null||(fo=co.pxToRem)==null?void 0:fo.call(co,35))||"2.1875"}[to.fontSize],color:(mo=(go=eo.palette)==null||(yo=go[to.color])==null?void 0:yo.main)!=null?mo:{action:(vo=eo.palette)==null||(Ao=vo.action)==null?void 0:Ao.active,disabled:(ho=eo.palette)==null||(po=ho.action)==null?void 0:po.disabled,inherit:void 0}[to.color]}}),SvgIcon=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiSvgIcon"}),{children:io,className:oo,color:ao="inherit",component:so="svg",fontSize:uo="medium",htmlColor:lo,inheritViewBox:co=!1,titleAccess:fo,viewBox:mo="0 0 24 24"}=no,go=_objectWithoutPropertiesLoose(no,_excluded$7),yo=_extends({},no,{color:ao,component:so,fontSize:uo,inheritViewBox:co,viewBox:mo}),vo={};co||(vo.viewBox=mo);const Ao=useUtilityClasses$6(yo);return jsxs(SvgIconRoot,_extends({as:so,className:clsx(Ao.root,oo),ownerState:yo,focusable:"false",color:lo,"aria-hidden":fo?void 0:!0,role:fo?"img":void 0,ref:ro},vo,go,{children:[io,fo?jsx("title",{children:fo}):null]}))});SvgIcon.muiName="SvgIcon";var SvgIcon$1=SvgIcon;function createSvgIcon$1(eo,to){const ro=(no,io)=>jsx(SvgIcon$1,_extends({"data-testid":`${to}Icon`,ref:io},no,{children:eo}));return ro.muiName=SvgIcon$1.muiName,react$1.exports.memo(react$1.exports.forwardRef(ro))}var utils=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",capitalize,createChainedFunction,createSvgIcon:createSvgIcon$1,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible,unstable_ClassNameGenerator:ClassNameGenerator$1});function _setPrototypeOf(eo,to){return _setPrototypeOf=Object.setPrototypeOf||function(no,io){return no.__proto__=io,no},_setPrototypeOf(eo,to)}function _inheritsLoose(eo,to){eo.prototype=Object.create(to.prototype),eo.prototype.constructor=eo,_setPrototypeOf(eo,to)}var TransitionGroupContext=React.createContext(null);function _assertThisInitialized(eo){if(eo===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return eo}function getChildMapping(eo,to){var ro=function(oo){return to&&react$1.exports.isValidElement(oo)?to(oo):oo},no=Object.create(null);return eo&&react$1.exports.Children.map(eo,function(io){return io}).forEach(function(io){no[io.key]=ro(io)}),no}function mergeChildMappings(eo,to){eo=eo||{},to=to||{};function ro(co){return co in to?to[co]:eo[co]}var no=Object.create(null),io=[];for(var oo in eo)oo in to?io.length&&(no[oo]=io,io=[]):io.push(oo);var ao,so={};for(var uo in to){if(no[uo])for(ao=0;ao<no[uo].length;ao++){var lo=no[uo][ao];so[no[uo][ao]]=ro(lo)}so[uo]=ro(uo)}for(ao=0;ao<io.length;ao++)so[io[ao]]=ro(io[ao]);return so}function getProp(eo,to,ro){return ro[to]!=null?ro[to]:eo.props[to]}function getInitialChildMapping(eo,to){return getChildMapping(eo.children,function(ro){return react$1.exports.cloneElement(ro,{onExited:to.bind(null,ro),in:!0,appear:getProp(ro,"appear",eo),enter:getProp(ro,"enter",eo),exit:getProp(ro,"exit",eo)})})}function getNextChildMapping(eo,to,ro){var no=getChildMapping(eo.children),io=mergeChildMappings(to,no);return Object.keys(io).forEach(function(oo){var ao=io[oo];if(!!react$1.exports.isValidElement(ao)){var so=oo in to,uo=oo in no,lo=to[oo],co=react$1.exports.isValidElement(lo)&&!lo.props.in;uo&&(!so||co)?io[oo]=react$1.exports.cloneElement(ao,{onExited:ro.bind(null,ao),in:!0,exit:getProp(ao,"exit",eo),enter:getProp(ao,"enter",eo)}):!uo&&so&&!co?io[oo]=react$1.exports.cloneElement(ao,{in:!1}):uo&&so&&react$1.exports.isValidElement(lo)&&(io[oo]=react$1.exports.cloneElement(ao,{onExited:ro.bind(null,ao),in:lo.props.in,exit:getProp(ao,"exit",eo),enter:getProp(ao,"enter",eo)}))}}),io}var values=Object.values||function(eo){return Object.keys(eo).map(function(to){return eo[to]})},defaultProps={component:"div",childFactory:function eo(to){return to}},TransitionGroup=function(eo){_inheritsLoose(to,eo);function to(no,io){var oo;oo=eo.call(this,no,io)||this;var ao=oo.handleExited.bind(_assertThisInitialized(oo));return oo.state={contextValue:{isMounting:!0},handleExited:ao,firstRender:!0},oo}var ro=to.prototype;return ro.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},ro.componentWillUnmount=function(){this.mounted=!1},to.getDerivedStateFromProps=function(io,oo){var ao=oo.children,so=oo.handleExited,uo=oo.firstRender;return{children:uo?getInitialChildMapping(io,so):getNextChildMapping(io,ao,so),firstRender:!1}},ro.handleExited=function(io,oo){var ao=getChildMapping(this.props.children);io.key in ao||(io.props.onExited&&io.props.onExited(oo),this.mounted&&this.setState(function(so){var uo=_extends({},so.children);return delete uo[io.key],{children:uo}}))},ro.render=function(){var io=this.props,oo=io.component,ao=io.childFactory,so=_objectWithoutPropertiesLoose(io,["component","childFactory"]),uo=this.state.contextValue,lo=values(this.state.children).map(ao);return delete so.appear,delete so.enter,delete so.exit,oo===null?React.createElement(TransitionGroupContext.Provider,{value:uo},lo):React.createElement(TransitionGroupContext.Provider,{value:uo},React.createElement(oo,so,lo))},to}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;var TransitionGroup$1=TransitionGroup;function getPaperUtilityClass(eo){return generateUtilityClass("MuiPaper",eo)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$6=["className","component","elevation","square","variant"],getOverlayAlpha=eo=>{let to;return eo<1?to=5.11916*eo**2:to=4.5*Math.log(eo+1)+2,(to/100).toFixed(2)},useUtilityClasses$5=eo=>{const{square:to,elevation:ro,variant:no,classes:io}=eo,oo={root:["root",no,!to&&"rounded",no==="elevation"&&`elevation${ro}`]};return composeClasses(oo,getPaperUtilityClass,io)},PaperRoot=styled$1("div",{name:"MuiPaper",slot:"Root",overridesResolver:(eo,to)=>{const{ownerState:ro}=eo;return[to.root,to[ro.variant],!ro.square&&to.rounded,ro.variant==="elevation"&&to[`elevation${ro.elevation}`]]}})(({theme:eo,ownerState:to})=>_extends({backgroundColor:eo.palette.background.paper,color:eo.palette.text.primary,transition:eo.transitions.create("box-shadow")},!to.square&&{borderRadius:eo.shape.borderRadius},to.variant==="outlined"&&{border:`1px solid ${eo.palette.divider}`},to.variant==="elevation"&&_extends({boxShadow:eo.shadows[to.elevation]},eo.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha(to.elevation))}, ${alpha("#fff",getOverlayAlpha(to.elevation))})`}))),Paper=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiPaper"}),{className:io,component:oo="div",elevation:ao=1,square:so=!1,variant:uo="elevation"}=no,lo=_objectWithoutPropertiesLoose(no,_excluded$6),co=_extends({},no,{component:oo,elevation:ao,square:so,variant:uo}),fo=useUtilityClasses$5(co);return jsx(PaperRoot,_extends({as:oo,ownerState:co,className:clsx(fo.root,io),ref:ro},lo))});var Paper$1=Paper;function Ripple(eo){const{className:to,classes:ro,pulsate:no=!1,rippleX:io,rippleY:oo,rippleSize:ao,in:so,onExited:uo,timeout:lo}=eo,[co,fo]=react$1.exports.useState(!1),mo=clsx(to,ro.ripple,ro.rippleVisible,no&&ro.ripplePulsate),go={width:ao,height:ao,top:-(ao/2)+oo,left:-(ao/2)+io},yo=clsx(ro.child,co&&ro.childLeaving,no&&ro.childPulsate);return!so&&!co&&fo(!0),react$1.exports.useEffect(()=>{if(!so&&uo!=null){const vo=setTimeout(uo,lo);return()=>{clearTimeout(vo)}}},[uo,so,lo]),jsx("span",{className:mo,style:go,children:jsx("span",{className:yo})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var touchRippleClasses$1=touchRippleClasses;const _excluded$5=["center","classes","className"];let _=eo=>eo,_t,_t2,_t3,_t4;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t||(_t=_`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2||(_t2=_`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3||(_t3=_`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled$1("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled$1(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4||(_t4=_`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses$1.rippleVisible,enterKeyframe,DURATION,({theme:eo})=>eo.transitions.easing.easeInOut,touchRippleClasses$1.ripplePulsate,({theme:eo})=>eo.transitions.duration.shorter,touchRippleClasses$1.child,touchRippleClasses$1.childLeaving,exitKeyframe,DURATION,({theme:eo})=>eo.transitions.easing.easeInOut,touchRippleClasses$1.childPulsate,pulsateKeyframe,({theme:eo})=>eo.transitions.easing.easeInOut),TouchRipple=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiTouchRipple"}),{center:io=!1,classes:oo={},className:ao}=no,so=_objectWithoutPropertiesLoose(no,_excluded$5),[uo,lo]=react$1.exports.useState([]),co=react$1.exports.useRef(0),fo=react$1.exports.useRef(null);react$1.exports.useEffect(()=>{fo.current&&(fo.current(),fo.current=null)},[uo]);const mo=react$1.exports.useRef(!1),go=react$1.exports.useRef(null),yo=react$1.exports.useRef(null),vo=react$1.exports.useRef(null);react$1.exports.useEffect(()=>()=>{clearTimeout(go.current)},[]);const Ao=react$1.exports.useCallback(xo=>{const{pulsate:wo,rippleX:bo,rippleY:_o,rippleSize:To,cb:No}=xo;lo(Po=>[...Po,jsx(TouchRippleRipple,{classes:{ripple:clsx(oo.ripple,touchRippleClasses$1.ripple),rippleVisible:clsx(oo.rippleVisible,touchRippleClasses$1.rippleVisible),ripplePulsate:clsx(oo.ripplePulsate,touchRippleClasses$1.ripplePulsate),child:clsx(oo.child,touchRippleClasses$1.child),childLeaving:clsx(oo.childLeaving,touchRippleClasses$1.childLeaving),childPulsate:clsx(oo.childPulsate,touchRippleClasses$1.childPulsate)},timeout:DURATION,pulsate:wo,rippleX:bo,rippleY:_o,rippleSize:To},co.current)]),co.current+=1,fo.current=No},[oo]),ho=react$1.exports.useCallback((xo={},wo={},bo)=>{const{pulsate:_o=!1,center:To=io||wo.pulsate,fakeElement:No=!1}=wo;if(xo.type==="mousedown"&&mo.current){mo.current=!1;return}xo.type==="touchstart"&&(mo.current=!0);const Po=No?null:vo.current,Co=Po?Po.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Do,zo,Ro;if(To||xo.clientX===0&&xo.clientY===0||!xo.clientX&&!xo.touches)Do=Math.round(Co.width/2),zo=Math.round(Co.height/2);else{const{clientX:Lo,clientY:$o}=xo.touches?xo.touches[0]:xo;Do=Math.round(Lo-Co.left),zo=Math.round($o-Co.top)}if(To)Ro=Math.sqrt((2*Co.width**2+Co.height**2)/3),Ro%2===0&&(Ro+=1);else{const Lo=Math.max(Math.abs((Po?Po.clientWidth:0)-Do),Do)*2+2,$o=Math.max(Math.abs((Po?Po.clientHeight:0)-zo),zo)*2+2;Ro=Math.sqrt(Lo**2+$o**2)}xo.touches?yo.current===null&&(yo.current=()=>{Ao({pulsate:_o,rippleX:Do,rippleY:zo,rippleSize:Ro,cb:bo})},go.current=setTimeout(()=>{yo.current&&(yo.current(),yo.current=null)},DELAY_RIPPLE)):Ao({pulsate:_o,rippleX:Do,rippleY:zo,rippleSize:Ro,cb:bo})},[io,Ao]),po=react$1.exports.useCallback(()=>{ho({},{pulsate:!0})},[ho]),Mo=react$1.exports.useCallback((xo,wo)=>{if(clearTimeout(go.current),xo.type==="touchend"&&yo.current){yo.current(),yo.current=null,go.current=setTimeout(()=>{Mo(xo,wo)});return}yo.current=null,lo(bo=>bo.length>0?bo.slice(1):bo),fo.current=wo},[]);return react$1.exports.useImperativeHandle(ro,()=>({pulsate:po,start:ho,stop:Mo}),[po,ho,Mo]),jsx(TouchRippleRoot,_extends({className:clsx(oo.root,touchRippleClasses$1.root,ao),ref:vo},so,{children:jsx(TransitionGroup$1,{component:null,exit:!0,children:uo})}))});var TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(eo){return generateUtilityClass("MuiButtonBase",eo)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]);var buttonBaseClasses$1=buttonBaseClasses;const _excluded$4=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$4=eo=>{const{disabled:to,focusVisible:ro,focusVisibleClassName:no,classes:io}=eo,ao=composeClasses({root:["root",to&&"disabled",ro&&"focusVisible"]},getButtonBaseUtilityClass,io);return ro&&no&&(ao.root+=` ${no}`),ao},ButtonBaseRoot=styled$1("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(eo,to)=>to.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses$1.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiButtonBase"}),{action:io,centerRipple:oo=!1,children:ao,className:so,component:uo="button",disabled:lo=!1,disableRipple:co=!1,disableTouchRipple:fo=!1,focusRipple:mo=!1,LinkComponent:go="a",onBlur:yo,onClick:vo,onContextMenu:Ao,onDragLeave:ho,onFocus:po,onFocusVisible:Mo,onKeyDown:xo,onKeyUp:wo,onMouseDown:bo,onMouseLeave:_o,onMouseUp:To,onTouchEnd:No,onTouchMove:Po,onTouchStart:Co,tabIndex:Do=0,TouchRippleProps:zo,touchRippleRef:Ro,type:Lo}=no,$o=_objectWithoutPropertiesLoose(no,_excluded$4),jo=react$1.exports.useRef(null),Wo=react$1.exports.useRef(null),Ko=useForkRef(Wo,Ro),{isFocusVisibleRef:Jo,onFocus:Go,onBlur:Xo,ref:va}=useIsFocusVisible(),[tu,Zs]=react$1.exports.useState(!1);lo&&tu&&Zs(!1),react$1.exports.useImperativeHandle(io,()=>({focusVisible:()=>{Zs(!0),jo.current.focus()}}),[]),react$1.exports.useEffect(()=>{tu&&mo&&!co&&Wo.current.pulsate()},[co,mo,tu]);function ga(ou,qo,vu=fo){return useEventCallback(Mu=>(qo&&qo(Mu),!vu&&Wo.current&&Wo.current[ou](Mu),!0))}const qs=ga("start",bo),su=ga("stop",Ao),uu=ga("stop",ho),Js=ga("stop",To),Xs=ga("stop",ou=>{tu&&ou.preventDefault(),_o&&_o(ou)}),iu=ga("start",Co),hu=ga("stop",No),yu=ga("stop",Po),Ru=ga("stop",ou=>{Xo(ou),Jo.current===!1&&Zs(!1),yo&&yo(ou)},!1),ku=useEventCallback(ou=>{jo.current||(jo.current=ou.currentTarget),Go(ou),Jo.current===!0&&(Zs(!0),Mo&&Mo(ou)),po&&po(ou)}),Fo=()=>{const ou=jo.current;return uo&&uo!=="button"&&!(ou.tagName==="A"&&ou.href)},Vo=react$1.exports.useRef(!1),lu=useEventCallback(ou=>{mo&&!Vo.current&&tu&&Wo.current&&ou.key===" "&&(Vo.current=!0,Wo.current.stop(ou,()=>{Wo.current.start(ou)})),ou.target===ou.currentTarget&&Fo()&&ou.key===" "&&ou.preventDefault(),xo&&xo(ou),ou.target===ou.currentTarget&&Fo()&&ou.key==="Enter"&&!lo&&(ou.preventDefault(),vo&&vo(ou))}),au=useEventCallback(ou=>{mo&&ou.key===" "&&Wo.current&&tu&&!ou.defaultPrevented&&(Vo.current=!1,Wo.current.stop(ou,()=>{Wo.current.pulsate(ou)})),wo&&wo(ou),vo&&ou.target===ou.currentTarget&&Fo()&&ou.key===" "&&!ou.defaultPrevented&&vo(ou)});let Tu=uo;Tu==="button"&&($o.href||$o.to)&&(Tu=go);const mu={};Tu==="button"?(mu.type=Lo===void 0?"button":Lo,mu.disabled=lo):(!$o.href&&!$o.to&&(mu.role="button"),lo&&(mu["aria-disabled"]=lo));const gu=useForkRef(va,jo),Fu=useForkRef(ro,gu),[zu,Iu]=react$1.exports.useState(!1);react$1.exports.useEffect(()=>{Iu(!0)},[]);const du=zu&&!co&&!lo,xu=_extends({},no,{centerRipple:oo,component:uo,disabled:lo,disableRipple:co,disableTouchRipple:fo,focusRipple:mo,tabIndex:Do,focusVisible:tu}),pu=useUtilityClasses$4(xu);return jsxs(ButtonBaseRoot,_extends({as:Tu,className:clsx(pu.root,so),ownerState:xu,onBlur:Ru,onClick:vo,onContextMenu:su,onFocus:ku,onKeyDown:lu,onKeyUp:au,onMouseDown:qs,onMouseLeave:Xs,onMouseUp:Js,onDragLeave:uu,onTouchEnd:hu,onTouchMove:yu,onTouchStart:iu,ref:Fu,tabIndex:lo?-1:Do,type:Lo},mu,$o,{children:[ao,du?jsx(TouchRipple$1,_extends({ref:Ko,center:oo},zo)):null]}))});var ButtonBase$1=ButtonBase;function getBottomNavigationUtilityClass(eo){return generateUtilityClass("MuiBottomNavigation",eo)}generateUtilityClasses("MuiBottomNavigation",["root"]);const _excluded$3=["children","className","component","onChange","showLabels","value"],useUtilityClasses$3=eo=>{const{classes:to}=eo;return composeClasses({root:["root"]},getBottomNavigationUtilityClass,to)},BottomNavigationRoot=styled$1("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(eo,to)=>to.root})(({theme:eo})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:eo.palette.background.paper})),BottomNavigation=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiBottomNavigation"}),{children:io,className:oo,component:ao="div",onChange:so,showLabels:uo=!1,value:lo}=no,co=_objectWithoutPropertiesLoose(no,_excluded$3),fo=_extends({},no,{component:ao,showLabels:uo}),mo=useUtilityClasses$3(fo);return jsx(BottomNavigationRoot,_extends({as:ao,className:clsx(mo.root,oo),ref:ro,ownerState:fo},co,{children:react$1.exports.Children.map(io,(go,yo)=>{if(!react$1.exports.isValidElement(go))return null;const vo=go.props.value===void 0?yo:go.props.value;return react$1.exports.cloneElement(go,{selected:vo===lo,showLabel:go.props.showLabel!==void 0?go.props.showLabel:uo,value:vo,onChange:so})})}))});var BottomNavigation$1=BottomNavigation;function getBottomNavigationActionUtilityClass(eo){return generateUtilityClass("MuiBottomNavigationAction",eo)}const bottomNavigationActionClasses=generateUtilityClasses("MuiBottomNavigationAction",["root","iconOnly","selected","label"]);var bottomNavigationActionClasses$1=bottomNavigationActionClasses;const _excluded$2=["className","icon","label","onChange","onClick","selected","showLabel","value"],useUtilityClasses$2=eo=>{const{classes:to,showLabel:ro,selected:no}=eo;return composeClasses({root:["root",!ro&&!no&&"iconOnly",no&&"selected"],label:["label",!ro&&!no&&"iconOnly",no&&"selected"]},getBottomNavigationActionUtilityClass,to)},BottomNavigationActionRoot=styled$1(ButtonBase$1,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(eo,to)=>{const{ownerState:ro}=eo;return[to.root,!ro.showLabel&&!ro.selected&&to.iconOnly]}})(({theme:eo,ownerState:to})=>_extends({transition:eo.transitions.create(["color","padding-top"],{duration:eo.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:eo.palette.text.secondary,flexDirection:"column",flex:"1"},!to.showLabel&&!to.selected&&{paddingTop:16},{[`&.${bottomNavigationActionClasses$1.selected}`]:{paddingTop:6,color:eo.palette.primary.main}})),BottomNavigationActionLabel=styled$1("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(eo,to)=>to.label})(({theme:eo,ownerState:to})=>_extends({fontFamily:eo.typography.fontFamily,fontSize:eo.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!to.showLabel&&!to.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${bottomNavigationActionClasses$1.selected}`]:{fontSize:eo.typography.pxToRem(14)}})),BottomNavigationAction=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiBottomNavigationAction"}),{className:io,icon:oo,label:ao,onChange:so,onClick:uo,value:lo}=no,co=_objectWithoutPropertiesLoose(no,_excluded$2),fo=no,mo=useUtilityClasses$2(fo),go=yo=>{so&&so(yo,lo),uo&&uo(yo)};return jsxs(BottomNavigationActionRoot,_extends({ref:ro,className:clsx(mo.root,io),focusRipple:!0,onClick:go,ownerState:fo},co,{children:[oo,jsx(BottomNavigationActionLabel,{className:mo.label,ownerState:fo,children:ao})]}))});var BottomNavigationAction$1=BottomNavigationAction;const defaultTheme=createTheme(),Box=createBox({defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate});var Box$1=Box;function getButtonUtilityClass(eo){return generateUtilityClass("MuiButton",eo)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var buttonClasses$1=buttonClasses;const ButtonGroupContext=react$1.exports.createContext({});var ButtonGroupContext$1=ButtonGroupContext;const _excluded$1=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$1=eo=>{const{color:to,disableElevation:ro,fullWidth:no,size:io,variant:oo,classes:ao}=eo,so={root:["root",oo,`${oo}${capitalize(to)}`,`size${capitalize(io)}`,`${oo}Size${capitalize(io)}`,to==="inherit"&&"colorInherit",ro&&"disableElevation",no&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(io)}`],endIcon:["endIcon",`iconSize${capitalize(io)}`]},uo=composeClasses(so,getButtonUtilityClass,ao);return _extends({},ao,uo)},commonIconStyles=eo=>_extends({},eo.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},eo.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},eo.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled$1(ButtonBase$1,{shouldForwardProp:eo=>rootShouldForwardProp(eo)||eo==="classes",name:"MuiButton",slot:"Root",overridesResolver:(eo,to)=>{const{ownerState:ro}=eo;return[to.root,to[ro.variant],to[`${ro.variant}${capitalize(ro.color)}`],to[`size${capitalize(ro.size)}`],to[`${ro.variant}Size${capitalize(ro.size)}`],ro.color==="inherit"&&to.colorInherit,ro.disableElevation&&to.disableElevation,ro.fullWidth&&to.fullWidth]}})(({theme:eo,ownerState:to})=>_extends({},eo.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:eo.shape.borderRadius,transition:eo.transitions.create(["background-color","box-shadow","border-color","color"],{duration:eo.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:alpha(eo.palette.text.primary,eo.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},to.variant==="text"&&to.color!=="inherit"&&{backgroundColor:alpha(eo.palette[to.color].main,eo.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},to.variant==="outlined"&&to.color!=="inherit"&&{border:`1px solid ${eo.palette[to.color].main}`,backgroundColor:alpha(eo.palette[to.color].main,eo.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},to.variant==="contained"&&{backgroundColor:eo.palette.grey.A100,boxShadow:eo.shadows[4],"@media (hover: none)":{boxShadow:eo.shadows[2],backgroundColor:eo.palette.grey[300]}},to.variant==="contained"&&to.color!=="inherit"&&{backgroundColor:eo.palette[to.color].dark,"@media (hover: none)":{backgroundColor:eo.palette[to.color].main}}),"&:active":_extends({},to.variant==="contained"&&{boxShadow:eo.shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},to.variant==="contained"&&{boxShadow:eo.shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:eo.palette.action.disabled},to.variant==="outlined"&&{border:`1px solid ${eo.palette.action.disabledBackground}`},to.variant==="outlined"&&to.color==="secondary"&&{border:`1px solid ${eo.palette.action.disabled}`},to.variant==="contained"&&{color:eo.palette.action.disabled,boxShadow:eo.shadows[0],backgroundColor:eo.palette.action.disabledBackground})},to.variant==="text"&&{padding:"6px 8px"},to.variant==="text"&&to.color!=="inherit"&&{color:eo.palette[to.color].main},to.variant==="outlined"&&{padding:"5px 15px",border:`1px solid ${eo.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},to.variant==="outlined"&&to.color!=="inherit"&&{color:eo.palette[to.color].main,border:`1px solid ${alpha(eo.palette[to.color].main,.5)}`},to.variant==="contained"&&{color:eo.palette.getContrastText(eo.palette.grey[300]),backgroundColor:eo.palette.grey[300],boxShadow:eo.shadows[2]},to.variant==="contained"&&to.color!=="inherit"&&{color:eo.palette[to.color].contrastText,backgroundColor:eo.palette[to.color].main},to.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},to.size==="small"&&to.variant==="text"&&{padding:"4px 5px",fontSize:eo.typography.pxToRem(13)},to.size==="large"&&to.variant==="text"&&{padding:"8px 11px",fontSize:eo.typography.pxToRem(15)},to.size==="small"&&to.variant==="outlined"&&{padding:"3px 9px",fontSize:eo.typography.pxToRem(13)},to.size==="large"&&to.variant==="outlined"&&{padding:"7px 21px",fontSize:eo.typography.pxToRem(15)},to.size==="small"&&to.variant==="contained"&&{padding:"4px 10px",fontSize:eo.typography.pxToRem(13)},to.size==="large"&&to.variant==="contained"&&{padding:"8px 22px",fontSize:eo.typography.pxToRem(15)},to.fullWidth&&{width:"100%"}),({ownerState:eo})=>eo.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled$1("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(eo,to)=>{const{ownerState:ro}=eo;return[to.startIcon,to[`iconSize${capitalize(ro.size)}`]]}})(({ownerState:eo})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},eo.size==="small"&&{marginLeft:-2},commonIconStyles(eo))),ButtonEndIcon=styled$1("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(eo,to)=>{const{ownerState:ro}=eo;return[to.endIcon,to[`iconSize${capitalize(ro.size)}`]]}})(({ownerState:eo})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},eo.size==="small"&&{marginRight:-2},commonIconStyles(eo))),Button=react$1.exports.forwardRef(function eo(to,ro){const no=react$1.exports.useContext(ButtonGroupContext$1),io=resolveProps(no,to),oo=useThemeProps({props:io,name:"MuiButton"}),{children:ao,color:so="primary",component:uo="button",className:lo,disabled:co=!1,disableElevation:fo=!1,disableFocusRipple:mo=!1,endIcon:go,focusVisibleClassName:yo,fullWidth:vo=!1,size:Ao="medium",startIcon:ho,type:po,variant:Mo="text"}=oo,xo=_objectWithoutPropertiesLoose(oo,_excluded$1),wo=_extends({},oo,{color:so,component:uo,disabled:co,disableElevation:fo,disableFocusRipple:mo,fullWidth:vo,size:Ao,type:po,variant:Mo}),bo=useUtilityClasses$1(wo),_o=ho&&jsx(ButtonStartIcon,{className:bo.startIcon,ownerState:wo,children:ho}),To=go&&jsx(ButtonEndIcon,{className:bo.endIcon,ownerState:wo,children:go});return jsxs(ButtonRoot,_extends({ownerState:wo,className:clsx(lo,no.className),component:uo,disabled:co,focusRipple:!mo,focusVisibleClassName:clsx(bo.focusVisible,yo),ref:ro,type:po},xo,{classes:bo,children:[_o,ao,To]}))});var Button$1=Button;function getButtonGroupUtilityClass(eo){return generateUtilityClass("MuiButtonGroup",eo)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]);var buttonGroupClasses$1=buttonGroupClasses;const _excluded=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(eo,to)=>{const{ownerState:ro}=eo;return[{[`& .${buttonGroupClasses$1.grouped}`]:to.grouped},{[`& .${buttonGroupClasses$1.grouped}`]:to[`grouped${capitalize(ro.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:to[`grouped${capitalize(ro.variant)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:to[`grouped${capitalize(ro.variant)}${capitalize(ro.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:to[`grouped${capitalize(ro.variant)}${capitalize(ro.color)}`]},to.root,to[ro.variant],ro.disableElevation===!0&&to.disableElevation,ro.fullWidth&&to.fullWidth,ro.orientation==="vertical"&&to.vertical]},useUtilityClasses=eo=>{const{classes:to,color:ro,disabled:no,disableElevation:io,fullWidth:oo,orientation:ao,variant:so}=eo,uo={root:["root",so,ao==="vertical"&&"vertical",oo&&"fullWidth",io&&"disableElevation"],grouped:["grouped",`grouped${capitalize(ao)}`,`grouped${capitalize(so)}`,`grouped${capitalize(so)}${capitalize(ao)}`,`grouped${capitalize(so)}${capitalize(ro)}`,no&&"disabled"]};return composeClasses(uo,getButtonGroupUtilityClass,to)},ButtonGroupRoot=styled$1("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:eo,ownerState:to})=>_extends({display:"inline-flex",borderRadius:eo.shape.borderRadius},to.variant==="contained"&&{boxShadow:eo.shadows[2]},to.disableElevation&&{boxShadow:"none"},to.fullWidth&&{width:"100%"},to.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses$1.grouped}`]:_extends({minWidth:40,"&:not(:first-of-type)":_extends({},to.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},to.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},to.variant==="outlined"&&to.orientation==="horizontal"&&{marginLeft:-1},to.variant==="outlined"&&to.orientation==="vertical"&&{marginTop:-1}),"&:not(:last-of-type)":_extends({},to.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},to.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},to.variant==="text"&&to.orientation==="horizontal"&&{borderRight:`1px solid ${eo.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},to.variant==="text"&&to.orientation==="vertical"&&{borderBottom:`1px solid ${eo.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},to.variant==="text"&&to.color!=="inherit"&&{borderColor:alpha(eo.palette[to.color].main,.5)},to.variant==="outlined"&&to.orientation==="horizontal"&&{borderRightColor:"transparent"},to.variant==="outlined"&&to.orientation==="vertical"&&{borderBottomColor:"transparent"},to.variant==="contained"&&to.orientation==="horizontal"&&{borderRight:`1px solid ${eo.palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${eo.palette.action.disabled}`}},to.variant==="contained"&&to.orientation==="vertical"&&{borderBottom:`1px solid ${eo.palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${eo.palette.action.disabled}`}},to.variant==="contained"&&to.color!=="inherit"&&{borderColor:eo.palette[to.color].dark},{"&:hover":_extends({},to.variant==="outlined"&&to.orientation==="horizontal"&&{borderRightColor:"currentColor"},to.variant==="outlined"&&to.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),"&:hover":_extends({},to.variant==="contained"&&{boxShadow:"none"})},to.variant==="contained"&&{boxShadow:"none"})})),ButtonGroup=react$1.exports.forwardRef(function eo(to,ro){const no=useThemeProps({props:to,name:"MuiButtonGroup"}),{children:io,className:oo,color:ao="primary",component:so="div",disabled:uo=!1,disableElevation:lo=!1,disableFocusRipple:co=!1,disableRipple:fo=!1,fullWidth:mo=!1,orientation:go="horizontal",size:yo="medium",variant:vo="outlined"}=no,Ao=_objectWithoutPropertiesLoose(no,_excluded),ho=_extends({},no,{color:ao,component:so,disabled:uo,disableElevation:lo,disableFocusRipple:co,disableRipple:fo,fullWidth:mo,orientation:go,size:yo,variant:vo}),po=useUtilityClasses(ho),Mo=react$1.exports.useMemo(()=>({className:po.grouped,color:ao,disabled:uo,disableElevation:lo,disableFocusRipple:co,disableRipple:fo,fullWidth:mo,size:yo,variant:vo}),[ao,uo,lo,co,fo,mo,yo,vo,po.grouped]);return jsx(ButtonGroupRoot,_extends({as:so,role:"group",className:clsx(po.root,oo),ref:ro,ownerState:ho},Ao,{children:jsx(ButtonGroupContext$1.Provider,{value:Mo,children:io})}))});var ButtonGroup$1=ButtonGroup,DirectionsWalk={},interopRequireDefault={exports:{}};(function(eo){function to(ro){return ro&&ro.__esModule?ro:{default:ro}}eo.exports=to,eo.exports.__esModule=!0,eo.exports.default=eo.exports})(interopRequireDefault);var createSvgIcon={},require$$0=getAugmentedNamespace(utils);(function(eo){Object.defineProperty(eo,"__esModule",{value:!0}),Object.defineProperty(eo,"default",{enumerable:!0,get:function(){return to.createSvgIcon}});var to=require$$0})(createSvgIcon);var require$$2=getAugmentedNamespace(jsxRuntime),_interopRequireDefault$1=interopRequireDefault.exports;Object.defineProperty(DirectionsWalk,"__esModule",{value:!0});var default_1$1=DirectionsWalk.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(createSvgIcon),_jsxRuntime$1=require$$2,_default$1=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"}),"DirectionsWalk");default_1$1=DirectionsWalk.default=_default$1;var ViewInAr={},_interopRequireDefault=interopRequireDefault.exports;Object.defineProperty(ViewInAr,"__esModule",{value:!0});var default_1=ViewInAr.default=void 0,_createSvgIcon=_interopRequireDefault(createSvgIcon),_jsxRuntime=require$$2,_default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"m18.25 7.6-5.5-3.18c-.46-.27-1.04-.27-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z"}),"ViewInAr");default_1=ViewInAr.default=_default;export{AmbientLight as A,Box$1 as B,CSS3DRenderer as C,DirectionalLight as D,Euler as E,FiveCanvas as F,Group as G,useFiveModelReadyState as H,ButtonGroup$1 as I,Button$1 as J,Line as L,Mesh as M,Object3D as O,PerspectiveCamera as P,ReactDOM as R,Scene as S,Vector3 as V,WebGLRenderer as W,unsafe__useFiveInstance as a,jsxs as b,createFiveProvider as c,CSS3DObject as d,MeshBasicMaterial as e,DoubleSide as f,PlaneGeometry as g,Raycaster as h,CanvasTexture as i,jsx as j,Five as k,AdditiveBlending as l,Matrix4 as m,AnimationMixer as n,Vector2 as o,parseWork as p,useFiveEventCallback as q,react$1 as r,sRGBEncoding as s,Paper$1 as t,useFiveState as u,BottomNavigation$1 as v,BottomNavigationAction$1 as w,default_1$1 as x,default_1 as y,React as z};
